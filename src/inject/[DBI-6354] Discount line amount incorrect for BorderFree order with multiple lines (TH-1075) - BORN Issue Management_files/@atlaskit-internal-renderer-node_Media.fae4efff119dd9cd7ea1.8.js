try{window.performance.mark("@atlaskit-internal-renderer-node_Media.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["@atlaskit-internal-renderer-node_Media"],{"./node_modules/@atlaskit/adf-utils/dist/esm/traverse/traverse.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("./node_modules/@atlaskit/adf-utils/node_modules/tslib/tslib.es6.js");function r(e,t){if(!function(e){return!0}())throw new Error('Visitors are not valid: "'+Object.keys(t).join(", ")+'"');return function e(t,n,r,o,s){var a=r[t.type]||r.any,c=Object(i.a)({},t);if(a){var u=a(Object(i.a)({},c),n,o,s);if(!1===u)return!1;c=u||t}c.content&&(c.content=c.content.reduce((function(t,i,o){if(!i)return t;var a=e(i,{node:c,parent:n},r,o,s+1);return!1!==a&&t.push(a),t}),[]));return c}(e,{node:void 0},t,0,0)}},"./node_modules/@atlaskit/adf-utils/node_modules/tslib/tslib.es6.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o}));var i=function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function r(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}Object.create},"./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/icon/glyph/editor/warning.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("./node_modules/react/index.js")),r=o(n("./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/icon/cjs/components/Icon.js"));function o(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var a=function(e){return i.default.createElement(r.default,s({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M13.31 5.343l7.359 13.17A1 1 0 0 1 19.796 20H4.204a1 1 0 0 1-.873-1.488l7.36-13.169a1.5 1.5 0 0 1 2.618 0zM12 8.5a1.091 1.091 0 0 0-1.081 1.239l.513 3.766a.573.573 0 0 0 1.136 0l.513-3.766A1.091 1.091 0 0 0 12 8.5zm0 8.63a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EditorWarningIcon";var c=a;t.default=c},"./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/icon/glyph/file.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("./node_modules/react/index.js")),r=o(n("./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/icon/cjs/components/Icon.js"));function o(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var a=function(e){return i.default.createElement(r.default,s({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M17 10.005V19H7V5h5.99v2.49a1.5 1.5 0 0 0 1.5 1.5h4.5v-.522c0-.297-.132-.578-.359-.768l-5.074-4.236c-.36-.3-.813-.464-1.282-.464H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8.995h-2z"/><rect x="8" y="12" width="8" height="2" rx="1"/><rect x="8" y="15" width="4" height="2" rx="1"/></g></svg>'},e))};a.displayName="FileIcon";var c=a;t.default=c},"./node_modules/@atlaskit/chunkinator/dist/esm/chunkinator.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("./node_modules/rxjs/operators/tap.js"),r=n("./node_modules/rxjs/operators/concatMap.js"),o=n("./node_modules/rxjs/observable/fromPromise.js"),s=n("./node_modules/rxjs/Subject.js"),a=n("./node_modules/rxjs/observable/range.js"),c=n("./node_modules/rxjs/operators/map.js"),u=n("./node_modules/rxjs-async-map/out/index.js");function l(e){return Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)})).join("")}var d=function(e){return function(e){var t=new FileReader;return new Promise((function(n,i){t.onload=function(){n(this.result)},t.onerror=i,t.readAsArrayBuffer(e)}))}(e).then((function(e){return crypto.subtle.digest("SHA-1",e)})).then(l)},p=n("./node_modules/tslib/tslib.es6.js"),m=n("./node_modules/rxjs/operators/bufferCount.js"),f=n("./node_modules/rxjs/observable/from.js");var h=function(e,t,n){return Object(o.fromPromise)(function(e){return Object(p.__awaiter)(this,void 0,void 0,(function(){return Object(p.__generator)(this,(function(t){switch(t.label){case 0:return"string"!=typeof e?[3,2]:[4,fetch(e).then((function(e){return e.blob()}))];case 1:return[2,t.sent()];case 2:return[2,e]}}))}))}(e)).pipe(Object(r.concatMap)((function(e){var o=t.chunkSize,s=n.onProgress,l=Math.ceil(e.size/o),h=function(e,t){var n=t.batchSize,i=t.prober;return e.pipe(Object(m.bufferCount)(n),Object(r.concatMap)((function(e){return i(e).then((function(t){return e.map((function(e,n){return Object(p.__assign)(Object(p.__assign)({},e),{exists:t[n]})}))}))})),Object(r.concatMap)((function(e){return Object(f.from)(e)})))}(function(e,t){var n=t.hasher,i=t.concurrency;return Object(u.asyncMap)(function(e){return function(t){return e(t).then((function(e){return{blob:t,hash:e+"-"+t.size}}))}}(n||d),i)(e)}(function(e,t){var n=t.size,i=Math.ceil(e.size/n);return Object(a.range)(0,i).pipe(Object(c.map)((function(t){return e.slice(t*n,(t+1)*n)})))}(e,{size:o}),{concurrency:t.hashingConcurrency,hasher:t.hashingFunction}),{batchSize:t.probingBatchSize,prober:t.probingFunction}),v=0,b=function(e,t){return e.pipe(Object(u.asyncMap)((function(e){return e.exists?Promise.resolve(e):t.uploader(e).then((function(){return e}))}),t.concurrency))}(h,{concurrency:t.uploadingConcurrency,uploader:t.uploadingFunction});return s&&(b=b.pipe(Object(i.tap)((function(){s((v+=1)/l)})))),function(e,t){return e.pipe(Object(m.bufferCount)(t.batchSize)).pipe(Object(r.concatMap)((function(e){return t.processor?t.processor(e).then((function(){return e})):Promise.resolve(e)})))}(b,{batchSize:t.processingBatchSize,processor:t.processingFunction})})))},v=function(e,t,n){return function(e){var t=new s.Subject,n=e.subscribe(t);return{response:t.toPromise(),cancel:function(){n.unsubscribe(),t.error("canceled")}}}(h(e,t,n))}},"./node_modules/@atlaskit/editor-common/dist/esm/provider-factory/with-providers.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/react/index.js"),o=function(e){function t(t){var n=e.call(this,t)||this;n.handleProvider=function(e,t){n.setState((function(n){var r,o=n.providers;return{providers:Object(i.__assign)(Object(i.__assign)({},o),(r={},r[e]=t,r))}}))};var r={};return n.props.providers.forEach((function(e){r[e]=void 0})),n.state={providers:r},n}return Object(i.__extends)(t,e),t.prototype.UNSAFE_componentWillMount=function(){var e=this,t=this.props,n=t.providers,i=t.providerFactory;n.forEach((function(t){i.subscribe(t,e.handleProvider)}))},t.prototype.componentWillUnmount=function(){var e=this,t=this.props,n=t.providers,i=t.providerFactory;n.forEach((function(t){i.unsubscribe(t,e.handleProvider)}))},t.prototype.render=function(){var e=this.state;return(0,this.props.renderNode)(e.providers)},t.displayName="WithProviders",t}(r.PureComponent)},"./node_modules/@atlaskit/editor-common/dist/esm/utils/imageLoader.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/react/index.js"),o=n.n(r),s=function(e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={imageStatus:"loading"},e.onLoad=function(){e.setState({imageStatus:"complete"});var t=e.props.onExternalImageLoaded;t&&e.img&&t({width:e.img.naturalWidth,height:e.img.naturalHeight})},e.onError=function(){e.setState({imageStatus:"error"})},e}return Object(i.__extends)(n,t),n.prototype.componentDidMount=function(){this.fetchImage(this.props)},n.prototype.UNSAFE_componentWillReceiveProps=function(e){e.url!==this.props.url&&(this.setState({imageStatus:"loading"}),this.fetchImage(e))},n.prototype.componentWillUnmount=function(){this.img&&(this.img.removeEventListener("load",this.onLoad),this.img.removeEventListener("error",this.onError),this.img=null)},n.prototype.fetchImage=function(e){var t=e.url;t&&(this.img||(this.img=new Image,this.img.addEventListener("load",this.onLoad),this.img.addEventListener("error",this.onError)),this.img.src=t)},n.prototype.render=function(){var t=this.state.imageStatus;return o.a.createElement(e,Object(i.__assign)({},this.props,{imageStatus:t}))},n}(r.Component)}},"./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/root/card/cardLoader.js":function(e,t,n){"use strict";var i=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/node_modules/tslib/tslib.es6.js"),r=n("./node_modules/react/index.js"),o=n.n(r),s=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/cardLoading.js"),a=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={Card:t.Card,MediaCardErrorBoundary:t.MediaCardErrorBoundary},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,r,o,s;return Object(i.d)(this,(function(a){switch(a.label){case 0:if(this.state.Card)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.all([n.e("@atlaskit-media-client").then(n.bind(null,"./node_modules/@atlaskit/media-client/dist/esm/index.js")),n.e("@atlaskit-internal_Card").then(n.bind(null,"./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/root/card/index.js")),n.e("@atlaskit-internal_MediaCardErrorBoundary").then(n.bind(null,"./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/root/media-card-analytics-error-boundary.js"))])];case 2:return e=i.f.apply(void 0,[a.sent(),3]),r=e[0],o=e[1],s=e[2],t.Card=r.withMediaClient(o.Card,this.props.featureFlags),t.MediaCardErrorBoundary=s.default,this.setState({Card:t.Card,MediaCardErrorBoundary:t.MediaCardErrorBoundary}),[3,4];case 3:return a.sent(),[3,4];case 4:return[2]}}))}))},t.prototype.render=function(){var e=this.props,t=e.dimensions,n=e.testId,r=this.state,a=r.Card,c=r.MediaCardErrorBoundary;return a&&c?o.a.createElement(c,null,o.a.createElement(a,Object(i.a)({},this.props))):o.a.createElement(s.a,{testId:n,dimensions:t})},t.displayName="AsyncCard",t}(o.a.PureComponent);t.a=a},"./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/errorIcon/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/node_modules/tslib/tslib.es6.js"),o=n("./node_modules/react/index.js"),s=n.n(o),a=n("./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/icon/glyph/editor/warning.js"),c=n.n(a),u=n("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(i||(i=Object(r.e)(["\n  display: flex;\n  color: #ff991f;\n"],["\n  display: flex;\n  color: #ff991f;\n"]))),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.c)(t,e),t.prototype.render=function(){var e=this.props.size;return s.a.createElement(u,null,s.a.createElement(c.a,{label:"Error",size:e}))},t.defaultProps={size:"small"},t}(o.Component)},"./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/cardError.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/node_modules/tslib/tslib.es6.js"),r=n("./node_modules/react/index.js"),o=n.n(r),s=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/errorIcon/index.js"),a=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/styled.js"),c=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/getDimensionsWithDefault.js"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=Object(c.a)(this.props.dimensions);return o.a.createElement(a.a,{dimensions:e},this.icon)},Object.defineProperty(t.prototype,"icon",{get:function(){var e=this.props.size;return o.a.createElement(s.a,{size:e})},enumerable:!1,configurable:!0}),t.defaultProps={size:"medium"},t}(r.Component)},"./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/cardLoading.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/node_modules/tslib/tslib.es6.js"),r=n("./node_modules/react/index.js"),o=n.n(r),s=n("./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/icon/glyph/file.js"),a=n.n(s),c=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/getDimensionsWithDefault.js"),u=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/styled.js"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.dimensions,n=e.testId,i=Object(c.a)(t);return o.a.createElement(u.a,{"data-testid":n||"media-card-loading","data-test-loading":!0,dimensions:i},this.icon)},Object.defineProperty(t.prototype,"icon",{get:function(){return o.a.createElement(a.a,{label:"loading",size:"medium"})},enumerable:!1,configurable:!0}),t}(r.Component)},"./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/getDimensionsWithDefault.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return void 0===e&&(e={width:"100%",height:"100%"}),{height:"number"==typeof e.height?e.height+"px":e.height,width:"number"==typeof e.width?e.width+"px":e.width}}},"./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/styled.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i,r,o=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/node_modules/tslib/tslib.es6.js"),s=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("./node_modules/@atlaskit/media-ui/dist/esm/mixins.js"),c=n("./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/theme/dist/esm/utils/themed.js"),u=n("./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/theme/dist/esm/colors.js"),l=Object(s.keyframes)(i||(i=Object(o.e)(["\n  0%{\n    opacity: 1;\n  }\n\n  50%{\n    opacity: 0.6;\n  }\n\n  100%{\n    opacity: 1;\n  }\n"],["\n  0%{\n    opacity: 1;\n  }\n\n  50%{\n    opacity: 0.6;\n  }\n\n  100%{\n    opacity: 1;\n  }\n"]))),d=s.default.div(r||(r=Object(o.e)(["\n  "," background: ",";\n  color: ",";\n  ","\n  max-height: 100%;\n  max-width: 100%;\n\n  ","\n  > span {\n    animation: "," 0.8s infinite;\n  }\n"],["\n  "," background: ",";\n  color: ",";\n  ","\n  max-height: 100%;\n  max-width: 100%;\n\n  ","\n  > span {\n    animation: "," 0.8s infinite;\n  }\n"])),a.c,Object(c.a)({light:u.N20,dark:u.DN50}),Object(c.a)({light:u.N50,dark:u.DN100}),a.b,(function(e){return"\n      width: "+e.dimensions.width+";\n      height: "+e.dimensions.height+";\n    "}),l)},"./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/node_modules/tslib/tslib.es6.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"h",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return d}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function s(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function a(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}function d(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}Object.create},"./node_modules/@atlaskit/media-client/dist/esm/client/collection-fetcher.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("./node_modules/@atlaskit/media-client/node_modules/tslib/tslib.es6.js"),r=n("./node_modules/rxjs/ReplaySubject.js"),o=n("./node_modules/@atlaskit/media-client/dist/esm/models/file-state.js"),s=n("./node_modules/@atlaskit/media-client/dist/esm/file-streams-cache.js"),a={},c=function(){function e(e){this.mediaStore=e}return e.prototype.createFileStateObserver=function(e,t){var n=new r.ReplaySubject(1),s=Object(i.a)({id:e},t),a=Object(o.h)({data:s});return n.next(a),n},e.prototype.populateCache=function(e){var t=this;e.forEach((function(e){var n=t.createFileStateObserver(e.id,e.details);Object(s.b)().set(e.id,n)}))},e.prototype.removeFromCache=function(e,t){var n=a[t].items.findIndex((function(t){return t.id===e}));-1!==n&&(Object(s.b)().remove(e),a[t].items.splice(n,1))},e.prototype.getItems=function(e,t){var n=this;a[e]||(a[e]=function(){return{items:[],subject:new r.ReplaySubject(1),isLoadingNextPage:!1}}());var o=a[e],s=o.subject;return this.mediaStore.getCollectionItems(e,Object(i.a)(Object(i.a)({},t),{details:"full"})).then((function(e){var t=e.data,i=t.contents,r=t.nextInclusiveStartKey;n.populateCache(i),o.items=e.data.contents,o.nextInclusiveStartKey=r,s.next(o.items)})).catch((function(e){return s.error(e)})),s},e.prototype.removeFile=function(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var r;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,this.mediaStore.removeCollectionFile(e,t,n)];case 1:return i.sent(),this.removeFromCache(e,t),(r=a[t]).subject.next(r.items),[2]}}))}))},e.prototype.loadNextPage=function(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,r,o,s,c,u,l,d,p,m,f,h;return Object(i.d)(this,(function(v){switch(v.label){case 0:return n=a[e],r=!!n&&n.isLoadingNextPage,n&&n.nextInclusiveStartKey&&!r?(n.isLoadingNextPage=!0,o=a[e],s=o.nextInclusiveStartKey,c=o.items,u=o.subject,[4,this.mediaStore.getCollectionItems(e,Object(i.a)(Object(i.a)({},t),{inclusiveStartKey:s,details:"full"}))]):[2];case 1:return l=v.sent(),d=l.data,p=d.contents,m=d.nextInclusiveStartKey,this.populateCache(p),f=l.data.contents,h=Object(i.g)(c,f),u.next(h),a[e]={items:h,nextInclusiveStartKey:m,subject:u,isLoadingNextPage:!1},[2]}}))}))},e}()},"./node_modules/@atlaskit/media-client/dist/esm/client/file-fetcher.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var i=n("./node_modules/@atlaskit/media-client/node_modules/tslib/tslib.es6.js"),r=n("./node_modules/uuid/v4.js"),o=n.n(r),s=n("./node_modules/dataloader/index.js"),a=n.n(s),c=n("./node_modules/@atlaskit/media-core/dist/esm/index.js"),u=n("./node_modules/@atlaskit/media-common/dist/esm/downloadUrl.js"),l=n("./node_modules/@atlaskit/media-client/dist/esm/models/file-state.js"),d=n("./node_modules/@atlaskit/media-client/dist/esm/file-streams-cache.js"),p=n("./node_modules/@atlaskit/media-client/dist/esm/uploader.js"),m=n("./node_modules/@atlaskit/media-client/dist/esm/globalMediaEventEmitter.js"),f=n("./node_modules/@atlaskit/media-client/dist/esm/constants.js"),h=n("./node_modules/@atlaskit/media-client/dist/esm/client/media-store.js"),v=n("./node_modules/uuid-validate/index.js"),b=n.n(v),y=n("./node_modules/@atlaskit/media-client/dist/esm/utils/getMediaTypeFromMimeType.js"),_=function(e,t){return Object(l.a)(e)||"unknown"!==e.mediaType?{}:{mediaType:t}},g=n("./node_modules/@atlaskit/media-client/dist/esm/utils/observableToPromise.js"),j=function(e){return new Promise((function(t,n){var i=URL.createObjectURL(e),r=new Image;r.src=i,r.onload=function(){var e={width:r.width,height:r.height};URL.revokeObjectURL(i),t(e)},r.onerror=n}))},w=n("./node_modules/@atlaskit/media-client/dist/esm/utils/createFileStateSubject.js"),O=n("./node_modules/@atlaskit/media-client/dist/esm/utils/isMimeTypeSupportedByBrowser.js"),x=n("./node_modules/@atlaskit/media-client/dist/esm/utils/isMimeTypeSupportedByServer.js"),k=function(e,t,n){return("doc"===e||!Object(O.d)(t)||!n)&&Object(x.d)(t)},S=n("./node_modules/@atlaskit/media-common/dist/esm/mediaFeatureFlags.js"),C={poll_intervalMs:Object(S.a)("poll_intervalMs"),poll_maxAttempts:Object(S.a)("poll_maxAttempts"),poll_backoffFactor:Object(S.a)("poll_backoffFactor"),poll_maxIntervalMs:Object(S.a)("poll_maxIntervalMs"),poll_maxGlobalFailures:Object(S.a)("poll_maxGlobalFailures")},I=function(){function e(e){this.poll_intervalMs=0,this.attempt=1,this.shouldIterate=!0,this.timeoutId=0,this.options=Object(i.a)(Object(i.a)({},C),e),this.poll_intervalMs=this.options.poll_intervalMs}return e.prototype.execute=function(t){return Object(i.b)(this,void 0,void 0,(function(){var n,r,o,s,a=this;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(n=this.options,r=n.poll_maxAttempts,o=n.poll_maxGlobalFailures,e.failures>=o)return[2,this.fail(new Error("Maximum failures exceeded"))];if(0===r)return[2,this.fail(new Error("Maximum attempts exceeded"))];i.label=1;case 1:return i.trys.push([1,3,,4]),this.shouldIterate=!1,[4,t()];case 2:return i.sent(),this.shouldIterate&&(this.attempt++,this.attempt<=r?(this.poll_intervalMs=this.getIntervalMsForIteration(this.attempt-1),this.timeoutId=window.setTimeout((function(){return a.execute(t)}),this.poll_intervalMs)):this.fail(new Error("Maximum attempts exceeded"))),[3,4];case 3:return s=i.sent(),this.fail(s),[3,4];case 4:return[2]}}))}))},e.prototype.fail=function(t){var n=this.onError;e.failures+=1,this.cancel(),n&&n(t)},e.prototype.getIntervalMsForIteration=function(e){var t=this.options.poll_intervalMs;if(1===e)return t;for(var n=2;n<=e;n++)t*=this.options.poll_backoffFactor;return Math.min(Math.round(t),this.options.poll_maxIntervalMs)},e.prototype.next=function(){this.shouldIterate=!0},e.prototype.cancel=function(){window.clearTimeout(this.timeoutId),this.timeoutId=0},e.failures=0,e}(),E=function(e,t){return t?e+"-"+t:e},P=function(e){return e.error instanceof Error},F=function(e,t){var n=t.reduce((function(e,t){var n=t.id,i=t.collection;return e[E(n,i)]=P(t)?t:t.details,e}),{});return e.map((function(e){var t=e.id,i=e.collection,r=E(t,i);return n[r]}))},T=function(){function e(e){var t=this;this.mediaStore=e,this.batchLoadingFunc=function(e){return Object(i.b)(t,void 0,void 0,(function(){var t,n,r=this;return Object(i.d)(this,(function(o){switch(o.label){case 0:return"__media-single-file-collection__",t=e.reduce((function(e,t){var n=t.collection||"__media-single-file-collection__",i=e[n]||[];return i.push(t.id),e[n]=i,e}),{}),n=[],[4,Promise.all(Object.keys(t).map((function(e){return Object(i.b)(r,void 0,void 0,(function(){var r,o,s,a;return Object(i.d)(this,(function(c){switch(c.label){case 0:r=t[e],o="__media-single-file-collection__"===e?void 0:e,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.mediaStore.getItems(r,o)];case 2:return s=c.sent(),n.push.apply(n,Object(i.g)(s.data.items)),[3,4];case 3:return a=c.sent(),r.forEach((function(e){n.push({id:e,error:a||new Error("Failed to fetch"),collection:o})})),[3,4];case 4:return[2]}}))}))})))];case 1:return o.sent(),[2,F(e,n)]}}))}))},this.createDownloadFileStream=function(e,n){var r=Object(w.a)(),o=t.mediaStore.featureFlags,s={poll_intervalMs:Object(S.a)("poll_intervalMs",o),poll_maxAttempts:Object(S.a)("poll_maxAttempts",o),poll_backoffFactor:Object(S.a)("poll_backoffFactor",o),poll_maxIntervalMs:Object(S.a)("poll_maxIntervalMs",o),poll_maxGlobalFailures:o&&o.poll_maxGlobalFailures},a=new I(s);return a.onError=function(e){return r.error(e)},a.execute((function(){return Object(i.b)(t,void 0,void 0,(function(){var t,o;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,this.dataloader.load({id:e,collection:n})];case 1:if(!(t=i.sent()))return[2];if(P(t))return r.error(t),[2];switch(o=Object(l.i)(e,t),r.next(o),o.status){case"processing":a.next();break;case"processed":r.complete()}return[2]}}))}))})),r},this.dataloader=new a.a(this.batchLoadingFunc,{maxBatchSize:100})}return e.prototype.getFileState=function(e,t){var n=this;if(!b()(e)){var i=Object(w.a)();return i.error("invalid id was passed to getFileState"),i}return Object(d.b)().getOrInsert(e,(function(){var i=t&&t.collectionName;return n.createDownloadFileStream(e,i)}))},e.prototype.getCurrentState=function(e,t){return Object(g.a)(this.getFileState(e,t))},e.prototype.getArtifactURL=function(e,t,n){return this.mediaStore.getArtifactURL(e,t,n)},e.prototype.getFileBinaryURL=function(e,t){return this.mediaStore.getFileBinaryURL(e,t)},e.prototype.touchFiles=function(e,t){return this.mediaStore.touchFiles({descriptors:e},{collection:t}).then((function(e){return e.data}))},e.prototype.generateUploadableFileUpfrontIds=function(e){var t=o()(),n=o()(),i={fileId:t,occurrenceKey:n,collection:e};return{id:t,occurrenceKey:n,deferredUploadId:this.touchFiles([i],e).then((function(e){return e.created[0].uploadId}))}},e.prototype.uploadExternal=function(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,r,o,s,a,c,u,l,p=this;return Object(i.d)(this,(function(m){return n=this.generateUploadableFileUpfrontIds(t),r=n.id,o=n.occurrenceKey,s=Object(w.a)(),a=fetch(e).then((function(e){return e.blob()})).catch((function(){})),c=new Promise((function(e,t){return Object(i.b)(p,void 0,void 0,(function(){var n;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,a];case 1:return(n=i.sent())||t("Could not fetch the blob"),e({value:n,origin:"remote"}),[2]}}))}))})),u=e.split("/").pop()||"",l={status:"processing",name:u,size:0,mediaType:"unknown",mimeType:"",id:r,occurrenceKey:o,preview:c},s.next(l),Object(d.b)().set(r,s),[2,new Promise((function(e,l){return Object(i.b)(p,void 0,void 0,(function(){var d,p,m,f,h,v;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,a];case 1:return(d=i.sent())?(p=d.type,m=d.size,f={content:d,mimeType:p,collection:t,name:u},h=Object(y.a)(p),s.next({status:"processing",name:u,size:m,mediaType:h,mimeType:p,id:r,occurrenceKey:o,preview:c}),this.upload(f,void 0,n),[4,j(d)]):[2,l("Could not download remote file")];case 2:return v=i.sent(),e({dimensions:v,uploadableFileUpfrontIds:n}),[2]}}))}))}))]}))}))},e.prototype.upload=function(e,t,n){var r=this;"string"==typeof e.content&&(e.content=function(e){for(var t=e.split(",")[1],n=atob(t),i=[],r=function(e){var t=n.slice(e,e+512),r=t.split("").map((function(e,n){return t.charCodeAt(n)})),o=new Uint8Array(r);i.push(o)},o=0;o<n.length;o+=512)r(o);return new Blob(i,{type:"image/jpeg"})}(e.content));var o=e.content,s=e.name,a=void 0===s?"":s,c=e.collection;n||(n=this.generateUploadableFileUpfrontIds(c));var u,l,m=n.id,f=n.occurrenceKey,h="",v=0,b=function(e){if(e.content instanceof Blob){var t=e.content.type;return Object(y.a)(t)}return"unknown"}(e),g=Object(w.a)();o instanceof Blob&&(v=o.size,h=o.type,Object(O.d)(o.type)&&(u={value:o,origin:"local"}));var j={id:m,occurrenceKey:f,name:a,size:v,mediaType:b,mimeType:h,preview:u},x=function(e){g.next(Object(i.a)(Object(i.a)({status:"uploading"},j),{progress:e}))},S=Object(p.a)(e,this.mediaStore,n,{onUploadFinish:function(e){if(e){if("canceled"!==e){var t=e instanceof Error?e.message:e;g.next({id:m,status:"error",message:t})}return g.error(e)}k(b,h,u)?l=r.createDownloadFileStream(m,c).subscribe({next:function(e){return g.next(Object(i.a)(Object(i.a)(Object(i.a)({},j),e),_(e,b)))},error:function(e){return g.error(e)},complete:function(){return g.complete()}}):(g.next(Object(i.a)({status:"processing",representations:{}},j)),g.complete())},onProgress:x}).cancel;return Object(d.b)().set(m,g),setTimeout((function(){x(0)}),0),t&&t.setAbort((function(){S(),l&&l.unsubscribe()})),g},e.prototype.downloadBinary=function(e,t,n){return void 0===t&&(t="download"),Object(i.b)(this,void 0,void 0,(function(){var r;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,this.mediaStore.getFileBinaryURL(e,n)];case 1:return r=i.sent(),Object(u.a)(r,{name:t}),m.a.emit("media-viewed",{fileId:e,isUserCollection:n===f.c,viewingLevel:"download"}),[2]}}))}))},e.prototype.copyFile=function(e,t,n){return void 0===n&&(n={}),Object(i.b)(this,void 0,void 0,(function(){var r,o,s,a,u,p,m,f,v,b,g,j,O,x,S,C,I,E,P,F,T,L,M,U,A,z,N;return Object(i.d)(this,(function(B){switch(B.label){case 0:return r=e.authProvider,o=e.collection,s=e.id,a=t.authProvider,u=t.collection,p=t.replaceFileId,m=t.occurrenceKey,f=n.preview,v=n.mimeType,b=t.mediaStore||new h.a({authProvider:a}),j=c.authToOwner,[4,r({collectionName:o})];case 1:g=j.apply(void 0,[B.sent()]),O={sourceFile:{id:s,collection:o,owner:g}},x={collection:u,replaceFileId:p,occurrenceKey:m},S=Object(d.b)(),B.label=2;case 2:return B.trys.push([2,4,,5]),[4,b.copyFileWithToken(O,x)];case 3:return I=B.sent().data,E=Object(i.a)(Object(i.a)({},I),v?{mimeType:v}:void 0),P=E.id,F=E.mimeType,T=F?Object(y.a)(F):"unknown",L=Object(l.h)({data:E}),N=S.get(P),M=N||Object(w.a)(),U=!Object(l.a)(L)&&f?{preview:f}:{},!Object(l.b)(L)&&F&&k(T,F,f)?(M.next(Object(i.a)(Object(i.a)(Object(i.a)({},L),_(L,T)),U)),C=this.createDownloadFileStream(P,u).subscribe({next:function(e){return M.next(Object(i.a)(Object(i.a)(Object(i.a)({},e),_(e,T)),!Object(l.a)(e)&&U))},error:function(e){return M.error(e)},complete:function(){return M.complete()}})):Object(l.f)(L)||M.next(Object(i.a)(Object(i.a)({},L),!Object(l.a)(L)&&U)),S.has(P)||Object(d.b)().set(P,M),[2,I];case 4:throw A=B.sent(),C&&C.unsubscribe(),p&&(z={id:s,status:"error",message:"error copying file to "+u},(N=S.get(p))?N.next(z):S.set(s,Object(w.a)(z))),A;case 5:return[2]}}))}))},e}()},"./node_modules/@atlaskit/media-client/dist/esm/client/media-client.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("./node_modules/@atlaskit/media-client/node_modules/tslib/tslib.es6.js"),r=n("./node_modules/eventemitter2/lib/eventemitter2.js"),o=n("./node_modules/@atlaskit/media-client/dist/esm/client/media-store.js"),s=n("./node_modules/@atlaskit/media-client/dist/esm/client/collection-fetcher.js"),a=n("./node_modules/@atlaskit/media-client/dist/esm/client/file-fetcher.js"),c=n("./node_modules/@atlaskit/media-client/dist/esm/client/stargate-client.js"),u=function(){function e(e,t){this.mediaClientConfig=e,this.featureFlags=t,this.mediaStore=new o.a({authProvider:e.authProvider},t),this.config=e,this.collection=new s.a(this.mediaStore),this.file=new a.a(this.mediaStore),this.eventEmitter=new r.EventEmitter2,this.stargate=new c.a(e.stargateBaseUrl)}return e.prototype.getImage=function(e,t,n,i){return this.mediaStore.getImage(e,t,n,i)},e.prototype.getImageUrl=function(e,t){return this.mediaStore.getFileImageURL(e,t)},e.prototype.getImageMetadata=function(e,t){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,this.mediaStore.getImageMetadata(e,t)];case 1:return[2,n.sent().metadata]}}))}))},e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.emit=function(e,t){return this.eventEmitter.emit(e,t)},e}()},"./node_modules/@atlaskit/media-client/dist/esm/client/media-store.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("./node_modules/@atlaskit/media-client/node_modules/tslib/tslib.es6.js"),r=n("./node_modules/@atlaskit/media-client/dist/esm/utils/request.js"),o=n("./node_modules/@atlaskit/media-client/dist/esm/models/artifacts.js"),s=n("./node_modules/@atlaskit/media-client/dist/esm/constants.js"),a={"max-age":s.a,allowAnimated:!0,mode:"crop"},c={limit:30,sortDirection:"desc"},u=function(e,t){return void 0===t&&(t=!1),Object(i.a)(Object(i.a)(Object(i.a)({},a),e),t?{width:s.b,height:s.b}:{})},l={Accept:"application/json","Content-Type":"application/json"},d=function(){function e(e,t){var n=this;this.config=e,this.featureFlags=t,this.getFile=function(e,t){return void 0===t&&(t={}),n.request("/file/"+e,{params:t,authContext:{collectionName:t.collection}}).then(r.d)},this.getFileImageURL=function(e,t){return Object(i.b)(n,void 0,void 0,(function(){var n;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,this.config.authProvider()];case 1:return n=i.sent(),[2,Object(r.a)(n.baseUrl+"/file/"+e+"/image",{params:u(t),auth:n})]}}))}))},this.getArtifactURL=function(e,t,a){return Object(i.b)(n,void 0,void 0,(function(){var n,c;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(!(n=Object(o.a)(e,t)))throw new Error("artifact "+t+" not found");return[4,this.config.authProvider({collectionName:a})];case 1:return c=i.sent(),[2,Object(r.a)(""+c.baseUrl+n,{params:{collection:a,"max-age":s.a},auth:c})]}}))}))},this.getImage=function(e,t,o,s){return Object(i.b)(n,void 0,void 0,(function(){var n;return Object(i.d)(this,(function(i){return!1,[2,this.request("/file/"+e+"/image",{headers:n,params:u(t,s),authContext:{collectionName:t&&t.collection}},o).then(r.c)]}))}))},this.getItems=function(e,t){var i=e.map((function(e){return{type:"file",id:e,collection:t}}));return n.request("/items",{method:"POST",body:JSON.stringify({descriptors:i}),headers:l,authContext:{collectionName:t}}).then(r.d)},this.getImageMetadata=function(e,t){return n.request("/file/"+e+"/image/metadata",{params:t,authContext:{collectionName:t&&t.collection}}).then(r.d)}}return e.prototype.getCollectionItems=function(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,o,s,a;return Object(i.d)(this,(function(u){switch(u.label){case 0:return[4,this.request("/collection/"+e+"/items",{authContext:{collectionName:e},params:Object(i.a)(Object(i.a)({},c),t),headers:{Accept:"application/json"}})];case 1:return n=u.sent(),[4,Object(r.d)(n)];case 2:return o=u.sent().data,s=o.contents,a=o.nextInclusiveStartKey,[2,{data:{contents:s.filter((function(e){return e.details.size&&e.details.size>0})),nextInclusiveStartKey:a}}]}}))}))},e.prototype.removeCollectionFile=function(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var r;return Object(i.d)(this,(function(i){switch(i.label){case 0:return r={actions:[{action:"remove",item:{type:"file",id:e,occurrenceKey:n}}]},[4,this.request("/collection/"+t,{method:"PUT",authContext:{collectionName:t},body:JSON.stringify(r),headers:{Accept:"application/json","Content-Type":"application/json"}})];case 1:return i.sent(),[2]}}))}))},e.prototype.createUpload=function(e,t){return void 0===e&&(e=1),this.request("/upload",{method:"POST",authContext:{collectionName:t},params:{createUpTo:e},headers:{Accept:"application/json"}}).then(r.d)},e.prototype.uploadChunk=function(e,t,n){return this.request("/chunk/"+e,{method:"PUT",authContext:{collectionName:n},body:t}).then(r.e)},e.prototype.probeChunks=function(e,t){return this.request("/chunk/probe",{method:"POST",authContext:{collectionName:t},body:JSON.stringify({chunks:e}),headers:l}).then(r.d)},e.prototype.createFileFromUpload=function(e,t){return void 0===t&&(t={}),this.request("/file/upload",{method:"POST",authContext:{collectionName:t.collection},params:t,body:JSON.stringify(e),headers:l}).then(r.d)},e.prototype.touchFiles=function(e,t){return void 0===t&&(t={}),this.request("/upload/createWithFiles",{method:"POST",headers:l,body:JSON.stringify(e),authContext:{collectionName:t.collection}}).then(r.d)},e.prototype.getFileBinaryURL=function(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,this.config.authProvider({collectionName:t})];case 1:return n=i.sent(),[2,Object(r.a)(n.baseUrl+"/file/"+e+"/binary",{params:{dl:!0,collection:t,"max-age":s.a},auth:n})]}}))}))},e.prototype.appendChunksToUpload=function(e,t,n){return this.request("/upload/"+e+"/chunks",{method:"PUT",authContext:{collectionName:n},body:JSON.stringify(t),headers:l}).then(r.e)},e.prototype.copyFileWithToken=function(e,t){return this.request("/file/copy/withToken",{method:"POST",authContext:{collectionName:t.collection},body:JSON.stringify(e),headers:l,params:t}).then(r.d)},e.prototype.request=function(e,t,n){return void 0===t&&(t={method:"GET",authContext:{}}),Object(i.b)(this,void 0,void 0,(function(){var o,s,a,c,u,l,d,p;return Object(i.d)(this,(function(i){switch(i.label){case 0:return o=this.config.authProvider,s=t.method,a=t.authContext,c=t.params,u=t.headers,l=t.body,[4,o(a)];case 1:return d=i.sent(),[4,Object(r.f)(""+d.baseUrl+e,{method:s,auth:d,params:c,headers:u,body:l},n)];case 2:return function(e){if(!e||!window||!window.sessionStorage)return;window.sessionStorage.getItem("media-api-region")!==e&&window.sessionStorage.setItem("media-api-region",e)}((p=i.sent()).headers.get("x-media-region")),[2,p]}}))}))},e}()},"./node_modules/@atlaskit/media-client/dist/esm/client/stargate-client.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("./node_modules/@atlaskit/media-client/node_modules/tslib/tslib.es6.js"),r=function(){function e(e){this.baseUrl=e||"/gateway/api"}return e.prototype.fetchToken=function(e){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,fetch(this.baseUrl+"/media/auth/smartedge",{credentials:"include",headers:{"x-client-id":e}})];case 1:return[2,t.sent().json()]}}))}))},e.prototype.isTokenExpired=function(e){var t=(new Date).getTime()/1e3;return e.data.iat+e.data.expiresIn-t<0},e}()},"./node_modules/@atlaskit/media-client/dist/esm/constants.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var i="recents",r=2592e3,o=4096},"./node_modules/@atlaskit/media-client/dist/esm/file-streams-cache.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var i,r=function(){function e(e){this.streams=e}return e.prototype.has=function(e){return!!this.streams.find(e)},e.prototype.set=function(e,t){this.streams.set(e,t)},e.prototype.get=function(e){return this.streams.get(e)},e.prototype.getOrInsert=function(e,t){return this.has(e)||this.set(e,t()),this.get(e)},e.prototype.removeAll=function(){this.streams.removeAll()},e.prototype.remove=function(e){this.streams.remove(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this.streams.size},enumerable:!1,configurable:!0}),e}(),o=function(){if(!i){var e=n("./node_modules/@atlaskit/media-core/dist/esm/index.js").mediaState;i=new r(e.streams)}return i}},"./node_modules/@atlaskit/media-client/dist/esm/globalMediaEventEmitter.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("./node_modules/@atlaskit/media-core/dist/esm/index.js"),r={on:function(e,t){i.mediaState.eventEmitter&&i.mediaState.eventEmitter.on(e,t)},off:function(e,t){i.mediaState.eventEmitter&&i.mediaState.eventEmitter.off(e,t)},emit:function(e,t){if(i.mediaState.eventEmitter)return i.mediaState.eventEmitter.emit(e,t)}}},"./node_modules/@atlaskit/media-client/dist/esm/models/artifacts.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e,t){var n=e[t];if(n&&n.url)return n.url}},"./node_modules/@atlaskit/media-client/dist/esm/models/file-state.js":function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return p}));var i=n("./node_modules/@atlaskit/media-client/node_modules/tslib/tslib.es6.js"),r=function(e){return"uploading"===e.status},o=function(e){return"processing"===e.status},s=function(e){return"processed"===e.status},a=function(e){return"error"===e.status},c=function(e){return!a(e)&&!!e.preview},u=function(e){return["processed","failed-processing","error"].includes(e.status)},l=function(e){switch(e.status){case"processing":case"processed":case"failed-processing":return!(!e.representations||!e.representations.image);default:return!1}},d=function(e){var t=e.data,n=t.id,r=t.name,o=t.size,s=t.processingStatus,a=t.artifacts,c={id:n,name:r,size:o,mediaType:t.mediaType,mimeType:t.mimeType,artifacts:a,representations:t.representations,createdAt:t.createdAt};switch(s){case"pending":case void 0:return Object(i.a)(Object(i.a)({},c),{status:"processing"});case"succeeded":return Object(i.a)(Object(i.a)({},c),{status:"processed"});case"failed":return Object(i.a)(Object(i.a)({},c),{status:"failed-processing"})}},p=function(e,t){return d({data:Object(i.a)({id:e},t)})}},"./node_modules/@atlaskit/media-client/dist/esm/uploader.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("./node_modules/@atlaskit/media-client/node_modules/tslib/tslib.es6.js"),r=n("./node_modules/@atlaskit/media-client/node_modules/@atlaskit/chunkinator/dist/esm/chunkinator.js"),o=null,s=function(){return Object(i.b)(void 0,void 0,void 0,(function(){var e,t,r;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(e=3,o)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,5]),[4,n.e("229dc7ab498").then(n.bind(null,"./node_modules/@atlaskit/media-client/dist/esm/utils/hashing/workerHasher.js"))];case 2:return t=i.sent().WorkerHasher,o=new t(e),[3,5];case 3:return i.sent(),[4,n.e("229dc7ab497").then(n.bind(null,"./node_modules/@atlaskit/media-client/dist/esm/utils/hashing/simpleHasher.js"))];case 4:return r=i.sent().SimpleHasher,o=new r,[3,5];case 5:return[2,o]}}))}))},a=function(e){return Object(i.b)(void 0,void 0,void 0,(function(){return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,s()];case 1:return[2,t.sent().hash(e)]}}))}))},c=function(e,t){return function(n){return Object(i.b)(void 0,void 0,void 0,(function(){var r,o;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,e.probeChunks(p(n),t)];case 1:return r=i.sent(),o=r.data.results,[2,Object.values(o).map((function(e){return e.exists}))]}}))}))}},u=function(e,t){return function(n){return e.uploadChunk(n.hash,n.blob,t)}},l=function(e,t,n){var r=0;return function(o){return Object(i.b)(void 0,void 0,void 0,(function(){var s,a;return Object(i.d)(this,(function(i){switch(i.label){case 0:return a=(s=e).appendChunksToUpload,[4,t];case 1:return[4,a.apply(s,[i.sent(),{chunks:p(o),offset:r},n])];case 2:return i.sent(),r+=o.length,[2]}}))}))}},d=function(e,t,n,o){var s=e.content,d=e.collection,p=e.name,m=e.mimeType,f=n.id,h=n.occurrenceKey,v=n.deferredUploadId,b=Object(r.a)(s,{hashingFunction:a,hashingConcurrency:5,probingBatchSize:100,chunkSize:4194304,uploadingConcurrency:3,uploadingFunction:u(t,d),probingFunction:c(t,d),processingBatchSize:1e3,processingFunction:l(t,v,d)},{onProgress:function(e){o&&o.onProgress(e)}}),y=b.response,_=b.cancel,g=o&&o.onUploadFinish||function(){};return Promise.all([v,y]).then((function(e){var n=Object(i.e)(e,1)[0];return Object(i.b)(void 0,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return[4,t.createFileFromUpload({uploadId:n,name:p,mimeType:m},{occurrenceKey:h,collection:d,replaceFileId:f})];case 1:return e.sent(),g(),[2]}}))}))})).catch(g),{cancel:_}},p=function(e){return e.map((function(e){return e.hash}))}},"./node_modules/@atlaskit/media-client/dist/esm/utils/createFileStateSubject.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("./node_modules/rxjs/ReplaySubject.js"),r=function(e){var t=new i.ReplaySubject(1);return e&&t.next(e),t}},"./node_modules/@atlaskit/media-client/dist/esm/utils/getMediaTypeFromMimeType.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("./node_modules/@atlaskit/media-client/dist/esm/utils/isMimeTypeSupportedByBrowser.js"),r=n("./node_modules/@atlaskit/media-client/dist/esm/utils/isMimeTypeSupportedByServer.js"),o=function(e){return function(e){return["application/x-archive","application/x-cpio","application/x-shar","application/x-iso9660-image","application/x-sbx","application/x-tar","application/x-bzip2","application/gzip","application/x-gzip","application/x-lzip","application/x-lzma","application/x-lzop","application/x-snappy-framed","application/x-xz","application/x-compress","application/zstd","application/x-7z-compressed","application/x-ace-compressed","application/x-astrotite-afa","application/x-alz-compressed","application/vnd.android.package-archive","application/x-freearc","application/x-arj","application/x-b1","application/vnd.ms-cab-compressed","application/x-cfs-compressed","application/x-dar","application/x-dgc-compressed","application/x-apple-diskimage","application/x-gca-compressed","application/java-archive","application/x-lzh","application/x-lzx","application/x-rar-compressed","application/x-stuffit","application/x-stuffitx","application/x-gtar","application/x-ms-wim","application/x-xar","application/zip","application/x-zoo","application/x-par2"].indexOf(e.toLowerCase())>-1}(e)?"archive":Object(i.c)(e)||Object(r.c)(e)?"image":Object(i.b)(e)||Object(r.b)(e)?"doc":Object(i.a)(e)||Object(r.a)(e)?"audio":Object(i.e)(e)||Object(r.f)(e)?"video":"unknown"}},"./node_modules/@atlaskit/media-client/dist/esm/utils/isMimeTypeSupportedByBrowser.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return a}));var i=function(e){return["image/apng","image/bmp","image/gif","image/x-icon","image/jpeg","image/png","image/webp"].indexOf(e.toLowerCase())>-1},r=function(e){return"application/pdf"===e.toLowerCase()},o=function(e){return["audio/aac","audio/flac","audio/mp4","audio/mpeg","audio/ogg","audio/x-ogg","audio/wav","audio/x-wav"].indexOf(e.toLowerCase())>-1},s=function(e){return["video/mp4","video/quicktime"].indexOf(e.toLowerCase())>-1},a=function(e){return r(e)||i(e)||o(e)||s(e)}},"./node_modules/@atlaskit/media-client/dist/esm/utils/isMimeTypeSupportedByServer.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return c}));var i=function(e){return["image/bmp","image/x-windows-bmp","application/dicom","image/gif","image/jpeg","image/jpg","image/jp_","application/jpg","application/x-jpg","image/png","application/png","application/x-png","application/vnd.adobe.photoshop","image/vnd.adobe.photoshop","image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd","image/tiff","image/x-tif","image/x-tiff","application/tif","application/x-tif","application/tiff","application/x-tiff","image/svg+xml","image/heif","image/heif-sequence","image/heic","image/heic-sequence"].indexOf(e.toLowerCase())>-1},r=function(e){return["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/vnd.adobe.illustrator","application/vnd.ms-office","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-excel.template.macroenabled.12","application/vnd.ms-excel.addin.macroenabled.12","application/vnd.ms-excel.sheet.macroenabled","application/vnd.ms-excel.template.macroenabled","application/vnd.ms-excel.addin.macroenabled","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.sun.xml.writer","application/vnd.sun.xml.writer.template","application/vnd.sun.xml.draw","application/vnd.sun.xml.draw.template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/x-vnd.oasis.opendocument.presentation","application/vnd.sun.xml.calc","application/vnd.sun.xml.calc.template","application/vnd.oasis.opendocument.spreadsheet","application/x-vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.text-master","application/x-vnd.oasis.opendocument.text","application/x-vnd.oasis.opendocument.text-template","application/x-vnd.oasis.opendocument.text-master","application/vnd.wordperfect","text/csv","text/x-diff","text/x-perl","text/x-python","text/x-ruby","text/rtf","text/richtext","text/plain","application/txt","application/rtf","application/x-rtf","application/postscript"].indexOf(e.toLowerCase())>-1},o=function(e){return["audio/aac","audio/x-hx-aac-adts","audio/vnd.dolby.dd-raw","audio/aiff","audio/x-aiff","audio/x-monkeys-audio","audio/x-ape","audio/basic","audio/flac","audio/mp4","audio/midi","audio/x-matroska","audio/x-mod","audio/mpeg","audio/ogg","audio/x-ogg","audio/x-pn-realaudio","audio/wav","audio/x-wav","audio/x-ms-wma"].indexOf(e.toLowerCase())>-1},s=function(e){return["video/3gpp","video/3gpp2","video/x-ms-asf","video/avi","video/msvideo","video/x-msvideo","video/x-dv","video/x-flv","video/m2ts","video/x-m4v","video/x-matroska","video/quicktime","video/mp4","video/mpeg","video/ogg","video/x-ogg","video/webm","video/x-ms-wmv"].indexOf(e.toLowerCase())>-1},a=function(e){return["binary/octet-stream"].indexOf(e.toLowerCase())>-1},c=function(e){return i(e)||r(e)||o(e)||s(e)||a(e)}},"./node_modules/@atlaskit/media-client/dist/esm/utils/observableToPromise.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return new Promise((function(t){return e.subscribe({next:function(e){t(e),this.unsubscribe()}})}))}},"./node_modules/@atlaskit/media-client/dist/esm/utils/request.js":function(e,t,n){"use strict";n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return v}));var i=n("./node_modules/@atlaskit/media-client/node_modules/tslib/tslib.es6.js"),r=n("./node_modules/query-string/index.js"),o=n("./node_modules/@atlaskit/media-core/dist/esm/index.js");var s=function(e){function t(t,n){var i=e.call(this,t)||this;return i.message=t,i.statusCode=n,i}return Object(i.c)(t,e),t}(Error),a=function(e){return Object(i.b)(void 0,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return e.ok||e.redirected?[2,e]:[3,1];case 1:return[4,e.text()];case 2:throw t=n.sent(),new s("Got error code "+e.status+": "+t,e.status)}}))}))};function c(e,t,n){void 0===t&&(t={});var r=t.method,o=void 0===r?"GET":r,s=t.auth,c=t.params,u=t.headers,l=t.body,d=t.retryOptions;return function(e,t){void 0===t&&(t={});return Object(i.b)(this,void 0,void 0,(function(){var n,r,o,s,a,c,u=this;return Object(i.d)(this,(function(l){switch(l.label){case 0:n=Object(i.a)(Object(i.a)({},f),t),r=n.startTimeoutInMs,o=function(){return Object(i.b)(u,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return[4,h(r)];case 1:return e.sent(),r*=n.factor,[2]}}))}))},s=1,l.label=1;case 1:if(!(s<=n.attempts))return[3,9];l.label=2;case 2:return l.trys.push([2,4,,8]),[4,e()];case 3:return[2,l.sent()];case 4:return a=l.sent(),v(a)?[2,Promise.reject(a)]:(c=s===n.attempts,function(e){return!(e instanceof TypeError)}(a)&&a.statusCode<500||c?[2,Promise.reject(new Error("The call did not succeed after "+s+" attempts. Last error is "+a.message))]:[3,5]);case 5:return[4,o()];case 6:l.sent(),l.label=7;case 7:return[3,8];case 8:return s++,[3,1];case 9:return[2,Promise.reject(new Error("Exhaused all attempts"))]}}))}))}((function(){return fetch(p(e,{params:c}),{method:o,body:l,headers:m(s)(u),signal:n&&n.signal}).then(a)}),void 0===d?{}:d)}function u(e){return e.json()}function l(e){return e.blob()}function d(){return Promise.resolve()}function p(e,t){var n=t.params,s=t.auth,a=function(e){var t=e.indexOf("?");return t>0?{baseUrl:e.substring(0,t),queryParams:Object(r.parse)(e.substring(t+1,e.length))}:{baseUrl:e}}(e),c=a.baseUrl,u=a.queryParams,l=s&&function(e){return Object(o.isClientBasedAuth)(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}(s),d=Object(r.stringify)(Object(i.a)(Object(i.a)(Object(i.a)({},u),n),l));return c+(d.length>0?"?"+d:"")}function m(e){return function(t){return e?Object(i.a)(Object(i.a)({},t||{}),function(e){return Object(o.isClientBasedAuth)(e)?{"X-Client-Id":e.clientId,Authorization:"Bearer "+e.token}:{"X-Issuer":e.asapIssuer,Authorization:"Bearer "+e.token}}(e)):t}}var f={attempts:5,startTimeoutInMs:1e3,factor:2},h=function(e){return new Promise((function(t){setTimeout(t,e)}))},v=function(e){return"request_cancelled"===e.message||"AbortError"===e.name}},"./node_modules/@atlaskit/media-client/dist/esm/utils/with-media-client-hoc.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var i=n("./node_modules/@atlaskit/media-client/node_modules/tslib/tslib.es6.js"),r=n("./node_modules/react/index.js"),o=n.n(r),s=n("./node_modules/@atlaskit/media-client/dist/esm/client/media-client.js"),a=new Map,c=function(e,t){var n=a.get(e);return n||(n=new s.a(e,t),a.set(e,n)),n},u=function(e,t){return function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return Object(i.c)(r,n),r.prototype.render=function(){var n=this.props,r=n.mediaClientConfig,a=Object(i.f)(n,["mediaClientConfig"]),u=r?c(r,t):function(e){var t={authProvider:function(){return Promise.resolve({clientId:"",token:"",baseUrl:""})}};return new s.a(t,e)}(t);return o.a.createElement(e,Object(i.a)({},a,{mediaClient:u}))},r}(o.a.Component)}},"./node_modules/@atlaskit/media-client/node_modules/@atlaskit/chunkinator/dist/esm/chunkinator.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("./node_modules/rxjs/operators/tap.js"),r=n("./node_modules/rxjs/operators/concatMap.js"),o=n("./node_modules/rxjs/observable/fromPromise.js"),s=n("./node_modules/rxjs/Subject.js"),a=n("./node_modules/rxjs/observable/range.js"),c=n("./node_modules/rxjs/operators/map.js"),u=n("./node_modules/rxjs-async-map/out/index.js");function l(e){return Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)})).join("")}var d=function(e){return function(e){var t=new FileReader;return new Promise((function(n,i){t.onload=function(){n(this.result)},t.onerror=i,t.readAsArrayBuffer(e)}))}(e).then((function(e){return crypto.subtle.digest("SHA-1",e)})).then(l)},p=n("./node_modules/@atlaskit/media-client/node_modules/tslib/tslib.es6.js"),m=n("./node_modules/rxjs/operators/bufferCount.js"),f=n("./node_modules/rxjs/observable/from.js");var h=function(e,t,n){return Object(o.fromPromise)(function(e){return Object(p.b)(this,void 0,void 0,(function(){return Object(p.d)(this,(function(t){switch(t.label){case 0:return"string"!=typeof e?[3,2]:[4,fetch(e).then((function(e){return e.blob()}))];case 1:return[2,t.sent()];case 2:return[2,e]}}))}))}(e)).pipe(Object(r.concatMap)((function(e){var o=t.chunkSize,s=n.onProgress,l=Math.ceil(e.size/o),h=function(e,t){var n=t.batchSize,i=t.prober;return e.pipe(Object(m.bufferCount)(n),Object(r.concatMap)((function(e){return i(e).then((function(t){return e.map((function(e,n){return Object(p.a)(Object(p.a)({},e),{exists:t[n]})}))}))})),Object(r.concatMap)((function(e){return Object(f.from)(e)})))}(function(e,t){var n=t.hasher,i=t.concurrency;return Object(u.asyncMap)(function(e){return function(t){return e(t).then((function(e){return{blob:t,hash:e+"-"+t.size}}))}}(n||d),i)(e)}(function(e,t){var n=t.size,i=Math.ceil(e.size/n);return Object(a.range)(0,i).pipe(Object(c.map)((function(t){return e.slice(t*n,(t+1)*n)})))}(e,{size:o}),{concurrency:t.hashingConcurrency,hasher:t.hashingFunction}),{batchSize:t.probingBatchSize,prober:t.probingFunction}),v=0,b=function(e,t){return e.pipe(Object(u.asyncMap)((function(e){return e.exists?Promise.resolve(e):t.uploader(e).then((function(){return e}))}),t.concurrency))}(h,{concurrency:t.uploadingConcurrency,uploader:t.uploadingFunction});return s&&(b=b.pipe(Object(i.tap)((function(){s((v+=1)/l)})))),function(e,t){return e.pipe(Object(m.bufferCount)(t.batchSize)).pipe(Object(r.concatMap)((function(e){return t.processor?t.processor(e).then((function(){return e})):Promise.resolve(e)})))}(b,{batchSize:t.processingBatchSize,processor:t.processingFunction})})))},v=function(e,t,n){return function(e){var t=new s.Subject,n=e.subscribe(t);return{response:t.toPromise(),cancel:function(){n.unsubscribe(),t.error("canceled")}}}(h(e,t,n))}},"./node_modules/@atlaskit/media-client/node_modules/tslib/tslib.es6.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return l}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function a(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function c(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}Object.create},"./node_modules/@atlaskit/media-common/dist/esm/downloadUrl.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e,t){var n=!!window.MSInputMethodContext&&!!document.documentMode,i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r="media-download-iframe",o=document.createElement("a"),s=document.getElementById(r);s||((s=document.createElement("iframe")).style.display="none",s.id=r,s.name=r,document.body.appendChild(s)),o.href=e,t&&t.name&&(o.download=t.name),o.target=n||i?"_blank":r,document.body.appendChild(o),o.click(),document.body.removeChild(o)}},"./node_modules/@atlaskit/media-common/dist/esm/mediaFeatureFlags.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=function(e){return"undefined"!=typeof window&&window.localStorage?window.localStorage.getItem(e):null},r={newCardExperience:!1,zipPreviews:!1,captions:!1,folderUploads:!1,codeViewer:!1,poll_intervalMs:3e3,poll_maxAttempts:7,poll_backoffFactor:1.25,poll_maxIntervalMs:4e4,poll_maxGlobalFailures:10};function o(e,t){var n=i(e);if(null!==n)try{return JSON.parse(n)}catch(e){}return t&&e in t?t[e]:r[e]}Object.keys(r).forEach((function(e){var t=i(e);null!==t&&console.info("%c* LOCAL * MediaFeatureFlag."+e+" = "+t,"font-weight:bold;color:cyan")}))},"./node_modules/@atlaskit/media-core/dist/esm/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"mediaState",(function(){return r})),n.d(t,"isClientBasedAuth",(function(){return o})),n.d(t,"isAsapBasedAuth",(function(){return s})),n.d(t,"authToOwner",(function(){return a}));var i=n("./node_modules/eventemitter2/lib/eventemitter2.js"),r={streams:new(n("./node_modules/lru-fast/lru.js").LRUCache)(1e3),stateDeferreds:new Map,eventEmitter:new i.EventEmitter2};function o(e){return!!e.clientId}function s(e){return!!e.asapIssuer}var a=function(e){return s(e)?e:{id:e.clientId,baseUrl:e.baseUrl,token:e.token}}},"./node_modules/@atlaskit/media-ui/dist/esm/mixins.js":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return p}));var i,r=n("./node_modules/@atlaskit/media-ui/node_modules/tslib/tslib.es6.js"),o=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),s=n("./node_modules/@atlaskit/atlassian-switcher/node_modules/@atlaskit/theme/dist/esm/constants.js"),a=function(e){return void 0===e&&(e="100%"),"\n    max-width: "+e+("number"==typeof e?"px":"")+";\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  "},c=function(e){void 0===e&&(e="100%");var t="number"==typeof e?"px":"";return"\n    width: "+e+t+";\n    height: "+e+t+";\n  "},u="\n  display: flex;\n  align-items: center;\n  justify-content: center;\n",l=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),"\n  position: absolute;\n  top: "+e+"px;\n  left: "+t+"px;\n"},d="\n  border-radius: "+Object(s.borderRadius)()+"px;\n",p=(Object(s.borderRadius)(),Object(s.borderRadius)(),"\n  animation: "+Object(o.keyframes)(i||(i=Object(r.e)(["\n  0%{\n    opacity: 0;\n  }\n\n  100%{\n    opacity: 1;\n  }\n"],["\n  0%{\n    opacity: 0;\n  }\n\n  100%{\n    opacity: 1;\n  }\n"])))+" .3s cubic-bezier(0.645, 0.045, 0.355, 1);\n")},"./node_modules/@atlaskit/renderer/dist/esm/react/nodes/media.js":function(e,t,n){"use strict";n.r(t);var i=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/react/index.js"),o=n.n(r),s=n("./node_modules/@atlaskit/editor-common/dist/esm/provider-factory/with-providers.js"),a=n("./node_modules/@atlaskit/adf-utils/dist/esm/traverse/traverse.js");var c,u=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/cardLoading.js"),l=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/root/card/cardLoader.js"),d=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/cardError.js"),p=n("./node_modules/@atlaskit/media-client/dist/esm/utils/with-media-client-hoc.js"),m=n("./node_modules/@atlaskit/editor-common/dist/esm/utils/imageLoader.js"),f=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),h=new Map,v=function(e){return e?function(e,t){var n=[];return Object(a.a)(e,{any:function(e){t(e)&&n.push(e)}}),n}(e,(function(e){return"media"===e.type})).reduce((function(e,t){if(t.attrs){var n=t.attrs,i=n.type,r=n.url,o=n.id;"file"===i&&o?e.push({mediaItemType:"file",id:o}):"external"===i&&r&&e.push({mediaItemType:"external-image",dataURI:r,name:r})}return e}),[]):[]},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.saveFileState=function(e,n){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t,r,o,s;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=this.props.collection,r=Object(p.a)(n),o={collectionName:t},[4,r.file.getCurrentState(e,o)];case 1:return s=i.sent(),this.setState({fileState:s}),[2]}}))}))},t.renderLoadingCard=function(){var e=t.props.cardDimensions;return o.a.createElement(u.a,{dimensions:e})},t.getOnCardClickCallback=function(e){var n=t.props.eventHandlers;if(n&&n.media&&n.media.onClick)return function(t,i){var r=t.mediaItemDetails&&"video"===t.mediaItemDetails.mediaType;!(e&&r)&&n&&n.media&&n.media.onClick&&n.media.onClick(t,i)}},t}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,o,s,a,c,u,l,d,p;return Object(i.__generator)(this,(function(m){switch(m.label){case 0:return e=this.props,t=e.rendererContext,n=e.mediaProvider,r=e.contextIdentifierProvider,o=e.id,s=e.url,a=e.collection,n?r?(c=this.setState,u={},[4,r]):[3,2]:[2];case 1:c.apply(this,[(u.contextIdentifierProvider=m.sent(),u)]),m.label=2;case 2:return[4,n];case 3:return l=m.sent(),d=l.viewMediaClientConfig,p=o&&h.has(o)||s&&h.has(s),t&&t.adDoc&&!p&&v(t.adDoc).forEach((function(e){"file"===e.mediaItemType?h.set(e.id,Object(i.__assign)(Object(i.__assign)({},e),{collectionName:a})):"external-image"===e.mediaItemType&&h.set(e.dataURI,e)})),this.setState({mediaClientConfig:d}),o&&this.saveFileState(o,d),[2]}}))}))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this.state.mediaClientConfig,n=e.id;t&&n&&n!==this.props.id&&this.saveFileState(n,t)},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.id,n=e.url;t?h.delete(t):n&&h.delete(n)},t.prototype.renderExternal=function(e){var t=this.state.mediaClientConfig,n=this.props,i=n.cardDimensions,r=n.resizeMode,s=n.appearance,a=n.url,c=n.imageStatus,u=n.disableOverlay,d=n.alt,p=n.featureFlags;if("loading"===c||!a)return this.renderLoadingCard();var m={dataURI:a,name:a,mediaItemType:"external-image"};return o.a.createElement(l.a,{mediaClientConfig:t,alt:d,identifier:m,dimensions:i,appearance:s,resizeMode:r,disableOverlay:u,shouldOpenMediaViewer:e,mediaViewerDataSource:{list:Array.from(h.values())},featureFlags:p})},t.prototype.render=function(){var e=this.state,t=e.contextIdentifierProvider,n=e.mediaClientConfig,r=e.fileState,s=this.props,a=s.id,c=s.alt,u=s.type,p=s.collection,m=s.occurrenceKey,f=s.cardDimensions,v=s.resizeMode,b=s.rendererAppearance,g=s.disableOverlay,j=s.useInlinePlayer,w=s.originalDimensions,O=s.shouldOpenMediaViewer,x=s.featureFlags,k="mobile"===b,S=!k&&(void 0===j||j),C=this.getOnCardClickCallback(S),I="boolean"==typeof O?O:!k&&!C;if("external"===u)return this.renderExternal(I);if("link"===u)return null;if(!n||!a)return this.renderLoadingCard();if(!a||"file"!==u)return o.a.createElement(d.a,{dimensions:f});var E=t&&t.objectId,P={id:a,mediaItemType:"file",collectionName:p,occurrenceKey:m};return o.a.createElement(y,Object(i.__assign)({},_({id:a,alt:c,collection:p,contextIdentifierProvider:t,originalDimensions:w,fileState:r})),o.a.createElement(l.a,{identifier:P,alt:c,contextId:E,mediaClientConfig:n,dimensions:f,originalDimensions:w,onClick:C,resizeMode:v,isLazy:!k,disableOverlay:g,useInlinePlayer:S,shouldOpenMediaViewer:I,mediaViewerDataSource:{list:Array.from(h.values())},featureFlags:x}))},t}(r.Component),y=f.default.div(c||(c=Object(i.__makeTemplateObject)([""],[""]))),_=function(e){var t=e.id,n=e.alt,i=e.collection,r=e.contextIdentifierProvider,o=e.originalDimensions,s=e.fileState,a=r&&r.objectId,c=o&&o.width,u=o&&o.height,l="file",d=1,p="";return s&&"error"!==s.status&&(d=s.size,l=s.name,p=s.mimeType),{"data-context-id":a,"data-type":"file","data-node-type":"media","data-width":c,"data-height":u,"data-id":t,"data-collection":i,"data-file-name":l,"data-file-size":d,"data-file-mime-type":p,"data-alt":n}},g=Object(m.a)(b),j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderCard=function(e){void 0===e&&(e={});var n=e.mediaProvider,r=e.contextIdentifierProvider,s=t.props,a=s.allowAltTextOnImages,c=s.alt,u=s.featureFlags;return o.a.createElement(g,Object(i.__assign)({mediaProvider:n,contextIdentifierProvider:r},t.props,{alt:a?c:void 0,featureFlags:u}))},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props.providers;return e?o.a.createElement(s.a,{providers:["mediaProvider","contextIdentifierProvider"],providerFactory:e,renderNode:this.renderCard}):this.renderCard()},t}(r.PureComponent);t.default=j},"./node_modules/@atlassian/forge-ui-text-renderer/node_modules/@atlaskit/adf-utils/dist/esm/traverse/traverse.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("./node_modules/tslib/tslib.es6.js");function r(e,t){if(!function(e){return!0}())throw new Error('Visitors are not valid: "'+Object.keys(t).join(", ")+'"');return function e(t,n,r,o,s){var a=r[t.type]||r.any,c=Object(i.__assign)({},t);if(a){var u=a(Object(i.__assign)({},c),n,o,s);if(!1===u)return!1;c=u||t}c.content&&(c.content=c.content.reduce((function(t,i,o){var a=e(i,{node:c,parent:n},r,o,s+1);return!1!==a&&t.push(a),t}),[]));return c}(e,{node:void 0},t,0,0)}},"./node_modules/@atlassian/forge-ui-text-renderer/node_modules/@atlaskit/editor-common/dist/esm/provider-factory/with-providers.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/react/index.js"),o=function(e){function t(t){var n=e.call(this,t)||this;n.handleProvider=function(e,t){n.setState((function(n){var r,o=n.providers;return{providers:Object(i.__assign)(Object(i.__assign)({},o),(r={},r[e]=t,r))}}))};var r={};return n.props.providers.forEach((function(e){r[e]=void 0})),n.state={providers:r},n}return Object(i.__extends)(t,e),t.prototype.UNSAFE_componentWillMount=function(){var e=this,t=this.props,n=t.providers,i=t.providerFactory;n.forEach((function(t){i.subscribe(t,e.handleProvider)}))},t.prototype.componentWillUnmount=function(){var e=this,t=this.props,n=t.providers,i=t.providerFactory;n.forEach((function(t){i.unsubscribe(t,e.handleProvider)}))},t.prototype.render=function(){var e=this.state;return(0,this.props.renderNode)(e.providers)},t.displayName="WithProviders",t}(r.PureComponent)},"./node_modules/@atlassian/forge-ui-text-renderer/node_modules/@atlaskit/renderer/dist/esm/react/nodes/media.js":function(e,t,n){"use strict";n.r(t);var i=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/react/index.js"),o=n.n(r),s=n("./node_modules/@atlassian/forge-ui-text-renderer/node_modules/@atlaskit/editor-common/dist/esm/provider-factory/with-providers.js"),a=n("./node_modules/@atlassian/forge-ui-text-renderer/node_modules/@atlaskit/adf-utils/dist/esm/traverse/traverse.js");var c=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/cardLoading.js"),u=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/root/card/cardLoader.js"),l=n("./node_modules/@atlaskit/editor-common/node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/cardError.js"),d=n("./node_modules/eventemitter2/lib/eventemitter2.js"),p=n("./node_modules/query-string/index.js"),m=n("./node_modules/@atlaskit/media-core/dist/esm/index.js");var f=function(e){function t(t,n){var i=e.call(this,t)||this;return i.message=t,i.statusCode=n,i}return Object(i.__extends)(t,e),t}(Error),h=function(e){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t;return Object(i.__generator)(this,(function(n){switch(n.label){case 0:return e.ok||e.redirected?[2,e]:[3,1];case 1:return[4,e.text()];case 2:throw t=n.sent(),new f("Got error code "+e.status+": "+t,e.status)}}))}))};function v(e,t,n){void 0===t&&(t={});var r=t.method,o=void 0===r?"GET":r,s=t.auth,a=t.params,c=t.headers,u=t.body,l=t.retryOptions;return function(e,t){void 0===t&&(t={});return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,s,a,c,u=this;return Object(i.__generator)(this,(function(l){switch(l.label){case 0:n=Object(i.__assign)(Object(i.__assign)({},w),t),r=n.startTimeoutInMs,o=function(){return Object(i.__awaiter)(u,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){switch(e.label){case 0:return[4,O(r)];case 1:return e.sent(),r*=n.factor,[2]}}))}))},s=1,l.label=1;case 1:if(!(s<=n.attempts))return[3,9];l.label=2;case 2:return l.trys.push([2,4,,8]),[4,e()];case 3:return[2,l.sent()];case 4:return function(e){return"request_cancelled"===e.message||"AbortError"===e.name}(a=l.sent())?[2,Promise.reject(a)]:(c=s===n.attempts,function(e){return!(e instanceof TypeError)}(a)&&a.statusCode<500||c?[2,Promise.reject(new Error("The call did not succeed after "+s+" attempts. Last error is "+a.message))]:[3,5]);case 5:return[4,o()];case 6:l.sent(),l.label=7;case 7:return[3,8];case 8:return s++,[3,1];case 9:return[2,Promise.reject(new Error("Exhaused all attempts"))]}}))}))}((function(){return fetch(g(e,{params:a}),{method:o,body:u,headers:j(s)(c),signal:n&&n.signal}).then(h)}),void 0===l?{}:l)}function b(e){return e.json()}function y(e){return e.blob()}function _(){return Promise.resolve()}function g(e,t){var n=t.params,r=t.auth,o=function(e){var t=e.indexOf("?");return t>0?{baseUrl:e.substring(0,t),queryParams:Object(p.parse)(e.substring(t+1,e.length))}:{baseUrl:e}}(e),s=o.baseUrl,a=o.queryParams,c=r&&function(e){return Object(m.isClientBasedAuth)(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}(r),u=Object(p.stringify)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},a),n),c));return s+(u.length>0?"?"+u:"")}function j(e){return function(t){return e?Object(i.__assign)(Object(i.__assign)({},t||{}),function(e){return Object(m.isClientBasedAuth)(e)?{"X-Client-Id":e.clientId,Authorization:"Bearer "+e.token}:{"X-Issuer":e.asapIssuer,Authorization:"Bearer "+e.token}}(e)):t}}var w={attempts:5,startTimeoutInMs:1e3,factor:2},O=function(e){return new Promise((function(t){setTimeout(t,e)}))};var x={"max-age":2592e3,allowAnimated:!0,mode:"crop"},k={limit:30,sortDirection:"desc"},S=function(e,t){return void 0===t&&(t=!1),Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},x),e),t?{width:4096,height:4096}:{})},C={Accept:"application/json","Content-Type":"application/json"},I=function(){function e(e){var t=this;this.config=e,this.getFile=function(e,n){return void 0===n&&(n={}),t.request("/file/"+e,{params:n,authContext:{collectionName:n.collection}}).then(b)},this.getFileImageURL=function(e,n){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.config.authProvider()];case 1:return[2,g((t=i.sent()).baseUrl+"/file/"+e+"/image",{params:S(n),auth:t})]}}))}))},this.getArtifactURL=function(e,n,r){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t,o;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(!(t=function(e,t){var n=e[t];if(n&&n.url)return n.url}(e,n)))throw new Error("artifact "+n+" not found");return[4,this.config.authProvider({collectionName:r})];case 1:return[2,g(""+(o=i.sent()).baseUrl+t,{params:{collection:r,"max-age":2592e3},auth:o})]}}))}))},this.getImage=function(e,n,r,o){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t;return Object(i.__generator)(this,(function(i){return!1,[2,this.request("/file/"+e+"/image",{headers:t,params:S(n,o),authContext:{collectionName:n&&n.collection}},r).then(y)]}))}))},this.getItems=function(e,n){var i=e.map((function(e){return{type:"file",id:e,collection:n}}));return t.request("/items",{method:"POST",body:JSON.stringify({descriptors:i}),headers:C,authContext:{collectionName:n}}).then(b)},this.getImageMetadata=function(e,n){return t.request("/file/"+e+"/image/metadata",{params:n,authContext:{collectionName:n&&n.collection}}).then(b)}}return e.prototype.getCollectionItems=function(e,t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return Object(i.__generator)(this,(function(s){switch(s.label){case 0:return[4,this.request("/collection/"+e+"/items",{authContext:{collectionName:e},params:Object(i.__assign)(Object(i.__assign)({},k),t),headers:{Accept:"application/json"}})];case 1:return[4,b(s.sent())];case 2:return n=s.sent().data,r=n.contents,o=n.nextInclusiveStartKey,[2,{data:{contents:r.filter((function(e){return e.details.size&&e.details.size>0})),nextInclusiveStartKey:o}}]}}))}))},e.prototype.removeCollectionFile=function(e,t,n){return Object(i.__awaiter)(this,void 0,void 0,(function(){var r;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return r={actions:[{action:"remove",item:{type:"file",id:e,occurrenceKey:n}}]},[4,this.request("/collection/"+t,{method:"PUT",authContext:{collectionName:t},body:JSON.stringify(r),headers:{Accept:"application/json","Content-Type":"application/json"}})];case 1:return i.sent(),[2]}}))}))},e.prototype.createUpload=function(e,t){return void 0===e&&(e=1),this.request("/upload",{method:"POST",authContext:{collectionName:t},params:{createUpTo:e},headers:{Accept:"application/json"}}).then(b)},e.prototype.uploadChunk=function(e,t,n){return this.request("/chunk/"+e,{method:"PUT",authContext:{collectionName:n},body:t}).then(_)},e.prototype.probeChunks=function(e,t){return this.request("/chunk/probe",{method:"POST",authContext:{collectionName:t},body:JSON.stringify({chunks:e}),headers:C}).then(b)},e.prototype.createFileFromUpload=function(e,t){return void 0===t&&(t={}),this.request("/file/upload",{method:"POST",authContext:{collectionName:t.collection},params:t,body:JSON.stringify(e),headers:C}).then(b)},e.prototype.touchFiles=function(e,t){return void 0===t&&(t={}),this.request("/upload/createWithFiles",{method:"POST",headers:C,body:JSON.stringify(e),authContext:{collectionName:t.collection}}).then(b)},e.prototype.getFileBinaryURL=function(e,t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.config.authProvider({collectionName:t})];case 1:return[2,g((n=i.sent()).baseUrl+"/file/"+e+"/binary",{params:{dl:!0,collection:t,"max-age":2592e3},auth:n})]}}))}))},e.prototype.appendChunksToUpload=function(e,t,n){return this.request("/upload/"+e+"/chunks",{method:"PUT",authContext:{collectionName:n},body:JSON.stringify(t),headers:C}).then(_)},e.prototype.copyFileWithToken=function(e,t){return this.request("/file/copy/withToken",{method:"POST",authContext:{collectionName:t.collection},body:JSON.stringify(e),headers:C,params:t}).then(b)},e.prototype.request=function(e,t,n){return void 0===t&&(t={method:"GET",authContext:{}}),Object(i.__awaiter)(this,void 0,void 0,(function(){var r,o,s,a,c,u,l,d;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return r=this.config.authProvider,o=t.method,s=t.authContext,a=t.params,c=t.headers,u=t.body,[4,r(s)];case 1:return[4,v(""+(l=i.sent()).baseUrl+e,{method:o,auth:l,params:a,headers:c,body:u},n)];case 2:return function(e){if(!e||!window||!window.sessionStorage)return;window.sessionStorage.getItem("media-api-region")!==e&&window.sessionStorage.setItem("media-api-region",e)}((d=i.sent()).headers.get("x-media-region")),[2,d]}}))}))},e}();var E,P,F=n("./node_modules/rxjs/ReplaySubject.js"),T=function(e){return"error"===e.status},L=function(e){var t=e.data,n=t.id,r=t.name,o=t.size,s=t.processingStatus,a=t.artifacts,c={id:n,name:r,size:o,mediaType:t.mediaType,mimeType:t.mimeType,artifacts:a,representations:t.representations,createdAt:t.createdAt};switch(s){case"pending":case void 0:return Object(i.__assign)(Object(i.__assign)({},c),{status:"processing"});case"succeeded":return Object(i.__assign)(Object(i.__assign)({},c),{status:"processed"});case"failed":return Object(i.__assign)(Object(i.__assign)({},c),{status:"failed-processing"})}},M=function(){function e(e){this.streams=e}return e.prototype.has=function(e){return!!this.streams.find(e)},e.prototype.set=function(e,t){this.streams.set(e,t)},e.prototype.get=function(e){return this.streams.get(e)},e.prototype.getOrInsert=function(e,t){return this.has(e)||this.set(e,t()),this.get(e)},e.prototype.removeAll=function(){this.streams.removeAll()},e.prototype.remove=function(e){this.streams.remove(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this.streams.size},enumerable:!0,configurable:!0}),e}(),U=function(){if(!E){var e=n("./node_modules/@atlaskit/media-core/dist/esm/index.js").mediaState;E=new M(e.streams)}return E},A={},z=function(){function e(e){this.mediaStore=e}return e.prototype.createFileStateObserver=function(e,t){var n=new F.ReplaySubject(1),r=Object(i.__assign)({id:e},t),o=L({data:r});return n.next(o),n},e.prototype.populateCache=function(e){var t=this;e.forEach((function(e){var n=t.createFileStateObserver(e.id,e.details);U().set(e.id,n)}))},e.prototype.removeFromCache=function(e,t){var n=A[t].items.findIndex((function(t){return t.id===e}));-1!==n&&(U().remove(e),A[t].items.splice(n,1))},e.prototype.getItems=function(e,t){var n=this;A[e]||(A[e]=function(){return{items:[],subject:new F.ReplaySubject(1),isLoadingNextPage:!1}}());var r=A[e],o=r.subject;return this.mediaStore.getCollectionItems(e,Object(i.__assign)(Object(i.__assign)({},t),{details:"full"})).then((function(e){var t=e.data,i=t.contents,s=t.nextInclusiveStartKey;n.populateCache(i),r.items=e.data.contents,r.nextInclusiveStartKey=s,o.next(r.items)})).catch((function(e){return o.error(e)})),o},e.prototype.removeFile=function(e,t,n){return Object(i.__awaiter)(this,void 0,void 0,(function(){var r;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.mediaStore.removeCollectionFile(e,t,n)];case 1:return i.sent(),this.removeFromCache(e,t),(r=A[t]).subject.next(r.items),[2]}}))}))},e.prototype.loadNextPage=function(e,t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,s,a,c,u,l,d,p,m,f;return Object(i.__generator)(this,(function(h){switch(h.label){case 0:return n=A[e],r=!!n&&n.isLoadingNextPage,n&&n.nextInclusiveStartKey&&!r?(n.isLoadingNextPage=!0,o=A[e],s=o.nextInclusiveStartKey,a=o.items,c=o.subject,[4,this.mediaStore.getCollectionItems(e,Object(i.__assign)(Object(i.__assign)({},t),{inclusiveStartKey:s,details:"full"}))]):[2];case 1:return u=h.sent(),l=u.data,d=l.contents,p=l.nextInclusiveStartKey,this.populateCache(d),m=u.data.contents,f=Object(i.__spread)(a,m),c.next(f),A[e]={items:f,nextInclusiveStartKey:p,subject:c,isLoadingNextPage:!1},[2]}}))}))},e}(),N=n("./node_modules/uuid/v4.js"),B=n.n(N),R=n("./node_modules/dataloader/index.js"),D=n.n(R),q=n("./node_modules/@atlaskit/media-common/dist/esm/downloadUrl.js"),K=n("./node_modules/@atlaskit/chunkinator/dist/esm/chunkinator.js"),W=null,V=function(){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var e,t,r;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(e=3,W)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,5]),[4,n.e("05325aa247").then(n.bind(null,"./node_modules/@atlassian/forge-ui-text-renderer/node_modules/@atlaskit/media-client/dist/esm/utils/hashing/workerHasher.js"))];case 2:return t=i.sent().WorkerHasher,W=new t(e),[3,5];case 3:return i.sent(),[4,n.e("1d26407947").then(n.bind(null,"./node_modules/@atlassian/forge-ui-text-renderer/node_modules/@atlaskit/media-client/dist/esm/utils/hashing/simpleHasher.js"))];case 4:return r=i.sent().SimpleHasher,W=new r,[3,5];case 5:return[2,W]}}))}))},G=function(e){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){return Object(i.__generator)(this,(function(t){switch(t.label){case 0:return[4,V()];case 1:return[2,t.sent().hash(e)]}}))}))},J=function(e,t){return function(n){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var r,o;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.probeChunks(X(n),t)];case 1:return r=i.sent(),o=r.data.results,[2,Object.values(o).map((function(e){return e.exists}))]}}))}))}},H=function(e,t){return function(n){return e.uploadChunk(n.hash,n.blob,t)}},Q=function(e,t,n){var r=0;return function(o){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var s,a;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return a=(s=e).appendChunksToUpload,[4,t];case 1:return[4,a.apply(s,[i.sent(),{chunks:X(o),offset:r},n])];case 2:return i.sent(),r+=o.length,[2]}}))}))}},X=function(e){return e.map((function(e){return e.hash}))},Y=function(e,t){if(m.mediaState.eventEmitter)return m.mediaState.eventEmitter.emit(e,t)},$=n("./node_modules/uuid-validate/index.js"),Z=n.n($),ee=function(e){return 0===e.indexOf("image/")?"image":0===e.indexOf("video/")?"video":0===e.indexOf("audio/")?"audio":0===e.indexOf("text/")||["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/rtf","application/vnd.visio","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].indexOf(e)>=0?"doc":"unknown"},te=function(e){return new Promise((function(t,n){var i=URL.createObjectURL(e),r=new Image;r.src=i,r.onload=function(){var e={width:r.width,height:r.height};URL.revokeObjectURL(i),t(e)},r.onerror=n}))},ne=function(e){var t=new F.ReplaySubject(1);return e&&t.next(e),t},ie=function(e){return function(e){return"application/pdf"===e.toLowerCase()}(e)||function(e){return["image/apng","image/bmp","image/gif","image/x-icon","image/jpeg","image/png","image/svg+xml","image/webp"].indexOf(e.toLowerCase())>-1}(e)||function(e){return 0===e.indexOf("audio/")}(e)||function(e){return["video/mp4","video/quicktime"].indexOf(e.toLowerCase())>-1}(e)},re=function(e,t){return t?e+"-"+t:e},oe=function(e){return e.error instanceof Error},se=function(e,t){var n=t.reduce((function(e,t){var n=t.id,i=t.collection;return e[re(n,i)]=oe(t)?t:t.details,e}),{});return e.map((function(e){var t=e.id,i=e.collection,r=re(t,i);return n[r]}))},ae=function(){function e(e){var t=this;this.mediaStore=e,this.batchLoadingFunc=function(e){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t,n,r=this;return Object(i.__generator)(this,(function(o){switch(o.label){case 0:return"__media-single-file-collection__",t=e.reduce((function(e,t){var n=t.collection||"__media-single-file-collection__",i=e[n]||[];return i.push(t.id),e[n]=i,e}),{}),n=[],[4,Promise.all(Object.keys(t).map((function(e){return Object(i.__awaiter)(r,void 0,void 0,(function(){var r,o,s,a;return Object(i.__generator)(this,(function(c){switch(c.label){case 0:r=t[e],o="__media-single-file-collection__"===e?void 0:e,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.mediaStore.getItems(r,o)];case 2:return s=c.sent(),n.push.apply(n,Object(i.__spread)(s.data.items)),[3,4];case 3:return a=c.sent(),r.forEach((function(e){n.push({id:e,error:a||new Error("Failed to fetch"),collection:o})})),[3,4];case 4:return[2]}}))}))})))];case 1:return o.sent(),[2,se(e,n)]}}))}))},this.createDownloadFileStream=function(e,n){var r,o=ne();return function s(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t,a,c;return Object(i.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.dataloader.load({id:e,collection:n})];case 1:return(t=u.sent())?oe(t)?(o.error(t),[2]):(a=function(e,t){return L({data:Object(i.__assign)({id:e},t)})}(e,t),o.next(a),"processing"===a.status?r=window.setTimeout(s,6e3):o.complete(),[3,3]):[2];case 2:return c=u.sent(),window.clearTimeout(r),o.error(c),[3,3];case 3:return[2]}}))}))}(),o},this.dataloader=new D.a(this.batchLoadingFunc,{maxBatchSize:100})}return e.prototype.getFileState=function(e,t){var n=this;if(!Z()(e)){var i=ne();return i.error("invalid id was passed to getFileState"),i}return U().getOrInsert(e,(function(){var i=t&&t.collectionName;return n.createDownloadFileStream(e,i)}))},e.prototype.getCurrentState=function(e,t){return function(e){return new Promise((function(t){return e.subscribe({next:function(e){t(e),this.unsubscribe()}})}))}(this.getFileState(e,t))},e.prototype.getArtifactURL=function(e,t,n){return this.mediaStore.getArtifactURL(e,t,n)},e.prototype.getFileBinaryURL=function(e,t){return this.mediaStore.getFileBinaryURL(e,t)},e.prototype.touchFiles=function(e,t){return this.mediaStore.touchFiles({descriptors:e},{collection:t}).then((function(e){return e.data}))},e.prototype.generateUploadableFileUpfrontIds=function(e){var t=B()(),n=B()(),i={fileId:t,occurrenceKey:n,collection:e};return{id:t,occurrenceKey:n,deferredUploadId:this.touchFiles([i],e).then((function(e){return e.created[0].uploadId}))}},e.prototype.uploadExternal=function(e,t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,s,a,c,u,l,d=this;return Object(i.__generator)(this,(function(p){return n=this.generateUploadableFileUpfrontIds(t),r=n.id,o=n.occurrenceKey,s=ne(),a=fetch(e).then((function(e){return e.blob()})).catch((function(){})),c=new Promise((function(e,t){return Object(i.__awaiter)(d,void 0,void 0,(function(){var n;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return[4,a];case 1:return(n=i.sent())||t("Could not fetch the blob"),e({value:n,origin:"remote"}),[2]}}))}))})),u=e.split("/").pop()||"",l={status:"processing",name:u,size:0,mediaType:"unknown",mimeType:"",id:r,occurrenceKey:o,preview:c},s.next(l),U().set(r,s),[2,new Promise((function(e,l){return Object(i.__awaiter)(d,void 0,void 0,(function(){var d,p,m,f,h,v;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return[4,a];case 1:return(d=i.sent())?(p=d.type,m=d.size,f={content:d,mimeType:p,collection:t,name:u},h=ee(p),s.next({status:"processing",name:u,size:m,mediaType:h,mimeType:p,id:r,occurrenceKey:o,preview:c}),this.upload(f,void 0,n),[4,te(d)]):[2,l("Could not download remote file")];case 2:return v=i.sent(),e({dimensions:v,uploadableFileUpfrontIds:n}),[2]}}))}))}))]}))}))},e.prototype.upload=function(e,t,n){var r=this;"string"==typeof e.content&&(e.content=function(e){for(var t=e.split(",")[1],n=atob(t),i=[],r=function(e){var t=n.slice(e,e+512),r=t.split("").map((function(e,n){return t.charCodeAt(n)})),o=new Uint8Array(r);i.push(o)},o=0;o<n.length;o+=512)r(o);return new Blob(i,{type:"image/jpeg"})}(e.content));var o=e.content,s=e.name,a=void 0===s?"":s,c=e.collection;n||(n=this.generateUploadableFileUpfrontIds(c));var u,l,d=n.id,p=n.occurrenceKey,m="",f=0,h=function(e){if(e.content instanceof Blob){var t=e.content.type;return ee(t)}return"unknown"}(e),v=ne();o instanceof Blob&&(f=o.size,m=o.type,ie(o.type)&&(u={value:o,origin:"local"}));var b={id:d,occurrenceKey:p,name:a,size:f,mediaType:h,mimeType:m,preview:u},y=function(e){v.next(Object(i.__assign)(Object(i.__assign)({status:"uploading"},b),{progress:e}))},_=function(e,t,n,r){var o=e.content,s=e.collection,a=e.name,c=e.mimeType,u=n.id,l=n.occurrenceKey,d=n.deferredUploadId,p=Object(K.a)(o,{hashingFunction:G,hashingConcurrency:5,probingBatchSize:100,chunkSize:4194304,uploadingConcurrency:3,uploadingFunction:H(t,s),probingFunction:J(t,s),processingBatchSize:1e3,processingFunction:Q(t,d,s)},{onProgress:function(e){r&&r.onProgress(e)}}),m=p.response,f=p.cancel,h=r&&r.onUploadFinish||function(){};return Promise.all([d,m]).then((function(e){var n=Object(i.__read)(e,1)[0];return Object(i.__awaiter)(void 0,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){switch(e.label){case 0:return[4,t.createFileFromUpload({uploadId:n,name:a,mimeType:c},{occurrenceKey:l,collection:s,replaceFileId:u})];case 1:return e.sent(),h(),[2]}}))}))})).catch(h),{cancel:f}}(e,this.mediaStore,n,{onUploadFinish:function(e){if(e){if("canceled"!==e){var t=e instanceof Error?e.message:e;v.next({id:d,status:"error",message:t})}return v.error(e)}ie(m)?(v.next(Object(i.__assign)({status:"processing",representations:{}},b)),v.complete()):l=r.createDownloadFileStream(d,c).subscribe({next:function(e){return v.next(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},b),e),function(e,t){return T(e)||"unknown"!==e.mediaType?{}:{mediaType:t}}(e,h)))},error:function(e){return v.error(e)},complete:function(){return v.complete()}})},onProgress:y}).cancel;return U().set(d,v),setTimeout((function(){y(0)}),0),t&&t.setAbort((function(){_(),l&&l.unsubscribe()})),v},e.prototype.downloadBinary=function(e,t,n){return void 0===t&&(t="download"),Object(i.__awaiter)(this,void 0,void 0,(function(){var r;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.mediaStore.getFileBinaryURL(e,n)];case 1:return r=i.sent(),Object(q.a)(r,{name:t}),Y("media-viewed",{fileId:e,isUserCollection:"recents"===n,viewingLevel:"download"}),[2]}}))}))},e.prototype.copyFile=function(e,t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,s,a,c,u,l,d,p,f,h,v,b,y;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return n=e.authProvider,r=e.collection,o=e.id,s=t.authProvider,a=t.collection,c=t.replaceFileId,u=t.occurrenceKey,l=new I({authProvider:s}),p=m.authToOwner,[4,n({collectionName:r})];case 1:return d=p.apply(void 0,[i.sent()]),f={sourceFile:{id:o,collection:r,owner:d}},h={collection:a,replaceFileId:c,occurrenceKey:u},[4,l.copyFileWithToken(f,h)];case 2:return v=i.sent().data,b=new F.ReplaySubject(1),y=L({data:v}),b.next(y),U().set(v.id,b),[2,v]}}))}))},e}(),ce=function(){function e(e){this.baseUrl=e||"/gateway/api"}return e.prototype.fetchToken=function(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){return Object(i.__generator)(this,(function(t){switch(t.label){case 0:return[4,fetch(this.baseUrl+"/media/auth/smartedge",{credentials:"include",headers:{"x-client-id":e}})];case 1:return[2,t.sent().json()]}}))}))},e.prototype.isTokenExpired=function(e){var t=(new Date).getTime()/1e3;return e.data.iat+e.data.expiresIn-t<0},e}(),ue=function(){function e(e){this.mediaClientConfig=e,this.mediaStore=new I({authProvider:e.authProvider}),this.config=e,this.collection=new z(this.mediaStore),this.file=new ae(this.mediaStore),this.eventEmitter=new d.EventEmitter2,this.stargate=new ce(e.stargateBaseUrl)}return e.prototype.getImage=function(e,t,n,i){return this.mediaStore.getImage(e,t,n,i)},e.prototype.getImageUrl=function(e,t){return this.mediaStore.getFileImageURL(e,t)},e.prototype.getImageMetadata=function(e,t){return Object(i.__awaiter)(this,void 0,void 0,(function(){return Object(i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.mediaStore.getImageMetadata(e,t)];case 1:return[2,n.sent().metadata]}}))}))},e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.emit=function(e,t){return this.eventEmitter.emit(e,t)},e}(),le=new Map,de=function(e){var t=le.get(e);return t||(t=new ue(e),le.set(e,t)),t},pe=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),me=new Map,fe=function(e){return e?function(e,t){var n=[];return Object(a.a)(e,{any:function(e){t(e)&&n.push(e)}}),n}(e,(function(e){return"media"===e.type})).reduce((function(e,t){if(t.attrs){var n=t.attrs,i=n.type,r=n.url,o=n.id;"file"===i&&o?e.push({mediaItemType:"file",id:o}):"external"===i&&r&&e.push({mediaItemType:"external-image",dataURI:r,name:r})}return e}),[]):[]},he=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.saveFileState=function(e,n){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t,r,o,s;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=this.props.collection,r=de(n),o={collectionName:t},[4,r.file.getCurrentState(e,o)];case 1:return s=i.sent(),this.setState({fileState:s}),[2]}}))}))},t.renderLoadingCard=function(){var e=t.props.cardDimensions;return o.a.createElement(c.a,{dimensions:e})},t.getOnCardClickCallback=function(e){var n=t.props.eventHandlers;if(n&&n.media&&n.media.onClick)return function(t,i){var r=t.mediaItemDetails&&"video"===t.mediaItemDetails.mediaType;!(e&&r)&&n&&n.media&&n.media.onClick&&n.media.onClick(t,i)}},t}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,o,s,a,c,u,l,d,p;return Object(i.__generator)(this,(function(m){switch(m.label){case 0:return e=this.props,t=e.rendererContext,n=e.mediaProvider,r=e.contextIdentifierProvider,o=e.id,s=e.url,a=e.collection,n?r?(c=this.setState,u={},[4,r]):[3,2]:[2];case 1:c.apply(this,[(u.contextIdentifierProvider=m.sent(),u)]),m.label=2;case 2:return[4,n];case 3:return l=m.sent(),d=l.viewMediaClientConfig,p=o&&me.has(o)||s&&me.has(s),t&&t.adDoc&&!p&&fe(t.adDoc).forEach((function(e){"file"===e.mediaItemType?me.set(e.id,Object(i.__assign)(Object(i.__assign)({},e),{collectionName:a})):"external-image"===e.mediaItemType&&me.set(e.dataURI,e)})),this.setState({mediaClientConfig:d}),o&&this.saveFileState(o,d),[2]}}))}))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this.state.mediaClientConfig,n=e.id;t&&n&&n!==this.props.id&&this.saveFileState(n,t)},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.id,n=e.url;t?me.delete(t):n&&me.delete(n)},t.prototype.renderExternal=function(e){var t=this.state.mediaClientConfig,n=this.props,i=n.cardDimensions,r=n.resizeMode,s=n.appearance,a=n.url,c=n.imageStatus,l=n.disableOverlay,d=n.alt;if("loading"===c||!a)return this.renderLoadingCard();var p={dataURI:a,name:a,mediaItemType:"external-image"};return o.a.createElement(u.a,{mediaClientConfig:t,alt:d,identifier:p,dimensions:i,appearance:s,resizeMode:r,disableOverlay:l,shouldOpenMediaViewer:e,mediaViewerDataSource:{list:Array.from(me.values())}})},t.prototype.render=function(){var e=this.state,t=e.contextIdentifierProvider,n=e.mediaClientConfig,r=e.fileState,s=this.props,a=s.id,c=s.alt,d=s.type,p=s.collection,m=s.occurrenceKey,f=s.cardDimensions,h=s.resizeMode,v=s.rendererAppearance,b=s.disableOverlay,y=s.useInlinePlayer,_=s.originalDimensions,g=s.shouldOpenMediaViewer,j="mobile"===v,w=!j&&(void 0===y||y),O=this.getOnCardClickCallback(w),x="boolean"==typeof g?g:!j&&!O;if("external"===d)return this.renderExternal(x);if("link"===d)return null;if(!n||!a)return this.renderLoadingCard();if(!a||"file"!==d)return o.a.createElement(l.a,{dimensions:f});var k=t&&t.objectId,S={id:a,mediaItemType:"file",collectionName:p,occurrenceKey:m};return o.a.createElement(ve,Object(i.__assign)({},be({id:a,alt:c,collection:p,contextIdentifierProvider:t,originalDimensions:_,fileState:r})),o.a.createElement(u.a,{identifier:S,alt:c,contextId:k,mediaClientConfig:n,dimensions:f,originalDimensions:_,onClick:O,resizeMode:h,isLazy:!j,disableOverlay:b,useInlinePlayer:w,shouldOpenMediaViewer:x,mediaViewerDataSource:{list:Array.from(me.values())}}))},t}(r.Component),ve=pe.default.div(P||(P=Object(i.__makeTemplateObject)([""],[""]))),be=function(e){var t=e.id,n=e.alt,i=e.collection,r=e.contextIdentifierProvider,o=e.originalDimensions,s=e.fileState,a=r&&r.objectId,c=o&&o.width,u=o&&o.height,l="file",d=1,p="";return s&&"error"!==s.status&&(d=s.size,l=s.name,p=s.mimeType),{"data-context-id":a,"data-type":"file","data-node-type":"media","data-width":c,"data-height":u,"data-id":t,"data-collection":i,"data-file-name":l,"data-file-size":d,"data-file-mime-type":p,"data-alt":n}},ye=function(e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={imageStatus:"loading"},e.onLoad=function(){e.setState({imageStatus:"complete"});var t=e.props.onExternalImageLoaded;t&&e.img&&t({width:e.img.naturalWidth,height:e.img.naturalHeight})},e.onError=function(){e.setState({imageStatus:"error"})},e}return Object(i.__extends)(n,t),n.prototype.componentDidMount=function(){this.fetchImage(this.props)},n.prototype.UNSAFE_componentWillReceiveProps=function(e){e.url!==this.props.url&&(this.setState({imageStatus:"loading"}),this.fetchImage(e))},n.prototype.componentWillUnmount=function(){this.img&&(this.img.removeEventListener("load",this.onLoad),this.img.removeEventListener("error",this.onError),this.img=null)},n.prototype.fetchImage=function(e){var t=e.url;t&&(this.img||(this.img=new Image,this.img.addEventListener("load",this.onLoad),this.img.addEventListener("error",this.onError)),this.img.src=t)},n.prototype.render=function(){var t=this.state.imageStatus;return o.a.createElement(e,Object(i.__assign)({},this.props,{imageStatus:t}))},n}(r.Component)}(he),_e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderCard=function(e){void 0===e&&(e={});var n=e.mediaProvider,r=e.contextIdentifierProvider,s=t.props,a=s.allowAltTextOnImages,c=s.alt;return o.a.createElement(ye,Object(i.__assign)({mediaProvider:n,contextIdentifierProvider:r},t.props,{alt:a?c:void 0}))},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props.providers;return e?o.a.createElement(s.a,{providers:["mediaProvider","contextIdentifierProvider"],providerFactory:e,renderNode:this.renderCard}):this.renderCard()},t}(r.PureComponent);t.default=_e},"./node_modules/eventemitter2/lib/eventemitter2.js":function(e,t,n){(function(i){var r;
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(o){var s=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(){this._events={},this._conf&&c.call(this,this._conf)}function c(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=void 0!==e.maxListeners?e.maxListeners:10,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=10}function u(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==i&&i.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,i.emitWarning(r)}else console.error(n),console.trace&&console.trace()}function l(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,c.call(this,e)}function d(e,t,n,i){if(!n)return[];var r,o,s,a,c,u,l,p=[],m=t.length,f=t[i],h=t[i+1];if(i===m&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(r=0,o=n._listeners.length;r<o;r++)e&&e.push(n._listeners[r]);return[n]}if("*"===f||"**"===f||n[f]){if("*"===f){for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&(p=p.concat(d(e,t,n[s],i+1)));return p}if("**"===f){for(s in(l=i+1===m||i+2===m&&"*"===h)&&n._listeners&&(p=p.concat(d(e,t,n,m))),n)"_listeners"!==s&&n.hasOwnProperty(s)&&("*"===s||"**"===s?(n[s]._listeners&&!l&&(p=p.concat(d(e,t,n[s],m))),p=p.concat(d(e,t,n[s],i))):p=s===h?p.concat(d(e,t,n[s],i+2)):p.concat(d(e,t,n[s],i)));return p}p=p.concat(d(e,t,n[f],i+1))}if((a=n["*"])&&d(e,t,a,i+1),c=n["**"])if(i<m)for(s in c._listeners&&d(e,t,c,m),c)"_listeners"!==s&&c.hasOwnProperty(s)&&(s===h?d(e,t,c[s],i+2):s===f?d(e,t,c[s],i+1):((u={})[s]=c[s],d(e,t,{"**":u},i+1)));else c._listeners?d(e,t,c,m):c["*"]&&c["*"]._listeners&&d(e,t,c["*"],m);return p}function p(e,t){for(var n=0,i=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;n+1<i;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var r=this.listenerTree,o=e.shift();void 0!==o;){if(r[o]||(r[o]={}),r=r[o],0===e.length)return r._listeners?("function"==typeof r._listeners&&(r._listeners=[r._listeners]),r._listeners.push(t),!r._listeners.warned&&this._maxListeners>0&&r._listeners.length>this._maxListeners&&(r._listeners.warned=!0,u.call(this,r._listeners.length,o))):r._listeners=t,!0;o=e.shift()}return!0}l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},l.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},l.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},l.prototype._many=function(e,t,n,i){var r=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&r.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,i),r},l.prototype.emit=function(){this._events||a.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,i,r,o,s=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),s>3)for(t=new Array(s),r=0;r<s;r++)t[r]=arguments[r];for(i=0,n=o.length;i<n;i++)switch(this.event=e,s){case 1:o[i].call(this,e);break;case 2:o[i].call(this,e,arguments[1]);break;case 3:o[i].call(this,e,arguments[1],arguments[2]);break;default:o[i].apply(this,t)}}if(this.wildcard){o=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,c,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,s){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),r=1;r<s;r++)t[r-1]=arguments[r];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(s>3)for(t=new Array(s-1),r=1;r<s;r++)t[r-1]=arguments[r];for(i=0,n=o.length;i<n;i++)switch(this.event=e,s){case 1:o[i].call(this);break;case 2:o[i].call(this,arguments[1]);break;case 3:o[i].call(this,arguments[1],arguments[2]);break;default:o[i].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||a.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,i,r,o,s=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),r=1;r<c;r++)t[r]=arguments[r];for(i=0,n=this._all.length;i<n;i++)switch(this.event=e,c){case 1:s.push(this._all[i].call(this,e));break;case 2:s.push(this._all[i].call(this,e,arguments[1]));break;case 3:s.push(this._all[i].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[i].apply(this,t))}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,u,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o)switch(this.event=e,c){case 1:s.push(o.call(this));break;case 2:s.push(o.call(this,arguments[1]));break;case 3:s.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),r=1;r<c;r++)t[r-1]=arguments[r];s.push(o.apply(this,t))}else if(o&&o.length){if(o=o.slice(),c>3)for(t=new Array(c-1),r=1;r<c;r++)t[r-1]=arguments[r];for(i=0,n=o.length;i<n;i++)switch(this.event=e,c){case 1:s.push(o[i].call(this));break;case 2:s.push(o[i].call(this,arguments[1]));break;case 3:s.push(o[i].call(this,arguments[1],arguments[2]));break;default:s.push(o[i].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||a.call(this),this.emit("newListener",e,t),this.wildcard?(p.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,u.call(this,this._events[e].length,e))):this._events[e]=t,this)},l.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard){var r="string"==typeof e?e.split(this.delimiter):e.slice();i=d.call(this,null,r,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],i.push({_listeners:n})}for(var o=0;o<i.length;o++){var a=i[o];if(n=a._listeners,s(n)){for(var c=-1,u=0,l=n.length;u<l;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){c=u;break}if(c<0)continue;return this.wildcard?a._listeners.splice(c,1):this._events[e].splice(c,1),0===n.length&&(this.wildcard?delete a._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete a._listeners:delete this._events[e],this.emit("removeListener",e,t))}return function e(t){if(void 0!==t){var n=Object.keys(t);for(var i in n){var r=n[i],o=t[r];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&e(t[r]),0===Object.keys(o).length&&delete t[r])}}}(this.listenerTree),this},l.prototype.offAny=function(e){var t,n=0,i=0;if(e&&this._all&&this._all.length>0){for(n=0,i=(t=this._all).length;n<i;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(n=0,i=(t=this._all).length;n<i;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||a.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=d.call(this,null,t,this.listenerTree,0),i=0;i<n.length;i++){var r=n[i];r._listeners=null}else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return d.call(this,t,n,this.listenerTree,0),t}return this._events||a.call(this),this._events[e]||(this._events[e]=[]),s(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},void 0===(r=function(){return l}.call(t,n,t,e))||(e.exports=r)}()}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/lru-fast/lru.js":function(e,t){function n(e){this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap={}}n.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e.newer&&(e===this.oldest&&(this.oldest=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.newest,this.newest&&(this.newest.newer=e),this.newest=e)},n.prototype.put=function(e,t){var n=this._keymap[e];return n?(n.value=t,void this._markEntryAsUsed(n)):(this._keymap[e]=n={key:e,value:t,older:void 0,newer:void 0},this.newest?(this.newest.newer=n,n.older=this.newest):this.oldest=n,this.newest=n,this.size++,this.size>this.limit?this.shift():void 0)},n.prototype.shift=function(){var e=this.oldest;return e&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),e.newer=e.older=void 0,delete this._keymap[e.key],this.size--),e},n.prototype.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return this._markEntryAsUsed(n),t?n:n.value},n.prototype.find=function(e){return this._keymap[e]},n.prototype.set=function(e,t){var n,i=this.get(e,!0);return i?(n=i.value,i.value=t):(n=this.put(e,t))&&(n=n.value),n},n.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.oldest=t.newer):t.older?(t.older.newer=void 0,this.newest=t.older):this.oldest=this.newest=void 0,this.size--,t.value},n.prototype.removeAll=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?n.prototype.keys=function(){return Object.keys(this._keymap)}:n.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},n.prototype.forEach=function(e,t,n){var i;if(!0===t?(n=!0,t=void 0):"object"!=typeof t&&(t=this),n)for(i=this.newest;i;)e.call(t,i.key,i.value,this),i=i.older;else for(i=this.oldest;i;)e.call(t,i.key,i.value,this),i=i.newer},n.prototype.toJSON=function(){for(var e=new Array(this.size),t=0,n=this.oldest;n;)e[t++]={key:n.key,value:n.value},n=n.newer;return e},n.prototype.toString=function(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},"object"==typeof this&&(this.LRUCache=n)},"./node_modules/rxjs-async-map/out/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/rxjs/Observable.js");t.Observable=i.Observable;var r=n("./node_modules/rxjs/operators/mergeMap.js"),o=n("./node_modules/rxjs-async-map/out/notify.js");t.asyncMap=function(e,t){return r.mergeMap(function(e){var t=new Array,n=function(){var e=t.findIndex((function(e){return!e.notifyIfReady()}));e>0&&t.splice(0,e)};return function(r){return new i.Observable((function(i){t.push(o.notify(e(r),i,n))}))}}(e),t)}},"./node_modules/rxjs-async-map/out/notify.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notify=function(e,t,n){var i={notifyIfReady:function(){return!1}};return e.then((function(e){i.notifyIfReady=function(){return t.next(e),t.complete(),!0},n(i)}),(function(e){i.notifyIfReady=function(){return t.error(e),!0},n(i)})),i}},"./node_modules/rxjs/ReplaySubject.js":function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n("./node_modules/rxjs/Subject.js"),o=n("./node_modules/rxjs/scheduler/queue.js"),s=n("./node_modules/rxjs/Subscription.js"),a=n("./node_modules/rxjs/operators/observeOn.js"),c=n("./node_modules/rxjs/util/ObjectUnsubscribedError.js"),u=n("./node_modules/rxjs/SubjectSubscription.js"),l=function(e){function t(t,n,i){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=i,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return i(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new d(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),i=this.scheduler;if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError||this.isStopped?t=s.Subscription.EMPTY:(this.observers.push(e),t=new u.SubjectSubscription(this,e)),i&&e.add(e=new a.ObserveOnSubscriber(e,i));for(var r=n.length,o=0;o<r&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,r=i.length,o=0;o<r&&!(e-i[o].time<n);)o++;return r>t&&(o=Math.max(o,r-t)),o>0&&i.splice(0,o),i},t}(r.Subject);t.ReplaySubject=l;var d=function(){return function(e,t){this.time=e,this.value=t}}()},"./node_modules/rxjs/operators/tap.js":function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n("./node_modules/rxjs/Subscriber.js");t.tap=function(e,t,n){return function(i){return i.lift(new o(e,t,n))}};var o=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.nextOrObserver,this.error,this.complete))},e}(),s=function(e){function t(t,n,i,o){e.call(this,t);var s=new r.Subscriber(n,i,o);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return i(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(r.Subscriber)},"./node_modules/rxjs/scheduler/QueueAction.js":function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return i(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,i):t.flush(this)},t}(n("./node_modules/rxjs/scheduler/AsyncAction.js").AsyncAction);t.QueueAction=r},"./node_modules/rxjs/scheduler/QueueScheduler.js":function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(){e.apply(this,arguments)}return i(t,e),t}(n("./node_modules/rxjs/scheduler/AsyncScheduler.js").AsyncScheduler);t.QueueScheduler=r},"./node_modules/rxjs/scheduler/queue.js":function(e,t,n){"use strict";var i=n("./node_modules/rxjs/scheduler/QueueAction.js"),r=n("./node_modules/rxjs/scheduler/QueueScheduler.js");t.queue=new r.QueueScheduler(i.QueueAction)},"./node_modules/uuid-validate/index.js":function(e,t,n){(function(t){for(var n=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i,i=[],r=0;r<256;r++)i[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var s;if(t.isBuffer(e))s=function(e,t){var n=t||0,r=i;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}(e);else{if("[object String]"!==Object.prototype.toString.call(e))return!1;s=e}if(s=s.toLowerCase(),!n.test(s))return!1;if(void 0===r)r=o(s);else if(o(s)!==r)return!1;switch(r){case 1:case 2:return!0;case 3:case 4:case 5:return-1!==["8","9","a","b"].indexOf(s.charAt(19));default:throw new Error("Invalid version provided.")}};var o=e.exports.version=function(e){return 0|e.charAt(14)}}).call(this,n("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)}}]);try{window.__jsEvalStop("@atlaskit-internal-renderer-node_Media.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/@atlaskit-internal-renderer-node_Media.1d2120ee8fa1e219dde1.8.js.map