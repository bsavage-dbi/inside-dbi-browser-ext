!function(e){function t(t){for(var r,c,u=t[0],i=t[1],l=t[2],f=0,p=[];f<u.length;f++)c=u[f],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&p.push(o[c][0]),o[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(s&&s(t);p.length;)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,u=1;u<n.length;u++){var i=n[u];0!==o[i]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={39:0},a=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(){return Promise.resolve()},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var u=window.webpackJsonp=window.webpackJsonp||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var s=i;a.push([2829,7]),n()}({1446:function(e,t,n){"use strict";(function(e){var r=n(0),o=n.n(r),a=n(64),c=n(11),u=n(152),i=n(361),l=(n(1306),n(362)),s=n(1462),f=n(1452),p=n(231),d=n(303);t.a=function(t,n){Object(d.a)({tenantBaseUrl:n.tenantBaseUrl});var r=function(t){var n=[l.a];if(!(e&&e.env&&!0)){var r=Object(i.createLogger)();n.push(r)}var o=Object(u.createStore)(f.a,u.applyMiddleware.apply(void 0,n));return o.dispatch(p.l(t)),o}(n);return Object(a.render)(o.a.createElement(c.a,{store:r},o.a.createElement(s.a,null)),t),{glanceOpened:function(){r.dispatch(p.k())}}}}).call(this,n(155))},1452:function(e,t,n){"use strict";var r=n(152),o=n(231);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i={executing:!1,dataLoaded:!1,data:{auditItems:[],manualRules:[],notificationWebsocket:{url:"",topic:""},appVersion:"",cloudId:"",env:"",locale:""}},l=Object(r.combineReducers)({issueGlance:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.e:return c({},e,{context:t.context});case o.i:return c({},e,{selectedRule:t.ruleId});case o.d:return c({},e,{data:c({},e.data,{auditItems:t.recentItems})});case o.c:return c({},e,{dataLoaded:!1});case o.b:return c({},e,{data:t.issueGlanceData,dataLoaded:!0});case o.a:return c({},e,{data:t.issueGlanceData,dataError:!0});case o.h:var n=e.data.manualRules.find((function(e){return e.id===parseInt(t.ruleId)})),r=a(e.data.auditItems);return n&&(r.length>=8&&r.pop(),r.unshift({id:(new Date).getTime(),objectItemId:n.id,objectItemName:n.name,category:"QUEUED",startExecution:new Date})),c({},e,{data:c({},e.data,{auditItems:r})});case o.g:return c({},e,{executing:!1});case o.f:return c({},e,{error:t.error});default:return e}}});t.a=l},1462:function(e,t,n){"use strict";var r=n(36),o=n(959),a=n(1),c=n.n(a),u=n(0),i=n.n(u),l=n(11),s=n(3),f=n(478),p=n(14),d=n(231),m=n(360),b=n.n(m),y=n(1447),g=n.n(y),v=n(1448),h=n.n(v),w=n(1450),E=n.n(w),x=n(1451),O=n.n(x),j=n(1449),R=n.n(j),I=n(736),_=n.n(I),k=n(219),S=n(96),P=n.n(S),C=n(43);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(){var e=Y(["\n  margin-left:21px;\n  padding-top:2px;   \n  height:12px;\n  width: 80px;\n  border-radius:3px;\n  background-color: ",";\n"]);return G=function(){return e},e}function B(){var e=Y(["\n  margin-left:5px;\n  display:inline-block;\n  height:16px;\n  width: ",";\n  border-radius:3px;\n  background-color: ",";\n"]);return B=function(){return e},e}function M(){var e=Y(["\n  display:inline-block;\n  width:16px;\n  height:16px;\n  border-radius:3px;\n  background-color: ",";\n"]);return M=function(){return e},e}function z(){var e=Y(["\n  padding-top:6px;\n"]);return z=function(){return e},e}function F(){var e=Y(["\n  padding-bottom:180px;\n"]);return F=function(){return e},e}function Y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var W=s.default.div(F()),X=s.default.div(z()),K=s.default.div(M(),p.L.getColorByName("N20")),Q=s.default.div(B(),(function(e){return e.short?"140px":"200px"}),p.L.getColorByName("N20")),H=s.default.div(G(),p.L.getColorByName("N20")),J=function(e){function t(){return U(this,t),L(this,N(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return i.a.createElement(W,null,i.a.createElement(X,null,i.a.createElement(K,null),i.a.createElement(Q,null),i.a.createElement(H,null)),i.a.createElement(X,null,i.a.createElement(K,null),i.a.createElement(Q,{short:!0}),i.a.createElement(H,null)),i.a.createElement(X,null,i.a.createElement(K,null),i.a.createElement(Q,null),i.a.createElement(H,null)),i.a.createElement(X,null,i.a.createElement(K,null),i.a.createElement(Q,{short:!0}),i.a.createElement(H,null)))}}])&&A(n.prototype,r),o&&A(n,o),t}(u.PureComponent);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?te(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(){var e=se(["\n  display:inline-block;\n  margin-right:5px;\n"]);return oe=function(){return e},e}function ae(){var e=se(["\n  font-size:12px;\n  color: ",";\n  margin-left:21px;\n"]);return ae=function(){return e},e}function ce(){var e=se(["\n  background-color: ",";\n  height:16px;\n  width:16px;\n  border-radius:3px;\n  margin-right:5px;\n  vertical-align: middle;\n"]);return ce=function(){return e},e}function ue(){var e=se(["\n  margin-top:4px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n"]);return ue=function(){return e},e}function ie(){var e=se(["\n  padding-top:12px;\n"]);return ie=function(){return e},e}function le(){var e=se(["\n  padding-top:24px;\n"]);return le=function(){return e},e}function se(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var fe=s.default.div(le()),pe=s.default.div(ie()),de=s.default.div(ue()),me=s.default.span(ce(),(function(e){return e.color})),be=s.default.div(ae(),p.L.getColorByName("N100")),ye=s.default.div(oe()),ge={SUCCESS:{backgroundColor:"G50",color:"G500",icon:g.a},NO_ACTIONS_PERFORMED:{backgroundColor:"G50",color:"G500",icon:h.a},IN_PROGRESS:{backgroundColor:"B50",color:"B500",icon:_.a},THROTTLED:{backgroundColor:"Y75",color:"N800",icon:R.a},SOME_ERRORS:{backgroundColor:"Y75",color:"N800",icon:E.a},ABORTED:{backgroundColor:"Y75",color:"N800",icon:b.a},FAILURE:{backgroundColor:"R50",color:"R500",icon:O.a}},ve=function(e){function t(){var e,n;q(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return re(te(n=$(this,(e=ee(t)).call.apply(e,[this].concat(o)))),"renderIcon",(function(e){if("QUEUED"===e)return i.a.createElement(ye,null,i.a.createElement(k.a,{size:"small"}));var t=c.a.getText("com.codebarrel.automation.audit.category.".concat(e)),n=ge[e];if(n){var r=n.icon;return i.a.createElement(me,{color:p.L.getColorByName(n.backgroundColor),title:t},i.a.createElement(r,{size:"small",primaryColor:p.L.getColorByName(n.color)}))}return null})),re(te(n),"renderItems",(function(){return i.a.createElement(i.a.Fragment,null,n.props.recentItems.map((function(e){var t=i.a.createElement("span",{title:e.objectItemName},e.objectItemName);if(n.props.isProjectAdmin){var r="".concat(n.props.projectAdminUrl,"#").concat(C.h,"/").concat(e.objectItemId);t=i.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:e.objectItemName},e.objectItemName)}var o=e.endExecution?e.endExecution:e.startExecution,a=P()(o).fromNow(),c=P()(o).format("DD/MM/YY hh:mm:ss a");return i.a.createElement(de,{key:"recent-item-".concat(e.id,"-").concat(e.objectItemName)},n.renderIcon(e.category),t,i.a.createElement(be,{title:c},a))})))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e;return e=this.props.recentItemsLoaded?0===this.props.recentItems.length?i.a.createElement("p",null,c.a.getText("com.codebarrel.automation.trigger.manual.no.executions")):this.renderItems():i.a.createElement(J,null),i.a.createElement(fe,null,i.a.createElement("h5",null,c.a.getText("com.codebarrel.automation.trigger.manual.recent.executions")),i.a.createElement(pe,null,e))}}])&&Z(n.prototype,r),o&&Z(n,o),t}(i.a.Component);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?je(e):t}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _e(){var e=Pe(["\n  width:100%;\n  font-size:14px;\n  color: ",";\n  background-color: ",";\n  border-color: ",";\n  border-radius:5px;\n  border-width: 1px;\n  height:40px;\n  margin-top:10px;\n  margin-bottom:10px;\n  &:focus {\n    outline: 0;\n    border-color: ",";\n    border-width: 2px;\n  }\n"]);return _e=function(){return e},e}function ke(){var e=Pe(["\n  color: ","\n"]);return ke=function(){return e},e}function Se(){var e=Pe(["\n  padding-top:24px;\n"]);return Se=function(){return e},e}function Pe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ce=s.default.div(Se()),Te=s.default.p(ke(),p.L.getColorByName("R500")),Ue=s.default.select(_e(),p.L.getColorByName("N900"),p.L.getColorByName("N10"),p.L.getColorByName("N20"),p.L.getColorByName("B100")),Ae=function(e){function t(){var e,n;we(this,t);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return Ie(je(n=xe(this,(e=Oe(t)).call.apply(e,[this].concat(a)))),"executeRule",(function(){n.props.selectedRule&&n.props.executeRule(n.props.context,n.props.selectedRule)})),Ie(je(n),"selectRule",(function(e){n.props.ruleSelected(n.props.context,e.target.value)})),Ie(je(n),"renderError",(function(){return n.props.error?i.a.createElement(Te,null,c.a.getText(n.props.error)):null})),Ie(je(n),"renderAdminLink",(function(){return n.props.context.projectAdmin?i.a.createElement(r.b,{appearance:"link",href:n.props.projectAdminUrl,target:"_parent"},c.a.getText("com.codebarrel.automation.trigger.manual.manage.rules")):null})),Ie(je(n),"renderManualRules",(function(){var e=n.props,t=!e.dataLoaded;return e.dataLoaded&&0===e.data.manualRules.length?i.a.createElement("div",null,i.a.createElement("p",null,c.a.getText("com.codebarrel.automation.trigger.manual.empty")),n.renderAdminLink()):i.a.createElement(i.a.Fragment,null,i.a.createElement("h5",null,c.a.getText("com.codebarrel.automation.trigger.manual.rules")),i.a.createElement(Ue,{value:e.selectedRule,className:"select",disabled:t,onChange:n.selectRule},e.data.manualRules.map((function(e){var t={label:e.name,value:"".concat(e.id)};return i.a.createElement("option",{key:t.value,value:t.value},t.label)}))),i.a.createElement(r.a,null,i.a.createElement(r.b,{isDisabled:t,onClick:n.executeRule,isLoading:e.executing,title:c.a.getText("com.codebarrel.automation.trigger.manual.run.title")},c.a.getText("com.codebarrel.automation.trigger.manual.run")),n.renderAdminLink()),n.renderError())})),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props;return e.dataError?i.a.createElement(Ce,null,i.a.createElement(o.a,{appearance:"error",title:c.a.getText("com.codebarrel.automation.common.concepts.error")},c.a.getText("com.codebarrel.automation.error.unknown"))):i.a.createElement(Ce,null,this.renderManualRules(),i.a.createElement(ve,{recentItemsLoaded:e.dataLoaded,recentItems:e.data.auditItems,isProjectAdmin:e.context.projectAdmin,projectAdminUrl:e.projectAdminUrl}))}}])&&Ee(n.prototype,a),u&&Ee(n,u),t}(i.a.Component);t.a=Object(l.c)((function(e){return{context:e.issueGlance.context,selectedRule:e.issueGlance.selectedRule,data:e.issueGlance.data,dataLoaded:e.issueGlance.dataLoaded,dataError:e.issueGlance.dataError,executing:e.issueGlance.executing,error:e.issueGlance.error,projectAdminUrl:Object(f.b)(e.issueGlance)}}),(function(e){return{ruleSelected:function(t,n){return e(d.m(t,n))},executeRule:function(t,n){return e(d.j(t,n))}}}))(Ae)},231:function(e,t,n){"use strict";n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return E})),n.d(t,"i",(function(){return j})),n.d(t,"m",(function(){return R})),n.d(t,"e",(function(){return _})),n.d(t,"l",(function(){return k})),n.d(t,"c",(function(){return P})),n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return T})),n.d(t,"k",(function(){return U})),n.d(t,"g",(function(){return A})),n.d(t,"h",(function(){return L})),n.d(t,"j",(function(){return N}));var r=n(203),o=n(1),a=n.n(o),c=n(37),u=n(78);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interval=t,this.timer=null}var t,n,r;return t=e,(n=[{key:"start",value:function(e){null===this.timer&&(this.timer=window.setTimeout(e,this.interval))}},{key:"stop",value:function(){this.timer&&(window.clearTimeout(this.timer),this.timer=null)}},{key:"restart",value:function(e){this.stop(),this.start(e)}}])&&i(t.prototype,n),r&&i(t,r),e}(),s=n(742),f=n(89);function p(e,t,n,r,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){p(a,r,o,c,u,"next",e)}function u(e){p(a,r,o,c,u,"throw",e)}c(void 0)}))}}var m=function(e){return{executeRule:(r=d(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.executeRuleUrl(n);case 2:return r=t.sent,t.abrupt("return",fetch(r,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",credentials:"same-origin"}).then(f.a));case 4:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)}),getItemsForIssue:(n=d(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getItemsUrl();case 2:return n=t.sent,t.abrupt("return",fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"GET",credentials:"same-origin"}).then(f.a).then(f.b));case 4:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)}),getIssueGlanceData:(t=d(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getIssueGlanceUrl();case 2:return n=t.sent,t.abrupt("return",fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"GET",credentials:"same-origin"}).then(f.a).then(f.b));case 4:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})};var t,n,r};function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t,n,r,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){g(a,r,o,c,u,"next",e)}function u(e){g(a,r,o,c,u,"throw",e)}c(void 0)}))}}var h="RULE_EXECUTION_ERROR",w=new l(1e4),E="ITEMS_FOR_ISSUE_LOADED",x=function(e){return function(){var t=v(regeneratorRuntime.mark((function t(n){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"LOAD_ITEMS_FOR_ISSUE"}),r=m(e),t.prev=2,t.next=5,r.getItemsForIssue();case 5:o=t.sent,n({type:E,recentItems:o}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n({type:h,error:"com.codebarrel.automation.trigger.manual.error.recent.items"});case 12:w.stop();case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return"codebarrel.automation.jira.view.selected.".concat(e.jiraContext.jira.project.key)},j="RULE_SELECTED",R=function(e,t){try{localStorage.setItem(O(e),t)}catch(e){}return{type:j,ruleId:t}},I=function(e,t,n){var r=null;try{r=localStorage.getItem(O(t))}catch(e){}r&&!n.every((function(e){return"".concat(e.id)!==r}))||(r=n.length>0?"".concat(n[0].id):null),r&&e(R(t,r))},_="LOAD_CONTEXT",k=function(e){return function(t){t({type:_,context:e})}},S=!1,P="GLANCE_OPENED",C="GLANCE_DATA_LOADED",T="GLANCE_DATA_ERROR",U=function(){return function(){var e=v(regeneratorRuntime.mark((function e(t,n){var o,a,i,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:P}),o=n(),a=o.issueGlance.context,i=o.issueGlance.projectTypeKey,e.prev=4,e.next=7,m(a).getIssueGlanceData();case 7:l=e.sent,r.e(a.tenantBaseUrl,l.env,l.appVersion,l.locale,l.cloudId).then((function(){return u.a.sendScreenEvent(c.c.ISSUE_GLANCE)})),i&&(l=b({},l,{manualRules:l.manualRules})),I(t,a,l.manualRules),t({type:C,issueGlanceData:l}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),e.t0.response&&503===e.t0.response.status?t({type:h,error:"com.codebarrel.automation.trigger.manual.maintenance"}):(console.error(e.t0),t({type:T}));case 17:l&&(f={notificationWebSocketUrl:l.notificationWebsocket.url,notificationTopic:l.notificationWebsocket.topic},S||(Object(s.a)(f,(function(){t(x(a))})),S=!0));case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t,n){return e.apply(this,arguments)}}()},A="RULE_FINISHED",L="RULE_QUEUED",N=function(e,t){return function(){var n=v(regeneratorRuntime.mark((function n(r){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"RULE_EXECUTING"}),setTimeout((function(){return r({type:A})}),1e3),n.prev=2,o=m(e),n.next=6,o.executeRule(t);case 6:r({type:L,ruleId:t}),w.restart((function(){r(x(e))})),u.a.sendTrackEvent({action:c.a.EXECUTE_MANUAL_RULE,actionSubject:c.b.RULE,source:c.c.ISSUE_GLANCE}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),n.t0.response&&429===n.t0.response.status?window.AP.flag.create({title:a.a.getText("com.codebarrel.automation.trigger.manual.executions.cant.execute"),body:a.a.getText("com.codebarrel.automation.trigger.manual.executions.exceeded"),type:"error"}):r({type:h,error:"com.codebarrel.automation.trigger.manual.error.exec"});case 14:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()}},2829:function(e,t,n){n(590),n(591),e.exports=n(2830)},2830:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(64),c=n(1),u=n.n(c),i=n(959),l=n(1446);function s(e,t,n,r,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){s(a,r,o,c,u,"next",e)}function u(e){s(a,r,o,c,u,"throw",e)}c(void 0)}))}}window.document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector("#page");window.AP&&window.AP.context&&window.AP.context.getContext?window.AP.context.getContext((function(t){var n,r=window.location&&window.location.search&&-1!==window.location.search.indexOf("pro=true"),o=window.location&&window.location.search&&-1!==window.location.search.indexOf("projectAdmin=true");if(window.location&&(-1!==window.location.href.indexOf("automation.atlassian.com/pro/")||-1!==window.location.href.indexOf("automation.codebarrel.io/pro/"))){var a=r?"pro/":"lite/";n="".concat(window.location.origin,"/").concat(a)}else{var c=r?"/":"-lite/",u=e.getAttribute("data-context-apipath");n="".concat(window.location.origin,"/").concat(u).concat(c)}var i,s,p,d=function(){return new Promise((function(e){window.AP.context.getToken((function(t){e(t)}))}))},m=t.jira.project.id,b=t.jira.issue.id,y={baseUrl:n,tenantBaseUrl:window.AP._hostOrigin,isLite:!r,actualKey:r?"com.codebarrel.addons.automation":"com.codebarrel.addons.automation.lite",jiraContext:t,projectId:t.jira.project.id,projectKey:t.jira.project.key,projectAdmin:o,getItemsUrl:(p=f(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return t=e.sent,e.abrupt("return","".concat(n,"rest/").concat(encodeURI(m),"/macros/").concat(encodeURI(b),"/audit-items?jwt=").concat(encodeURIComponent(t)));case 4:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)}),executeRuleUrl:(s=f(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return r=e.sent,e.abrupt("return","".concat(n,"rest/").concat(encodeURI(m),"/macros/").concat(encodeURI(b),"/rule/").concat(encodeURI(t),"/execute?jwt=").concat(encodeURIComponent(r)));case 4:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)}),getIssueGlanceUrl:(i=f(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return t=e.sent,e.abrupt("return","".concat(n,"rest/").concat(encodeURI(m),"/macros/").concat(encodeURI(b),"?jwt=").concat(encodeURIComponent(t)));case 4:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},g=Object(l.a)(e,y);window.AP.events.on("ISSUE_GLANCE_OPENED",(function(){g.glanceOpened()}))})):Object(a.render)(o.a.createElement(i.a,{appearance:"warning"},u.a.getText("com.codebarrel.automation.error.contact.support")),e)}))},604:function(e,t){if(void 0===window.I18N){var n=new Error("Cannot find module 'window.I18N'");throw n.code="MODULE_NOT_FOUND",n}e.exports=window.I18N}});
//# sourceMappingURL=automationissueglance.pack.js.map