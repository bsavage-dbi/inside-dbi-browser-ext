try{window.performance.mark("async-connect-modules.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-connect-modules"],{"./node_modules/@atlassian/mpac-fetch-wrapper/node_modules/whatwg-fetch/fetch.js":function(e,t){!function(e){"use strict";if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,i="ArrayBuffer"in e;if(i)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=function(e){return e&&DataView.prototype.isPrototypeOf(e)},s=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};y.prototype.append=function(e,t){e=p(e),t=f(t);var n=this.map[e];this.map[e]=n?n+","+t:t},y.prototype.delete=function(e){delete this.map[p(e)]},y.prototype.get=function(e){return e=p(e),this.has(e)?this.map[e]:null},y.prototype.has=function(e){return this.map.hasOwnProperty(p(e))},y.prototype.set=function(e,t){this.map[p(e)]=f(t)},y.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},y.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},y.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},y.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},n&&(y.prototype[Symbol.iterator]=y.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},O.error=function(){var e=new O(null,{status:0,statusText:""});return e.type="error",e};var l=[301,302,303,307,308];O.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new O(null,{status:t,headers:{location:e}})},e.Headers=y,e.Request=w,e.Response=O,e.fetch=function(e,t){return new Promise((function(n,o){var i=new w(e,t),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:_(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new O(t,e))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&r&&(a.responseType="blob"),i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===i._bodyInit?null:i._bodyInit)}))},e.fetch.polyfill=!0}function p(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function y(e){this.map={},e instanceof y?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(o&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&r&&u(e))this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!s(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=g(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=v(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(e,t){var n=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new y(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new y(t.headers)),this.method=function(e){var t=e.toUpperCase();return c.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function k(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function _(e){var t=new y;return e.split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t}function O(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new y(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},"./node_modules/@atlassian/mpac-functional-utils/dist/flowUtils.js":function(e,t,n){"use strict";t.a={unexpectedCase:function(e){return new Error("Unexpected case ".concat(e))}}},"./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js":function(e,t){e.exports=function(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}},"./node_modules/nanoid/index.browser.js":function(e,t,n){for(var r=self.crypto||self.msCrypto,o="-_",i=36;i--;)o+=i.toString(36);for(i=36;i---10;)o+=i.toString(36).toUpperCase();e.exports=function(e){var t="",n=r.getRandomValues(new Uint8Array(e||21));for(i=e||21;i--;)t+=o[63&n[i]];return t}},"./src/entry/connect-modules.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(r),i=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),a=n.n(i),u=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(u),c=n("./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(c),p=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),f=n.n(p),h=n("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js"),y=n.n(h),d={context:!1,accessToken:!1,enabled:!1},v=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),m=n.n(v);n("./node_modules/@atlassian/mpac-fetch-wrapper/node_modules/whatwg-fetch/fetch.js");function g(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}function b(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){var n=e.valueOf(),r=t.valueOf();if(n===r||n!=n&&r!=r)return!0;if(!n||!r)return!1}return!(!g(e)||!e.equals(t))}function w(e){if("number"==typeof e)return e&e;if("function"==typeof e.valueOf){var t=e.valueOf();if(t!==e)return w(t)}return g(e)?e.hashCode():function(e){var t=0;if(null==e||0===e.length)return t;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return t}(String(e))}var k=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},P=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},j=(function(e){function t(e){k(this,t);var n="",r=!0,o=!1,i=void 0;try{for(var a,u=e.slice(0,2)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;n+=", "+(s instanceof Error?s.name+"("+s.message+")":""+s)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}n=n.slice(2),e.length>2&&(n+=", ...");var c=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));c.name="CompositeError",c.errorsRef=e;var l=c;return l.constructor=t,l.__proto__=t.prototype,c}O(t,e),_(t,[{key:"errors",value:function(){return this.errorsRef.slice()}}])}(Error),function(e){function t(e){k(this,t);var n=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="DummyError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}O(t,e)}(Error),function(e){function t(e){k(this,t);var n=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="NoSuchElementError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}return O(t,e),t}(Error));(function(e){function t(e){k(this,t);var n=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="IllegalInheritanceError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}O(t,e)})(Error),function(e){function t(e){k(this,t);var n=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="IllegalStateError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}O(t,e)}(Error),function(e){function t(e){k(this,t);var n=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="IllegalArgumentError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}O(t,e)}(Error),function(e){function t(e){k(this,t);var n=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="NotImplementedError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}O(t,e)}(Error),function(e){function t(e){k(this,t);var n=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="TimeoutError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}O(t,e)}(Error);function E(e){return function(){var t=Array.prototype.slice.call(arguments);return t.push(this),e.apply(void 0,t)}}function x(e,t,n){var r=e,o=r.prototype,i="fantasy-land/",a=i+"map",u=i+"ap",s=i+"of";o.equals?o["fantasy-land/equals"]=o.equals:n&&(o["fantasy-land/equals"]=E(n.equals)),o.map?o[a]=o.map:t&&(o[a]=E(t.map)),o.ap?o[u]=o.ap:t&&(o[u]=E(t.ap)),r.pure?r[s]=r.pure:t&&(r[s]=t.of),o.chain?o["fantasy-land/chain"]=o.chain:t&&(o["fantasy-land/chain"]=E(t.chain)),r.chainRec?r["fantasy-land/chainRec"]=r.chainRec:t&&(r["fantasy-land/chainRec"]=t.chainRec)}Object.freeze({convertToMethod:E,fantasyLandRegister:x});var A=function(){function e(t,n){k(this,e),this._isRight="right"===n,this.value=t}return _(e,[{key:"isLeft",value:function(){return!this._isRight}},{key:"isRight",value:function(){return this._isRight}},{key:"contains",value:function(e){return this._isRight&&b(this.value,e)}},{key:"exists",value:function(e){return this._isRight&&e(this.value)}},{key:"filterOrElse",value:function(e,t){return this._isRight?e(this.value)?this:I(t()):this}},{key:"flatMap",value:function(e){return this._isRight?e(this.value):this}},{key:"chain",value:function(e){return this.flatMap(e)}},{key:"ap",value:function(e){var t=this;return e.flatMap((function(e){return t.map(e)}))}},{key:"fold",value:function(e,t){return this._isRight?t(this.value):e(this.value)}},{key:"forAll",value:function(e){return!this._isRight||e(this.value)}},{key:"get",value:function(){if(this._isRight)return this.value;throw new j("left.get()")}},{key:"getOrElse",value:function(e){return this._isRight?this.value:e}},{key:"getOrElseL",value:function(e){return this._isRight?this.value:e()}},{key:"map",value:function(e){return this._isRight?R(e(this.value)):this}},{key:"forEach",value:function(e){this._isRight&&e(this.value)}},{key:"swap",value:function(){return this._isRight?I(this.value):R(this.value)}},{key:"toOption",value:function(){return this._isRight?B(this.value):C}},{key:"equals",value:function(e){return null!=e&&(this._isRight===e._isRight&&b(this.value,e.value))}},{key:"hashCode",value:function(){return this._isRight?w(this.value)<<2:w(this.value)<<3}}],[{key:"pure",value:function(e){return new S(e)}},{key:"left",value:function(e){return I(e)}},{key:"right",value:function(e){return R(e)}},{key:"map2",value:function(e,t,n){return e.isLeft()?e:t.isLeft()?t:R(n(e.value,t.value))}},{key:"map3",value:function(e,t,n,r){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:R(r(e.value,t.value,n.value))}},{key:"map4",value:function(e,t,n,r,o){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:R(o(e.value,t.value,n.value,r.value))}},{key:"map5",value:function(e,t,n,r,o,i){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:o.isLeft()?o:R(i(e.value,t.value,n.value,r.value,o.value))}},{key:"map6",value:function(e,t,n,r,o,i,a){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:o.isLeft()?o:i.isLeft()?i:R(a(e.value,t.value,n.value,r.value,o.value,i.value))}},{key:"tailRecM",value:function(e,t){for(var n=e;;){var r=t(n);if(!r.isRight())return r;var o=r.value;if(o.isRight())return R(o.value);n=o.value}}}]),e}(),U=function(e){function t(e){return k(this,t),P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"left"))}return O(t,e),t}(A);function I(e){return new U(e)}var S=function(e){function t(e){return k(this,t),P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"right"))}return O(t,e),t}(A);function R(e){return new S(e)}var T={equals:function(e,t){return e?e.equals(t):!t},map:function(e,t){return t.map(e)},ap:function(e,t){return t.ap(e)},of:A.pure,chain:function(e,t){return t.flatMap(e)},chainRec:function(e,t){return A.tailRecM(t,(function(t){return e(A.left,A.right,t)}))}};x(A,T,T);var D=function(){function e(t,n){k(this,e),this._isEmpty=null!=n?n:null==t,this.value=t}return _(e,[{key:"get",value:function(){if(!this._isEmpty)return this.value;throw new j("Option.get")}},{key:"getOrElse",value:function(e){return this._isEmpty?e:this.value}},{key:"orNull",value:function(){return this._isEmpty?null:this.value}},{key:"orUndefined",value:function(){return this._isEmpty?void 0:this.value}},{key:"getOrElseL",value:function(e){return this._isEmpty?e():this.value}},{key:"orElse",value:function(e){return this._isEmpty?e:this}},{key:"orElseL",value:function(e){return this._isEmpty?e():this}},{key:"isEmpty",value:function(){return this._isEmpty}},{key:"nonEmpty",value:function(){return!this._isEmpty}},{key:"map",value:function(e){return this._isEmpty?C:B(e(this.value))}},{key:"flatMap",value:function(e){return this._isEmpty?C:e(this.value)}},{key:"chain",value:function(e){return this.flatMap(e)}},{key:"ap",value:function(e){var t=this;return e.flatMap((function(e){return t.map(e)}))}},{key:"filter",value:function(e){return this._isEmpty||!e(this.value)?C:this}},{key:"fold",value:function(e,t){return this._isEmpty?e():t(this.value)}},{key:"contains",value:function(e){return!this._isEmpty&&b(this.value,e)}},{key:"exists",value:function(e){return!this._isEmpty&&e(this.value)}},{key:"forAll",value:function(e){return this._isEmpty||e(this.value)}},{key:"forEach",value:function(e){this._isEmpty||e(this.value)}},{key:"equals",value:function(e){return null!=e&&(this.nonEmpty()&&e.nonEmpty()?b(this.value,e.value):this.isEmpty()&&e.isEmpty())}},{key:"hashCode",value:function(){return this._isEmpty?2433880:null==this.value?9735524:w(this.value)<<2}}],[{key:"of",value:function(e){return null!=e?B(e):C}},{key:"some",value:function(t){return new e(t,!1)}},{key:"none",value:function(){return C}},{key:"empty",value:function(){return C}},{key:"pure",value:function(e){return B(e)}},{key:"map2",value:function(e,t,n){return e.nonEmpty()&&t.nonEmpty()?B(n(e.value,t.value)):C}},{key:"map3",value:function(e,t,n,r){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()?B(r(e.value,t.value,n.value)):C}},{key:"map4",value:function(e,t,n,r,o){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()?B(o(e.value,t.value,n.value,r.value)):C}},{key:"map5",value:function(e,t,n,r,o,i){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&o.nonEmpty()?B(i(e.value,t.value,n.value,r.value,o.value)):C}},{key:"map6",value:function(e,t,n,r,o,i,a){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&o.nonEmpty()&&i.nonEmpty()?B(a(e.value,t.value,n.value,r.value,o.value,i.value)):C}},{key:"tailRecM",value:function(e,t){for(var n=e;;){var r=t(n);if(!r.nonEmpty())return C;var o=r.value;if(o.isRight())return B(o.value);n=o.value}}}]),e}(),F=function(e){function t(e){return k(this,t),P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,!1))}return O(t,e),t}(D);function B(e){return new F(e)}var C=new(function(e){function t(){return k(this,t),P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,void 0,!0))}return O(t,e),t}(D)),L={equals:function(e,t){return e?e.equals(t):!t},map:function(e,t){return t.map(e)},ap:function(e,t){return t.ap(e)},of:D.pure,chain:function(e,t){return t.flatMap(e)},chainRec:function(e,t){return D.tailRecM(t,(function(t){return e(A.left,A.right,t)}))}};x(D,L,L);var M=function(){function e(t,n){k(this,e),this._isSuccess="success"===n,this.value=t}return _(e,[{key:"isSuccess",value:function(){return this._isSuccess}},{key:"isFailure",value:function(){return!this._isSuccess}},{key:"get",value:function(){if(!this._isSuccess)throw this.value;return this.value}},{key:"getOrElse",value:function(e){return this._isSuccess?this.value:e}},{key:"getOrElseL",value:function(e){return this._isSuccess?this.value:e()}},{key:"orNull",value:function(){return this._isSuccess?this.value:null}},{key:"orUndefined",value:function(){return this._isSuccess?this.value:void 0}},{key:"orElse",value:function(e){return this._isSuccess?this:e}},{key:"orElseL",value:function(e){return this._isSuccess?this:e()}},{key:"failed",value:function(){return this._isSuccess?J(new j("try.failed()")):N(this.value)}},{key:"fold",value:function(e,t){return this._isSuccess?t(this.value):e(this.value)}},{key:"filter",value:function(e){if(!this._isSuccess)return this;try{return e(this.value)?this:J(new j("Predicate does not hold for "+this.value))}catch(e){return J(e)}}},{key:"flatMap",value:function(e){if(!this._isSuccess)return this;try{return e(this.value)}catch(e){return J(e)}}},{key:"chain",value:function(e){return this.flatMap(e)}},{key:"ap",value:function(e){var t=this;return e.flatMap((function(e){return t.map(e)}))}},{key:"map",value:function(t){var n=this;return this._isSuccess?e.of((function(){return t(n.value)})):this}},{key:"forEach",value:function(e){this._isSuccess&&e(this.value)}},{key:"recover",value:function(t){var n=this;return this._isSuccess?this:e.of((function(){return t(n.value)}))}},{key:"recoverWith",value:function(e){try{return this._isSuccess?this:e(this.value)}catch(e){return J(e)}}},{key:"toOption",value:function(){return this._isSuccess?B(this.value):C}},{key:"toEither",value:function(){return this._isSuccess?R(this.value):I(this.value)}},{key:"equals",value:function(e){return null!=e&&(this._isSuccess?e._isSuccess&&b(this.value,e.value):!e._isSuccess&&b(this.value,e.value))}},{key:"hashCode",value:function(){return this._isSuccess,w(this.value)}}],[{key:"of",value:function(e){try{return N(e())}catch(e){return J(e)}}},{key:"pure",value:function(t){return e.success(t)}},{key:"unit",value:function(){return K}},{key:"success",value:function(e){return N(e)}},{key:"failure",value:function(e){return J(e)}},{key:"raise",value:function(e){return J(e)}},{key:"map2",value:function(e,t,n){if(e.isFailure())return e;if(t.isFailure())return t;try{return N(n(e.value,t.value))}catch(e){return J(e)}}},{key:"map3",value:function(e,t,n,r){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;try{return N(r(e.value,t.value,n.value))}catch(e){return J(e)}}},{key:"map4",value:function(e,t,n,r,o){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;try{return N(o(e.value,t.value,n.value,r.value))}catch(e){return J(e)}}},{key:"map5",value:function(e,t,n,r,o,i){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(o.isFailure())return o;try{return N(i(e.value,t.value,n.value,r.value,o.value))}catch(e){return J(e)}}},{key:"map6",value:function(e,t,n,r,o,i,a){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(o.isFailure())return o;if(i.isFailure())return i;try{return N(a(e.value,t.value,n.value,r.value,o.value,i.value))}catch(e){return J(e)}}},{key:"tailRecM",value:function(e,t){for(var n=e;;)try{var r=t(n);if(r.isFailure())return r;var o=r.get();if(o.isRight())return N(o.value);n=o.value}catch(e){return J(e)}}}]),e}(),q=function(e){function t(e){return k(this,t),P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"success"))}return O(t,e),t}(M);function N(e){return new q(e)}var H=function(e){function t(e){return k(this,t),P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"failure"))}return O(t,e),t}(M);function J(e){return new H(e)}var z={equals:function(e,t){return e?e.equals(t):!t},map:function(e,t){return t.map(e)},ap:function(e,t){return t.ap(e)},of:M.pure,chain:function(e,t){return t.flatMap(e)},chainRec:function(e,t){return M.tailRecM(t,(function(t){return e(A.left,A.right,t)}))}};x(M,z,z);var K=N(void 0);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.retries,r=t.accept,o=t.retryDelay,i=m()(t,["retries","accept","retryDelay"]),a=D.of(n).getOrElse(0),u=D.of(r).getOrElse((function(e){return Promise.resolve()})),s=D.of(o).getOrElse(0);return new Promise((function(t,n){!function r(o){fetch(e,i).then((function(e){return u(e.clone()).then((function(n){return t(e)}))})).catch((function(t){o>0?setTimeout((function(){r(--o)}),s):n({url:e,error:t,status:t.status||"unknown"})}))}(a)}))}var W=function(e){return!0===e.ok?Promise.resolve():Promise.reject(e)};function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $(e,G(G({},t),{},{accept:function(e){return W(e).then((function(n){return D.of(t.accept).getOrElse((function(e){return Promise.resolve()}))(e)}))}})).catch((function(e){return Promise.reject(e)}))}var Q=n("./node_modules/@atlassian/mpac-functional-utils/dist/flowUtils.js");function Y(e){return e}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=function(e){return{name:"jira"===e.product?"Jira":"Confluence",type:"application",id:"ari:cloud:".concat(e.product,":").concat(e.cloudId,":/")}};function ne(e,t,n){return n.value.returnsPromise=!0,n.enumerable=!0,n}function re(e,t,n){var r=n.value.name;return n.value=function(){return Promise.reject("Marketplace SPI function [".concat(r,"] not implemented"))},n}function oe(e,t,n){var r=n.value;return n.value=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[t.length-1]._context.extension.addon_key.match(/com\.atlassian\.(jira|confluence)\.emcee($|\.local|\.staging|\.development\..*)/g)?r.apply(this,t):Promise.reject("Emcee Internal API")},n}function ie(e){var t={},n=Object.getPrototypeOf(e);return Object.keys(n).forEach((function(r){t[r]=n[r].bind(e),t[r].returnsPromise=n[r].returnsPromise})),t}function ae(e){return ue.apply(this,arguments)}function ue(){return(ue=a()(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X("".concat(t,"/rest/plugins/1.0/upm-token"),{method:"HEAD",credentials:Oe(t)});case 2:return n=e.sent,e.abrupt("return",n.headers.get("upm-token"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t,n){return ce.apply(this,arguments)}function ce(){return(ce=a()(o.a.mark((function e(t,n,r){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={method:"POST",credentials:Oe(t),headers:new window.Headers({"content-type":"application/vnd.atl.plugins.remote.install+json"})},e.next=3,X("".concat(t,"/rest/plugins/1.0/apps/install-subscribe?addonKey=").concat(r,"&token=").concat(n),i);case 3:return e.next=5,e.sent.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=function(e){return function(t,n){if(e.key)return t(e);if(e.url)return n(e);throw"Invalid identifier"}},pe=function(e,t){return 60*e*1e3/t};function fe(e,t,n){return he.apply(this,arguments)}function he(){return(he=a()(o.a.mark((function e(t,n,r){var i,a,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={retries:pe(4,r),retryDelay:r,credentials:Oe(t),accept:function(e){return e.json().then((function(e){var t;return(null===(t=e.status)||void 0===t?void 0:t.done)?Promise.resolve():Promise.reject(new Error("Request pending"))}))}},e.next=3,X(n,i);case 3:return a=e.sent,e.next=6,a.json();case 6:if(u=e.sent,!(-1!==a.headers.get("content-type").indexOf("application/vnd.atl.plugins.install.complete+json"))){e.next=12;break}return e.abrupt("return",u);case 12:throw u.status;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ye=function(e){var t,n,r,o,i,a,u,s=null===(t=e._embedded)||void 0===t?void 0:t.version,c=null===(n=e._embedded)||void 0===n?void 0:n.vendor;return ee(ee(ee(ee(ee(ee(ee({key:e.key,name:e.name,origin:"marketplace",description:e.tagLine||""},ge("version",null==s?void 0:s.name)),ge("vendor",null==c?void 0:c.name)),ge("vendorLink",null==c||null===(r=c._links.alternate)||void 0===r?void 0:r.href)),ge("icon",null===(o=e._embedded)||void 0===o||null===(i=o.logo)||void 0===i?void 0:i._links.image.href)),ge("privacyPolicy",null===(a=e.vendorLinks)||void 0===a?void 0:a.privacy)),ge("eula",null==s||null===(u=s.vendorLinks)||void 0===u?void 0:u.eula)),{},{vendorType:(null==c?void 0:c.isAtlassian)?"internal":"thirdParty",metadata:void 0})},de=function(e){var t,n,r,o=null===(t=e._embedded)||void 0===t||null===(n=t.version)||void 0===n||null===(r=n.deployment)||void 0===r?void 0:r.permissions;return o?o.map((function(e){return e.key})):[]},ve=function(e){var t,n,r;return ee(ee(ee(ee(ee(ee(ee({key:e.key,name:e.name,origin:"marketplace",description:e.summary,version:e.version},ge("vendor",null===(t=e.vendor)||void 0===t?void 0:t.name)),ge("vendorLink",null===(n=e.vendor)||void 0===n?void 0:n.marketplaceLink)),ge("vendorType",e.vendor?e.vendor.isAtlassian?"internal":"thirdParty":void 0)),ge("icon",null===(r=e.logo)||void 0===r?void 0:r.link)),ge("privacyPolicy",e.links.privacy)),ge("eula",e.links.eula)),{},{metadata:void 0})},me=function(e){return{details:ve(e),preinstalled:e.preinstalled,scopes:(e.permissions||[]).map((function(e){return e.key})),metadata:void 0}};function ge(e,t){return null!=t?f()({},e,t):{}}function be(e,t,n){var r,o,i,a=null===(r=t.links)||void 0===r?void 0:r.postInstall,u=null===(o=t.links)||void 0===o?void 0:o.configure,s=null===(i=t.links)||void 0===i?void 0:i.manage;return _e(n,e).map((function(t){return function(e,t,n,r,o){return ee(ee(ee(ee({details:ye(e),scopes:de(e),enabled:!0,latestVersion:!0,installationId:e.key},ge("getStartedUrl",t)),ge("configureUrl",n)),ge("manageAppUrl",r)),{},{paymentModel:o,installTime:new Date,authType:{type:"2LO"},metadata:void 0})}(e,a,u,s,t)}))}var we={type:"free"},ke=function(e){return{type:"paid",licenseType:e}},_e=function(e,t){var n,r,o=null==t||null===(n=t._embedded)||void 0===n||null===(r=n.version)||void 0===r?void 0:r.paymentModel;return o?function(e){return function(t,n,r){switch(e){case"atlassian":return n();case"free":return t();case"vendor":return r();default:throw Q.a.unexpectedCase(e)}}}(o)((function(){return A.right(we)}),(function(){var t,n,r,o,i=null===(t=e.licenseDetails)||void 0===t?void 0:t.evaluation,a=null===(n=e.licenseDetails)||void 0===n?void 0:n.autoRenewal,u=null===(r=e.licenseDetails)||void 0===r?void 0:r.expiryDate;return null!=i&&null!=a?i?function(e,t){return e?A.right({type:"evaluation",expiry:e,isAutoRenewal:t}):A.left("Unable to get Expiry date for evaluation license")}(u,a).map(ke):function(e,t){return t?A.right({type:"subscription",renewalType:{isAutoRenewal:!0}}):e?A.right({type:"subscription",renewalType:{isAutoRenewal:!1,endDate:e}}):A.left("Unable to get end date for subscription license")}(null===(o=e.licenseDetails)||void 0===o?void 0:o.subscriptionEndDate,a).map(ke):A.left("Unable to get subscription information from UPM")}),(function(){return A.left("Cannot get subscription information for a PvV app")})):A.left("Unable to get payment model from marketplace")};function Oe(e){return""===e?"same-origin":"include"}var Pe=function(e,t){return e.reduce((function(e,n){return e[t(n)]=n,e}),{})},je=n("./node_modules/nanoid/index.browser.js"),Ee=n.n(je);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue=function(e,t){var n=function(e,t){return new Function("return function (call) { \n         return function ".concat(e,"() { \n           return call(this, arguments) \n         }; \n      };"))()(Function.apply.bind(t))}(e,(function(r){var o=this,i=t?t(r):r,a=i.code,u=i.message,s=i.meta,c=i.source,l=m()(i,["code","message","meta","source"]);this.code=a,this.message=u,this.id=Ee()(9),this.type=e,this.source=c,this.meta=Ae(Ae({},s),l),this.toJSON=function(){return Ae({id:o.id,code:o.code,type:o.type,message:o.message,meta:o.meta},o.source&&{source:o.source.toJSON?o.source.toJSON():o.source.message?o.source.message:o.source})},this.toString=JSON.stringify(this.toJSON()),Object.prototype.hasOwnProperty.call(Error,"captureStackTrace")?Error.captureStackTrace(this,n):this.stack=new Error(u).stack}));return"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(n.prototype,Error.prototype):n.prototype=Object.create(Error.prototype,{constructor:{value:n}}),n},Ie=Ue("AppInstallError",(function(e){var t=e.code,n=e.message,r=e.addon;return{code:t,message:n,source:e.source,meta:{addon:r}}})),Se=function(e){return Ue(e,(function(e){var t=e.source,n=e.appKey;return{code:"FetchError",message:"Failed to fetch app details for ".concat(n),source:t,meta:{appKey:n}}}))},Re=function(e){return{credentials:Oe(e)}},Te=function(e,t){return"".concat(e,"/rest/plugins/1.0/apps/install-subscribe/permission?addonKey=").concat(t)},De=function(e,t){return"".concat(e,"/rest/plugins/1.0/").concat(t,"-key")},Fe=function(e,t){return"".concat(e,"/rest/plugins/1.0/").concat(t,"/marketplace")},Be=function(e){return"".concat(e,"/rest/plugins/1.0/")};function Ce(e,t){return Le.apply(this,arguments)}function Le(){return(Le=a()(o.a.mark((function e(t,n){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X(De(t,n),Re(t));case 3:return r=e.sent,e.next=6,r.json();case 6:return i=e.sent,e.abrupt("return",{links:{postInstall:i.links["post-install"],configure:i.links.configure,manage:i.links.manage},key:i.key});case 10:throw e.prev=10,e.t0=e.catch(0),new(Se("InstalledAppFromUPMError"))({source:e.t0,appKey:n});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Me(e,t){return qe.apply(this,arguments)}function qe(){return(qe=a()(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(Te(t,n),Re(t));case 2:if(!((r=e.sent).status>=200&&r.status<=299)){e.next=7;break}return e.abrupt("return",Promise.resolve(!0));case 7:if(401!==r.status&&403!==r.status){e.next=11;break}return e.abrupt("return",Promise.resolve(!1));case 11:return e.abrupt("return",Promise.reject("".concat(r.status,": ").concat(r.statusText)));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ne=function(){var e=a()(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X(Fe(t,n),Re(t));case 3:return r=e.sent,e.abrupt("return",r.json());case 7:throw e.prev=7,e.t0=e.catch(0),new(Se("InstalledMarketplaePluginUPMError"))({source:e.t0,appKey:n});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),He=function(e,t){return X(function(e,t){return"".concat(e,"/rest/plugins/1.0/available/").concat(t,"-key")}(e,t),Re(e)).then((function(e){return e.json()}))},Je=function(e){return X(function(e){return"".concat(e,"/rest/plugins/1.0/installed-marketplace")}(e),Re(e)).then((function(e){return e.json()}))};function ze(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=a()(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(Be(t),Re(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.next=8,r.plugins.filter((function(e){return(e.userInstalled||e.usesLicensing)&&"Embedded Marketplace"!==e.name})).map((function(e){return{links:{postInstall:e.links["post-install"],configure:e.links.configure,manage:e.links.manage},key:e.key}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ve,Ge=function(e){return X(function(e){return"".concat(e,"/rest/plugins/1.0/host-status")}(e),Re(e)).then((function(e){return e.json()}))},$e=function(){var e=a()(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X(t+"/rest/2/addons/".concat(n,"?hosting=cloud&withVersion=true"));case 3:return r=e.sent,e.abrupt("return",r.json());case 7:throw e.prev=7,e.t0=e.catch(0),new(Se("MarketplaceAppByKeyError"))({source:e.t0,appKey:n});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qe,Ye=(Ve=function(){function e(t){s()(this,e),f()(this,"config",void 0),this.config=t}return l()(e,[{key:"getHostInfo",value:function(){return Promise.resolve(Xe(Xe({supports:d,product:this.config.product},this.config.subproduct?{subproduct:this.config.subproduct}:{}),{},{baseUrl:this.config.baseUrl,globalContext:te(this.config)}))}},{key:"getHostPricingInfo",value:function(){var e=a()(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(this.config.baseUrl);case 2:return t=e.sent,e.abrupt("return",{evaluation:t.hostLicense.evaluation,currentLicensedUsers:t.upmLicensedHostUsers,renewalType:t.hostLicense.autoRenewal?"auto":"quote",maximumLicensedUsers:t.hostLicense.maximumNumberOfUsers,billingCurrency:t.billingCurrency,subscriptionPeriod:Object.prototype.hasOwnProperty.call(t.hostLicense,"subscriptionAnnual")?t.hostLicense.subscriptionAnnual?"annual":"monthly":"annual"});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),y()(Ve.prototype,"getHostInfo",[ne,oe],Object.getOwnPropertyDescriptor(Ve.prototype,"getHostInfo"),Ve.prototype),y()(Ve.prototype,"getHostPricingInfo",[ne,oe],Object.getOwnPropertyDescriptor(Ve.prototype,"getHostPricingInfo"),Ve.prototype),Ve),Ze=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),et=n.n(Ze),tt=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),nt=n.n(tt),rt={mpacBaseUrl:"https://marketplace.atlassian.com"},ot={mpacBaseUrl:"https://marketplace.stg.internal.atlassian.com"},it=function(e){switch(e.environment){case"prod":return rt;case"staging":return ot;default:return console.error("Unable to configure marketplace env: "+e.environment),rt}},at=function(e){return e.remoteInstallable||e.preinstalled};function ut(e,t,n){return st.apply(this,arguments)}function st(){return(st=a()(o.a.mark((function e(t,n,r){var i,a,u,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([$e(n,Y(t.key)),Ce(r,t.key),Ne(r,t.key)]);case 2:return i=e.sent,a=nt()(i,3),u=a[0],s=a[1],c=a[2],e.abrupt("return",be(u,s,c).fold((function(e){return Promise.reject(e)}),(function(e){return e})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e,t){return t.map((function(t){return $e(e,t.key).catch((function(e){return e}))}))}function lt(e,t){return pt.apply(this,arguments)}function pt(){return(pt=a()(o.a.mark((function e(t,n){var r,i,a,u,s,c,l,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([ze(n),Je(n)]);case 2:return r=e.sent,i=nt()(r,2),a=i[0],u=i[1],e.next=8,Promise.all(ct(t,a));case 8:return s=e.sent,c=Pe(u.plugins,(function(e){return e.key})),l=Pe(s,(function(e){return e.key})),p=a.reduce((function(e,t){var n=c[t.key],r=l[t.key];return r&&n?[].concat(et()(e),et()(be(r,t,n).map((function(e){return[e]})).getOrElse([]))):(console.error("Marketplace API or Installed Marketplace API didn't return a response for ".concat(t.key)),e)}),[]),e.abrupt("return",p);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ft,ht,yt,dt=(Qe=function(){function e(t){s()(this,e),f()(this,"config",void 0),f()(this,"upmBaseUrl",void 0),this.config=t,this.upmBaseUrl=this.config.baseUrl}return l()(e,[{key:"getInstalledAddons",value:function(){var e=a()(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=it(this.config).mpacBaseUrl,e.prev=1,e.next=4,lt(n,this.upmBaseUrl);case 4:return r=e.sent,e.abrupt("return",{values:r,totalCount:r.length,pageSize:r.length});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{values:[],totalCount:0,pageSize:0});case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"uninstallAddon",value:function(e){return Promise.reject()}},{key:"installAddon",value:function(){var e=a()(o.a.mark((function e(t){var n,r,i,u,s=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(){return(u=a()(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Ie({message:"Marketplace SPI function [InstallAddon with InstallByUrl] not implemented",addon:t.addon,code:"MethodNotImplementedError"});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(e){return u.apply(this,arguments)},n={getTokenFromUPM:function(){var e=a()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae(s.upmBaseUrl);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new Ie({addon:t.addon,code:"UPMTokenFetchError",message:"Fetching token from UPM failed for ".concat(t.addon.toString()),source:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),postInstallToUPM:function(){var e=a()(o.a.mark((function e(n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se(s.upmBaseUrl,n,r);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new Ie({addon:t.addon,code:e.t0.subCode||e.t0.contentType||"UnknownUPMInstallSubscribeError",message:e.t0.errorMessage,source:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),waitForPendingUPMTask:function(){var e=a()(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe(s.upmBaseUrl,n.links.self,n.pingAfter);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new Ie({addon:t.addon,code:"UPMInstallPostError",message:"Failed while polling for app installation status for ".concat(t.addon.toString()),source:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getInstalledAddonInternal:function(){var e=a()(o.a.mark((function e(n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ut(n,r,s.upmBaseUrl);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new Ie({addon:t.addon,code:"FetchAddonInternalError",message:"Failed while constructing a app object post installation success for ".concat(t.addon.toString()),source:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},r=function(){var e=a()(o.a.mark((function e(t){var r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=it(s.config).mpacBaseUrl,e.next=3,n.getTokenFromUPM();case 3:return i=e.sent,e.next=6,n.postInstallToUPM(i,t.key);case 6:return a=e.sent,e.next=9,n.waitForPendingUPMTask(a);case 9:return e.abrupt("return",n.getInstalledAddonInternal(t,r));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=6,le(t.addon)(r,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"upgradeAddon",value:function(e){return Promise.reject()}},{key:"uninstallAddonFromSite",value:function(e){return Promise.reject()}},{key:"createContainerToken",value:function(e){return Promise.reject()}},{key:"getInstalledAddon",value:function(e){var t=it(this.config).mpacBaseUrl;return ut(e.addon,t,this.upmBaseUrl)}},{key:"getInstallableAddon",value:function(e){var t=this;return le(e.addon)(function(){var e=a()(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He(t.upmBaseUrl,n.key);case 2:return r=e.sent,e.abrupt("return",at(r)?me(r):Promise.reject("Requested add-on is not installable"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject("Marketplace SPI function [getInstallableAddon with InstallByUrl] not implemented")}))}},{key:"rotateContainerToken",value:function(e){return Promise.reject()}}]),e}(),y()(Qe.prototype,"getInstalledAddons",[ne,oe],Object.getOwnPropertyDescriptor(Qe.prototype,"getInstalledAddons"),Qe.prototype),y()(Qe.prototype,"uninstallAddon",[ne,oe,re],Object.getOwnPropertyDescriptor(Qe.prototype,"uninstallAddon"),Qe.prototype),y()(Qe.prototype,"installAddon",[ne,oe,function(e,t,n){var r=n.value,o=function(e){return Promise.resolve(e)==e};return n.value=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=r.apply(this,t);return o(i)?i.then((function(e){return e})).catch((function(e){throw e.toJSON?e.toJSON():e})):i},n}],Object.getOwnPropertyDescriptor(Qe.prototype,"installAddon"),Qe.prototype),y()(Qe.prototype,"upgradeAddon",[ne,oe,re],Object.getOwnPropertyDescriptor(Qe.prototype,"upgradeAddon"),Qe.prototype),y()(Qe.prototype,"uninstallAddonFromSite",[ne,oe,re],Object.getOwnPropertyDescriptor(Qe.prototype,"uninstallAddonFromSite"),Qe.prototype),y()(Qe.prototype,"createContainerToken",[ne,oe,re],Object.getOwnPropertyDescriptor(Qe.prototype,"createContainerToken"),Qe.prototype),y()(Qe.prototype,"getInstalledAddon",[ne,oe],Object.getOwnPropertyDescriptor(Qe.prototype,"getInstalledAddon"),Qe.prototype),y()(Qe.prototype,"getInstallableAddon",[ne,oe],Object.getOwnPropertyDescriptor(Qe.prototype,"getInstallableAddon"),Qe.prototype),y()(Qe.prototype,"rotateContainerToken",[ne,oe,re],Object.getOwnPropertyDescriptor(Qe.prototype,"rotateContainerToken"),Qe.prototype),Qe),vt=(ft=function(){function e(t){s()(this,e),f()(this,"config",void 0),this.config=t}return l()(e,[{key:"getMostRecentContext",value:function(){return Promise.reject()}},{key:"getContextInstallationForInstalledAddonContext",value:function(e){return Promise.reject()}},{key:"getContextInstallationsForInstalledAddon",value:function(e){return Promise.reject()}},{key:"getContext",value:function(e){return Promise.reject()}},{key:"getContexts",value:function(e){return Promise.reject()}}]),e}(),y()(ft.prototype,"getMostRecentContext",[ne,oe,re],Object.getOwnPropertyDescriptor(ft.prototype,"getMostRecentContext"),ft.prototype),y()(ft.prototype,"getContextInstallationForInstalledAddonContext",[ne,oe,re],Object.getOwnPropertyDescriptor(ft.prototype,"getContextInstallationForInstalledAddonContext"),ft.prototype),y()(ft.prototype,"getContextInstallationsForInstalledAddon",[ne,oe,re],Object.getOwnPropertyDescriptor(ft.prototype,"getContextInstallationsForInstalledAddon"),ft.prototype),y()(ft.prototype,"getContext",[ne,oe,re],Object.getOwnPropertyDescriptor(ft.prototype,"getContext"),ft.prototype),y()(ft.prototype,"getContexts",[ne,oe,re],Object.getOwnPropertyDescriptor(ft.prototype,"getContexts"),ft.prototype),ft),mt=(ht=function(){function e(t){s()(this,e),f()(this,"config",void 0),this.config=t}return l()(e,[{key:"hasInstallPermission",value:function(){var e=a()(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me(this.config.baseUrl,t.addon.details.key);case 2:if(!e.sent){e.next=6;break}e.t0={allowed:!0},e.next=7;break;case 6:e.t0={allowed:!1,message:"No addon manage permission",key:"noAddonManagePermission"};case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasUninstallPermission",value:function(e){return Promise.reject()}}]),e}(),y()(ht.prototype,"hasInstallPermission",[ne,oe],Object.getOwnPropertyDescriptor(ht.prototype,"hasInstallPermission"),ht.prototype),y()(ht.prototype,"hasUninstallPermission",[ne,oe,re],Object.getOwnPropertyDescriptor(ht.prototype,"hasUninstallPermission"),ht.prototype),ht),gt=function(e,t){return"".concat(e,"/gateway/api/marketplace").concat(t)},bt=(yt=function(){function e(t){s()(this,e),f()(this,"config",void 0),f()(this,"siteBaseUrl",void 0),this.config=t,this.siteBaseUrl=new URL(this.config.baseUrl).origin}return l()(e,[{key:"fetchOk",value:function(){var e=a()(o.a.mark((function e(t,n){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X(gt(this.siteBaseUrl,t),n);case 3:return r=e.sent,e.next=6,r.json();case 6:return i=e.sent,e.abrupt("return",Promise.resolve(i));case 10:if(e.prev=10,e.t0=e.catch(0),!r||!r.ok){e.next=14;break}return e.abrupt("return",Promise.resolve({status:r.status}));case 14:return e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=a()(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(gt(this.siteBaseUrl,t),n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),y()(yt.prototype,"fetchOk",[ne,oe],Object.getOwnPropertyDescriptor(yt.prototype,"fetchOk"),yt.prototype),y()(yt.prototype,"fetch",[ne,oe],Object.getOwnPropertyDescriptor(yt.prototype,"fetch"),yt.prototype),yt),wt=function(e){return Object.assign({},function(e){return ie(new dt(e))}(e),function(e){return ie(new Ye(e))}(e),function(e){return ie(new vt(e))}(e),function(e){return ie(new mt(e))}(e),function(e){return ie(new bt(e))}(e))},kt=n("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),_t=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js"),Ot=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-tenant-context/index.js");if(Object(_t.a)("emcee-discover",!1)){const{baseUrl:e,cloudId:t,environment:n}=Object(Ot.c)();Object(kt.a)({name:"ac/create"}).then(()=>{const r={baseUrl:`${window.location.origin}${e}`,product:"jira",subproduct:"jira-core",cloudId:t||"",environment:n||"prod"};window.define&&window.define("ac/marketplace",wt(r))})}const Pt=e=>{const t=document.createElement("link");t.rel="dns-prefetch",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},{baseUrl:jt}=Object(Ot.c)();fetch(`${jt}/rest/atlassian-connect/latest/addons-baseurl`).then(e=>e.ok?e.json():{}).then(e=>e.addonBaseUrls&&e.addonBaseUrls.forEach(Pt)).catch(()=>{})}}]);try{window.__jsEvalStop("async-connect-modules.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-connect-modules.b8e4b436a3b62ac144fe.8.js.map