(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1086:function(e,n,t){var r={"./af":881,"./af.js":881,"./ar":882,"./ar-dz":883,"./ar-dz.js":883,"./ar-kw":884,"./ar-kw.js":884,"./ar-ly":885,"./ar-ly.js":885,"./ar-ma":886,"./ar-ma.js":886,"./ar-sa":887,"./ar-sa.js":887,"./ar-tn":888,"./ar-tn.js":888,"./ar.js":882,"./az":889,"./az.js":889,"./be":890,"./be.js":890,"./bg":891,"./bg.js":891,"./bm":892,"./bm.js":892,"./bn":893,"./bn-bd":894,"./bn-bd.js":894,"./bn.js":893,"./bo":895,"./bo.js":895,"./br":896,"./br.js":896,"./bs":897,"./bs.js":897,"./ca":898,"./ca.js":898,"./cs":899,"./cs.js":899,"./cv":900,"./cv.js":900,"./cy":901,"./cy.js":901,"./da":902,"./da.js":902,"./de":903,"./de-at":904,"./de-at.js":904,"./de-ch":905,"./de-ch.js":905,"./de.js":903,"./dv":906,"./dv.js":906,"./el":907,"./el.js":907,"./en-au":908,"./en-au.js":908,"./en-ca":909,"./en-ca.js":909,"./en-gb":910,"./en-gb.js":910,"./en-ie":911,"./en-ie.js":911,"./en-il":912,"./en-il.js":912,"./en-in":913,"./en-in.js":913,"./en-nz":914,"./en-nz.js":914,"./en-sg":915,"./en-sg.js":915,"./eo":916,"./eo.js":916,"./es":917,"./es-do":918,"./es-do.js":918,"./es-mx":919,"./es-mx.js":919,"./es-us":920,"./es-us.js":920,"./es.js":917,"./et":921,"./et.js":921,"./eu":922,"./eu.js":922,"./fa":923,"./fa.js":923,"./fi":924,"./fi.js":924,"./fil":925,"./fil.js":925,"./fo":926,"./fo.js":926,"./fr":927,"./fr-ca":928,"./fr-ca.js":928,"./fr-ch":929,"./fr-ch.js":929,"./fr.js":927,"./fy":930,"./fy.js":930,"./ga":931,"./ga.js":931,"./gd":932,"./gd.js":932,"./gl":933,"./gl.js":933,"./gom-deva":934,"./gom-deva.js":934,"./gom-latn":935,"./gom-latn.js":935,"./gu":936,"./gu.js":936,"./he":937,"./he.js":937,"./hi":938,"./hi.js":938,"./hr":939,"./hr.js":939,"./hu":940,"./hu.js":940,"./hy-am":941,"./hy-am.js":941,"./id":942,"./id.js":942,"./is":943,"./is.js":943,"./it":944,"./it-ch":945,"./it-ch.js":945,"./it.js":944,"./ja":946,"./ja.js":946,"./jv":947,"./jv.js":947,"./ka":948,"./ka.js":948,"./kk":949,"./kk.js":949,"./km":950,"./km.js":950,"./kn":951,"./kn.js":951,"./ko":952,"./ko.js":952,"./ku":953,"./ku.js":953,"./ky":954,"./ky.js":954,"./lb":955,"./lb.js":955,"./lo":956,"./lo.js":956,"./lt":957,"./lt.js":957,"./lv":958,"./lv.js":958,"./me":959,"./me.js":959,"./mi":960,"./mi.js":960,"./mk":961,"./mk.js":961,"./ml":962,"./ml.js":962,"./mn":963,"./mn.js":963,"./mr":964,"./mr.js":964,"./ms":965,"./ms-my":966,"./ms-my.js":966,"./ms.js":965,"./mt":967,"./mt.js":967,"./my":968,"./my.js":968,"./nb":969,"./nb.js":969,"./ne":970,"./ne.js":970,"./nl":971,"./nl-be":972,"./nl-be.js":972,"./nl.js":971,"./nn":973,"./nn.js":973,"./oc-lnc":974,"./oc-lnc.js":974,"./pa-in":975,"./pa-in.js":975,"./pl":976,"./pl.js":976,"./pt":977,"./pt-br":978,"./pt-br.js":978,"./pt.js":977,"./ro":979,"./ro.js":979,"./ru":980,"./ru.js":980,"./sd":981,"./sd.js":981,"./se":982,"./se.js":982,"./si":983,"./si.js":983,"./sk":984,"./sk.js":984,"./sl":985,"./sl.js":985,"./sq":986,"./sq.js":986,"./sr":987,"./sr-cyrl":988,"./sr-cyrl.js":988,"./sr.js":987,"./ss":989,"./ss.js":989,"./sv":990,"./sv.js":990,"./sw":991,"./sw.js":991,"./ta":992,"./ta.js":992,"./te":993,"./te.js":993,"./tet":994,"./tet.js":994,"./tg":995,"./tg.js":995,"./th":996,"./th.js":996,"./tk":997,"./tk.js":997,"./tl-ph":998,"./tl-ph.js":998,"./tlh":999,"./tlh.js":999,"./tr":1e3,"./tr.js":1e3,"./tzl":1001,"./tzl.js":1001,"./tzm":1002,"./tzm-latn":1003,"./tzm-latn.js":1003,"./tzm.js":1002,"./ug-cn":1004,"./ug-cn.js":1004,"./uk":1005,"./uk.js":1005,"./ur":1006,"./ur.js":1006,"./uz":1007,"./uz-latn":1008,"./uz-latn.js":1008,"./uz.js":1007,"./vi":1009,"./vi.js":1009,"./x-pseudo":1010,"./x-pseudo.js":1010,"./yo":1011,"./yo.js":1011,"./zh-cn":1012,"./zh-cn.js":1012,"./zh-hk":1013,"./zh-hk.js":1013,"./zh-mo":1014,"./zh-mo.js":1014,"./zh-tw":1015,"./zh-tw.js":1015};function o(e){var n=a(e);return t(n)}function a(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=1086},301:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return Ce}));var r=t(1),o=t.n(r),a=t(198),i=t(7),s=t(1100),u=t(756),c=t.n(u),l=t(690),f=t(197),p=t(707),j=t(675),m=t(856),d=t(1099),h=t.n(d),y=t(1065),b=t.n(y),v=t(726),g=t.n(v),k=t(781),w=t(1213),E=t(1073),S=t.n(E),x=t(687),O=t.n(x),M=/@[UW][^_\W]+/g;function z(e,n,t){if(0===t.size)return[e];var r=S()(e," "),a=r.split(M),i=r.match(M),s=new Map;return a.reduce((function(e,r){if(e.push(r),i.length){var a=i.shift(),u=s.get(a)||0;s.set(a,u+1),e.push((c=a,l=t.get(c),o.a.createElement("a",{key:"".concat(c,"-").concat(s.get(c)),href:"".concat(n,"/team/").concat(c,"/"),rel:"noopener noreferrer",target:"_blank"},o.a.createElement(w.a,{text:"@".concat(l)}))))}var c,l;return e}),[])}function _(e){var n=O()().utc(),t=O()(e),r=n.diff(t,"years")>1?"DD MMM YYYY":"DD MMM";return t.format(r)}function L(e){return o.a.createElement("a",{href:e.link,rel:"noopener noreferrer",target:"_blank"},e.name)}function P(e){return e?"".concat(e,"px"):0}function C(){var e=U(["\n  max-height: 1600px;\n  overflow-y: auto;\n  padding-left: 1px;\n  padding-right: 1px;\n"]);return C=function(){return e},e}function R(){var e=U(["\n  padding-top: 5px;\n  overflow: hidden;\n"]);return R=function(){return e},e}function D(){var e=U(["\n  display: -webkit-box;\n  max-height: 60px;\n  line-height: 20px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-top: 10px;\n  margin-left: 2px;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n"]);return D=function(){return e},e}function A(){var e=U(["\n  font-size: 12px;\n  color: ",";\n"]);return A=function(){return e},e}function T(){var e=U(["\n  display: ",";\n  margin: 0;\n  line-height: 18px;\n  font-size: 14px;\n"]);return T=function(){return e},e}function N(){var e=U(["\n  display: flex;\n  justify-content: ",";\n  align-items: ",";\n"]);return N=function(){return e},e}function I(){var e=U(["\n  padding: 10px;\n  border: 1px solid ",";\n  border-radius: 5px;\n  box-shadow: 0 0 1px 0 rgba(9, 30, 66, 0.31);\n\n  &:not(:last-child) {\n    margin-bottom: 15px;\n  }\n"]);return I=function(){return e},e}function U(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var B,Y=i.default.div(I(),k.a.N20),F=i.default.div(N(),(function(e){return e.justify}),(function(e){return e.align})),q=i.default.div.attrs((function(e){return{style:{marginTop:P(e.top),marginLeft:P(e.left),marginRight:P(e.right)}}}))(T(),(function(e){return e.inline?"inline":"block"})),H=Object(i.default)(q)(A(),k.a.N200),G=i.default.div(D()),J=i.default.div(R()),W=i.default.div(C()),K=t(1216);function Q(e){var n=e.children,t=e.isSmall,r=e.user,a=e.renderLink,i=e.onClick;return o.a.createElement(F,{justify:"space-between"},o.a.createElement(F,{justify:"space-between"},o.a.createElement(K.a,{appearance:"square",href:r.link,isActive:!1,isFocus:!1,isHover:!1,isSelected:!1,onClick:i,size:t?"small":"medium",src:r.avatar,target:"_blank"}),o.a.createElement(q,{left:7,right:7},n)),a())}function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,n,t,r,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void t(e)}s.done?n(u):Promise.resolve(u).then(r,o)}function Z(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){X(a,r,o,i,s,"next",e)}function s(e){X(a,r,o,i,s,"throw",e)}i(void 0)}))}}function $(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function ee(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,n){return(ne=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function te(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=oe(e);if(n){var o=oe(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return re(this,t)}}function re(e,n){return!n||"object"!==V(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Q.defaultProps={children:null,isSmall:!1,onClick:function(){},renderLink:function(){return null}};var ae=Object(a.c)(B=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&ne(e,n)}(i,e);var n,t,r,a=te(i);function i(){var e;$(this,i);for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return(e=a.call.apply(a,[this].concat(t))).state={isLinkLoading:!1},e.openSlackMessage=Z(regeneratorRuntime.mark((function n(){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({isLinkLoading:!0}),n.next=3,l.a.issueMentions.getLink(e.props.issueMention.id);case 3:t=n.sent,r=t.link,window.open(r),e.setState({isLinkLoading:!1});case 7:case"end":return n.stop()}}),n)}))),e.renderLink=function(){var n=e.state.isLinkLoading;return o.a.createElement("div",null,n?o.a.createElement(j.a,{size:"xsmall"}):o.a.createElement(m.a,{iconBefore:o.a.createElement(h.a,{size:"small"}),onClick:e.openSlackMessage,spacing:"none"}))},e.renderMessage=function(n){var t=e.props.issueMention,r=t.channel,a=t.userMentions;if(void 0===n)return o.a.createElement(F,{align:"center"},o.a.createElement(g.a,{primaryColor:k.a.Y400}),o.a.createElement("div",null,"Couldn’t load the message."));if(n.length){var i=z(n,r.link,a);return o.a.createElement(G,null,o.a.createElement(b.a,{properties:{target:"_blank"}},i))}},e}return n=i,(t=[{key:"renderHeading",value:function(){var e=this.props.issueMention,n=e.messageAuthor,t=e.mentionAuthor,r=e.channel,a=e.attachedMessageCreated,i="".concat(r.isBotDM?"@":"#").concat(r.name);return t?o.a.createElement(Q,{renderLink:this.renderLink,user:t},L(t)," attached this message from ",o.a.createElement("a",{href:r.link,rel:"noopener noreferrer",target:"_blank"},i)):o.a.createElement(Q,{renderLink:this.renderLink,user:n},L(n)," mentioned this issue in ",o.a.createElement("a",{href:r.link,rel:"noopener noreferrer",target:"_blank"},i),o.a.createElement(H,null,_(a)))}},{key:"renderBody",value:function(){var e=this.props.issueMention,n=e.messageAuthor,t=e.mentionAuthor,r=e.message,a=e.attachedMessageCreated;return t?o.a.createElement(q,{top:15},o.a.createElement(Q,{isSmall:!0,user:n},L(n)," ",o.a.createElement(H,{inline:!0},_(a))),o.a.createElement(q,{left:31},this.renderMessage(r))):this.renderMessage(r)}},{key:"render",value:function(){return o.a.createElement(Y,null,this.renderHeading(),this.renderBody())}}])&&ee(n.prototype,t),r&&ee(n,r),i}(r.Component))||B,ie=function(e){return o.a.createElement(ae,{key:e.id,issueMention:e})};var se,ue=Object(a.c)((function(e){var n=e.issueMentions;return o.a.createElement(W,null,n.map(ie))}));function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function fe(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,n){return(pe=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function je(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=de(e);if(n){var o=de(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return me(this,t)}}function me(e,n){return!n||"object"!==ce(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he,ye=Object(a.c)(se=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&pe(e,n)}(i,e);var n,t,r,a=je(i);function i(){var e;le(this,i);for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return(e=a.call.apply(a,[this].concat(t))).state={isShowingAll:!1,wereMentionsLoaded:!1},e.handleClick=function(){e.setState((function(e){return{isShowingAll:!e.isShowingAll}})),e.state.wereMentionsLoaded||(e.props.onShowMore(),e.setState({wereMentionsLoaded:!0}))},e}return n=i,(t=[{key:"render",value:function(){var e=this.state.isShowingAll,n=this.props,t=n.isLoading,r=n.issueMentions,a=n.hasNext;if(!r.length&&!t)return o.a.createElement("div",null,"This issue hasn’t been mentioned in Slack.");var i=a||!e?r.slice(0,3):r,s=!t&&(r.length>3||a);return o.a.createElement("div",null,o.a.createElement(ue,{issueMentions:i}),t&&o.a.createElement(J,null,o.a.createElement(j.a,null)),s&&o.a.createElement(m.a,{appearance:"link",onClick:this.handleClick},"Show ",e?"less":"more"))}}])&&fe(n.prototype,t),r&&fe(n,r),i}(r.Component))||se;function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function ge(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,n){return(ke=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function we(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=Se(e);if(n){var o=Se(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Ee(this,t)}}function Ee(e,n){return!n||"object"!==be(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(){var e=ze(["\n  margin-right: ",";\n"]);return xe=function(){return e},e}function Oe(){var e=ze(["\n  line-height: 16px;\n"]);return Oe=function(){return e},e}function Me(){var e=ze(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]);return Me=function(){return e},e}function ze(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var _e=i.default.div(Me()),Le=i.default.span(Oe()),Pe=i.default.span(xe(),(function(e){return!e.isLast&&"3px"})),Ce=Object(a.b)("issueMentionsStore")(he=Object(a.c)(he=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&ke(e,n)}(i,e);var n,t,r,a=we(i);function i(){return ve(this,i),a.apply(this,arguments)}return n=i,(t=[{key:"componentDidMount",value:function(){this.loadIssuePanelData(),window.AP.events.on("ISSUE_GLANCE_OPENED",(function(){f.a.sendUIEvent({actionSubject:"issueGlance",action:"opened",actionSubjectId:"slackActivityPanel"})}))}},{key:"loadIssuePanelData",value:function(){this.props.issueMentionsStore.loadIssueMentions(3)}},{key:"renderLoginForm",value:function(){var e=this,n=this.props.issueMentionsStore,t=n.unauthorizedTeams,r=n.issueMentions;return o.a.createElement(_e,null,o.a.createElement(Le,null,o.a.createElement(c.a,{size:"small"}))," ","Log in to"," ",t.map((function(n,r){var a=t.length===r+1;return o.a.createElement(p.a,{key:n.id,onComplete:function(){return e.loadIssuePanelData()},url:l.a.slackUsers.loginUrl(n.id)},(function(e){var t=e.onClick;return o.a.createElement(Pe,{isLast:a},o.a.createElement(s.a,{appearance:"link",onClick:t,spacing:"none"},n.name,!a&&","))}))})),o.a.createElement("span",null," to see ",r.length>0&&"more ","Slack messages"))}},{key:"render",value:function(){var e=this.props.issueMentionsStore,n=e.issueMentions,t=e.unauthorizedTeams,r=!t.length||Boolean(n.length);return o.a.createElement("div",null,Boolean(t.length)&&this.renderLoginForm(),r&&o.a.createElement(ye,{hasNext:e.hasNext,isLoading:e.isLoading,issueMentions:n,onShowMore:function(){return e.loadIssueMentions()}}))}}])&&ge(n.prototype,t),r&&ge(n,r),i}(r.Component))||he)||he}}]);
//# sourceMappingURL=13.544c6a1e.js.map