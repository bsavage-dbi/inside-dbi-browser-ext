(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1215:function(e,t,n){"use strict";n.r(t);var r,i,a,o,u=n(32),c=n(690);function s(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}function f(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function p(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b,h,d,v,m=new(i=p((r=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"isEnabled",i,this),f(this,"isLoading",a,this),f(this,"loadInstance",o,this),this.updateInstance=function(e){t.isEnabled=e,c.a.instances.update({isEnabled:e})}}).prototype,"isEnabled",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=p(r.prototype,"isLoading",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),o=p(r.prototype,"loadInstance",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return l(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,c.a.instances.show();case 3:n=t.sent,r=n.isEnabled,e.isEnabled=r,e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))}}),r),g=n(197);function y(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function w(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var k,x,O,z,R,S,I=new(h=P((b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"isLoading",h,this),w(this,"teams",d,this),w(this,"teamInfo",v,this)}var t,n,r,i,a;return t=e,(n=[{key:"loadTeams",value:(i=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,c.a.teams.list();case 3:this.teams=e.sent,this.isLoading=!1;case 5:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function o(e){y(a,n,r,o,u,"next",e)}function u(e){y(a,n,r,o,u,"throw",e)}o(void 0)}))},function(){return a.apply(this,arguments)})}])&&j(t.prototype,n),r&&j(t,r),e}()).prototype,"isLoading",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=P(b.prototype,"teams",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=P(b.prototype,"teamInfo",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),P(b.prototype,"loadTeams",[u.action],Object.getOwnPropertyDescriptor(b.prototype,"loadTeams"),b.prototype),b),E=n(786),L=n(57);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){M(a,r,i,o,u,"next",e)}function u(e){M(a,r,i,o,u,"throw",e)}o(void 0)}))}}function _(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var q,K,G,V,Y,H=new(x=F((k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,"isLoading",x,this),_(this,"projects",O,this),_(this,"contextProject",z,this),_(this,"loadContextProject",R,this),_(this,"loadProjects",S,this)}var t,n,r,i;return t=e,(n=[{key:"getExtendedProject",value:(i=U(regeneratorRuntime.mark((function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([E.a.getProjectStatuses(t),E.a.getProjectSecurityLevels(t),E.a.getProjectDetails(t)]);case 2:return n=e.sent,r=D(n,3),i=r[0],a=r[1],o=r[2],e.abrupt("return",A(A({},o),{},{statuses:i,securityLevels:a}));case 8:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"getProjectTitle",value:function(e){return"".concat(e.name," (").concat(e.key,")")}}])&&J(t.prototype,n),r&&J(t,r),e}()).prototype,"isLoading",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=F(k.prototype,"projects",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=F(k.prototype,"contextProject",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{title:""}}}),R=F(k.prototype,"loadContextProject",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return U(regeneratorRuntime.mark((function t(){var n,r,i,a,o,u,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(L.c)();case 2:if(n=t.sent,r=n.jira,i=(r=void 0===r?{}:r).project){t.next=8;break}throw new Error("Unable to load context project, no id present");case 8:return t.next=10,Promise.all([e.getExtendedProject(i.id),E.a.getPriorities()]);case 10:a=t.sent,o=D(a,2),u=o[0],c=o[1],e.contextProject=A(A({},u),{},{priorities:c,title:e.getProjectTitle(u)});case 15:case"end":return t.stop()}}),t)})))}}),S=F(k.prototype,"loadProjects",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return U(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,Promise.all([E.a.getProjects(),E.a.getPriorities()]);case 3:n=t.sent,r=D(n,2),i=r[0],a=r[1],e.projects=i.map((function(t){return A(A({},t),{},{title:e.getProjectTitle(t),priorities:a})})),e.isLoading=!1;case 9:case"end":return t.stop()}}),t)})))}}),k);function W(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function Q(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Z,X,ee,te,ne,re,ie,ae,oe,ue,ce,se,le=new(K=B((q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Q(this,"isLoading",K,this),Q(this,"channels",G,this),Q(this,"clear",V,this),Q(this,"loadChannels",Y,this)}var t,n,r;return t=e,(n=[{key:"resolveChannelNamePrefix",value:function(e){var t=e.id,n=e.name,r=t.charAt(0);return["C","G"].includes(r)?"#".concat(n):"@".concat(n)}}])&&$(t.prototype,n),r&&$(t,r),e}()).prototype,"isLoading",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=B(q.prototype,"channels",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=B(q.prototype,"clear",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.channels.clear()}}}),Y=B(q.prototype,"loadChannels",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,n=(t=regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,c.a.channels.list(n);case 3:e.channels=t.sent,e.isLoading=!1;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(e){W(a,r,i,o,u,"next",e)}function u(e){W(a,r,i,o,u,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}()}}),q);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function de(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function ve(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function me(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ve(a,r,i,o,u,"next",e)}function u(e){ve(a,r,i,o,u,"throw",e)}o(void 0)}))}}function ge(){return ye.apply(this,arguments)}function ye(){return(ye=me(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.c)();case 2:if(t=e.sent,n=t.jira,!(r=(n=void 0===n?{}:n).channel)){e.next=8;break}return e.abrupt("return",r.id);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return je.apply(this,arguments)}function je(){return(je=me(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.c)();case 2:if(t=e.sent,!(n=t.jira)){e.next=6;break}return e.abrupt("return",n.project.id);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pe,ke,xe,Oe,ze,Re,Se,Ie=new(X=de((Z=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),he(this,"isLoading",X,this),he(this,"connection",ee,this),he(this,"subscriptions",te,this),he(this,"newSubscription",ne,this),he(this,"initConnection",re,this),he(this,"updateConnectionChannel",ie,this),he(this,"createSubscription",ae,this),he(this,"loadSubscriptions",oe,this),he(this,"updateSubscription",ue,this),he(this,"deleteSubscription",ce,this),he(this,"toggleMuteSubscription",se,this)}).prototype,"isLoading",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ee=de(Z.prototype,"connection",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),te=de(Z.prototype,"subscriptions",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ne=de(Z.prototype,"newSubscription",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),re=de(Z.prototype,"initConnection",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return me(regeneratorRuntime.mark((function t(){var n,r,i,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.connections.create();case 2:if(n=t.sent){t.next=12;break}return e.connection=null,t.t0=URL,t.next=8,Object(L.d)();case 8:return t.t1=t.sent,r=new t.t0(t.t1),i=r.hostname,t.abrupt("return",L.a.warning({title:"Warning",body:"Please generate a new verification URL by typing /jira connect ".concat(i," in your Slack channel")}));case 12:e.connection=n,a=e.connection.channel,o={unfurl:!0,compact:!1},e.connection.channel.name=le.resolveChannelNamePrefix(a),e.connection.channel.options=Object.assign(o,a.options);case 17:case"end":return t.stop()}}),t)})))}}),ie=de(Z.prototype,"updateConnectionChannel",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=me(regeneratorRuntime.mark((function t(n,r){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.connection.channel.options[n]=r,t.next=3,c.a.channels.update(e.connection.channel);case 3:"messageStyle"===(i={unfurl:{name:"unfurling",getValue:function(e){return e?"Enabled":"Disabled"}},compact:{name:"messageStyle",getValue:function(e){return e?"Compact":"Clean"}}}[n]).name&&g.a.sendUIEvent({actionSubject:"button",action:"clicked",actionSubjectId:"changeMessageStyle",attributes:{messageStyle:i.getValue(r)}}),"unfurling"===i.name&&g.a.sendUIEvent({actionSubject:"checkbox",action:"clicked",actionSubjectId:"modifyUnfurling",attributes:{unfurl:i.getValue(r)}});case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),ae=de(Z.prototype,"createSubscription",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=me(regeneratorRuntime.mark((function t(n){var r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.teamId,i=n.projectId,a=n.channelId,e.isLoading=!0,t.t0=c.a.subscriptions,t.t1=r,t.t2=i,t.t2){t.next=9;break}return t.next=8,we();case 8:t.t2=t.sent;case 9:if(t.t3=t.t2,t.t4=a,t.t4){t.next=15;break}return t.next=14,ge();case 14:t.t4=t.sent;case 15:return t.t5=t.t4,t.t6={teamId:t.t1,projectId:t.t3,channelId:t.t5},t.next=19,t.t0.create.call(t.t0,t.t6);case 19:return t.next=21,e.loadSubscriptions();case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),oe=de(Z.prototype,"loadSubscriptions",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=me(regeneratorRuntime.mark((function t(n){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,r=H.contextProject,t.t0=c.a.subscriptions,t.t1=r.id,t.next=6,ge();case 6:return t.t2=t.sent,t.t3={projectId:t.t1,channelId:t.t2},t.next=10,t.t0.list.call(t.t0,t.t3);case 10:return i=t.sent,t.next=13,Promise.all(i.map(function(){var e=me(regeneratorRuntime.mark((function e(t){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.id?r:H.projects.find((function(e){return e.id===t.projectId})),a=I.teams.find((function(e){return e.id===t.channel.teamId})),t.channel.name=le.resolveChannelNamePrefix(t.channel),void 0===t.options.actions.issue.updated.transition&&(t.options.actions.issue.updated.transition=!0),e.t0=n,e.t0){e.next=9;break}return e.next=8,H.getExtendedProject(i.id);case 8:e.t0=e.sent;case 9:return o=e.t0,e.abrupt("return",pe(pe({},t),{},{project:pe(pe({},i),o),team:a}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:e.subscriptions=t.sent,e.isLoading=!1;case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),ue=de(Z.prototype,"updateSubscription",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=me(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.subscriptions.update(n,r);case 2:e.subscriptions=e.subscriptions.map((function(e){return e.id===n?pe(pe({},e),{},{options:r}):e}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),ce=de(Z.prototype,"deleteSubscription",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=me(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.subscriptions.delete(n);case 2:e.subscriptions=e.subscriptions.filter((function(e){return e.id!==n}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),se=de(Z.prototype,"toggleMuteSubscription",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=me(regeneratorRuntime.mark((function t(n){var r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.subscriptions.find((function(e){return e.id===n})),i=r.options,a=pe(pe({},i),{},{filter:pe(pe({},i.filter),{},{enabled:!i.filter.enabled})}),t.abrupt("return",e.updateSubscription(n,a));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Z);function Ee(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function Le(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Ce(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Ae,Te,De,Ne,Me=new(ke=Ce((Pe=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Le(this,"isLoading",ke,this),Le(this,"hasNext",xe,this),Le(this,"totalCount",Oe,this),Le(this,"unauthorizedTeams",ze,this),Le(this,"issueMentions",Re,this),Le(this,"loadIssueMentions",Se,this)}).prototype,"isLoading",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),xe=Ce(Pe.prototype,"hasNext",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oe=Ce(Pe.prototype,"totalCount",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=Ce(Pe.prototype,"unauthorizedTeams",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Re=Ce(Pe.prototype,"issueMentions",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Se=Ce(Pe.prototype,"loadIssueMentions",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var r,i,a,o,u,s,l,f,p,b,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,Object(L.c)();case 3:return r=t.sent,i=r.jira.issue,t.next=7,c.a.issueMentions.list(i.id,n);case 7:if(t.t0=t.sent,t.t0){t.next=10;break}t.t0={};case 10:a=t.t0,o=a.totalCount,u=void 0===o?0:o,s=a.hasNext,l=void 0!==s&&s,f=a.issueMentions,p=void 0===f?[]:f,b=a.unauthorizedTeams,h=void 0===b?[]:b,e.totalCount=u,e.hasNext=l,e.issueMentions=p.map((function(e){var t=e.userMentions;return e.userMentions=new Map(Object.entries(t)),e})),e.unauthorizedTeams=h,e.isLoading=!1;case 24:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(e){Ee(a,r,i,o,u,"next",e)}function u(e){Ee(a,r,i,o,u,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}()}}),Pe);function Ue(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ue(a,r,i,o,u,"next",e)}function u(e){Ue(a,r,i,o,u,"throw",e)}o(void 0)}))}}function Je(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Ke,Ge,Ve,Ye,He=new(Te=qe((Ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Je(this,"state",Te,this),Je(this,"loadLinkedChannel",De,this),Je(this,"createLinkedChannel",Ne,this)}var t,n,r;return t=e,(n=[{key:"onChannelCreationError",value:function(e,t){switch(t.code){case"NAME_ALREADY_TAKEN":this.state={status:"NAME_ALREADY_TAKEN"};break;case"ISSUE_ALREADY_LINKED":this.loadLinkedChannel(e);break;case"MISSING_SCOPE":this.state={status:"MISSING_SCOPE"};break;default:throw t}}}])&&Fe(t.prototype,n),r&&Fe(t,r),e}()).prototype,"state",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{status:"LOADING"}}}),De=qe(Ae.prototype,"loadLinkedChannel",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=_e(regeneratorRuntime.mark((function t(n,r){var i,a,o,u,s,l,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.state={status:"LOADING"},t.next=3,c.a.issueChannel.get(n,r);case 3:if(i=t.sent,a=i.isUnauthorized,o=i.unauthorizedTeam,u=i.channel,!a){t.next=10;break}return e.state={status:"UNAUTHORIZED",unauthorizedTeam:o},t.abrupt("return");case 10:if(!u){t.next=14;break}return s=u.id,l=u.name,f=u.teamId,p=u.isPrivate,e.state={status:"LINKED",channel:{id:s,name:l,teamId:f,isPrivate:p}},t.abrupt("return");case 14:e.state={status:"NOT_LINKED"};case 15:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Ne=qe(Ae.prototype,"createLinkedChannel",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=_e(regeneratorRuntime.mark((function t(n,r,i,a,o){var u,s,l,f,p,b;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.state={status:"LOADING"},t.prev=1,t.next=4,c.a.issueChannel.create({issueId:n,projectId:r,channelName:i,members:a,private:o});case 4:u=t.sent,s=u.id,l=u.name,f=u.teamId,p=u.isPrivate,b={id:s,name:l,teamId:f,isPrivate:p},e.state={status:"LINKED",channel:b},t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),e.onChannelCreationError(n,t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,n,r,i,a){return t.apply(this,arguments)}}()}}),Ae);function We(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function Qe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){We(a,r,i,o,u,"next",e)}function u(e){We(a,r,i,o,u,"throw",e)}o(void 0)}))}}function $e(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Xe,et,tt,nt=new(Ge=Ze((Ke=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$e(this,"isLoading",Ge,this),$e(this,"isRevoking",Ve,this),$e(this,"users",Ye,this)}var t,n,r,i,a;return t=e,(n=[{key:"loadUsers",value:(a=Qe(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,c.a.slackUsers.list();case 3:t=e.sent,n=t.slackUsers,this.users=n,this.isLoading=!1;case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"revoke",value:(i=Qe(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isRevoking=!0,e.next=3,c.a.slackUsers.delete(t);case 3:n=e.sent,r=n.slackUsersIds,this.users=this.users.filter((function(e){return!r.includes(e.id)})),this.isRevoking=!1;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})}])&&Be(t.prototype,n),r&&Be(t,r),e}()).prototype,"isLoading",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ve=Ze(Ke.prototype,"isRevoking",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ye=Ze(Ke.prototype,"users",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ze(Ke.prototype,"loadUsers",[u.action],Object.getOwnPropertyDescriptor(Ke.prototype,"loadUsers"),Ke.prototype),Ze(Ke.prototype,"revoke",[u.action],Object.getOwnPropertyDescriptor(Ke.prototype,"revoke"),Ke.prototype),Ke);function rt(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function it(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ut,ct,st,lt=new(et=ot((Xe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),it(this,"isLoading",et,this),it(this,"users",tt,this)}var t,n,r,i,a;return t=e,(n=[{key:"loadUsers",value:(i=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,c.a.slackUsers.listInWorkspace();case 3:t=e.sent,this.users=t.members,this.isLoading=!1;case 6:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function o(e){rt(a,n,r,o,u,"next",e)}function u(e){rt(a,n,r,o,u,"throw",e)}o(void 0)}))},function(){return a.apply(this,arguments)})}])&&at(t.prototype,n),r&&at(t,r),e}()).prototype,"isLoading",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tt=ot(Xe.prototype,"users",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ot(Xe.prototype,"loadUsers",[u.action],Object.getOwnPropertyDescriptor(Xe.prototype,"loadUsers"),Xe.prototype),Xe);function ft(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function pt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function bt(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ht=new(ct=bt((ut=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pt(this,"isLoading",ct,this),pt(this,"loadFeatureFlags",st,this)}).prototype,"isLoading",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),st=bt(ut.prototype,"loadFeatureFlags",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!t.length){e.next=7;break}return e.next=4,c.a.getFeatureFlags({features:t});case 4:for(a in r=e.sent,i=r.features)!0===i[a].value&&(o=i[a],n.push(o.name));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ft(a,r,i,o,u,"next",e)}function u(e){ft(a,r,i,o,u,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}()}}),ut);t.default={instancesStore:m,subscriptionsStore:Ie,teamsStore:I,channelsStore:le,projectsStore:H,issueMentionsStore:Me,issueChannelStore:He,usersStore:nt,usersInWorkspaceStore:lt,featuresStore:ht}},690:function(e,t,n){"use strict";var r=n(35),i=n(207),a=n(79),o=n(57);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){p(a,r,i,o,u,"next",e)}function u(e){p(a,r,i,o,u,"throw",e)}o(void 0)}))}}var h={"Content-Type":"application/json"},d=!1,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"AUTHENTICATION_FAILED"===e.code?o.a.warning({title:"Session expired",body:"Please reload this page or generate new slack configuration link"}):m(e,t)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;r.a(e),d=!0;var n={jira:"Jira",slack:"Slack"}[e.source]||"Slack integration",i="".concat(n," error: something went wrong while ").concat(t),a=["Please try again later or contact support."];return e.reqId&&a.push("Error ID: ".concat(e.reqId)),o.a.error({title:i,body:a.join(" ")})};function g(e){return y.apply(this,arguments)}function y(){return(y=b(regeneratorRuntime.mark((function e(t){var n,r,i,u,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:{},!d){e.next=3;break}return e.abrupt("return");case 3:return r=n.headers||h,i=n.body&&JSON.stringify(n.body),e.next=7,Object(o.e)();case 7:return(u=e.sent)&&(r["Slack-Token"]=u),e.next=11,Object(o.b)();case 11:return r.Authorization=e.sent,e.abrupt("return",Object(a.d)(t,l(l({},n),{},{headers:r,body:i})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=b(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.e)();case 2:if(!(t=e.sent)){e.next=23;break}if((n=Object(i.a)(t).sub).instanceId){e.next=10;break}return e.next=8,O(n.channel.id);case 8:return a=e.sent,e.abrupt("return",{channel:l(l({},n.channel),a)});case 10:return e.prev=10,e.next=13,g("/api/connections",{method:"POST"});case 13:return e.abrupt("return",e.sent);case 16:if(e.prev=16,e.t0=e.catch(10),"NONCE_INVALID"!==e.t0.code){e.next=20;break}return e.abrupt("return",null);case 20:v(e.t0,"creating connection");case 21:e.next=24;break;case 23:r.b("No slack token found in Addon");case 24:case"end":return e.stop()}}),e,null,[[10,16]])})))).apply(this,arguments)}function j(){return(j=b(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("/api/subscriptions/".concat(t),{method:"PATCH",body:{options:n}});case 3:e.next=12;break;case 5:if(e.prev=5,e.t0=e.catch(0),"PERMISSION_DENIED"!==e.t0.code){e.next=9;break}return e.abrupt("return",o.a.warning({title:"Permission denied",body:e.t0.message}));case 9:if("INVALID_JQL"!==e.t0.code){e.next=11;break}return e.abrupt("return",o.a.error({title:"Invalid JQL",body:"Could not save project connection settings"}));case 11:v(e.t0,"updating project connections");case 12:return e.abrupt("return",o.a.success({title:"Project connection settings saved",body:""}));case 13:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function P(){return(P=b(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("/api/subscriptions",{method:"POST",body:t});case 3:return n=e.sent,r=n.subscription,e.abrupt("return",r);case 8:if(e.prev=8,e.t0=e.catch(0),"PERMISSION_DENIED"!==e.t0.code){e.next=12;break}return e.abrupt("return",o.a.warning({title:"Permission denied",body:e.t0.message}));case 12:v(e.t0,"creating project connection");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function k(){return(k=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("/api/subscriptions/".concat(t),{method:"DELETE"});case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),"PERMISSION_DENIED"===e.t0.code?o.a.warning({title:"Permission denied",body:e.t0.message}):v(e.t0,"deleting project connections"),e.t0;case 9:o.a.success({title:"Project connection deleted",body:""});case 10:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function x(){return(x=b(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("/api/slack/login","https://".concat(window.location.hostname)),r=window.location.pathname.split("/"),i=u(r,2),a=i[1],n.searchParams.set("source",["jira",a,t].filter(Boolean).join("-")),e.t0=n.searchParams,e.next=6,Object(o.b)();case 6:return e.t1=e.sent,e.t0.set.call(e.t0,"addonToken",e.t1),e.abrupt("return",n.toString());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return g("/api/channels/".concat(e)).then((function(e){return e.channel})).catch((function(e){return v(e,"getting channel info")}))}function z(){return(z=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("/api/instances",{method:"PATCH",body:t});case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),"PERMISSION_DENIED"!==e.t0.code){e.next=10;break}return o.a.warning({title:"Permission denied",body:"You have no permissions to manage global addon settings."}),e.abrupt("return");case 10:v(e.t0,"updating instance");case 11:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function R(){return(R=b(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("/api/channels/linked?issueId=".concat(t,"&projectId=").concat(n));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),v(e.t0,"getting channel for issue");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function S(){return(S=b(regeneratorRuntime.mark((function e(t){var n,r,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.issueId,r=t.projectId,i=t.channelName,a=t.members,u=t.private,e.prev=1,e.next=4,g("/api/channels/linked",{method:"POST",body:{issueId:n,projectId:r,channelName:i,members:a,isPrivate:u}});case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),"ISSUE_ALREADY_LINKED"!==e.t0.code){e.next=12;break}throw o.a.warning({title:"This issue is already linked to a Slack channel",body:"Sorry, we couldn't create that channel because the issue is already linked to one"}),e.t0;case 12:if(!["NAME_ALREADY_TAKEN","MISSING_SCOPE"].includes(e.t0.code)){e.next=14;break}throw e.t0;case 14:return e.abrupt("return",v(e.t0,"creating channel for issue"));case 15:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function I(){return(I=b(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("/api/slack/users/login","https://".concat(window.location.hostname)),t&&n.searchParams.set("team",t),e.t0=n.searchParams,e.next=5,Object(o.b)();case 5:return e.t1=e.sent,e.t0.set.call(e.t0,"addonToken",e.t1),e.abrupt("return",n.toString());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g("/api/slack/users").catch((function(e){return v(e,"getting slack users list"),[]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g("/api/slack/users",{method:"DELETE",body:{teamId:t}}).catch((function(e){return v(e,"deleting slack users")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=b(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("api/features",{method:"POST",body:t});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),v(e.t0,"loading page");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}t.a={getFeatureFlags:function(e){return C.apply(this,arguments)},connections:{create:function(){return w.apply(this,arguments)}},subscriptions:{list:function(e){var t=e.projectId,n=e.channelId,r="/api/subscriptions";return t&&(r+="?projectId=".concat(t)),n&&(r+="?channelId=".concat(n)),g(r).then((function(e){return e.subscriptions})).catch((function(e){return v(e,"getting project connection list"),[]}))},update:function(e,t){return j.apply(this,arguments)},create:function(e){return P.apply(this,arguments)},delete:function(e){return k.apply(this,arguments)}},teams:{loginUrl:function(e){return x.apply(this,arguments)},list:function(){return g("/api/teams").then((function(e){return e.teams})).catch((function(e){return v(e,"getting teams list"),[]}))}},channels:{list:function(e){return g("/api/channels?teamId=".concat(e)).then((function(e){return e.channels})).catch((function(e){return v(e,"getting channels list"),[]}))},show:O,update:function(e){return g("/api/channels/".concat(e.id),{method:"PATCH",body:e}).catch((function(e){return v(e,"updating channel")}))}},instances:{show:function(){return g("/api/instances").catch((function(e){return v(e,"getting instance info")}))},update:function(e){return z.apply(this,arguments)}},issueMentions:{list:function(e,t){return g("/api/issueMentions?issueId=".concat(e,"&limit=").concat(t||"")).catch((function(e){return console.warn("Failed to retrieve the issue mentions list",e),{}}))},getLink:function(e){return g("/api/issueMentions/link?issueMentionId=".concat(e)).catch((function(e){return v(e,"getting issue mention link")}))}},issueChannel:{get:function(e,t){return R.apply(this,arguments)},create:function(e){return S.apply(this,arguments)}},slackUsers:{loginUrl:function(e){return I.apply(this,arguments)},list:function(){return E.apply(this,arguments)},listInWorkspace:function(){return g("/api/slack/proxy/users.list").catch((function(e){return v(e,"getting slack users in workspace")}))},delete:function(e){return L.apply(this,arguments)}}}},786:function(e,t,n){"use strict";var r=n(700),i=n.n(r),a=n(789),o=n.n(a),u=n(842),c=n.n(u),s=n(57);function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){p(a,r,i,o,u,"next",e)}function u(e){p(a,r,i,o,u,"throw",e)}o(void 0)}))}}function h(e){return d.apply(this,arguments)}function d(){return(d=b(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pathname,r=t.type,i=t.data,e.abrupt("return",new Promise((function(e,t){window.AP.request({url:n,type:r,contentType:"application/json",data:i,success:function(t){e(JSON.parse(t||"{}"))},error:function(e){t(e)}})})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e,t){return s.a.error({title:"Jira error: something went wrong while ".concat(t,"."),body:[].concat(l(i()(e,"responseText.errorMessages",[])),["Please contact support or try again later."]).join(" ")})};t.a={getProjects:function(){return h({pathname:"/rest/api/2/project"}).catch((function(e){return v(e,"getting Jira projects")}))},getPriorities:function(){return h({pathname:"/rest/api/2/priority"}).catch((function(e){return v(e,"getting Jira priorities")}))},getProjectDetails:function(e){return h({pathname:"/rest/api/2/project/".concat(e)}).catch((function(e){return v(e,"getting project details")}))},getCreateMeta:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=new URLSearchParams(e).toString())&&(e="?".concat(e)),h({pathname:"/rest/api/2/issue/createmeta".concat(e)}).catch((function(e){return v(e,"getting create meta")}))},getProjectStatuses:function(e){return b(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h({pathname:"/rest/api/2/project/".concat(e,"/statuses")});case 3:return n=t.sent,r=c()(n,(function(e){return e.statuses})),t.abrupt("return",o()(r,"id"));case 8:t.prev=8,t.t0=t.catch(0),v(t.t0,"getting project statuses");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getProjectSecurityLevels:function(e){return b(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h({pathname:"/rest/api/2/project/".concat(e,"/securitylevel")});case 3:return n=t.sent,r=n.levels,t.abrupt("return",r);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",[]);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getProjectProperty:function(e,t){return b(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h({pathname:"/rest/api/2/project/".concat(e,"/properties/").concat(t)});case 3:return n.abrupt("return",n.sent);case 6:if(n.prev=6,n.t0=n.catch(0),404!==n.t0.status){n.next=10;break}return n.abrupt("return",{value:{}});case 10:v(n.t0,"getting project property");case 11:case"end":return n.stop()}}),n,null,[[0,6]])})))()},setProjectProperty:function(e,t,n){return h({pathname:"/rest/api/2/project/".concat(e,"/properties/").concat(t),type:"PUT",data:JSON.stringify(n)}).catch((function(e){return v(e,"setting project property")}))},getSuggestionsRequest:function(e,t){return h({pathname:"/rest/api/2/jql/autocompletedata/suggestions?fieldName=".concat(e)})},validationRequest:function(e){return b(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h({pathname:"/rest/api/2/search?startAt=0&maxResults=1&validateQuery=strict&fields=summary&jql=".concat(e)});case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getAutocompleteDataRequest:function(){return h({pathname:"/rest/api/2/jql/autocompletedata"})},getPermissions:function(e){return h({pathname:"/rest/api/2/mypermissions?permissions=".concat(e.join(","))})},hasAdminPermission:function(){var e=this;return b(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPermissions(["ADMINISTER"]);case 2:return n=t.sent,r=n.permissions,t.abrupt("return",i()(r,"ADMINISTER.havePermission",!1));case 5:case"end":return t.stop()}}),t)})))()}}}}]);
//# sourceMappingURL=20.a97bafe1.js.map