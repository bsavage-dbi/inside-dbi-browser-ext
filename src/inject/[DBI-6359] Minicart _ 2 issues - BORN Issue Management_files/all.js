var AP=function(){function n(a,b){return b={exports:{}},a(b,b.exports),b.exports}function u(){}function w(a,b){return function(){a.apply(b,arguments)}}function k(a){if(!(this instanceof k))throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];D(a,this)}function v(a,b){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(b):(a._handled=!0,k._immediateFn(function(){var d=
1===a._state?b.onFulfilled:b.onRejected;if(null===d)(1===a._state?y:l)(b.promise,a._value);else{var c;try{c=d(a._value)}catch(f){l(b.promise,f);return}y(b.promise,c)}}))}function y(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"===typeof b||"function"===typeof b)){var d=b.then;if(b instanceof k){a._state=3;a._value=b;z(a);return}if("function"===typeof d){D(w(d,b),a);return}}a._state=1;a._value=b;z(a)}catch(c){l(a,c)}}function l(a,b){a._state=2;a._value=
b;z(a)}function z(a){2===a._state&&0===a._deferreds.length&&k._immediateFn(function(){a._handled||k._unhandledRejectionFn(a._value)});for(var b=0,d=a._deferreds.length;b<d;b++)v(a,a._deferreds[b]);a._deferreds=null}function g(a,b,d){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.promise=d}function D(a,b){var d=!1;try{a(function(c){d||(d=!0,y(b,c))},function(c){d||(d=!0,l(b,c))})}catch(c){d||(d=!0,l(b,c))}}function e(a,b){b=b||da;var d=[];if(a)if("string"===
typeof a)a=b.querySelectorAll(a),a=Array.prototype.slice.call(a),Array.prototype.push.apply(d,a);else if(1===a.nodeType)d.push(a);else if(a===window)d.push(a);else if("function"===typeof a)e.onDomLoad(a);t.extend(d,{each:function(c){W(this,c);return this},bind:function(c,a){this.each(function(f,d){this.bind(d,c,a)})},attr:function(c){var a;this.each(function(d,f){a=f[c]||f.getAttribute&&f.getAttribute(c);return!a});return a},removeClass:function(c){return this.each(function(a,d){d.className&&(d.className=
d.className.replace(new RegExp("(^|\\s)"+c+"(\\s|$)")," "))})},html:function(c){return this.each(function(a,d){d.innerHTML=c})},append:function(c){return this.each(function(a,d){var f=b.createElement(c.tag);W(c,function(c,a){"$text"===c?f.styleSheet?f.styleSheet.cssText=a:f.appendChild(b.createTextNode(a)):"tag"!==c&&(f[c]=a)});d.appendChild(f)})}});return d}function h(a,b){a+="EventListener";b+="Event";return function(d,c,f){if(d[a])d[a](c,f,!1);else if(d[b])d[b]("on"+c,f)}}function q(){var a=e(".ac-content, #content");
return 0<a.length?a[0]:document.body}function B(){this.q=[];this.add=function(a){this.q.push(a)};var a,b;this.call=function(){a=0;for(b=this.q.length;a<b;a++)this.q[a].call()}}function H(a,b){if(!a.resizedAttached)a.resizedAttached=new B,a.resizedAttached.add(b);else if(a.resizedAttached){a.resizedAttached.add(b);return}"BODY"===a.nodeName&&["padding","margin"].forEach(function(c){a.style[c+"-bottom"]="0px";a.style[c+"-top"]="0px"},this);a.resizeSensor=document.createElement("div");a.resizeSensor.className=
"ac-resize-sensor";a.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;";a.resizeSensor.innerHTML='<div class="ac-resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0;"></div></div><div class="ac-resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; width: 200%; height: 200%"></div></div>';
a.appendChild(a.resizeSensor);"BODY"!==a.nodeName&&window.getComputedStyle&&"static"===window.getComputedStyle(a).position&&(a.style.position="relative");var d=a.resizeSensor.childNodes[0],c=d.childNodes[0],f=a.resizeSensor.childNodes[1],r,p,F=function(){c.style.width=d.offsetWidth+10+"px";c.style.height=d.offsetHeight+10+"px";d.scrollLeft=d.scrollWidth;d.scrollTop=d.scrollHeight;f.scrollLeft=f.scrollWidth;f.scrollTop=f.scrollHeight;r=a.offsetWidth;p=a.offsetHeight};F();b=function(){(a.offsetWidth!==
r||a.offsetHeight!==p)&&a.resizedAttached&&a.resizedAttached.call();F()};d.addEventListener("scroll",b);f.addEventListener("scroll",b);b=new MutationObserver(b);a.resizeObserver=b;b.observe(a,{attributes:!0,attributeFilter:["style"]})}function A(a,b,d,c){var f=!1;return function(){!f&&"undefined"!==typeof console&&console.warn&&(f=!0,console.warn("DEPRECATED API - "+b+" has been deprecated since ACJS "+c+(" and will be removed in a future release. "+(d?"Use "+d+" instead.":"No alternative will be provided."))),
m._analytics&&m._analytics.trackDeprecatedMethodUsed(b));return a.apply(void 0,arguments)}}function P(a,b){var d,c;if(a)if(d=a.length,null!=d&&"function"!==typeof a)for(c=0;c<d&&!1!==b.call(a[c],c,a[c]);)c+=1;else for(c in a)if(a.hasOwnProperty(c)&&!1===b.call(a[c],c,a[c]))break}function X(a,b){a+="EventListener";b+="Event";return function(d,c,f){if(d[a])d[a](c,f,!1);else if(d[b])d[b]("on"+c,f)}}function Y(){var a=this.console;if(a&&a.log){var b=[].slice.call(arguments);if(a.log.apply)a.log.apply(a,
b);else{for(var d=0,c=b.length;d<c;d+=1)b[d]=JSON.stringify(b[d]);a.log(b.join(" "))}return!0}}function ea(a,b){if((a=G[a])&&0!==a.length)try{a.forEach(function(a){a.call(null,b)})}catch(d){console.error(d)}}function fa(a,b){var d=G[a],c="close"!==a,f=null;if(!c||"undefined"!==typeof b.button){"submit"===a&&m.dialog._disableCloseOnSubmit&&(c=!1);try{d&&(b&&b.button&&b.button.name&&(f=m.dialog.getButton(b.button.name)),c=d.reduce(function(c,a){return a.call(f,b)&&c},c))}catch(r){console.error(r)}finally{delete G[a]}c&&
m.dialog.close()}}function Q(a,b){"function"===typeof b&&(G[a]||(G[a]=[]),G[a].push(b))}function Z(a,b){var d=[],c=0,f=a.length;if(a&&0<a.length)for(;c<f;c+=1){var r=aa(a[c]);d.push(r);if(d.length===f){for(var r=[],p=0;p<f;p+=1)r[p]=d[p].exports;b&&b.apply(window,r)}}else b&&b()}function aa(a){if(M[a])return M[a];var b=ga(a);return b?M[a]=b:M[a]={name:a,exports:function(){function a(){var c=a.__target__;if(c)return c.apply(window,arguments)}return a}()}}function ga(a){var b;if(m._hostModules&&(m._hostModules[a]&&
(b=m._hostModules[a]),m._hostModules._globals&&m._hostModules._globals[a]&&(b=m._hostModules._globals[a]),b))return{name:a,exports:b}}function R(a){return I("meta[name='ap-"+a+"']").attr("content")}var J=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a},N=function(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.__proto__=b},ha=n(function(a){function b(d,c){a.exports=b=Object.setPrototypeOf||function(c,
a){c.__proto__=a;return c};return b(d,c)}a.exports=b}),ia=n(function(a){function b(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(c){return!1}}function d(c,f,r){b()?a.exports=d=Reflect.construct:a.exports=d=function(c,a,f){var d=[null];d.push.apply(d,a);c=new (Function.bind.apply(c,d));f&&ha(c,f.prototype);return c};return d.apply(null,
arguments)}a.exports=d}),ba=Function.prototype.bind,t={locationOrigin:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},randomString:function(){return Math.floor(1E9*Math.random()).toString(16)},isString:function(a){return"string"===typeof a||a instanceof String},argumentsToArray:function(a){return Array.prototype.slice.call(a)},argumentNames:function(a){return a.toString().replace(/((\/\/.*$)|(\/\*[^]*?\*\/))/mg,
"").replace(/[^(]+\(([^)]*)[^]+/,"$1").match(/([^\s,]+)/g)||[]},hasCallback:function(a){var b=a.length;return 0<b&&"function"===typeof a[b-1]},error:function(a){if(window.console&&window.console.error){var b=[];"string"===typeof a?(b.push("[Simple-XDM] "+a),b=b.concat(Array.prototype.slice.call(arguments,1))):(b.push("[Simple-XDM] "),b=b.concat(Array.prototype.slice.call(arguments)));window.console.error.apply(null,b)}},warn:function(a){window.console&&console.warn("[Simple-XDM] "+a)},log:function(a){window.console&&
window.console.log("[Simple-XDM] "+a)},_bind:function(a,b){return ba&&b.bind===ba?b.bind(a):function(){return b.apply(a,arguments)}},throttle:function(a,b,d){var c=0;return function(){var f=Date.now();f-c>b&&(c=f,a.apply(d,arguments))}},each:function(a,b){var d,c;if(a)if(d=a.length,null!=d&&"function"!==typeof a)for(c=0;c<d&&!1!==b.call(a[c],c,a[c]);)c+=1;else for(c in a)if(a.hasOwnProperty(c)&&!1===b.call(a[c],c,a[c]))break},extend:function(a){var b=arguments;[].slice.call(b,1,b.length).forEach(function(d){"object"===
typeof d&&Object.getOwnPropertyNames(d).forEach(function(c){a[c]=d[c]})});return a},sanitizeStructuredClone:function(a){function b(a){if("function"===typeof a)return f("A function was detected and removed from the message."),null;if(c.some(function(c){return a instanceof c?(f(c.name+" object was detected and removed from the message."),!0):!1}))return{};if(a&&"object"===typeof a&&d.every(function(c){return!(a instanceof c)})){var p;if(Array.isArray(a))p=a.map(function(c){return b(c)});else{if(-1<
r.indexOf(a))return f("A circular reference was detected and removed from the message."),null;r.push(a);p={};for(var e in a)if(a.hasOwnProperty(e)){var h=b(a[e]);null!==h&&(p[e]=h)}r.pop()}return p}return a}var d=[Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer],c=[Error,Node],f=t.warn,r=[];return b(a)},getOrigin:function(a,b){if("function"===typeof URL)try{return(new URL(a,b)).origin}catch(f){}var d=document.implementation.createHTMLDocument("");if(b){var c=d.createElement("base");c.href=
b;d.head.appendChild(c)}b=d.createElement("a");b.href=a;d.body.appendChild(b);d=b.protocol+"//"+b.hostname;a.match(/\/\/[^/]+:[0-9]+\//)&&(d+=b.port?":"+b.port:"");return d}},C=function(){function a(a){this._registerListener((a||{}).listenOn)}var b=a.prototype;b._registerListener=function(a){a&&a.addEventListener||(a=window);a.addEventListener("message",t._bind(this,this._receiveMessage),!1)};b._receiveMessage=function(a){var c=this._messageHandlers[a.data.type],f=a.data.eid,d;f&&this._registeredExtensions&&
(d=this._registeredExtensions[f]);if(!c||!this._checkOrigin(a,d))return!1;c.call(this,a,d)};return a}(),ka=function(a){function b(c){var f;c=c||{};f=a.call(this,c)||this;f._registeredExtensions=c.extensions||{};f._registeredAPIModules={};f._registeredAPIModules._globals={};f._pendingCallbacks={};f._keycodeCallbacks={};f._clickHandler=null;f._pendingEvents={};f._messageHandlers={init:f._handleInit,req:f._handleRequest,resp:f._handleResponse,broadcast:f._handleBroadcast,event_query:f._handleEventQuery,
key_triggered:f._handleKeyTriggered,addon_clicked:f._handleAddonClick,get_host_offset:f._getHostOffset,unload:f._handleUnload,sub:f._handleSubInit};return f}N(b,a);var d=b.prototype;d._padUndefinedArguments=function(c,a){return c.length>=a?c:c.concat(Array(a-c.length))};d._verifyAPI=function(c,a){function f(c,a){Object.getOwnPropertyNames(a).forEach(function(d){"object"===typeof a[d]&&c[d]?f(c[d],a[d]):"parent"===a[d]&&c[d]&&(e=!0)})}var d=c.data.targets;if(d){var b=this.getApiSpec(),e=!1;f(b,d);
c.source.postMessage({type:"api_tamper",tampered:e},a.extension.url)}};d._handleInit=function(c,a){c.source.postMessage({type:"init_received"},a.extension.url);this._registeredExtensions[a.extension_id].source=c.source;a.initCallback&&(a.initCallback(c.data.eid),delete a.initCallback);c.data.targets&&this._verifyAPI(c,a)};d._handleSubInit=function(c,a){var d=a.extension.options.noSub||this._getBooleanFeatureFlag&&this._getBooleanFeatureFlag("com.atlassian.connect.resolve_inner_iframe_url");c=c.data;
d?t.error("Sub-Extension requested by ["+a.extension.addon_key+"] but feature is disabled"):this.registerExtension(c.ext.id,{extension:c.ext});this._registeredRequestNotifier&&this._registeredRequestNotifier.call(null,{sub:c.ext,type:c.type,addon_key:a.extension.addon_key,key:a.extension.key,extension_id:a.extension_id,blocked:d})};d._getHostOffset=function(c,a){var d=c.source,f=null;a=a||window;a===a.top&&"function"===typeof a.getHostOffsetFunctionOverride&&(f=a.getHostOffsetFunctionOverride(d));
if("number"!==typeof f)for(f=0;!this._hasSameOrigin(d);)f++,d=d.parent;c.source.postMessage({hostFrameOffset:f},c.origin)};d._hasSameOrigin=function(c){if(c===c.top)return!0;try{var a="test_var_"+Math.random().toString(16).substr(2);c[a]=!0;return c[a]}catch(r){}return!1};d._handleResponse=function(c){c=c.data;var a=this._pendingCallbacks[c.mid];a&&(delete this._pendingCallbacks[c.mid],a.apply(window,c.args))};d.registerRequestNotifier=function(c){this._registeredRequestNotifier=c};d._handleRequest=
function(c,a){function d(){var d=t.sanitizeStructuredClone(t.argumentsToArray(arguments));c.source.postMessage({mid:c.data.mid,type:"resp",forPlugin:!0,args:d},a.extension.url)}var f=c.data,b=this._registeredAPIModules[f.mod],e=this.getRegisteredExtensions(a.extension)[0];if(b){var h=f.fn;if(f._cls){var m=b[f._cls],q=f.mod+"-"+f._cls+"-";d._id=f._id;"constructor"===h?(m._construct||(m.constructor.prototype._destroy=function(){delete this._context._proxies[q+this._id]},m._construct=function(){for(var c=
arguments.length,a=Array(c),d=0;d<c;d++)a[d]=arguments[d];c=ia(m.constructor,a);a=a[a.length-1];c._id=a._id;c._context=a._context;return c._context._proxies[q+c._id]=c}),b=m,h="_construct"):b=e._proxies[q+f._id]}var g=b[h];if(g){var A=f.args,l=g.length-1;"_construct"===h&&(l=b.constructor.length-1);d._context=e;A=this._padUndefinedArguments(A,l);A.push(d);b=g.apply(b,A);g.returnsPromise&&("object"!==typeof b&&"function"!==typeof b||"function"!==typeof b.then?d("Defined module method did not return a promise."):
b.then(function(c){d(void 0,c)}).catch(function(c){c=c instanceof Error?c.message:c;d(c)}));this._registeredRequestNotifier&&this._registeredRequestNotifier.call(null,{module:f.mod,fn:f.fn,type:f.type,addon_key:a.extension.addon_key,key:a.extension.key,extension_id:a.extension_id})}}};d._handleBroadcast=function(c,a){c=c.data;this.dispatch(c.etyp,function(c){return c.extension.addon_key===a.extension.addon_key&&c.extension_id!==a.extension_id},c.evnt,null,null)};d._handleKeyTriggered=function(c,a){var d=
c.data;c=this._keycodeKey(d.keycode,d.modifiers,a.extension_id);(c=this._keycodeCallbacks[c])&&c.forEach(function(c){c.call(null,{addon_key:a.extension.addon_key,key:a.extension.key,extension_id:a.extension_id,keycode:d.keycode,modifiers:d.modifiers})},this)};d.defineAPIModule=function(c,a){a=a||"_globals";this._registeredAPIModules[a]=t.extend({},this._registeredAPIModules[a]||{},c);return this._registeredAPIModules};d.isAPIModuleDefined=function(c){return"undefined"!==typeof this._registeredAPIModules[c]};
d._pendingEventKey=function(c,a){var d=c.addon_key||"global";c.key&&(d=d+"@@"+c.key);return d+"@@"+a};d.queueEvent=function(c,a,d,b){if(this._findRegistrations(a).some(function(c){return void 0!==c.registered_events},this))this.dispatch(c,a,d,b);else{this._cleanupInvalidEvents();var f=(new Date).getTime();this._pendingEvents[this._pendingEventKey(a,f)]={type:c,targetSpec:a,event:d,callback:b,time:f,uid:t.randomString()}}};d._cleanupInvalidEvents=function(){var c=this,a=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(d){3E4>=
a-c._pendingEvents[d].time||delete c._pendingEvents[d]})};d._handleEventQuery=function(c,a){var d=this,f={},b=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(r){var p=d._pendingEvents[r],e=3E4>=b-p.time,F=!p.targetSpec||0!==d._findRegistrations(p.targetSpec).length;F&&p.targetSpec.key&&(F=p.targetSpec.addon_key===a.extension.addon_key&&p.targetSpec.key===a.extension.key);e&&F?(f[r]=p,p.targetSpec=p.targetSpec||{},d.dispatch(p.type,p.targetSpec,p.event,p.callback,c.source)):
e||delete d._pendingEvents[r]});this._registeredExtensions[a.extension_id].registered_events=c.data.args;return f};d._handleUnload=function(c,a){a&&(a.extension_id&&this._registeredExtensions[a.extension_id]&&delete this._registeredExtensions[a.extension_id].source,a.unloadCallback&&a.unloadCallback(c.data.eid))};d.dispatch=function(a,d,b,p,e){function c(c,d){if(c.source&&c.source.postMessage){var f;p&&(f=t.randomString(),this._pendingCallbacks[f]=p);c.source.postMessage({type:"evt",mid:f,etyp:a,
evnt:d},c.extension.url)}}this._findRegistrations(d||{}).forEach(function(a){e&&!a.source&&(a.source=e);a.source&&t._bind(this,c)(a,b)},this)};d._findRegistrations=function(a){var c=this;if(0===this._registeredExtensions.length)return t.error("no registered extensions",this._registeredExtensions),[];var d=Object.getOwnPropertyNames(a),b=Object.getOwnPropertyNames(this._registeredExtensions).map(function(a){return c._registeredExtensions[a]});return a instanceof Function?b.filter(a):b.filter(function(c){return d.every(function(d){return c.extension[d]===
a[d]})})};d.registerExtension=function(a,d){d._proxies={};d.extension_id=a;this._registeredExtensions[a]=d};d._keycodeKey=function(a,d,b){var c=a;d&&("string"===typeof d&&(d=[d]),d.sort(),d.forEach(function(a){c+="$$"+a},this));return c+"__"+b};d.registerKeyListener=function(a,d,b,p){"string"===typeof b&&(b=[b]);var c=this._registeredExtensions[a];a=this._keycodeKey(d,b,a);this._keycodeCallbacks[a]||(this._keycodeCallbacks[a]=[],c.source.postMessage({type:"key_listen",keycode:d,modifiers:b,action:"add"},
c.extension.url));this._keycodeCallbacks[a].push(p)};d.unregisterKeyListener=function(a,d,b,p){var c=this._keycodeKey(d,b,a),f=this._keycodeCallbacks[c];a=this._registeredExtensions[a];f&&(p?(p=f.indexOf(p),this._keycodeCallbacks[c].splice(p,1)):delete this._keycodeCallbacks[c],a.source&&a.source.postMessage&&a.source.postMessage({type:"key_listen",keycode:d,modifiers:b,action:"remove"},a.extension.url))};d.registerClickHandler=function(a){if("function"!==typeof a)throw Error("callback must be a function");
if(null!==this._clickHandler)throw Error("ClickHandler already registered");this._clickHandler=a};d._handleAddonClick=function(a,d){"function"===typeof this._clickHandler&&this._clickHandler({addon_key:d.extension.addon_key,key:d.extension.key,extension_id:d.extension_id})};d.unregisterClickHandler=function(){this._clickHandler=null};d.getApiSpec=function(a){function c(a){return Object.getOwnPropertyNames(a).reduce(function(d,b){var f=a[b];switch(typeof f){case "function":d[b]={args:t.argumentNames(f),
returnsPromise:f.returnsPromise||!1};break;case "object":f.hasOwnProperty("constructor")&&(d[b]=c(f))}return d},{})}var d=this;return Object.getOwnPropertyNames(this._registeredAPIModules).reduce(function(b,f){var r=d._registeredAPIModules[f];if("undefined"===typeof r.addonKey||r.addonKey===a)b[f]=c(r);return b},{})};d._originEqual=function(a,d){function c(a){return"string"===typeof a&&0<a.length}var b=t.getOrigin(a);return c(a)&&c(d)&&c(b)?d===b:!1};d._checkOrigin=function(a,d){var c=["init"],b=
d&&!d.source&&-1<c.indexOf(a.data.type),c=d&&a.source===d.source;d=d&&this._originEqual(d.extension.url,a.origin)&&(b||c);"get_host_offset"===a.data.type&&window===window.top&&(d=!0);"unload"!==a.data.type||!c&&void 0!==a.source||(d=!0);return d};d.getRegisteredExtensions=function(a){return a?this._findRegistrations(a):this._registeredExtensions};d.unregisterExtension=function(a){a=this._findRegistrations(a);0!==a.length&&a.forEach(function(a){var c=this;Object.keys(this._pendingEvents).forEach(function(d){var b=
c._pendingEvents[d].targetSpec||{};b.addon_key===a.extension.addon_key&&b.key===a.extension.key&&delete c._pendingEvents[d]});delete this._registeredExtensions[a.extension_id]},this)};d.setFeatureFlagGetter=function(a){this._getBooleanFeatureFlag=a};return b}(C),S=function(){function a(){this._xdm=new ka}var b=a.prototype;b.dispatch=function(a,c,b,r){this._xdm.queueEvent(a,c,b,r);return this.getExtensions(c)};b.broadcast=function(a,c,b){this._xdm.dispatch(a,c,b,null,null);return this.getExtensions(c)};
b._createId=function(a){if(!a.addon_key||!a.key)throw Error("Extensions require addon_key and key");return a.addon_key+"__"+a.key+"__"+t.randomString()};b.create=function(a,c,b){c=this.registerExtension(a,c,b);b=a.options||{};b={extension_id:c,api:this._xdm.getApiSpec(a.addon_key),origin:t.locationOrigin(),options:b};return{id:c,name:JSON.stringify(b),src:a.url}};b.registerRequestNotifier=function(a){this._xdm.registerRequestNotifier(a)};b.registerExtension=function(a,c,b){var d=this._createId(a);
this._xdm.registerExtension(d,{extension:a,initCallback:c,unloadCallback:b});return d};b.registerKeyListener=function(a,c,b,r){this._xdm.registerKeyListener(a,c,b,r)};b.unregisterKeyListener=function(a,c,b,r){this._xdm.unregisterKeyListener(a,c,b,r)};b.registerClickHandler=function(a){this._xdm.registerClickHandler(a)};b.unregisterClickHandler=function(){this._xdm.unregisterClickHandler()};b.defineModule=function(a,c,b){this._xdm.defineAPIModule(c,a,b)};b.isModuleDefined=function(a){return this._xdm.isAPIModuleDefined(a)};
b.defineGlobals=function(a){this._xdm.defineAPIModule(a)};b.getExtensions=function(a){return this._xdm.getRegisteredExtensions(a)};b.unregisterExtension=function(a){return this._xdm.unregisterExtension(a)};b.returnsPromise=function(a){a.returnsPromise=!0};b.setFeatureFlagGetter=function(a){this._xdm.setFeatureFlagGetter(a)};return a}(),la=n(function(a){function b(){a.exports=b=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var d=arguments[c],b;for(b in d)Object.prototype.hasOwnProperty.call(d,
b)&&(a[b]=d[b])}return a};return b.apply(this,arguments)}a.exports=b}),ma=setTimeout;k.prototype["catch"]=function(a){return this.then(null,a)};k.prototype.then=function(a,b){var d=new this.constructor(u);v(this,new g(a,b,d));return d};k.prototype["finally"]=function(a){var b=this.constructor;return this.then(function(d){return b.resolve(a()).then(function(){return d})},function(d){return b.resolve(a()).then(function(){return b.reject(d)})})};k.all=function(a){return new k(function(b,d){function c(a,
p){try{if(p&&("object"===typeof p||"function"===typeof p)){var e=p.then;if("function"===typeof e){e.call(p,function(d){c(a,d)},d);return}}f[a]=p;0===--r&&b(f)}catch(ja){d(ja)}}if(!a||"undefined"===typeof a.length)throw new TypeError("Promise.all accepts an array");var f=Array.prototype.slice.call(a);if(0===f.length)return b([]);for(var r=f.length,p=0;p<f.length;p++)c(p,f[p])})};k.resolve=function(a){return a&&"object"===typeof a&&a.constructor===k?a:new k(function(b){b(a)})};k.reject=function(a){return new k(function(b,
d){d(a)})};k.race=function(a){return new k(function(b,d){for(var c=0,f=a.length;c<f;c++)a[c].then(b,d)})};k._immediateFn="function"===typeof setImmediate&&function(a){setImmediate(a)}||function(a){ma(a,0)};k._unhandledRejectionFn=function(a){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};var W=t.each,da=window.document;e.bind=h("add","attach");e.unbind=h("remove","detach");e.onDomLoad=function(a){var b=window;"complete"===b.document.readyState?a.call(b):
e.bind(b,"load",function(){a.call(b)})};var K=new (function(){function a(){this.options={}}var b=a.prototype;b._flush=function(){this.options={}};b.get=function(a){return a?this.options[a]:this.options};b.set=function(a,c){var d=this;if(a){if(c){var b;a=(b={},b[a]=c,b)}Object.getOwnPropertyNames(a).forEach(function(c){d.options[c]=a[c]},this)}};return a}()),T=function(a,b,d){var c=function(){var a=window.innerWidth-d.clientWidth,a=0>a?0:a;return 50<a?50:a},f=function(){var a=window.innerHeight-Math.min(d.clientHeight,
document.documentElement.clientHeight),a=0>a?0:a;return 50<a?50:a};a=null==a?"100%":a;var r,p=!!K.get("widthinpx");(d=d||q())||t.warn("size called before container or body appeared, ignoring");p&&"string"===typeof a&&-1!==a.search("%")&&(a=Math.max(d.scrollWidth,d.offsetWidth,d.clientWidth));if(b)r=b;else if(b=Math.max(d.scrollHeight,document.documentElement.scrollHeight,d.offsetHeight,document.documentElement.offsetHeight,d.clientHeight,document.documentElement.clientHeight),d===document.body)r=
b;else{var e=window.getComputedStyle(d);r=d.getBoundingClientRect().height;0===r?r=b:["margin-top","margin-bottom"].forEach(function(a){a=parseFloat(e[a]);r+=a})}a="number"===typeof a&&Math.min(d.scrollHeight,document.documentElement.scrollHeight)>Math.min(d.clientHeight,document.documentElement.clientHeight)?a+c():a;r="number"===typeof r&&d.scrollWidth>d.clientWidth?r+f():r;return{w:a,h:r}},na={add:function(a){var b=q();H(b,a)},remove:function(){var a=q();a.resizeSensor&&(a.resizeObserver.disconnect(),
a.removeChild(a.resizeSensor),delete a.resizeSensor,delete a.resizedAttached)}},oa=function(){function a(a){this.resizeError=t.throttle(function(a){console.info(a)},1E3);this.dimensionStores={width:[],height:[]};this.callback=a}var b=a.prototype;b._setVal=function(a,c,b){this.dimensionStores[c]=this.dimensionStores[c].filter(function(a){return 400>b-a.setAt});this.dimensionStores[c].push({val:parseInt(a,10),setAt:b})};b._isFlicker=function(a,c){return 5<=this.dimensionStores[c].length};b.triggered=
function(a){a=a||T();var c=Date.now();this._setVal(a.w,"width",c);this._setVal(a.h,"height",c);var d=this._isFlicker(a.w,"width",c),c=this._isFlicker(a.h,"height",c);d&&(a.w="100%",this.resizeError("SIMPLE XDM: auto resize flickering width detected, setting to 100%"));c&&(d=this.dimensionStores.height.map(function(a){return a.val}),a.h=Math.max.apply(null,d)+"px",this.resizeError("SIMPLE XDM: auto resize flickering height detected, setting to: "+a.h));this.callback(a.w,a.h)};return a}(),E=new (function(){function a(){}
var b=a.prototype;b._elementExists=function(a){return a&&1===a.length};b._elementOptions=function(a){return a.attr("data-options")};b._getConsumerOptions=function(){var a={},c=e("#ac-iframe-options"),b=e("script[src*='/atlassian-connect/all']"),r=e("script[src*='/connect-cdn.atl-paas.net/all']");this._elementExists(c)&&this._elementOptions(c)||(this._elementExists(b)?c=b:this._elementExists(r)&&(c=r));this._elementExists(c)&&(c=this._elementOptions(c))&&c.split(";").forEach(function(c){if(c=c.trim()){var d=
c.split(":");c=d[0].trim();d=d[1].trim();c&&null!=d&&(a[c]="true"===d||"false"===d?"true"===d:d)}});return a};b._flush=function(){delete this._options};b.get=function(a){this._options||(this._options=this._getConsumerOptions());return a?this._options[a]:this._options};return a}()),pa=["ctrl","shift","alt","meta"],qa=function(a){function b(c,d){var b;void 0===d&&(d=!0);b=a.call(this)||this;K.set(c);b._data=b._parseInitData();K.set(b._data.options);b._data.options=b._data.options||{};b._hostOrigin=
b._data.options.hostOrigin||"*";b._top=window.top;b._host=window.parent||window;b._topHost=b._getHostFrame(b._data.options.hostFrameOffset);b._topHost!==b._top&&b._verifyHostFrameOffset();b._initTimeout=5E3;b._initReceived=!1;b._initCheck=d;b._isKeyDownBound=!1;b._hostModules={};b._eventHandlers={};b._pendingCallbacks={};b._keyListeners=[];b._version="5.3.3";b._apiTampered=void 0;b._isSubIframe=b._topHost!==window.parent;b._onConfirmedFns=[];b._promise=k;b._data.api&&(b._setupAPI(b._data.api),b._setupAPIWithoutRequire(b._data.api));
b._messageHandlers={init_received:b._handleInitReceived,resp:b._handleResponse,evt:b._handleEvent,key_listen:b._handleKeyListen,api_tamper:b._handleApiTamper};b._data.origin&&(b._sendInit(b._host,b._data.origin),b._isSubIframe&&b._sendInit(b._topHost,b._hostOrigin));b._registerOnUnload();b.resize=t._bind(J(b),function(a,c){if(q()){var d=T();a||(a=d.w);c||(c=d.h);b._hostModules.env&&b._hostModules.env.resize&&b._hostModules.env.resize(a,c)}else t.warn("resize called before container or body appeared, ignoring")});
e(t._bind(J(b),b._autoResizer));b.container=q;b.size=T;window.addEventListener("click",function(a){b._host.postMessage({eid:b._data.extension_id,type:"addon_clicked"},b._hostOrigin)});return b}N(b,a);var d=b.prototype;d._getHostFrame=function(a){if(a&&"number"===typeof a){for(var c=window,b=0;b<a;b++)c=c.parent;return c}return this._top};d._verifyHostFrameOffset=function(){var a=this;window.addEventListener("message",function r(c){c.source===a._top&&c.data&&"number"===typeof c.data.hostFrameOffset&&
(window.removeEventListener("message",r),a._getHostFrame(c.data.hostFrameOffset)!==a._topHost&&(t.error("hostFrameOffset tampering detected, setting host frame to top window"),a._topHost=a._top))});this._top.postMessage({type:"get_host_offset"},this._hostOrigin)};d._handleApiTamper=function(a){!1!==a.data.tampered?(this._host=void 0,this._apiTampered=!0,t.error("XDM API tampering detected, api disabled")):(this._apiTampered=!1,this._onConfirmedFns.forEach(function(a){a.apply(null)}));this._onConfirmedFns=
[]};d._registerOnUnload=function(){e.bind(window,"unload",t._bind(this,function(){this._sendUnload(this._host,this._data.origin);this._isSubIframe&&this._sendUnload(this._topHost,this._hostOrigin)}))};d._sendUnload=function(a,b){a.postMessage({eid:this._data.extension_id,type:"unload"},b||"*")};d._bindKeyDown=function(){this._isKeyDownBound||(e.bind(window,"keydown",t._bind(this,this._handleKeyDownDomEvent)),this._isKeyDownBound=!0)};d._autoResizer=function(){this._enableAutoResize=!!K.get("autoresize");
if(!1===E.get("resize")||!0===E.get("sizeToParent"))this._enableAutoResize=!1;this._enableAutoResize&&this._initResize()};d._parseInitData=function(a){try{return JSON.parse(a||window.name)}catch(f){return{}}};d._findTarget=function(a,b){return this._data.options&&this._data.options.targets&&this._data.options.targets[a]&&this._data.options.targets[a][b]?this._data.options.targets[a][b]:"top"};d._createModule=function(a,b){var c=this;return Object.getOwnPropertyNames(b).reduce(function(d,f){var p=
b[f];p.hasOwnProperty("constructor")?d[f]=c._createProxy(a,p,f):d[f]=c._createMethodHandler({mod:a,fn:f,returnsPromise:p.returnsPromise});return d},{})};d._setupAPI=function(a){var c=this;this._hostModules=Object.getOwnPropertyNames(a).reduce(function(b,d){b[d]=c._createModule(d,a[d],a[d]._options);return b},{});Object.getOwnPropertyNames(this._hostModules._globals||{}).forEach(function(a){c[a]=c._hostModules._globals[a]})};d._setupAPIWithoutRequire=function(a){var c=this;Object.getOwnPropertyNames(a).forEach(function(b){if("undefined"!==
typeof c[b])throw Error("XDM module: "+b+" will collide with existing variable");c[b]=c._createModule(b,a[b])},this)};d._pendingCallback=function(a,b,d){d&&Object.getOwnPropertyNames(d).forEach(function(a){b[a]=d[a]});this._pendingCallbacks[a]=b};d._createProxy=function(a,b,d){function c(a){if(!(this instanceof c))return new c(arguments);this._cls=d;this._id=t.randomString();f.constructor.apply(this,a);return this}var f=this._createModule(a,b);Object.getOwnPropertyNames(f).forEach(function(a){"constructor"!==
a&&(c.prototype[a]=f[a])});return c};d._createMethodHandler=function(a){var c=this;return function(){var b=t.argumentsToArray(arguments),d={eid:c._data.extension_id,type:"req",mod:a.mod,fn:a.fn},f,e,h,m=t.randomString();"top"===c._findTarget(a.mod,a.fn)?(e=c._topHost,f=c._hostOrigin):(e=c._host,f=c._data.origin);t.hasCallback(b)?(d.mid=m,c._pendingCallback(d.mid,b.pop(),{useCallback:!0,isPromiseMethod:!!a.returnsPromise})):a.returnsPromise&&(d.mid=m,h=new k(function(b,f){c._pendingCallback(d.mid,
function(a,c){a||"undefined"===typeof c&&"undefined"===typeof a?f(a):b(c)},{useCallback:!1,isPromiseMethod:!!a.returnsPromise})}),h.catch(function(a){t.warn("Failed promise: "+a)}));this&&this._cls&&(d._cls=this._cls,d._id=this._id);d.args=t.sanitizeStructuredClone(b);c._isSubIframe&&"undefined"===typeof c._apiTampered?c._onConfirmedFns.push(function(){e.postMessage(d,f)}):e.postMessage(d,f);if(h)return h}};d._handleResponse=function(a){a=a.data;if(a.forPlugin){var c=this._pendingCallbacks[a.mid];
if(c){delete this._pendingCallbacks[a.mid];try{c.useCallback&&c.isPromiseMethod&&a.args.shift(),c.apply(window,a.args)}catch(r){t.error(r.message,r.stack)}}}};d._handleEvent=function(a){function c(a){return a?(Array.isArray(a)||(a=[a]),a):[]}var b=function(){var c=t.argumentsToArray(arguments);a.source.postMessage({eid:this._data.extension_id,mid:a.data.mid,type:"resp",args:c},this._data.origin)},d=a.data,b=t._bind(this,b);b._context={eventName:d.etyp};var e=c(this._eventHandlers[d.etyp]),e=e.concat(c(this._eventHandlers._any));
e.forEach(function(a){try{a(d.evnt,b)}catch(wa){t.error("exception thrown in event callback for:"+d.etyp)}},this);d.mid&&b()};d._handleKeyDownDomEvent=function(a){var c=[];pa.forEach(function(b){a[b+"Key"]&&c.push(b)},this);var b=this._keyListenerId(a.keyCode,c);0<=this._keyListeners.indexOf(b)&&this._host.postMessage({eid:this._data.extension_id,keycode:a.keyCode,modifiers:c,type:"key_triggered"},this._data.origin)};d._keyListenerId=function(a,b){var c=a;b&&("string"===typeof b&&(b=[b]),b.sort(),
b.forEach(function(a){c+="$$"+a},this));return c};d._handleKeyListen=function(a){var c=this._keyListenerId(a.data.keycode,a.data.modifiers);"remove"===a.data.action?(a=this._keyListeners.indexOf(c),this._keyListeners.splice(a,1)):"add"===a.data.action&&(this._bindKeyDown(),this._keyListeners.push(c))};d._checkOrigin=function(a){var c=["api_tamper"];return a.data&&-1<c.indexOf(a.data.type)||this._isSubIframe&&a.source===this._topHost?!0:a.origin===this._data.origin&&a.source===this._host};d._handleInitReceived=
function(){this._initReceived=!0};d._sendInit=function(a,b){var c=this,d;a===this._topHost&&this._topHost!==window.parent&&(d=K.get("targets"));a.postMessage({eid:this._data.extension_id,type:"init",targets:d},b||"*");this._initCheck&&this._data.options.globalOptions.check_init&&setTimeout(function(){if(!c._initReceived)throw Error("Initialization message not received");},this._initTimeout)};d.sendSubCreate=function(a,b){b.id=a;this._topHost.postMessage({eid:this._data.extension_id,type:"sub",ext:b},
this._hostOrigin)};d.broadcast=function(a,b){if(!t.isString(a))throw Error("Event type must be string");this._host.postMessage({eid:this._data.extension_id,type:"broadcast",etyp:a,evnt:b},this._data.origin)};d.require=function(a,b){var c=this;a=(Array.isArray(a)?a:[a]).map(function(a){return c._hostModules[a]||c._hostModules._globals[a]});b.apply(window,a)};d.register=function(a){"object"===typeof a&&(this._eventHandlers=la({},this._eventHandlers,a)||{},this._host.postMessage({eid:this._data.extension_id,
type:"event_query",args:Object.getOwnPropertyNames(a)},this._data.origin))};d.registerAny=function(a){this.register({_any:a})};d._initResize=function(){this.resize();var a=new oa(this.resize);na.add(t._bind(a,a.triggered))};return b}(C),m=new (function(a){function b(b){var c;c=a.call(this)||this;c.parentTargets={_globals:{}};var d=new qa(void 0,b);Object.getOwnPropertyNames(d).forEach(function(a){-1===["_hostModules","_globals"].indexOf(a)&&void 0===this[a]&&(this[a]=d[a])},J(c));["registerAny","register"].forEach(function(a){this[a]=
Object.getPrototypeOf(d)[a].bind(d)},J(c));var e=d._data.api;"object"===typeof e&&Object.getOwnPropertyNames(e).forEach(function(a){var b={};Object.getOwnPropertyNames(e[a]).forEach(function(c){e[a][c].hasOwnProperty("constructor")?b[c]=d._hostModules[a][c].prototype:(b[c]=d._hostModules[a][c],b[c].returnsPromise=e[a][c].returnsPromise||!1)},this);this._xdm.defineAPIModule(b,a)},J(c));c._hostModules=d._hostModules;c.defineGlobal=function(a){this.parentTargets._globals=t.extend({},this.parentTargets._globals,
a);this._xdm.defineAPIModule(a)};c.defineModule=function(a,b){this._xdm.defineAPIModule(b,a);this.parentTargets[a]={};Object.getOwnPropertyNames(b).forEach(function(b){this.parentTargets[a][b]="parent"},this)};c.subCreate=function(a,b){a.options=a.options||{};a.options.targets=t.extend({},this.parentTargets,a.options.targets);b=this.create(a,b);this._data.options.globalOptions.resolve_inner_iframe_url||d.sendSubCreate(b.id,a);return b};return c}N(b,a);return b}(S)),x={each:P,log:Y,decodeQueryComponent:function(a){return null==
a?null:decodeURIComponent(a.replace(/\+/g,"%20"))},bind:X("add","attach"),unbind:X("remove","detach"),extend:function(a){var b=arguments,b=[].slice.call(b,1,b.length);P(b,function(b,c){P(c,function(b,c){a[b]=c})});return a},trim:function(a){return a&&a.replace(/^\s+|\s+$/g,"")},debounce:function(a,b){var d;return function(){var c=this,f=[].slice.call(arguments);d&&clearTimeout(d);d=setTimeout(function(){d=null;a.apply(c,f)},b||50)}},isFunction:function(a){return"function"===typeof a},handleError:function(a){if(!Y.apply(this,
a&&a.message?[a,a.message]:[a]))throw a;}},U=x.each,ca=x.extend,ra=window.document,I=ca(function(a,b){b=b||ra;var d=[];a&&("string"===typeof a?(a=b.querySelectorAll(a),U(a,function(a,b){d.push(b)})):1===a.nodeType?d.push(a):a===window&&d.push(a));ca(d,{each:function(a){U(this,a);return this},bind:function(a,b){this.each(function(c,d){x.bind(d,a,b)})},attr:function(a){var b;this.each(function(c,d){b=d[a]||d.getAttribute&&d.getAttribute(a);return!b});return b},removeClass:function(a){return this.each(function(b,
c){c.className&&(c.className=c.className.replace(new RegExp("(^|\\s)"+a+"(\\s|$)")," "))})},html:function(a){return this.each(function(b,c){c.innerHTML=a})},append:function(a){return this.each(function(c,d){var f=b.createElement(a.tag);U(a,function(a,c){"$text"===a?f.styleSheet?f.styleSheet.cssText=c:f.appendChild(b.createTextNode(c)):"tag"!==a&&(f[a]=c)});d.appendChild(f)})}});return d},x),C=function(){function a(){this._events={};this.ANY_PREFIX="_any";this.methods="off offAll offAny on onAny once".split(" ")}
var b=a.prototype;b._anyListener=function(a,b){var c=b._context.eventName;b=this._events[this.ANY_PREFIX]||[];var d=this._events[c]||[];Array.isArray(a)||(a=[a]);b.forEach(function(b){var d=a.slice(0);d.unshift(c);d.push({args:a,name:c});b.apply(null,d)});d.forEach(function(b){b.apply(null,a)})};b.off=function(a,b){this._events[a]&&(b=this._events[a].indexOf(b),-1<b&&this._events[a].splice(b,1),0===this._events[a].length&&delete this._events[a])};b.offAll=function(a){delete this._events[a]};b.offAny=
function(a){this.off(this.ANY_PREFIX,a)};b.on=function(a,b){this._events[a]||(this._events[a]=[]);this._events[a].push(b)};b.onAny=function(a){this.on(this.ANY_PREFIX,a)};b.once=function(a,b){function c(){b.apply(null,arguments);d.off(a,c)}var d=this;this.on(a,c)};return a}(),L=new C,V=new (function(a){function b(){var b;b=a.call(this)||this;b.methods="offPublic offAllPublic offAnyPublic onPublic onAnyPublic oncePublic".split(" ");return b}N(b,a);var d=b.prototype;d._filterEval=function(a,b){var c=
!0;if(!a)return c;switch(typeof a){case "function":c=!!a.call(null,b);break;case "object":c=Object.getOwnPropertyNames(a).every(function(c){return b[c]===a[c]})}return c};d.once=function(a,b,d){function c(d){b.apply(null,d);f.off(a,c)}var f=this;this.on(a,c,d)};d.on=function(b,d,e){d._wrapped=function(a){this._filterEval(e,a.sender)&&d.apply(null,a.event)}.bind(this);a.prototype.on.call(this,b,d._wrapped)};d.off=function(b,d){d._wrapped?a.prototype.off.call(this,b,d._wrapped):a.prototype.off.call(this,
b,d)};d.onAny=function(b,d){b._wrapped=function(a){a.sender&&this._filterEval(d,a.sender)&&b.apply(null,a.event)};a.prototype.onAny.call(this,b._wrapped)};d.offAny=function(b){b._wrapped?a.prototype.offAny.call(this,name,b._wrapped):a.prototype.offAny.call(this,name,b)};return b}(C)),sa=1,C=A(function(){return m._data.options.customData},"AP.dialog.customData","AP.dialog.getCustomData()","5.0");m._hostModules&&m._hostModules.dialog&&(Object.defineProperty(m._hostModules.dialog,"customData",{get:C}),
Object.defineProperty(m.dialog,"customData",{get:C}),m.dialog._disableCloseOnSubmit=!1,m.dialog.disableCloseOnSubmit=function(){m.dialog._disableCloseOnSubmit=!0});var G={};L.onAny(function(a,b){var d=a.match(/^dialog\.(\w+)/);d&&("dialog.button.click"===a?ea(b.button.identifier,b):fa(d[1],b))});if(m.dialog&&m.dialog.create){var ta=m.dialog.create.prototype.constructor.bind({});m.dialog.create=m._hostModules.dialog.create=function(){var a=ta.apply(void 0,arguments);a.on=A(Q,'AP.dialog.on("close", callback)',
'AP.events.on("dialog.close", callback)',"5.0");return a}}if(m.dialog&&m.dialog.getButton){var ua=m.dialog.getButton.prototype.constructor.bind({});m.dialog.getButton=m._hostModules.dialog.getButton=function(a){try{var b=ua(a);b.bind=A(function(b){return Q(a,b)},"AP.dialog.getDialogButton().bind()",'AP.events.on("dialog.message", callback)',"5.0");return b}catch(d){return{}}}}if(m.dialog&&m.dialog.createButton){var va=m.dialog.createButton.prototype.constructor.bind({});m.dialog.createButton=m._hostModules.dialog.createButton=
function(a){var b={};"object"!==typeof a?(b.text=a,b.identifier=a):b=a;b.identifier||(b.identifier="user.button."+sa++);va(b);return m.dialog.getButton(b.identifier)}}m.dialog&&(m.dialog.onDialogMessage=m._hostModules.dialog.onDialogMessage=A(Q,"AP.dialog.onDialogMessage()",'AP.events.on("dialog.message", callback)',"5.0"));m.Dialog||(m.Dialog=m._hostModules.Dialog=m.dialog);var M={},O={define:function(a,b,d){var c=aa(a),f;d||(d=b,b=[]);d&&(f="function"!==typeof d?function(){return d}:d,Z(b,function(){var a=
f.apply(window,arguments);if(a){"function"===typeof a&&(c.exports.__target__=a);for(var b in a)a.hasOwnProperty(b)&&(c.exports[b]=a[b])}}))},require:function(a,b){Z("string"===typeof a?[a]:a,b)}},C=new (function(){function a(){this.store={}}var b=a.prototype;b.set=function(a,b){if(b){var c={};c[a]=b}else c=a;x.extend(this.store,c)};b.get=function(a){return a?this.store[a]:x.extend({},this.store)};return a}());m._hostModules._dollar=I;m._hostModules["inline-dialog"]=m._hostModules.inlineDialog;!0===
E.get("sizeToParent")?m.env&&m.env.sizeToParent(!0===E.get("hideFooter")):m.env&&m.env.hideFooter(!0===E.get("hideFooter"));!0===E.get("base")&&m.env&&m.env.getLocation(function(a){I("head").append({tag:"base",href:a,target:"_parent"})});I.each(L.methods,function(a,b){m._hostModules&&m._hostModules.events&&(m._hostModules.events[b]=m.events[b]=L[b].bind(L),m._hostModules.events[b+"Public"]=m.events[b+"Public"]=V[b].bind(V))});m.define=A(function(){return O.define.apply(O,arguments)},"AP.define()",
null,"5.0");m.require=A(function(){return O.require.apply(O,arguments)},"AP.require()",null,"5.0");S=m._data.options.isDialog?"10px 10px 0 10px":"0";!1!==E.get("margin")&&I("head").append({tag:"style",type:"text/css",$text:"body {margin: "+S+" !important;}"});m.Meta={get:R};m.meta=R;m.localUrl=function(a){var b=R("local-base-url");return"undefined"===typeof b||"undefined"===typeof a?b:""+b+a};m._hostModules._util=m._util={each:x.each,log:x.log,decodeQueryComponent:x.decodeQueryComponent,bind:x.bind,
unbind:x.unbind,extend:x.extend,trim:x.trim,debounce:x.debounce,isFunction:x.isFunction,handleError:x.handleError};m.defineModule&&m.defineModule("env",{resize:function(a,b,d){d=document.getElementById(d._context.extension_id);d.style.width=a+("number"===typeof a?"px":"");d.style.height=b+("number"===typeof b?"px":"")}});m._data&&m._data.origin&&m.registerAny(function(a,b){a&&a.event&&a.sender?V._anyListener(a,b):L._anyListener(a,b)});C.set(m._data.options.globalOptions);return m}();(function(){function n(e){var h;if("string"===typeof e&&1<e.length)try{h=JSON.parse(e)}catch(q){console.error("ACJS: failed to decode context",e)}"object"!==typeof h&&(h={});return h}function u(e,h){e=e.contentDocument;h="(function(){ var w = window; for (var i=0; i<"+h.options.hostFrameOffset+"; i++){w = w.parent; } w.postMessage("+JSON.stringify({type:"set_inner_iframe_url",iframeData:h})+', "*");}());';e.open();e.write("<script>"+h+"\x3c/script>");e.close()}function w(e,h){if("number"!==typeof e)return window.top;
h=h||window;for(var q=0;q<e;q++)h=h.parent;return h}function k(e,h,q){q=q||100;if("undefined"!==typeof window[e])h(window[e]);else var g=setInterval(function(){"undefined"!==typeof window[e]&&(clearInterval(g),h(window[e]))},q)}function v(e){window._AP.isSubHost=w(e.hostFrameOffset)!==window;var h=window._AP._convertConnectOptions(e);window._AP.addonAttemptCounter[h.containerId]=0;var q;window._AP.isSubHost?(window.AP&&window.AP._data&&window.AP._data.options&&window.AP._data.options.globalOptions&&
(h.options.globalOptions=window.AP._data.options.globalOptions),q=window._AP._createSub(h),y(q,h)):k("connectHost",function(e){z(e,{addon_key:h.addon_key,key:h.key}).forEach(function(q){if(q.extension.options.uniqueKey===h.options.uniqueKey){var g=document.getElementById(q.extension_id);e.destroy(q.extension_id);g&&AJS.$(g).closest(".ap-iframe-container").remove()}},this);q=e.create(h);y(q,h)})}function y(e,h){var q=document.getElementById(h.containerId);window._AP.addonAttemptCounter[h.containerId]++;
if(q)if(delete window._AP.addonAttemptCounter[h.containerId],window._AP.isSubHost)q.appendChild(e),u(e,h);else{var g=q.querySelector(".ap-iframe-container");g&&(g.parentNode.removeChild(g),AJS.log&&AJS.log("AJS: duplicate iframe removed",h,q));e.appendTo(q);e.data("addon-key",h.addon_key);e.data("key",h.key)}else 10>=window._AP.addonAttemptCounter[h.containerId]&&l(function(){y(e,h)})}var l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||
function(e){window.setTimeout(e,50)}}(),z=function(e,h){return e.getExtensions(h).filter(function(e){return!!document.getElementById(e.extension_id)})},g=function(e,h,q){try{var l=require(e);h(l)}catch(H){0>=q?(console.error("Unable to load module: "+e),h(null)):setTimeout(function(){g(e,h,q-1)},500)}},D=function(e,h,g,l,k){"undefined"===typeof l&&(l=20);k=k||200;!e.isModuleDefined||0>=l?g():e.isModuleDefined(h)?g(!0):setTimeout(function(){D(e,h,g,l-1,k)},k)};window._AP=window._AP||{};window._AP.addonAttemptCounter=
window._AP.addonAttemptCounter||{};window._AP._convertConnectOptions=function(e){var h={url:e.url,ns:e.uniqueKey,addon_key:e.addon_key,key:e.key,containerId:"embedded-"+e.uniqueKey,options:{history:{state:""},uniqueKey:e.uniqueKey,origin:e.origin,hostOrigin:e.hostOrigin,moduleType:e.moduleType,moduleLocation:e.moduleLocation,isFullPage:"1"===e.general,autoresize:!0,user:{timeZone:e.timeZone,fullName:e.fullName,uid:e.uid,ukey:e.ukey},productContext:n(e.productCtx),structuredContext:n(e.structuredContext),
contextJwt:e.contextJwt,contextPath:e.cp,width:e.w||e.width,height:e.h||e.height,sandbox:e.sandbox,noSub:e.noSub,allowPathTraversal:e.allowPathTraversal,targets:{env:{resize:"both"}}}};"string"===typeof e.contentClassifier&&(h.options.contentClassifier=e.contentClassifier);"number"===typeof e.hostFrameOffset&&(h.options.hostFrameOffset=e.hostFrameOffset+1);window._AP.isSubHost||(h.options.history.state=window.location.hash?window.location.hash.substr(2):"");return h};window._AP._createSub=function(e){var h=
document.createElement("iframe"),g=(window.connectHost||window.AP).subCreate(e);g.width=e.options.width||"";g.height=e.options.height||"";g.style="border:0;";g["class"]="ap-iframe";g["data-addon-key"]=e.addon_key;g["data-key"]=e.key;delete g.src;Object.getOwnPropertyNames(g).forEach(function(e){h.setAttribute(e,g[e])});return h};window._AP.appendConnectAddon=function(e){var h=!1;try{window.top.karma&&(h=!0)}catch(B){}if(window===window.top||h)/^com\.atlassian\.(jira|confluence)\.emcee($|\.local|\.staging|\.development\..*)/g.test(e.addon_key)?
g("ac/marketplace",function(g){g&&k("connectHost",function(e){e.defineModule("marketplace",g)});v(e)},20):"com.addonengine.analytics"===e.addon_key?k("connectHost",function(g){D(g,"analytics",function(){v(e)})}):v(e);else{var l=function(g){g.source===window.top&&g.data&&void 0!==g.data.hostFrameOffset&&(window.removeEventListener("message",l),e.hostFrameOffset=g.data.hostFrameOffset,v(e))};window.addEventListener("message",l);window.top.postMessage({type:"get_host_offset"},"*")}}})();function _defineProperty(n,u,w){return u in n?Object.defineProperty(n,u,{value:w,enumerable:!0,configurable:!0,writable:!0}):n[u]=w,n}
!function(){function n(e,g){for(var h=0,l=e.length;h<l;h+=1)if(g(e[h]))return e[h]}function u(l){var q=this,A={pop:g,push:D,replace:e,change:h};if(!l.listener)throw Error("missing listener for subscription");if(!l.type)throw Error("missing type for subscription");if(!A[l.type])throw Error("invalid type for subscription");this.listener=l.listener;this.type=l.type;this.eventName=A[this.type];this.lastValue=l.lastValue;this.attribute=l.attribute;this.handler=function(e){return"string"!=typeof q.attribute?
q.listener(e):q.lastValue!==e[q.attribute]?(e.newURL=e[q.attribute],e.oldURL=q.lastValue,q.lastValue=e[q.attribute],q.listener(e)):void 0}}function w(e){return e.models=e.models||[],e.models instanceof Array||(e.models=[e.models]),e.models=e.models.map(function(e){return e instanceof u?e:new u(e)}),this.models=e.models,this}function k(e){return function(g){q.models.filter(function(g){return g.eventName===e}).forEach(function(e){e.handler(g)})}}function v(e){AP.history._registerWindowListeners();var g=
q.find("change",e);g||(g=new u({type:"change",attribute:"hash",listener:e}),q.add(g))}function y(e,g){AP.history._registerWindowListeners();var h=q.find(e,g);h||(h=new u({type:e,listener:g}),q.add(h))}function l(e,g){(e=q.find(e,g))&&q.remove(e)}var z;if(AP._hostModules.history){var g="history_popstate",D="history_pushstate",e="history_replacestate",h="history_changestate";w.prototype.add=function(e){this.models.push(e)};w.prototype.remove=function(e){this.models.splice(this.models.indexOf(e),1)};
w.prototype.find=function(e,g){return n(this.models,function(h){return h.type===e&&h.listener===g})};var q=new w({models:[]});AP.register((z={},_defineProperty(z,g,k(g)),_defineProperty(z,D,k(D)),_defineProperty(z,e,k(e)),_defineProperty(z,h,k(h)),z));AP._hostModules.history.popState=v;AP.history.popState=v;AP._hostModules.history.subscribeState=y;AP.history.subscribeState=y;AP._hostModules.history.unsubscribeState=l;AP.history.unsubscribeState=l;var B=null;AP._data.options&&AP._data.options.history&&
AP._data.options.history.state&&(B={hash:AP._data.options.history.state});AP.history.getState("all",function(e){B=e});AP.history.subscribeState("change",function(e){B=e});var H=AP._hostModules.history.getState.bind({});AP.history.getState=AP._hostModules.history.getState=function(e,g){if(g=arguments[arguments.length-1],"function"==typeof g)return"string"==typeof e?H(e,g):H(g);if(e=e||"hash","hash"===e)return B&&B.hash?B.hash:"";if("all"===e)return B;throw Error("invalid type for getState");}}}();(function(){function n(g){return"function"===typeof g}if(AP.jira){var u,w,k=function(){},v,y={onSaveValidation:function(g){w=g},onSave:function(g){u=g},trigger:function(){var g=!0;n(w)&&(g=w.call());var l;u&&(l=u.call());g={valid:g,value:g?""+l:void 0};AP.jira._submitWorkflowConfigurationResponse(g);return g}};AP.register({jira_workflow_post_function_submit:function(){y.trigger()}});AP.jira.WorkflowConfiguration=AP._hostModules.jira.WorkflowConfiguration=y;AP.register({jira_dashboard_item_edit:function(){k.call()}});
AP.jira.DashboardItem=AP._hostModules.jira.DashboardItem={onDashboardItemEdit:function(g){k=g}};var l=AP._hostModules.jira.openDatePicker.bind({});AP.jira.openDatePicker=AP._hostModules.jira.openDatePicker=function(g){if(!g.position||"object"!==typeof g.position){var k=g.element;if(!k||!k.nodeType||1!=k.nodeType)throw Error("Providing either options.position or options.element is required.");g.position={}}if(!g.onSelect||!n(g.onSelect))throw Error("options.onSelect function is a required parameter.");
g={element:g.element,position:{top:g.position.top||0,left:g.position.left||0},date:g.date,showTime:!!g.showTime,onSelect:g.onSelect};v=g.onSelect;delete g.onSelect;g.element&&(k=g.element.getBoundingClientRect(),g.position={left:k.left,top:k.top+k.height},delete g.element);l(g)};AP.register({jira_date_selected:function(g){n(v)&&v.call({},g.isoDate,g.date)}});var z=AP._hostModules.jira.openCreateIssueDialog.bind({});AP.jira.openCreateIssueDialog=AP._hostModules.jira.openCreateIssueDialog=function(g,
l){z(l,g)}}})();(function(){if(AP.dropdownList){var n={},u={},w=AP._hostModules.dropdownList.create,k=function(){var k=w();k.onSelect=function(v){n[k._id]=v};k.onHide=function(n){u[k._id]=n};return k};AP._hostModules.dropdownList.create=k;AP.dropdownList.create=k;AP.register({dropdown_list_select:function(k){var v=n[k.id];v&&v.call({},k.data)},dropdown_list_hide:function(k){(k=u[k.id])&&k.call({})}})}})();(function(){function n(l,k){var g,n;if(l)if(g=l.length,null!=g&&"function"!==typeof l)for(n=0;n<g&&!1!==k.call(l[n],n,l[n]);)n+=1;else for(n in l)if(l.hasOwnProperty(n)&&!1===k.call(l[n],n,l[n]))break}function u(l){var k=arguments,k=[].slice.call(k,1,k.length);n(k,function(g,k){n(k,function(e,g){l[e]=g})});return l}function w(l){return l instanceof Blob&&l.name?{blob:l,name:l.name,_isBlob:!0}:l}function k(l){var k=u({},l),g=l.headers||{};delete k.headers;return u(k,{getResponseHeader:function(k){var e=
null;k&&(k=k.toLowerCase(),n(g,function(g,l){if(g.toLowerCase()===k)return e=l,!1}));return e},getAllResponseHeaders:function(){var k="";n(g,function(e,g){k+=(k?"\r\n":"")+e+": "+g});return k}})}function v(l,n){return new AP._promise(function(g,u){"string"===typeof l&&("object"===typeof n?(n.url=l,l=n):l={url:l});if(l.success){var e=l.success;delete l.success;var h=l.error||function(){};delete l.error;n=function(g,l,n){!1===g?e(n,"success",k(l)):h(k(l),"error",g)}}else"function"!==typeof n&&(n=function(e,
h,l){!1===e?g({body:l,xhr:k(h)}):u({xhr:k(h),err:e})});"multipart/form-data"===l.contentType&&Object.keys(l.data).forEach(function(e){var g=l.data[e];Array.isArray(g)?g.forEach(function(g,h){l.data[e][h]=w(g)}):l.data[e]=w(g)});y(l,n)})}if(AP._hostModules&&AP._hostModules._globals&&AP._hostModules._globals.request){try{new File([],"")}catch(l){File=function(k,g,l){k=new Blob(k,l);k.name=g;k.lastModifiedDate=new Date;return k}}var y=AP._hostModules._globals.request.bind({});AP._hostModules._globals.request=
v;AP.request=v}})();AP._hostModules.user&&AP._hostModules.env&&Object.getOwnPropertyNames(AP._hostModules.user).forEach(function(n){AP[n]=AP.env[n]=AP._hostModules.env[n]=AP._hostModules.user[n]});AP.env&&(AP.getLocation=AP._hostModules._globals.getLocation=AP._hostModules.env.getLocation,AP.sizeToParent=AP._hostModules._globals.sizeToParent=AP._hostModules.env.sizeToParent);
if(AP._hostModules.dialog&&AP._hostModules.Dialog){var isCloseOnEscape=function(n){n(!AP._data.options.preventDialogCloseOnEscape)};AP._hostModules.dialog.isCloseOnEscape=AP._hostModules.Dialog.isCloseOnEscape=isCloseOnEscape;AP.dialog.isCloseOnEscape=AP.Dialog.isCloseOnEscape=isCloseOnEscape};if(AP._hostModules.confluence){var original_onMacroPropertyPanelEvent=AP._hostModules.confluence.onMacroPropertyPanelEvent.bind({});AP.confluence.onMacroPropertyPanelEvent=AP._hostModules.confluence.onMacroPropertyPanelEvent=function(n){AP.register(n);original_onMacroPropertyPanelEvent()}};
