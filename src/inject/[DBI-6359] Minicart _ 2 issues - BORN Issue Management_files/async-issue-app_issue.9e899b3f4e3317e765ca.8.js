try{window.performance.mark("async-issue-app~issue.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-issue-app~issue"],{"./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return k}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),i=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),r=s("./src/packages/platform/ui/flags/src/index.js"),o=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),c=s("./src/packages/issue/attachments/issue-attachments-base/src/services/constants.js"),l=s("./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js"),u=s("./node_modules/react-sweet-state/lib/esm/index.js"),d=s("./src/packages/issue/attachments/issue-attachments-base/src/services/index.js");const p=Object(u.c)(d.a,{selector:e=>e.isFetching}),m=Object(u.c)(d.a,{selector:e=>e.meta.orderDirection}),b=Object(u.c)(d.a,{selector:e=>e.meta.orderField}),f=Object(u.c)(d.a,{selector:e=>e.totalCount}),g=Object(u.c)(d.a,{selector:e=>e.meta.startAt}),h=Object(u.c)(d.a,{selector:e=>e.visibleAttachments});function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){j(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const E=()=>"\n  query attachmentsQuery($issueKey: String, $startAt: Long, $maxResults: Long, $orderField: AttachmentsOrderField, $orderDirection: OrderDirection) {\n    viewIssue(issueKey: $issueKey) {\n        attachments(startAt: $startAt, maxResults: $maxResults, orderField: $orderField, orderDirection: $orderDirection) {\n            nodes {\n                id\n                filename\n                mimetype\n                mediaApiFileId\n                createdDate\n                filesize\n                parentName\n                parentId\n                author {\n                    accountId\n                }\n            }\n            totalCount\n        }\n    }\n  }",v={startAt:0,maxResults:6,orderField:c.d,orderDirection:c.c},k=(e,t)=>{const[s,{setIsFetching:u}]=p(),[d,{setOrderDirection:y}]=m(),[j,{setOrderField:k}]=b(),[w,{setStartAt:S}]=g(),[I,{setTotalCount:C}]=f(),[T,{setVisibleAttachments:P}]=h(),{showFlag:_}=Object(r.useFlagsService)(),x=Object(o.e)(),[D,A]=Object(n.useState)(null),M=Object(n.useCallback)(async(e,t)=>{u(!0),A(null);try{const s=await(async(e,t,s)=>{var n,a;const r=O(O({},v),s),o=await Object(i.d)(`${t}/rest/gira/1/`,{body:JSON.stringify({query:E(),variables:O({issueKey:e},r)})}),c=null==o||null===(n=o.data)||void 0===n||null===(a=n.viewIssue)||void 0===a?void 0:a.attachments;return c&&c.nodes&&void 0!==c.totalCount?o.data.viewIssue.attachments:null})(e,x,t);if(s)C(s.totalCount),P(s.nodes),y((null==t?void 0:t.orderDirection)||c.c),k((null==t?void 0:t.orderField)||c.d),S((null==t?void 0:t.startAt)||0);else{const e="Failed to fetch issue attachments";A(new Error(e)),a.a.safeError("issue.attachments.fetch-attachments",e)}}catch(e){A(e),a.a.safeError("issue.attachments.fetch-attachments",e.toString())}u(!1)},[x,u,y,k,S,C,P]),L=Object(n.useCallback)((e,t)=>{(!s||t&&t.startAt!==w)&&M(e,t)},[M,s,w]),R=Object(n.useCallback)(async(e,t,s)=>{if(void 0!==I){P(T.filter(e=>e.id!==t)),C(I-1);try{await(async(e,t)=>Object(i.a)(`${e}/rest/api/2/attachment/${t}`))(x,t),M(e,s)}catch(t){_({type:"error",title:l.a.deleteFailedTitle,description:l.a.deleteFailedDescription}),M(e,s)}}},[x,M,C,P,_,I,T]);return Object(n.useEffect)(()=>{void 0!==I||s||D||M(e,t)},[D,M,e,s,t,I]),[{error:D,meta:{orderDirection:d,orderField:j,startAt:w},value:{attachments:T,totalCount:I||0},loading:s},{deleteAttachment:R,refreshAttachments:L,setOrderDirection:y,setOrderField:k,setTotalCount:C,setVisibleAttachments:P}]}},"./src/packages/issue/attachments/issue-attachments-base/src/services/constants.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"d",(function(){return o}));const n="issue",a={comment:"comment",worklog:"worklog",description:"description",environment:"environment",customfield:"customfield",issue:n},i="DESC",r={FILENAME:"FILENAME",CREATED:"CREATED",FILESIZE:"FILESIZE",MIMETYPE:"MIMETYPE"},o=r.CREATED},"./src/packages/issue/attachments/issue-attachments-base/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var n={};s.r(n),s.d(n,"setIsDownloading",(function(){return b})),s.d(n,"setIsFetching",(function(){return c})),s.d(n,"setOrderDirection",(function(){return l})),s.d(n,"setOrderField",(function(){return u})),s.d(n,"setStartAt",(function(){return p})),s.d(n,"setTotalCount",(function(){return d})),s.d(n,"setVisibleAttachments",(function(){return m}));var a=s("./node_modules/react-sweet-state/lib/esm/index.js");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=e=>({setState:t})=>{t({isFetching:e})},l=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:r(r({},n),{},{orderDirection:e})})},u=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:r(r({},n),{},{orderField:e})})},d=e=>({setState:t})=>{t({totalCount:e})},p=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:r(r({},n),{},{startAt:e})})},m=e=>({setState:t})=>{t({visibleAttachments:e})},b=(e,t)=>({setState:e})=>{e({isDownloading:t})};var f=s("./src/packages/issue/attachments/issue-attachments-base/src/services/constants.js");const g=Object(a.d)({name:"issue-attachments",initialState:{isDownloading:!1,isFetching:!1,totalCount:void 0,visibleAttachments:[],meta:{orderDirection:f.c,orderField:f.d,startAt:0}},actions:n})},"./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({gotIt:{id:"issue-attachments-base.services.got-it",defaultMessage:"Got it"},tryAgain:{id:"issue-attachments-base.services.try-again",defaultMessage:"Try again"},downloadStartTitle:{id:"issue-attachments-base.services.download-start-title",defaultMessage:"Downloading attachments"},downloadStartDescription:{id:"issue-attachments-base.services.download-start-description",defaultMessage:"This might take a while. When we\u2019re done, your attachments will be in a zip file on your device."},downloadFailedTitle:{id:"issue-attachments-base.services.download-failed-title",defaultMessage:"We couldn\u2019t download your attachments"},downloadFailedDescription:{id:"issue-attachments-base.services.download-failed-description",defaultMessage:"We didn\u2019t finish downloading your attachments for {issueKey}. Check your connection and then try again."},downloadFailedExceedFileSizeDescription:{id:"issue-attachments-base.services.download-failed-exceed-file-size-description",defaultMessage:"The total size of {issueKey}'s attachments is too large to download. Try downloading each attachment individually."},deleteFailedTitle:{id:"issue-attachments-base.services.delete-failed-title",defaultMessage:"Attachment could not be deleted"},deleteFailedDescription:{id:"issue-attachments-base.services.delete-failed-description",defaultMessage:"There was a connection problem and the attachment was not successfully deleted. Try checking your network connection."}})},"./src/packages/issue/attachments/issue-attachments-table/src/ui/empty/assets/cloud.svg":function(e,t,s){e.exports=s.p+"assets/cloud.45c69da8a128cc239c19035695bab30d.8.svg"},"./src/packages/issue/attachments/issue-attachments-table/src/ui/error/assets/search.svg":function(e,t,s){e.exports=s.p+"assets/search.1cc781b7e8848ea0f1d2dc40004f854f.8.svg"},"./src/packages/issue/changeboarding/src/ui/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/onboarding-wrapper/index.js");const r=e=>e.currentStep===e.totalSteps,o=e=>e.currentStep===e.totalSteps-1;var c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const l=()=>Object(c.b)("issue.details.opt-back-in",!1);var u=s("./node_modules/@atlaskit/onboarding/dist/esm/components/Spotlight.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),p=s("./node_modules/react-intl/lib/index.es.js"),m=Object(p.defineMessages)({next:{id:"issue-changeboarding.simple-spotlight.next",defaultMessage:"Next"},done:{id:"issue-changeboarding.simple-spotlight.done",defaultMessage:"Done"}});const b=({context:e,dialogWidth:t=37.5*d.e,name:s,targetReplacement:n,targetNode:i,children:r,intl:c,image:p,placement:b,onPrimaryActionClick:f,getAdditionalActions:g,targetBgColor:h="white",targetRadius:y=d.a,pulse:O=!0})=>a.a.createElement(u.a,{actions:[{onClick:f,text:c.formatMessage(o(e)?m.done:m.next)},...l()&&g&&g(e.currentStep+1,s)||[]],dialogPlacement:b,key:s,target:s,targetReplacement:n,targetNode:i,actionsBeforeElement:`${e.currentStep+1}/${e.totalSteps}`,dialogWidth:t,image:p,targetBgColor:h,targetRadius:y,pulse:O},r);b.displayName="SimpleSpotlight";var f=b;const g=({isTourActive:e,recipe:t,recipeContext:s,onTourEnd:o,onAdvanceStep:c,intl:u})=>{const d=t.stepsForContext(s),[p,m]=Object(n.useState)(0),b=Object(n.useMemo)(()=>({currentStep:p,totalSteps:d.length,advanceStep:()=>m(e=>(null==c||c(e,d[e]),e+1))}),[m,d,p,c]);if(Object(n.useEffect)(()=>{r(b)&&(m(0),o(s))},[o,s,b]),!e||r(b))return null;const g=d[b.currentStep],h=t.steps[g](s),y=l()&&h.content||u.formatMessage(h.message),O=a.a.createElement(f,{context:b,intl:u,onPrimaryActionClick:b.advanceStep,name:g,placement:h.placement,targetReplacement:h.targetReplacement,targetNode:h.targetNode,image:h.image,dialogWidth:h.dialogWidth,getAdditionalActions:h.additionalAction},y);return a.a.createElement(i.a,{shouldRender:e},O)};g.displayName="Changeboarding";t.a=g},"./src/packages/issue/epic-color/src/common/constants.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"k",(function(){return o})),s.d(t,"j",(function(){return c})),s.d(t,"h",(function(){return l})),s.d(t,"i",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"e",(function(){return p})),s.d(t,"f",(function(){return m})),s.d(t,"c",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"a",(function(){return g}));var n=s("./node_modules/lodash/invert.js"),a=s.n(n),i=s("./node_modules/@atlaskit/theme/dist/esm/index.js");const r={PURPLE:i.a.P200,BLUE:i.a.B200,GREEN:i.a.G200,TEAL:i.a.T200,YELLOW:i.a.Y200,ORANGE:i.a.R200,GREY:i.a.N200,DARK_PURPLE:i.a.P400,DARK_BLUE:i.a.B400,DARK_GREEN:i.a.G400,DARK_TEAL:i.a.T400,DARK_YELLOW:i.a.Y400,DARK_ORANGE:i.a.R400,DARK_GREY:i.a.N700},o=a()(r),c={purple:"PURPLE",dark_purple:"DARK_PURPLE",blue:"BLUE",dark_blue:"DARK_BLUE",green:"GREEN",dark_green:"DARK_GREEN",teal:"TEAL",dark_teal:"DARK_TEAL",yellow:"YELLOW",dark_yellow:"DARK_YELLOW",orange:"ORANGE",dark_orange:"DARK_ORANGE",grey:"GREY",dark_grey:"DARK_GREY"},l=a()(c),u={"ghx-label-1":"DARK_GREY","ghx-label-2":"DARK_YELLOW","ghx-label-3":"YELLOW","ghx-label-4":"DARK_BLUE","ghx-label-5":"DARK_TEAL","ghx-label-6":"GREEN","ghx-label-7":"PURPLE","ghx-label-8":"DARK_PURPLE","ghx-label-9":"ORANGE","ghx-label-10":"BLUE","ghx-label-11":"TEAL","ghx-label-12":"GREY","ghx-label-13":"DARK_GREEN","ghx-label-14":"DARK_ORANGE"},d=a()(u),p={color_1:"DARK_GREY",color_2:"DARK_YELLOW",color_3:"YELLOW",color_4:"DARK_BLUE",color_5:"DARK_TEAL",color_6:"GREEN",color_7:"PURPLE",color_8:"DARK_PURPLE",color_9:"ORANGE",color_10:"BLUE",color_11:"TEAL",color_12:"GREY",color_13:"DARK_GREEN",color_14:"DARK_ORANGE"},m=a()(p),b={"ghx-label-1":"color_1","ghx-label-2":"color_2","ghx-label-3":"color_3","ghx-label-4":"color_4","ghx-label-5":"color_5","ghx-label-6":"color_6","ghx-label-7":"color_7","ghx-label-8":"color_8","ghx-label-9":"color_9","ghx-label-10":"color_10","ghx-label-11":"color_11","ghx-label-12":"color_12","ghx-label-13":"color_13","ghx-label-14":"color_14"},f={color_1:"grey",color_2:"yellow",color_3:"yellowLight",color_4:"blue",color_5:"teal",color_6:"greenLight",color_7:"purpleLight",color_8:"purple",color_9:"redLight",color_10:"blueLight",color_11:"tealLight",color_12:"greyLight",color_13:"green",color_14:"red"},g={PURPLE:{primary:i.a.P200,secondary:i.a.P500,text:i.a.P500,textBackground:i.a.P50,border:i.a.P400,line:i.a.P300,primaryGradient:i.a.P75,hasContrastSecondaryGradient:!0},BLUE:{primary:i.a.B200,secondary:i.a.B500,text:i.a.B500,textBackground:i.a.B50,border:i.a.B400,line:i.a.B300,primaryGradient:i.a.B75,hasContrastSecondaryGradient:!0},GREEN:{primary:i.a.G200,secondary:i.a.G500,text:i.a.G500,textBackground:i.a.G50,border:i.a.G400,line:i.a.G300,primaryGradient:i.a.G75,hasContrastSecondaryGradient:!0},TEAL:{primary:i.a.T200,secondary:i.a.T500,text:i.a.T500,textBackground:i.a.T50,border:i.a.T400,line:i.a.T300,primaryGradient:i.a.T75,hasContrastSecondaryGradient:!0},YELLOW:{primary:i.a.Y200,secondary:i.a.Y500,text:i.a.Y500,textBackground:i.a.Y50,border:i.a.Y400,line:i.a.Y300,primaryGradient:i.a.Y75,hasContrastSecondaryGradient:!0},ORANGE:{primary:i.a.R200,secondary:i.a.R500,text:i.a.R500,textBackground:i.a.R50,border:i.a.R400,line:i.a.R300,primaryGradient:i.a.R75,hasContrastSecondaryGradient:!0},GREY:{primary:i.a.N200,secondary:i.a.N500,text:i.a.N500,textBackground:i.a.N30,border:i.a.N700,line:i.a.N500,primaryGradient:i.a.N50,hasContrastSecondaryGradient:!0},DARK_PURPLE:{primary:i.a.P400,secondary:i.a.P200,text:i.a.N0,textBackground:i.a.P400,border:i.a.P100,line:i.a.P300,primaryGradient:i.a.P100,hasContrastSecondaryGradient:!1},DARK_BLUE:{primary:i.a.B400,secondary:i.a.B200,text:i.a.N0,textBackground:i.a.B400,border:i.a.B200,line:i.a.B100,primaryGradient:i.a.B100,hasContrastSecondaryGradient:!1},DARK_GREEN:{primary:i.a.G400,secondary:i.a.G200,text:i.a.N0,textBackground:i.a.G400,border:i.a.G200,line:i.a.G300,primaryGradient:i.a.G200,hasContrastSecondaryGradient:!1},DARK_TEAL:{primary:i.a.T400,secondary:i.a.T200,text:i.a.N0,textBackground:i.a.T400,border:i.a.T200,line:i.a.T300,primaryGradient:i.a.T100,hasContrastSecondaryGradient:!1},DARK_YELLOW:{primary:i.a.Y400,secondary:i.a.Y200,text:i.a.N0,textBackground:i.a.Y400,border:i.a.Y200,line:i.a.Y300,primaryGradient:i.a.Y100,hasContrastSecondaryGradient:!1},DARK_ORANGE:{primary:i.a.R400,secondary:i.a.R200,text:i.a.N0,textBackground:i.a.R400,border:i.a.R100,line:i.a.R300,primaryGradient:i.a.R100,hasContrastSecondaryGradient:!1},DARK_GREY:{primary:i.a.N700,secondary:i.a.N300,text:i.a.N0,textBackground:i.a.N500,border:i.a.N100,line:i.a.N500,primaryGradient:i.a.N100,hasContrastSecondaryGradient:!1}}},"./src/packages/issue/epic-color/src/common/types.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));const n="PURPLE",a={PURPLE:n,DARK_PURPLE:"DARK_PURPLE",BLUE:"BLUE",DARK_BLUE:"DARK_BLUE",GREEN:"GREEN",DARK_GREEN:"DARK_GREEN",TEAL:"TEAL",DARK_TEAL:"DARK_TEAL",YELLOW:"YELLOW",DARK_YELLOW:"DARK_YELLOW",ORANGE:"ORANGE",DARK_ORANGE:"DARK_ORANGE",GREY:"GREY",DARK_GREY:"DARK_GREY"},i={SERVER_PURPLE:"purple",SERVER_DARK_PURPLE:"dark_purple",SERVER_BLUE:"blue",SERVER_DARK_BLUE:"dark_blue",SERVER_GREEN:"green",SERVER_DARK_GREEN:"dark_green",SERVER_TEAL:"teal",SERVER_DARK_TEAL:"dark_teal",SERVER_YELLOW:"yellow",SERVER_DARK_YELLOW:"dark_yellow",SERVER_ORANGE:"orange",SERVER_DARK_ORANGE:"dark_orange",SERVER_GREY:"grey",SERVER_DARK_GREY:"dark_grey"},r={GHX_LABEL_1:"ghx-label-1",GHX_LABEL_2:"ghx-label-2",GHX_LABEL_3:"ghx-label-3",GHX_LABEL_4:"ghx-label-4",GHX_LABEL_5:"ghx-label-5",GHX_LABEL_6:"ghx-label-6",GHX_LABEL_7:"ghx-label-7",GHX_LABEL_8:"ghx-label-8",GHX_LABEL_9:"ghx-label-9",GHX_LABEL_10:"ghx-label-10",GHX_LABEL_11:"ghx-label-11",GHX_LABEL_12:"ghx-label-12",GHX_LABEL_13:"ghx-label-13",GHX_LABEL_14:"ghx-label-14"},o={AGILE_COLOR_1:"color_1",AGILE_COLOR_2:"color_2",AGILE_COLOR_3:"color_3",AGILE_COLOR_4:"color_4",AGILE_COLOR_5:"color_5",AGILE_COLOR_6:"color_6",AGILE_COLOR_7:"color_7",AGILE_COLOR_8:"color_8",AGILE_COLOR_9:"color_9",AGILE_COLOR_10:"color_10",AGILE_COLOR_11:"color_11",AGILE_COLOR_12:"color_12",AGILE_COLOR_13:"color_13",AGILE_COLOR_14:"color_14"}},"./src/packages/issue/epic-color/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return d})),s.d(t,"a",(function(){return p})),s.d(t,"k",(function(){return m})),s.d(t,"h",(function(){return b})),s.d(t,"f",(function(){return f})),s.d(t,"j",(function(){return g})),s.d(t,"i",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"d",(function(){return O})),s.d(t,"g",(function(){return E}));var n=s("./node_modules/lodash/invert.js"),a=s.n(n),i=s("./src/packages/issue/epic-color/src/common/constants.js"),r=s("./src/packages/issue/epic-color/src/common/types.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=e=>{if(null==e)return r.c.PURPLE;if(e in r.c)return e;const t=i.j[e];if(t)return t;const s=i.e[e];if(s)return s;const n=i.i[e];return n||r.c.PURPLE},d=e=>{if(null==e)return r.e.SERVER_PURPLE;if(e in r.e)return e;const t=i.h[e];if(t)return t;const s=i.h[i.e[e]];if(s)return s;const n=i.h[i.i[e]];return n||r.e.SERVER_PURPLE},p=e=>{if(null===e)return i.g[r.c.PURPLE];if(e in r.b)return e;const t=i.g[e];if(t)return t;const s=i.g[i.j[e]];if(s)return s;const n=i.g[i.e[e]];return n||i.g[r.c.PURPLE]},m=(e,t)=>{const s=c(c({},i.a),t);return(t?Object.keys(t).concat(Object.keys(r.c)):Object.keys(r.c)).reduce((t,n)=>c(c({},t),{},{[n]:e(s[n])}),{})},b=e=>i.d[e]||i.d.PURPLE,f=e=>a()(i.d)[e]||"PURPLE",g=e=>""!==e&&null!=e&&i.j[e]?i.j[e]:"PURPLE",h=e=>i.h[e],y=e=>""!==e&&null!=e&&i.i[e]?i.i[e]:"PURPLE",O=e=>i.g[e],j=m(e=>e.primary),E=()=>[{label:"purple",value:j[r.c.PURPLE]},{label:"blue",value:j[r.c.BLUE]},{label:"green",value:j[r.c.GREEN]},{label:"teal",value:j[r.c.TEAL]},{label:"yellow",value:j[r.c.YELLOW]},{label:"orange",value:j[r.c.ORANGE]},{label:"grey",value:j[r.c.GREY]},{label:"darkPurple",value:j[r.c.DARK_PURPLE]},{label:"darkBlue",value:j[r.c.DARK_BLUE]},{label:"darkGreen",value:j[r.c.DARK_GREEN]},{label:"darkTeal",value:j[r.c.DARK_TEAL]},{label:"darkYellow",value:j[r.c.DARK_YELLOW]},{label:"darkOrange",value:j[r.c.DARK_ORANGE]},{label:"darkGrey",value:j[r.c.DARK_GREY]}]},"./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");t.a=({issueKey:e,onSuccess:t})=>{const s=o.c,[n]=Object(i.a)(e,s),c=a()(n,"schema.type","user"),[{value:l,error:u},{saveValue:d,resetError:p}]=Object(r.a)({fieldKey:s,issueKey:e,fieldType:c,initialValue:null,onSuccess:t});return[{value:l,error:u,fieldConfig:n},{saveValue:d,resetError:p}]}},"./src/packages/issue/fields/cascading-select-custom-field/src/common/utils.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"d",(function(){return l}));const r=e=>{if(!e)return null;const{id:t,value:s,child:n}=e;return{value:t,label:s,child:n&&{value:n.id,label:n.value}}},o=e=>e.map(({id:e,value:t})=>({value:e,label:t})),c=e=>e.reduce((e,{id:t,children:s})=>a(a({},e),{},{[t]:s?o(s):[]}),{}),l=e=>{if(!e)return null;const{label:t,value:s}=e,n=e.child||void 0;return{id:s,value:t,child:n&&{id:n.value,value:n.label}}}},"./src/packages/issue/fields/cascading-select-custom-field/src/ui/cascading-select-view/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/@atlaskit/form--current/dist/esm/Messages.js"),o=s("./node_modules/@atlaskit/select/dist/esm/Select.js"),c=Object(i.defineMessages)({noOptionsSelected:{id:"issue-field-cascading-select.cascading-select-view.no-options-selected",defaultMessage:"None"},errorMessage:{id:"issue-field-cascading-select.cascading-select-view.error-message",defaultMessage:"The value could not be saved"}}),l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const d=l.default.div(["display:flex;flex-direction:",";"],e=>e.areOptionsOnSameRow?"row":"column"),p=l.default.div(["flex-basis:0;flex-grow:1;"]),m=Object(l.default)(p)(["margin-top:",";margin-left:",";"],e=>e.areOptionsOnSameRow?0:`${u.e/2}px`,e=>e.areOptionsOnSameRow?`${u.e/2}px`:0),b=(e,t)=>!e||0===t.length;function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t.a=Object(i.injectIntl)(e=>{const{value:t,allowedValues:s,allowedChildValues:i,onChange:l,isInvalid:u=!1,areOptionsOnSameRow:f=!1,intl:h,autoFocus:y=!0}=e,[O,j]=(e=>{if(!e)return[null,null];const{label:t,value:s}=e;return[{label:t,value:s},e.child||null]})(t),[E,v]=Object(n.useState)(O),[k,w]=Object(n.useState)(j),[S,I]=Object(n.useState)(O&&i[O.value]||[]),[C,T]=Object(n.useState)(b(t,S)),P=Object(n.useRef)(null);return a.a.createElement(a.a.Fragment,null,u&&a.a.createElement(r.a,null,h.formatMessage(c.errorMessage)),a.a.createElement(d,{areOptionsOnSameRow:f},a.a.createElement(p,null,a.a.createElement(o.a,{defaultValue:O,value:E,options:s,onChange:(e,{action:s},n)=>{switch(w(null),s){case"select-option":l(e,null,n),v(e),I(i[e.value]||[]),T(b(t,S)),P&&P.current&&P.current.focus();break;case"clear":l(null,null,n),v(null),I([])}},isClearable:!0,autoFocus:y,openMenuOnFocus:!0,placeholder:h.formatMessage(c.noOptionsSelected)})),S.length>0&&a.a.createElement(m,{areOptionsOnSameRow:f},a.a.createElement(o.a,{defaultValue:j,value:k,options:S,onChange:(e,{action:t},s)=>{switch(t){case"select-option":l(g(g({},E),{},{child:e}),null,s),w(e);break;case"clear":l(E,null,s),w(null)}},isClearable:!0,autoFocus:C,openMenuOnFocus:!0,placeholder:h.formatMessage(c.noOptionsSelected),ref:P}))))})},"./src/packages/issue/fields/components/error-flag/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),r=s("./src/packages/platform/ui/flags/src/index.js");const o=({error:e,title:t,description:s})=>{if(!e)return null;if(e instanceof i.a){const n=e.message||e.errors&&e.errors[0]&&e.errors[0].error||s;return(a.a.createElement(r.FlagRenderer,{flag:{type:"warning",title:t,description:n}}))}return(a.a.createElement(r.FlagRenderer,{flag:{type:"error",title:t,description:s}}))};o.displayName="ErrorFlag"},"./src/packages/issue/fields/components/field-heading/src/styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"h",(function(){return b})),s.d(t,"c",(function(){return g})),s.d(t,"f",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"b",(function(){return j})),s.d(t,"a",(function(){return E}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),r=s("./src/packages/issue/fields/components/field-pin/src/styled.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js");const c=Object(n.keyframes)(["from{opacity:0;}to{opacity:1;}"]),l=Object(n.keyframes)(["from{opacity:1;}to{opacity:0;}"]),u=Object(n.css)(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),d=n.default.div(["display:flex;flex-wrap:wrap;margin-bottom:",";",""],()=>Object(o.isSideBySideLabelsAndFieldsEnabled)()?`${2*i.e}px;`:`${1.5*i.e}px;`,()=>Object(o.isSideBySideLabelsAndFieldsEnabled)()?"word-break: break-word;":""),p=n.default.div(["& > div > div > div > div > div > div{min-height:","px;}& > div > div > div > div > div > div > div{"," ","}flex-grow:1;width:","%;box-sizing:border-box;"],4*i.e,e=>e.isEditing?"":`padding: 0 0 0 ${.75*i.e}px;`,e=>!e.isEditing&&e.fixedHeight?`height: ${4*i.e}px`:"",66.67),m=Object(n.css)(["","{visibility:hidden;animation:"," 0.15s linear forwards;}:hover ","{visibility:visible;animation:"," 0.15s linear forwards;}"],r.a,l,r.a,c),b=Object(n.css)([""," position:relative;flex-grow:1;box-sizing:border-box;padding-right:","px;min-width:","px;width:","%;padding-top:","px;max-width:","px;line-height:1;"],m,3*i.e,15*i.e,33.33,i.e,22.5*i.e),f=Object(n.css)([""," margin-bottom:","px !important;display:flex;align-items:center;"],m,.5*i.e),g=n.default.h2([""," ",";color:",";"],()=>Object(o.isSideBySideLabelsAndFieldsEnabled)()?"box-sizing: border-box;font-weight: 500;":`${u}`,a.c.h200(),a.a.N800),h=n.default.h2([""," ",";",";color:",";"],()=>Object(o.isSideBySideLabelsAndFieldsEnabled)()?"font-weight: 500;":"",u,a.c.h200(),a.a.N800),y=n.default.div(["",""],f),O=Object(n.css)(["","{display:inline;}","{display:inline;position:absolute;"],g,r.a),j=n.default.div([""," ",""],()=>Object(o.isSideBySideLabelsAndFieldsEnabled)()?b:f,O),E=n.default.div(["height:","px;margin-left:","px;margin-right:-","px;margin-top:-","px;position:relative;"],3*i.e,.25*i.e,.25*i.e,.5*i.e);i.e,i.e},"./src/packages/issue/fields/components/field-pin/src/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return k})),s.d(t,"a",(function(){return w}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/platform/ui/flags/src/index.js"),o=s("./node_modules/@atlaskit/analytics-next/dist/esm/useAnalyticsEvents.js"),c=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),l=s("./node_modules/@atlaskit/icon/cjs/index.js"),u=s.n(l),d=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js"),p=s("./src/packages/platform/controllers/intl/src/index.js");const m=()=>a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},a.a.createElement("path",{fill:"currentColor",d:"M5.48121736,7.00404408 L7.59617451,4.89248498 C7.83826329,4.65078605 7.83826329,4.2589269 7.59617451,4.01722797 L7.45004745,3.8713518 C7.28862892,3.71022438 7.28862892,3.44898234 7.45004745,3.28784713 L8.61890792,2.12084557 C8.78032645,1.95971814 9.04199766,1.95971814 9.20333816,2.12084557 L13.8789361,6.78886738 C14.0403546,6.94999481 14.0403546,7.21123684 13.8789361,7.37239542 L12.7100756,8.53937361 C12.5486571,8.70053219 12.2869859,8.70053219 12.1255674,8.53937361 L11.9795183,8.39348187 C11.7374295,8.15178294 11.3449227,8.15178294 11.102834,8.39348187 L8.9878534,10.5050565 C8.74576463,10.7467555 8.74576463,11.1385523 8.9878534,11.3802512 L9.57236166,11.9638182 C9.73370217,12.1248989 9.73370217,12.3861487 9.57236166,12.5473073 L8.40342317,13.7142855 C8.24208266,13.8754441 7.98041145,13.8754441 7.81899293,13.7142855 L5.48655377,11.3856258 L2.99050379,13.8776251 C2.91356278,13.9544266 2.8093702,13.9978903 2.70055118,13.9985135 L2.42647516,14 C2.20319644,14.0012397 2.01932444,13.8251258 2.0112106,13.6023547 L2.00027253,13.3019252 C1.99610639,13.187346 2.03985869,13.076272 2.12104386,12.9951864 L4.60989281,10.5103532 L2.26677303,8.17102227 C2.10538571,8.00986368 2.10538571,7.74861386 2.26677303,7.58753317 L3.43565691,6.42050825 C3.59705203,6.25938082 3.85871544,6.25938082 4.02010275,6.42050825 L4.6045486,7.00404408 C4.84663737,7.245743 5.23912858,7.245743 5.48121736,7.00404408 Z"}));m.displayName="PinFilled";var b=m;const f=()=>a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},a.a.createElement("path",{fill:"currentColor",d:"M3.58176938,7.87928392 L8.11122851,12.4014141 L8.25734637,12.2555315 L8.18428744,12.1825901 C7.49835823,11.4978426 7.49835823,10.387565 8.18428744,9.70273982 L10.299184,7.5911928 C10.8579797,7.03331193 11.6995968,6.9299201 12.363196,7.28100178 L12.563933,7.08062671 L8.9111421,3.43373045 L8.71048291,3.63410553 C9.06208387,4.29665994 8.95852537,5.13692246 8.39972959,5.6948111 L6.28483307,7.80634258 C5.59890386,8.4911678 4.48684425,8.4911678 3.80093838,7.80634258 L3.72787945,7.73340123 L3.58176938,7.87928392 Z M5.48118484,7.00402665 L7.59615917,4.8924874 C7.83821064,4.65079444 7.83821064,4.25893086 7.59615917,4.01723789 L7.45004131,3.87135521 C7.28867366,3.71023174 7.28867366,3.44898677 7.45004131,3.28785554 L8.61890638,2.12084842 C8.78035183,1.95971719 9.04201017,1.95971719 9.20337782,2.12084842 L13.8789159,6.78887687 C14.0403614,6.9500081 14.0403614,7.21125308 13.8789159,7.37238431 L12.7100508,8.53940696 C12.5486832,8.70051489 12.2870249,8.70051489 12.1255794,8.53940696 L11.9794615,8.39352427 C11.7374101,8.1517847 11.3448837,8.1517847 11.1028322,8.39352427 L8.98785786,10.5050169 C8.74580639,10.7467565 8.74580639,11.1385735 8.98785786,11.380313 L9.5723293,11.9638438 C9.73369695,12.1249517 9.73369695,12.3861889 9.5723293,12.5472968 L8.40346423,13.7143583 C8.24201878,13.8754662 7.98036044,13.8754662 7.81899279,13.7143583 L5.48655339,11.3856729 L2.99050556,13.8776413 C2.91355638,13.9544666 2.80936765,13.9978896 2.70054953,13.9985111 L2.4264735,14 C2.20319639,14.0012299 2.01931974,13.8252074 2.01121246,13.6024217 L2.00027307,13.3019562 C1.99610272,13.1873785 2.03985249,13.0762963 2.12104205,12.9951986 L4.60988514,10.5103768 L2.26677088,8.17104929 C2.10537989,8.00994136 2.10537989,7.74862648 2.26677088,7.58752632 L3.4356593,6.42051921 C3.59705028,6.25938797 3.85870862,6.25938797 4.02009961,6.42051921 L4.60454771,7.00402665 C4.8466303,7.24571961 5.23912559,7.24571961 5.48118484,7.00402665 Z"}));f.displayName="PinUnfilled";var g=f,h=s("./node_modules/react-intl/lib/index.es.js"),y=Object(h.defineMessages)({pinField:{id:"issue-field-pin.pin-field",defaultMessage:"Pin to top"},unpinField:{id:"issue-field-pin.unpin-field",defaultMessage:"Unpin"},fieldPinned:{id:"issue-field-pin.field-pinned",defaultMessage:"{fieldLabel} pinned to top."},errorTooManyPinnedTitle:{id:"issue-field-pin.error-too-many-pinned-title",defaultMessage:"Too many pinned fields"},errorTooManyPinnedText:{id:"issue-field-pin.error-too-many-pinned-text",defaultMessage:"You've reached the maximum number of fields you can pin in this project. Please unpin a field first, to pin this field to the top"}}),O=s("./src/packages/issue/fields/components/field-pin/src/styled.js");const j=Object(n.memo)(e=>{const{isPinned:t=!1,onClick:s}=e,{formatMessage:n}=Object(p.c)(),i=n(t?y.unpinField:y.pinField),r=t?b:g,o=t?O.b:O.c;return a.a.createElement(O.a,{"data-test-id":"issue-field-pin.field-pin",onClick:s},a.a.createElement(d.a,{content:i},a.a.createElement(o,{className:"issue-details-pin-icon-wrapper"},a.a.createElement(u.a,{label:i,glyph:r}))))});j.displayName="FieldPin";var E=j,v=s("./src/packages/issue/fields/components/field-pin/src/utils.js");const k=e=>{const{issueKey:t,fieldId:s,label:n="",contextItemCategories:i}=e,[l,u]=Object(v.e)(t),{createAnalyticsEvent:d}=Object(o.a)(),{showFlag:p}=Object(r.useFlagsService)();if(!t)return null;const m=Object(v.c)(l,s);return a.a.createElement(E,{onClick:()=>{const e=[...l];let t=-1;m?(t=e.indexOf(s),e.splice(t,1)):e.push(s);const a=u(e);(({isPinned:e,newPinnedFieldLength:t,pinnedFieldPosition:n,setPinSuccess:a,savedFieldIdLength:r})=>{if(void 0===i)return;const{primary:o,secondary:l}=i,u=o.concat(l).findIndex(({id:e})=>e===s),p=u>=o.length,m={isPinned:e,newPinnedFieldCount:t,totalFieldCount:o.length+l.length,originalPinnedFieldPosition:u,pinnedFieldPosition:n,isUnderShowMore:p,setPinSuccess:a,savedFieldIdLength:r},b=d({action:"clicked",actionSubject:"button",actionSubjectId:"pinnedFieldButton"});Object(c.h)(b,"pinnedFields",m)})({isPinned:!m,newPinnedFieldLength:e.length,pinnedFieldPosition:m?t:e.indexOf(s),setPinSuccess:a,savedFieldIdLength:Object(v.b)(e).length}),m||p(a?{type:"success",title:[y.fieldPinned,{fieldLabel:n}]}:{title:y.errorTooManyPinnedTitle,description:y.errorTooManyPinnedText,type:"error"})},isPinned:m})};k.displayName="UnconnectedFieldPin";const w=Object(i.b)(e=>({issueKey:Object(v.d)(e),contextItemCategories:Object(v.a)(e)}),{})(k)},"./src/packages/issue/fields/components/field-pin/src/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return c}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=n.default.div(["cursor:pointer;margin-left:","px;flex-shrink:0;"],.25*i.e),o=n.default.div(["color:",";&:hover{color:",";}"],a.a.Y300,a.a.Y200),c=n.default.div(["color:",";&:hover{color:",";}"],a.a.N80,a.a.N800)},"./src/packages/issue/fields/components/field-pin/src/utils.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"e",(function(){return b})),s.d(t,"f",(function(){return f}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/issue/user-preferences-services/src/main.js"),o=s("./src/packages/issue/user-preferences-services/src/feature-flags.js");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const u=e=>{const t=e.context.issueKey;return Object(i.l)(null!=t?t:"")},d=e=>e.context.contextItemCategories,p=(e,t)=>!(!e||!Array.isArray(e||!t))&&e.includes(t),m=e=>0===e.filter(e=>"string"==typeof e&&""!==e).length?"null":e.join(","),b=e=>{const t=(e=>e?`jira.user.issue.details.pinned-fields.${e}`:"jira.user.issue.details.pinned-fields")((e=>Object(i.q)((e||"").split("-")[0]))(e)),[s,n]=Object(r.b)(t);return[(e=>null==e||""===e||"null"===e?[]:e.trim().split(","))(s),e=>{const t=m(e);return Object(o.a)()&&"function"!=typeof n?e.length>0?!(t.length>255)&&(n.setValue(t),!0):(n.deleteValue(),!0):"function"==typeof n&&(!(t.length>255)&&(n(t),!0))}]},f=e=>t=>{const{issueKey:s}=t,n=l(t,["issueKey"]),[i]=b(s);return a.a.createElement(e,c({},n,{pinnedFields:i}))}},"./src/packages/issue/fields/components/inline-edit/src/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),o=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js");const l=()=>Object(c.b)("issue.details.inline-edit-enter-fix",!1);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const p=Object(o.a)("EnterEscapeHandler",{onEnter:"entered",onEscape:"escaped"})(r.a),m=e=>{const{actionSubject:t,isEditable:s,isEditing:r=!1,readView:o=null,editView:c=null,onEnter:m,onEscape:b,onConfirm:f,onCancel:g,onEdit:h}=e,y=d(e,["actionSubject","isEditable","isEditing","readView","editView","onEnter","onEscape","onConfirm","onCancel","onEdit"]),O=Object(n.useCallback)((e,s)=>e.update({action:s,actionSubject:t}),[t]),j=Object(n.useCallback)((e,t)=>{m&&m(O(t,"entered"))},[m,O]),E=Object(n.useCallback)((e,t)=>{b&&b(O(t,"escaped"))},[b,O]),v=Object(n.useCallback)(e=>{h&&h(O(e,"focused"))},[h,O]),k=Object(n.useCallback)(e=>{f&&f(O(e,"confirmed"))},[f,O]),w=Object(n.useCallback)(e=>{g&&g(O(e,"canceled"))},[g,O]),S=Object(n.useCallback)(()=>null!==c?a.a.createElement(p,{onEnter:j},c):null,[c,j]);return a.a.createElement(p,u({onEscape:E},l()?{}:{onEnter:j}),a.a.createElement(i.a,u({label:"",isEditing:r,readView:o,editView:!0===s?l()?S():c:null,onConfirm:k,onCancel:w,onEditRequested:v},y)))};m.displayName="FieldInlineEditStateLess",m.defaultProps={actionSubject:"fieldInlineEdit",disableEditViewFieldBase:!0,isEditable:!1,isEditing:!1,isConfirmOnBlurDisabled:!1,isCompact:!0,isLabelHidden:!0,shouldConfirmOnEnter:!0};t.a=Object(n.memo)(m)},"./src/packages/issue/fields/components/user-picker/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/debounce.js"),r=s.n(i),o=s("./node_modules/lodash/noop.js"),c=s.n(o),l=s("./node_modules/@atlaskit/user-picker--next/dist/esm/components/UserPicker.js");function u(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b={id:"USER_PICKER_EMPTY",name:""},f=(e,t)=>null!=e&&(null==t||""===t||e.toLowerCase().includes(t.toLowerCase()));class g extends n.Component{constructor(...e){super(...e),this.state={suggestions:[],isDropdownVisible:!0,wasFocused:!1,isLoading:!1,wasCleared:!1,wasQueryCleared:!1,query:null},this.wasUnmounted=!1,this.onChange=e=>{if(!e||Array.isArray(e)||this.isCurrentValue(e))return;const t=e.id,s=this.props.initialOptions.find(e=>e.id===t);s?this.props.onChange(s.id?s:null):"USER_PICKER_EMPTY"===t?this.props.onChange(null):this.props.onChange(e)},this.onSuggestionSelect=(e,t)=>{this.setState({suggestions:[],wasFocused:!1,isLoading:!1,wasCleared:!1,wasQueryCleared:!1}),this.onChange(Array.isArray(e)?null:e),this.props.onSelection(t)},this.onBlur=()=>{this.setState({suggestions:[],isDropdownVisible:!1,wasFocused:!1,isLoading:!1,wasQueryCleared:!1}),this.state.wasCleared?this.onSuggestionSelect(b):this.props.onCancel()},this.onFocus=e=>{this.setState({isDropdownVisible:!0,isLoading:!0,wasFocused:!0,wasCleared:!1}),this.requestSuggestions(e)},this.onQueryChange=(e,t)=>{this.setState({wasFocused:!1,isLoading:!0,query:e||"",wasQueryCleared:!e}),this.debouncedRequestSuggestion(t)},this.onClear=()=>{this.setState({wasCleared:!0}),this.onChange(b)},this.getEmptyValue=()=>this.props.emptyOption?p(p({},this.props.emptyOption),{},{id:"USER_PICKER_EMPTY"}):null,this.getInitialAndEmptyOptionSuggestions=()=>{const{initialOptions:e,emptyOption:t}=this.props,{wasFocused:s,wasQueryCleared:n}=this.state,a=s&&e.length>0,i=t&&!a&&n,r=this.getEmptyValue();return[...a?e:[],...!0===i&&r?[r]:[]]},this.debouncedRequestSuggestion=r()(e=>this.requestSuggestions(e),300),this.requestSuggestions=e=>{const{onDataRequest:t,fetchSuggestions:s}=this.props,{query:n}=this.state;t(null===n);const a=n||"";return s(a,e).then(e=>this.handleSuggestions(e,a)).catch(()=>[])},this.isMatchingQuery=e=>{const{query:t,isLoading:s}=this.state,{displayName:n,name:a}=e;return!s||f(n,t)||f(a,t)},this.getSuggestions=()=>{const e=this.getInitialAndEmptyOptionSuggestions(),t=e.map(e=>e.id),s=this.state.suggestions.filter(e=>!t.includes(e.id)&&this.isMatchingQuery(e));return[...e,...s].map(e=>{const{displayName:t}=e,s=u(e,["displayName"]);return t?p(p({},s),{},{publicName:t}):s})},this.handleSuggestions=(e,t)=>{const{isDropdownVisible:s,query:n}=this.state,a=t===(n||"");if(this.wasUnmounted||!s||!a)return;const i=this.state.wasFocused?e.filter(e=>!this.isCurrentValue(e)):e;this.setState({isLoading:!1,suggestions:i}),this.props.onDataLoaded(null===n,i.length)}}componentWillUnmount(){this.wasUnmounted=!0,this.debouncedRequestSuggestion.cancel()}isCurrentValue(e){return e?this.props.value?e.id===this.props.value.id:"USER_PICKER_EMPTY"===e.id:null===this.props.value}render(){const e=this.getSuggestions(),t=this.props.value||this.getEmptyValue();return a.a.createElement(l.a,{value:t,options:e,open:this.state.isDropdownVisible,fieldId:this.props.fieldId,menuMinWidth:this.props.menuMinWidth,menuPortalTarget:this.props.portalElement,width:this.props.width,appearance:"compact",isClearable:!!this.props.value,isDisabled:this.props.isDisabled,placeholder:this.props.placeholder,isLoading:this.state.isLoading&&this.state.isDropdownVisible,onBlur:this.onBlur,onClear:this.onClear,onFocus:this.onFocus,onInputChange:this.onQueryChange,onSelection:this.onSuggestionSelect})}}g.displayName="UserPickerView",g.displayName="UserPickerView",g.defaultProps={isDisabled:!1,value:null,initialOptions:[],emptyOption:null,width:void 0,menuMinWidth:void 0,portalElement:void 0,fetchSuggestions:()=>Promise.resolve([]),onChange:c.a,onCancel:c.a,onSelection:c.a,onDataRequest:c.a,onDataLoaded:c.a}},"./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/noop.js"),i=s.n(a),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),c=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),l=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),u=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),d=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),p=s("./src/packages/platform/observability/browser-metrics/src/index.js"),m=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const b=(e,t)=>({fields:{[e]:t}}),f=async(e,t,s,n)=>Object(m.e)(`${n}/rest/api/3/issue/${e}/`,{body:JSON.stringify(b(t,s))}),g=e=>{const t=Object(u.e)(),{issueKey:s,fieldKey:a,fieldType:m,initialValue:b,saveField:g=f,onSubmit:h=i.a,onSuccess:y=i.a,onFailure:O=i.a}=e,[j,{setFieldValue:E}]=Object(d.b)({issueKey:s,fieldKey:a}),v=void 0!==j?j:b,[k,w]=Object(n.useState)(null),[S,I]=Object(n.useState)(!1),C=Object(n.useCallback)(()=>w(null),[w]),T=Object(n.useCallback)(async(e,n,i)=>{const u={fieldKey:a,fieldType:m},d=((e,t)=>{const s=Object(p.b)(),n={key:"issue-field.save-value",reporters:[()=>({fieldKey:e,fieldType:t})]};return s.start(n),{stop:()=>s.stop(n),cancel:()=>s.cancel(n.key)}})(Object(o.j)(a)(a),Object(o.j)(m)(m));I(!0),w(null);try{h(v,e,n,i),E(s,a,e),await g(s,a,e,t),y(e),d.stop(),Object(l.f)(i,"field updated",u),Object(l.b)(i,"field updateSucceeded",u)}catch(t){O(t,e),E(s,a,v),w(t);const n=t instanceof c.a;n||o.i.safeError("issue-field.save-value",`Failed to update field ${a} of type ${m}`,new r.a({event:t,type:"update",category:"issue",app:"issue-field",eventNameSuffix:"issue.error"})),d.cancel(),Object(l.b)(i,"field updateFailed",{fieldKey:a,fieldType:m,isValidationError:n})}I(!1)},[a,m,h,v,E,s,g,t,y,O]);return[{value:v,loading:S,error:k},{saveValue:T,resetError:C}]}},"./src/packages/issue/fields/field-base/src/services/field-config-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return k})),s.d(t,"b",(function(){return w})),s.d(t,"c",(function(){return S}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),i=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),r=s("./node_modules/reselect/lib/index.js"),o=s("./node_modules/react-sweet-state/lib/esm/index.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d={setIssueConfig:(e,t)=>({setState:s})=>{s({[e]:t})},setIssuesConfig:e=>({setState:t})=>{t(e.reduce((e,t)=>l(l({},e),t),{}))}},p=Object(o.d)({name:"issue-field-config",initialState:{},actions:d}),m=Object(r.createSelector)((e,t)=>e[t.issueKey],e=>e),b=Object(o.c)(p,{selector:m}),f=Object(r.createSelector)((e,t)=>e[t.issueKey],(e,t)=>t.fieldKey,(e,t)=>null==e?e:e[t]?e[t]:null),g=Object(o.c)(p,{selector:f}),h=Object(o.c)(p,{selector:null});function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){j(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const E=()=>'\n  query fieldConfigurationQuery($issueKey: String) {\n    issue(issueIdOrKey: $issueKey, latestVersion: true, screen: "view") {\n      fields {\n        key\n        schema {\n          type\n          custom\n          customId\n          system\n          renderer\n        }\n        autoCompleteUrl\n        allowedValues\n        operations\n        required\n        editable\n        title\n      }\n    }\n  }',v=async(e,t)=>{const s=await Object(a.d)(`${t}/rest/graphql/1/`,{body:JSON.stringify({query:E(),variables:{issueKey:e}})});return s&&s.data&&s.data.issue&&s.data.issue.fields?s.data.issue.fields.reduce((e,t)=>O(O({},e),{},{[t.key]:{autoCompleteUrl:t.autoCompleteUrl,allowedValues:t.allowedValues,isEditable:t.editable,isRequired:t.required,schema:t.schema,title:t.title}}),{}):null},k=(()=>{const e=new Set;return(t,s)=>{const[a,{setIssueConfig:r}]=g({issueKey:t,fieldKey:s}),o=Object(i.e)(),c=Object(n.useCallback)(async()=>{e.add(t);const s=await v(t,o);r(t,s),e.delete(t)},[o,t,r]);return Object(n.useEffect)(()=>{void 0!==a||e.has(t)||c()},[t,a,c]),[a]}})(),w=()=>{const[,e]=h();return[null,Object(n.useMemo)(()=>({setIssueConfig:(t,s)=>e.setIssueConfig(t,s),setIssuesConfig:t=>e.setIssuesConfig(t)}),[e])]},S=(()=>{const e=new Set;return t=>{const[s,{setIssueConfig:a}]=b({issueKey:t}),r=Object(i.e)(),o=Object(n.useCallback)(async()=>{e.add(t);const s=await v(t,r);a(t,s),e.delete(t)},[r,t,a]);return Object(n.useEffect)(()=>{void 0===s&&o()},[t,s,o]),[s]}})()},"./src/packages/issue/fields/field-base/src/services/field-value-service/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"c",(function(){return g}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/merge.js"),i=s.n(a),r=s("./node_modules/react-sweet-state/lib/esm/index.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u={setFieldValue:(e,t,s)=>({setState:n,getState:a})=>{n({[e]:c(c({},a()[e]),{},{[t]:s})})},setIssue:(e,t)=>({setState:s})=>{s({[e]:t})},mergeIssue:(e,t)=>({setState:s,getState:n})=>{s({[e]:i()({},n()[e],t)})},setIssues:e=>({setState:t})=>{t(e.reduce((e,t)=>c(c({},e),t),{}))},mergeIssues:e=>({setState:t,getState:s})=>{const n=e.reduce((e,t)=>c(c({},e),t),{});t(i()({},s(),n))}},d=Object(r.d)({name:"issue-fields",initialState:{},actions:u}),p=(e,{issueKey:t,fieldKey:s})=>e[t]&&e[t][s],m=Object(r.c)(d,{selector:p}),b=Object(r.e)(d,{selector:p}),f=Object(r.c)(d,{selector:null}),g=()=>{const[,e]=f();return[null,Object(n.useMemo)(()=>({setIssue:(t,s)=>e.setIssue(t,s),setFieldValue:(t,s,n)=>e.setFieldValue(t,s,n),mergeIssue:(t,s)=>e.mergeIssue(t,s),setIssues:t=>e.setIssues(t),mergeIssues:t=>e.mergeIssues(t)}),[e])]}},"./src/packages/issue/fields/number/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,fieldKey:t,onSuccess:s,onFailure:n})=>{const[o]=Object(i.a)(e,t),c=a()(o,"schema.type","number"),[{value:l,error:u},{saveValue:d,resetError:p}]=Object(r.a)({fieldKey:t,issueKey:e,fieldType:c,initialValue:null,onSuccess:s,onFailure:n});return[{value:l,error:u,fieldConfig:o},{saveValue:d,resetError:p}]}},"./src/packages/issue/fields/number/src/ui/async.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-async-component/commonjs/index.js"),r=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),o=s("./src/packages/platform/ui/error-boundary/src/main.js"),c=s("./src/packages/issue/fields/number/src/ui/view/main.js");const l=Object(i.asyncComponent)({resolve:()=>s.e("async-number-inline-edit-view").then(s.bind(null,"./src/packages/issue/fields/number/src/ui/main.js")),name:"AsyncIssueNumberField",LoadingComponent:c.a,ErrorComponent:c.a}),u=({children:e,fallback:t,packageName:s})=>a.a.createElement(o.a,{id:"issue-number-field",packageName:s,render:()=>t},a.a.createElement(r.a,{fallback:t},e));u.displayName="IssueNumberFieldBoundary"},"./src/packages/issue/fields/number/src/ui/main.js":function(e,t,s){"use strict";s.r(t),s.d(t,"actionSubject",(function(){return w}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/get.js"),r=s.n(i),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/issue/fields/components/error-flag/src/main.js"),l=s("./src/packages/issue/fields/components/inline-edit/src/main.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),d=s("./src/packages/issue/fields/number/src/services/index.js"),p=s("./node_modules/@atlaskit/field-text/FieldTextStateless.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const f=m.default.div(["width:","px;cursor:auto;"],8.5*b.e);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const y=Object(n.memo)(e=>{const{isInvalid:t=!1,type:s,defaultValue:n}=e,i=h(e,["isInvalid","type","defaultValue"]),r=null===n?"":Number(n);return a.a.createElement(f,null,a.a.createElement(p.a,g({appearance:"subtle",autoFocus:!0,compact:!0,isLabelHidden:!0,isInvalid:t,shouldFitContainer:!0,type:s,value:r},i)))});var O=s("./node_modules/react-intl/lib/index.es.js"),j=Object(O.defineMessages)({errorTitle:{id:"issue-field-number.error-title",defaultMessage:"We couldn't set the story point value"},errorMessage:{id:"issue-field-number.error-message",defaultMessage:"Check your connection, then give it another try."}}),E=s("./src/packages/issue/fields/number/src/ui/view/main.js");function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const w="numberInlineEdit";t.default=Object(n.memo)(e=>{const{fieldKey:t,issueKey:s,onCancel:i,onEdit:p,onEscape:m,onConfirm:b,onEnter:f,onUpdate:g,readView:h,editView:O,noValueText:S}=e,I=k(e,["fieldKey","issueKey","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText"]),[C,T]=Object(n.useState)(!1),[{value:P,error:_,fieldConfig:x},{saveValue:D,resetError:A}]=Object(d.a)({issueKey:Object(o.l)(s),fieldKey:t,onSuccess:e=>{g&&g(e),T(!1)}}),M=r()(x,"schema.type","number"),[L,R]=Object(n.useState)(P),N=!!x&&x.isEditable;Object(n.useEffect)(()=>{_&&T(!0),C||R(P)},[_,C,P]);const U=Object(n.useCallback)(e=>{L!==P?D(L,null,e):T(!1),Object(u.h)(e)},[D,L,P]),F=Object(n.useCallback)(e=>{A(),T(!1),R(P),Object(u.h)(e)},[A,P]),V=Object(n.useCallback)(e=>{F(e),i&&i(e)},[i,F]),K=Object(n.useCallback)(e=>{U(e),b&&b(e)},[b,U]),B=Object(n.useCallback)(e=>{T(!0),Object(u.h)(e),p&&p(e)},[p]),W=Object(n.useCallback)(e=>{F(e),m&&m(e)},[m,F]),H=Object(n.useCallback)(e=>{U(e),f&&f(e)},[f,U]),G=Object(n.useCallback)(e=>{A();const t=""===e.target.value?null:parseFloat(Number(e.target.value).toFixed(3));R(t)},[A,R]);return a.a.createElement(a.a.Fragment,null,_&&a.a.createElement(c.a,{error:_,title:j.errorTitle,description:j.errorMessage}),a.a.createElement(l.a,v({actionSubject:w,isEditable:N,isEditing:C,readView:(()=>void 0!==h?h:a.a.createElement(E.a,{isEditable:N,value:P}))(),editView:N?(()=>void 0!==O?O:a.a.createElement(y,{defaultValue:L,onChange:G,type:M,isInvalid:!!_}))():null,onCancel:V,onConfirm:K,onEdit:B,onEscape:W,onEnter:H},I)))})},"./src/packages/issue/fields/number/src/ui/view/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/badge/dist/esm/components/index.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./node_modules/@atlaskit/theme/dist/esm/index.js");const c=r.default.div(["cursor:pointer;&:hover > span{color:",";background-color:",";}"],o.a.N800,o.a.N90),l=r.default.div(["border:2px solid transparent;"]),u=({isEditable:e,value:t})=>{if(void 0===t)return null;const s=null===t?"-":t.toString(),n=a.a.createElement(i.a,null,s),r=e?a.a.createElement(c,null,n):n;return a.a.createElement(l,null,r)};u.displayName="NumberView"},"./src/packages/issue/fields/security-level/src/common/ui/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/esm/index.js");const i=n.default.div(["display:flex;align-items:center;color:",";"],e=>e.isActive?a.a.N0:e.hasSecurityLevel?a.a.R400:null)},"./src/packages/issue/fields/status/src/common/ui/status-lozenge/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return E})),s.d(t,"a",(function(){return v})),s.d(t,"c",(function(){return k}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js"),r=s("./node_modules/@atlaskit/lozenge/dist/esm/Lozenge/index.js"),o=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),c=s("./src/packages/issue/fields/status/src/feature-flags.js"),l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const u={1:"default",2:"default",3:"success",4:"inprogress"},d={default:o.a.N40,success:o.a.G50,inprogress:o.a.B50},p={default:o.a.N500,success:o.a.G500,inprogress:o.a.B500},m={default:o.a.N70,success:o.a.G400,inprogress:o.a.B400},b={default:o.a.N800,success:o.a.N0,inprogress:o.a.N0},f=l.default.span(["display:flex;align-items:center;> div{display:flex;line-height:initial;outline:0;> span{padding:2px 0;vertical-align:text-bottom;color:",";background-color:",";",";}}"],e=>p[u[e.statusCategoryId]],e=>d[u[e.statusCategoryId]],e=>e.hasHoverState?`&:hover {\n                        color: ${b[u[e.statusCategoryId]]};\n                        background-color: ${m[u[e.statusCategoryId]]};\n                    }`:"");function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function j(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const E="issue.fields.status.common.ui.status-lozenge.",v=e=>a.a.createElement(f,{hasHoverState:e.hasHoverState,statusCategoryId:e.status.statusCategory.id},a.a.createElement("div",{ref:e.targetRef,"data-test-id":`${E}${e.status.statusCategory.id}`},a.a.createElement(r.a,null,e.status.name)));v.displayName="StatusLozenge";const k=e=>{const{ariaLabel:t,error:s,isEditable:n,isOpen:r}=e,l=j(e,["ariaLabel","error","isEditable","isOpen"]),{targetRef:u}=l,d=j(l,["targetRef"]);return a.a.createElement(i.a,g({},Object(c.a)()?{ref:u}:{},{appearance:"subtle","aria-label":t,"aria-expanded":r,error:s,isDisabled:!n,theme:(e,t)=>{const{buttonStyles:a,spinnerStyles:i}=e(t);return{buttonStyles:y(y(y({},a),{},{backgroundColor:"transparent",margin:0,width:"auto",height:"auto",padding:0,border:`2px solid ${s?o.a.R300:"transparent"}`,borderRadius:"5px"},!0===n?void 0:{cursor:"auto"}),{},{outline:0,boxShadow:`0 0 0 2px ${!0===r?o.a.B100:"transparent"}`,"& > span > span":{margin:0}}),spinnerStyles:i}}}),a.a.createElement(v,Object(c.a)()?y({},d):y({},l)))};k.displayName="WrappedStatusLozenge"},"./src/packages/issue/fields/status/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js");const a=()=>Object(n.b)("workflow-editor-for-jsw",!1),i=()=>Object(n.b)("issue.details.global-status-transition-name-fix",!1),r=()=>Object(n.b)("issue.details.bento-7718.global-loop-transitions",!1),o=()=>Object(n.b)("issue.details.status-lozenge-fix",!1)},"./src/packages/issue/fields/status/src/services/experience-descriptions/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),a=s("./src/packages/platform/utils/types/src/application.js"),i=s("./src/packages/platform/utils/types/src/edition.js");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){c(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const l=(e,t,s,r,c)=>{let l=null,u=null;if(null!==r)try{const{appEditions:e}=Object(n.f)();l=Object(a.e)(r),u=Object(i.f)(l,e)}catch(e){}return{experience:"transitionIssue",wasExperienceSuccesful:e,analyticsSource:s,application:l,edition:u,additionalAttributes:o({method:t},null!=c?{errorMessage:c}:{})}}},"./src/packages/issue/fields/status/src/services/transitions-query/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return g})),s.d(t,"a",(function(){return y}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/@atlaskit/analytics-next/dist/esm/withAnalyticsEvents.js"),i=s("./src/packages/platform/observability/browser-metrics/src/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),o=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),c=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),l=s("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),d=s("./src/packages/issue/fields/status/src/services/experience-descriptions/index.js");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){b(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function b(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const f=Object(i.b)(),g=(e,t)=>`${e}/rest/api/2/issue/${t}/transitions?sortByOpsBarAndStatus=true`;class h extends n.Component{constructor(...e){super(...e),this.state={loading:!1,data:null,error:null},this.fetch=async e=>{this.setStateIfMounted({loading:!0});let t=[];try{f.start({key:"issue-field.status.fetch-transitions"}),t=((e=[])=>e.filter(e=>!!e.to&&!!e.to.statusCategory))((await Object(o.a)(g(this.props.baseUrl,this.props.issueKey))).transitions),f.stop({key:"issue-field.status.fetch-transitions"}),Object(u.g)(e,"statusField transitionsFetched","statusField",{count:t.length}),Object(r.a)(Object(d.a)(!0,"GET","Issue View BaseTransitionsQuery",this.props.projectType))}catch(e){f.cancel("issue-field.status.fetch-transitions"),Object(c.a)("issue-field.status.fetch-transitions",e.toString(),e,{}),Object(l.a)(e)?Object(r.a)(Object(d.a)(!1,"GET","Issue View BaseTransitionsQuery",this.props.projectType,`${e.name||""} ${e.message}`)):Object(r.a)(Object(d.a)(!0,"GET","Issue View BaseTransitionsQuery",this.props.projectType)),t=null}this.setStateIfMounted({data:t,loading:!1})},this.api={fetch:this.fetch},this.componentIsMounted=!1,this.setStateIfMounted=e=>{this.componentIsMounted&&this.setState(m({},e))}}componentDidMount(){this.componentIsMounted=!0,!0===this.props.preFetch&&this.props.createAnalyticsEvent&&this.fetch(this.props.createAnalyticsEvent({}))}componentDidUpdate(e){const t=this.props.issueKey!==e.issueKey,s=this.props.status!==e.status;(this.props.isSaving&&s||t)&&this.setStateIfMounted({data:null}),!0===this.props.preFetch&&this.props.createAnalyticsEvent&&(e.isSaving&&!this.props.isSaving||t)&&this.fetch(this.props.createAnalyticsEvent({}))}componentWillUnmount(){this.componentIsMounted=!1}render(){return this.props.children(m(m({},this.state),this.api))}}h.displayName="BaseTransitionsQuery",h.defaultProps={preFetch:!1,projectType:null};const y=Object(a.a)()(h)},"./src/packages/issue/fields/status/src/ui/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return Vt}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./src/packages/platform/ui/error-boundary/src/main.js"),c=s("./src/packages/platform/ui/error-boundary/src/index.js"),l=s("./src/packages/platform/utils/types/src/general.js"),u=s("./src/packages/navigation-next/src/baskets/navigation/components/container-context/index.js"),d=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),p=s("./src/packages/platform/observability/browser-metrics/src/index.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/transition-screen-legacy-dialog/index.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),g=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),h=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),y=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),O=s("./src/packages/platform/ui/flags/src/index.js"),j=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),E=s("./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js"),v=s("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),k=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js");const w={TIME_TO_RENDER_OPTIONS:"jira.fe.issue.fields.status.time-to.render-options",TIME_TO_APPLY_SELECTED_OPTION:"jira.fe.issue.fields.status.time-to.reflect-selected",TIME_TO_CANCEL_DROPDOWN:"jira.fe.issue.fields.status.time-to.cancel-dropdown",TIME_TO_OPEN_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.open-transition-screen",TIME_TO_CONFIRM_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.confirm-transition-screen",TIME_TO_CANCEL_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.cancel-transition-screen",TIME_TO_ERROR_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.error-transition-screen"};var S=s("./src/packages/issue/fields/status/src/services/experience-descriptions/index.js"),I=s("./node_modules/react-intl/lib/index.es.js");const C=Object(I.defineMessages)({title:{id:"issue-field-status.services.flags.transition-failed-error.main.title",defaultMessage:"We couldn't update the status"},description:{id:"issue-field-status.services.flags.transition-failed-error.main.description",defaultMessage:"Check your network connection, then try reloading the issue."}});var T=()=>({type:"error",title:C.title,description:C.description,isAutoDismiss:!0});const P=Object(I.defineMessages)({title:{id:"issue-field-status.services.flags.validation-error.main.title",defaultMessage:"Transition failed"}});var _=e=>({type:"warning",title:P.title,description:{id:"issue-field.status.services.flags.validation-error.main.description",defaultMessage:e},isAutoDismiss:!0});function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function D(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function A(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?D(Object(s),!0).forEach((function(t){M(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):D(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function M(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const L=Object(p.b)(),R=(e,t,s)=>{const n=document.querySelector(e);n&&n.removeEventListener(t,s)};class N extends n.Component{static getDerivedStateFromProps(e,t){return t.loading||!e.value?null:{value:e.value}}constructor(e){super(e),this.componentDidUpdate=e=>{this.props.initialValue&&e.initialValue&&e.initialValue.id!==this.props.initialValue.id&&this.props.initialValue.id!==this.state.value.id&&this.setState({loading:!1,value:this.props.initialValue})},this.isDialogOpened=!1,this.isDialogConfirmPressed=!1,this.onDialogContentReady=()=>{setTimeout(()=>{this.isDialogOpened?Object(p.c)().markTimeToFinishTask({key:w.TIME_TO_ERROR_TRANSITION_SCREEN}):Object(p.c)().markTimeToFinishTask({key:w.TIME_TO_OPEN_TRANSITION_SCREEN}),this.bindDialogFormHandlers(),this.isDialogOpened=!0,this.isDialogConfirmPressed=!1})},this.bindDialogFormHandlers=()=>{((e,t,s)=>{R(e,t,s);const n=document.querySelector(e);n&&n.addEventListener(t,s)})("#issue-workflow-transition-submit","click",this.onClickDialogConfirm)},this.unbindDialogFormHandlers=()=>{R("#issue-workflow-transition-submit","click",this.onClickDialogConfirm)},this.handleBeforeDialogHide=()=>{this.isDialogOpened&&!this.isDialogConfirmPressed&&(this.cancelScreenBrowserMetricsEvents(),Object(p.c)().markStartOfInteraction({key:w.TIME_TO_CANCEL_TRANSITION_SCREEN}),setTimeout(()=>{Object(p.c)().markTimeToFinishTask({key:w.TIME_TO_CANCEL_TRANSITION_SCREEN})})),this.unbindDialogFormHandlers(),this.isDialogOpened=!1,this.isDialogConfirmPressed=!1},this.cancelScreenBrowserMetricsEvents=()=>{[w.TIME_TO_ERROR_TRANSITION_SCREEN,w.TIME_TO_CONFIRM_TRANSITION_SCREEN,w.TIME_TO_OPEN_TRANSITION_SCREEN].forEach(e=>{Object(p.c)().cancel({key:e},!0)})},this.onClickDialogConfirm=()=>{Object(p.c)().markStartOfInteraction({key:w.TIME_TO_CONFIRM_TRANSITION_SCREEN,cancelExisting:!0}),Object(p.c)().markStartOfInteraction({key:w.TIME_TO_ERROR_TRANSITION_SCREEN,cancelExisting:!0}),this.isDialogConfirmPressed=!0},this.resetError=()=>this.setState({error:null}),this.submit=(e,t)=>{const s=this.state.value,n=e.to;this.setState({loading:!0,value:n}),this.props.onSubmit(s,n,{transition:e},t)},this.success=({status:e,event:t,viaDialog:s=!1})=>{this.setState({loading:!1,lastSavedValue:e}),this.props.fieldValueActions.setFieldValue(this.props.issueKey,"status",e),this.props.onSuccess(e,s,t),Object(k.f)(t,"statusField transitioned","statusField"),Object(f.a)(Object(S.a)(!0,"POST","Issue View Status Service",this.props.projectType)),s&&Object(p.c)().markTimeToFinishTask({key:w.TIME_TO_CONFIRM_TRANSITION_SCREEN})},this.failure=(e,t)=>{this.setState({error:e,loading:!1,value:this.state.lastSavedValue||this.props.value||this.props.initialValue}),this.props.onFailure();const s=e instanceof h.a;s?this.props.flagService.showFlag(_(e.message)):this.props.flagService.showFlag(T()),Object(k.b)(t,"statusField postTransitionFailed",{validationError:s,message:e.message}),Object(v.a)(e)?Object(f.a)(Object(S.a)(!1,"POST","Issue View Status Service",this.props.projectType,e.message)):Object(f.a)(Object(S.a)(!0,"POST","Issue View Status Service",this.props.projectType))},this.cancel=()=>{this.setState({loading:!1,value:this.props.value||this.props.initialValue}),this.props.onEditCancel()},this.transitionStatus=async(e,t)=>{const{issueKey:s,baseUrl:n}=this.props,a=e.to;this.submit(e,t);try{e.hasScreen?new b.a({baseUrl:n,issueKey:s,transitionId:e.id}).onDialogSuccess(()=>this.success({status:a,event:t,viaDialog:!0})).onDialogCancel(()=>this.cancel()).show():(L.start({key:"issue-field.status.post-transition"}),await Object(y.d)(`${n}/rest/api/2/issue/${s}/transitions`,{body:JSON.stringify({transition:e})}),L.stop({key:"issue-field.status.post-transition"}),this.success({status:a,event:t}))}catch(e){L.cancel("issue-field.status.post-transition"),g.a.safeError("issue-field.status.post-transition",e),this.failure(e,t)}},this.api={transitionStatus:this.transitionStatus,resetError:this.resetError};const t=e.value||e.initialValue;if(null==t)throw new Error("Either value or initialValue prop is required.");this.state={value:t,lastSavedValue:t,loading:!1,error:null}}componentDidMount(){Object(m.a)({name:"jira/util/events"}).then(({bind:e})=>{e("dialogContentReady",this.onDialogContentReady),e("Dialog.beforeHide",this.handleBeforeDialogHide)}).catch(r.a),Object(E.a)("dialogContentReady",this.onDialogContentReady),Object(E.a)("Dialog.beforeHide",this.handleBeforeDialogHide)}componentWillUnmount(){Object(m.a)({name:"jira/util/events"}).then(({unbind:e})=>{e("dialogContentReady",this.onDialogContentReady),e("Dialog.beforeHide",this.handleBeforeDialogHide)}).catch(r.a),Object(E.b)("dialogContentReady",this.onDialogContentReady),Object(E.b)("Dialog.beforeHide",this.handleBeforeDialogHide),this.unbindDialogFormHandlers(),this.isDialogOpened=!1}render(){return this.props.children(A(A({},this.state),this.api))}}N.displayName="StatusService",N.defaultProps={onSubmit:r.a,onSuccess:r.a,onFailure:r.a,onEditStart:r.a,onEditCancel:r.a};const U=e=>a.a.createElement(j.a,{issueKey:e.issueKey,fieldKey:"status"},(t,s)=>a.a.createElement(N,x({value:t},e,{fieldValueActions:s})));U.displayName="StatusWithValueService";const F=Object(O.withFlagService)(U);var V=s("./src/packages/issue/fields/status/src/services/transitions-query/main.js"),K=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),B=s("./src/packages/issue/fields/status/src/feature-flags.js");const W=({isSimplified:e,projectType:t})=>void 0!==e&&(!e||(e=>"service_desk"===e||Object(B.d)()&&"software"===e)(t));var H=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),G=s("./src/packages/platform/utils/constants/src/project-types.js");const $=({key:e,havePermission:t})=>"VIEW_READONLY_WORKFLOW"===e&&t||"ADMINISTER"===e&&t,q=({key:e,havePermission:t})=>"VIEW_READONLY_WORKFLOW"===e&&t;function z(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?z(Object(s),!0).forEach((function(t){Q(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):z(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Q(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const J=(e,t)=>`\n    query nextGenViewWorkflowQuery {\n        permissions(issueKey:"${e}", keys:["VIEW_READONLY_WORKFLOW", "ADMINISTER"]) {\n            key\n            havePermission\n        }\n        viewIssue(issueKey: "${e}") {\n            fields {\n                ... on IssueTypeField {\n                    fieldKey\n                    id\n                }\n            }\n        }\n        ${t?`project(projectKey: "${t}") {\n            projectId\n            simplified\n            type\n        }`:""}\n    }\n`,Z=(e,t,s,n)=>Object(H.a)((e=>`${e}/rest/gira/latest/`)(e),{method:"POST",body:JSON.stringify({query:J(t,s)})}).then(e=>(({data:e},t)=>{if(!e||!e.permissions||!e.viewIssue)return;const{permissions:s,project:n,viewIssue:a}=e,i=!0===(n&&n.simplified||t)?$:q,r=a.fields.find(e=>"issuetype"===e.fieldKey),o={hasPermission:s.some(i),issueTypeId:Object(l.m)(r?r.id:"")};return n&&(o.projectId=Object(l.p)(String(n.projectId)),o.projectType=Object(G.m)(n.type),o.isSimplified=n.simplified),o})(e,n));class X extends n.Component{constructor(e){super(e),this.fetch=async()=>{const{baseUrl:e,projectKey:t,issueKey:s,isSimplified:n}=this.props;this.request();try{const a=await Z(e,s,t,n);this.success(a)}catch(e){g.a.safeError("issue-field.status.fetch-view-workflow",e),this.failure(e)}},this.request=()=>{this.setState({error:void 0,loading:!0,data:void 0})},this.success=e=>{this.setState({loading:!1,data:e})},this.failure=e=>{this.setState({error:e,loading:!1})},this.state={data:void 0,loading:!1,error:void 0}}render(){return this.props.children(Y(Y({},this.state),{},{fetch:this.fetch}))}}function ee(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function te(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function se(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?te(Object(s),!0).forEach((function(t){ne(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):te(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ne(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}X.displayName="ViewWorkflowService";const ae={data:void 0,loading:!1,error:void 0,fetch:()=>Promise.resolve()},ie=e=>{const{ViewWorkflowService:t,ContainerContextSubscriber:s,baseUrl:n,issueKey:i,children:r}=e,o=i?Object(K.a)(i):null;return i&&o?a.a.createElement(s,null,({data:e})=>{const s=((e,t)=>{if(!e||!e.project)return;const s=e.project;return s.key===t?{projectId:Object(l.p)(s.id.toString()),projectType:s.type,isSimplified:s.isSimplified}:void 0})(e,o);return s&&!W(s)?r(se({},ae)):a.a.createElement(t,{baseUrl:n,issueKey:i,projectKey:s?void 0:o,isSimplified:s&&s.isSimplified},e=>{let{data:t}=e,n=ee(e,["data"]);const a=s||t?se(se({},s),t):void 0;return r(se({data:a},n))})}):r(se({},ae))};ie.displayName="ViewWorkflowContextService",ie.defaultProps={ViewWorkflowService:X};var re=ie,oe=s("./node_modules/@atlaskit/select/dist/esm/PopupSelect/PopupSelect.js"),ce=s("./src/packages/common-legacy-do-not-add-anything-new/src/blanket/index.js"),le=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),ue=s("./src/packages/issue/fields/status/src/common/ui/status-lozenge/main.js"),de=s("./src/packages/issue/fields/status/src/ui/status-view/messages.js"),pe=s("./node_modules/@atlaskit/spinner/dist/esm/spinner.js"),me=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),be=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const fe=me.default.div(["padding:","px;text-align:center;"],be.e),ge=()=>a.a.createElement(fe,null,a.a.createElement(pe.a,null));ge.displayName="LoadingSpinner";var he=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),ye=s.n(he),Oe=s("./node_modules/@atlaskit/theme/dist/esm/index.js");const je=Object(me.keyframes)(["to{box-shadow:0 0 0 10px rgba(0,0,0,0);}"]),Ee=me.default.div(["display:inline-flex;border-radius:3px;box-shadow:0 0 0 0 ",";animation:",";"],Oe.a.G400,e=>e.shouldShow?`${je} 1.45s cubic-bezier(0.5, 0, 0, 1)`:"none");class ve extends n.Component{constructor(...e){super(...e),this.state={shouldShow:!1}}componentDidUpdate(e){e.status.statusCategory.id!==this.props.status.statusCategory.id&&this.setState({shouldShow:3===this.props.status.statusCategory.id})}render(){return a.a.createElement(Ee,{shouldShow:this.state.shouldShow},this.props.children)}}ve.displayName="Pulse";var ke=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),we=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js");const Se=e=>`\n    &:not(:active), &:disabled {\n        background: ${e.background} !important;\n        color: ${e.color} !important;\n    }\n    \n    &:hover:not(:active) {\n        background: ${e.backgroundHover} !important;\n        color: ${e.color} !important;\n    }\n`,Ie={default:{background:Oe.a.N20A,backgroundHover:Oe.a.N30A,color:Oe.a.N400},todo:{background:Oe.a.N40,backgroundHover:Oe.a.N50,color:Oe.a.N800},inProgress:{background:Oe.a.B400,backgroundHover:Oe.a.B500,color:Oe.a.N0},done:{background:Oe.a.G400,backgroundHover:Oe.a.G500,color:Oe.a.N0}},Ce=Object(ke.a)(we.a,{target:"elro8wh0"})("font-weight:600;",e=>!e.isSelected&&Se(Ie.default),";"),Te=Object(ke.a)(we.a,{target:"elro8wh1"})("font-weight:600;",e=>!e.isSelected&&Se(Ie.todo),";"),Pe=Object(ke.a)(we.a,{target:"elro8wh2"})("font-weight:600;",e=>!e.isSelected&&Se(Ie.inProgress),";"),_e=Object(ke.a)(we.a,{target:"elro8wh3"})("font-weight:600;",e=>!e.isSelected&&Se(Ie.done),";"),xe=e=>{const{ariaLabel:t,isEditable:s,isOpen:n,status:i,targetRef:r}=e,o=(e=>{switch(e){case 2:return Te;case 3:return _e;case 4:return Pe;default:return Ce}})(i.statusCategory.id);return a.a.createElement("div",{ref:r},a.a.createElement(ve,{status:i},a.a.createElement(o,{"aria-label":t,"aria-expanded":n,isDisabled:!s,iconAfter:a.a.createElement(ye.a,{label:""})},i.name)))};xe.displayName="StatusButton";var De=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),Ae=s.n(De),Me=Object(I.defineMessages)({globalTransition:{id:"issue-field-status.status-view.transition.with-label.global-transition",defaultMessage:"Transition to"}});const Le=me.default.div(["display:flex;"]),Re=me.default.span(["flex-grow:1;"]),Ne=me.default.span(["flex-shrink:0;display:flex;"]),Ue=me.default.div(["display:inline-flex;align-items:center;"]),Fe=e=>a.a.createElement(Le,null,a.a.createElement(Re,null,((e,t)=>e.isGlobal?Object(B.c)()&&e.name!==e.to.name?e.name:t.formatMessage(Me.globalTransition):e.name)(e.transition,e.intl)),a.a.createElement(Ne,null,a.a.createElement(Ue,null,a.a.createElement(Ae.a,{label:"",size:"small"})),a.a.createElement(ue.a,{status:e.transition.to})));Fe.displayName="TransitionWithLabel";const Ve=Object(I.injectIntl)(Fe),Ke=e=>a.a.createElement(ue.a,{status:e.transition.to});Ke.displayName="TransitionWithoutLabel";const Be=e=>e.hasLabel?a.a.createElement(Ve,{transition:e.transition}):a.a.createElement(Ke,{transition:e.transition});var We=s("./node_modules/memoize-one/dist/memoize-one.esm.js");const He=Object(We.a)((e,t)=>e.filter(e=>!((e,t)=>e.to.id===t)(e,t))),Ge=Object(We.a)((e,t)=>e.filter(e=>!((e,t)=>e.isGlobal&&e.to.id===t)(e,t))),$e=(e,t)=>Object(B.b)()?He(e||[],t):((e,t)=>Ge(e,t))(e||[],t),qe=Object(We.a)(e=>e.map(e=>({label:e.to.name,value:e.id,transition:e}))),ze=e=>qe(e),Ye=Object(le.a)("statusField",{onOpen:"openDropdown",onChange:"transitionSelected"})(oe.a);class Qe extends n.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.onChildWrapperRefUpdate=e=>{this.childWrapperRef=e},this.wasChanged=!1,this.onChange=(e,t,s)=>{const{hasScreen:n}=e.transition;this.wasChanged=!0,Object(p.c)().markStartOfInteraction({key:w.TIME_TO_APPLY_SELECTED_OPTION,cancelExisting:!0}),n&&Object(p.c)().markStartOfInteraction({key:w.TIME_TO_OPEN_TRANSITION_SCREEN,cancelExisting:!0}),Object(k.h)(s,"transitionSelectedStatusField",{hasScreen:n}),this.props.onChange(e.transition,s)},this.onOpen=e=>{Object(p.c)().markStartOfInteraction({key:w.TIME_TO_RENDER_OPTIONS,cancelExisting:!0}),Object(k.h)(e,"openDropdownStatusField"),this.props.onOpen(e),this.setState({isOpen:!0})},this.onClose=()=>{this.wasChanged||Object(p.c)().markStartOfInteraction({key:w.TIME_TO_CANCEL_DROPDOWN,cancelExisting:!0}),this.wasChanged=!1,this.props.onClose(),this.setState({isOpen:!1})},this.childWrapperRef=void 0}componentDidUpdate(e,t){const{transitions:s,isSaving:n}=this.props,{isOpen:a}=this.state;!0===e.isSaving&&!1===n&&this.childWrapperRef&&this.childWrapperRef.children.length>0&&this.childWrapperRef.children[0].focus();const i=!t.isOpen&&a,r=null===e.transitions&&s;i&&!s&&Object(p.c)().markTimeToFeedback({key:w.TIME_TO_RENDER_OPTIONS}),(i&&s||a&&r)&&setTimeout(()=>{Object(p.c)().markTimeToFinishTask({key:w.TIME_TO_RENDER_OPTIONS})}),t.isOpen&&!a&&setTimeout(()=>{Object(p.c)().markTimeToFinishTask({key:w.TIME_TO_APPLY_SELECTED_OPTION}),Object(p.c)().markTimeToFinishTask({key:w.TIME_TO_CANCEL_DROPDOWN})})}componentWillUnmount(){Object.keys(w).forEach(e=>{Object(p.c)().cancel({key:w[e]},!0)})}renderLozenge({isEditable:e,isSaving:t,error:s,targetRef:n}){const{intl:{formatMessage:i},value:r}=this.props;return t?a.a.createElement(ce.a,{border:!1},a.a.createElement(ue.c,{targetRef:n,status:r,error:s})):a.a.createElement(ue.c,{ariaLabel:i(de.a.changeStatus),error:s,hasHoverState:!0,isEditable:e,isOpen:this.state.isOpen,status:r,targetRef:n})}renderButton({isEditable:e,isSaving:t,targetRef:s}){const{intl:{formatMessage:n},value:i}=this.props,r=a.a.createElement(xe,{ariaLabel:`${i.name} - ${n(de.a.changeStatus)}`,isEditable:e,isOpen:this.state.isOpen,status:i,targetRef:s});return t?a.a.createElement(ce.a,null,r):r}renderWithFocusWrapper(e){return a.a.createElement("div",{ref:this.onChildWrapperRefUpdate},e)}renderTarget({isEditable:e,isSaving:t,error:s,targetRef:n}){const{appearance:i,value:r}=this.props;if(r){if("lozenge"===i)return this.renderWithFocusWrapper(this.renderLozenge({isEditable:e,isSaving:t,error:s,targetRef:n}));if("button"===i)return this.renderWithFocusWrapper(this.renderButton({isEditable:e,isSaving:t,targetRef:n}))}return(a.a.createElement("div",null))}render(){const{footer:e,isLoading:t,isEditable:s,isSaving:n,error:i,value:r,intl:{formatMessage:o},transitions:c}=this.props,l=null!=c,u=$e(c,r.id),d=(e=>e.every(e=>e.isGlobal))(u||[]);return n||!s?this.renderTarget({isSaving:n,isEditable:s,error:i}):a.a.createElement(Ye,{noOptionsMessage:()=>o(l?de.a.noPermission:de.a.cannotLoadTransitions),formatOptionLabel:e=>a.a.createElement(Be,{transition:e.transition,hasLabel:!d}),options:ze(u||[]),target:({ref:e})=>this.renderTarget({isEditable:s,isSaving:n,error:i,targetRef:e}),isLoading:t,isDisabled:!s,searchThreshold:99999,onChange:this.onChange,onOpen:this.onOpen,onClose:this.onClose,closeMenuOnSelect:!0,components:{LoadingMessage:()=>a.a.createElement(ge,null)},popperProps:{modifiers:{offset:{offset:"0, 8"},preventOverflow:{boundariesElement:"viewport"}},positionFixed:!0},footer:e})}}Qe.displayName="StatusView",Qe.defaultProps={isEditable:!0,isSaving:!1,onChange:r.a,onOpen:r.a,onClose:r.a};var Je=Object(I.injectIntl)(Qe),Ze=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),Xe=s("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),et=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),tt=Object(I.defineMessages)({errorMessage:{id:"issue-field-status.common.view-workflow.error.error-message",defaultMessage:"Couldn\u2019t find the workflow."},tryAgain:{id:"issue-field-status.common.view-workflow.error.try-again",defaultMessage:"Try again"}});const st=me.default.div(["height:","px;border-top:2px solid ",";display:flex;align-items:center;padding:0 ","px;justify-content:center;"],6*be.e,Oe.a.N40,1.5*be.e),nt=me.default.div(["display:flex;flex-grow:1;height:100%;"]),at=me.default.div(["margin-right:","px;"],be.e);class it extends n.Component{constructor(...e){super(...e),this.onRetry=(e,t)=>{Object(k.h)(t,"retryViewWorkflowButton"),this.props.onRetry(e)}}render(){const{intl:{formatMessage:e}}=this.props;return(a.a.createElement(Ze.a,{sourceName:"viewWorkflowError",sourceType:Xe.f},a.a.createElement(st,null,a.a.createElement(at,null,e(tt.errorMessage)),a.a.createElement(nt,null,a.a.createElement(we.a,{appearance:"link",spacing:"none",onClick:this.onRetry},e(tt.tryAgain))),a.a.createElement(et.b,null))))}}it.displayName="Error";var rt=Object(I.injectIntl)(it),ot=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/create-event.js"),ct=s("./src/packages/wrm/src/async-wrm.js"),lt=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js"),ut=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js"),dt=Object(I.defineMessages)({viewWorkflow:{id:"issue-field-status.common.view-workflow.button.view-workflow",defaultMessage:"View workflow"}});const pt=me.default.div(["height:","px;border-top:2px solid ",";"],6*be.e,Oe.a.N40),mt=me.default.div(["display:flex;flex-grow:1;height:100%;"]),bt=`${1.5*be.e}px`,ft=me.default.div(["color:",";text-align:left;padding:0 ",";"],e=>e.isDisabledColor?Oe.a.N70:Oe.a.N900,bt),gt=({content:e,children:t})=>e?a.a.createElement(lt.a,{tag:"span",content:e},t):t,ht=({isDisabled:e,isLoading:t,isInitialLoading:s,onClick:n,onMount:i,tooltipContent:r,intl:o})=>a.a.createElement(pt,null,a.a.createElement(ut.a,{onMount:i}),a.a.createElement(gt,{content:r},a.a.createElement(mt,null,a.a.createElement(we.a,{"data-test-id":"issue-field-status.common.ui.view-workflow.button.view-workflow",shouldFitContainer:!0,appearance:"subtle",spacing:"none",isDisabled:e,isLoading:t,onClick:n},a.a.createElement(ft,{isDisabledColor:e&&!s},o.formatMessage(dt.viewWorkflow))))));ht.displayName="ViewWorkflowButton";var yt=Object(I.injectIntl)(ht),Ot=Object(I.defineMessages)({noPermission:{id:"issue-field-status.common.view-workflow.no-permission",defaultMessage:"You don't have permission to view this workflow."},loading:{id:"issue-field-status.common.view-workflow.loading",defaultMessage:"Looks like your connection is slow. We\u2019re still finding this workflow."}}),jt=s("./node_modules/@atlaskit/analytics-next/dist/esm/withAnalyticsEvents.js");const Et=e=>{if(e.data&&e.data.viewIssue&&e.data.viewIssue.workflow)return{workflowName:e.data.viewIssue.workflow.name,currentStepId:e.data.viewIssue.workflow.step.id};throw new Error("TransformError")};function vt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function kt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(s),!0).forEach((function(t){wt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class St extends n.Component{constructor(...e){super(...e),this.state={data:void 0,error:void 0,loading:!1},this.load=async()=>{this.onLoading();const{baseUrl:e,issueKey:t}=this.props;try{this.fireAnalytics();const s=await((e,t)=>Object(y.d)(`${e}/rest/gira/1/`,{body:JSON.stringify({query:"\nquery classicViewWorkflowQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        workflow {\n            name\n            step {\n                id\n            }\n        }\n    }\n}\n",variables:{issueKey:t}})}).then(Et))(e,t);this.onLoadSucceeded(s)}catch(e){g.a.safeError("issue-field.status.classic-view-workflow-service.fetch","Failed to fetch classic view workflow data.",{errorReason:e.message&&"TransformError"===e.message?"transform":"fetch"}),this.onLoadFailed(e)}}}componentDidMount(){!0===this.props.shouldLoadOnMount&&this.load()}onLoading(){this.setState({data:void 0,error:void 0,loading:!0})}onLoadSucceeded(e){this.setState({data:e,error:void 0,loading:!1})}onLoadFailed(e){this.setState({data:void 0,error:e,loading:!1})}fireAnalytics(){const e=this.props.createAnalyticsEvent({action:"requested"});Object(k.b)(e,"classicViewWorkflowData requested")}render(){return this.props.children(kt(kt({},this.state),{},{retry:this.load}))}}St.displayName="ClassicViewWorkflowService",St.defaultProps={shouldLoadOnMount:!0};const It=Object(jt.a)()(St),Ct=Object(I.defineMessages)({title:{id:"issue-field-status.view-workflow.classic.flags.errors.load-modal-error.title",defaultMessage:"We couldn't load the workflow"},description:{id:"issue-field-status.view-workflow.classic.flags.errors.load-modal-error.description",defaultMessage:"Check your connection, then try reloading the page."}});var Tt=()=>({type:"error",title:Ct.title,description:Ct.description});class Pt extends n.Component{constructor(...e){super(...e),this.state={isLoadingModal:!1,isRefetching:!1,isModalMounted:!1},this.modalApi=void 0,this.onClick=(e,t,s,n)=>{Object(k.h)(e,"viewWorkflowTrigger",{isSimplifiedProject:!1}),this.modalApi&&s&&n&&(this.setState({isLoadingModal:!0,isRefetching:!1}),this.modalApi.then(e=>{e.showDialog(s,n),window.dispatchEvent(Object(ot.a)("resize")),this.setState({isModalMounted:!0})}).catch(()=>{t&&t(Tt()),this.setState({isLoadingModal:!1})}))},this.onRetry=(e,t)=>(e.stopPropagation(),this.setState({isRefetching:!0}),t().then(()=>this.setState({isRefetching:!1}))),this.onMount=e=>{const{hasPermission:t}=this.props;Object(k.b)(e,"viewWorkflowTrigger mounted",{hasViewWorkflowPermission:t,isSimplifiedProject:!1})}}componentDidMount(){const e="workflow-designer/view-classic-project-workflow";this.modalApi=Object(m.a)({name:e,tentatives:0,shouldLogError:!1}).catch(()=>(Object(ct.a)(["wr!com.atlassian.jira.plugins.jira-workflow-designer:view-issue-page-workflow-designer"]),Object(m.a)({name:e})))}getTooltipMessage(e){const{isServiceRefetching:t,intl:s,hasPermission:n}=this.props;return t||e?s.formatMessage(Ot.loading):n?"":s.formatMessage(Ot.noPermission)}render(){const{isServiceLoading:e,isServiceRefetching:t,issueKey:s,baseUrl:n,hasPermission:i,FlagServiceSubscriber:r,ClassicViewWorkflowService:o}=this.props,{isLoadingModal:c,isModalMounted:l,isRefetching:u}=this.state,d=c&&!l,p=!i||d,m=d||t||u;return a.a.createElement(r,null,({showFlag:t})=>a.a.createElement(o,{issueKey:s,baseUrl:n,shouldLoadOnMount:i},({data:s,error:n,loading:i,retry:r})=>{if(n)return a.a.createElement(rt,{onRetry:e=>{this.onRetry(e,r)}});const o=s?s.workflowName:null,c=s?s.currentStepId:null;return a.a.createElement(yt,{onMount:this.onMount,tooltipContent:this.getTooltipMessage(e||i),isDisabled:p||i,isLoading:m,isInitialLoading:e||i,onClick:(e,s)=>this.onClick(s,t,o,c)})}))}}Pt.displayName="ViewWorkflowClassic",Pt.defaultProps={ClassicViewWorkflowService:It,FlagServiceSubscriber:O.FlagServiceSubscriber};var _t=Object(I.injectIntl)(Pt);class xt extends n.Component{constructor(...e){super(...e),this.state={isLoadingModal:!1},this.onMount=e=>{const{hasPermission:t}=this.props;Object(k.b)(e,"viewWorkflowTrigger mounted",{hasViewWorkflowPermission:t,isSimplifiedProject:!0})},this.onClick=(e,t)=>{Object(k.h)(t,"viewWorkflowTrigger",{isSimplifiedProject:!0}),this.setState({isLoadingModal:!0});const{issueTypeId:s=Object(l.m)(""),projectId:n=Object(l.p)(""),onOpenModal:a}=this.props;a(s,n)}}getTooltipMessage(){const{isServiceLoading:e,isServiceRefetching:t,hasPermission:s,intl:n}=this.props;return e||t?n.formatMessage(Ot.loading):!0!==s?n.formatMessage(Ot.noPermission):""}render(){const{isServiceLoading:e,isServiceRefetching:t,hasPermission:s,isModalMounted:n}=this.props,{isLoadingModal:i}=this.state,r=i&&!n,o=!0!==s||r,c=t||r,l=this.getTooltipMessage();return a.a.createElement(yt,{onMount:this.onMount,tooltipContent:l,isDisabled:o,isLoading:c,isInitialLoading:e,onClick:this.onClick})}}xt.displayName="ViewWorkflowSimplified",xt.defaultProps={hasPermission:!1};var Dt=Object(I.injectIntl)(xt);class At extends n.Component{constructor(...e){super(...e),this.state={isWorkflowServiceRefetching:!1},this.onWorkflowServiceRefetch=async(e,t)=>{e.stopPropagation(),this.setState({isWorkflowServiceRefetching:!0}),await t(),this.setState({isWorkflowServiceRefetching:!1})}}render(){const{baseUrl:e,issueKey:t,isModalMounted:s,onOpenModal:n,workflowServiceApi:i}=this.props,{isWorkflowServiceRefetching:r}=this.state,{data:o,loading:c,error:l,fetch:u}=i;if(l)return a.a.createElement(rt,{onRetry:e=>{this.onWorkflowServiceRefetch(e,u)}});if(!o||!W(o))return null;const{isSimplified:d,projectId:p,issueTypeId:m,hasPermission:b}=o;return!0===d?a.a.createElement(Dt,{projectId:p,issueTypeId:m,isModalMounted:s,hasPermission:b,isServiceLoading:c,isServiceRefetching:r,onOpenModal:n}):a.a.createElement(_t,{baseUrl:e,issueKey:t,hasPermission:b,isServiceLoading:c,isServiceRefetching:r})}}At.displayName="ViewWorkflow";var Mt=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),Lt=s("./src/packages/platform/ui/modal/src/index.js");const Rt=({children:e,packageName:t})=>a.a.createElement(Lt.a,{id:"workflow-readonly-modal",metricKey:"WORKFLOW_READONLY_MODAL_LOAD_START_MARK_KEY",packageName:t},e);Rt.displayName="WorkflowReadonlyModalBoundary";const Nt=Object(Mt.f)(()=>s.e("async-issue-workflow-readonly-modal").then(s.bind(null,"./src/packages/issue/workflow-readonly-modal/src/index.js")),{moduleId:"./src/packages/issue/workflow-readonly-modal/src/index.js"});class Ut extends n.Component{constructor(...e){super(...e),this.state={shouldMountWorkflow:!1}}static getDerivedStateFromProps(e,t){return{shouldMountWorkflow:t.shouldMountWorkflow||e.isOpen}}render(){const{issueKey:e,issueTypeId:t,baseUrl:s,locale:n,cloudId:i,projectId:r,isOpen:o,onModalMounted:c,onClose:l}=this.props,{shouldMountWorkflow:u}=this.state;return u&&a.a.createElement(Rt,{packageName:"issue"},a.a.createElement(Nt,{onMounted:c,issueKey:e,issueTypeId:t,baseUrl:s,locale:n,isOpen:o,cloudId:i,projectId:r,onClose:l}))}}Ut.displayName="WorkflowModal";var Ft=Ut;class Vt extends n.Component{constructor(...e){super(...e),this.state={isWorkflowModalOpen:!1,isWorkflowModalMounted:!1,issueTypeId:Object(l.m)(""),projectId:Object(l.p)("")},this.onOpenModal=(e,t)=>{this.setState({isWorkflowModalOpen:!0,issueTypeId:e,projectId:t})},this.onCloseModal=()=>{this.setState({isWorkflowModalOpen:!1})},this.onModalMounted=()=>{this.setState({isWorkflowModalMounted:!0})}}render(){const{issueKey:e,projectType:t,isEditable:s,isOptimistic:n,initialValue:i,appearance:r,onSubmit:l,onSuccess:u,onFailure:d,onEditStart:p,onEditCancel:m,value:b,TenantContextSubscriber:f,ContainerContextSubscriber:g,preFetchTransitions:h,ViewWorkflowContextService:y}=this.props;return(a.a.createElement(f,null,({tenantContext:f})=>f?a.a.createElement(F,{value:b,projectType:t,initialValue:i,issueKey:e,baseUrl:f.baseUrl,onSubmit:l,onSuccess:u,onFailure:d,onEditStart:p,onEditCancel:m},({value:i,loading:l,transitionStatus:u,error:d,resetError:b})=>a.a.createElement(V.a,{issueKey:e,baseUrl:f.baseUrl,status:i,isSaving:l,preFetch:h,projectType:t},({data:t,loading:h,fetch:O})=>a.a.createElement(y,{ContainerContextSubscriber:g,baseUrl:f.baseUrl,issueKey:e},g=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Je,{value:i,isEditable:s,isLoading:h||l,isSaving:!0!==n&&l,appearance:r,transitions:t,onOpen:e=>{p(),O(e),!0!==(g.data&&void 0!==g.data.hasPermission)&&g.fetch(),b()},onClose:m,onChange:u,error:d,footer:a.a.createElement(o.a,{id:"issue-field-view-workflow"},a.a.createElement(At,{baseUrl:f.baseUrl,issueKey:e,workflowServiceApi:g,onOpenModal:this.onOpenModal,isModalMounted:this.state.isWorkflowModalMounted}))}),a.a.createElement(c.b,null,a.a.createElement(Ft,{onModalMounted:this.onModalMounted,issueKey:e,issueTypeId:this.state.issueTypeId,baseUrl:f.baseUrl,locale:f.locale,cloudId:f.cloudId,projectId:this.state.projectId,isOpen:this.state.isWorkflowModalOpen,onClose:this.onCloseModal})))))):null))}}Vt.displayName="StatusField",Vt.defaultProps={isOptimistic:!0,TenantContextSubscriber:d.b,ContainerContextSubscriber:u.a,ViewWorkflowContextService:re,preFetchTransitions:!1,projectType:null,onEditStart:r.a,onEditCancel:r.a,onSubmit:r.a,onSuccess:r.a,onFailure:r.a}},"./src/packages/issue/fields/status/src/ui/status-view-lozenge/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/controllers/intl/src/index.js"),r=s("./src/packages/issue/fields/status/src/common/ui/status-lozenge/main.js"),o=s("./src/packages/issue/fields/status/src/ui/main.js"),c=s("./src/packages/issue/fields/status/src/ui/status-view/messages.js");const l=e=>{const[t,s]=Object(n.useState)(!1),l=Object(n.useCallback)(()=>s(!0),[]),u=Object(n.useRef)(null),{formatMessage:d}=Object(i.c)(),{initialValue:p,isEditable:m}=e;return Object(n.useEffect)(()=>{t&&setTimeout(()=>{var e,t;return null===(e=u.current)||void 0===e||null===(t=e.querySelector(`[data-test-id^="${r.b}"]`))||void 0===t?void 0:t.click()})},[t]),t?a.a.createElement("div",{ref:u},a.a.createElement(o.a,e)):a.a.createElement("div",{onClick:l},a.a.createElement(r.c,{ariaLabel:d(c.a.changeStatus),hasHoverState:!0,isEditable:m,isOpen:!1,status:p}))};l.displayName="StatusViewLozenge",t.a=l},"./src/packages/issue/fields/status/src/ui/status-view/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({noPermission:{id:"issue-field-status.status-view.no-permission",defaultMessage:"You don't have permission to transition this issue"},cannotLoadTransitions:{id:"issue-field-status.status-view.cannot-load-transitions",defaultMessage:"We couldn't load the statuses and transitions"},changeStatus:{id:"issue-field-status.status-view.change-status",defaultMessage:"Change status"}})},"./src/packages/issue/fields/summary/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,onSuccess:t,onFailure:s})=>{const[n]=Object(i.a)(e,"summary"),o=a()(n,"schema.type","string"),[{value:c,error:l},{saveValue:u,resetError:d}]=Object(r.a)({fieldKey:"summary",issueKey:e,fieldType:o,initialValue:null,onSuccess:t,onFailure:s});return[{value:c,error:l,fieldConfig:n},{saveValue:u,resetError:d}]}},"./src/packages/issue/fields/voters/src/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({fetchVotersListFailedTitle:{id:"issue-field-voters.fetch-voters-list-failed-title",defaultMessage:"We couldn't load the voters list"},fetchVotersListFailedDescription:{id:"issue-field-voters.fetch-voters-list-failed-description",defaultMessage:"Check your connection, then give it another try."},updateVoteFailedTitle:{id:"issue-field-voters.update-vote-failed-title",defaultMessage:"We couldn't update your vote status"},updateVoteFailedDescription:{id:"issue-field-voters.update-vote-failed-description",defaultMessage:"Check your connection, then try clicking vote again."},addVoteLabel:{id:"issue-field-voters.add-vote-label",defaultMessage:"Vote for this issue"},removeVoteLabel:{id:"issue-field-voters.remove-vote-label",defaultMessage:"Remove Vote"},voteOptionsTooltip:{id:"issue-field-voters.vote-options-tooltip",defaultMessage:"Vote options"},emptyVotersMessage:{id:"issue-field-voters.empty-voters-message",defaultMessage:"No one has voted for this issue"},votersListLabel:{id:"issue-field-voters.voters-list-label",defaultMessage:"Voted for this issue"}})},"./src/packages/issue/fields/voters/src/services/voters-list-service/context.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return u}));var n={};s.r(n),s.d(n,"setVoters",(function(){return i})),s.d(n,"setLoggedInUserAction",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/index.js");const i=e=>({setState:t})=>{t({voters:e})},r=e=>({setState:t})=>{t({loggedInUserAction:e})},o=Object(a.d)({name:"issue-voters",initialState:{voters:[],loggedInUserAction:void 0},actions:n}),c=Object(a.c)(o,{selector:e=>e.voters}),l=Object(a.c)(o,{selector:e=>e.loggedInUserAction}),u=Object(a.b)(o)},"./src/packages/issue/fields/voters/src/services/voters-list-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return j}));var n=s("./node_modules/react/index.js"),a=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/services/common/src/use-service/index.js")),i=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),r=s("./src/packages/platform/ui/flags/src/index.js"),o=s("./src/packages/issue/issue-context-service/src/main.js"),c=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),l=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),u=s("./src/packages/platform/services/user/src/components/index.js"),d=s("./src/packages/issue/fields/voters/src/messages.js"),p=s("./src/packages/issue/fields/voters/src/services/voters-list-service/context.js");const m="ADDED",b="REMOVED";var f=s("./src/packages/platform/utils/types/src/general.js");const g=e=>({id:Object(f.a)(e.accountId),displayName:e.displayName,avatarUrl:e.avatarUrls&&e.avatarUrls["48x48"]});function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const j=()=>{const[{data:e}]=Object(u.c)(),[t,{setVoters:s}]=Object(p.c)(),[f,{setLoggedInUserAction:h}]=Object(p.b)(),O=Object(l.e)(),j=Object(o.d)(),{showFlag:E}=Object(r.useFlagsService)(),[v,{setFieldValue:k}]=Object(c.b)({issueKey:j,fieldKey:"votes"}),[w,S]=Object(n.useState)(!1),I=Object(n.useCallback)(()=>Object(i.b)(`${O}/rest/api/3/issue/${j}/votes`),[O,j]),{loading:C,error:T,data:P,fetch:_}=Object(a.a)(I),x=Object(n.useMemo)(()=>P&&P.voters?P.voters.map(g):t,[P]);Object(n.useEffect)(()=>{P&&P.voters&&(s(x),S(!0))},[P,s,x]);const D=Object(n.useMemo)(()=>{const t=e?g(e):null;switch(f){case m:return((e,t)=>{if(!t||-1!==e.findIndex(e=>e.id===t.id))return e;return[...e,t].sort((e,t)=>e.displayName.localeCompare(t.displayName))})(x,t);case b:return((e,t)=>t?e.filter(e=>e.id!==t.id):e)(x,t);default:return x}},[e,f,x]);Object(n.useEffect)(()=>{T&&E({type:"error",title:d.a.fetchVotersListFailedTitle,description:d.a.fetchVotersListFailedDescription})},[T,E]),Object(n.useEffect)(()=>{if(w&&v.votes!==D.length){const e=void 0===f;k(j,"votes",y(y({},v),{},{votes:D.length,hasVoted:e?v.hasVoted:f===m}))}S(!1)},[w]);const A=Object(n.useCallback)(()=>{h(m)},[h]),M=Object(n.useCallback)(()=>{h(b)},[h]),L=Object(n.useCallback)(()=>{C||_()},[_,C]),R=Object(n.useMemo)(()=>({setLoggedInUserActionVote:A,setLoggedInUserActionUnvote:M,refreshVoters:L}),[A,L,M]);return[{voters:D,isFetching:C,error:T},R]}},"./src/packages/issue/fields/voters/src/ui/button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js"),r=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/icon/glyph/like.js")),o=s.n(r),c=s("./src/packages/issue/issue-context-service/src/main.js"),l=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),u=s("./node_modules/@atlassian/react-transitive-number/index.js"),d=s.n(u),p=s("./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./node_modules/@atlaskit/theme/dist/esm/index.js");const f=m.default.span(["display:flex;align-items:center;","}"],e=>e.hasVoted&&!e.isSelected?`color: ${b.a.B500};`:""),g=m.default.span(["display:flex;"]),h=m.default.span(["min-width:",";"],e=>e.hasVoters?"15px":"0"),y=({isSelected:e=!1})=>{const t=Object(c.d)(),[{hasVoted:s,votes:n}]=Object(l.b)({issueKey:t,fieldKey:"votes"});return a.a.createElement(f,{hasVoted:s,isSelected:e},a.a.createElement(g,null,s?a.a.createElement(p.a,{label:"",size:"medium"}):a.a.createElement(o.a,{label:"",size:"medium"})),a.a.createElement(h,{hasVoters:0!==n},a.a.createElement(d.a,null,0!==n?n:"")))};y.displayName="VoteIcon";var O=y,j=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js");const E=Object(m.default)(j.a)(["&&{padding:0 4px;}"]),v=({onClick:e,tooltip:t=null,isSelected:s=!1,isDisabled:n=!1})=>a.a.createElement(i.a,{content:t,position:"top"},a.a.createElement(E,{onClick:e,isSelected:s,appearance:"subtle",spacing:"default","aria-label":t,"aria-expanded":s,isDisabled:n},a.a.createElement(O,{isSelected:s})));v.displayName="VoteButton";t.a=v},"./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/icon/cjs/index.js"),r=s.n(i);const o=()=>a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("defs",null,a.a.createElement("path",{id:"like-filled-a",d:"M4.00029867,12.0000031 L4.00029867,19.0000031 C3.99379083,19.2619469 4.0938648,19.5154845 4.27800285,19.7035645 C4.46214091,19.8916445 4.71487577,19.9984685 4.97933941,20.0000031 L5.99875297,20.0000031 L5.99875297,11.0000031 L4.97933941,11.0000031 C4.71487577,11.0015345 4.46214091,11.1083586 4.27800285,11.2964386 C4.0938648,11.4845186 3.99379083,11.7380562 4.00029867,12.0000031 Z M19.2814088,11.0400031 C18.7031035,10.3648275 17.8537454,9.97663317 16.959972,9.97900342 L14.3256459,9.97900342 C14.3660187,9.79800348 14.4063915,9.61900354 14.4366711,9.4470036 C14.9514245,6.5130046 14.4366711,5.44700497 13.9320109,4.85300517 C13.4705845,4.31076256 12.7907146,3.99849428 12.0748615,4 C10.5305357,4.05274499 9.2630356,5.22781051 9.10745966,6.75100452 C8.71382472,8.59000389 8.6532655,8.75100384 8.13851212,9.47600359 L7.37142865,10.5650032 C7.13702441,10.900368 7.01037109,11.2980817 7.00807332,11.7060028 L7.00807332,17.9790007 C7.0094101,18.5107601 7.22390249,19.0202137 7.60436426,19.3952867 C7.98482603,19.7703597 8.50009148,19.9803277 9.03680723,19.9790426 L16.2837274,19.9790426 C17.7690249,19.9867984 19.0398298,18.9240081 19.2814088,17.4720009 L19.9576535,13.4720022 C20.1064636,12.6021375 19.8588502,11.7116379 19.2814088,11.0400031 Z"})),a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("use",{fill:"currentColor",xlinkHref:"#like-filled-a"}),a.a.createElement("path",{fill:"inherit",d:"M17.2829545,17.140001 C17.2013522,17.6232979 16.7783039,17.9768163 16.2837274,17.9750077 L9.03680723,17.9750077 L9.03680723,11.7060028 L9.8038907,10.6170032 C10.5252697,9.572607 10.9727451,8.36664508 11.105914,7.1080044 C11.1422788,6.56547046 11.3606605,5.89943888 12.0748615,6.00000478 C12.7890625,6.10057068 12.6501741,7.91600412 12.4382168,9.10000372 C12.2228565,10.0810361 11.9326853,11.0444672 11.5702013,11.9820027 L16.959972,11.9740027 C17.2574249,11.9729101 17.5402185,12.1018688 17.7328364,12.3264423 C17.9254544,12.5510157 18.0082813,12.848334 17.9591992,13.1390023 L17.2829545,17.140001 Z"})));o.displayName="likeIconFilled";const c=({size:e,label:t,secondaryColor:s="#B3D4FF"})=>a.a.createElement(r.a,{glyph:o,size:e,label:t,secondaryColor:s});c.displayName="LikeIconFilled",t.a=c},"./src/packages/issue/fields/voters/src/ui/vote-toggle/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/icon/glyph/like.js")),r=s.n(i),o=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js"),c=s("./src/packages/platform/controllers/intl/src/index.js"),l=s("./src/packages/issue/fields/voters/src/messages.js"),u=s("./node_modules/lodash/get.js"),d=s.n(u),p=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),m=s("./src/packages/platform/ui/flags/src/index.js"),b=s("./src/packages/platform/utils/types/src/general.js"),f=s("./src/packages/issue/issue-context-service/src/main.js"),g=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),h=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),y=s("./node_modules/@atlaskit/analytics-next/dist/esm/useAnalyticsEvents.js"),O=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),j=s("./src/packages/issue/fields/voters/src/services/voters-list-service/main.js");function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=()=>{const e=Object(f.d)(),[,{setLoggedInUserActionVote:t,setLoggedInUserActionUnvote:s}]=Object(j.a)(),[a]=Object(g.a)(e,"votes"),i=d()(a,"schema.type","votes"),{showFlag:r}=Object(m.useFlagsService)(),{createAnalyticsEvent:o}=Object(y.a)(),c=Object(n.useCallback)((e,n)=>{r({type:"error",title:l.a.updateVoteFailedTitle,description:l.a.updateVoteFailedDescription}),n.hasVoted?s():t()},[r,s,t]),[{value:u,error:E},{saveValue:k,resetError:w}]=Object(h.a)({fieldKey:"votes",issueKey:e,fieldType:i,initialValue:{hasVoted:!1,votes:0},saveField:(t,s,n,a)=>(({issueKey:e,newValue:t,baseUrl:s})=>t.hasVoted?Object(p.d)(`${s}/rest/api/3/issue/${e}/votes`):Object(p.a)(`${s}/rest/api/3/issue/${e}/votes`))({issueKey:e,newValue:n,baseUrl:Object(b.b)(a)}),onFailure:c}),S=Object(n.useCallback)((e=!1)=>{const n=!u.hasVoted,a=o({action:"clicked",actionSubject:"button"});Object(O.h)(a,n?"voteAdded":"voteRemoved",{viewMode:e?"showVotersList":"hideVotersList"}),n?t():s(),k(((e,t)=>v(v({},t),{},e?{votes:t.votes+1,hasVoted:!0}:{votes:t.votes-1,hasVoted:!1}))(n,u),null,a)},[u,o,t,s,k]);return[{value:u,error:E,fieldConfig:a},{toggleValue:S,resetError:w}]};var S=s("./src/packages/issue/fields/voters/src/ui/button/index.js"),I=s("./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js"),C=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),T=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/item/DropdownItem.js");const P=Object(C.default)(T.a)(["&&&{padding:8px 12px 7px;}"]),_=({onClick:e,isDropdownItem:t=!1,disableVotingProps:s={isDisabled:!1}})=>{const{isDisabled:i,tooltips:u}=s,{formatMessage:d}=Object(c.c)(),[{value:p},{toggleValue:m}]=w(),{buttonLabel:b,disabledTooltip:f}=Object(n.useMemo)(()=>p.hasVoted?{buttonLabel:d(l.a.removeVoteLabel),disabledTooltip:null==u?void 0:u.removeVote}:{buttonLabel:d(l.a.addVoteLabel),disabledTooltip:null==u?void 0:u.addVote},[u,d,p.hasVoted]),g=Object(n.useCallback)(()=>{null==e||e(),m(t)},[t,e,m]);return t?a.a.createElement(o.a,{content:i&&void 0!==f?f:null},a.a.createElement(P,{elemBefore:p.hasVoted?a.a.createElement(r.a,{label:"",size:"medium"}):a.a.createElement(I.a,{label:"",size:"medium"}),onClick:g,isDisabled:i},b)):a.a.createElement(S.a,{tooltip:i?f:b,onClick:g,isDisabled:i})};_.displayName="VoteToggle";t.a=_},"./src/packages/issue/issue-actions/activity-feed/src/messages.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./node_modules/react-intl/lib/index.es.js");const a=Object(n.defineMessages)({comments:{id:"issue-activity-feed.comments",defaultMessage:"Comments"},history:{id:"issue-activity-feed.history",defaultMessage:"History"},worklog:{id:"issue-activity-feed.worklog",defaultMessage:"Work log"},activity:{id:"issue-activity-feed.activity",defaultMessage:"Activity"},filterBy:{id:"issue-activity-feed.filter-by",defaultMessage:"Show:"},polarisInsights:{id:"issue-activity-feed.polaris-insights",defaultMessage:"Insights"}})},"./src/packages/issue/issue-context-service/src/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return O})),s.d(t,"d",(function(){return j})),s.d(t,"e",(function(){return E})),s.d(t,"a",(function(){return v})),s.d(t,"c",(function(){return k}));var n={};s.r(n),s.d(n,"setIssueContext",(function(){return d})),s.d(n,"mergeIssueContext",(function(){return p}));var a=s("./node_modules/react/index.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./node_modules/react-sweet-state/lib/esm/index.js"),o=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=e=>({setState:t})=>{t(e)},p=e=>({getState:t,setState:s})=>{s(l(l({},t()),e))},m={issueKey:Object(i.l)(""),issueId:void 0,isModal:!1,maxTokenLength:0,isLoadedWithPage:!1,rapidViewMap:void 0,estimationStatistic:void 0,isLoading:!1,viewMode:void 0,analyticsSource:void 0,backButtonUrl:void 0,boardId:void 0,boardType:void 0,isSpaEnabled:!1,loginRedirectUrl:void 0,onIssueKeyChange:void 0,rapidViewId:void 0},b=Object(r.d)({name:"issue-context",initialState:m,actions:n}),f=Object(r.c)(b,{selector:e=>e}),g=Object(r.c)(b,{selector:e=>e.issueKey}),h=(Object(r.c)(b,{selector:e=>e.issueId}),Object(r.c)(b,{selector:e=>e.isModal})),y=Object(r.c)(b,{selector:e=>void 0!==e.analyticsSource?new o.a(e.analyticsSource):void 0}),O=(Object(r.b)(b),()=>{const[e]=h();return e}),j=()=>{const[e]=g();return e},E=()=>{const[e]=g();return Object(i.q)(e.split("-")[0])},v=()=>{const[e]=y();return e},k=()=>{const[,{setIssueContext:e,mergeIssueContext:t}]=f();return[null,Object(a.useMemo)(()=>({setIssueContext:e,mergeIssueContext:t}),[e,t])]}},"./src/packages/issue/issue-context-service/src/types.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n="VIEW_MODE_MODAL",a="VIEW_MODE_SIDEBAR"},"./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=()=>65536},"./src/packages/issue/issue-fetch-services-common/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"a",(function(){return l}));let n=null;const a=()=>(n||(n=JSON.parse((e=>{const t=document.querySelector(`meta[name="${e}"]`),s=t&&t.getAttribute("content");return void 0!==s?s:null})("ajs-fe-feature-flags")||"{}")),n),i=(e,t=!1)=>{const s=a();return s[e]?s[e].value:t},r=()=>i("issue.details.forge-ui-integration",!1),o=()=>i("issue.details.media.tokens.from.gira",!1),c=()=>i("issue.details.forge-ui.issue-panel.next",!1),l=()=>i("issue.details.admin-options-phase-2",!1)},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"d",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return p}));const n={COMMENTS:"focusedCommentId",WORKLOG:"focusedWorklogId"},a=e=>{if(!n[e])return null;return(()=>{let e=window.location.search.slice(1);const t={};if(e){e=e.split("#")[0];const s=e.split("&");for(let e=0;e<s.length;e+=1){const n=s[e].split("="),a=n[0],i=void 0===n[1]||decodeURIComponent(n[1]);t[a]=i}}return t})()[n[e]]};var i=s("./src/packages/issue/issue-fetch-services-common/src/feature-flags.js");const r=()=>`\n    ecosystem {\n      operations {\n        name\n        url: href\n        icon {\n          url\n        }\n        tooltip\n        styleClass\n      }\n      contentPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        icon {\n          url\n        }\n        tooltip\n        type\n        showByDefault\n        manuallyAddedToIssue\n      }\n      activityPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n      }\n      backgroundScripts {\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        shouldReloadOnRefresh\n      }\n      ecoSystemOnDate\n      contentPanelsCustomised\n      ${(()=>Object(i.d)()?`forge {\n        panels {\n          id\n          instances {\n            ${Object(i.c)()?"id, collapsed,":""}\n            added\n          }\n        }\n      }`:"")()}\n    }\n`;var o=()=>`\n    jiraSettings {\n      ${(()=>"\n      timeTracking {\n        isTimeTrackingEnabled\n        hoursPerDay\n        daysPerWeek\n        defaultUnit\n      }\n")()}\n      ${(()=>"\n      subtasks {\n        enabled\n      }\n")()}\n      issueLinkTypes {\n        id\n        name\n        inward\n        outward\n      }\n      ${(()=>Object(i.a)()?"\n      newIssueViewTransitionSettings {\n         shouldDelayChangeboarding\n         newIssueViewTransitionLockingStatus\n      }\n    ":"")()}\n    }\n`;var c=s("./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js");const l="issueViewInteractiveQuery",u=e=>`${e}/rest/gira/1/`,d=e=>`\nquery ${l}($issueKey: String!, $projectKey: String)  {\n        viewIssue(issueKey: $issueKey) {\n            ${((e,t,s)=>{const n=a("COMMENTS");return`\n        comments (first: ${t}, maxResults: ${e}, orderBy: "${s}", ${null!=n?`commentId: ${n}`:""}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                visibility {\n                    type\n                    value\n                }\n                created\n                updated\n                renderedBody\n                jsdPublic\n                bodyAdf\n            }\n            totalCount\n            startIndex\n        }\n    `})(5,0,"-created")}\n            ${((e,t,s)=>{const n=a("WORKLOG");return null==n?"":`\n        worklogs (startAt: ${t}, maxResults: ${e}, orderBy: "${s}", ${`worklogId: ${n}`}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                created\n                started\n                updated\n                comment\n                timeSpent\n                timeSpentSeconds\n            }\n            totalCount\n            startIndex\n        }\n    `})(5,0,"-started")}  \n            ${r()}\n            fields {\n                __typename\n                    ${(()=>"\n      ... on GlancesField {\n        fieldKey\n        value {\n          name\n          status\n          iframe {\n            addonKey\n            moduleKey\n            options\n          }\n          icon {\n            url\n          }\n          content\n          type\n        }\n      }\n")()}\n            }\n            ${(()=>"attachments(orderDirection: DESC, orderField: CREATED, maxResults: 6) {\n            nodes {\n              id\n              filename\n              mimetype\n              mediaApiFileId\n              createdDate\n              filesize\n              parentName\n              author {\n                  accountId\n              }\n              parentId\n            }\n            totalCount\n          }\n    ")()}\n            ${(()=>"\n    layoutItems {\n        location\n        category\n        items {\n        itemId\n        type\n        }\n    }\n")()}            \n        }\n        ${(()=>"\n    licensedProducts {\n        name\n        status\n    }\n")()}\n        ${o()}\n        ${(()=>`\n    permissions(issueKey:$issueKey, keys:["${(()=>["ADMINISTER","ADMINISTER_PROJECTS","ASSIGN_ISSUES","EDIT_ISSUES","SCHEDULE_ISSUES","ADD_COMMENTS","DELETE_ALL_COMMENTS","DELETE_OWN_COMMENTS","EDIT_ALL_COMMENTS","EDIT_OWN_COMMENTS","CREATE_ISSUES","DELETE_ISSUES","MOVE_ISSUES","CREATE_ATTACHMENTS","DELETE_ALL_ATTACHMENTS","DELETE_OWN_ATTACHMENTS","WORK_ON_ISSUES","ASSIGNABLE_USER","LINK_ISSUES","VIEW_VOTERS_AND_WATCHERS","MANAGE_WATCHERS","EDIT_ALL_WORKLOGS","EDIT_OWN_WORKLOGS","DELETE_ALL_WORKLOGS","DELETE_OWN_WORKLOGS","USER_PICKER","VIEW_DEV_TOOLS","SERVICEDESK_AGENT"])().join('","')}"]) {\n        key\n        havePermission\n    }\n`)()}\n        ${(e=>`\n    myPreferences(keys: [\n        "jira.user.issue.changeboarding.lastinteracted",\n        "jira.user.issue.clickthrough-banner.lastinteracted",\n        "jira.user.issue.attachment.view",\n        "jira.user.issue.details.pinned-fields.${e}"\n    ])\n`)(e)}\n        ${(()=>Object(i.b)()?`mediaContext(issueKey: $issueKey) {\n    userToken {\n      token\n      id\n      issueId\n    }\n    uploadToken {\n      __typename\n      ... on MediaUploadToken {\n        endpointUrl\n        token\n        targetCollection\n        tokenDurationInMins\n        clientId\n      }\n      ... on FailedMediaUploadToken {\n        error\n      }\n    }\n    readToken(maxTokenLength: ${Object(c.a)()}) {\n      clientId\n      endpointUrl\n      tokensWithFiles {\n        files {\n          issueId\n          attachmentId\n          attachmentMediaApiId\n        }\n        token\n      }\n      tokenLifespanInSeconds\n    }\n  }`:"")()}\n        ${(()=>"\n    project(projectKey: $projectKey) {\n        id\n        newIssueViewLockedIn\n        issueTypes {\n            id\n            name\n            iconUrl\n            subtask\n        }\n    }\n")()}\n    }\n`,p=(e,t)=>({method:"POST",body:JSON.stringify({query:d(t),variables:{issueKey:e,projectKey:t}})})},"./src/packages/issue/issue-fetch-services-common/src/services/issue-graphql-data/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=(e,...t)=>{let s="";return t.forEach((t,n)=>{s+=e[n],s+=t.toString()}),s+=e[e.length-1],s};var a=(e,t)=>n`query {
        issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
            id
            fields {
                key
                title
                editable
                required
                autoCompleteUrl
                allowedValues
                content
                renderedContent
                schema {
                    custom
                    system
                    ${(()=>"configuration {\n        key\n        value\n    }\n    ")()}
                    items
                    type
                    renderer
                }
                configuration
            }
            expandAssigneeInSubtasks
            expandAssigneeInIssuelinks
            expandTimeTrackingInSubtasks
            systemFields {
                descriptionAdf {
                    value
                }
                ${(()=>"environmentAdf {\n        value\n    }")()}
            }
            customFields {
                textareaAdf {
                    key
                    value
                }
            }            
            ${(()=>"tabs {\n        id\n        name\n        items {\n            id\n            type\n        }\n    }")()}
            ${(()=>"\n    isHybridAgilityProject\n    ")()}
            ${(()=>"\n    agile {\n        epic {\n          key\n        },\n    }")()}
        }
        project(projectIdOrKey: "${t}") {
            id
            name
            key
            projectTypeKey
            simplified
            avatarUrls {
                key
                value
            }
            issueTypeHierarchy {
                baseLevelId
                levels {
                    id
                    aboveLevelId
                    belowLevelId
                }
            }
        }
    }`;const i=e=>`${e}/rest/graphql/1/`,r=(e,t)=>({method:"POST",body:JSON.stringify({query:a(e,t)})})},"./src/packages/issue/issue-fetch-services-common/src/services/issue-media-read-permissions/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t,s)=>`${e}/rest/api/2/attachment/read/issue/${t}/credentials?maxTokenLength=${s}`},"./src/packages/issue/issue-fetch-services-common/src/services/issue-media-upload-permissions/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t)=>`${e}/rest/api/2/attachment/upload/issue/${t}/credentials`},"./src/packages/issue/issue-fetch-services-common/src/services/issue-media-user-auth/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>`${e}/rest/internal/2/media/user/credentials`},"./src/packages/issue/issue-fetch-services/src/common/utils/client.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");let a=null;const i=e=>(a||(a=(e=>({query:({query:t,variables:s})=>Object(n.a)(`${e}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:t,variables:s})})}))(e)),a)},"./src/packages/issue/issue-fetch-services/src/common/utils/get-project-data.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=e=>Object(n.q)(e.split("-")[0])},"./src/packages/issue/issue-fetch-services/src/services/issue-forge-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/forge/forge-ui/src/utils/fetch-modules/index.js");const a=async(e,t)=>{const s=Object(n.a)(e,t,["jira:issueAction","jira:issueGlance","jira:issuePanel","jira:issueActivity","jira:customField"]),a=await s,[i,r,o,c,l]=a;return{issueAction:i,issueGlance:r,issuePanel:o,issueActivity:c,customField:l}}},"./src/packages/issue/issue-fetch-services/src/services/issue-gira-data/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),a=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),i=s("./src/packages/issue/issue-fetch-services/src/common/utils/get-project-data.js");t.a=async(e,t)=>{const s=Object(i.a)(t),r={issueKey:t,projectKey:s};return await Object(a.a)(e).query({query:Object(n.b)(s),variables:r})}},"./src/packages/issue/issue-fetch-services/src/services/issue-graphql-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),a=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-graphql-data/index.js");const i=(e,t,s)=>Object(n.a)(Object(a.b)(e),Object(a.a)(t,s))},"./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));s("./node_modules/rxjs/Observable.js");var n=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),i=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-media-read-permissions/index.js"),r=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),o=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const c=(e,t,s,a)=>Object(n.a)(Object(i.a)(e,t,s),{perf:r.i,headersProcessor:a&&a(r.i.key)}).catch(e=>{throw new o.a(e,Object(i.a)("{baseUrl}","{issueKey}","{maxTokenLength}"))}),l=(e,t,s,n)=>Object(a.a)(Object(i.a)(e,t,s),{perf:r.i,headersProcessor:n&&n(r.i.key)})},"./src/packages/issue/issue-fetch-services/src/services/issue-media-upload-permissions/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),i=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-media-upload-permissions/index.js"),r=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const o=(e,t)=>Object(n.a)(Object(i.a)(e,t)).catch(e=>{throw new r.a(e,Object(i.a)("{baseUrl}","{issueKey}"))}),c=(e,t)=>Object(a.a)(Object(i.a)(e,t))},"./src/packages/issue/issue-fetch-services/src/services/issue-media-user-auth/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),i=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-media-user-auth/index.js"),r=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const o=e=>Object(n.a)(Object(i.a)(e)).catch(e=>{throw new r.a(e,Object(i.a)("{baseUrl}"))}),c=e=>Object(a.a)(Object(i.a)(e))},"./src/packages/issue/issue-glance/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return x}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),r=s.n(i),o=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/mount-animator.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),u=s("./src/packages/issue/fields/components/field-heading/src/styled.js"),d=s("./src/packages/issue/fields/components/field-pin/src/index.js"),p=s("./src/packages/issue/issue-view/src/feature-flags.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const g=m.default.div(["display:flex;flex-direction:column;margin-bottom:","px;"],3*f.e),h=m.default.div(["position:relative;overflow:hidden;display:flex;border-radius:5px;margin:0 0 0 -","px;&:hover{background:",";cursor:pointer;}&:focus{box-shadow:0 0 0 2px ",";outline:0;background:",";}"],f.e,b.a.N20,b.a.B100,b.a.N20),y=Object(m.default)(h)(["height:","px;align-items:center;"],4*f.e),O=m.default.div(["overflow:hidden;margin:","px 0 ","px ","px;height:","px;width:","px;align-items:center;"],f.e,f.e,f.e,3*f.e,3*f.e),j=Object(m.default)(O)(["margin:0 0 0 ","px;padding-left:","px;padding-right:","px;"],f.e,.25*f.e,.25*f.e),E=m.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;line-height:","px;padding-left:","px;"],5*f.e,f.e),v=Object(m.default)(E)(["line-height:inherit;"]),k=m.default.div(["position:absolute;right:0;width:","px;height:","px;background-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,"," 25%);"],7*f.e,5*f.e,b.a.N20),w=m.default.div(["position:absolute;right:0;margin:6px ","px ","px;height:26px;width:26px;background:",";color:",";border-radius:50%;align-items:center;padding:2px 0 0 2px;"],f.e,f.e/2,b.a.N30,b.a.N60),S=Object(m.keyframes)(["0%{right:-28px;}100%{right:0;}"]),I=m.default.div(["position:absolute;animation:"," 0.15s ease-in-out;"],S);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function P(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class x extends n.Component{constructor(...e){super(...e),this.state={isHovering:!1},this.handleOpenGlancePanel=()=>{const{onClickPayload:e,title:t,onOpenPanel:s}=this.props;s(P(P({},e),{},{title:t}))},this.eventHandlers={onClick:this.handleOpenGlancePanel,onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})}}render(){const{title:e,Icon:t,content:s,showPinButton:n,itemId:i}=this.props,m=s.length<=170?s:`${s.substring(0,170).trim()}\u2026`;return Object(p.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(u.d,null,e&&a.a.createElement(u.b,null,a.a.createElement(u.c,null,e),!0===n&&a.a.createElement(d.a,{fieldId:i,label:e})),a.a.createElement(u.g,{fixedHeight:!0},a.a.createElement(o.a,{content:m},a.a.createElement(l.a,{onEnter:this.handleOpenGlancePanel},a.a.createElement(y,C({tabIndex:"0"},this.eventHandlers),t&&a.a.createElement(j,null,a.a.createElement(t,null)),a.a.createElement(v,null,s),this.state.isHovering&&a.a.createElement(c.a,{mountAnimation:I},a.a.createElement(k,null,a.a.createElement(w,null,a.a.createElement(r.a,{size:"medium",label:""}))))))))):a.a.createElement(g,null,e&&a.a.createElement(u.b,null,a.a.createElement(u.c,null,e)),a.a.createElement(o.a,{content:m},a.a.createElement(l.a,{onEnter:this.handleOpenGlancePanel},a.a.createElement(h,C({tabIndex:"0"},this.eventHandlers),t&&a.a.createElement(O,null,a.a.createElement(t,null)),a.a.createElement(E,null,s),this.state.isHovering&&a.a.createElement(c.a,{mountAnimation:I},a.a.createElement(k,null,a.a.createElement(w,null,a.a.createElement(r.a,{size:"medium",label:""}))))))))}}x.displayName="Glance",x.displayName="Glance",x.defaultProps={Icon:null}},"./src/packages/issue/issue-scroll/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n={};s.r(n),s.d(n,"setScrollTarget",(function(){return i})),s.d(n,"getScrollTargetId",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/index.js");const i=e=>({setState:t})=>{t({scrollTarget:e})},r=e=>({getState:t})=>{const s=t();return s.scrollTarget&&s.scrollTarget.type===e&&s.scrollTarget.id||null},o=Object(a.d)({name:"issue-scroll",initialState:{scrollTarget:null},actions:n}),c=Object(a.c)(o,{selector:e=>e.scrollTarget}),l=()=>{const[e,{setScrollTarget:t,getScrollTargetId:s}]=c();return[{scrollTarget:e},{setScrollTarget:t,getScrollTargetId:s}]}},"./src/packages/issue/issue-scroll/src/services/types.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=Object.freeze({COMMENT:"COMMENT",WORKLOG:"WORKLOG"})},"./src/packages/issue/issue-tabs/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return d}));var n={};s.r(n),s.d(n,"setIssueTabs",(function(){return r}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/index.js");const r=e=>({setState:t})=>{t(e)},o=Object(i.d)({name:"issue-tabs",initialState:{},actions:n}),c=Object(i.c)(o,{selector:e=>e}),l=Object(i.c)(o,{selector:null}),u=()=>{const[e,{setIssueTabs:t}]=c();return[{issueTabs:e},{setIssueTabs:t}]},d=()=>{const[,e]=l();return[null,Object(a.useMemo)(()=>({setIssueTabs:t=>e.setIssueTabs(t)}),[e])]}},"./src/packages/issue/issue-view-layout/src/services/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"a",(function(){return m}));var n={};s.r(n),s.d(n,"setIssueViewLayout",(function(){return r}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/index.js");const r=e=>({setState:t})=>{t(e)},o=Object(i.d)({name:"issue-view-layout-service",initialState:{sections:{},templateKey:"default"},actions:n}),c=Object(i.c)(o,{selector:e=>e.sections}),l=(Object(i.c)(o,{selector:e=>e.groups}),Object(i.c)(o,{selector:e=>e.templateKey})),u=Object(i.c)(o,{selector:null}),d=()=>{const[e]=c();return[e]},p=()=>{const[e]=l();return[e]},m=()=>{const[,e]=u();return[null,{setIssueViewLayout:Object(a.useCallback)(t=>{e.setIssueViewLayout(t)},[e])}]}},"./src/packages/issue/issue-view/src/actions/activity-feed-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>({type:"SELECT_ACTIVITY_ITEM",payload:e})},"./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=(e,t)=>({type:"APPLINK_AUTHENTICATION_REQUEST",payload:e,meta:{analyticsEvent:t}}),a=()=>({type:"APPLINK_AUTHENTICATION_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"i",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"j",(function(){return p}));const n=()=>({type:"SHOW_ASSIGN_ISSUE_PARENT_MODAL"}),a=()=>({type:"HIDE_ASSIGN_ISSUE_PARENT_MODAL"}),i=()=>({type:"FETCH_ISSUE_PARENTS_REQUEST"}),r=(e=[])=>({type:"FETCH_ISSUE_PARENTS_SUCCESS",payload:e}),o=()=>({type:"FETCH_ISSUE_PARENTS_FAILURE"}),c=(e,t)=>({type:"SET_PARENT_REQUEST",payload:{issues:e,parentId:t}}),l=(e,t,s)=>({type:"SET_PARENT_OPTIMISTIC",payload:{issues:e,parentIssue:t,requestPromise:s}}),u=e=>({type:"UNSET_PARENT_REQUEST",payload:{issues:e}}),d=(e,t)=>({type:"SET_PARENT_SUCCESS",payload:{parentIssue:e,oldParentIdsByIssueIds:t}}),p=e=>({type:"UNSET_PARENT_SUCCESS",payload:{oldParentIdsByIssueIds:e}})},"./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c}));const n=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_BEGIN",payload:e}),a=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_END",payload:e}),i=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR",payload:e}),r=e=>({type:"ATTACHMENT_JIRA_CREATE_SUCCESS",payload:e}),o=(e,t)=>({type:"ATTACHMENT_JIRA_CREATE_FAILURE",payload:{attachment:e,statusCode:t}}),c=e=>({type:"MEDIA_PICKER_ERROR",payload:e})},"./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=()=>({type:"ATTACHMENT_PICKER_POPUP_OPEN_SUCCESS"}),a=()=>({type:"ATTACHMENT_PICKER_POPUP_CLOSE_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/card-cover-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"c",(function(){return o}));const n=e=>({type:"CARD_COVER_FETCH_SUCCESS",payload:{cardCover:e}}),a=()=>({type:"CARD_COVER_FETCH_FAILURE"}),i=(e,t)=>({type:"CARD_COVER_UPDATE_REQUEST",payload:{currentAttachmentId:e,attachmentId:t}}),r=()=>({type:"CARD_COVER_UPDATE_SUCCESS"}),o=e=>({type:"CARD_COVER_UPDATE_FAILURE",payload:{attachmentId:e}})},"./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"g",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"d",(function(){return u}));const n=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST",payload:e}),a=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST_SUCCESS",payload:e}),i=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST_FAILURE",payload:e}),r=(e,t,s,n,a)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST",payload:{issueKey:e,issueId:t,currentType:s,targetType:n,analyticsEvent:a}}),o=(e,t)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS",payload:{issueKey:e,targetTypeName:t,fieldId:"issuetype"}}),c=e=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_FAILURE",payload:e}),l=(e,t,s)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_NOT_ALLOWED",payload:{issueId:e,currentType:t,targetType:s}}),u=e=>({type:"SHOW_ISSUE_TYPE_LIST",payload:e})},"./src/packages/issue/issue-view/src/actions/changeboarding-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r}));const n=e=>({type:"CHANGEBOARDING_TOUR_BEGIN",payload:e}),a=()=>({type:"CHANGEBOARDING_TOUR_END"}),i=e=>({type:"CHANGEBOARDING_BANNER_DISMISS",payload:e}),r=(e,t)=>({type:"CHANGEBOARDING_BANNER_SEEN",payload:{currentSeenTimes:e,firstSeenTimestamp:t}})},"./src/packages/issue/issue-view/src/actions/comment-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"z",(function(){return r})),s.d(t,"w",(function(){return o})),s.d(t,"B",(function(){return c})),s.d(t,"y",(function(){return l})),s.d(t,"A",(function(){return u})),s.d(t,"x",(function(){return d})),s.d(t,"v",(function(){return p})),s.d(t,"t",(function(){return m})),s.d(t,"s",(function(){return b})),s.d(t,"o",(function(){return f})),s.d(t,"p",(function(){return g})),s.d(t,"n",(function(){return h})),s.d(t,"r",(function(){return y})),s.d(t,"q",(function(){return O})),s.d(t,"d",(function(){return j})),s.d(t,"i",(function(){return E})),s.d(t,"k",(function(){return v})),s.d(t,"j",(function(){return k})),s.d(t,"l",(function(){return w})),s.d(t,"m",(function(){return S})),s.d(t,"g",(function(){return I})),s.d(t,"h",(function(){return C})),s.d(t,"f",(function(){return T})),s.d(t,"E",(function(){return P})),s.d(t,"e",(function(){return _})),s.d(t,"u",(function(){return x})),s.d(t,"C",(function(){return D})),s.d(t,"D",(function(){return A}));const n=()=>({type:"ADD_COMMENT_FORM_EXPAND"}),a=()=>({type:"ADD_COMMENT_FORM_COLLAPSE"}),i=()=>({type:"ADD_COMMENT_FORM_CANCEL"}),r=(e,t,s)=>({type:"SAVE_COMMENT_RETRY",payload:{optimisticId:e,createdDate:t,isNewComment:s}}),o=e=>({type:"SAVE_COMMENT_EDIT",payload:{optimisticId:e}}),c=(e,t)=>({type:"SAVE_COMMENT_SUCCESS_WITH_PASTED_CONTENT",payload:{comment:e,pastedContent:t}}),l=(e,t)=>({type:"SAVE_COMMENT_REQUEST",payload:{comment:e,analyticsEvent:t,updatedField:"comment"}}),u=(e,t,s,n,a)=>({type:"SAVE_COMMENT_SUCCESS",payload:{fieldId:"comment",comment:e,optimisticId:t,isNewComment:s,analyticsEvent:n},meta:a}),d=e=>({type:"SAVE_COMMENT_FAILURE",payload:e}),p=e=>({type:"SAVE_COMMENT_CANCEL",payload:{optimisticId:e}}),m=()=>({type:"FETCH_OLDER_COMMENTS_REQUEST"}),b=()=>({type:"FETCH_NEWER_COMMENTS_REQUEST"}),f=()=>({type:"FETCH_LATEST_COMMENTS_REQUEST"}),g=e=>({type:"FETCH_LATEST_COMMENTS_SUCCESS",payload:e}),h=()=>({type:"FETCH_LATEST_COMMENTS_FAILURE"}),y=e=>({type:"FETCH_MORE_COMMENTS_SUCCESS",payload:e}),O=()=>({type:"FETCH_MORE_COMMENTS_FAILURE"}),j=(e,t)=>({type:"CHANGE_COMMENT_VISIBILITY",payload:{id:e,isInternal:t}}),E=(e,t)=>({type:"EDIT_COMMENT_BEGIN",payload:{id:e,isInternal:t}}),v=e=>({type:"EDIT_COMMENT_COLLAPSE",payload:{id:e,fieldId:"comment"}}),k=e=>({type:"EDIT_COMMENT_CANCEL",payload:{id:e,fieldId:"comment"}}),w=(e,t)=>({type:"EDIT_COMMENT_UPDATE",payload:{id:e,value:t,fieldId:"comment"}}),S=(e,t)=>({type:"EDIT_COMMENT_VISIBILITY",payload:{id:e,visibility:t}}),I=(e,t)=>({type:"DELETE_COMMENT_REQUEST",payload:{id:e,analyticsEvent:t,updatedField:"comment"}}),C=e=>({type:"DELETE_COMMENT_SUCCESS",payload:{id:e,fieldId:"comment"}}),T=e=>({type:"DELETE_COMMENT_FAILURE",payload:e}),P=e=>({type:"SHOW_DELETE_COMMENT_MODAL",payload:e}),_=()=>({type:"DELETE_COMMENT_CANCEL"}),x=(e,t)=>({type:"PASTED_INTO_COMMENT_FORM",payload:{id:e,pastedContent:t}}),D=e=>({type:"SET_COMMENT_ATTACHMENT_IN_PROGRESS",payload:{isInProgress:e}}),A=e=>({type:"SET_COMMENT_SCROLL_STATUS",payload:{status:e}})},"./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return u})),s.d(t,"e",(function(){return d}));const n=()=>({type:"LINK_CONFLUENCE_PAGE_CLICKED"}),a=()=>({type:"LINK_CONFLUENCE_PAGE_CLOSED"}),i=()=>({type:"CREATE_CONFLUENCE_PAGE_LINK_MODIFIED"}),r=(e,t)=>({type:"CREATE_CONFLUENCE_PAGE_LINK_REQUEST",payload:{pageHref:e},meta:{analyticsEvent:t}}),o=e=>({type:"CREATE_CONFLUENCE_PAGE_LINK_SUCCESS",payload:{confluencePageLink:e}}),c=e=>({type:"CREATE_CONFLUENCE_PAGE_LINK_FAILED",payload:{errorMessage:e}}),l=e=>({type:"DELETE_CONFLUENCE_PAGE_LINK_REQUEST",payload:{globalId:e}}),u=()=>({type:"DELETE_CONFLUENCE_PAGE_LINK_SUCCESS"}),d=()=>({type:"DELETE_CONFLUENCE_PAGE_LINK_FAILED"})},"./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"h",(function(){return r})),s.d(t,"i",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"f",(function(){return d}));const n=e=>({type:"ADD_CONTENT_PANEL_REQUEST",payload:e}),a=e=>({type:"ADD_CONTENT_PANEL_SUCCESS",payload:e}),i=e=>({type:"ADD_CONTENT_PANEL_FAILURE",payload:e}),r=e=>({type:"REMOVE_CONTENT_PANEL_REQUEST",payload:e}),o=e=>({type:"REMOVE_CONTENT_PANEL_SUCCESS",payload:e}),c=e=>({type:"REMOVE_CONTENT_PANEL_FAILURE",payload:e}),l=e=>({type:"CONTENT_PANEL_SELECTED",payload:e}),u=e=>({type:"CONTENT_PANEL_UNSELECT",payload:e}),d=()=>({type:"CONTENT_PANELS_CUSTOMISED_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/editor-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return i}));const n=()=>({type:"EDITOR_CHANGE_FAILURE"}),a=()=>({type:"EDITOR_EXPANDED_FAILURE"}),i=()=>({type:"EDITOR_SAVE_FAILURE"})},"./src/packages/issue/issue-view/src/actions/external-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"d",(function(){return o}));var n=s("./src/packages/issue/issue-view/src/actions/comment-actions.js");const a=e=>({type:"EDIT_FIELD",payload:{fieldId:e}}),i=()=>({type:"ADD_COMMENT"}),r=()=>({type:"ASSIGN_TO_ME"}),o=e=>{switch(e.type){case"ADD_COMMENT":return Object(n.c)();case"ASSIGN_TO_ME":return(()=>({type:"ASSIGN_TO_ME_EXTERNAL"}))();case"EDIT_FIELD":return(e=>({type:"FIELD_EDIT_REQUEST_EXTERNAL",payload:{fieldId:e}}))(e.payload.fieldId);default:throw new Error(`Unhandled external action type: ${e.type}`)}}},"./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return i}));const n=()=>({type:"FETCH_CONFLUENCE_APP_LINKS_REQUEST"}),a=e=>({type:"FETCH_CONFLUENCE_APP_LINKS_SUCCESS",payload:e.applicationLinks}),i=()=>({type:"FETCH_CONFLUENCE_APP_LINKS_FAILED"})},"./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return i}));const n=()=>({type:"FETCH_JIRA_APP_LINKS_REQUEST"}),a=e=>({type:"FETCH_JIRA_APP_LINKS_SUCCESS",payload:e}),i=()=>({type:"FETCH_JIRA_APP_LINKS_FAILED"})},"./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));const n=()=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST"}),a=e=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_SUCCESS",payload:e}),i=()=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_FAILED"})},"./src/packages/issue/issue-view/src/actions/forge-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"i",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return u})),s.d(t,"h",(function(){return d}));const n=e=>({type:"FETCH_FORGE_SUCCESS",payload:e}),a=e=>({type:"FORGE_ISSUE_ACTION_EXEC",payload:e}),i=()=>({type:"FORGE_ISSUE_ACTION_RENDERED"}),r=()=>({type:"FORGE_ISSUE_ACTION_CLOSE"}),o=e=>({type:"FORGE_ISSUE_PANEL_ADDED",payload:e}),c=e=>({type:"FORGE_NEW_ISSUE_PANEL_UNTRACK",payload:e}),l=e=>({type:"FORGE_ISSUE_PANEL_REMOVED",payload:e}),u=e=>({type:"FORGE_ISSUE_PANEL_UPDATE_REQUEST",payload:e}),d=e=>({type:"FORGE_ISSUE_PANEL_UPDATED",payload:e})},"./src/packages/issue/issue-view/src/actions/issue-delete-actions.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return o}));const n=()=>({type:"OPEN_DELETE_ISSUE_MODAL"}),a=()=>({type:"CLOSE_DELETE_ISSUE_MODAL"}),i=(e,t)=>({type:"DELETE_ISSUE_REQUEST",payload:{issueKey:e,analyticsEvent:t}}),r=e=>({type:"DELETE_ISSUE_SUCCESS",payload:e}),o=(e,t)=>({type:"DELETE_ISSUE_FAILURE",payload:{issueKey:e,error:t}})},"./src/packages/issue/issue-view/src/actions/issue-links-actions.js":function(e,t,s){"use strict";s.d(t,"k",(function(){return n})),s.d(t,"j",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"o",(function(){return c})),s.d(t,"q",(function(){return l})),s.d(t,"r",(function(){return u})),s.d(t,"m",(function(){return d})),s.d(t,"n",(function(){return p})),s.d(t,"p",(function(){return m})),s.d(t,"l",(function(){return b})),s.d(t,"i",(function(){return f})),s.d(t,"h",(function(){return g})),s.d(t,"a",(function(){return h})),s.d(t,"b",(function(){return y})),s.d(t,"g",(function(){return O})),s.d(t,"s",(function(){return j})),s.d(t,"c",(function(){return E}));const n=e=>({type:"FETCH_LINKED_ISSUES_SUCCESS",payload:e}),a=e=>({type:"FETCH_LINKED_ISSUES_FAILURE",payload:e}),i=(e,t)=>({type:"DELETE_LINKED_ISSUE_REQUEST",payload:{linkedIssueId:e,analyticsEvent:t}}),r=(e,t)=>({type:"DELETE_LINKED_ISSUE_SUCCESS",payload:e,meta:t}),o=e=>({type:"DELETE_LINKED_ISSUE_FAILURE",payload:e}),c=(e,t,s)=>({type:"SAVE_LINKED_ISSUE_REQUEST",payload:{newIssueLinks:e,analyticsEvent:s,requestAnalyticsEvent:t}}),l=(e,t)=>({type:"SAVE_LINKED_ISSUE_SUCCESS",payload:{optimisticId:e,analyticsEvent:t}}),u=e=>({type:"SAVE_LINKED_ISSUE_SUCCESS",payload:{optimisticId:e}}),d=(e,t,s)=>({type:"SAVE_LINKED_ISSUE_FAILURE",payload:{optimisticId:e,error:t,analyticsEvent:s}}),p=(e,t)=>({type:"SAVE_LINKED_ISSUE_FAILURE",payload:{optimisticId:e,error:t}}),m=(e,t,s)=>({type:"SAVE_LINKED_ISSUE_RETRY",payload:{optimisticId:e,analyticsEvent:s,requestAnalyticsEvent:t}}),b=e=>({type:"SAVE_LINKED_ISSUE_CANCEL",payload:e}),f=(e,t,s,n)=>({type:"FETCH_LINKED_ISSUES_DATA_SUCCESS",payload:{issueLinks:e,linkedIssues:t,optimisticIds:s,optimisticLinks:n}}),g=(e,t)=>({type:"FETCH_LINKED_ISSUES_DATA_FAILURE",payload:{optimisticIds:e,error:t}}),h=()=>({type:"ADD_ISSUE_LINK_CLICKED"}),y=()=>({type:"ADD_ISSUE_LINK_CLOSED"}),O=()=>({type:"FETCH_CREATE_LINKED_ISSUE_PERMISSION_REQUEST"}),j=e=>({type:"SET_CREATE_LINKED_ISSUE_PERMISSION",payload:{canCreateLinkedIssue:e}}),E=e=>({type:"CREATE_LINKED_ISSUE_SUCCESS",payload:{newIssueLinks:e}})},"./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));const n=({fromIssueKey:e,toIssueKey:t})=>({type:"NAVIGATE_TO_NEW_ISSUE",payload:{fromIssueKey:e,toIssueKey:t}}),a=(e,t)=>({type:"NAVIGATE_TO_PROJECT",payload:{projectUrl:e,pushAction:t}}),i=e=>({type:"NAVIGATE_TO_SPRINT",payload:{sprintId:e}}),r=e=>({type:"LOAD_NEW_ISSUE",payload:{issueKey:e}}),o=(e,t)=>({type:"LOAD_RECENT_ISSUE",payload:{issueKey:e,issueState:t}})},"./src/packages/issue/issue-view/src/actions/issue-preview-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));var n=s("./src/packages/issue/issue-view/src/feature-flags.js");const a=e=>({type:"UPDATE_PREVIEW_REQUEST",payload:e}),i=(e,t)=>({type:"REFRESH_DATA_PROVIDER_ISSUE",payload:{issueKey:e,fieldData:t}}),r=e=>({type:"ISSUE_PREVIEW_FAILURE",payload:Object(n.isImproveIssueExpressLoggingEnabled)()?e:{error:e}})},"./src/packages/issue/issue-view/src/actions/issue-remote-data-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));const n=e=>({type:"FETCH_ISSUE_REMOTE_DATA_REQUEST",payload:e}),a=e=>({type:"FETCH_ISSUE_REMOTE_DATA_SUCCESS",payload:e}),i=()=>({type:"FETCH_ISSUE_REMOTE_DATA_FAILURE"})},"./src/packages/issue/issue-view/src/actions/login-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=()=>({type:"LOGIN"}),a=e=>({type:"LOGIN_SUCCESSFUL",payload:e})},"./src/packages/issue/issue-view/src/actions/prefetch-issues-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=({issueKeys:e,issueIds:t})=>({type:"PREFETCH_ISSUES",payload:{issueKeys:e||[],issueIds:t||[]}})},"./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"g",(function(){return l})),s.d(t,"d",(function(){return u}));const n=(e,t)=>({type:"DELETE_REMOTE_LINKED_ISSUE_REQUEST",payload:{globalId:e,analyticsEvent:t}}),a=e=>({type:"DELETE_REMOTE_LINKED_ISSUE_SUCCESS",payload:e}),i=e=>({type:"DELETE_REMOTE_LINKED_ISSUE_FAILURE",payload:e}),r=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_REQUEST",payload:{newRemoteIssueLink:e,requestAnalyticsEvent:t,analyticsEvent:s}}),o=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_SUCCESS",payload:{optimisticId:e,saveRemoteLinkResponse:t,analyticsEvent:s}}),c=(e,t,s,n)=>({type:"SAVE_REMOTE_LINKED_ISSUE_FAILURE",payload:{optimisticId:e,error:s,analyticsEvent:n,remoteIssueKey:t}}),l=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_RETRY",payload:{optimisticId:e,requestAnalyticsEvent:t,analyticsEvent:s}}),u=e=>({type:"SAVE_REMOTE_LINKED_ISSUE_CANCEL",payload:e})},"./src/packages/issue/issue-view/src/actions/request-panel-metadata-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r}));const n=()=>({type:"FETCH_REQUEST_PANEL_METADATA"}),a=e=>{switch(e){case"portal":return"portal";case"email":return"email";case"api":return"api";case"jira":return"jira";case"deployment":return"deployment";case"anonymousportal":return"anonymousportal";default:return"unknown"}},i=e=>({type:"REQUEST_PANEL_METADATA_FETCH_SUCCESS",payload:{channel:a(e.channel),requestUrl:e.requestUrl,csatComment:e.csatComment}}),r=()=>({type:"REQUEST_PANEL_METADATA_FETCH_FAILURE"})},"./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>({type:"SHARE_AS_COMMENT",payload:{value:e}}),a=()=>({type:"CLEAR_SHARED_AS_COMMENT_VALUES"})},"./src/packages/issue/issue-view/src/actions/web-links-actions.js":function(e,t,s){"use strict";s.d(t,"k",(function(){return a})),s.d(t,"j",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"h",(function(){return u})),s.d(t,"i",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"f",(function(){return b}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=()=>({type:"SHOW_CREATE_WEB_LINK_FORM"}),i=()=>({type:"HIDE_CREATE_WEB_LINK_FORM"}),r=(e,t,s)=>({type:"CREATE_WEB_LINK_REQUEST",payload:{optimisticId:Object(n.u)(`optimistic-web-link-${Date.now()}`),href:e,linkText:t,iconUrl:s}}),o=(e,t)=>({type:"CREATE_WEB_LINK_SUCCESS",payload:{optimisticId:e,webLink:t}}),c=e=>({type:"CREATE_WEB_LINK_FAILED",payload:{optimisticId:e}}),l=e=>({type:"CREATE_WEB_LINK_RETRY",payload:{optimisticId:e}}),u=e=>({type:"DELETE_WEB_LINK_REQUEST",payload:{id:e}}),d=e=>({type:"DELETE_WEB_LINK_SUCCESS",payload:{id:e}}),p=e=>({type:"DELETE_WEB_LINK_FAILED",payload:{id:e}}),m=e=>({type:"CANCEL_FAILED_WEB_LINK_DELETION",payload:{id:e}}),b=e=>({type:"DELETE_OPTIMISTIC_WEB_LINK",payload:{id:e}})},"./src/packages/issue/issue-view/src/activity/comment/comment-view/content/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["flex:1 1 100%;min-width:0;input{font:inherit;}"])},"./src/packages/issue/issue-view/src/activity/comment/comment-visibility/assets/Error.svg":function(e,t,s){e.exports=s.p+"assets/Error.be0d40cfbcd6c064b92b9530fd4cf3ce.8.svg"},"./src/packages/issue/issue-view/src/activity/comment/servicedesk-comment-editor-container/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),r=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),o=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),c=s("./node_modules/react/index.js"),l=s.n(c),u=s("./node_modules/react-intl/lib/index.es.js"),d=s("./node_modules/lodash/noop.js"),p=s.n(d),m=s("./node_modules/@atlaskit/tabs/dist/esm/components/Tabs.js"),b=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),f=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js"),g=Object(u.defineMessages)({replyToCustomer:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.reply-to-customer-button",defaultMessage:"Reply to customer"},addInternalNote:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.add-internal-note-button",defaultMessage:"Add internal note"},loadingAttachments:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.loading-attachments",defaultMessage:"Loading attachments\u2026"}}),h=s("./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js"),y=s("./node_modules/@atlaskit/icon/glyph/attachment.js"),O=s.n(y),j=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js"),E=Object(u.defineMessages)({addAttachmentLabel:{id:"issue.label-for-add-attachment-button",defaultMessage:"Add attachment"}}),v=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),k=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const w=v.default.span(["padding:","px;"],k.e/2),S=v.default.div(["margin-left:auto;margin-right:","px;"],k.e),I=e=>{const{intl:{formatMessage:t},onClick:s,isCommentAttachmentInProgress:n}=e;return(l.a.createElement(S,null,l.a.createElement(j.a,{content:t(E.addAttachmentLabel),position:"bottom"},l.a.createElement(f.a,{spacing:"none",appearance:"subtle-link",isLoading:n,iconBefore:l.a.createElement(w,null,l.a.createElement(O.a,{size:"medium",label:t(E.addAttachmentLabel)})),externalId:"attachment",onClick:s}))))};I.displayName="AttachmentPicker";var C=Object(u.injectIntl)(I),T=Object(r.a)([Object(n.b)(e=>({isCommentAttachmentInProgress:Object(o.x)(e)}),e=>({onClick:()=>{e(Object(h.b)())}}))])(C),P=s("./node_modules/@atlaskit/theme/dist/esm/index.js");const _=v.default.div(["white-space:nowrap;border:1px solid ",";height:","px;box-sizing:border-box;padding:","px 0;border-radius:","px;display:flex;align-items:center;"],P.a.N40,5*k.e,k.e/2,k.a),x=v.default.div(["padding:0 ","px;"],k.e);class D extends c.Component{renderReplyToCustomer(){const{onReplyToCustomer:e,intl:{formatMessage:t}}=this.props;return(l.a.createElement(l.a.Fragment,null," / ",l.a.createElement(f.a,{appearance:"link",onClick:e},t(g.replyToCustomer))))}render(){const{onAddInternalNote:e,isCommentAttachmentInProgress:t,intl:{formatMessage:s},isPublicCommentAllowed:n}=this.props;return(l.a.createElement(_,null,t?l.a.createElement(x,null,s(g.loadingAttachments)):l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{appearance:"link",onClick:e},s(g.addInternalNote)),n&&this.renderReplyToCustomer()),l.a.createElement(T,null)))}}D.displayName="CollapsedEditorView";var A=Object(u.injectIntl)(D),M=Object(r.a)([Object(b.a)({onReplyToCustomer:"onReplyToCustomer",onAddInternalNote:"onAddInternalNote"}),Object(n.b)(e=>({isCommentAttachmentInProgress:Object(o.x)(e)}),{})])(A);const L=v.default.div(["margin:0 -","px ","px;"],k.e,2*k.e),R={public:{id:"public",label:l.a.createElement(u.FormattedMessage,g.replyToCustomer),content:l.a.createElement("div",null)},internal:{id:"internal",label:l.a.createElement(u.FormattedMessage,g.addInternalNote),content:l.a.createElement("div",null)}};class N extends c.Component{constructor(...e){super(...e),this.onReplyToCustomer=()=>{this.props.onCommentVisibilityChange(!1),this.expandEditor()},this.onAddInternalNote=()=>{this.props.onCommentVisibilityChange(!0),this.expandEditor()},this.onTabSelect=e=>{this.props.onCommentVisibilityChange("internal"===e.id)},this.expandEditor=()=>{const{isExpanded:e,onExpanded:t}=this.props;e||t&&t()}}getExpandedView(){const{isInternal:e,isPublicCommentAllowed:t,children:s}=this.props,n=t&&!e?R.public:R.internal,a=t?[R.internal,R.public]:[R.internal];return l.a.createElement(l.a.Fragment,null,l.a.createElement(L,null,l.a.createElement(m.a,{tabs:a,selected:n,onSelect:this.onTabSelect})),s)}getCollapsedView(){return l.a.createElement(M,{onReplyToCustomer:this.onReplyToCustomer,onAddInternalNote:this.onAddInternalNote,isPublicCommentAllowed:this.props.isPublicCommentAllowed})}render(){const{isExpanded:e}=this.props;return e?this.getExpandedView():this.getCollapsedView()}}N.displayName="ServiceDeskCommentEditorContainer",N.defaultProps={isExpanded:!1,isInternal:!1,isPublicCommentAllowed:!1,onExpanded:p.a,onCommentVisibilityChange:p.a};var U=Object(u.injectIntl)(N);function F(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function V(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?F(Object(s),!0).forEach((function(t){K(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):F(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function K(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function B(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}t.a=Object(r.a)([Object(n.b)((e,t)=>({isInternal:Object(o.C)(t.commentId)(e),isPublicCommentAllowed:Object(i.e)(e)}),(e,t)=>({onCommentVisibilityChange:s=>{e(Object(a.d)(t.commentId,s))}}),(e,t,s)=>{const{commentId:n}=s;return V(V(V({},B(s,["commentId"])),e),t)})])(U)},"./src/packages/issue/issue-view/src/activity/common/component/feed-skeleton/view.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),r=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),o=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js"),c=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),u=s("./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js"),d=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js");const p=Object(c.default)(d.a)(["flex-direction:column;width:100%;"]),m=Object(c.default)(i.a)(["display:flex;"]),b=Object(c.default)(r.a)(["width:9px;flex-shrink:0;"]),f=Object(c.default)(r.a)(["height:22px;"]),g=Object(c.default)(u.a)(["background-position:-2px -2px;border-bottom:","px solid white;flex-shrink:0;"],4*l.e),h=a.a.createElement(a.a.Fragment,null,a.a.createElement(g,null),a.a.createElement(b,null),a.a.createElement(i.a,null,a.a.createElement(i.a,{paddingTop:1,paddingBottom:5},a.a.createElement(o.a,{fontSize:14,lineHeight:16,intrusion:250})),a.a.createElement(i.a,{paddingTop:4,paddingBottom:0},a.a.createElement(o.a,{fontSize:24,lineHeight:24,intrusion:0})),a.a.createElement(f,null)));t.a=()=>a.a.createElement(p,null,a.a.createElement(r.b,null),a.a.createElement(m,{paddingTop:0,paddingBottom:0},h),a.a.createElement(m,{paddingTop:0,paddingBottom:0},h))},"./src/packages/issue/issue-view/src/activity/common/component/load-more-button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const c=r.default.div(["margin:","px 0;"],2*o.e),l=({onClick:e,isDisabled:t,isLoading:s,numberToLoad:n,children:r})=>n<=0?null:a.a.createElement(c,null,a.a.createElement(i.a,{onClick:e,isDisabled:t,isLoading:s,shouldFitContainer:!0},r));l.displayName="LoadMoreButton";var u=l;t.a=u},"./src/packages/issue/issue-view/src/activity/common/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({editedBy:{id:"issue.common.messages.activity.edited-by",defaultMessage:"{timestamp} by {author}"},anonymous:{id:"issue.common.messages.activity.anonymous",defaultMessage:"Anonymous"}})},"./src/packages/issue/issue-view/src/activity/common/styles/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"f",(function(){return u})),s.d(t,"a",(function(){return d}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=n.default.span(["font-weight:500;"]);r.displayName="Emphasise";const o=n.default.span(["grid-row:1;margin-left:","px;white-space:nowrap;"],.5*i.e);o.displayName="GridContainer";const c=n.default.div(["margin:","px 0;"],3*i.e);n.default.span(["margin-left:","px;"],i.e).displayName="TimestampContainer";const l=n.default.span(["margin-left:-","px;display:grid;"],i.e/2),u=n.default.span(["display:grid;"]);u.displayName="GridContentContainer";const d={always:Object(n.css)(["color:",";"],a.a.N500),whenDisplaySettingSwitchable:Object(n.css)([":hover{color:inherit;}"])}},"./src/packages/issue/issue-view/src/activity/worklog/state/selectors.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js");const r=Object(n.createSelector)(a.I,e=>e.worklog),o=Object(n.createSelector)(i.i,e=>e.remainingEstimateSeconds||0),c=Object(n.createSelector)(r,e=>e.loadingStage),l=Object(n.createSelector)(r,e=>e.highlightedWorklogId)},"./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/noop.js"),i=s.n(a),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),o=s("./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js");class c extends n.Component{constructor(...e){super(...e),this.state={stackIndex:0},this.incrementStackIndex=()=>{this.setState({stackIndex:this.state.stackIndex+1})},this.decrementStackIndex=()=>{this.setState({stackIndex:this.state.stackIndex-1})}}componentDidMount(){Object(r.a)({name:"jira/util/events"}).then(({bind:e})=>{e("beforeShow",this.incrementStackIndex),e("Dialog.hide",this.decrementStackIndex)}).catch(i.a),Object(o.a)("show",this.incrementStackIndex),Object(o.a)("hide",this.decrementStackIndex)}componentWillUnmount(){Object(r.a)({name:"jira/util/events"}).then(({unbind:e})=>{e("beforeShow",this.incrementStackIndex),e("Dialog.hide",this.decrementStackIndex)}).catch(i.a),Object(o.b)("show",this.incrementStackIndex),Object(o.b)("hide",this.decrementStackIndex)}render(){return this.props.children(this.state.stackIndex)}}c.displayName="AuiModalStackIndex"},"./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"g",(function(){return o})),s.d(t,"h",(function(){return c})),s.d(t,"i",(function(){return l})),s.d(t,"b",(function(){return u})),s.d(t,"e",(function(){return d}));const n={key:"FETCH_FIELD_DATA",prefix:"ISSUE_DETAILS"},a={key:"FETCH_INITIAL_COMMENTS",prefix:"ISSUE_DETAILS"},i={key:"FETCH_ISSUE_LINK_TYPES",prefix:"ISSUE_DETAILS"},r={key:"FETCH_SUBTASK_TYPES",prefix:"ISSUE_DETAILS"},o={key:"FETCH_LOAD_CONTEXT",prefix:"ISSUE_DETAILS"},c={key:"FETCH_USER_AUTH",prefix:"ISSUE_DETAILS"},l={key:"FETCH_VIEW_CONTEXT",prefix:"ISSUE_DETAILS"},u={key:"FETCH_ECOSYSTEM_EXTENSIONS",prefix:"ISSUE_DETAILS"},d={key:"FETCH_ISSUE_PROPERTIES",prefix:"ISSUE_DETAILS"}},"./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return d}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),a=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=[a.g,a.a,a.e,a.d,a.i,a.f,a.c,a.b,a.h];let l;const u=()=>{c.forEach(e=>{const t=`BEGIN_${e.prefix}_${e.key}`,s=`END_${e.prefix}_${e.key}`;n.default.clearMarks&&(n.default.clearMarks(t),n.default.clearMarks(s))}),l=null},d=()=>(l||(l=(()=>c.reduce((e,t)=>{const s=`BEGIN_${t.prefix}_${t.key}`,a=`END_${t.prefix}_${t.key}`,i=Object(n.timeBetweenMarks)(s,a);if(null!=i&&i>0){const o=r(r({},e),{},{[`${t.key}_NETWORK`]:i});return n.default.clearMarks&&(n.default.clearMarks(s),n.default.clearMarks(a)),o}return e},{}))()),l)},"./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"g",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"a",(function(){return u}));const n=()=>({type:"FETCH_ISSUE_REQUEST"}),a=e=>({type:"FETCH_ISSUE_SUCCESS",payload:e}),i=e=>({type:"FETCH_ISSUE_FAILURE",payload:e}),r=()=>({type:"REFRESH_ISSUE_REQUEST"}),o=e=>({type:"REFRESH_ISSUE_SUCCESS",payload:e}),c=()=>({type:"REFRESH_ECOSYSTEM_REQUEST"}),l=e=>({type:"REFRESH_ECOSYSTEM_SUCCESS",payload:e}),u=()=>({type:"FETCH_FORGE_REQUEST"})},"./src/packages/issue/issue-view/src/common/actions/timestamp-display-setting-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>({type:"SET_TIMESTAMP_DISPLAY_SETTING",payload:e})},"./src/packages/issue/issue-view/src/common/actions/worklog-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"E",(function(){return i})),s.d(t,"G",(function(){return r})),s.d(t,"D",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"m",(function(){return l})),s.d(t,"n",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"A",(function(){return p})),s.d(t,"C",(function(){return m})),s.d(t,"B",(function(){return b})),s.d(t,"l",(function(){return f})),s.d(t,"k",(function(){return g})),s.d(t,"K",(function(){return h})),s.d(t,"L",(function(){return y})),s.d(t,"J",(function(){return O})),s.d(t,"j",(function(){return j})),s.d(t,"F",(function(){return E})),s.d(t,"H",(function(){return v})),s.d(t,"o",(function(){return k})),s.d(t,"d",(function(){return w})),s.d(t,"u",(function(){return S})),s.d(t,"v",(function(){return I})),s.d(t,"t",(function(){return C})),s.d(t,"b",(function(){return T})),s.d(t,"q",(function(){return P})),s.d(t,"c",(function(){return _})),s.d(t,"r",(function(){return x})),s.d(t,"p",(function(){return D})),s.d(t,"s",(function(){return A})),s.d(t,"e",(function(){return M})),s.d(t,"w",(function(){return L})),s.d(t,"x",(function(){return R})),s.d(t,"f",(function(){return N})),s.d(t,"y",(function(){return U})),s.d(t,"z",(function(){return F})),s.d(t,"I",(function(){return V}));const n="state.FETCH_WORKLOGS_REQUEST",a="state.FETCH_WORKLOGS_REQUEST_INITIAL",i=(e,t,s)=>({type:a,payload:{baseUrl:e,issueKey:t},meta:{analyticsEvent:s}}),r=(e,t,s)=>({type:"state.FETCH_WORKLOGS_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,totalWorklogs:s}}),o=()=>({type:"state.FETCH_WORKLOGS_FAILURE"}),c="state.ADD_WORKLOG_REQUEST",l=(e,t)=>({type:c,payload:{values:e},meta:{analyticsEvent:t}}),u=(e,t,s)=>({type:"state.ADD_WORKLOG_SUCCESS",payload:{worklogId:e,timeTracking:t},meta:s}),d="state.FETCH_SURROUNDING_WORKLOGS_BY_ID",p=e=>({type:d,payload:{worklogId:e}}),m=(e,t,s,n)=>({type:"state.FETCH_WORKLOGS_BY_ID_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,startIndex:s,totalWorklogs:n}}),b=()=>({type:"state.FETCH_WORKLOGS_BY_ID_FAILURE"}),f=()=>({type:"state.ADD_WORKLOG_FAILURE"}),g="state.UPDATE_TIME_REMAINING_REQUEST",h=(e,t)=>({type:g,payload:{timeRemaining:e},meta:{analyticsEvent:t}}),y=e=>({type:"state.UPDATE_TIME_REMAINING_SUCCESS",payload:{timeRemaining:e}}),O=()=>({type:"state.UPDATE_TIME_REMAINING_FAILURE"}),j="state.FETCH_WORKLOGS_RETRY",E=(e,t,s)=>({type:j,payload:{baseUrl:e,issueKey:t},meta:{analyticsEvent:s}}),v=(e,t)=>({type:"state.OPEN_MODAL",payload:{modalType:e,worklogId:t}}),k=()=>({type:"state.CLOSE_MODAL"}),w="state.EDIT_WORKLOG_REQUEST",S=(e,t,s)=>({type:w,payload:{worklogId:e,values:t},meta:{analyticsEvent:s}}),I=(e,t,s,n)=>({type:"state.EDIT_WORKLOG_SUCCESS",payload:{worklogs:e,worklogId:t,timeTrackingDeltas:s},meta:n}),C=()=>({type:"state.EDIT_WORKLOG_FAILURE"}),T="state.DELETE_WORKLOG_REQUEST",P=(e,t,s,n)=>({type:T,payload:{worklogId:e,timeRemaining:t,isAdjustTimeRemainingChecked:s},meta:{analyticsEvent:n}}),_="state.DELETE_WORKLOG_SUCCESS",x=(e,t)=>({type:_,payload:{worklogId:e,timeTrackingDeltas:t}}),D=()=>({type:"state.DELETE_WORKLOG_FAILURE"}),A=()=>({type:"state.DISPOSE_WORKLOG_APP"}),M="state.FETCH_NEWER_WORKLOGS_REQUEST",L=(e,t,s)=>({type:M,payload:{baseUrl:e,issueKey:t,analyticsEvent:s}}),R=(e,t,s)=>({type:"state.FETCH_NEWER_WORKLOGS_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,totalWorklogs:s}}),N="state.FETCH_OLDER_WORKLOGS_REQUEST",U=(e,t,s)=>({type:N,payload:{baseUrl:e,issueKey:t,analyticsEvent:s}}),F=(e,t,s)=>({type:"state.FETCH_OLDER_WORKLOGS_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,totalWorklogs:s}}),V=e=>({type:"SET_WORKLOG_SCROLL_STATUS",payload:{status:e}})},"./src/packages/issue/issue-view/src/common/component/editor/async.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),r=s("./src/packages/platform/ui/error-boundary/src/main.js"),o=s("./src/packages/issue/issue-view/src/common/component/renderer/index.js");const c=({defaultValue:e,mediaContext:t})=>a.a.createElement(o.a,{mediaContext:t,adf:e});c.displayName="IssueEditorReadonly";const l=({children:e,fallback:t,packageName:s})=>a.a.createElement(r.a,{id:"issue-editor",packageName:s,render:()=>t},a.a.createElement(i.a,{fallback:t},e));l.displayName="IssueEditorBoundary"},"./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/isFunction.js"),r=s.n(i),o=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t.a=(e,t,s)=>{const i=r()(e)?e:()=>e||null;class d extends n.Component{constructor(e){super(e),this.startTime=void 0,this.mountTime=void 0,this.startTime=c.default.now()}componentDidMount(){this.mountTime=c.default.now()}componentWillUnmount(){const e=c.default.now(),t=e-this.startTime,n=this.mountTime-this.startTime,a=e-this.mountTime;t>0&&this.props.onWillUnmount(t,n,a,s)}render(){return i()}}d.displayName="LoadingWrapper",d.defaultProps={onWillUnmount:()=>{}};const p=Object(o.a)(e=>({onWillUnmount:(t,s,n,a)=>e("loading-component",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({duration:t,initializationTime:s,mountingTime:n},a||{}))}))(d);return(a.a.createElement(p,{externalId:t}))}},"./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return f}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js"),r=s("./node_modules/@atlaskit/icon/glyph/check-circle.js"),o=s.n(r),c=s("./node_modules/@atlaskit/icon/glyph/link.js"),l=s.n(c),u=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/field-copy-text/index.js"),p=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const b=p.default.div(["padding-top:","px;opacity:0;transition:opacity 0.2s ease,transform 0.2s ease;transform:translate(","px,0);padding-left:","px;display:flex;align-items:flex-end;",";&:focus{opacity:1;transform:translate(0,0);}"],m.e/4,-m.e,m.e/2,e=>e.isVisible&&"\n        opacity: 1;\n        transform: translate(0, 0);\n    ");class f extends n.Component{constructor(...e){super(...e),this.state={isCopied:!1},this.onCopySuccess=e=>{this.setState({isCopied:e})},this.onCopyReset=()=>{this.setState({isCopied:!1})}}render(){const{id:e,label:t,fullIssueUrl:s,isVisible:n,onCopyClick:r}=this.props,{isCopied:c}=this.state;return a.a.createElement(b,{isVisible:n,className:"issue_view_permalink_button_wrapper"},a.a.createElement(d.a,{id:e,label:t,tooltipDelay:0,tooltipLabel:t,tooltipLabelPosition:"top",shouldFitContainer:!0,value:s,hideFieldText:!0,remountOnChange:!0,onCopyClick:r,onClickChange:e=>this.onCopySuccess(e),onCopyReset:this.onCopyReset},a.a.createElement(i.a,{appearance:"subtle-link",iconBefore:c?a.a.createElement(o.a,{label:"",primaryColor:u.a.G500,size:"small"}):a.a.createElement(l.a,{size:"small",label:t}),spacing:"none"})))}}f.displayName="PermalinkButton"},"./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js");const a=e=>{const[t,s,a]=((e=!1)=>{const[t,s]=Object(n.useState)(e);return[t,()=>{s(!0)},()=>{s(!1)}]})(e.defaultIsVisible);return e.children({isVisible:t,show:s,hide:a})};a.defaultProps={defaultIsVisible:!1};t.a=a},"./src/packages/issue/issue-view/src/common/component/renderer/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/with-link-actions/index.js"),i=s("./src/packages/issue/issue-view/src/common/media/components/with-media-provider/with-media-provider.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./node_modules/react/index.js"),c=s.n(o),l=s("./node_modules/@atlaskit/adf-schema/dist/esm/schema/default-schema.js"),u=s("./node_modules/@atlaskit/editor-common/dist/esm/provider-factory/provider-factory.js"),d=s("./node_modules/@atlaskit/renderer/dist/esm/ui/Renderer/index.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/check-for-href.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/services/emoji.js"),f=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),g=s("./src/packages/issue/issue-view/src/media-feature-flags.js"),h=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js");class y extends o.PureComponent{constructor(e){super(e),this.onInlineCardClicked=(e,t)=>{const{linkActions:s}=this.props,n=e||window.event;n.preventDefault();const a=n.metaKey||0!==n.button;Object(m.a)(t,a,s.push)},this.onMentionClicked=(e,t,s)=>{const{linkActions:n,mentionEncoder:a}=this.props;if(a){s.stopPropagation();const t=s,i=t.metaKey||0!==t.button;Object(m.a)(a(e),i,n.push)}},this.onContentSelected=e=>{e.target instanceof window.Element&&!Object(p.a)(e.target,e.currentTarget)&&!this.checkForMedia(e.target,e.currentTarget)||e.stopPropagation()},this.checkForMedia=(e,t)=>!(!e||e===t)&&(!(!e.className.includes("rich-media-item")&&!e.className.includes("MediaGroup")&&"media-viewer-popup"!==e.getAttribute("data-testid"))||this.checkForMedia(e.parentElement,t)),this.dataProviders=void 0,this.eventHandlers=void 0,this.isEmpty=()=>this.isAdfValueEmpty(),this.isAdfValueEmpty=()=>{const{adf:e}=this.props;return!e||Object(f.f)(e)};const{mediaProvider:t,mentionProvider:s,contextIdentifier:n}=this.props;this.dataProviders=new u.a,this.dataProviders.setProvider("mediaProvider",t),this.dataProviders.setProvider("mentionProvider",Promise.resolve(s)),this.dataProviders.setProvider("emojiProvider",Object(b.b)(this.props.cloudId,this.props.loggedInUserAccountId)),n&&this.dataProviders.setProvider("contextIdentifierProvider",Promise.resolve(n)),this.eventHandlers={mention:{onClick:this.onMentionClicked},smartCard:{onClick:this.onInlineCardClicked}}}render(){const{adf:e}=this.props;return this.isEmpty()?c.a.createElement(h.b,null,this.props.placeholder):c.a.createElement("div",{onClick:this.onContentSelected,onKeyPress:this.onContentSelected,role:"presentation"},c.a.createElement(d.a,{schema:l.a,document:Object(f.g)(e),dataProviders:this.dataProviders,eventHandlers:this.eventHandlers,media:{featureFlags:Object(g.a)()}}))}}y.displayName="Renderer",y.displayName="Renderer",y.defaultProps={adf:void 0,placeholder:void 0,mentionEncoder:()=>""};const O=Object(n.b)(e=>({cloudId:Object(r.j)(e),loggedInUserAccountId:Object(r.a)(e)}),{})(y),j=Object(i.a)(Object(a.a)(O));t.a=j},"./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"a",(function(){return u}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=n.default.div(["display:flex;align-items:baseline;flex-wrap:nowrap;justify-content:",";"],e=>e.leftAlign?"normal":"space-between"),o=n.default.div(["display:flex;justify-content:flex-start;align-items:baseline;max-width:100%;"]),c=n.default.h2(["",";line-height:","px;color:",";overflow-wrap:break-word;min-width:0;"],a.c.h400(),3*i.e,a.a.heading),l=n.default.div(["display:flex;align-items:center;",";"],e=>e.leftAlign?`margin-left: ${i.e}px`:""),u=n.default.div(["",";margin-left:","px;margin-top:0;flex-shrink:0;"],a.c.h100(),i.e)},"./src/packages/issue/issue-view/src/common/component/timestamp/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return O}));var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/lodash/flow.js"),r=s.n(i),o=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),c=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),l=s("./src/packages/issue/issue-view/src/common/actions/timestamp-display-setting-actions.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/timestamp-display-setting-selector.js"),d=s("./node_modules/react/index.js"),p=s.n(d),m=s("./node_modules/lodash/noop.js"),b=s.n(m),f=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js");const g=e=>(e=>(Date.now()-new Date(e))/864e5)(e)<8?"RELATIVE":"ABSOLUTE";const h=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.span(["cursor:",";",";",";"],({canSwitchDisplaySetting:e})=>e?"pointer":"default",({extraStyles:e})=>e.always,({canSwitchDisplaySetting:e,extraStyles:{whenDisplaySettingSwitchable:t}})=>e?t:"");h.displayName="TimestampWrapper";class y extends d.Component{constructor(...e){super(...e),this.onAbsoluteClick=e=>{this.props.onSwitchDisplaySetting("RELATIVE"),this.props.onAbsoluteTimestampClick(e)},this.onRelativeClick=e=>{this.props.onSwitchDisplaySetting("ABSOLUTE"),this.props.onRelativeTimestampClick(e)},this.formatAbsoluteTimestamp=()=>{const{intl:e,value:t,timeZone:s}=this.props;return e.formatDate(t,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZone:s})},this.renderAbsolute=e=>p.a.createElement(h,{canSwitchDisplaySetting:e,onClick:e?this.onAbsoluteClick:b.a,extraStyles:this.props.extraStyles},this.formatAbsoluteTimestamp()),this.renderRelative=()=>p.a.createElement(h,{canSwitchDisplaySetting:!0,onClick:this.onRelativeClick,extraStyles:this.props.extraStyles},p.a.createElement(f.a,{content:this.formatAbsoluteTimestamp(),position:this.props.tooltipPosition,tag:"span"},p.a.createElement(n.FormattedRelative,{value:this.props.value})))}render(){const{value:e,displaySetting:t}=this.props,s="RELATIVE"===g(e);return s&&"RELATIVE"===t?this.renderRelative():this.renderAbsolute(s)}}y.displayName="TimestampView",y.defaultProps={extraStyles:{},tooltipPosition:"top"};const O=r()(n.injectIntl,Object(o.a)("button",{onRelativeTimestampClick:"clicked",onAbsoluteTimestampClick:"clicked"}),Object(c.a)({onRelativeTimestampClick:"relativeTime",onAbsoluteTimestampClick:"absoluteTime"}))(y);t.b=Object(a.b)(e=>({displaySetting:Object(u.a)(e)}),{onSwitchDisplaySetting:l.a})(O)},"./src/packages/issue/issue-view/src/common/constants/flags.js":function(e,t,s){"use strict";s.d(t,"j",(function(){return n})),s.d(t,"k",(function(){return a})),s.d(t,"l",(function(){return i})),s.d(t,"m",(function(){return r})),s.d(t,"u",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"q",(function(){return l})),s.d(t,"E",(function(){return u})),s.d(t,"f",(function(){return d})),s.d(t,"Q",(function(){return p})),s.d(t,"z",(function(){return m})),s.d(t,"N",(function(){return b})),s.d(t,"M",(function(){return f})),s.d(t,"G",(function(){return g})),s.d(t,"b",(function(){return h})),s.d(t,"O",(function(){return y})),s.d(t,"A",(function(){return O})),s.d(t,"B",(function(){return j})),s.d(t,"D",(function(){return E})),s.d(t,"d",(function(){return v})),s.d(t,"n",(function(){return k})),s.d(t,"C",(function(){return w})),s.d(t,"h",(function(){return S})),s.d(t,"g",(function(){return I})),s.d(t,"p",(function(){return C})),s.d(t,"c",(function(){return T})),s.d(t,"P",(function(){return P})),s.d(t,"x",(function(){return _})),s.d(t,"w",(function(){return x})),s.d(t,"t",(function(){return D})),s.d(t,"s",(function(){return A})),s.d(t,"H",(function(){return M})),s.d(t,"I",(function(){return L})),s.d(t,"J",(function(){return R})),s.d(t,"o",(function(){return N})),s.d(t,"r",(function(){return U})),s.d(t,"i",(function(){return F})),s.d(t,"K",(function(){return V})),s.d(t,"L",(function(){return K})),s.d(t,"a",(function(){return B})),s.d(t,"F",(function(){return W})),s.d(t,"v",(function(){return H})),s.d(t,"y",(function(){return G}));const n="COMMENT_ADD_ERROR_GENERIC",a="COMMENT_ADD_ERROR_INVALID",i="COMMENT_CONTENT_EXCEEDED_ERROR",r="COMMENT_DELETE_ERROR",o="EDITOR_ERROR",c="ATTACHMENT_ADD_ERROR",l="DELETE_LINKED_ISSUE_ERROR",u="REMOTE_LINK_VALIDATION_ERROR",d="ATTACHMENT_DELETE_ERROR",p="WATCH_TOGGLE_UPDATE_ERROR",m="FETCH_WATCHERS_ERROR",b="STOP_WATCHING_SUCCESS",f="START_WATCHING_SUCCESS",g="REMOVE_WATCHER_ERROR",h="ADD_WATCHER_ERROR",y="SUBTASKS_REORDER_ERROR_GENERIC",O="FLAGGED_ADD_UPDATE_ERROR",j="FLAGGED_REMOVE_UPDATE_ERROR",E="LOG_WORK_CONFIRM_ERROR",v="ASSIGN_TO_ME_SUCCESS",k="CREATE_CHILD_ISSUE_ERROR",w="LINK_CHILD_ISSUE_ERROR",S="CHANGE_ISSUE_TYPE_SUCCESS",I="CHANGE_ISSUE_TYPE_ERROR",C="DELETE_ISSUE_ERROR",T="ADD_WORKLOG_FAILURE",P="UPDATE_TIME_REMAINING_FAILURE",_="EDIT_WORKLOG_SUCCESS",x="EDIT_WORKLOG_FAILURE",D="DELETE_WORKLOG_SUCCESS",A="DELETE_WORKLOG_FAILURE",M="RICH_CONTENT_FIELD_CONFIRM_ERROR",L="RICH_CONTENT_FIELD_MAXIMUM_LENGTH_EXCEEDED_ERROR",R="RICH_CONTENT_FIELD_REQUIRED_ERROR",N="DELETE_CONFLUENCE_PAGE_LINK_FAILED",U="DELETE_WEB_LINK_FAILED",F="CLICKTHROUGH_BANNER_DISMISS_SUCCESS",V="SAVE_APPROVAL_ANSWER_ERROR",K="SAVE_APPROVAL_ANSWER_SUCCESS",B="ADD_APPROVER_ERROR",W="REMOVE_APPROVER_ERROR",H="EDIT_EPIC_COLOUR_ERROR",G="FETCH_JIRA_APP_LINKS_ERROR"},"./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i}));var n=s("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js");const a=(e,t=0)=>{const s=e.lastIndexOf("-"),n=e.substr(s+1);return/^\d+$/.test(n)&&n.length>=t?e.substr(0,s):e},i=e=>{const t=e.match(/^(.*)-(\w+)-(\d+)$/);if(null==t)return Object(n.p)(`Panel key doesn't match regexp: ${e}`,Error(`Panel key doesn't match regexp: ${e}`)),null;const[,s,a,i]=t;return{extensionId:s,id:a,added:Number(i)}}},"./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/lodash/noop.js"),a=s.n(n),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/deferred-globals.js");const r=()=>window.AJS&&window.AJS.dialog2,o=(e,t)=>{Object(i.b)().then(()=>((e,t)=>{r()&&window.AJS.dialog2.on(e,t)})(e,t)).catch(a.a)},c=(e,t)=>{Object(i.b)().then(()=>((e,t)=>{r()&&window.AJS.dialog2.off(e,t)})(e,t)).catch(a.a)}},"./src/packages/issue/issue-view/src/common/media/components/create-auth-provider.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=(e,t,s)=>async n=>({clientId:t,token:await e(n?n.collectionName:void 0),baseUrl:s}),a=e=>()=>Promise.resolve(e)},"./src/packages/issue/issue-view/src/common/media/components/with-media-provider/with-media-provider.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/media/components/with-token-provider/with-token-provider.js"),r=s("./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js"),o=s("./src/packages/issue/issue-view/src/common/media/view-context/view-context-transformer.js"),c=s("./src/packages/issue/issue-view/src/common/media/components/create-auth-provider.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const b=e=>{var t,s;return s=t=class extends n.Component{constructor(...e){super(...e),this.setDropzoneRef=e=>{this.dropzoneRef=e},this.resolve=void 0,this.mediaProviderPromise=new Promise(e=>{this.resolve=e}),this.resolved=!1,this.dropzoneRef=null}componentDidMount(){this.resolveMediaProviderPromise()}componentDidUpdate(){this.resolveMediaProviderPromise()}resolveMediaProviderPromise(){const{mediaContext:e,tokenProvider:t,baseUrl:s}=this.props;if(!this.resolved&&this.dropzoneRef&&e.viewContext){this.resolved=!0;const n=((e,t,s)=>{const{viewContext:n,uploadContext:a,userAuth:i}=e;if(!n)throw new TypeError("mediaContext.viewContext was null. Check that the server response has been processed.");let l={viewMediaClientConfig:{authProvider:Object(c.a)(t,n.clientId,n.serviceHost)}};return a&&(l=u(u({},l),{},{uploadParams:{collection:a.collection},uploadMediaClientConfig:{authProvider:Object(c.a)(t,a.clientId,a.serviceHost),userAuthProvider:i?Object(c.b)(u(u({},i),{},{baseUrl:a.serviceHost})):void 0,getAuthFromContext:async e=>{const t=await Object(r.b)(s,e,65536).map(o.a).toPromise();return{baseUrl:t.serviceHost,clientId:t.clientId,token:t.token||""}}}})),l})(e,t,s);this.resolve(n)}}render(){const t=this.props,{mediaContext:s,tokenProvider:n}=t,i=m(t,["mediaContext","tokenProvider"]);return(a.a.createElement("div",{ref:this.setDropzoneRef},a.a.createElement(e,p({mediaProvider:this.mediaProviderPromise},i))))}},t.displayName=`WithMediaProvider(${String(null!=e.displayName?e.displayName:e.name)})`,s};t.a=e=>Object(i.a)(b(e))},"./src/packages/issue/issue-view/src/common/media/components/with-token-provider/with-token-provider.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/promise-provider/index.js");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.a=e=>{var t,s;return s=t=class extends n.Component{constructor(e){super(e),this.viewTokenPromiseProvider=void 0,this.updateViewTokenPromise=e=>{const{viewContext:t}=e;t&&t.areTokenPermissionsUpToDate&&t.token?this.viewTokenPromiseProvider.resolve(t.token):this.viewTokenPromiseProvider.resetIfSettled()},this.tokenProvider=async e=>{if(!e)return this.viewTokenPromiseProvider.get();const{uploadContext:t}=this.props.mediaContext;if(t)return t.token;throw new Error("Upload token not available")},this.viewTokenPromiseProvider=new i.a,this.updateViewTokenPromise(e.mediaContext)}UNSAFE_componentWillReceiveProps(e){this.updateViewTokenPromise(e.mediaContext)}render(){return a.a.createElement(e,r({tokenProvider:this.tokenProvider},this.props))}},t.displayName=`WithTokenProvider(${String(null!=e.displayName?e.displayName:e.name)})`,s}},"./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=()=>({type:"FETCH_UPLOAD_CONTEXT_REQUEST"}),a=e=>({type:"FETCH_UPLOAD_CONTEXT_SUCCESS",payload:e}),i=e=>({type:"FETCH_UPLOAD_CONTEXT_FAILURE",payload:{error:e}}),r=()=>({type:"CHECK_UPLOAD_CONTEXT"})},"./src/packages/issue/issue-view/src/common/media/user-auth/user-auth-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=()=>({type:"FETCH_USER_AUTH_REQUEST"}),a=e=>({type:"FETCH_USER_AUTH_SUCCESS",payload:e}),i=e=>({type:"FETCH_USER_AUTH_FAILURE",payload:{statusCode:e}}),r=()=>({type:"CHECK_USER_AUTH"})},"./src/packages/issue/issue-view/src/common/media/view-context/view-context-transformer.js":function(e,t,s){"use strict";const n=e=>e.length>0?e[0].token:null;t.a=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:n(e.tokensWithFiles),areTokenPermissionsUpToDate:!0,tokenLifespanInMs:1e3*e.tokenLifespanInSeconds,collection:e.collection||null,tokenIssueTimestamp:Date.now()-1e4})},"./src/packages/issue/issue-view/src/common/messages/flags.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({commentWorklogAttachmentFetchFailedTitle:{id:"issue.comment-worklog-attachment-fetch-failed-title",defaultMessage:"We couldn't find the {field}"},commentWorklogAttachmentFetchFailedDescription:{id:"issue.comment-worklog-attachment-fetch-failed-description",defaultMessage:"Reload the issue, then give it another try."}})},"./src/packages/issue/issue-view/src/common/messages/time.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(i.defineMessages)({logWork:{id:"issue.common.messages.time.log-work",defaultMessage:"Log work"},timeInputPlaceholder:{id:"issue.common.messages.time.time-input-placeholder",defaultMessage:"e.g. 2w 4d 6h 45m"},exampleFormat:{id:"issue.common.messages.time.time-input-format-tooltip.example",defaultMessage:"Use the format: {formatExample}"},weeks:{id:"issue.common.messages.time.time-input-format-tooltip.weeks",defaultMessage:"{w} = weeks"},days:{id:"issue.common.messages.time.time-input-format-tooltip.days",defaultMessage:"{d} = days"},hours:{id:"issue.common.messages.time.time-input-format-tooltip.hours",defaultMessage:"{h} = hours"},minutes:{id:"issue.common.messages.time.time-input-format-tooltip.minutes",defaultMessage:"{m} = minutes"}});const r=a.a.createElement(i.FormattedMessage,{id:"issue.common.messages.time.time-invalid-message",defaultMessage:"You need to log time in the format {timeString}.",values:{timeString:a.a.createElement("b",null,"2w 4d 6h 45m")}})},"./src/packages/issue/issue-view/src/common/metrics/context/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/issue-view/src/common/metrics/index.js");const i=e=>t=>{e&&e.onReadyForUser&&e.onReadyForUser();const{isInitialRender:s,lastTransitionStartTime:n}=t;s&&Object(a.i)(!0),Object(a.e)({isInitialRender:s,lastTransitionStartTime:n})},r=e=>t=>{e&&e.onInteractive&&e.onInteractive(),Object(a.d)(t)},o=e=>({onPreviewRendered:i(e),onInteractive:r(e)});let c=null;const l=e=>(c=Object(n.createContext)(o(e)),c),u=()=>c||Object(n.createContext)(o())},"./src/packages/issue/issue-view/src/common/metrics/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return oe})),s.d(t,"a",(function(){return ce})),s.d(t,"g",(function(){return le})),s.d(t,"f",(function(){return ue})),s.d(t,"c",(function(){return de})),s.d(t,"d",(function(){return be})),s.d(t,"h",(function(){return fe})),s.d(t,"e",(function(){return ge})),s.d(t,"j",(function(){return he})),s.d(t,"i",(function(){return ye}));var n=s("./node_modules/uuid/index.js"),a=s.n(n),i=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),r=s("./src/packages/platform/observability/browser-metrics/src/index.js"),o=s("./src/packages/platform/utils/constants/src/analytics-marks.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),u=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/performance-marks-tools/index.js"),d=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/mark-product-start/index.js"),p=s("./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js"),m=s("./src/packages/issue/issue-view/src/feature-flags.js"),b=s("./src/packages/issue/issue-view/src/perf.config.js"),f=s("./node_modules/reselect/lib/index.js"),g=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const h=Object(f.createSelector)(e=>e.timing,g.r,(e,t)=>t?void 0:e.server);var y=s("./node_modules/lodash/get.js"),O=s.n(y),j=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),E=s("./src/packages/platform/utils/constants/src/analytics-sources.js");function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){w(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const S=()=>{if(c.default.clearMarks){const e=["ISSUE_FRAGMENT_READY_MARK","ISSUE_START_RENDERING_MARK","ssr.issue.rendered","ISSUE_START_FETCHING_DATA","ISSUE_CACHED_CONTENT_LOADED","ISSUE_FETCHED_MARK","ISSUE_PREVIEW_RENDERED","ISSUE_START_GIRA_FETCH","ISSUE_FINISH_GIRA_FETCH"];Object(m.isFullPageBentoBM3Enabled)()&&Object(m.isEmbeddedPageBentoBM3Enabled)()||e.push(o.SPA_SSR_RENDERED_MARK),e.forEach(e=>c.default.clearMarks(e))}},I=(e,t=!1)=>s=>{let n,a,i;e.getIsFullIssue()&&(n=Object(c.timeToMark)("ISSUE_FRAGMENT_READY_MARK",s),a=Object(c.timeToMark)("ISSUE_START_RENDERING_MARK",s),i=Object(c.timeToMark)(o.SPA_SSR_RENDERED_MARK,s));const r=Object(c.timeToMark)("ISSUE_START_FETCHING_DATA",s),l=Object(c.timeToMark)("ISSUE_CACHED_CONTENT_LOADED",s),u=Object(c.timeToMark)("ISSUE_FETCHED_MARK",s),d=Object(c.timeToMark)("ISSUE_PREVIEW_RENDERED",s),p=Object(c.timeBetweenMarks)("ISSUE_START_GIRA_FETCH","ISSUE_FINISH_GIRA_FETCH"),m=e.getIsFullIssue();let b=null,f=null;m&&!0===s.isInitial&&"issue.details.ready.fields.interactive"===s.key&&(b=Object(c.timeToMark)("jira.issue-view.issue-app.eval-start",s),f=Object(c.timeToMark)("jira.issue-view.issue-app.eval-end",s));const g=null!=s.end?s.end-s.start:0,h=e.lazyMetricsProps()();return t&&S(),k(k(k(k(k({issueId:h.issueId,isFullIssue:m,fragmentReady:n,issueStartRender:a,issueFetched:u,issueStartDataFetch:r,cachedIssueDataLoaded:l,issueSSRRendered:i,issuePreviewRendered:d,issueGiraFetchDuration:p,issueAppEvalStart:b,issueAppEvalEnd:f,isBentoSPA:e.getIsSPA(),isBentoRecentIssue:e.getIsRecentIssue(),bentoRecentIssuesCount:e.getRecentIssuesCount(),analyticsKey:h.analyticsKey,analyticsSource:e.getAnalyticsSource(),loadTimeMs:g,isSidebar:"sidebar"===O()(h.viewMode,"value"),correlationId:new j.a(e.getCorrelationId())},e.getIsFullIssue()?{}:{isLoadedWithPage:e.getIsLoadedWithPage()}),((e,t)=>{const s=e.getDataProvider();return s?e.getIsFullIssue()&&Boolean(t.isInitial)?{}:s.getMetrics():{}})(e,s)),(()=>window.SPA_STATE?O()(window,["SPA_STATE","ssr/metrics","data"],{}):window.ISSUE_VIEW_STATE?O()(window,["ISSUE_VIEW_STATE","ssr/metrics","data"],{}):{})()),(e=>({location:e.getLocation()}))(e)),((e,t)=>({isNextGenProject:O()(t.analyticsKey,"value")===E.a.SIMPLE_SOFTWARE_BOARD}))(0,h))},C=e=>t=>{const s=I(e,!0)(t);return S(),s};var T=s("./node_modules/lodash/isFunction.js"),P=s.n(T);function _(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_(Object(s),!0).forEach((function(t){D(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const A=()=>Object.keys(m).reduce((e,t)=>P()(m[t])?x(x({},e),{},{[String(t)]:new j.a(m[t]())}):e,{}),M=()=>x({},A());var L=s("./src/packages/platform/utils/permalinks/src/index.js"),R=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),N=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),U=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),F=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),V=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),K=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const B=e=>()=>{const t=e.getState(),{permalinkType:s}=Object(L.b)()||{},n=Object(K.q)("children-issues")(t);return{visibleContextItem:Object(N.g)(t).length,conditionallyVisibleContextItems:Object(N.a)(t).length,visibleContentItems:Object(N.f)(t).length,ecosystemGlances:Object(R.m)(t).length,ecosystemContentPanels:Object(R.b)(t).length,ecosystemActivityPanels:Object(R.a)(t).length,ecosystemOperations:Object(R.q)(t).length,ecosystemCustomsFields:Object(N.b)(t).length,childIssues:n?n.value.length:0,linkIssueCount:Object(m.isRemoteIssueLinksEnabled)()?Object(F.b)(t):Object(F.h)(t),subtaskCount:Object(V.d)(t).length,commentsTotalCount:Object(U.J)(t),hasCommentPermalink:"Comments"===s}},W=new RegExp(".*\\/([a-z-]*)\\.[a-f0-9]*"),H=new RegExp("/vendor|/commons|/jira-spa|/async-issue-app"),G=new RegExp("rest/gira/|/rest/api/2/attachment/read|/rest/api/2/attachment/upload/|/rest/internal/2/media/user|/rest/graphql/1"),$=new RegExp("gira"),q=e=>e.filter(e=>e.name.match(H)).map(e=>{const t=(e=>{const t=e.match(W);return t?t[1]:""})(e.name);return{[`${t}-duration`]:Math.round(e.duration),[`${t}-fetchStart`]:Math.round(e.fetchStart)}}),z=()=>{const e=c.default.getEntriesByType("resource"),t=q(e),s=(e=>{const t=e.filter(e=>e.name.match(G)),s=t.filter(e=>!e.name.match($)),n=t.filter(e=>e.name.match($)).sort((e,t)=>t.encodedBodySize&&e.encodedBodySize?t.encodedBodySize-e.encodedBodySize:1),a=n&&0!==n.length?n[0]:null,i=s.map(e=>({[`${(e=>e.match("/rest/graphql/1")?"graphql":e.match("/rest/internal/2/media/user")?"usertoken":e.match("/rest/api/2/attachment/upload/")?"uploadtoken":e.match("/rest/api/2/attachment/read")?"readtoken":"unknown")(e.name)}-duration`]:Math.round(e.duration)}));return a&&a.encodedBodySize&&i.push({"gira-duration":Math.round(a.duration)}),i})(e);return Object.assign({},...t,...s)};class Y{constructor(e){this.immutableState=void 0,this.isLoadedWithPage=void 0,this.hasLoadedEditor=!1,this.startTime=Math.floor(performance.now()),this.previewEnd=void 0,this.fmp=void 0,this.interactiveEnd=void 0,this.trueInteractiveEnd=void 0,this.immutableState=e,this.isLoadedWithPage=e.isLoadedWithPage}lazyMetricsProps(){return this.immutableState.lazyMetricsProps}getDataProvider(){return this.immutableState.dataProvider}getIsFullIssue(){return"full-issue"===this.immutableState.analyticsSource}getIsLoadedWithPage(){return this.immutableState.isLoadedWithPage}setIsLoadedWithPage(e){this.isLoadedWithPage=e}getIsSPA(){return this.immutableState.isSPA}getIsRecentIssue(){return this.immutableState.isRecentIssue}getRecentIssuesCount(){return this.immutableState.recentIssuesCount}getAnalyticsSource(){return Object(j.c)(...E.b)(this.immutableState.analyticsSource)}getCorrelationId(){return this.immutableState.correlationId}getIssueScaleabilityReporter(){return this.immutableState.issueScaleabilityReporter}getStartTime(){return this.startTime}setPreviewEnd(e){this.previewEnd=null===e?0:Math.floor(e)}getPreviewEnd(){return this.previewEnd}setFMP(e){this.fmp=null===e?0:Math.floor(e)}getFMP(){return this.fmp}setInteractiveEnd(e){this.interactiveEnd=e}getInteractiveEnd(){return this.interactiveEnd}setTrueInteractiveEnd(e){this.trueInteractiveEnd=Math.floor(e)}getTrueInteractiveEnd(){return Math.floor(this.trueInteractiveEnd)}getHasLoadedEditor(){return this.hasLoadedEditor}getIsInitial(){return this.getIsFullIssue()&&!this.getIsSPA()}getLocation(){const{route:e}=this.immutableState,t=null==e?void 0:e.name;return new j.a(t||"")}}var Q=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),J=s("./src/packages/issue/issue-context-service/src/types.js");var Z=(e=null)=>Object(l.j)("sidebar","modal","default")((e=>{switch(e){case J.a:return"modal";case J.b:return"sidebar";default:return null}})(e)||(()=>window.localStorage&&window.localStorage.getItem("gh.ghx-issue-fragment-view-mode")||"default")().replace(/"/g,""));const X=Object(f.createSelector)(Q.e,Q.Q,Q.A,(e,t,s)=>({analyticsKey:new j.a(e),viewMode:Z(t),issueId:new j.a(s)}));function ee(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function te(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(s),!0).forEach((function(t){se(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ee(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function se(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let ne;const ae=Object(r.b)(),ie=()=>{const e=Object(c.getMark)(o.SPA_SSR_RENDERED_MARK);return null!=e?Math.floor(e.startTime):null},re=e=>{try{Object(c.setMark)(e)}catch(e){l.i.safeError("issue.metrics","Setting performance mark failed",new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))}},oe=()=>{re("ISSUE_FRAGMENT_READY_MARK")},ce=e=>{try{const{isLoadedWithPage:t,isSPA:s,isRecentIssue:n,recentIssuesCount:i,dataProvider:r,analyticsSource:o,store:c,route:l}=e;ne=new Y({isLoadedWithPage:t,isSPA:s,isRecentIssue:n,analyticsSource:o,recentIssuesCount:i,correlationId:a.a.v4(),lazyMetricsProps:()=>X(c.getState()),timingDataReporter:()=>te(te({},h(c.getState())),Object(p.b)()),issueScaleabilityReporter:B(c),dataProvider:r,route:l}),(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&b.b.mark("metrics_init")}catch(e){l.i.safeError("issue.metrics","Failed to initialise issue metrics",new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))}},le=()=>{re("ISSUE_START_RENDERING_MARK"),(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&b.b.mark("ISSUE_START_RENDERING_MARK")},ue=()=>{re("ISSUE_START_FETCHING_DATA"),(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&b.b.mark("ISSUE_START_FETCHING_DATA")},de=()=>{re("ISSUE_FETCHED_MARK"),(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&b.b.mark("ISSUE_FETCHED_MARK")},pe=(e,t,s)=>{const n=ie()?0:e;let a=ne.getPreviewEnd();const i=ie();null!=i&&(a=i);const r=ie()||ne.getPreviewEnd()-n,o=[M,I(ne),ne.getIssueScaleabilityReporter()],c={key:"issue.details.ready.new-browser-metrics",isInitial:ne.getIsInitial(),beganAt:n,completedAt:a,reporters:o,collectors:[]};try{((e,t)=>{if(t<0)throw new Error("negative rfu");ae.start(e),ae.stop(e)})(c,r)}catch(e){let o,c;if(t){const{currentPage:e,visitedPages:s}=t,n=e=>Object.keys(e.apps||{}),a=e=>e.join(", ")||"?";o=JSON.stringify(s.map(e=>a(n(e)))),c=a(n(e))}l.i.safeError("spa-bento.negative.rfu.perf-ops","Got a negative bento rfu",{key:"issue.details.ready.new-browser-metrics",isInitial:ne.getIsInitial(),startTimeSource:s,start:n,end:a,rfu:r,ssrMark:i||0,currPageApps:c,prevPageApps:o,ssrMarkStr:String(i)})}},me=e=>{const t=e,s=ne.getInteractiveEnd(),n=ne.getFMP(),a=[C(ne),z,ne.getIssueScaleabilityReporter(),M],i={key:"issue.details.ready.fields.interactive",isInitial:ne.getIsInitial(),beganAt:t,completedAt:s,issueFMP:n,reporters:a,collectors:[]};ae.start(i),ae.stop(i)},be=({lastTransitionTime:e})=>{const t=ne.getIsFullIssue();if(ne.setInteractiveEnd(performance.now()),ne&&Object(m.isFullPageBentoBM3Enabled)()&&t||Object(m.isEmbeddedPageBentoBM3Enabled)()&&ne){const s=e||ne.getStartTime();ne.getIsFullIssue()&&Object(u.d)("product",d.b,!0),b.b.stop({stopTime:ne.getInteractiveEnd(),customData:te(te(te(te({},ne.getIssueScaleabilityReporter()()),A()),t?{}:{embeddedIssueFMP:Math.floor(ne.getFMP()),embeddedIssueTTI:Math.floor(ne.getInteractiveEnd()-s)}),{isBentoRecentIssue:ne.getIsRecentIssue(),bentoRecentIssuesCount:ne.getRecentIssuesCount(),correlationId:ne.getCorrelationId()})})}},fe=(e=!1)=>{Object(m.isEmbeddedPageBentoBM3Enabled)()&&!e&&b.a.start({startTime:performance.now()}),(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&b.b.start()},ge=({isInitialRender:e,lastTransitionStartTime:t})=>{const s=ie(),n=performance.now(),a=ne.getStartTime();let i=0;i=ne.getIsFullIssue()?e?s:n-(t||a):n-a,(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&b.b.mark("ISSUE_PREVIEW_RENDERED"),ne.setFMP(i),ne.setPreviewEnd(n),re("ISSUE_PREVIEW_RENDERED")},he=(e,t=null)=>{ne&&ne.getIsFullIssue()&&!Object(m.isFullPageBentoBM2Enabled)()||(null!=e?(pe(e,t,"transtionStartTime"),me(e)):ne&&(pe(ne.getStartTime(),t,"state.getStartTime"),me(ne.getStartTime())))},ye=e=>{ne&&ne.setIsLoadedWithPage(e)}},"./src/packages/issue/issue-view/src/common/model/comment-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={type:"public",value:""}},"./src/packages/issue/issue-view/src/common/model/linked-issue-type.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>{switch(e.toUpperCase()){case"INWARD":return"INWARD";case"OUTWARD":return"OUTWARD";case"BOTH":default:return"BOTH"}},a={INWARD:"INWARD",OUTWARD:"OUTWARD",BOTH:"BOTH"}},"./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"c",(function(){return c}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js");const a=Object(n.b)("issue-changeboarding"),i=()=>a.get("banner-seen-times")||0,r=e=>a.set("banner-seen-times",e),o=()=>a.get("banner-first-seen-timestamp"),c=e=>a.set("banner-first-seen-timestamp",e)},"./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return u})),s.d(t,"f",(function(){return d})),s.d(t,"e",(function(){return p})),s.d(t,"d",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return f}));var n=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/transform-to-iso-string.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),o=s("./src/packages/issue/issue-view/src/common/model/comment-type.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/gira/util.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const u=e=>({id:e.id,author:e.author?Object(l.c)(e.author):null,updateAuthor:e.updateAuthor?Object(l.c)(e.updateAuthor):null,bodyAdf:e.body,bodyHtml:void 0,visibility:e.visibility,createdDate:Object(a.a)(e.created),updatedDate:e.updated?Object(a.a)(e.updated):null,edited:!!e.updated&&e.updated!==e.created,isInternal:!e.jsdPublic}),d=({id:e,author:t,updateAuthor:s,visibility:n,created:i,updated:o,bodyAdf:c,renderedBody:u,jsdPublic:d})=>({id:e,author:t?Object(l.b)(t):null,updateAuthor:s?Object(l.b)(s):null,visibility:n,createdDate:Object(a.a)(i),updatedDate:o?Object(a.a)(o):null,edited:!!o&&o!==i,bodyAdf:Object(r.a)(c),bodyHtml:u,isInternal:!d}),p=e=>({comments:e.data.issueComments.nodes.map(e=>d(e)),totalComments:e.data.issueComments.totalCount}),m=({type:e,value:t})=>{switch(e?e.toLowerCase():null){case"group":return{value:t,type:"group"};case"role":return{value:t,type:"role"};default:{const s=`transformCommentVisibility: unknown comment visibility type received '${e}'`;return i.i.safeError("issue.transform.comment",s,new n.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(s)})),{value:t,type:"role"}}}},b=e=>{const t=e.author?e.author.id:null,s=e.updateAuthor?e.updateAuthor.id:null;return{id:e.id,authorId:t,updateAuthorId:s,bodyAdf:e.bodyAdf,bodyHtml:e.bodyHtml,createdDate:e.createdDate,updatedDate:e.updatedDate,edited:e.edited,visibility:e.visibility?m(e.visibility):o.a,isInternal:e.isInternal}},f=(e,t,s,n)=>{const{comments:a}=e,i=a.filter(e=>e.author).map(e=>e.author),r=Math.max("FETCH_NEWER_COMMENTS_REQUEST"===n?s-a.length:s,0);return{users:Object(c.b)(i,"id"),comments:Object(c.b)(a.map(b),"id"),loadedComments:t+a.length,commentsStartIndex:r,totalComments:e.totalComments}}},"./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return f}));const r=(e,t)=>t.includes("http")?t:e+t,o=(e,t)=>{if(t&&"icon"===t.type){const s=a({},t);return s.value.label=r(e,t.value.label),s}return t},c=(e,t)=>{const s=Object.keys(t)[0];return a(a({},e),{},{[s]:a(a({},t[s]),e[s])})},l=e=>"string"==typeof e?JSON.parse(e):e,u=(e=[])=>e.map(e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options),icon:e.icon&&{url:e.icon.url},label:{type:"text",value:e.content||e.name},status:o(l(e.iframe.options).origin,e.status),type:e.type}}})).reduce(c,{}),d=(e=[])=>e.map(e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options),icon:e.icon&&{url:e.icon.url},tooltip:e.tooltip,type:e.type,showByDefault:!!e.showByDefault}}})).reduce(c,{}),p=(e=[])=>e.map(({iframe:e,shouldReloadOnRefresh:t})=>({appKey:e.addonKey,moduleKey:e.moduleKey,options:l(e.options),shouldReloadOnRefresh:t})),m=(e=[])=>e.map(e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options)}}})).reduce(c,{}),b=(e=[])=>e.map(e=>({name:e.name,url:e.url,tooltip:e.tooltip,styleClass:e.styleClass})),f=e=>({glances:u(e.glances),contentPanels:d(e.contentPanels),backgroundScripts:p(e.backgroundScripts),operations:b(e.operations),activityPanels:m(e.activityPanels),ecosystemOnDate:e.ecoSystemOnDate,canInstallAddons:e.canInstallAddons||!1})},"./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return d}));var n=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js"),a=s("./src/packages/platform/utils/permalinks/src/index.js"),i=s("./src/packages/platform/utils/permalinks/src/constants.js");const r=(e,t,s)=>`\n    comments (first: ${t}, maxResults: ${e}, orderBy: "${s}", ${(()=>{const{hasPermalink:e,permalinkId:t}=Object(a.a)(i.a);return e?`commentId: ${t}`:""})()}) {\n        nodes {\n            id\n            author {\n                accountId\n                displayName\n                avatarUrl\n            }\n            updateAuthor {\n                accountId\n                displayName\n                avatarUrl\n            }\n            visibility {\n                type\n                value\n            }\n            created\n            updated\n            renderedBody\n            jsdPublic\n            bodyAdf\n        }\n        totalCount\n        startIndex\n    }\n`;function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=()=>r(5,0,"-created"),d=e=>{const{comments:t}=e;if(!t)return{users:{},comments:{},totalComments:0,commentsStartIndex:0,loadedComments:0};const{totalCount:s,startIndex:a}=t,i={data:{issueComments:t}};return c(c({},Object(n.b)(Object(n.e)(i),0,a)),{},{totalComments:s,commentsStartIndex:a})}},"./src/packages/issue/issue-view/src/common/service/issue/gira/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return ce})),s.d(t,"a",(function(){return ue})),s.d(t,"b",(function(){return de}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/platform/utils/fetch/src/utils.js"),o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),c=s("./src/packages/issue/issue-fetch-services/src/services/issue-gira-data/index.js"),l=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),u=s("./src/packages/issue/issue-view/src/feature-flags.js"),d=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js"),p=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js");var m=s("./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js"),b=s("./node_modules/lodash/flatten.js"),f=s.n(b),g=s("./node_modules/lodash/isNumber.js"),h=s.n(g),y=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),O=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),j=s("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js"),E=s("./src/packages/issue/issue-view/src/common/service/issue/gira/util.js");const v=()=>`\n    ecosystem {\n      operations {\n        name\n        url: href\n        icon {\n          url\n        }\n        tooltip\n        styleClass\n      }\n      contentPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        icon {\n          url\n        }\n        tooltip\n        type\n        showByDefault\n        manuallyAddedToIssue\n      }\n      activityPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n      }\n      backgroundScripts {\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        shouldReloadOnRefresh\n      }\n      ecoSystemOnDate\n      contentPanelsCustomised \n      ${(()=>Object(u.isForgeUiIntegrationEnabled)()?`forge {\n        panels {\n          id\n          instances {\n            ${Object(u.isForgeIssuePanelNextEnabled)()?"id, collapsed,":""}\n            added\n          }\n        }\n      }`:"")()}\n    }\n`;function k(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?k(Object(s),!0).forEach((function(t){S(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function S(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const I=e=>{if(!e.ecosystem||!e.fields)return{ecosystem:{},issueContentPanels:[],forgeIssueProperties:{collapsedPanels:[]}};const{ecosystem:t}=e,s=Object(E.a)(e.fields,"GlancesField"),n=s?s.value.map(e=>w(w({},e),{},{status:e.status?JSON.parse(e.status):null})):[],{forgeCollapsedPanels:a,forgePanelsKeys:i}=(e=>{if(Object(u.isForgeIssuePanelNextEnabled)()){const t=e.forge?f()((e.forge.panels||[]).map(e=>{const{id:t,instances:s}=e;return(Array.isArray(s)?s:[]).filter(({added:e})=>h()(e)).map(({added:e,id:s,collapsed:n})=>({key:Object(y.g)(t,s,e),collapsed:n||!1}))})):[];return{forgeCollapsedPanels:t.filter(({collapsed:e})=>e).map(({key:e})=>e),forgePanelsKeys:t.map(({key:e})=>e)}}return{forgeCollapsedPanels:[],forgePanelsKeys:e.forge?f()((e.forge.panels||[]).map(e=>{const{id:t,instances:s}=e;return(Array.isArray(s)?s:[]).filter(({added:e})=>h()(e)).map(({added:e})=>`${t}-${e}`)})):[]}})(t),r=t?(t.contentPanels||[]).filter(e=>e.manuallyAddedToIssue).map(e=>`${e.iframe.addonKey}_${Object(O.b)(e.iframe.moduleKey)}`):[],o=t.contentPanelsCustomised?["issue.content.panel.customised.flag"]:[],c={contentPanels:t.contentPanels||[],operations:t.operations||[],activityPanels:t.activityPanels||[],backgroundScripts:t.backgroundScripts||[],ecoSystemOnDate:t.ecoSystemOnDate||0,contentPanelsCustomised:t.contentPanelsCustomised};return{ecosystem:Object(j.b)(w(w({},c),{},{glances:n,canInstallAddons:!1})),issueContentPanels:[...i,...r,...o],forgeIssueProperties:{collapsedPanels:a}}},C=()=>"\n      timeTracking {\n        isTimeTrackingEnabled\n        hoursPerDay\n        daysPerWeek\n        defaultUnit\n      }\n",T=({shouldRefreshComments:e}={})=>`\n    query issueViewDynamicQuery($issueKey: String!) {\n        viewIssue(issueKey: $issueKey) {\n            ${!0===e?Object(m.a)():""}  \n            ${(()=>v())()}\n            fields {\n                __typename \n                    ${(()=>"\n  ... on GlancesField {\n    fieldKey\n    value {\n      name\n      status\n      iframe {\n        addonKey\n        moduleKey\n        options\n      }\n      icon {\n        url\n      }\n      content\n      type\n    }\n  }\n")()}\n            }\n        }\n        ${(()=>`\n    jiraSettings {\n      ${C()}\n      issueLinkTypes {\n        id\n        name\n        inward\n        outward\n      }\n    }\n`)()}\n        ${(()=>"\n    licensedProducts {\n        name\n        status\n    }\n")()}\n    }\n`;function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){x(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const D={isTimeTrackingEnabled:!1,daysPerWeek:5,hoursPerDay:8,defaultUnit:"minute"},A=e=>({timeTrackingConfiguration:e.timeTracking||D});function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function L(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(Object(s),!0).forEach((function(t){R(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function R(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const N={CONTENT_VISIBLE:"visible",CONTENT_REQUEST:"request"},U={CONTEXT_PRIMARY:"primary",CONTEXT_SECONDARY:"secondary"},F={primary:[],secondary:[]},V=({itemId:e,type:t})=>({id:e,type:t}),K=e=>e.layoutItems.reduce((e,{category:t,items:s})=>{const n=U[t];return void 0!==n?L(L({},e),{},{[`${n}`]:s.map(V)}):e},F),B={visible:[],request:void 0},W=e=>e.layoutItems?e.layoutItems.reduce((e,{category:t,items:s})=>{const n=N[t];return void 0!==n?L(L({},e),{},{[`${n}`]:s.map(V)}):e},B):B;var H=s("./src/packages/platform/utils/types/src/license-state.js");function G(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?G(Object(s),!0).forEach((function(t){q(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):G(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function q(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const z=(e=[],t)=>{const s=e.find(e=>e.name===t);switch(s&&s.status){case"ACTIVE":return H.a;case"SUSPENDED":return H.c;case"EXPIRED":return H.b;default:return H.d}},Y=(e=[])=>({licensedProducts:e.reduce((e,t)=>$($({},e),{},{[t.name]:"ACTIVE"===t.status}),{}),licenseStates:{core:z(e,"jira-core"),software:z(e,"jira-software"),serviceDesk:z(e,"jira-servicedesk")}});var Q=s("./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js");var J=s("./src/packages/issue/permissions-service/src/context.js"),Z=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js");function X(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ee(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?X(Object(s),!0).forEach((function(t){te(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function te(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var se=s("./src/packages/rich-content/src/common/adf-parsing-utils.js");const ne=e=>{const{accountId:t,displayName:s=null,avatarUrl:n=null}=e;return{accountId:t,displayName:s,avatarUrl:n}},ae=e=>{const t=e.map(e=>(e=>{const{id:t,author:s,updateAuthor:n,created:a,updated:i,started:r,comment:o,timeSpent:c}=e,l=i!==a;return{id:t,author:s?ne(s):null,updateAuthor:l&&n?ne(n):null,updated:l?i:null,started:r,timeSpent:c,comment:Object(se.a)(o)}})(e));return{worklogs:Object(E.b)(t,"id")}};s("./src/packages/platform/utils/permalinks/src/index.js");function ie(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function re(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(s),!0).forEach((function(t){oe(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ie(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function oe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ce=e=>{const{viewIssue:t,licensedProducts:s,jiraSettings:n,permissions:a,myPreferences:i,mediaContext:r,project:o}=e;return re(re(re(re(re(re(re(re(re(re({},(e=>({attachments:e.attachments}))(t)),Object(m.b)(t)),(e=>{const{worklogs:t}=e;if(!t)return{worklogs:{},sortedWorklogIds:[],totalWorklogs:0,worklogsStartIndex:0};const{totalCount:s,startIndex:n,nodes:a}=t,{worklogs:i}=ae(a);return{worklogs:i,sortedWorklogIds:a.map(e=>e.id).reverse(),totalWorklogs:s,worklogsStartIndex:n}})(t)),I(t)),Y(s)),(e=>{const t=A(e),s=((e={issueLinkTypes:[]})=>{const t=[];return e.issueLinkTypes.forEach(e=>t.push(...(({id:e,inward:t,outward:s})=>{const n=[];return t&&t===s?n.push({id:e,label:t,direction:"BOTH"}):(n.push({id:e,label:t,direction:"INWARD"}),n.push({id:e,label:s,direction:"OUTWARD"})),n})(e))),{issueLinkTypes:t}})({issueLinkTypes:e.issueLinkTypes||[]}),n=(e=>({subtasksConfiguration:e.subtasks}))(e);if(Object(u.isJiraSettingsHookEnabled)()){const a=Object(u.isAdminOptionsPhase2Enabled)()?(e=>({newIssueViewTransitionSettings:e.newIssueViewTransitionSettings}))(e):null;return{jiraSettings:_(_(_(_({},t),s),n),a)}}return _(_(_({},t),s),n)})(n)),(e=>e&&0!==e.length?Object(Z.c)({permissions:e.reduce((e,t)=>ee(ee({},e),{},{[t.key]:t}),{})}):Object(u.isSetDefaultPermissionsEnabled)()?{permissions:J.a}:{permissions:void 0})(a)),(e=>e?{myPreferences:e}:Object.freeze({}))(i)),(e=>({issueTypes:e?e.issueTypes:[],newIssueViewLockedIn:Boolean(e&&e.newIssueViewLockedIn)}))(o)),{},{contextItemsCategories:K(t),contentItemsCategories:W(t)},(e=>Object(u.isfetchMediaTokensFromGiraEnabled)()&&e?Object(Q.a)(e):{})(r))},le=e=>{let t=0;const s=e=>e.path?e.path.join("."):e.locations?e.locations.map(e=>`line ${e.line}, column ${e.column}`).join("&"):(t+=1,`error without path or location: ${t}`),n=e.reduce((e,t)=>re(re({},e),{},{[s(t)]:t.message}),{});return new a.a({eventNameSuffix:"issue.error.gira",type:"fetch",app:"issue",event:n})},ue=async(e,t,s)=>{const a=Object(p.a)(s,()=>n.Observable.fromPromise(Object(c.a)(e,t))).toPromise(),{data:l,errors:u}=await a;if(!l){const e=u?JSON.stringify(le(u)):"No data returned from graphql call";throw new d.a(new Error(e),o.a)}if(l&&u&&i.i.safeError("issue.fetch.gira","Failed to fetch some data from gira",le(u)),!l.viewIssue)throw new d.a(new r.a(404,"Call to gira returned empty viewIssue"),o.a);return ce(l)},de=async(e,t,s)=>{const n=await Object(l.a)(e).query({query:T(s),variables:{issueKey:t}}),{data:a,errors:r}=n;if(!a){const e=r?JSON.stringify(le(r)):"No data returned from graphql call for dynamic data";throw new Error(e)}return a&&r&&i.i.safeError("issue.fetch.gira.dynamic","Failed to fetch some data from gira for dynamic data fetch",le(r)),(e=>{const{viewIssue:t,licensedProducts:s,jiraSettings:n}=e;return re(re(re(re({},t&&t.comments?Object(m.b)(t):{}),Y(s)),I(t)),A(n))})(a)}},"./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o}));const n=e=>e.length>0?e[0].token:null,a=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:n(e.tokensWithFiles),areTokenPermissionsUpToDate:!0,tokenLifespanInMs:1e3*e.tokenLifespanInSeconds,tokenIssueTimestamp:Date.now()-1e4,collection:null}),i=e=>null!=e.clientId&&null!=e.endpointUrl&&null!=e.token&&null!=e.tokenDurationInMins&&null!=e.targetCollection?{clientId:e.clientId,serviceHost:e.endpointUrl,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,collection:e.targetCollection,tokenIssueTimestamp:Date.now()-1e4}:null!=e.error?{error:e.error}:null,r=e=>({clientId:e.id,token:e.token,tokenLifespanInMs:60*Number(e.tokenDurationInMins)*1e3,tokenIssueTimestamp:Date.now()-1e4}),o=({readToken:e,uploadToken:t,userToken:s})=>({viewContext:e?a(e):null,uploadContext:t?i(t):null,userAuth:s?r(s):null})},"./src/packages/issue/issue-view/src/common/service/issue/gira/util.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));const r=(e,t)=>e.find(e=>e.__typename===t),o=(e,t)=>e.reduce((e,s)=>a(a({},e),{},{[s[t]]:s}),{})},"./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return S})),s.d(t,"a",(function(){return I})),s.d(t,"b",(function(){return C})),s.d(t,"d",(function(){return T}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),r=s("./src/packages/platform/utils/types/src/general.js"),o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),c=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js"),l=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),m=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const b=(e,t)=>[e.retry(2),t.retry(2)];var f=s("./src/packages/issue/issue-view/src/common/service/issue/gira/index.js"),g=s("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js"),h=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js"),y=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),O=s("./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js");function j(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?j(Object(s),!0).forEach((function(t){v(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const k=(e,t,s)=>a.a`query {
        issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
            id
            ${(e=>e?"":"viewScreenId")(s)}
            fields {
                key
                title
                editable
                required
                autoCompleteUrl
                allowedValues
                content
                renderedContent
                schema {
                    custom
                    system
                    ${(()=>"configuration {\n        key\n        value\n    }\n    ")()}
                    items
                    type
                    renderer
                }
                configuration
            }
            expandAssigneeInSubtasks
            expandAssigneeInIssuelinks
            expandTimeTrackingInSubtasks
            systemFields {
                descriptionAdf {
                    value
                }
                ${(()=>"environmentAdf {\n        value\n    }")()}
            }
            customFields {
                textareaAdf {
                    key
                    value
                }
            }            
            ${(()=>"tabs {\n        id\n        name\n        items {\n            id\n            type\n        }\n    }")()}
            ${(()=>"\n    agile {\n        epic {\n          key\n        },\n    }")()}
        }
        project(projectIdOrKey: "${t}") {
            id
            name
            key
            projectTypeKey
            simplified
            avatarUrls {
                key
                value
            }
            issueTypeHierarchy {
                baseLevelId
                levels {
                    id
                    aboveLevelId
                    belowLevelId
                }
            }
        }
    }`,w=(e,t,s,n,a)=>Object(l.a)(a,()=>Object(i.a)(Object(y.e)(e),((e,t,s)=>({method:"POST",body:JSON.stringify({query:k(e,t,s)})}))(t,s,n))).catch(e=>{throw new c.a(e,Object(y.e)(Object(r.b)("{baseUrl}")))}).map(e=>((e,t)=>{if(t.errors){const s=t.errors[0],n=new m.a(s.message);throw p.i.safeError(e,"getGraphQlData: Error present in GraphQL response",new d.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:n})),n}return t.data})("issue.fetch.issue-fetch-server",e)).map(t=>Object(h.b)(t,e)),S=(e,t)=>{const s=Object(u.g)(e),a=Object(u.B)(e),i=Object(u.I)(e),r=Object(u.p)(e);return n.Observable.zip(...b(n.Observable.fromPromise(Object(f.b)(s,a,t)),w(s,a,i,r)),(e,t)=>E(E({},e),t))},I=(e,t)=>{const s=Object(u.g)(e),a=Object(u.B)(e),i=Object(u.I)(e),r=Object(u.p)(e),l=n.Observable.fromPromise(Object(f.a)(s,a,t&&t.issueGiraData)).catch(e=>{throw new c.a(e,o.a)}),d=w(s,a,i,r,t&&t.issueGraphqlData),p=Object(u.u)(e),m=Object(u.q)(e),g=!(p||m)?b(l,d):((e,t,s)=>[e.retry(2),t.retry(2),s.retry(2)])(l,d,Object(O.a)(s,i));return n.Observable.zip(...g,(e,t)=>E(E(E({},e),t),{},{issue:E(E({},t.issue),{},{contextItemsCategories:e.contextItemsCategories,contentItemsCategories:e.contentItemsCategories})}))},C=(e,t,s)=>n.Observable.from(t).bufferCount(50).flatMap(t=>((e,t,s)=>Object(i.a)(Object(y.p)(e),{method:"POST",body:JSON.stringify({jql:t,fields:s})}).map(h.a))(e,`key in (${t.join(",")})`,s)).reduce((e,t)=>[...e,...t],[]),T=(e,t)=>Object(i.a)(Object(y.h)(e,t)).map(t=>t.fields.issuelinks&&Object(g.b)(e,t.fields.issuelinks))},"./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return b})),s.d(t,"a",(function(){return f}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/platform/utils/constants/src/index.js"),r=s("./src/packages/platform/utils/types/src/general.js"),o=s("./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{statusCategoryForId:m}=i.a,b=(e,t=[])=>{let s={},n={};t&&t.filter(Boolean).forEach(({id:t,inwardIssue:i,outwardIssue:o,type:u})=>{let p,b,f=null;if(i?(b="inward",f=u.inward,p=i):o&&(b="outward",f=u.outward,p=o),f&&null!=p){const i={id:Object(r.j)(t),linkedIssueKey:p.key,direction:b,typeName:f,typeId:u.id};s=d(d({},s),{},{[t]:i});const o=((e,t)=>{const{id:s,key:n,fields:i}=e;return{id:s,issueKey:n,issueLink:Object(c.g)(t,e.key),issueSummary:i.summary,statusCategory:m(a()(e.fields,"status.statusCategory.id")),statusCategoryId:a()(e.fields,"status.statusCategory.id"),statusName:i.status&&i.status.name,statusId:i.status&&i.status.id,issuePriorityUrl:a()(i,"priority.iconUrl",null),issuePriorityName:a()(i,"priority.name",null),issueTypeIconUrl:a()(i,"issuetype.iconUrl",null),issueTypeName:a()(i,"issuetype.name",null),assigneeDisplayName:i.assignee?Object(l.c)(i.assignee).displayName:null,assigneeUrl:i.assignee?Object(l.c)(i.assignee).avatarUrl:null}})(p,e);n=d(d({},n),{},{[o.issueKey]:o})}});const i=s?Object.values(s).map(({linkedIssueKey:e})=>e):[];return{issueLinks:s,linkedIssueKeys:i,linkedIssues:n}},f=e=>e.map(e=>{const{id:t,type:s}=e;return{id:t,type:s,inwardIssue:e.inwardIssue?Object(o.b)(e.inwardIssue):null,outwardIssue:e.outwardIssue?Object(o.b)(e.outwardIssue):null}})},"./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return D})),s.d(t,"b",(function(){return N})),s.d(t,"a",(function(){return U}));var n=s("./src/packages/platform/utils/constants/src/status-categories.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/transform-to-iso-string.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const m=(e,t)=>{const{fields:s}=e;return d(d({id:e.id,issueLink:Object(c.g)(t,e.key),issueTypeIconUrl:s.issuetype.iconUrl,issueTypeName:s.issuetype.name,issuePriorityUrl:s.priority&&s.priority.iconUrl||void 0,issuePriorityName:s.priority&&s.priority.name||void 0,issueKey:e.key,issueSummary:s.summary,statusCategory:Object(n.statusCategoryForId)(s.status.statusCategory.id),statusCategoryId:s.status.statusCategory.id,statusName:s.status.name,statusId:s.status.id},(e=>{if(Object(o.isShowChildIssueAssigneeAvatarsEnabled)()&&null!=e){const{avatarUrl:t,displayName:s}=Object(l.c)(e);return{assigneeUrl:t,assigneeDisplayName:s}}return{assigneeUrl:null,assigneeDisplayName:null}})(s.assignee)),{},{isLoading:!1})};var b=s("./node_modules/lodash/find.js"),f=s.n(b);const g=(e,t)=>{const{fields:s}=e,a=f()(s,e=>"issuetype"===e.schema.system),i=f()(s,e=>"priority"===e.schema.system),r=f()(s,e=>"summary"===e.schema.system),u=f()(s,e=>"status"===e.schema.system),d=f()(s,e=>"assignee"===e.schema.system),p=d?(e=>{if(Object(o.isShowChildIssueAssigneeAvatarsEnabled)()&&null!=e){const{avatarUrl:t,displayName:s}=Object(l.c)(e);return{assigneeUrl:t,assigneeDisplayName:s}}return{assigneeUrl:null,assigneeDisplayName:null}})(d.value):{},m=f()(s,e=>"com.pyxis.greenhopper.jira:jsw-story-points"===e.schema.custom),b=Object(o.isRollupSubtaskPhase2Enabled)()?f()(s,e=>"timetracking"===e.schema.system):void 0;return{id:e.id,issueLink:Object(c.g)(t,e.key),issueTypeIconUrl:a&&a.value.iconUrl,issueTypeName:a&&a.value.name,issuePriorityUrl:i&&i.value&&i.value.iconUrl||void 0,issuePriorityName:i&&i.value&&i.value.name||void 0,issueKey:e.key,issueSummary:r&&r.value,statusCategory:u&&u.value&&Object(n.statusCategoryForId)(u.value.statusCategory.id),statusCategoryId:u&&u.value&&u.value.statusCategory.id,statusName:u&&u.value&&u.value.name||void 0,statusId:u&&u.value&&u.value.id||void 0,estimateFieldId:m&&m.key||void 0,estimateValue:m&&m.value||void 0,assigneeDisplayName:p.assigneeDisplayName,assigneeUrl:p.assigneeUrl,isLoading:!1,issueTimeTracking:b&&b.value||void 0}},h=(e=[],t)=>e?e.map(e=>g(e,t)):[];var y=s("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js");const O=(e=[],t)=>null===e?[]:e.map(e=>((e,t)=>({id:e.id,issueLink:Object(c.g)(t,e.key),issueTypeIconUrl:e.fields.issuetype.iconUrl,issueTypeName:e.fields.issuetype.name,issuePriorityUrl:e.fields.priority&&e.fields.priority.iconUrl||void 0,issuePriorityName:e.fields.priority&&e.fields.priority.name||void 0,issueKey:e.key,issueSummary:e.fields.summary,statusCategory:Object(n.statusCategoryForId)(e.fields.status.statusCategory.id),statusCategoryId:e.fields.status.statusCategory.id,statusId:e.fields.status.id,statusName:e.fields.status.name,isLoading:!1,hasError:!1,assigneeUrl:e.fields.assignee?Object(l.c)(e.fields.assignee).avatarUrl:null,assigneeDisplayName:e.fields.assignee?Object(l.c)(e.fields.assignee).displayName:null,issueTimeTracking:Object(o.isRollupSubtaskPhase2Enabled)()?e.fields.timetracking:void 0}))(e,t));function j(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=e=>e?Object(a.a)(e):null,S=(e,t)=>e&&e[t],I=e=>e?{id:Object(i.j)(e.id),key:Object(i.l)(e.key),summary:e.fields.summary,issueTypeName:e.fields.issuetype?e.fields.issuetype.name:"",issueTypeIconUrl:e.fields.issuetype?e.fields.issuetype.iconUrl:""}:null,C=e=>({id:Number(e.id),aboveLevelId:e.aboveLevelId?Number(e.aboveLevelId):null,belowLevelId:e.belowLevelId?Number(e.belowLevelId):null}),T=e=>e?e.reduce((e,t)=>v(v({},e),{},{[t.id]:C(t)}),{}):{},P=e=>e?{baseLevelId:Number(e.baseLevelId),levels:T(e.levels)}:null,_=e=>{if(e.project.avatarUrls){const t=e.project.avatarUrls.find(e=>"32x32"===e.key);return t?t.value:t}return e.project.avatarUrls},x=(e,t)=>{const s=(e=>e.reduce((e,t)=>v(v({},e),{},{[t.key]:t}),{}))(e.issue.fields),a=(e=>t=>t?t.split(".").reduce(S,e):e)(s),i=a("subtasks.content"),r=a("parent-issue.content"),o=a("children-issues.content"),c=a("epic-issues.content"),l=a("portfolio-child-issues.content");let u=[];return o?u=h(o,t):c?u=h(c,t):l&&(u=((e=[],t)=>e?e.map(e=>m(e,t)):[])(l,t)),{project:{projectId:e.project.id,projectName:e.project.name,projectKey:e.project.key,projectType:e.project.projectTypeKey,isSimplified:e.project.simplified,avatarUrl:_(e),issueTypeHierarchy:P(e.project.issueTypeHierarchy)},createdDate:w(a("created.content")),updatedDate:w(a("updated.content")),statuses:{[s.status.content.id]:{id:s.status.content.id,name:s.status.content.name,statusCategory:Object(n.statusCategoryForId)(s.status.content.statusCategory.id)}},issueLinks:s.issuelinks&&Object(y.b)(t,s.issuelinks.content),subtasks:O(i,t),parentIssue:I(r),childrenIssues:u}},D=e=>{const{permissions:{ADMINISTER:t,ADMINISTER_PROJECTS:s,ASSIGN_ISSUES:n,EDIT_ISSUES:a,SCHEDULE_ISSUES:i,ADD_COMMENTS:r,DELETE_ALL_COMMENTS:o,DELETE_OWN_COMMENTS:c,EDIT_ALL_COMMENTS:l,EDIT_OWN_COMMENTS:u,CREATE_ISSUES:d,DELETE_ISSUES:p,MOVE_ISSUES:m,CREATE_ATTACHMENTS:b,DELETE_ALL_ATTACHMENTS:f,DELETE_OWN_ATTACHMENTS:g,WORK_ON_ISSUES:h,ASSIGNABLE_USER:y,LINK_ISSUES:O,VIEW_VOTERS_AND_WATCHERS:j,MANAGE_WATCHERS:E,EDIT_ALL_WORKLOGS:v,EDIT_OWN_WORKLOGS:k,DELETE_ALL_WORKLOGS:w,DELETE_OWN_WORKLOGS:S,USER_PICKER:I,VIEW_DEV_TOOLS:C,SERVICEDESK_AGENT:T}}=e;return{permissions:{canAddComments:r.havePermission,canAdministerJira:t.havePermission,canAdministerProject:s.havePermission,canAssignIssues:n.havePermission,canBeAssignedToIssues:y.havePermission,canCloneIssue:d.havePermission,canCreateAttachments:b.havePermission,canCreateChildren:d.havePermission,canCreateIssuesInClassicProjectEpic:d.havePermission,canCreateSubtask:d.havePermission,canDeleteAllAttachments:f.havePermission,canDeleteOwnAttachments:g.havePermission,canDeleteAllComments:o.havePermission,canDeleteOwnComments:c.havePermission,canDeleteIssue:p.havePermission,canEditAllComments:l.havePermission,canEditOwnComments:u.havePermission,canEditIssues:a.havePermission,canLinkIssues:O.havePermission,canLogWork:h.havePermission,canManageWatchers:E.havePermission,canMoveIssue:m.havePermission,canScheduleIssues:i.havePermission,canViewWatchers:j.havePermission,canViewVoters:j.havePermission,canEditAllWorklogs:v.havePermission,canEditOwnWorklogs:k.havePermission,canDeleteAllWorklogs:w.havePermission,canDeleteOwnWorklogs:S.havePermission,canBrowseUsers:I.havePermission,canViewDevTools:!(!C||!C.havePermission),canUseServiceDeskAgentFeatures:!(!T||!T.havePermission)}}},A=e=>{const{content:t,renderedContent:s,configuration:n}=e,a=j(e,["content","renderedContent","configuration"]),i=void 0!==t||void 0!==s;return v(v(v(v({},i?{value:t}:null),i?{renderedValue:s}:null),n&&{configuration:n}),a)},M=(e,t)=>{const s=((e,t)=>{const s=e.issue.systemFields[`${t}Adf`],n=e.issue.customFields.textareaAdf.find(e=>e.key===t);return s||n||null})(e,t);let n;n=s&&s.value?{value:s.value}:{value:r.c};const a="string"==typeof n.value?JSON.parse(n.value):n.value;return Object(r.g)(a)},L=e=>{const t=new Set(e.issue.fields.filter(e=>"atlassian-wiki-renderer"===e.schema.renderer).map(e=>e.key)),s=e.issue.customFields.textareaAdf.map(e=>e.key).filter(e=>t.has(e)),n=[...["description","environment"].filter(e=>t.has(e)||"description"===e),...s].map(t=>({key:t,value:M(e,t)}));return e.issue.fields.map(e=>{const t=n.find(t=>t.key===e.key&&null!==t.value);return t?{[t.key]:v(v({},A(e)),{},{adfValue:t.value})}:{[e.key]:A(e)}}).reduce((e,t)=>Object.assign(e,t))},R=e=>e?e.reduce((e,{id:t,name:s,items:n})=>v(v({},e),{},{[t]:{id:t,name:s,items:n}}),{}):{},N=(e,t)=>{const s=x(e,t),n={issue:v({id:e.issue.id,agile:e.issue.agile,fields:L(e),tabs:R(e.issue.tabs)},e.issue.viewScreenId?{viewScreenId:e.issue.viewScreenId}:null)};return v(v({},n),s)},U=({issues:e=[]}={})=>e},"./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js":function(e,t,s){"use strict";s.d(t,"r",(function(){return n})),s.d(t,"g",(function(){return r})),s.d(t,"k",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"p",(function(){return l})),s.d(t,"h",(function(){return u})),s.d(t,"q",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"j",(function(){return f})),s.d(t,"n",(function(){return g})),s.d(t,"o",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"b",(function(){return O})),s.d(t,"c",(function(){return j})),s.d(t,"d",(function(){return E})),s.d(t,"i",(function(){return v})),s.d(t,"m",(function(){return w})),s.d(t,"l",(function(){return S}));const n=e=>e,a=/^([A-Z][A-Z0-9]+)-([0-9]*)$/i,i=e=>{if(e){const t=a.exec(e);if(t&&3===t.length)return t[1]}},r=(e,t)=>`${e}/browse/${t}`,o=(e,t)=>`${e}/browse/${t}`,c=(e,t)=>`${e}/rest/api/2/issue/${t}`,l=e=>`${e}/rest/api/2/search`,u=(e,t)=>`${e}/rest/api/2/issue/${t}?fields=issuelinks`,d=(e,t,s,n)=>`${e}/rest/api/2/issue/picker?currentIssueKey=${s}&showSubTasks=true&showSubTaskParent=true&query=${encodeURIComponent(n)}&currentJQL=${encodeURIComponent(t)}`,p="(resolution = Unresolved or statusCategory != Done) ORDER BY priority DESC, updated DESC",m=(e,t,s)=>{let n=`project in projectsWhereUserHasPermission("Link Issues") AND ${p}`;const a=i(s);return a&&(n=`project = "${a.toUpperCase()}" AND ${n}`),d(e,n,t,s)},b=(e,t,s)=>{let n="";const a=i(s);return a&&(n=`project = "${a.toUpperCase()}" ORDER BY priority DESC, updated DESC`),d(e,n,t,s)},f=(e,t)=>`${e}/rest/api/2/issue/createmeta?projectKeys=${t}&expand=projects.issuetypes.fields`,g=e=>`${e}/rest/api/2/issueLink`,h=(e,t)=>`${e}/rest/remoteJiraIssueLink/1/remoteJira/${t}/createIssueLink`,y=e=>`${e}/rest/graphql/1/`,O=e=>`${e}/rest/api/2/mypreferences?key=jira.user.issue.changeboarding.lastinteracted`,j=e=>`${e}/rest/api/2/mypreferences?key=jira.user.issue.clickthrough-banner.lastinteracted`,E=e=>`${e}/rest/confluenceIssueLink/1/confluence/applink`,v=(e,t)=>`${e}/rest/issueLinkAppLink/1/appLink/info?type=com.atlassian.applinks.api.application.jira.JiraApplicationType&issueIdOrKey=${t}`,k=(e,t,s,n)=>`${e}/rest/remoteJiraIssueLink/1/remoteJira/picker?showSubTasks=true&showSubTaskParent=true&query=${encodeURIComponent(s)}&currentJQL=${encodeURIComponent(t)}&appId=${n}`,w=(e,t,s)=>{let n=p;const a=i(t);return a&&(n=`project = "${a.toUpperCase()}" AND ${n}`),k(e,n,t,s)},S=(e,t,s)=>{let n="";const a=i(t);return a&&(n=`project = "${a.toUpperCase()}" ORDER BY priority DESC, updated DESC`),k(e,n,t,s)}},"./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/query-string/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-context-service/src/types.js");const r=()=>a.a.parse(window.location.search).view||"",o=()=>r().includes("planning"),c=e=>e?e===i.b:o()||(()=>"detail"===r())()},"./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),r=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),o=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");const l=e=>e.projects[0]?{subtaskTypes:e.projects[0].issuetypes.filter(e=>e.subtask),issueTypes:e.projects[0].issuetypes}:{subtaskTypes:[],issueTypes:[]},u=(e,t,s)=>((e,t)=>Object(i.a)(e,{perf:r.f,headersProcessor:t&&t(r.f.key)}).map(l).catch(e=>(Object(o.a)("issue.issue-base.content.subtasks.type.subtasks-types-epic","Failed to fetch subtask types.",e,new a.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),n.Observable.of({subtaskTypes:[],issueTypes:[]}))))(Object(c.j)(e,t),s)},"./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return g})),s.d(t,"d",(function(){return h}));var n=s("./node_modules/lodash/every.js"),a=s.n(n),i=s("./node_modules/lodash/has.js"),r=s.n(i),o=s("./node_modules/lodash/partial.js"),c=s.n(o),l=s("./src/packages/platform/utils/types/src/general.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p=["accountId","displayName","avatarUrls","timeZone"],m=({accountId:e,displayName:t,avatarUrls:s,timeZone:n})=>({displayName:t,id:Object(l.a)(e),avatarUrl:s["48x48"],timeZone:n}),b=e=>{const{applicationRoles:t}=e;return t&&t.items&&t.items.map(e=>e.key)||[]},f=e=>{const t=e.find(e=>"48x48"===e.key);return t&&t.value||null},g=e=>{const{accountId:t,displayName:s,avatarUrl:n,avatarUrls:a,timeZone:i}=e;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:t,displayName:s,avatarUrl:n||f(a)},i?{timeZone:i}:{})},h=e=>{if(!e)throw new Error("User is null or undefined");if(!(e&&a()(p,c()(r.a,e))))throw new Error(`User object is not expected shape, keys present: ${Object.keys(e).toString()}`);return e}},"./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js":function(e,t,s){"use strict";var n=s("./node_modules/memoize-one/dist/memoize-one.esm.js");t.a=Object(n.a)(e=>t=>`${e}/people/${t}`)},"./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./node_modules/query-string/index.js"),r=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/platform/services/mention-provider/src/services/user-mention-provider/index.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=e=>null==e||""===e?"":`${window.location.origin}/jira/people/team/${e}?ref=jira$&src=issue`,p=({accountId:e,teamId:t,name:s,avatarUrl:n,members:a,memberCount:i,includesYou:r})=>a?{id:Object(o.a)(t||""),name:s,accessLevel:"CONTAINER",userType:"TEAM",avatarUrl:n,context:{members:a.map(e=>(({accountId:e,name:t})=>({id:e,name:t}))(e)),memberCount:i||0,includesYou:r||!1,teamLink:d(t)}}:{name:s,mentionName:s,nickname:s,id:Object(o.a)(e||""),avatarUrl:n};class m extends c.a{constructor(e,t,s,n){super(e,t,s),this.teamHighlightEnabled=void 0,this.createTeamPath=void 0,this.mentionTypeaheadHighlightEnabled=()=>!0,this.mentionTypeaheadCreateTeamPath=()=>this.createTeamPath,this.getQueryString=(e,t)=>Object(i.stringify)(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({query:e||"",issueKey:this.issueKey,maxResults:20},t)),this.getUrl=e=>`${this.baseUrl}/rest/internal/2/userteam/mention/search?${e}`,this.createTeamPath=n}search(e,t){const s=this.getQueryString(e,t),n=this.getUrl(s);return this.activeSearches.add(e||""),Object(r.a)(n).mergeMap(e=>e.map(p)).reduce((e,t)=>[...e,t],[]).map(t=>({query:e||"",mentions:t})).toPromise()}}const b=Object(n.createSelector)(a.g,a.B,a.a,(e,t,s)=>new m(e,t,s,`${e}/jira/people/search#createTeam`))},"./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js"),o=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),c=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),l=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),u=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js");const d=i.default.div(["display:flex;"]),p=Object(i.default)(c.a)(["width:8px;"]);t.a=()=>a.a.createElement(l.a,null,a.a.createElement(c.b,null),a.a.createElement(o.a,{paddingTop:0,paddingBottom:0},a.a.createElement(o.a,{paddingTop:32,paddingBottom:12},a.a.createElement(u.a,{fontSize:14,lineHeight:16,intrusion:300})),a.a.createElement(d,null,a.a.createElement(r.a,null),a.a.createElement(p,null),a.a.createElement(u.a,{fontSize:40,lineHeight:40,intrusion:0}))))},"./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");t.a=n.default.div(["width:","px;height:","px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI0MHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCA0MCA0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT4zMnB4IGNpcmNsZSBpbnNpZGUgNDBweCByZWN0PC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxkZWZzPjwvZGVmcz4gICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iMzJweC1jaXJjbGUtaW5zaWRlLTQwcHgtcmVjdCIgZmlsbD0iI0ZGRkZGRiI+ICAgICAgICAgICAgPHBhdGggZD0iTTAsMCBMNDAsMCBMNDAsNDAgTDAsNDAgTDAsMCBaIE0yMCw0IEMxMS4xNjM0NDQsNCA0LDExLjE2MzQ0NCA0LDIwIEM0LDI4LjgzNjU1NiAxMS4xNjM0NDQsMzYgMjAsMzYgQzI4LjgzNjU1NiwzNiAzNiwyOC44MzY1NTYgMzYsMjAgQzM2LDExLjE2MzQ0NCAyOC44MzY1NTYsNCAyMCw0IFoiIGlkPSJDb21iaW5lZC1TaGFwZSI+PC9wYXRoPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+);"],5*a.e,5*a.e)},"./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/esm/index.js");t.a=n.default.div(["position:relative;width:100%;border-top:","px solid ",";border-bottom:","px solid ",";"],e=>e.paddingTop,a.a.N0,e=>e.paddingBottom,a.a.N0)},"./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/esm/index.js");const i=Object(n.keyframes)(["0%{background-position:-300px 0;}100%{background-position:2000px 0;}"]),r=n.default.div(["background-color:",";background-image:none;"],a.a.N0);t.b=n.default.div(["animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:",";animation-timing-function:linear;background-color:",";background-image:linear-gradient( to right,"," 10%,"," 30%,"," 50% );background-repeat:no-repeat;position:absolute;left:0;right:0;top:0;bottom:0;"],i,a.a.N30,a.a.N30,a.a.N20,a.a.N30)},"./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");t.a=n.default.div(["width:100%;display:flex;position:relative;"])},"./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/esm/index.js");t.a=n.default.div(["position:relative;height:","px;border-right:","px solid ",";border-top:","px solid ",";border-bottom:","px solid ",";"],e=>e.fontSize,e=>e.intrusion,a.a.N0,e=>(e.lineHeight-e.fontSize)/2,a.a.N0,e=>(e.lineHeight-e.fontSize)/2,a.a.N0)},"./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/@atlaskit/activity-provider/dist/esm/api/ActivityResource.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js");const r=Object(n.createSelector)(i.j,e=>new a.a("/gateway/api/graphql",e))},"./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/types/src/application.js"),i=s("./src/packages/platform/utils/types/src/edition.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const c=Object(n.createSelector)(o.F,e=>e?Object(a.e)(e):null),l=Object(n.createSelector)([r.c,c],(e,t)=>t?Object(i.f)(t,e):null)},"./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js":function(e,t,s){"use strict";s.d(t,"m",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"g",(function(){return b})),s.d(t,"E",(function(){return f})),s.d(t,"B",(function(){return g})),s.d(t,"A",(function(){return h})),s.d(t,"x",(function(){return y})),s.d(t,"G",(function(){return O})),s.d(t,"K",(function(){return j})),s.d(t,"I",(function(){return E})),s.d(t,"b",(function(){return v})),s.d(t,"j",(function(){return k})),s.d(t,"D",(function(){return w})),s.d(t,"F",(function(){return S})),s.d(t,"z",(function(){return I})),s.d(t,"H",(function(){return T})),s.d(t,"M",(function(){return P})),s.d(t,"k",(function(){return _})),s.d(t,"L",(function(){return x})),s.d(t,"l",(function(){return D})),s.d(t,"r",(function(){return A})),s.d(t,"e",(function(){return L})),s.d(t,"u",(function(){return R})),s.d(t,"p",(function(){return N})),s.d(t,"w",(function(){return U})),s.d(t,"q",(function(){return F})),s.d(t,"v",(function(){return V})),s.d(t,"f",(function(){return K})),s.d(t,"s",(function(){return B})),s.d(t,"J",(function(){return W})),s.d(t,"t",(function(){return H})),s.d(t,"n",(function(){return G})),s.d(t,"i",(function(){return $})),s.d(t,"h",(function(){return q})),s.d(t,"O",(function(){return z})),s.d(t,"C",(function(){return Y})),s.d(t,"d",(function(){return Q})),s.d(t,"N",(function(){return Z})),s.d(t,"Q",(function(){return X})),s.d(t,"c",(function(){return ee})),s.d(t,"y",(function(){return te})),s.d(t,"o",(function(){return ae})),s.d(t,"P",(function(){return re}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),i=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-tenant-context/index.js"),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/platform/utils/types/src/license-state.js"),l=s("./src/packages/issue/issue-view/src/configurations.js"),u=s("./src/packages/issue/issue-view/src/feature-flags.js"),d=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js");const p=e=>e.context,m=Object(n.createSelector)(p,e=>e.atlassianAccountId),b=Object(n.createSelector)(p,e=>e.baseUrl),f=Object(n.createSelector)(p,e=>e.loginRedirectUrl),g=Object(n.createSelector)(p,e=>Object(o.l)(e.issueKey)),h=Object(n.createSelector)(p,e=>e.issueId),y=Object(n.createSelector)(p,e=>!!e.isSpaEnabled),O=Object(n.createSelector)(p,e=>e.onIssueKeyChange),j=Object(n.createSelector)(p,e=>e.rapidViewMap),E=Object(n.createSelector)(g,e=>Object(d.a)(e)),v=Object(n.createSelector)(p,e=>void 0!==e.analyticsSource?new a.a(e.analyticsSource):void 0),k=Object(n.createSelector)(p,e=>e.cloudId||Object(o.c)("")),w=(Object(n.createSelector)(p,e=>e.isAnonymous),Object(n.createSelector)(p,e=>e.locale)),S=Object(n.createSelector)(p,e=>e.maxTokenLength),I=Object(n.createSelector)(p,e=>e.issueActions||[]),C=Object(n.createSelector)(p,e=>e.contextItemCategories),T=Object(n.createSelector)(C,e=>e.primary),P=Object(n.createSelector)(C,e=>e.secondary),_=Object(n.createSelector)(p,e=>e.contentItemCategories.visible||[]),x=Object(n.createSelector)(p,e=>e.contentItemCategories.request),D=Object(n.createSelector)(T,P,(e,t)=>e.concat(t)),A=Object(n.createSelector)(_,(e,t)=>t,(e,t)=>e.map(e=>e.id).includes(t)),M=Object(n.createSelector)(D,(e,t)=>t,(e,t)=>e.includes(t)),L=(Object(n.createSelector)(A,M,(e,t)=>e?"content":t?"context":"foundation"),Object(n.createSelector)(p,e=>e.applicationKey)),R=Object(n.createSelector)(v,e=>!!e&&e.value===i.a.MOBILE_ISSUE),N=Object(n.createSelector)(L,e=>e===Object(l.k)().applicationKey||e===Object(l.n)().applicationKey),U=Object(n.createSelector)(L,e=>e===Object(l.l)().applicationKey),F=Object(n.createSelector)(v,e=>!!e&&e.value===i.a.BITBUCKET_ISSUE),V=Object(n.createSelector)(L,e=>Object(u.isJSDBentoEnabled)()&&e===Object(l.j)().applicationKey),K=Object(n.createSelector)(p,e=>e.backButtonUrl),B=Object(n.createSelector)(p,e=>!!e.ecosystemEnabled),W=Object(n.createSelector)(p,e=>e.rapidViewId),H=Object(n.createSelector)(p,e=>!!e.isLoadedWithPage),G=Object(n.createSelector)(p,e=>e.estimationStatistic||null),$=Object(n.createSelector)(p,e=>e.boardType),q=Object(n.createSelector)(p,e=>e.boardId),z=Object(n.createSelector)(p,e=>e.siteAdminStatus),Y=(Object(n.createSelector)(p,e=>e.productCrossSellConfig),Object(n.createSelector)(p,e=>e.licensedProducts)),Q=Object(n.createSelector)(p,e=>e.appPermissions),J=Object(n.createSelector)(p,e=>e.isModal),Z=Object(n.createSelector)(J,R,(e,t)=>!e&&!t),X=Object(n.createSelector)(p,e=>e.viewMode),ee=Object(n.createSelector)(p,e=>e.appEditions),te=Object(n.createSelector)(Y,e=>e&&!0===e["is.origo.jira.tempo-plugin"]),se=Object(n.createSelector)(p,e=>e.licenseStates),ne=Object(n.createSelector)(se,e=>e&&e.software===c.a),ae=Object(n.createSelector)(Y,ne,(e,t)=>e[r.a.JIRA_SOFTWARE]&&t),ie=Object(n.createSelector)(se,e=>e&&e.serviceDesk===c.a),re=Object(n.createSelector)(Y,ie,(e,t)=>e&&e[r.a.JIRA_SERVICEDESK]&&t)},"./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js":function(e,t,s){"use strict";s.d(t,"t",(function(){return f})),s.d(t,"w",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"b",(function(){return O})),s.d(t,"q",(function(){return j})),s.d(t,"s",(function(){return E})),s.d(t,"a",(function(){return v})),s.d(t,"z",(function(){return k})),s.d(t,"p",(function(){return w})),s.d(t,"A",(function(){return S})),s.d(t,"m",(function(){return I})),s.d(t,"l",(function(){return C})),s.d(t,"d",(function(){return T})),s.d(t,"c",(function(){return P})),s.d(t,"C",(function(){return _})),s.d(t,"r",(function(){return x})),s.d(t,"o",(function(){return D})),s.d(t,"n",(function(){return A})),s.d(t,"h",(function(){return M})),s.d(t,"g",(function(){return L})),s.d(t,"i",(function(){return R})),s.d(t,"y",(function(){return N})),s.d(t,"B",(function(){return U})),s.d(t,"f",(function(){return F})),s.d(t,"D",(function(){return V})),s.d(t,"j",(function(){return K})),s.d(t,"k",(function(){return B})),s.d(t,"G",(function(){return H})),s.d(t,"H",(function(){return G})),s.d(t,"F",(function(){return $})),s.d(t,"E",(function(){return q})),s.d(t,"v",(function(){return Y})),s.d(t,"x",(function(){return Q})),s.d(t,"u",(function(){return ee}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/find.js"),i=s.n(a),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),o=s("./src/packages/issue/issue-view/src/configurations.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){b(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function b(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const f=e=>e.fields||{},g=(e,t)=>i()(t,t=>(t.schema&&t.schema.custom)===e),h=(e,t)=>{let s=t[e];if(!s&&Object.keys(o.m).includes(e)){const n=o.m[e];s=g(n,t)}return s},y=e=>Object(n.createSelector)(f,t=>g(e,t)),O=e=>Object(n.createSelector)(y(e),e=>{const t=e?e.key.match(/customfield_(\d+)$/i):null;return t?+t[1]:null}),j=e=>Object(n.createSelector)(f,t=>h(e,t)),E=Object(n.createSelector)(f,e=>Object.keys(e).map(t=>h(t,e)).filter(Boolean)),v=Object(n.createSelector)(f,e=>Object.keys(e)),k=e=>!!e&&e.editable,w=e=>Object(n.createSelector)(j(e),e=>e&&e.schema&&e.schema.configuration&&e.schema.configuration.reduce((e,{key:t,value:s})=>m(m({},e),{},{[t]:s}),{})),S=e=>Object(n.createSelector)(j(e),e=>k(e)),I=e=>Object(n.createSelector)(j(e),t=>t&&t.title?t.title:(r.i.safeWarn("issue.field.selector",`${e} does not have a field title`),"")),C=e=>Object(n.createSelector)(j(e),e=>e&&e.key),T=e=>Object(n.createSelector)(j(e),e=>e&&e.autoCompleteUrl),P=e=>Object(n.createSelector)(j(e),e=>e?e.allowedValues:[]),_=e=>Object(n.createSelector)(j(e),e=>!!e&&e.required),x=e=>Object(n.createSelector)(j(e),e=>e&&Object(u.a)(e)),D=e=>Object(n.createSelector)(j(e),e=>e&&e.value),A=e=>Object(n.createSelector)(j(e),e=>e&&Object(d.a)(e)),M=e=>Object(n.createSelector)(j(e),e=>e&&Object(l.a)(e)),L=e=>Object(n.createSelector)(j(e),e=>e&&Object(l.b)(e)),R=e=>Object(n.createSelector)(j(e),e=>e&&e.renderedValue),N=e=>!!e&&void 0!==e.editingValue,U=e=>Object(n.createSelector)(j(e),e=>N(e)),F=e=>Object(n.createSelector)(j(e),e=>(e?e.fieldEditSessionId:null)||""),V=e=>Object(n.createSelector)(j(e),e=>!!e&&void 0!==e.pendingValue),K=(e,t)=>Object(n.createSelector)(j(e),e=>e&&(e.isInvalid?e.invalidMessage||t:null)),B=e=>Object(n.createSelector)(j(e),e=>Boolean(e&&e.isInvalid)),W=e=>"com.atlassian.jira.plugin.system.customfieldtypes:textarea"===e||"environment"===e||"description"===e,H=e=>Object(n.createSelector)(t=>Object(c.r)(t,e),c.v,x(e),(e=>Object(n.createSelector)(j(e),e=>e&&e.schema&&e.schema.renderer))(e),(t,s,n,a)=>{const i="description"===e,r=W(n)&&"atlassian-wiki-renderer"===a;return i||r}),G=Object(n.createSelector)(f,e=>e,(e,t)=>Object.keys(e).filter(e=>H(e)(t))),$=Object(n.createSelector)(G,e=>e,(e,t)=>e.some(e=>U(e)(t))),q=e=>Object(n.createSelector)(x(e),e=>W(e)),z=Object(n.createSelector)(f,e=>e,(e,t)=>Object.keys(e).filter(e=>q(e)(t))),Y=Object(n.createSelector)(z,e=>e,(e,t)=>e.filter(e=>U(e)(t))),Q=Object(n.createSelector)(j("fixVersions"),j("versions"),(e,t)=>{const s=[];return e&&s.push(e.key),t&&s.push(t.key),s}),J=["com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team","com.atlassian.jira.plugin.system.customfieldtypes:storypoint","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jira.plugin.system.customfieldtypes:float","ecosystemGlance","forgeGlance","com.atlassian.servicedesk:sd-request-feedback","com.pyxis.greenhopper.jira:jsw-issue-color","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language"],Z=["timetracking","security","issuerestriction","timeoriginalestimate"],X=["issuetype"],ee=Object(n.createSelector)(E,c.l,c.k,c.L,e=>e,(e,t,s,n,a)=>{const i=[...t.map(e=>e.id),...s.map(e=>e.id),...n?n.map(e=>e.id):[]];return e.filter(e=>((e,t)=>X.includes(t)||e.indexOf(t)>-1)(i,e.key)&&e.editable&&(e=>!e||-1===J.indexOf(e.custom)&&-1===Z.indexOf(e.system))(e.schema)).map(e=>({value:e.key,label:e.title,isRichTextField:H(e.key)(a)}))})},"./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a}));var n=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js");t.a=e=>void 0!==e.editingValue?e.editingValue:Object(n.a)(e);const a=e=>e.editingValue||Object(n.b)(e)},"./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/once.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/configurations.js");const r=a()(()=>[...Object(i.f)().filter(e=>!i.d.includes(e)),...Object.keys(i.m).map(e=>i.m[e]),"com.atlassian.jira.plugin.system.customfieldtypes:flagged"]),o=e=>{const t=e?e.schema:void 0;return t?(e=>r().find(t=>t===e))(t.custom)||t.system||t.type:void 0}},"./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),t.a=e=>void 0!==e.pendingValue?e.pendingValue:e.value;const n=e=>e.pendingValue||e.adfValue||e.value},"./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return o})),s.d(t,"E",(function(){return c})),s.d(t,"I",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"d",(function(){return d})),s.d(t,"i",(function(){return p})),s.d(t,"C",(function(){return m})),s.d(t,"D",(function(){return b})),s.d(t,"F",(function(){return f})),s.d(t,"u",(function(){return g})),s.d(t,"y",(function(){return h})),s.d(t,"x",(function(){return y})),s.d(t,"A",(function(){return O})),s.d(t,"z",(function(){return j})),s.d(t,"k",(function(){return E})),s.d(t,"l",(function(){return v})),s.d(t,"r",(function(){return k})),s.d(t,"s",(function(){return w})),s.d(t,"m",(function(){return S})),s.d(t,"w",(function(){return I})),s.d(t,"n",(function(){return C})),s.d(t,"o",(function(){return T})),s.d(t,"b",(function(){return P})),s.d(t,"h",(function(){return _})),s.d(t,"g",(function(){return x})),s.d(t,"J",(function(){return D})),s.d(t,"B",(function(){return A})),s.d(t,"G",(function(){return M})),s.d(t,"H",(function(){return L})),s.d(t,"a",(function(){return R})),s.d(t,"v",(function(){return N})),s.d(t,"j",(function(){return U})),s.d(t,"f",(function(){return F})),s.d(t,"p",(function(){return V})),s.d(t,"q",(function(){return K})),s.d(t,"t",(function(){return B}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/types/src/general.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const o=e=>e.entities,c=Object(n.createSelector)(o,e=>e?e.project:null),l=e=>e.ui,u=Object(n.createSelector)(o,e=>e.issue),d=Object(n.createSelector)(o,e=>e.refreshedOn),p=Object(n.createSelector)(l,e=>e.flags),m=Object(n.createSelector)(c,e=>e&&e.projectId?e.projectId:null),b=Object(n.createSelector)(c,e=>e?e.projectKey:null),f=Object(n.createSelector)(c,e=>e&&e.projectType?e.projectType:null),g=Object(n.createSelector)(c,e=>!!e&&e.isSimplified),h=Object(n.createSelector)(o,i.a,(e,t)=>t?e.users[t]:null),y=Object(n.createSelector)(o,i.a,(e,t)=>{const s=t?e.users[t]:null;return s?s.avatarUrl:null}),O=Object(n.createSelector)(o,e=>e.parentIssue),j=Object(n.createSelector)(h,e=>e?e.timeZone:void 0),E=Object(n.createSelector)(u,e=>e&&Object(a.j)(e.id)),v=Object(n.createSelector)(g,e=>!e),k=Object(n.createSelector)(l,e=>"LOADING"===e.loadingStage),w=Object(n.createSelector)(l,e=>"PREVIEW"===e.loadingStage),S=Object(n.createSelector)(l,e=>"COMPLETE"===e.loadingStage),I=Object(n.createSelector)(l,e=>e.loadingStage),C=Object(n.createSelector)(l,e=>!(!e.issueDeletion||!e.issueDeletion.isDeleteIssueModalOpen)),T=Object(n.createSelector)(l,e=>!!e.issueDeletion&&e.issueDeletion.isDeletingIssue),P=Object(n.createSelector)(l,e=>!!e.issueDeletion&&e.issueDeletion.didIssueDeleteFail),_=Object(n.createSelector)(l,e=>e.error),x=Object(n.createSelector)(l,e=>e.errorMessage),D=Object(n.createSelector)(o,e=>t=>e.users[t]),A=Object(n.createSelector)(o,e=>e.parentLevelIssues),M=()=>"jira",L=Object(n.createSelector)(f,e=>{switch(e){case"business":return"jira-core";case"software":return"jira-software";case"service_desk":return"jira-servicedesk";default:return"jira"}}),R=Object(n.createSelector)(M,i.j,(e,t)=>t?`ari:cloud:${e}:${t}`:null),N=Object(n.createSelector)(R,E,(e,t)=>e&&t?`${e}:issue/${t}`:null),U=()=>({}),F=Object(n.createSelector)(e=>e.agile,e=>e&&e.epic&&e.epic.key||null),V=e=>({}.hasOwnProperty.call(e,"epic-issues")),K=Object(n.createSelector)(r.t,e=>V(e)),B=Object(n.createSelector)(f,e=>"service_desk"===e)},"./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js");const a=e=>e.mediaContext,i=Object(n.createSelector)(a,e=>e&&e.userAuth||null),r=Object(n.createSelector)(a,e=>e&&e.viewContext||null),o=Object(n.createSelector)(a,e=>e&&e.uploadContext||null)},"./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"g",(function(){return p})),s.d(t,"d",(function(){return m})),s.d(t,"c",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"h",(function(){return y})),s.d(t,"f",(function(){return O})),s.d(t,"e",(function(){return j}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/mapValues.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/feature-flags.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const l=Object(n.createSelector)(c.e,e=>e.applicationRoles),u=Object(n.createSelector)(c.e,e=>e.permissions),d=new Set(["canUseServiceDeskAgentFeatures","canEditIssues","canTransitionIssues","canScheduleIssues","canMoveIssue","canAssignIssues","canBeAssignedToIssues","canDeleteIssue","canManageWatchers","canEditAllComments","canDeleteAllComments","canDeleteAllAttachments","canLogWork","canEditOwnWorklogs","canEditAllWorklogs","canDeleteOwnWorklogs","canDeleteAllWorklogs","canResolveIssues","canViewReadonlyWorkflow","canCloseIssues","canModifyReporter","canSetIssueSecurity"]),p=Object(n.createSelector)(l,o.d,c.F,u,o.P,(e,t,s,n,a)=>"service_desk"===s&&a?Object(r.isUseAppPermissionsFromTenantContextEnabled)()?((e,t)=>{const{canUseServiceDeskAgentFeatures:s}=t;return i()(t,(t,n)=>d.has(n)?t&&e&&s:t)})(t.hasServiceDeskAccess,n):((e,t)=>{const s=e&&e.includes("jira-servicedesk"),{canUseServiceDeskAgentFeatures:n}=t;return i()(t,(e,t)=>d.has(t)?e&&s&&n:e)})(e||[],n):n),m=Object(n.createSelector)(p,e=>!!e.canBeAssignedToIssues),b=Object(n.createSelector)(p,e=>!!e.canAdministerProject),f=Object(n.createSelector)(p,e=>!!e.canAdministerJira),g=Object(n.createSelector)(p,e=>e.canViewWatchers),h=Object(n.createSelector)(p,e=>e.canManageWatchers),y=Object(n.createSelector)(g,h,(e,t)=>({canViewWatchers:e,canManageWatchers:t})),O=(Object(n.createSelector)(p,e=>e.canBrowseUsers),Object(n.createSelector)(p,e=>e.canViewDevTools)),j=Object(n.createSelector)(p,e=>e.canUseServiceDeskAgentFeatures)},"./src/packages/issue/issue-view/src/common/state/selectors/reactions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const o=e=>Object(n.createSelector)(i.a,t=>t&&e?`${t}:comment/${e}`:null),c=Object(n.createSelector)(r.g,a.j,(e,t)=>!(!e.canAddComments||!t))},"./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return b})),s.d(t,"i",(function(){return f})),s.d(t,"d",(function(){return h})),s.d(t,"b",(function(){return y})),s.d(t,"l",(function(){return E})),s.d(t,"c",(function(){return k})),s.d(t,"j",(function(){return S})),s.d(t,"f",(function(){return I})),s.d(t,"e",(function(){return C})),s.d(t,"m",(function(){return _})),s.d(t,"a",(function(){return x})),s.d(t,"g",(function(){return A})),s.d(t,"k",(function(){return M})),s.d(t,"n",(function(){return L}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isNumber.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/feature-flags.js"),o=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),c=s("./src/packages/issue/issue-view/src/selectors/children-issues-selector.js"),l=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const b=Object(n.createSelector)(p.e,e=>Object(r.isJiraSettingsHookEnabled)()?e.jiraSettings.timeTrackingConfiguration:e.timeTrackingConfiguration),f=Object(d.o)("timetracking"),g=Object(n.createSelector)(b,e=>e.isTimeTrackingEnabled),h=Object(n.createSelector)(g,d.a,(e,t)=>e&&t.includes("timetracking")),y=Object(n.createSelector)(h,m.g,u.u,(e,t,s)=>e&&t.canLogWork&&!s),O=Object(n.createSelector)(p.I,e=>e.worklog),j=Object(n.createSelector)(O,e=>e.modal),E=Object(n.createSelector)(O,e=>e.loadingStage),v=Object(n.createSelector)(Object(d.o)("subtasks"),Object(d.o)("children-issues"),o.d,(e,t,s)=>(null==t?void 0:t.length)&&0===s?t:e),k=Object(n.createSelector)(c.a,l.b,o.d,(e,t,s)=>t||Boolean(null==e?void 0:e.length)&&0===s),w=(e,t)=>i()(e)||i()(t)?(e||0)+(t||0):e,S=Object(n.createSelector)(f,v,(e,t)=>s=>t&&0!==t.length&&s?t.map(e=>((e,t)=>{var s;return Array.isArray(e)?null===(s=e.find(e=>e.key===t))||void 0===s?void 0:s.value:e&&e[t]})(e.fields,"timetracking")).filter(Boolean).reduce((e,t)=>({originalEstimateSeconds:w(e.originalEstimateSeconds,t.originalEstimateSeconds),timeSpentSeconds:w(e.timeSpentSeconds,t.timeSpentSeconds),remainingEstimateSeconds:w(e.remainingEstimateSeconds,t.remainingEstimateSeconds)}),e):e),I=Object(n.createSelector)(j,e=>e.openModal),C=Object(n.createSelector)(j,e=>e.isSaving),T=Object(n.createSelector)(j,e=>e.activeWorklogId),P=Object(n.createSelector)(p.e,e=>e.worklog),_=Object(n.createSelector)(P,e=>e.worklogs),x=Object(n.createSelector)(T,_,(e,t)=>e&&t[e]||null),D=Object(n.createSelector)(P,e=>e.sortedWorklogIds),A=Object(n.createSelector)(_,D,(e,t)=>t.map(t=>e[t])),M=Object(n.createSelector)(P,e=>e.totalWorklogs),L=Object(n.createSelector)(P,e=>e.worklogsStartIndex||0)},"./src/packages/issue/issue-view/src/common/state/selectors/timestamp-display-setting-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.I,e=>e.timestampDisplaySetting)},"./src/packages/issue/issue-view/src/common/styles/issue-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return d}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/esm/index.js");const i=n.default.span(["color:",";"],a.a.N200),r=Object(n.css)(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),o=n.default.div(["",";"],r),c=e=>Object(n.css)(["","::-webkit-scrollbar{width:8px;background:transparent;}","::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:10px;}"],e,e),l=Object(n.css)(["font-size:1em;line-height:1.714;font-weight:normal;margin-top:1.143;margin-bottom:0;letter-spacing:-0.005em;overflow-y:auto;overflow-x:hidden;width:100%;height:auto;white-space:pre-line;"]),u=n.default.div(["",";"],l),d=n.default.div(["",";max-height:","ex;",";"],l,e=>2.5*(e.maxRows?e.maxRows:2),c("&"))},"./src/packages/issue/issue-view/src/common/util/dom-util/get-inner-height/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>{if(!e)return;const t=getComputedStyle(e),s=(parseFloat(t.paddingTop)||0)+(parseFloat(t.paddingBottom)||0);return e.clientHeight-s}},"./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t=!0)=>{if(!e||!e.parentElement)return null;let s=getComputedStyle(e);const n=t&&"absolute"===s.position,a=/(auto|scroll)/;if("fixed"===s.position)return document.body;for(let t=e.parentElement;t;t=t&&t.parentElement){if(s=getComputedStyle(t),!(n&&"static"===s.position)&&a.test(s.overflow+s.overflowY+s.overflowX))return t}return null}},"./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=e=>Object(n.q)(e.split("-")[0])},"./src/packages/issue/issue-view/src/common/util/errors/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),a=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js");const i=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","Network request failed"]),r=(e,t,s,r)=>{s instanceof TypeError&&(e=>"object"==typeof e&&"TypeError"===e.name&&i.has(e.message))(s)?((e,t,s)=>{Object(a.a)({error:s,attributes:{message:t},meta:{id:e,packageName:"jiraIssueView"}})})(e,t,s):r&&n.i.safeError(e,t,r)}},"./src/packages/issue/issue-view/src/common/util/events/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"a",(function(){return c}));const n=e=>e&&e instanceof KeyboardEvent&&27===e.keyCode,a=e=>13===e.keyCode,i=e=>0===e.button,r=e=>i(e)&&!(e.metaKey||e.ctrlKey),o=e=>1===e.button,c=e=>i(e)&&(e.metaKey||e.ctrlKey)},"./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/flow.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js");t.a=(e=[],t)=>s=>a()(...e,Object(i.a)({FallbackComponent:t}))(s)},"./src/packages/issue/issue-view/src/common/util/safe-component/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/node-env.js");class c{constructor(e){this.logLocation=void 0,this.handleError=(e,t)=>r.i.safeError(this.logLocation,"An uncaught error has occurred in a React component",new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{message:e.message,stack:e.stack,componentStack:t}})),this.callSafely=(e,t,...s)=>{try{return t&&t.apply(e,s)}catch(e){this.handleError(e)}return null},this.logLocation=`issue.error-boundary.${e}`}}const l=e=>!!e.prototype&&e.prototype.isReactComponent,u=(e,t)=>{const s=e,n=Object.getOwnPropertyDescriptor(s,"prototype");return Boolean(n&&n.value&&n.value[t])},d=["componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","getSnapshotBeforeUpdate","componentDidUpdate"],p=(e,t,s)=>{var i,m;const b=s||(e=>e.displayName||e.name||"UnsafeComponent")(e),f=new c(s?`Fallback(${b})`:b);t&&((e,t)=>{const s=l(e)?e:e().type;if(!s)return;const n=[];if(d.forEach(e=>{u(s,e)&&n.push(e)}),n.length){const e="\t\t",s=`The fallback component provided for '${t}' defines the following unsupported lifecycles methods:\n${e}${n.join(`\n${e}`)}`;Object(o.a)()?console.warn(s):r.i.safeWarn(`issue.error-boundary.${t}`,s)}})(t,b);let g=e;if(l(e)&&u(e,"componentWillUnmount")){class t extends e{componentWillUnmount(){f.callSafely(this,super.componentWillUnmount)}}t.displayName=b,g=t}const h={hadError:!1,isInternalRender:!1};return m=i=class extends n.Component{constructor(...e){super(...e),this.state=h}componentDidCatch(e,t){f.handleError(e,t.componentStack),this.setState({hadError:!0,isInternalRender:!0})}render(){if(this.state.hadError){if(!t)return null;const e=p(t,null,b);return(a.a.createElement(e,this.props))}return(a.a.createElement(g,this.props))}},i.displayName=`${(()=>s?"Fallback":t?"SafeWithFallback":"Safe")()}(${b})`,i.getDerivedStateFromProps=(e,t)=>t.hadError&&!t.isInternalRender?h:{isInternalRender:!1},m},m=(e={})=>t=>p(t,e.FallbackComponent)},"./src/packages/issue/issue-view/src/common/util/scroll/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/scroll-into-view-if-needed/es/index.js");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const r=(e,t=Object.freeze({}))=>{e&&Object(n.default)(e,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({duration:300},t))},o=e=>{e&&r(e,{centerIfNeeded:!0})}},"./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js":function(e,t,s){"use strict";t.a=(e,t)=>{const s=[{suffix:"w",seconds:e*t*60*60},{suffix:"d",seconds:60*t*60},{suffix:"h",seconds:3600},{suffix:"m",seconds:60}];return e=>{const t={secondsRemaining:e,timeString:""};return s.reduce((e,t)=>{if(t.seconds<=0)return e;const s=Math.floor(e.secondsRemaining/t.seconds);return{secondsRemaining:s>=1?e.secondsRemaining%t.seconds:e.secondsRemaining,timeString:s>=1?`${e.timeString} ${s}${t.suffix}`:e.timeString}},t).timeString.trim()||"0m"}}},"./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js":function(e,t,s){"use strict";const n=/^(\d+(?:\.\d+)?)([wdhm])$/,a=e=>{const t=n.exec(e);return t?{quantity:parseFloat(t[1]),unit:t[2]}:null};t.a=(e,t)=>{const s=[{unit:"w",seconds:e*t*60*60},{unit:"d",seconds:60*t*60},{unit:"h",seconds:3600},{unit:"m",seconds:60}];return e=>{const t=e.split(" ").map(a);let n=0,i=0;for(let e=0;e<s.length&&n!==t.length;e+=1){const a=s[e],r=t[n];if(!r)return null;r.unit===a.unit&&(i+=r.quantity*a.seconds,n+=1)}return n<t.length?null:Math.floor(i)}}},"./src/packages/issue/issue-view/src/configurations.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"m",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"f",(function(){return l})),s.d(t,"h",(function(){return u})),s.d(t,"e",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"l",(function(){return m})),s.d(t,"k",(function(){return b})),s.d(t,"n",(function(){return f})),s.d(t,"b",(function(){return g})),s.d(t,"i",(function(){return h})),s.d(t,"j",(function(){return y})),s.d(t,"g",(function(){return O}));var n=s("./src/packages/platform/utils/constants/src/application-keys.js"),a=s("./src/packages/issue/issue-view/src/feature-flags.js");const i="com.atlassian.jpo:jpo-custom-field-parent",r={epic:"com.pyxis.greenhopper.jira:gh-epic-link",sprint:"com.pyxis.greenhopper.jira:gh-sprint",storyPointsField:"com.atlassian.jira.plugin.system.customfieldtypes:storypoint","com.atlassian.teams:rm-teams-custom-field-team":"com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent":"com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start":"com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end":"com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color":"com.pyxis.greenhopper.jira:jsw-issue-color","com.pyxis.greenhopper.jira:gh-epic-color":"com.pyxis.greenhopper.jira:gh-epic-color"},o=["number","string","datetime","option2","array"],c=["com.atlassian.servicedesk:sd-request-participants","com.atlassian.servicedesk:sd-customer-organizations","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language","com.atlassian.servicedesk:sd-request-feedback","com.atlassian.servicedesk.approvals-plugin:sd-approvals","com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list","com.atlassian.servicedesk:vp-origin","com.atlassian.jira.plugins.cmdb:cmdb-object-cftype"],l=()=>["com.atlassian.jira.plugin.system.customfieldtypes:labels","com.atlassian.jira.plugin.system.customfieldtypes:textfield","com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","com.atlassian.jira.plugin.system.customfieldtypes:url","com.atlassian.jira.plugin.system.customfieldtypes:float","com.pyxis.greenhopper.jira:jsw-story-points","com.atlassian.jira.plugin.system.customfieldtypes:select","com.atlassian.jira.plugin.system.customfieldtypes:multiselect","com.atlassian.jira.plugin.system.customfieldtypes:version","com.atlassian.jira.plugin.system.customfieldtypes:textarea","com.atlassian.jira.plugin.system.customfieldtypes:multiversion","com.atlassian.jira.plugin.system.customfieldtypes:datepicker","com.atlassian.jira.plugin.system.customfieldtypes:grouppicker","com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker","com.atlassian.jira.plugin.system.customfieldtypes:userpicker","com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons","com.atlassian.jira.plugin.system.customfieldtypes:datetime","com.atlassian.servicedesk.assets-plugin:assetfield","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype","com.atlassian.jira.plugin.system.customfieldtypes:people","com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team",...Object(a.isReadOnlyFieldEnabled)()?["com.atlassian.jira.plugin.system.customfieldtypes:readonlyfield"]:[],...o,...c],u={software:"https://confluence.atlassian.com/jirasoftwarecloud/configure-field-layout-in-the-issue-view-961798059.html",business:"https://confluence.atlassian.com/jiracorecloud/configure-field-layout-in-the-issue-view-961798123.html",service_desk:"https://support.atlassian.com/jira-service-desk-cloud/docs/what-are-the-different-sections-in-the-issue-view/"},d=()=>({issueActions:[]}),p=()=>({applicationKey:n.a.CORE_ISSUE,issueActions:[],ecosystemEnabled:!0}),m=()=>({applicationKey:n.a.SOFTWARE_ISSUE,issueActions:["flagActions"],ecosystemEnabled:!0}),b=()=>({applicationKey:n.a.SIMPLE_SOFTWARE_BOARD,issueActions:["flagActions","cardCoverActions"],ecosystemEnabled:!0}),f=()=>({applicationKey:n.a.STANDARD_ROADMAP_ISSUE,issueActions:["flagActions"],ecosystemEnabled:!0}),g=()=>({applicationKey:n.a.BITBUCKET_ISSUE,issueActions:[]}),h=()=>({applicationKey:n.a.MOBILE_ISSUE,issueActions:[]}),y=()=>({applicationKey:n.a.SERVICE_DESK,issueActions:[],ecosystemEnabled:!0}),O=e=>{if(e)switch(e.projectType){case"software":return e.isSimplified?b():m();case"business":return p();case"service_desk":return y();default:return m()}return m()}},"./src/packages/issue/issue-view/src/drafts/draft-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"g",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"a",(function(){return d}));const n=(e,t,s)=>({type:"SAVE_DRAFT_REQUEST",payload:{fieldId:e,value:t,serverValue:s}}),a=(e,t)=>({type:"SAVE_DRAFT_SUCCESS",payload:{draftKey:e,value:t}}),i=e=>({type:"SAVE_DRAFT_FAILURE",payload:e}),r=(e,t,s,n)=>({type:"LOAD_DRAFT_REQUEST",payload:{fieldId:e,draftKey:t,draftHandler:s,serverValue:n}}),o=(e,t)=>({type:"LOAD_DRAFT_SUCCESS",payload:{fieldId:e,value:t}}),c=(e,t)=>({type:"LOAD_DRAFT_FAILURE",payload:{fieldId:e,error:t}}),l=({fieldId:e,draftKey:t})=>({type:"DELETE_DRAFT_REQUEST",payload:{fieldId:e,draftKey:t}}),u=e=>({type:"DELETE_DRAFT_SUCCESS",payload:{fieldId:e}}),d=(e,t)=>({type:"DELETE_DRAFT_FAILURE",payload:{fieldId:e,error:t}})},"./src/packages/issue/issue-view/src/drafts/draft-utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=(e,t,s)=>`${String(e)}.${t}.${s}`,a=e=>e.split(".")[2],i=e=>`${e}-previous-hash`,r=e=>`comment_${e}`},"./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return y})),s.d(t,"p",(function(){return O})),s.d(t,"n",(function(){return j})),s.d(t,"c",(function(){return E})),s.d(t,"o",(function(){return v})),s.d(t,"m",(function(){return T})),s.d(t,"i",(function(){return P})),s.d(t,"l",(function(){return _})),s.d(t,"b",(function(){return x})),s.d(t,"g",(function(){return D})),s.d(t,"k",(function(){return A})),s.d(t,"f",(function(){return R})),s.d(t,"d",(function(){return N})),s.d(t,"r",(function(){return U})),s.d(t,"q",(function(){return F})),s.d(t,"j",(function(){return V})),s.d(t,"a",(function(){return K})),s.d(t,"e",(function(){return B}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/flatten.js"),i=s.n(a),r=s("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),o=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),c=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),p=s("./src/packages/issue/issue-view/src/feature-flags.js"),m=s("./src/packages/issue/issue-view/src/ecosystem/entities-selector.js"),b=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js");function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const y=Object(n.createSelector)(m.a,e=>e.backgroundScripts||[]),O=Object(n.createSelector)(u.e,e=>e.issueContentPanels||[]),j=Object(n.createSelector)(u.e,e=>!!e.issueContentPanels&&e.issueContentPanels.includes("issue.content.panel.customised.flag")),E=Object(n.createSelector)(d.b,e=>e),v=Object(n.createSelector)(u.e,e=>e.ecosystem&&!!e.ecosystem.ecosystemOnDate&&Date.parse(e.createdDate)>e.ecosystem.ecosystemOnDate),k=e=>Object.keys(e||{}).map(t=>Object.values(e?e[t]:{})),w=Object(n.createSelector)(m.a,e=>[].concat(...k(e.glances))),S=Object(n.createSelector)(m.a,e=>[].concat(...k(e.contentPanels))),I=Object(n.createSelector)(m.a,e=>[].concat(...k(e.activityPanels))),C=e=>Object(n.createSelector)(l.s,e,(e,t)=>e&&t||[]),T=C(Object(n.createSelector)(w,e=>e.map(e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,icon:e.icon&&e.icon.url&&{url:e.icon.url},label:e.label,status:e.status,type:e.type,glanceType:"CONNECT_ENTITY_TYPE"})))),P=Object(n.createSelector)([b.d,T],(e,t)=>[...e,...t]),_=(e,t)=>Object(n.createSelector)(m.a,s=>s&&s.glances&&s.glances[e]&&s.glances[e][t]),x=C(Object(n.createSelector)(S,e=>e.map(e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,tooltip:e.tooltip,iconUrl:e.icon&&e.icon.url,type:e.type,showByDefault:e.showByDefault})))),D=Object(n.createSelector)([b.j,x],(e,t)=>[...e,...t]),A=Object(n.createSelector)([b.j,x],(e,t)=>[...e,...t]),M=(e,t)=>{if("FORGE_ENTITY_TYPE"===e.type){const s=e.dateAdded||1;if("FORGE_ENTITY_TYPE"===t.type){return s-(t.dateAdded||1)}return s}return 1/0},L=(e,t)=>{if("FORGE_ENTITY_TYPE"===e.type){const s=e.name.toLowerCase();if("FORGE_ENTITY_TYPE"===t.type){const e=t.name.toLowerCase();return s<e?-1/0:s>e?1/0:0}return 1/0}return 1/0},R=C(Object(n.createSelector)(O,D,j,v,(e,t,s,n)=>{const a=t.map(t=>{if("FORGE_ENTITY_TYPE"===t.type){const s=t;if(!s.iconUrl)return s;const n=`${s.appKey}/${s.moduleKey}-`;if(Object(p.isIssuePanelNextEnabled)()){const t=e.filter(e=>Object(o.b)(e,n)).map(e=>{const t=Object(c.a)(e);return null==t&&Object(r.b)(),t&&g(g({},s),{},{dateAdded:t.added,panelInstanceId:t.id})}).filter(Boolean);return t.length>0&&t}const a=e.find(e=>Object(o.c)(e,n));return null!=a&&g(g({},s),{},{dateAdded:Number(a.slice(n.length))})}if(!s&&!n)return t;return(e.includes(`${t.appKey}_${t.moduleKey}`)||e.includes(`${t.appKey}_${Object(c.b)(t.moduleKey,10)}`)||t.showByDefault)&&t});return Object(p.isIssuePanelNextEnabled)()?i()((e=>e.map(e=>[].concat(e)).sort((e,t)=>M(e[0],t[0])))(a.filter(Boolean))):a.filter(Boolean).sort(M)})),N=(e,t)=>Object(n.createSelector)(m.a,s=>s&&s.contentPanels&&s.contentPanels[e]&&s.contentPanels[e][t]),U=(e,t)=>Object(n.createSelector)(m.a,s=>s&&s.selectedContentPanel&&(s.selectedContentPanel===`${e}_${t}`||s.selectedContentPanel===`${e}_${Object(c.b)(t,10)}`)),F=C(Object(n.createSelector)(m.a,e=>e.operations||[])),V=C(Object(n.createSelector)([b.f,F],(e,t)=>[...e,...t])),K=Object(n.createSelector)(l.s,I,(e,t)=>e?t.map(e=>({name:e.name,appKey:e.appKey,moduleKey:e.moduleKey,options:e.options,type:"CONNECT_ENTITY_TYPE"})):[]),B=Object(n.createSelector)([b.g,K],(e,t)=>[...e,...t].sort(L))},"./src/packages/issue/issue-view/src/ecosystem/entities-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js");const r=Object(n.createSelector)(a.e,e=>e.ecosystem||{}),o=Object(n.createSelector)(a.e,e=>e.forge||i.b)},"./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return j})),s.d(t,"f",(function(){return E})),s.d(t,"j",(function(){return v})),s.d(t,"i",(function(){return k})),s.d(t,"l",(function(){return S})),s.d(t,"a",(function(){return I})),s.d(t,"c",(function(){return T})),s.d(t,"m",(function(){return P})),s.d(t,"b",(function(){return _})),s.d(t,"g",(function(){return x})),s.d(t,"h",(function(){return D})),s.d(t,"k",(function(){return A})),s.d(t,"e",(function(){return M}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/forge/forge-ui/src/utils/conditions/index.js"),i=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),r=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),d=s("./src/packages/issue/issue-view/src/feature-flags.js"),p=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),m=s("./src/packages/issue/issue-view/src/ecosystem/entities-selector.js");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){g(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const h=(e,t)=>Object(d.isForgeUiConditionsEnabled)()?e.filter(e=>Object(a.a)(e,t)):e,y=(e,t)=>e.name===t.name?0:e.name>t.name?1:-1,O=Object(n.createSelector)(u.g,o.A,o.B,p.f,l.C,o.I,l.F,(e,t,s,n,a,i,r)=>f(f({},e),{},{issueId:t||null,issueKey:s,issueType:n,projectId:a,projectKey:i,projectType:r||null})),j=Object(n.createSelector)(o.s,m.b,O,(e,t,s)=>e&&Array.isArray(t.glances)?h(t.glances,s).map(e=>{const{id:t,properties:{title:s,label:n,status:a}}=e;return{title:s,label:n,status:a,extension:e,glanceType:"FORGE_ENTITY_TYPE",moduleKey:t,appKey:t}}):[]),E=Object(n.createSelector)(o.s,m.b,O,(e,t,s)=>e&&Array.isArray(t.actions)?h(t.actions,s).map(e=>{const{id:t,properties:{title:s}}=e;return{id:t,title:s,extension:e,type:"FORGE_ENTITY_TYPE"}}):[]),v=Object(n.createSelector)(o.s,m.b,O,(e,t,s)=>e&&Array.isArray(t.panels)?h(t.panels,s).filter(e=>null!=e.properties.icon).map(e=>{const{id:t,properties:{title:s,icon:n,allowMultiple:a}}=e,{appKey:r,moduleKey:o}=Object(i.e)(t);return{name:s,tooltip:s,iconUrl:n,extension:e,allowMultiple:!!a,showByDefault:!1,type:"FORGE_ENTITY_TYPE",moduleKey:o,appKey:r}}).sort(y):[]),k=e=>Object(n.createSelector)(m.a,t=>t&&t.selectedContentPanel===e),w=Object(n.createSelector)(o.s,m.b,O,(e,t,s)=>e&&Array.isArray(t.customFields)?h(t.customFields,s):[]),S=Object(n.createSelector)(w,e=>e.length>0),I=Object(n.createSelector)(o.s,m.b,(e,t)=>e&&t.activeAction||null),C=e=>Object(n.createSelector)(Object(c.q)(e),e=>e?e.schema.custom:""),T=e=>Object(n.createSelector)(w,C(e),(e,t)=>e.find(e=>e.id===t)||null),P=e=>Object(n.createSelector)(o.s,m.b,C(e),O,(e,t,s,n)=>{if(!Object(d.isForgeUiConditionsEnabled)()||!e||!Array.isArray(t.customFields))return!1;const i=t.customFields.find(e=>e.id===s);return null!=i&&!Object(a.a)(i,n)}),_=Object(n.createSelector)(o.B,o.A,p.f,o.I,l.C,(e,t,s,n,a)=>({issueKey:e,issueId:t,issueType:s,projectKey:n,projectId:a})),x=Object(n.createSelector)(o.s,m.b,O,(e,t,s)=>e&&Array.isArray(t.actions)?h(t.activities,s).map(e=>{const{id:t,properties:{title:s}}=e,{appKey:n,moduleKey:a}=Object(i.e)(t);return{name:s,extension:e,type:"FORGE_ENTITY_TYPE",moduleKey:a,appKey:n}}):[]),D=e=>Object(n.createSelector)(m.b,t=>({isNewToIssue:t.panelsKeys.newPanels.includes(e)})),A=e=>Object(n.createSelector)(v,t=>{const{extensionId:s}=Object(r.a)(e)||{};return t.find(e=>s===e.extension.id)}),M=e=>Object(n.createSelector)(m.b,t=>t.panelsKeys.collapsedPanels.includes(e))},"./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./node_modules/lodash/has.js"),a=s.n(n),i=s("./node_modules/lodash/isNil.js"),r=s.n(i);const o=e=>e&&a()(e,"schema.custom")&&!r()(e.schema.custom)&&e.schema.custom.includes("ari:cloud:ecosystem::extension"),c=e=>o(e)?{id:e.key,type:"forgeCustomField"}:null},"./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return P})),s.d(t,"a",(function(){return _})),s.d(t,"e",(function(){return D})),s.d(t,"d",(function(){return A})),s.d(t,"c",(function(){return M}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/utils/constants/src/project-types.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/platform/ui/flags/src/index.js"),o=s("./src/packages/issue/issue-actions/activity-feed/src/messages.js"),c=s("./src/packages/issue/issue-scroll/src/services/types.js"),l=s("./src/packages/platform/utils/permalinks/src/index.js"),u=s("./src/packages/platform/utils/permalinks/src/constants.js"),d=s("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),p=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),m=s("./src/packages/issue/issue-view/src/common/messages/flags.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),f=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),g=s("./src/packages/platform/services/issue/src/source/issue-express/graphql-util.js"),h=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),y=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js"),O=s("./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js"),j=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");const E=(e,t,s,n)=>`\n query issueViewInteractiveQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        comments (first: ${t}, maxResults: ${e}, orderBy: "${s}", commentId: ${n}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                visibility {\n                    type\n                    value\n                }\n                created\n                updated\n                renderedBody\n                jsdPublic\n                bodyAdf\n            }\n            totalCount\n            startIndex\n        }\n    }\n  }\n`,v=(e,t,s,n)=>b.a`query {
        issueComments(issueIdOrKey: "${e}", first: ${t}, offset: ${s}, orderBy: "${n}") {
            nodes {
                id
                author {
                  accountId
                  displayName
                  avatarUrls {
                    key
                    value
                  }
                  timeZone
                }
                updateAuthor {
                  accountId
                  displayName
                  avatarUrls {
                    key
                    value
                  }
                  timeZone
                }
                visibility {
                  type
                  value
                }
                created
                updated
                renderedBody
                jsdPublic
                bodyAdf
            }
            totalCount
        }
    }`,k=(e,t,s,n,a,i,r)=>Object(f.a)(Object(j.e)(e),((e,t,s,n,a,i)=>({method:"POST",body:JSON.stringify({query:v(e,t,s,n)}),perf:i,headersProcessor:a&&a(h.a.key)}))(t,s,n,"-created")).map(y.e).map(e=>Object(y.b)(e,a,i,r)),w=(e,t,s)=>Object(f.a)(`${e}/rest/gira/1/`,((e,t,s,n,a,i)=>({method:"POST",body:JSON.stringify({query:E(t,s,n,a),variables:i})}))(0,5,0,"-created",s,{issueKey:t})).map(g.a).map(e=>Object(g.b)("issue.comment.fetch.epic.graphql",e)).map(e=>Object(O.b)(e.viewIssue));var S=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),I=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),C=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),T=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js");const P=(e,t,s,n,a)=>{let i=0;s>0&&(i=s+a.filter(e=>e.completedDate.epochMillis>n[n.length-1].timestamp).length);const r=e+a.length-(n.length+i);return{numOlderActivityItemsToLoad:r>10?10:r,numNewerActivityItemsToLoad:i>10?10:i}},_=(e,t,s)=>{let n=0;const a=e-(t+s);return s>0&&(n=s>10?10:s),{numOlderCommentsToLoad:a>10?10:a,numNewerCommentsToLoad:n}},x="Failed to fetch comments",D=(e,t)=>e.ofType("FETCH_LATEST_COMMENTS_REQUEST").switchMap(({type:e})=>{const s=t.getState(),a=Object(S.g)(s),r=Object(S.B)(s),o=Object(T.I)(s);return(o>10?10:o)>0?k(a,r,5,0,0,0,e).map(e=>Object(p.p)(e)).catch(e=>(Object(C.a)("issue.comment.fetch.epic",x,e),i.i.safeWarn("issue.comment.fetch.epic",x),n.Observable.of(Object(p.n)()))):n.Observable.empty()}),A=(e,t)=>e.ofType("FETCH_OLDER_COMMENTS_REQUEST","FETCH_NEWER_COMMENTS_REQUEST").switchMap(({type:e})=>{const s=t.getState(),a=Object(S.g)(s),r=Object(S.B)(s),o=Object(T.J)(s),c=Object(T.F)(s),l=Object(T.I)(s),{startAt:u,maxResults:d}=((e,t,s,n)=>{let a=0,i=0;return"FETCH_OLDER_COMMENTS_REQUEST"===e?(i=t+n,{maxResults:Math.min(s-i,10),startAt:i}):(i=Math.max(0,t-10),a=t-i,{maxResults:a,startAt:i})})(e,l,o,c);return k(a,r,d,u,c,l,e).map(e=>Object(p.r)(e)).catch(e=>(Object(C.a)("issue.comment.fetch.epic",x,e),i.i.safeWarn("issue.comment.fetch.epic",x),n.Observable.of(Object(p.q)())))}),M=e=>(t,s)=>t.ofType("SCROLL_TO_ATTACHMENT_COMMENT").switchMap(()=>{const t=s.getState(),b=Object(S.g)(t),f=Object(S.B)(t),g=Object(I.F)(t)===a.j,h=e.getScrollTargetId(c.a.COMMENT),y={key:"JSDComments",type:"JSDComments",name:o.a.comments.defaultMessage},O={key:"Comments",type:"Comments",name:o.a.comments.defaultMessage};return null===h?n.Observable.of():w(b,f,h).flatMap(t=>(window.history.replaceState({},null,Object(l.c)(h,u.b.COMMENTS)),e.setScrollTarget(null),n.Observable.of(Object(p.p)(t),Object(d.a)(g?y:O),Object(p.D)(!1)))).catch(e=>{Object(C.a)("issue.comment.fetch.epic",x,e),i.i.safeWarn("issue.comment.fetch.epic",x);const{showFlag:t}=Object(r.useFlagsService)();return t({type:"error",title:[m.a.commentWorklogAttachmentFetchFailedTitle,{field:"comment"}],description:m.a.commentWorklogAttachmentFetchFailedDescription,isAutoDismiss:!0}),n.Observable.of()})})},"./src/packages/issue/issue-view/src/feedback-button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/app-base/src/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),o=s("./node_modules/react-intl/lib/index.es.js"),c=s("./src/packages/platform/controllers/unified-feedback/src/actions/types.js"),l=s("./src/packages/platform/controllers/unified-feedback/src/components/unified-feedback-api.js"),u=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js"),d=s("./node_modules/@atlaskit/icon/glyph/feedback.js"),p=s.n(d),m=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js");class b extends n.Component{renderButton(){return a.a.createElement(u.a,{onClick:this.props.onClick,appearance:"subtle",iconBefore:a.a.createElement(p.a,{label:this.props.iconLabel})},this.props.children)}render(){return a.a.createElement("div",null,this.props.tooltip?a.a.createElement(m.a,{content:this.props.tooltip,position:"top"},this.renderButton()):this.renderButton())}}b.displayName="BentoFeedbackTriggerButton",b.defaultProps={children:null,tooltip:null,iconLabel:"",onClick:null};class f extends n.Component{renderFeedbackButton(e){const t={collectorId:this.props.collectorId,feedbackGroupId:this.props.feedbackGroupId,isBentoFeedback:!0,feedbackType:c.a,optOut:!0};return(a.a.createElement(l.a,null,(s,{openFeedbackDialog:n})=>a.a.createElement(o.FormattedMessage,{id:"software-issue.labs-feature-button-text",defaultMessage:"Give feedback"},s=>this.props.isCompact?a.a.createElement(b,{iconLabel:String(s),tooltip:e,onClick:()=>n(t)}):a.a.createElement(b,{onClick:()=>n(t)},s))))}render(){return a.a.createElement(o.FormattedMessage,{id:"software-backlog-issue.labs-feature-button-tooltip",defaultMessage:"Give feedback"},e=>this.renderFeedbackButton(e))}}f.displayName="Feedback",f.defaultProps={isCompact:!1};var g=f;const h=e=>a.a.createElement(i.a,null,a.a.createElement(r.a,null,a.a.createElement(g,e)));h.displayName="FeedbackButton";t.a=h},"./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"a",(function(){return l}));const n=(e,t)=>({type:"FIELD_INIT_OPTIONS",payload:{fieldId:e,fieldOptions:t}}),a=(e,t,s,n)=>({type:"FIELD_EDIT_BEGIN",payload:{analyticsEvent:n,fieldId:e,fieldOptions:t,fieldEditSessionId:s}}),i=(e,t,s)=>({type:"FIELD_EDIT_UPDATE",payload:{fieldId:e,value:t,fieldOptions:s}}),r=(e,t,s,n,a)=>({type:"FIELD_EDIT_CONFIRM",payload:{analyticsEvent:n,fieldId:e,fieldOptions:t,saveFieldData:s,analyticsAttributeIdRetriever:a}}),o=(e,t)=>({type:"FIELD_EDIT_CANCEL",payload:{fieldId:e,fieldOptions:t}}),c=(e,t,s)=>({type:"FIELD_PASTE",payload:{fieldId:e,fieldOptions:t,pastedContent:s}}),l=(e,t)=>({type:"FIELD_ADD_ALLOWED_VALUES",payload:{fieldId:e,allowedValues:t}})},"./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"e",(function(){return u}));const r=(e,t,s,n,i,r,o=!1)=>({type:"FIELD_SAVE_REQUEST",payload:a({fieldId:e,value:t,fieldOptions:s,saveFieldData:n,analyticsEvent:i,shouldFetchViewContext:o},r&&{eventData:r})}),o=(e,t,s,n,a)=>({type:"FIELD_SAVE_SUCCESS",payload:{fieldId:e,fieldOptions:t,fieldValue:s,saveFieldResult:n},meta:a}),c=(e,t,s,n)=>({type:"FIELD_SAVE_FAILURE",payload:{fieldId:e,invalidMessage:t,error:s,fieldOptions:n}}),l=(e,t,s,n)=>({type:"FIELD_SAVE_SUCCESS_WITH_PASTED_CONTENT",payload:{fieldId:e,fieldOptions:t,value:s,pastedContent:n}}),u=(e,t,s)=>({type:"FIELD_UPDATED",payload:{fieldId:e,fieldValue:t,extraParams:s}})},"./src/packages/issue/issue-view/src/issue-field/state/selectors/epic-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js");const o=Object(n.createSelector)(Object(a.n)("epic"),e=>null!==e?e:void 0),c=Object(n.createSelector)(i.q,r.d,(e,t)=>e||1===t)},"./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return u}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js");const r=e=>!!e&&e.length>0,o=e=>e?[{value:!0}]:null,c=Object(a.e)("com.atlassian.jira.plugin.system.customfieldtypes:flagged"),l=Object(n.createSelector)(c,e=>!!e&&(e=>{if(e){const t=Object(i.a)(e);return r(t)}return!1})(e)),u=Object(n.createSelector)(c,e=>e&&e.key)},"./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return b})),s.d(t,"i",(function(){return f})),s.d(t,"e",(function(){return y})),s.d(t,"f",(function(){return O})),s.d(t,"c",(function(){return v})),s.d(t,"g",(function(){return k})),s.d(t,"b",(function(){return S})),s.d(t,"d",(function(){return I})),s.d(t,"a",(function(){return C}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/find.js"),i=s.n(a),r=s("./src/packages/issue/project-context-service/src/utils.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),d=s("./src/packages/issue/issue-view/src/selectors/project-selector.js");const p=Object(o.o)("hierarchy-level-below")||null,m=Object(n.createSelector)(p,e=>e&&e.issueTypes||[]),b=Object(n.createSelector)(c.e,m,(e,t)=>{const s=e.issueTypes,n=t.map(e=>e.id);return s.filter(e=>-1!==n.indexOf(e.id))}),f=Object(n.createSelector)(l.g,m,(e,t)=>e.canCreateChildren&&!!t.length),g=Object(o.o)("hierarchy-level-above")||null,h=Object(n.createSelector)(g,e=>e&&(e.name||null)),y=Object(n.createSelector)(g,e=>e&&e.issueTypeIds.map(String)||[]),O=Object(n.createSelector)(g,e=>e&&e.issueTypes.map(e=>e.name).filter(e=>e)||[]),j=Object(n.createSelector)(y,e=>e.length>0),E=Object(o.o)("hierarchy-level-same-level")||null,v=Object(n.createSelector)(E,e=>{if(!e)return!1;return e.issueTypes[0].subtask}),k=Object(n.createSelector)(E,e=>e?e.issueTypeIds.map(String):[]),w=Object(n.createSelector)(E,e=>e?e.id:null),S=Object(n.createSelector)(d.b,d.c,w,(e,t,s)=>!!(e&&t&&s)&&(e===s||!!i()(t,e=>e.id===s))),I=Object(n.createSelector)(d.b,w,d.d,r.a),C=Object(n.createSelector)(h,u.e,j,(e,t,s)=>Boolean(e)&&t&&s)},"./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return P})),s.d(t,"g",(function(){return L})),s.d(t,"f",(function(){return R})),s.d(t,"e",(function(){return N})),s.d(t,"a",(function(){return U})),s.d(t,"c",(function(){return F})),s.d(t,"d",(function(){return V}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isArray.js"),i=s.n(a),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./node_modules/lodash/isPlainObject.js"),l=s.n(c),u=s("./node_modules/lodash/once.js"),d=s.n(u),p=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),b=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),f=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js"),g=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),h=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),y=s("./src/packages/issue/issue-view/src/configurations.js"),O=s("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js"),j=s("./src/packages/issue/issue-view/src/feature-flags.js");const E=["devSummary","SLA_PANEL","KNOWLEDGE_BASE","ASSET_ONBOARDING"],v=()=>E,k=e=>o()(e)||i()(e)&&0===e.length||l()(e)&&0===Object.keys(e).length,w=(e,t,s)=>!(!e||!k(Object(f.a)(e))||Object(m.z)(e))&&("assignee"!==e.key&&"com.atlassian.servicedesk:vp-origin"!==Object(b.a)(e)&&"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language"!==Object(b.a)(e)&&("timetracking"!==e.key||((e,t)=>Object(j.isTimeRemainingFieldEnabled)()?!!t&&!e:!e)(t,s))),S=(e,t)=>{if(v().includes(e.id))return{id:e.id,type:e.id};if("TAB"===e.type)return e;const s=Object(O.a)(t[e.id]);if(s)return s;const n=Object(m.w)(e.id,t),a=Object(b.a)(n);return n&&a?{id:n.key,type:a}:null},I=Object(n.createSelector)(g.I,e=>e.contextItems),C=d()(y.f),T=Object(n.createSelector)(m.t,e=>Object.keys(e).filter(t=>{const s=Object(b.a)(e[t]);return s&&C().includes(s)})),P=Object(n.createSelector)(m.t,e=>Object.keys(e).filter(t=>{const s=Object(b.a)(e[t]);return s&&y.d.includes(s)})),_=Object(n.createSelector)(m.t,p.H,p.M,T,p.n,(e,t,s,n,a)=>{if(!a)return null;return[...t,...n,...s].find(t=>{const s=Object(m.w)(t.id,e);return s&&s.key===a})||null}),x=Object(n.createSelector)(p.H,_,(e,t)=>t&&!e.includes(t)?e.concat([t]):e),D=Object(n.createSelector)(p.M,_,(e,t)=>t?e.filter(e=>e!==t):e),A=Object(n.createSelector)(T,_,(e,t)=>t?e.filter(e=>e!==t):e),M=Object(n.createSelector)(x,D,A,p.p,g.F,(e,t,s,n)=>[...e,...t,...n?[{id:"devSummary",type:"DEV_SUMMARY"}]:[]]),L=Object(n.createSelector)(m.t,M,D,h.b,h.d,(e,t,s,n,a)=>t.filter(t=>{const i=!!s.find(e=>e.id===t.id);if(v().includes(t.id)||"TAB"===t.type)return!i;if(Object(O.b)(e[t.id]))return!0;const r=Object(m.w)(t.id,e);return!!Object(m.y)(r)||!w(r,n,a)&&(r&&Object(b.a)(r)&&!(i&&k(Object(f.a)(r))))}).map(t=>S(t,e)).filter(Boolean)),R=Object(n.createSelector)(m.t,p.k,(e,t)=>t.filter(t=>{const s=Object(m.w)(t.id,e);return!(!s||!Object(b.a)(s))}).map(t=>S(t,e)).filter(Boolean)),N=Object(n.createSelector)(m.t,p.L,(e,t)=>t&&t.filter(t=>{const s=Object(m.w)(t.id,e);return!(!s||!Object(b.a)(s))}).map(t=>S(t,e)).filter(Boolean)),U=Object(n.createSelector)(m.t,D,h.b,h.d,(e,t,s,n)=>t.filter(t=>{if(v().includes(t.id)||"TAB"===t.type)return!0;const a=Object(m.w)(t.id,e);return!Object(m.y)(a)&&(!w(a,s,n)&&(a&&Object(b.a)(a)&&k(Object(f.a)(a))))}).map(t=>S(t,e)).filter(Boolean)),F=Object(n.createSelector)(I,e=>e.isShowMoreExpanded),V=Object(n.createSelector)(U,e=>e.length>0)},"./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"b",(function(){return d}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js");const r=Object(a.q)("security"),o=Object(n.createSelector)(r,e=>e&&e.value||null),c=Object(n.createSelector)(r,e=>e&&e.allowedValues||[]),l=Object(n.createSelector)(o,c,(e,t)=>e||t&&t.length>0),u=Object(n.createSelector)(Object(a.A)("security"),i.c,(e,t)=>e&&!t),d=Object(n.createSelector)(o,c,u,(e,t,s)=>({hasSecurityLevel:null!=e,securityLevelAllowedValuesCount:t.length,hasSecurityLevelEditPermissions:s}))},"./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return f}));var n=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),i=s("./src/packages/platform/services/issue/src/model/issue-custom-fields.js"),r=s("./src/packages/platform/services/issue/src/model/issue-managed-fields.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d={[i.s]:"com.atlassian.jira.plugin.system.customfieldtypes:float",[i.v]:"com.pyxis.greenhopper.jira:jsw-story-points",[i.y]:"com.atlassian.jira.plugin.system.customfieldtypes:url",[i.w]:"com.atlassian.jira.plugin.system.customfieldtypes:textfield",[i.x]:"com.atlassian.jira.plugin.system.customfieldtypes:textarea",[i.m]:"com.atlassian.jira.plugin.system.customfieldtypes:labels",[i.c]:"com.atlassian.jira.plugin.system.customfieldtypes:datepicker",[i.d]:"com.atlassian.jira.plugin.system.customfieldtypes:datetime",[i.t]:"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",[i.n]:"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",[i.p]:"com.atlassian.jira.plugin.system.customfieldtypes:multiselect",[i.u]:"com.atlassian.jira.plugin.system.customfieldtypes:select",[i.r]:"com.atlassian.jira.plugin.system.customfieldtypes:multiversion",[i.A]:"com.atlassian.jira.plugin.system.customfieldtypes:version",[i.l]:"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker",[i.o]:"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker",[i.z]:"com.atlassian.jira.plugin.system.customfieldtypes:userpicker",[i.q]:"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker",[i.k]:"com.atlassian.jira.plugin.system.customfieldtypes:flagged",[i.j]:"string",[i.h]:"number",[i.f]:"datetime",[i.i]:"option2",[i.g]:"array",[i.b]:"com.pyxis.greenhopper.jira:jsw-issue-color",[i.e]:"com.pyxis.greenhopper.jira:gh-epic-color",[i.a]:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect"},p={[r.c]:"com.pyxis.greenhopper.jira:gh-epic-link",[r.d]:"com.pyxis.greenhopper.jira:gh-epic-label",[r.f]:"com.pyxis.greenhopper.jira:gh-sprint",[r.g]:"com.atlassian.jira.plugin.system.customfieldtypes:storypoint",[r.h]:"com.atlassian.teams:rm-teams-custom-field-team",[r.e]:"com.atlassian.jpo:jpo-custom-field-parent",[r.b]:"com.atlassian.jpo:jpo-custom-field-baseline-start",[r.a]:"com.atlassian.jpo:jpo-custom-field-baseline-end",[i.b]:"com.pyxis.greenhopper.jira:jsw-issue-color"},m=e=>({editable:e.editable,required:!1,autoCompleteUrl:void 0,allowedValues:[],schema:{system:e.systemType,custom:e.customType,type:e.type?e.type:"",renderer:e.renderer},title:e.title||e.key,renderedValue:e.value,value:e.value,adfValue:e.adfValue,key:e.key}),b=e=>{const t={};return e&&e.fields.forEach((e,s)=>{try{switch(e.type){case o.a:case o.b:case o.e:case o.g:case o.i:case o.n:case o.o:case o.p:case o.q:t[s]=m({key:s,systemType:s,customType:null,value:e.value,title:e.title,editable:!!e.editable});break;case o.u:t.timeoriginalestimate=m({key:"timeoriginalestimate",systemType:"timeoriginalestimate",customType:null,title:e.title,editable:!!e.editable,value:e.value&&e.value.originalEstimateSeconds}),t[s]=m({key:s,systemType:s,customType:null,title:e.title,editable:!!e.editable,value:e.value});break;case o.f:t[s]=m({key:s,systemType:s,customType:null,title:e.title,value:void 0,renderedValue:void 0,adfValue:e.value,editable:!!e.editable,renderer:e.renderer});break;case o.h:t[s]=m({key:s,systemType:s,customType:null,title:e.title,value:"atlassian-wiki-renderer"===e.renderer?void 0:e.value,adfValue:"atlassian-wiki-renderer"===e.renderer?e.value:void 0,editable:!!e.editable,renderer:e.renderer});break;case o.t:case o.l:case o.r:t[s]=m({key:s,systemType:s,customType:null,value:e.value,editable:!!e.editable});break;case r.c:case r.f:case r.g:case r.h:case r.e:case r.b:case r.a:t[s]=m({key:s,systemType:null,customType:p[e.type],value:e.value,title:e.title,editable:!!e.editable});break;case r.d:t[s]=m({key:s,systemType:null,customType:p[e.type],value:e.value,title:e.title,editable:!!e.editable,renderer:e.renderer,type:"string"});break;case i.x:{const n="atlassian-wiki-renderer"===e.renderer?{adfValue:e.value}:{value:e.value};t[s]=m(l({key:s,systemType:null,customType:d[e.type],title:e.title,editable:!!e.editable,renderer:e.renderer},n));break}case i.a:t[s]=m({systemType:null,customType:d[e.type],key:s,title:e.title,value:e.value,editable:!!e.editable});break;case i.b:case i.e:case i.s:case i.v:case i.y:case i.w:case i.m:case i.c:case i.d:case i.t:case i.n:case i.p:case i.u:case i.r:case i.A:case i.l:case i.o:case i.z:case i.q:case i.k:t[s]=m({systemType:null,customType:d[e.type],key:s,title:e.title,value:e.value,editable:!!e.editable});break;case i.j:case i.h:case i.i:case i.g:case i.f:t[s]=m({systemType:null,customType:null,type:e.type,key:s,title:e.title,value:e.value,editable:!!e.editable});break;case o.j:case o.d:case o.s:case o.m:t[s]=m({systemType:null,customType:null,key:s,title:e.title,value:e.value,editable:!1})}}catch(t){a.a.safeError("issue.details.field.initial-data-transformer",`Failed to map field: ${e.type}`,new n.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t}))}}),t},f=e=>{const t=Object.entries(b(e)).reduce((e,[t,s])=>l(l({},e),{},{[t]:s.value}),{});return l(l({},e),{},{fields:t})};t.a=b},"./src/packages/issue/issue-view/src/layout-descriptor/view/context/view.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return ie})),s.d(t,"a",(function(){return ae}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/rxjs/Rx.js"),r=s("./node_modules/lodash/identity.js"),o=s.n(r),c=s("./node_modules/lodash/isEqual.js"),l=s.n(c),u=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const p={context:{primaryContextItems:[],secondaryContextItems:[]},content:{visibleContentItems:[],requestPanelContentItems:void 0}};var m=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),b=s("./node_modules/lodash/isNull.js"),f=s.n(b),g=s("./node_modules/lodash/negate.js"),h=s.n(g),y=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),O=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),j=s("./src/packages/issue/issue-view/src/feature-flags.js"),E=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),v=e=>"FORGE_ENTITY_TYPE"===e.glanceType?(e=>({type:"forgeGlance",key:`forgeGlance__${e.appKey}__${e.moduleKey}`,payload:e}))(e):(e=>({type:"ecosystemGlance",key:`ecosystemGlance__${e.appKey}__${e.moduleKey}`,payload:e}))(e),k=e=>{switch(e.type){case"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":return{type:e.type,key:`${e.type}__${e.id}`,payload:{fieldId:e.id}};case"assignee":case"reporter":case"description":case"environment":case"duedate":case"priority":case"labels":case"components":case"com.pyxis.greenhopper.jira:gh-sprint":case"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":case"com.pyxis.greenhopper.jira:gh-epic-link":case"fixVersions":case"versions":case"timetracking":case"timeoriginalestimate":case"com.atlassian.jira.plugin.system.customfieldtypes:labels":case"com.atlassian.jira.plugin.system.customfieldtypes:textfield":case"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":case"com.atlassian.jira.plugin.system.customfieldtypes:url":case"com.atlassian.jira.plugin.system.customfieldtypes:float":case"com.pyxis.greenhopper.jira:jsw-story-points":case"com.atlassian.jira.plugin.system.customfieldtypes:select":case"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":case"com.atlassian.jira.plugin.system.customfieldtypes:version":case"com.atlassian.jira.plugin.system.customfieldtypes:textarea":case"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":case"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":case"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":case"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":case"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":case"com.atlassian.jira.plugin.system.customfieldtypes:people":case"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":case"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":case"com.atlassian.jira.plugin.system.customfieldtypes:datetime":case"com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team":case"com.atlassian.teams:rm-teams-custom-field-team":case"com.atlassian.jpo:jpo-custom-field-parent":case"com.atlassian.jpo:jpo-custom-field-baseline-start":case"com.atlassian.jpo:jpo-custom-field-baseline-end":case"com.pyxis.greenhopper.jira:jsw-issue-color":case"com.atlassian.servicedesk:vp-origin":case"com.atlassian.servicedesk.approvals-plugin:sd-approvals":case"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":case"com.atlassian.servicedesk:sd-request-participants":case"com.atlassian.servicedesk:sd-customer-organizations":case"number":case"string":case"option2":case"array":case"datetime":case"com.atlassian.servicedesk.assets-plugin:assetfield":case"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype":case"com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list":case"com.atlassian.jira.plugins.cmdb:cmdb-object-cftype":case"com.atlassian.servicedesk:sd-request-feedback":case"user":case"group-list":case"array-string":case"com.atlassian.jira.plugin.system.customfieldtypes:readonlyfield":case"forgeCustomField":return{type:e.type,key:`${e.type}__${e.id}`,payload:{fieldId:e.id}};case"TAB":return{type:e.type,key:`${e.type}__${e.id}`,payload:{tabId:e.id}};case"KNOWLEDGE_BASE":case"SLA_PANEL":case"devSummary":case"releases":case"ASSET_ONBOARDING":return{type:e.type,key:e.type,payload:{itemId:e.id}};default:return null}};const w=e=>({applicationRoles:Object(j.isUseAppPermissionsFromTenantContextEnabled)()?[]:Object(y.a)(e),permissions:Object(y.g)(e),glances:Object(O.i)(e),visibleContentItems:Object(E.f)(e),requestContentItems:Object(E.e)(e),visibleContextItems:Object(E.g)(e),conditionallyVisibleContextItems:Object(E.a)(e)}),S=h()(f.a);var I=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),C=s("./node_modules/lodash/partition.js"),T=s.n(C);function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){x(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const D=(e,t)=>{const{primaryContextItems:s,secondaryContextItems:n}=e.context,a=n.filter(e=>e.type===t);if(a.length){const i=((e,t)=>e.filter(e=>e.type!==t))(n,t),r=[...s,...a];return _(_({},e),{},{context:{primaryContextItems:r,secondaryContextItems:i}})}return e};var A=s("./node_modules/lodash/get.js"),M=s.n(A),L=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),R=s("./src/packages/issue/issue-view/src/selectors/status-selector.js");function N(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function U(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?N(Object(s),!0).forEach((function(t){F(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):N(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function F(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const V=e=>"com.atlassian.servicedesk:sd-request-feedback"===e.type,K=e=>"com.atlassian.servicedesk:sd-request-feedback"!==e.type;var B=(e,t)=>((e,t)=>{const{primaryContextItems:s}=e.context,n=s.slice().filter(K),a=s.find(V);if("DONE"===Object(R.b)(t)&&a){const e=a&&M()(a,"payload.fieldId"),s=e&&Object(L.w)(e,Object(L.t)(t));M()(s,"value",!1)&&n.unshift(a)}return U(U({},e),{},{context:U(U({},e.context),{},{primaryContextItems:n})})})(e,t);function W(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function H(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?W(Object(s),!0).forEach((function(t){G(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):W(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function G(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $=new Set(["releases"]),q=e=>{const{context:{primaryContextItems:t},content:s}=e,[n,a]=T()(s.visibleContentItems,e=>$.has(e.type)),[i,r]=s.requestPanelContentItems?T()(s.requestPanelContentItems,e=>$.has(e.type)):[];return H(H({},e),{},{content:H(H({},s),{},{visibleContentItems:a,requestPanelContentItems:r}),context:H(H({},e.context),{},{primaryContextItems:[...t,...i||[],...n]})})},z=e=>D(e,"ecosystemGlance"),Y=e=>"com.atlassian.jira.plugin.system.customfieldtypes:select"===e.type||"description"===e.type||"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"===e.type,Q=(e,t)=>e.map(e=>t.some(t=>t(e))?H(H({},e),{},{hasGlobalSpotlightTarget:!0}):e),J=e=>{const{content:t,context:s}=e,{visibleContentItems:n,requestPanelContentItems:a}=t,{primaryContextItems:i,secondaryContextItems:r}=s,o=[Y];return H(H({},e),{},{content:H(H({},t),{},{visibleContentItems:Q(n,o),requestPanelContentItems:a&&Q(a,o)}),context:H(H({},s),{},{primaryContextItems:Q(i,o),secondaryContextItems:Q(r,o)})})},Z=e=>e.map(q);const X=e=>{switch(Object(I.F)(e)){case"service_desk":return(e=>({layoutDescriptor$:t})=>({layoutDescriptor$:Z(t).map(t=>Object(I.u)(e)?B(t,e):t).map(z).map(J)}))(e);case"business":case"software":default:return o.a}};const ee=Object(m.a)(w),te=(e,t)=>{const s=ee(e),n=w(t);return l()(s,n)};var se=({locationTransformer:e,store:t})=>{const s=i.Observable.create(e=>{let s=t.getState();return e.next(s),t.subscribe(()=>{const n=t.getState();s!==n&&(s=n,e.next(s))})}).distinctUntilChanged(te);return{layoutDescriptor$:e({layoutDescriptor$:(({state$:e})=>{const t=e.map(X).distinctUntilChanged();return({layoutDescriptor$:e})=>({layoutDescriptor$:t.map(t=>t({layoutDescriptor$:e})).share().switchMap(e=>e.layoutDescriptor$)})})({state$:s})({layoutDescriptor$:(({state$:e})=>({layoutDescriptor$:e.map(w).map(e=>{const t=e.glances;return{context:{primaryContextItems:e.visibleContextItems.map(k).concat(t.map(v)).filter(S),secondaryContextItems:e.conditionallyVisibleContextItems.map(k).filter(S)},content:{visibleContentItems:e.visibleContentItems.map(k).filter(S),requestPanelContentItems:e.requestContentItems&&e.requestContentItems.map(k).filter(S)}}})}))({state$:s}).layoutDescriptor$}).layoutDescriptor$}).layoutDescriptor$}};const{Provider:ne,Consumer:ae}=Object(n.createContext)({layoutDescriptor:p});class ie extends n.Component{constructor(e){super(e),this.state={layoutDescriptor:p},this.onError=e=>{d.i.safeError("issue.layout-descriptor.provider","Failed to create layout descriptor",new u.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))},this.getLayoutDescriptorObservable=(()=>{const{store:e,locationTransformer:t}=this.props,{layoutDescriptor$:s}=se({store:e,locationTransformer:t}),n=s.share();return()=>n})(),this.constructorSubscription=void 0,this.componentDidMountSubscription=void 0;const t=this.getLayoutDescriptorObservable();this.constructorSubscription=t.filter((e,t)=>0===t).subscribe(e=>{this.state={layoutDescriptor:e}},this.onError)}componentDidMount(){const e=this.getLayoutDescriptorObservable();this.componentDidMountSubscription=e.subscribe(e=>{l()(this.state.layoutDescriptor,e)||this.setState({layoutDescriptor:e})},this.onError),this.constructorSubscription.unsubscribe()}componentWillUnmount(){this.componentDidMountSubscription.unsubscribe()}render(){const{children:e}=this.props,{layoutDescriptor:t}=this.state;return a.a.createElement(ne,{value:{layoutDescriptor:t}},e)}}ie.displayName="Provider",ie.displayName="LayoutDescriptorProvider",ie.defaultProps={locationTransformer:o.a}},"./src/packages/issue/issue-view/src/media-feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/issue/issue-view/src/feature-flags.js");const a=()=>({newCardExperience:Object(n.isNewCardExperience)(),zipPreviews:Object(n.isZipPreviewEnabled)(),folderUploads:Object(n.isFolderUploadsEnabled)(),codeViewer:Object(n.isCodeViewerEnabled)()})},"./src/packages/issue/issue-view/src/model/change-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={FIELD_CHANGE_REQUESTED:"FIELD_CHANGE_REQUESTED",FIELD_CHANGE_FAILED:"FIELD_CHANGE_FAILED",FIELD_CHANGED:"FIELD_CHANGED",ISSUE_TYPE_CHANGED:"ISSUE_TYPE_CHANGED",ISSUE_RELATIONSHIP_UPDATED:"ISSUE_RELATIONSHIP_UPDATED",ISSUE_LINKS_CREATED:"ISSUE_LINKS_CREATED",ISSUE_LINK_DELETED:"ISSUE_LINK_DELETED",CHILD_ISSUE_ADDED:"CHILD_ISSUE_ADDED",ISSUE_CHILDREN_ORDER_CHANGED:"ISSUE_CHILDREN_ORDER_CHANGED"}},"./src/packages/issue/issue-view/src/perf.config.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i}));var n=s("./node_modules/@atlassian/browser-metrics/dist/esm/factory/index.js");const a=n.a.custom({key:"issue-view-load",virtual:!0,timings:[{key:"preview",startMark:"metrics_init",endMark:"ISSUE_PREVIEW_RENDERED"},{key:"startDataFetch",startMark:"ISSUE_START_FETCHING_DATA",endMark:"ISSUE_FETCHED_MARK"}]}),i=n.a.custom({key:"embedded-issue-view-load",until:a,include:[a]})},"./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"b",(function(){return r}));const r={actions:[],glances:[],panels:[],activities:[],customFields:[],activeAction:null,panelsKeys:{newPanels:[],collapsedPanels:[]}};t.a=(e=r,t)=>{switch(t.type){case"FETCH_FORGE_SUCCESS":return a(a({},e),{},{actions:t.payload.issueAction,glances:t.payload.issueGlance,panels:t.payload.issuePanel,activities:t.payload.issueActivity,customFields:t.payload.customField,activeAction:null,panelsKeys:a(a({},e.panelsKeys),{},{newPanels:[]})});case"FORGE_ISSUE_ACTION_EXEC":return a(a({},e),{},{activeAction:{action:t.payload,isLoading:!0}});case"FORGE_ISSUE_ACTION_RENDERED":return a(a({},e),{},{activeAction:a(a({},e.activeAction),{},{isLoading:!1})});case"FORGE_ISSUE_ACTION_CLOSE":return a(a({},e),{},{activeAction:null});case"FORGE_ISSUE_PANEL_ADDED":return a(a({},e),{},{panelsKeys:a(a({},e.panelsKeys),{},{newPanels:[...e.panelsKeys.newPanels,t.payload]})});case"FORGE_NEW_ISSUE_PANEL_UNTRACK":{const s=t.payload,{panelsKeys:n}=e;return a(a({},e),{},{panelsKeys:a(a({},n),{},{newPanels:n.newPanels.filter(e=>e!==s)})})}case"FORGE_ISSUE_PANEL_REMOVED":{const s=t.payload;return a(a({},e),{},{panelsKeys:{newPanels:e.panelsKeys.newPanels.filter(e=>e!==s),collapsedPanels:e.panelsKeys.collapsedPanels.filter(e=>e!==s)}})}case"FORGE_ISSUE_PANEL_UPDATED":{const{panelKey:s,collapsed:n}=t.payload,i=n?Array.from(new Set([...e.panelsKeys.collapsedPanels,s])):e.panelsKeys.collapsedPanels.filter(e=>e!==s);return a(a({},e),{},{panelsKeys:a(a({},e.panelsKeys),{},{collapsedPanels:i})})}case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{var s;const n=(null===(s=t.payload.forgeIssueProperties)||void 0===s?void 0:s.collapsedPanels)||[];return a(a({},e),{},{panelsKeys:a(a({},e.panelsKeys),{},{collapsedPanels:Array.from(new Set([...e.panelsKeys.collapsedPanels,...n]))})})}default:return e}}},"./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.I,e=>e.activityFeed),r=Object(n.createSelector)(i,e=>e.selectedActivityItem)},"./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return S}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/camelCase.js"),i=s.n(a),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),o=s("./src/packages/platform/utils/constants/src/board-types.js"),c=s("./src/packages/platform/utils/constants/src/project-types.js"),l=s("./src/packages/platform/utils/constants/src/status-categories.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const f=Object(n.createSelector)(Object(p.q)("servicedesk-practices"),e=>{if(e&&e.value&&e.value.length>0)return e.value[0]});var g=s("./src/packages/issue/issue-view/src/selectors/status-selector.js");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const j=e=>Object(u.j)(...c.i)(e),E=e=>Object(u.j)(...c.g)(e),v=e=>Object(u.j)(...o.a)(e),k=e=>Object(u.j)(...l.STATUS_CATEGORIES)(e),w=Object(n.createSelector)(Object(p.q)("assignee"),e=>e&&e.value?e.value.accountId:null),S=Object(n.createSelector)(d.b,m.k,m.C,m.F,m.u,b.e,g.b,d.i,d.h,m.C,d.A,w,f,(e,t,s,n,a,o,c,d,p,m,b,f,g)=>{const h={};return e&&(h.analyticsSource=e),"serviceDesk"===j(i()(n)).value&&g&&(h.itsmPractice=g),{containerType:Object(u.j)("project")("project"),containerId:m,objectType:Object(u.j)("issue")("issue"),objectId:new r.a(b),attributes:y(y({},h),{},{designVersion:Object(u.j)("v2-bento")("v2-bento"),projectId:s,issueId:t,projectConfig:E(a?"next-gen":"classic"),projectType:j(i()(n)),nextGenProject:Boolean(a),statusCategory:k(c),statusCategoryId:c?Object(l.categoryIdForStatusCategory)(c):null,issueTypeId:o,boardType:v(d),boardId:p,assigneeId:f?Object(u.j)(f)(f):f})}})},"./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const r=Object(n.createSelector)(i.I,e=>e.assignIssueParentModal.isOpen),o=Object(n.createSelector)(a.m,i.A,(e,t)=>[{id:e.issueId,key:e.issueKey,parentId:t&&t.id}])},"./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/selectors/attachment-selector.js");const i=Object(n.createSelector)(a.a,e=>e.picker),r=Object(n.createSelector)(i,e=>e.attachments||e.uploadedAttachments),o=Object(n.createSelector)(i,e=>e.isPopupOpen),c=e=>Object(n.createSelector)(r,t=>t[e])},"./src/packages/issue/issue-view/src/selectors/attachment-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const r=Object(n.createSelector)(i.g,e=>e.canCreateAttachments),o=Object(n.createSelector)(a.I,e=>e.attachments)},"./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return j})),s.d(t,"g",(function(){return E})),s.d(t,"h",(function(){return v})),s.d(t,"a",(function(){return k})),s.d(t,"f",(function(){return w})),s.d(t,"e",(function(){return S})),s.d(t,"d",(function(){return I})),s.d(t,"c",(function(){return C}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/configurations.js");const c=(e,t)=>`${e?e.replace(/\/?$/,"/"):"/"}browse/${t}`,l=Object(i.q)("issuetype"),u=Object(i.q)("parent"),d=Object(i.q)("epic"),p=Object(i.q)(o.a),m=Object(n.createSelector)(d,a.g,(e,t)=>((e,t)=>e&&void 0!==t?{summary:e.summary,key:e.key,url:c(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""}:null)(e&&e.value,t)),b=Object(n.createSelector)(p,a.g,(e,t)=>((e,t)=>e&&e.data?{summary:e.data.summary,key:e.data.key,url:c(t,e.data.key),issueTypeName:e.data.issueTypeName||"",issueTypeIconUrl:e.data.issueTypeIconUrl||""}:null)(e&&e.value,t)),f=Object(n.createSelector)(u,a.g,(e,t)=>((e,t)=>e?{summary:e.fields.summary,key:e.key,url:c(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""}:null)(e&&e.value,t)),g=Object(n.createSelector)(r.A,a.g,(e,t)=>((e,t)=>e?{summary:e.summary,key:e.key,url:c(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""}:null)(e,t)),h=Object(n.createSelector)(g,f,b,(e,t,s)=>e||t||s),y=Object(n.createSelector)(m,g,(e,t)=>[e,t].filter(e=>e)),O=Object(n.createSelector)(m,h,(e,t)=>[e,t].filter(e=>e)),j=e=>e?y:O,E=Object(n.createSelector)(l,e=>e&&e.value),v=Object(n.createSelector)(a.g,a.B,c),k=Object(n.createSelector)(a.g,a.B,(e,t)=>`${window.location.protocol}//${window.location.host}${c(e,t)}`),w=Object(n.createSelector)(E,e=>e&&e.name),S=Object(n.createSelector)(E,e=>e&&e.id),I=Object(n.createSelector)(E,e=>e&&e.iconUrl),C=Object(n.createSelector)(l,e=>e&&Boolean(e.editable))},"./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return p}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const u=Object(n.createSelector)(l.e,e=>e.cardCover),d=Object(n.createSelector)(u,e=>e&&e.isEnabled),p=(Object(n.createSelector)(u,e=>e&&(!o()(e.attachmentId)||!i()(e.availableAttachmentIds))),Object(n.createSelector)(c.z,e=>!!e&&e.includes("cardCoverActions")))},"./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return f})),s.d(t,"e",(function(){return g})),s.d(t,"g",(function(){return h})),s.d(t,"d",(function(){return y})),s.d(t,"c",(function(){return O})),s.d(t,"b",(function(){return j})),s.d(t,"a",(function(){return E}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),i=s("./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),c=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js");var l=s("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js");const d=Object(n.createSelector)(o.I,e=>e.changeboarding),p=["core-issue","software-issue"],m=["core-issue","full-issue","software-issue","software-backlog-issue"],b=[a.a.FULL_ISSUE,a.a.SERVICEDESK_QUEUES_ISSUE,a.a.SERVICEDESK_REPORTS_ISSUE],f=Object(n.createSelector)(r.b,r.e,u.a,(e,t,s)=>!!e&&(m.includes(e.value)&&p.includes(t))&&!s),g=Object(n.createSelector)(r.b,u.a,o.u,(e,t,s)=>m.includes(null==e?void 0:e.value)&&!t&&!s),h=Object(n.createSelector)(r.b,u.a,o.u,(e,t,s)=>b.includes(null==e?void 0:e.value)&&!t&&!s),y=Object(n.createSelector)(g,d,e=>{const{firstActivationDateMs:t}=e.context;return(e=>null!=e&&e<15357276e5)(t)},()=>Object(i.b)()<7,l.a,u.a,(e,t,s,n,a,i)=>e&&t.isBannerVisible&&s&&n&&!a&&!i),O=Object(n.createSelector)(d,e=>e.isTourActive),j=Object(n.createSelector)(d,e=>e.isBannerDismissed),E=Object(n.createSelector)(c.g,e=>e.some(e=>"assignee"===e.id))},"./src/packages/issue/issue-view/src/selectors/children-issues-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.e,e=>e.childrenIssues)},"./src/packages/issue/issue-view/src/selectors/classic-project-config-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.c,e=>e&&e.viewScreenId)},"./src/packages/issue/issue-view/src/selectors/clickthrough-banner-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return p})),s.d(t,"b",(function(){return m}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js");const c=Object(n.createSelector)(r.I,e=>e.clickthroughBanner),l=[a.a.FULL_ISSUE,a.a.SERVICEDESK_QUEUES_ISSUE,a.a.SERVICEDESK_REPORTS_ISSUE],u=Object(n.createSelector)(i.b,r.u,o.a,(e,t,s)=>!!e&&(l.includes(e.value)&&!t)&&!s),d=Object(n.createSelector)(c,e=>!!e&&!e.isBannerVisible),p=Object(n.createSelector)(u,d,(e,t)=>!e||t),m=Object(n.createSelector)(u,p,(e,t)=>e&&t)},"./src/packages/issue/issue-view/src/selectors/comment-selector.js":function(e,t,s){"use strict";s.d(t,"t",(function(){return b})),s.d(t,"J",(function(){return f})),s.d(t,"I",(function(){return g})),s.d(t,"F",(function(){return h})),s.d(t,"E",(function(){return y})),s.d(t,"v",(function(){return O})),s.d(t,"G",(function(){return v})),s.d(t,"a",(function(){return k})),s.d(t,"e",(function(){return D})),s.d(t,"q",(function(){return A})),s.d(t,"i",(function(){return M})),s.d(t,"l",(function(){return L})),s.d(t,"j",(function(){return R})),s.d(t,"f",(function(){return N})),s.d(t,"g",(function(){return U})),s.d(t,"r",(function(){return F})),s.d(t,"h",(function(){return V})),s.d(t,"H",(function(){return K})),s.d(t,"o",(function(){return B})),s.d(t,"p",(function(){return W})),s.d(t,"m",(function(){return H})),s.d(t,"s",(function(){return G})),s.d(t,"k",(function(){return $})),s.d(t,"D",(function(){return q})),s.d(t,"C",(function(){return z})),s.d(t,"b",(function(){return Y})),s.d(t,"c",(function(){return Q})),s.d(t,"d",(function(){return J})),s.d(t,"K",(function(){return Z})),s.d(t,"B",(function(){return X})),s.d(t,"u",(function(){return ee})),s.d(t,"n",(function(){return te})),s.d(t,"A",(function(){return se})),s.d(t,"w",(function(){return ne})),s.d(t,"y",(function(){return ae})),s.d(t,"x",(function(){return ie})),s.d(t,"z",(function(){return re}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/get.js"),i=s.n(a),r=s("./node_modules/lodash/values.js"),o=s.n(r),c=s("./node_modules/date-fns/compare_asc/index.js"),l=s.n(c),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const m=Object(n.createSelector)(d.I,e=>e.comments.pendingDeletedIds),b=Object(n.createSelector)(d.e,e=>e.comments),f=Object(n.createSelector)(d.e,e=>e.totalComments),g=Object(n.createSelector)(d.e,e=>e.commentsStartIndex),h=Object(n.createSelector)(d.e,e=>e.loadedComments),y=Object(n.createSelector)(d.I,e=>e.comments.isLoadingMoreComments),O=Object(n.createSelector)(d.I,e=>e.comments.hasScrolledPermalinkComment),j=Object(n.createSelector)(d.I,e=>e.comments.pendingSavedValues),E=Object(n.createSelector)(d.I,e=>e.comments.deleteModalCommentId),v=Object(n.createSelector)(d.I,e=>e.comments.loadingStage),k=Object(n.createSelector)(b,j,(e,t)=>Object.assign({},e,t)),w=e=>Object(n.createSelector)(k,t=>t[e]),S=(e,t)=>Object(n.createSelector)(w(e),e=>e?e[t]:null),I=e=>Object(n.createSelector)(w(e),u.a,(e,t)=>null!==t&&t===e.authorId),C=(e,t)=>Object(n.createSelector)(w(e),d.J,(e,s)=>e[t]?s(e[t]):null),T=Object(n.createSelector)(d.I,e=>e&&e.comments||null),P=Object(n.createSelector)(T,e=>e&&e.commentEditors||null),_=e=>Object(n.createSelector)(P,t=>t&&t[e]||null),x=(e,t)=>Object(n.createSelector)(_(e),e=>e&&e[t]||null),D=e=>C(e,"authorId"),A=e=>C(e,"updateAuthorId"),M=e=>x(e,"editingValue"),L=e=>x(e,"visibility"),R=e=>Object(n.createSelector)(M(e),w(e),(e,t)=>e||t&&t.bodyAdf||null),N=e=>S(e,"bodyHtml"),U=e=>S(e,"createdDate"),F=e=>S(e,"updatedDate"),V=e=>S(e,"edited"),K=e=>Object(n.createSelector)(j,t=>t[e]),B=e=>Object(n.createSelector)(K(e),e=>!!e),W=e=>Object(n.createSelector)(K(e),e=>!(!e||!e.hasSaveFailed)),H=e=>Object(n.createSelector)(E,t=>t===e),G=e=>S(e,"visibility"),$=e=>Object(n.createSelector)(L(e),G(e),(e,t)=>e||t),q=e=>Object(n.createSelector)(u.v,S(e,"isInternal"),(e,t)=>e&&t),z=e=>Object(n.createSelector)(_(e),e=>i()(e,"isInternal",!0)),Y=Object(n.createSelector)(p.g,e=>e.canAddComments),Q=e=>Object(n.createSelector)(p.g,I(e),(e,t)=>e.canDeleteAllComments||e.canDeleteOwnComments&&t),J=e=>Object(n.createSelector)(p.g,I(e),(e,t)=>e.canEditAllComments||e.canEditOwnComments&&t),Z=Object(n.createSelector)(k,m,(e,t)=>Object.keys(e).filter(e=>!t.includes(e)).map(t=>({id:t,createdDate:new Date(e[t].createdDate)})).sort((e,t)=>l()(e.createdDate,t.createdDate)).map(e=>e.id)),X=e=>Object(n.createSelector)(_(e),e=>!!e&&e.isEditing),ee=Object(n.createSelector)(Z,e=>e,(e,t)=>e.filter(e=>X(e)(t))),te=Object(n.createSelector)(b,e=>e?Object.keys(e).filter(t=>"object"==typeof e[t]):[]),se=Object(n.createSelector)(te,e=>e,(e,t)=>e.some(e=>X(e)(t))),ne=Object(n.createSelector)(d.I,e=>e.comments.addCommentEditorExpand),ae=Object(n.createSelector)(ne,P,(e,t)=>e||t&&o()(t).some(e=>e.isEditing)),ie=Object(n.createSelector)(d.I,e=>e.comments.isCommentAttachmentInProgress),re=Object(n.createSelector)(d.u,d.F,(e,t)=>!e&&("business"===t||"software"===t))},"./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),r=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");const o=Object(n.createSelector)(a.e,e=>e.confluenceAppLinks||[]),c=Object(n.createSelector)(o,e=>e&&e.length>0),l=Object(n.createSelector)(c,i.c,r.f,(e,t,s)=>e&&t&&s)},"./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"f",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return b})),s.d(t,"h",(function(){return f})),s.d(t,"j",(function(){return g})),s.d(t,"g",(function(){return h})),s.d(t,"i",(function(){return y}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.e,e=>e.confluencePages),r=Object(n.createSelector)(i,e=>e.createLinkedPage),o=Object(n.createSelector)(r,e=>e.errorMessage),c=Object(n.createSelector)(r,e=>e.isInvalid),l=Object(n.createSelector)(r,e=>e.isLoading),u=Object(n.createSelector)(r,e=>e.clickedCount>0),d=Object(n.createSelector)(r,e=>e.clickedCount),p=Object(n.createSelector)(i,e=>e&&e.linkedPages),m=Object(n.createSelector)(i,e=>e&&e.mentionedPages),b=Object(n.createSelector)(i,e=>!(!e||!e.isLinkingEnabled)),f=Object(n.createSelector)(p,e=>e&&e.pages),g=Object(n.createSelector)(m,e=>e&&e.pages),h=Object(n.createSelector)(p,e=>e&&e.pageCount),y=Object(n.createSelector)(m,e=>e&&e.pageCount)},"./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.I,e=>e.ecosystem&&e.ecosystem.glance)},"./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"g",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return u})),s.d(t,"f",(function(){return d}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const i=Object(n.createSelector)(a.g,e=>e.canCloneIssue),r=Object(n.createSelector)(a.g,e=>e.canDeleteIssue),o=Object(n.createSelector)(a.g,e=>e.canMoveIssue),c=Object(n.createSelector)(a.g,e=>e.canEditIssues),l=Object(n.createSelector)(a.g,e=>e.canAdministerJira||e.canAdministerProject),u=Object(n.createSelector)(a.g,e=>e.canAssignIssues),d=Object(n.createSelector)(a.g,e=>e.canLinkIssues)},"./src/packages/issue/issue-view/src/selectors/issue-actions-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return f})),s.d(t,"i",(function(){return h})),s.d(t,"d",(function(){return y})),s.d(t,"c",(function(){return O})),s.d(t,"e",(function(){return j})),s.d(t,"b",(function(){return E})),s.d(t,"a",(function(){return v})),s.d(t,"g",(function(){return k})),s.d(t,"f",(function(){return w}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),l=s("./src/packages/issue/issue-view/src/selectors/classic-project-config-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),d=s("./src/packages/issue/issue-view/src/selectors/request-type-selector.js"),p=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js"),m=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),b=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js");const f=Object(n.createSelector)(a.w,b.a,(e,t)=>Boolean(e)&&!t),g=Object(n.createSelector)(r.c,r.b,(e,t)=>e||t),h=Object(n.createSelector)(i.u,g,(e,t)=>t&&e),y=Object(n.createSelector)(i.h,a.u,(e,t)=>!e&&!t),O=Object(n.createSelector)(i.l,u.c,i.F,d.a,r.e,l.a,(e,t,s,n,a,i)=>{if(!e)return"hide";if(!t)return"disabled_permission";switch(s){case"service_desk":if(!Object(o.isJSDBentoEnabled)())return"hide";if(!a)return"disabled_permission";if(!n)return"disabled_no_request_type"}return i?"show":"disabled_no_screen_id"}),j=Object(n.createSelector)(O,e=>"show"===e),E=Object(n.createSelector)(m.c,m.b,p.b,i.l,(e,t,s,n)=>!e&&!t&&s&&n),v=Object(n.createSelector)(m.c,i.l,(e,t)=>e&&t),k=Object(n.createSelector)(i.t,c.f,(e,t)=>e||t),w=Object(n.createSelector)(i.t,c.e,(e,t)=>e||t)},"./src/packages/issue/issue-view/src/selectors/issue-links-selector.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return f})),s.d(t,"n",(function(){return h})),s.d(t,"l",(function(){return y})),s.d(t,"i",(function(){return j})),s.d(t,"e",(function(){return E})),s.d(t,"d",(function(){return v})),s.d(t,"h",(function(){return k})),s.d(t,"b",(function(){return w})),s.d(t,"k",(function(){return S})),s.d(t,"c",(function(){return I})),s.d(t,"g",(function(){return C})),s.d(t,"j",(function(){return T})),s.d(t,"m",(function(){return P})),s.d(t,"o",(function(){return _})),s.d(t,"a",(function(){return x}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./node_modules/lodash/pickBy.js"),o=s.n(r),c=s("./node_modules/lodash/toArray.js"),l=s.n(c),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=Object(n.createSelector)(u.e,e=>e.issueLinks),f=Object(n.createSelector)(b,e=>!!e),g=Object(n.createSelector)(b,e=>e&&e.issueLinks),h=e=>{var t;return(null===(t=e.entities.remoteIssueLinks)||void 0===t?void 0:t.remoteIssues)||[]},y=Object(n.createSelector)(g,e=>e&&o()(e,e=>e.isOptimistic)),O=Object(n.createSelector)(b,e=>e&&e.linkedIssues),j=Object(n.createSelector)(b,e=>e?e.linkedIssueKeys:[]),E=Object(n.createSelector)(g,e=>!i()(e)),v=Object(n.createSelector)(g,h,(e,t)=>!i()(e)||!i()(t)),k=Object(n.createSelector)(j,e=>e.length),w=Object(n.createSelector)(j,h,(e,t)=>e.length+t.length),S=Object(n.createSelector)(g,O,(e,t)=>i()(e)?null:l()(e).filter(e=>!e.isDeleted).map(e=>p(p({},e),{},{linkedIssue:t[e.linkedIssueKey]})).reduce((e,t)=>Object.assign(e,{[t.typeName]:[...e[t.typeName]||[],t]}),{})),I=Object(n.createSelector)(S,h,(e,t)=>{if(null==e&&0===t.length)return null;const s=e=>({id:e.remoteIssueId,issueKey:e.issueKey,issueLink:e.issueLinkUrl,issueSummary:e.summary,issueTypeIconUrl:e.iconUrl});return t.reduce((e,t)=>{const{issueDetails:n,relationship:a,id:i,issueKey:r,issueLinkUrl:o,remoteIssueLinkError:c,globalId:l,isSaved:u,isLoading:d,isOptimistic:m,hasError:b,isDeleted:f}=t;return null!=a&&(e=>!e||"APPLINK_REQ_AUTH"===e.error)(c)&&!f?p(p({},e),{},{[a]:[...e[a]||[],{id:i.toString(),direction:"OUTWARD",typeName:a,linkedIssueKey:r,linkedIssue:n||s(t),isRemote:!0,globalId:l,remoteServerHostname:new URL(o).hostname,remoteIssueLinkError:c,isSaved:u,isLoading:d,isOptimistic:m,hasError:b}]}):e},p({},e))}),C=e=>Object(n.createSelector)(g,t=>t&&t[e]||null),T=e=>Object(n.createSelector)(O,t=>t&&t[e]||null),P=Object(n.createSelector)(b,e=>e&&e.quickAddClicked),_=Object(n.createSelector)(P,e=>!!e),x=Object(n.createSelector)(b,e=>e&&e.canCreateLinkedIssue)},"./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),r=s("./src/packages/issue/issue-view/src/feature-flags.js"),o=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js");const c=Object(n.createSelector)(a.e,e=>Object(r.isJiraSettingsHookEnabled)()?e.jiraSettings.issueLinkTypes:e.issueLinkTypes),l=Object(n.createSelector)(i.g,o.f,c,({canLinkIssues:e},t,s)=>!!(e&&t&&s&&s.length))},"./src/packages/issue/issue-view/src/selectors/issue-remote-data-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.e,e=>e.issueRemoteData),r=Object(n.createSelector)(i,e=>e.isLoadingComplete)},"./src/packages/issue/issue-view/src/selectors/issue-types-selector.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const c=Object(n.createSelector)(r.e,e=>e.issueTypes),l=["summary","issuetype","parent","project"],u=e=>!!Object.keys(e).find(t=>!(e=>l.find(t=>e===t))(t)&&!e[t].hasDefaultValue&&e[t].required),d=e=>i()(e.fields)||u(e.fields),p=Object(n.createSelector)(c,o.g,r.q,(e,t,s)=>{const n=s&&t&&t.id;return e.filter(e=>!e.subtask&&e.id!==n)}),m=Object(n.createSelector)(r.I,e=>e.fetchIssueTypesStatus)},"./src/packages/issue/issue-view/src/selectors/project-selector.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return d}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.e,e=>e.project),r=Object(n.createSelector)(i,e=>e?e.projectName:null),o=Object(n.createSelector)(i,e=>e?e.avatarUrl:null),c=Object(n.createSelector)(i,e=>e?e.issueTypeHierarchy:null),l=Object(n.createSelector)(c,e=>e?e.baseLevelId:null),u=Object(n.createSelector)(c,e=>e?e.levels:{}),d=Object(n.createSelector)(l,u,(e,t)=>{const s=[];if(!e||!t)return s;const n=t[e];if(!n)return s;let a=n.belowLevelId?t[n.belowLevelId]:void 0;for(;void 0!==a;)s.push(a),a=a.belowLevelId?t[a.belowLevelId]:void 0;return s})},"./src/packages/issue/issue-view/src/selectors/request-type-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const r=e=>e&&e.value&&e.value.requestType&&e.value.requestType.id,o=(Object(n.createSelector)(Object(a.e)("com.atlassian.servicedesk:vp-origin"),r),Object(n.createSelector)(Object(a.e)("com.atlassian.servicedesk:vp-origin"),i.e,(e,t)=>e&&e.value&&e.value.requestType&&e.value.requestType.issueTypeId===t?e:null)),c=Object(n.createSelector)(o,r)},"./src/packages/issue/issue-view/src/selectors/status-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/status-categories.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const r=Object(n.createSelector)(Object(i.o)("status"),e=>e?Object(a.statusCategoryForId)(e.statusCategory.id):null),o=Object(n.createSelector)(Object(i.o)("status"),e=>({name:e.name,id:e.id,statusCategory:{id:e.statusCategory.id,name:e.statusCategory.name}})),c=Object(n.createSelector)(Object(i.o)("resolution"),e=>e&&e.name)},"./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js");const i=Object(n.createSelector)(a.d,e=>e.filter(e=>e.subtask)),r=Object(n.createSelector)(i,e=>e.length>=1),o=Object(n.createSelector)(i,e=>!!e.find(a.b))},"./src/packages/issue/issue-view/src/selectors/subtasks-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return d})),s.d(t,"d",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return g}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const l=Object(n.createSelector)(e=>e.validators,e=>{const t=e.projectHasSubtaskValidators;return(e=>"LOADED"===e.status&&e.value)(t)||(e=>"LOADING"===e.status||"FAILED"===e.status)(t)});var u=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js");const d=Object(n.createSelector)(c.g,e=>!(!e||!e.subtask)),p=Object(n.createSelector)(i.e,e=>e.subtasks),m=Object(n.createSelector)(p,e=>e.length>0),b=Object(n.createSelector)(u.a,l,(e,t)=>e||t),f=Object(n.createSelector)(i.e,({subtasksConfiguration:e,jiraSettings:t})=>Object(o.isJiraSettingsHookEnabled)()?t.subtasksConfiguration.enabled:e.enabled),g=Object(n.createSelector)(r.g,d,u.b,b,a.u,a.q,a.v,i.u,f,({canCreateSubtask:e},t,s,n,a,i,r,o,c)=>!(!e||t||!s||!!n&&(a||i)||!(!r||!o)||!c))},"./src/packages/issue/issue-view/src/selectors/ui-config-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.I,e=>e.uiConfig),r=Object(n.createSelector)(i,e=>Boolean(e&&e.newIssueViewLockedIn))},"./src/packages/issue/issue-view/src/selectors/web-links-selector.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"a",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return p}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const r=Object(n.createSelector)(a.e,e=>e.webLinks),o=Object(n.createSelector)(r,e=>e.links.filter(e=>void 0===e.isDeleting||!0!==e.isDeleting)),c=e=>Object(n.createSelector)(o,t=>t.find(t=>t.id===e)),l=Object(n.createSelector)(r,i.g,(e,t)=>!0===e.isLinkingEnabled&&t.canLinkIssues),u=Object(n.createSelector)(r,e=>e.linkCount),d=Object(n.createSelector)(r,e=>e.createClickCount),p=Object(n.createSelector)(d,e=>e>0)},"./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const a=[400,403,401,404,409,412],i=e=>e>=400&&e<=499&&429!==e;t.a=e=>!(e instanceof n.a)&&(!(e instanceof n.b&&e.statusCode&&(e=>a.some(t=>t===e))(e.statusCode))&&("TypeError"!==e.name&&"AbortError"!==e.name))},"./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),a=s("./src/packages/issue/issue-view/src/feature-flags.js");class i extends Error{constructor(e,t){if(Object(a.isFixSecurityErrorEnabled)()&&e instanceof i)return e;super(e.message),this.endpoint=void 0,this.traceId=void 0,this.error=void 0,this.statusCode=void 0,this.error=e,this.message=e.message,e instanceof n.b&&(null!=e.traceId&&(this.traceId=e.traceId),this.statusCode=e.statusCode),this.endpoint=t}}},"./src/packages/issue/issue-view/src/utils/prefetched-resources/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return w})),s.d(t,"a",(function(){return S})),s.d(t,"c",(function(){return I}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/react-resource-router/build/esm/index.js"),i=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-user-auth/index.js"),r=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-upload-permissions/index.js"),o=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-read-permissions/index.js"),c=s("./src/packages/routes/src/ui/spa/issue/resources/issue-gira-data/index.js"),l=s("./src/packages/routes/src/ui/spa/issue/resources/issue-graphql-data/index.js"),u=s("./src/packages/routes/src/ui/spa/issue/resources/issue-forge-data/index.js"),d=s("./src/packages/issue/issue-view/src/feature-flags.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),m=s("./src/packages/issue/issue-fetch-services-common/src/feature-flags.js"),b=s("./src/packages/platform/services/spa-apdex-analytics/src/marks.js"),f=s("./src/packages/routes/src/ui/spa/issue/resources/utils.js");function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function y(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const O=e=>Object(m.b)()?(({next:e=(()=>{}),resourceManager:t,issueGiraDataPromise:s,issueGraphqlDataPromise:n})=>{let a=[];return window.issueResourceResponses?(t.setAllData(window.issueResourceResponses),delete window.issueResourceResponses,null):(Object(f.a)()&&(a=[window.issueResources.issueGiraDataPromise,window.issueResources.issueGraphqlDataPromise]),s&&n&&(a=[s,n]),0===a.length?null:()=>Promise.all(a).then(s=>{Object(p.setMark)(b.b);const[n,a]=s;return t.setAllData({mediaUserAuth:null,mediaUploadPermission:null,mediaReadPermission:null,issueGiraData:n,issueGraphqlData:a}),delete window.issueResources,e()}).catch(t=>(delete window.issueResources,e(t))))})(e):(({next:e=(()=>{}),resourceManager:t,mediaUserAuthPromise:s,mediaUploadPermissionPromise:n,mediaReadPermissionPromise:a,issueGiraDataPromise:i,issueGraphqlDataPromise:r})=>{let o=[];return window.issueResourceResponses?(t.setAllData(window.issueResourceResponses),delete window.issueResourceResponses,null):(Object(f.a)()&&(o=[window.issueResources.mediaUserAuthPromise,window.issueResources.mediaUploadPermissionPromise,window.issueResources.mediaReadPermissionPromise,window.issueResources.issueGiraDataPromise,window.issueResources.issueGraphqlDataPromise]),s&&n&&a&&i&&r&&(o=[s,n,a,i,r]),0===o.length?null:()=>Promise.all(o).then(s=>{Object(p.setMark)(b.b);const[n,a,i,r,o]=s;return t.setAllData({mediaUserAuth:n,mediaUploadPermission:a,mediaReadPermission:i,issueGiraData:r,issueGraphqlData:o}),delete window.issueResources,e()}).catch(t=>(delete window.issueResources,e(t))))})(e),j=e=>{let{resolveIssueApp:t,isServer:s,issue:n,isInitialRender:a}=e,i=y(e,["resolveIssueApp","isServer","issue","isInitialRender"]);return!s&&!!n&&a&&O(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({next:t},i))||t};var E=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/prefetched-resource-manager/index.js");let v;const k=()=>{var e;return v=null!==(e=v)&&void 0!==e?e:new E.a,v},w=()=>{const e=k(),{data:t,promise:s}=Object(a.l)(i.a),{data:d,promise:p}=Object(a.l)(r.a),{data:m,promise:b}=Object(a.l)(o.a),{data:f,promise:g}=Object(a.l)(c.a),{data:h,promise:y}=Object(a.l)(l.a),{promise:O}=Object(a.l)(u.a);return Object(n.useMemo)(()=>{b&&p&&s&&g&&y&&(e.setAllPromises({mediaUserAuthPromise:s,mediaUploadPermissionPromise:p,mediaReadPermissionPromise:b,issueGiraDataPromise:g,issueGraphqlDataPromise:y}),e.setAllData({mediaUserAuth:t,mediaUploadPermission:d,mediaReadPermission:m,issueGiraData:f,issueGraphqlData:h})),O&&e.setForgePromise(O)},[O,f,g,h,y,m,b,d,p,t,s,e]),[e]},S=({resolveIssueApp:e,isServer:t,issue:s,isInitialRender:n})=>{const u=k();let p=null,m=null,b=null;Object(d.isfetchMediaTokensFromGiraEnabled)()||(({promise:p}=Object(a.l)(i.a)),({promise:m}=Object(a.l)(r.a)),({promise:b}=Object(a.l)(o.a)));const{promise:f}=Object(a.l)(c.a),{promise:g}=Object(a.l)(l.a);return[j({resolveIssueApp:e,isServer:t,issue:s,isInitialRender:n,resourceManager:u,mediaUserAuthPromise:p,mediaUploadPermissionPromise:m,mediaReadPermissionPromise:b,issueGiraDataPromise:f,issueGraphqlDataPromise:g})]},I=({useSideEffects:e})=>{const t=k(),{promise:s}=Object(a.l)(i.a),{promise:n}=Object(a.l)(r.a),{promise:u}=Object(a.l)(o.a),{promise:d}=Object(a.l)(c.a),{promise:p}=Object(a.l)(l.a),m=e?O({resourceManager:t,mediaUserAuthPromise:s,mediaUploadPermissionPromise:n,mediaReadPermissionPromise:u,issueGiraDataPromise:d,issueGraphqlDataPromise:p}):null;return[{error:null,loading:!t.isAllDataReady()&&null!==m,promise:null!==m?m():null,data:t.allData,expiresAt:0,key:""}]}},"./src/packages/issue/issue-view/src/utils/prefetched-resources/prefetched-resource-manager/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-view/src/feature-flags.js");t.a=class{constructor(){this.issueMediaUserAuth=null,this.issueMediaReadPermission=null,this.issueMediaUploadPermission=null,this.issueGiraData=null,this.issueGraphqlData=null,this.issueForgeData=null,this.allData={},this.getGiraData=()=>this.allData.issueGiraData&&this.allData.issueGiraData.data,this.getGqlData=()=>this.allData.issueGraphqlData&&this.allData.issueGraphqlData.data,this.getMediaUser=()=>this.allData.mediaUserAuth,this.getMediaReadPermission=()=>this.allData.mediaReadPermission,this.getMediaUploadPermission=()=>this.allData.mediaUploadPermission,this.isAllDataReady=()=>Object(n.isfetchMediaTokensFromGiraEnabled)()?!(!this.getGiraData()||!this.getGqlData()):!!(this.getGiraData()&&this.getGqlData()&&this.getMediaUser()&&this.getMediaUploadPermission()&&this.getMediaReadPermission()),this.containsInitialPromises=()=>!!(this.issueMediaUploadPermission&&this.issueMediaUserAuth&&this.issueMediaReadPermission&&this.issueGiraData&&this.issueGraphqlData)}setAllData(e){this.allData=e}setAllPromises(e){this.issueMediaUserAuth=e.mediaUserAuthPromise,this.issueMediaUploadPermission=e.mediaUploadPermissionPromise,this.issueMediaReadPermission=e.mediaReadPermissionPromise,this.issueGiraData=e.issueGiraDataPromise,this.issueGraphqlData=e.issueGraphqlDataPromise}setForgePromise(e){this.issueForgeData=e}getAllPromises(){return[this.issueMediaUserAuth,this.issueMediaUploadPermission,this.issueMediaReadPermission,this.issueGiraData,this.issueGraphqlData]}clearAll(){this.allData={},this.issueMediaReadPermission=null,this.issueMediaUploadPermission=null,this.issueMediaUserAuth=null,this.issueGiraData=null,this.issueForgeData=null,this.issueGraphqlData=null}}},"./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/issue/issue-view/src/feature-flags.js");const i=(e,t)=>e?Object(a.isBentoPrefetchErrorFixEnabled)()?n.Observable.fromPromise(e).catch(t):n.Observable.fromPromise(e):t()},"./src/packages/issue/issue-view/src/views/assign-issue-parent-modal/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),o=s("./src/packages/assign-issue-parent-modal/src/async.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),l=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),m=s("./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js");function b(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const f=Object(r.f)(()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("async-assign-issue-parent-modal")]).then(s.bind(null,"./src/packages/assign-issue-parent-modal/src/index.js")),{moduleId:"./src/packages/assign-issue-parent-modal/src/index.js"}),g=e=>{let{isOpen:t}=e,s=b(e,["isOpen"]);return(a.a.createElement(c.f,null,t&&a.a.createElement(o.a,{packageName:"issue"},a.a.createElement(f,s))))};g.displayName="ModalWithTransition",t.a=Object(i.b)(e=>{const t=Object(u.b)(e);return{isOpen:Object(m.b)(e),issues:Object(m.a)(e),issueParents:Object(d.B)(e),issueHierarchyLevel:Object(p.d)(e),issueParentTypeIds:Object(p.e)(e),shouldHideUnassignOption:Object(p.c)(e),parentIssueTypeName:Object(p.f)(e)[0],locale:Object(u.D)(e),baseUrl:Object(u.g)(e),projectId:Object(d.C)(e),analyticsSource:`issue-view (${t?t.toString():"undefined"})`}},e=>({onClose:()=>{e(Object(l.d)())},onSubmit:(t,s,n,a)=>{e(Object(l.e)(t,n,a))}}))(g)},"./src/packages/issue/issue-view/src/views/banner/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");var r=({renderTopBanner:e,applicationKey:t,isProjectSimplified:s})=>e?e(t,s):null;t.a=Object(n.b)(e=>({applicationKey:Object(a.e)(e),isProjectSimplified:Object(i.u)(e)}),{})(r)},"./src/packages/issue/issue-view/src/views/changeboarding/banner/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/react-redux/es/index.js"),o=s("./node_modules/lodash/flow.js"),c=s.n(o),l=s("./node_modules/@atlassiansox/engagekit/dist/esm/coordination/coordination-client.js"),u=s("./node_modules/@atlassiansox/engagekit/dist/esm/coordination/coordination.js"),d=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),p=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),m=s("./src/packages/issue/issue-view/src/actions/changeboarding-actions.js"),b=s("./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js"),f=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),g=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),h=s("./node_modules/lodash/noop.js"),y=s.n(h),O=s("./node_modules/@atlaskit/button/dist/esm/theme.js"),j=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js"),E=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/slide-down-on-mount.js"),v=Object(i.defineMessages)({summary:{id:"issue.changeboarding-summary",defaultMessage:"We're working on a more consistent issue view to help you find and update important details."},startButton:{id:"issue.changeboarding-start",defaultMessage:"See the highlights"},dismissButton:{id:"issue.changeboarding-dismiss",defaultMessage:"Maybe later"}}),k=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),w=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),S=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),I=s("./src/packages/common-legacy-do-not-add-anything-new/src/theme/index.js");const C=k.default.div(["display:flex;flex-wrap:wrap;align-content:space-between;background-color:",";color:",";border-radius:","px;position:relative;padding:","px ","px 0 ","px;justify-content:center;"],w.a.P300,w.a.N0,S.e/2,2*S.e,2*S.e,2*S.e),T=k.default.div(["display:flex;flex-wrap:wrap;flex-direction:row;align-items:center;text-align:center;"]),P=k.default.div(["display:flex;align-items:center;padding-bottom:","px;"],2*S.e),_=k.default.div(["padding-right:","px;padding-bottom:","px;"],S.e,2*S.e),x=k.default.div(["padding-right:","px;"],S.e),D=Object(I.a)({buttonStyles:{default:{background:{default:w.a.P200,hover:w.a.P100,active:w.a.P400},color:w.a.N0}}}),A=Object(I.a)({buttonStyles:{default:{background:{default:w.a.P300,hover:w.a.P200,active:w.a.P400},color:w.a.N0}}});class M extends n.PureComponent{componentDidMount(){this.props.onMount(this.props.seenTimes,this.props.firstSeenTimestamp)}render(){return a.a.createElement(E.a,null,a.a.createElement(C,null,a.a.createElement(T,null,a.a.createElement(_,null,this.props.intl.formatMessage(v.summary))),a.a.createElement(P,null,a.a.createElement(x,null,a.a.createElement(O.a.Provider,{value:D},a.a.createElement(j.a,{onClick:this.props.onStart},this.props.intl.formatMessage(v.startButton)))),a.a.createElement(O.a.Provider,{value:A},a.a.createElement(j.a,{onClick:this.props.onClose},this.props.intl.formatMessage(v.dismissButton))))))}}M.displayName="ChangeboardingBanner",M.defaultProps={onStart:y.a,onClose:y.a,onMount:y.a};class L extends n.Component{constructor(e){super(e),this.client=null;this.client=new l.a(e.cloudId,"/gateway/api")}render(){const{firstSeenTimestamp:e,intl:t,onClose:s,onMount:n,onStart:i,isVisible:r,seenTimes:o}=this.props;return r?a.a.createElement(u.a,{client:this.client,messageId:"bento-changeboarding-banner"},a.a.createElement(M,{intl:t,firstSeenTimestamp:e,seenTimes:o,onStart:i,onClose:s,onMount:n})):null}}L.displayName="ChangeboardingBannerView";t.a=c()(Object(d.a)("banner",{onMount:"viewed"}),Object(p.a)({onStart:"bannerStartChangeboardingTour",onClose:"bannerDismissChangeboardingTour",onMount:"changeboarding"}),Object(r.b)(e=>({isVisible:Object(g.d)(e),cloudId:Object(f.j)(e),seenTimes:Object(b.b)(),firstSeenTimestamp:Object(b.a)()}),{onStart:()=>Object(m.c)(Date.now()),onClose:()=>Object(m.a)(Date.now()),onMount:(e,t)=>Object(m.b)(e,t)}),i.injectIntl)(L)},"./src/packages/issue/issue-view/src/views/changeboarding/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/lodash/flow.js"),r=s.n(i),o=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),c=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),l=s("./src/packages/issue/changeboarding/src/ui/main.js"),u=s("./src/packages/issue/issue-view/src/actions/changeboarding-actions.js"),d=s("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),m=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),b=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),f=s("./node_modules/reselect/lib/index.js"),g=s("./src/packages/issue/issue-view/src/selectors/attachment-selector.js"),h=s("./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js"),y=s("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js");const O=Object(f.createSelector)(g.b,y.a,h.a,(e,t,s)=>e||t||s);var j=Object(n.defineMessages)({quickAdds:{id:"changeboarding.bento.step.quickAdds",defaultMessage:"Quickly add attachments, issue links, subtasks, as well as Marketplace app content."},quickAddsWithNoPermissions:{id:"changeboarding.bento.step.quickAddsWithNoPermissions",defaultMessage:"For projects where you have permission, the quick-add buttons let you add attachments, linked issues, subtasks, and content from Atlassian Marketplace apps."},editAnyField:{id:"changeboarding.bento.step.editAnyField",defaultMessage:"A single screen for view and edit lets you click any field to update it."},showMore:{id:"changeboarding.bento.step.showMore",defaultMessage:"All the finer details of the issue are here when you need them."},showMoreWhenNoExpander:{id:"changeboarding.bento.step.showMoreWhenNoExpander",defaultMessage:'Looking for a field but can\'t see it? Fields without a value appear under "Show more".'},boardSidebar:{id:"changeboarding.bento.step.boardSidebar",defaultMessage:"Prefer to open issues as a sidebar? The choice is yours."},giveFeedback:{id:"changeboarding.bento.step.giveFeedback",defaultMessage:"You're part of the team! Leave feedback and help us build the best issue view."},next:{id:"changeboarding.bento.next",defaultMessage:"Next"},skip:{id:"changeboarding.bento.skip",defaultMessage:"Skip"},done:{id:"changeboarding.bento.done",defaultMessage:"Done"},optInBackQuickAdd:{id:"changeboarding.bento.optInBackQuickAdd",defaultMessage:"Add attachments, link related issues, or click the down arrow to link web pages and other content."},optInBackEditField:{id:"changeboarding.bento.optInBackEditField",defaultMessage:"No more viewing and editing fields from different screens. In this view, you can update any field just by clicking into it."},optInBackShowMore:{id:"changeboarding.bento.optInBackShowMore",defaultMessage:"This view can be customized to suit your needs. Your admin can choose which fields to always display and which ones to hide when empty."},optInBackBoardSidebar:{id:"changeboarding.bento.optInBackBoardSidebar",defaultMessage:"Learn more about this view, switch back to the old one, or if you just want to see the old view temporarily, you can do it from here."}}),E=s("./node_modules/react/index.js"),v=s.n(E),k=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),w=s("./node_modules/lodash/noop.js"),S=s.n(w),I=s("./node_modules/@atlaskit/icon/glyph/attachment.js"),C=s.n(I),T=s("./node_modules/@atlaskit/icon/glyph/link.js"),P=s.n(T),_=s("./node_modules/@atlaskit/icon/glyph/more.js"),x=s.n(_),D=s("./node_modules/@atlaskit/icon/glyph/subtask.js"),A=s.n(D),M=s("./node_modules/@atlaskit/onboarding/dist/esm/styled/Target.js"),L=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),R=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/view.js");function N(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function U(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?N(Object(s),!0).forEach((function(t){F(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):N(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function F(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const V=k.default.div(["& button{cursor:default;}"]),K=(e,t)=>v.a.createElement(R.a,{key:e,id:e,icon:t,onClick:S.a});K.displayName="createItemView";const B=e=>{const t=U(U({overflow:"hidden",backgroundColor:"white"},e),{},{height:5*L.e,width:20*L.e,display:"inline-flex",paddingLeft:L.e,paddingTop:L.e/2,borderRadius:L.a}),s=K("ADD_ATTACHMENT_ID",v.a.createElement(C.a,{label:"",size:"medium"})),n=K("SUB_TASK",v.a.createElement(A.a,{label:"",size:"medium"})),a=K("LINK_ISSUE",v.a.createElement(P.a,{label:"",size:"medium"})),i=K("MORE_ICON",v.a.createElement(x.a,{label:"",size:"medium"}));return v.a.createElement(M.a,{style:t},v.a.createElement(V,null,s,n,a,i))};B.displayName="QuickAddsReplacement";var W=s("./src/packages/issue/issue-view/src/views/issue-base/context/context-items/view/expander/show-more-button/view.js"),H=Object(n.defineMessages)({timeTracking:{id:"changeboarding.bento.step.show-more.time-tracking",defaultMessage:"Time tracking"},originalEstimate:{id:"changeboarding.bento.step.show-more.original-estimate",defaultMessage:"Original estimate"},components:{id:"changeboarding.bento.step.show-more.components",defaultMessage:"Components"}});function G(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?G(Object(s),!0).forEach((function(t){q(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):G(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function q(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function z(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Y=k.default.div(["& button{cursor:default;}"]),Q=e=>{let{intl:t}=e,s=z(e,["intl"]);const n=$($({overflow:"hidden",color:"rgb(0, 82, 204)",backgroundColor:"white",paddingTop:L.e/2},s),{},{height:7*L.e,borderRadius:L.a}),a=[t.formatMessage(H.timeTracking),t.formatMessage(H.originalEstimate),t.formatMessage(H.components)];return v.a.createElement(M.a,{style:n},v.a.createElement(Y,null,v.a.createElement(W.a,{visibleSecondaryContextItemNameList:a,fieldCount:a.length,onExpand:()=>{}})))};Q.displayName="ShowMoreReplacementIntl";var J=Object(n.injectIntl)(Q);var Z={stepsForContext:e=>{const t=["QUICK_ADDS"];return e.isAssigneeVisible&&t.push("EDIT_FIELD"),t.push("SHOW_MORE"),e.isBoardModalView&&t.push("BOARD_SIDEBAR"),e.isFeedbackEnabled&&t.push("GIVE_FEEDBACK"),t},steps:{QUICK_ADDS:e=>{const t=e.hasQuickAddPermissions?void 0:B;return{placement:"",message:e.hasQuickAddPermissions?j.quickAdds:j.quickAddsWithNoPermissions,targetReplacement:t}},EDIT_FIELD:()=>({placement:"left top",message:j.editAnyField}),BOARD_SIDEBAR:()=>({placement:"bottom center",message:j.boardSidebar}),GIVE_FEEDBACK:()=>({placement:"bottom center",message:j.giveFeedback}),SHOW_MORE:e=>({placement:"top left",message:e.hasShowMoreLink?j.showMore:j.showMoreWhenNoExpander,targetReplacement:J})}};const X=Object(n.injectIntl)(l.a);t.a=r()(Object(o.a)("button",{onTourEnd:"clicked"}),Object(c.a)({onTourEnd:e=>({name:"finishIssueChangeboardingTour",hasQuickAddPermissions:e.hasQuickAddPermissions,hasShowMoreLink:e.hasShowMoreLink})}),Object(a.b)((e,t)=>{const s=Object(p.b)(e);return{isTourActive:Object(b.c)(e),recipeContext:{isBoardModalView:s&&"software-issue"===s.valueOf()&&!Object(d.b)(),hasQuickAddPermissions:O(e),hasShowMoreLink:Object(m.d)(e),isAssigneeVisible:Object(b.a)(e),isFeedbackEnabled:t.isFeedbackEnabled},recipe:Z}},{onTourEnd:u.d}))(X)},"./src/packages/issue/issue-view/src/views/changeboarding/ui/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/issue/opt-in-back/src/async.js"),o=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),c=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js");const l=({hasEditField:e,hasShowMoreLink:t})=>{const s={hasShowMoreLink:t,hasEditField:e};return(a.a.createElement(r.b,s))};l.displayName="ChangeBoardingTour";const u=Object(i.b)(e=>({hasEditField:Object(c.a)(e),hasShowMoreLink:Object(o.d)(e)}),{})(l);t.a=u},"./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js"),c=s("./node_modules/@atlaskit/icon/glyph/add.js"),l=s.n(c);class u extends n.Component{render(){const{label:e,onClick:t}=this.props;return(a.a.createElement("div",null,a.a.createElement("style",null,".squareButtonWithIcon { padding: 0 6px }"),a.a.createElement(o.a,{appearance:"subtle",spacing:"compact",iconBefore:a.a.createElement(l.a,{size:"small",label:e}),onClick:t,className:"squareButtonWithIcon"})))}}u.displayName="SquareAddIconButton",u.defaultProps={onClick:r.a}},"./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./node_modules/@atlaskit/width-detector/dist/esm/WidthObserver/index.js"),c=s("./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js");const l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["height:100%;display:flex;flex-direction:column;"]),{Provider:u,Consumer:d}=Object(n.createContext)(!1),p=({children:e,defaultIsCompact:t})=>{const[s,i]=Object(n.useState)(t),d=r()(i,50);return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(o.a,{setWidth:e=>{d(null!=e&&e<=600)}})),a.a.createElement(l,null,a.a.createElement(u,{value:s},e)))},m=d},"./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>e.displayName||e.name||"Component"},"./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/editing/index.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),u=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js");const d=Object(i.b)(e=>({experience:"editIssue",application:Object(o.b)(e),edition:Object(o.a)(e),analyticsSource:Object(c.b)(e)}),{})(r.b),p=Object(i.b)((e,t)=>({field:t.fieldId,isEditing:Object(l.B)(t.fieldId)(e)}),{})(r.a),m=e=>t=>{const s=s=>a.a.createElement(p,{fieldId:e},a.a.createElement(t,s));return s.displayName=`WithEditExperienceTracker(${Object(u.a)(t)})`,s}},"./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return f})),s.d(t,"c",(function(){return g})),s.d(t,"b",(function(){return h}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/index.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const d=e=>e.ui.viewMountStatus.hasIssueViewMounted;var p=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js");const m={description:"ALWAYS_TRACKING",ecosystemGlance:"NEVER_TRACKING",forgeGlance:"NEVER_TRACKING",assignee:"NEVER_TRACKING",reporter:"NEVER_TRACKING","com.pyxis.greenhopper.jira:gh-sprint":"NEVER_TRACKING","com.atlassian.jira.plugin.system.customfieldtypes:storypoint":"NEVER_TRACKING","com.pyxis.greenhopper.jira:gh-epic-link":"NEVER_TRACKING",fixVersions:"NEVER_TRACKING",versions:"NEVER_TRACKING",devSummary:"NEVER_TRACKING",releases:"NEVER_TRACKING","com.atlassian.servicedesk.assets-plugin:assetfield":"NEVER_TRACKING",ASSET_ONBOARDING:"NEVER_TRACKING","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype":"NEVER_TRACKING",labels:["requestDetailsPanel"],components:["requestDetailsPanel"],duedate:["requestDetailsPanel"],priority:["requestDetailsPanel"],environment:["requestDetailsPanel"],labels:["requestDetailsPanel"],components:["requestDetailsPanel"],"com.atlassian.servicedesk.approvals-plugin:sd-approvals":["requestDetailsPanel"],KNOWLEDGE_BASE:["requestDetailsPanel"],SLA_PANEL:["requestDetailsPanel"],timeoriginalestimate:["requestDetailsPanel"],timetracking:["requestDetailsPanel"],"com.atlassian.jpo:jpo-custom-field-parent":["requestDetailsPanel"],"com.atlassian.jpo:jpo-custom-field-baseline-start":["requestDetailsPanel"],"com.atlassian.jpo:jpo-custom-field-baseline-end":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:labels":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:textfield":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:url":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:float":["requestDetailsPanel"],"com.pyxis.greenhopper.jira:jsw-story-points":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:select":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:textarea":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:version":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:datetime":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":["requestDetailsPanel"],"com.atlassian.teams:rm-teams-custom-field-team":["requestDetailsPanel"],number:["requestDetailsPanel"],datetime:["requestDetailsPanel"],string:["requestDetailsPanel"],option2:["requestDetailsPanel"],array:["requestDetailsPanel"],"com.atlassian.servicedesk:vp-origin":["requestDetailsPanel"],"com.atlassian.servicedesk:sd-request-participants":["requestDetailsPanel"],"com.atlassian.servicedesk:sd-customer-organizations":["requestDetailsPanel"],"com.atlassian.servicedesk:sd-request-feedback":["requestDetailsPanel"],"com.pyxis.greenhopper.jira:jsw-issue-color":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:people":["requestDetailsPanel"],"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":["requestDetailsPanel"]};function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const f=Object(i.b)(e=>({experience:"viewIssue",experienceId:Object(c.B)(e),application:Object(o.b)(e),edition:Object(o.a)(e),analyticsSource:Object(c.b)(e),isExperienceReady:Object(u.m)(e)&&d(e)}),{})(r.e),g=e=>t=>{const s=s=>a.a.createElement(r.d,{location:e},({onExperienceSuccess:e})=>a.a.createElement(t,b({onExperienceSuccess:e},s)));return s.displayName=`WithViewExperienceTracker(${Object(p.a)(t)})`,s},h=e=>t=>{const s=({fieldType:s,ownProps:n})=>{const i=s&&(e=>{const t=m[e];return void 0===t?"NEVER_TRACKING":t})(s);if(null==s||"NEVER_TRACKING"===i)return a.a.createElement(t,n);const o=Array.isArray(i)?i:null,c=["field",s,...e?[e]:[]].join("-");return a.a.createElement(r.c,{location:c,parentProviders:o},a.a.createElement(t,n))};return s.displayName=`WithFieldViewExperienceTracker(${Object(p.a)(t)}`,Object(i.b)((e,t)=>({fieldType:Object(l.r)(t.fieldId)(e)}),null,({fieldType:e},t,s)=>({fieldType:e,ownProps:s}))(s)}},"./src/packages/issue/issue-view/src/views/common/issue-line-card/assets/authKey.svg":function(e,t,s){e.exports=s.p+"assets/authKey.82c7a3c6621aa4112a32c0ea0666160c.8.svg"},"./src/packages/issue/issue-view/src/views/common/issue-line-card/assets/server.svg":function(e,t,s){e.exports=s.p+"assets/server.5106affcbda64b0a9ff577fffabaa73a.8.svg"},"./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/page/dist/esm/Grid.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js");const l={columns:10},u={};t.a=({children:e,isCompact:t=!1,hasMultipleScrollingColumns:s})=>a.a.createElement(i.ThemeProvider,{theme:Object(o.isSideBySideLabelsAndFieldsEnabled)()?l:u},a.a.createElement(c.a,{isCompact:t,hasMultipleScrollingColumns:s},a.a.createElement(r.a,{spacing:"comfortable",layout:"fluid"},e)))},"./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const i=4*a.e,r=3*a.e,o=n.default.div(["> div{padding:0;margin:0;}",""],({hasMultipleScrollingColumns:e,isCompact:t})=>e?"\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        \n        > div {\n            flex-wrap: nowrap;\n            height: 100%;\n            /* targets Grid element of @atlaskit/page, which has align-items: flex-start by default */\n            align-items: initial;\n        }\n        ":`\n            padding-left: ${t?0:a.e/2}px;\n            /* Targets <GridColumn> element */\n            > div > div {\n                margin: 0;\n                max-width: 100%;\n            }\n        `)},"./src/packages/issue/issue-view/src/views/common/skeleton/skeleton-view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return S}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/page/dist/esm/GridColumn.js"),o=s("./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js"),c=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),l=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),u=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),d=s("./src/packages/issue/issue-view/src/feature-flags.js"),p=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),m=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),b=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),f=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),g=i.default.div(["position:relative;overflow:hidden;margin:0 -20px;border-left:20px solid ",";border-right:20px solid ",";"],f.a.N0,f.a.N0),h=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js");const y=()=>a.a.createElement(c.a,{paddingTop:10,paddingBottom:10},a.a.createElement(h.a,{fontSize:14,lineHeight:20,intrusion:60}),a.a.createElement(h.a,{fontSize:14,lineHeight:20,intrusion:20}),a.a.createElement(h.a,{fontSize:14,lineHeight:20,intrusion:180}));y.displayName="Description";var O=y;const j=e=>a.a.createElement(c.a,{paddingTop:8,paddingBottom:8},a.a.createElement(h.a,{fontSize:12,lineHeight:20,intrusion:e.labelIntrusion}),a.a.createElement(c.a,{paddingTop:10,paddingBottom:10},a.a.createElement(h.a,{fontSize:20,lineHeight:20,intrusion:e.fieldIntrusion})));j.displayName="Field";var E=j;const v=()=>a.a.createElement(c.a,{paddingTop:10,paddingBottom:10},a.a.createElement(h.a,{fontSize:20,lineHeight:24,intrusion:20}),a.a.createElement(h.a,{fontSize:20,lineHeight:24,intrusion:140}));v.displayName="Summary";var k=v;const w=i.default.div(["",""],({issueMaxWidth:e})=>void 0!==e?`\n        ${Object(p.c)("padding-left",e)}\n        ${Object(p.c)("padding-right",e)}\n    `:"");class S extends n.Component{static renderFieldSkeletons(){return a.a.createElement(c.a,{paddingTop:4,paddingBottom:16},a.a.createElement(E,{labelIntrusion:170,fieldIntrusion:20}),a.a.createElement(E,{labelIntrusion:120,fieldIntrusion:60}),a.a.createElement(E,{labelIntrusion:140,fieldIntrusion:40}))}static renderCompactSkeleton(){return a.a.createElement(r.a,null,a.a.createElement(g,null,a.a.createElement(k,null),S.renderFieldSkeletons(),a.a.createElement(O,null),a.a.createElement(o.a,null)))}static renderFullSizeSkeleton(){return[a.a.createElement(r.a,{key:"maincontent",medium:Object(d.isSideBySideLabelsAndFieldsEnabled)()?6:8},a.a.createElement(g,null,a.a.createElement(k,null),a.a.createElement(O,null),a.a.createElement(o.a,null))),a.a.createElement(r.a,{key:"secondarycontent",medium:4},a.a.createElement(g,null,S.renderFieldSkeletons()))]}render(){const{isCompact:e,issueMaxWidth:t}=this.props;return(a.a.createElement(w,{issueMaxWidth:t},a.a.createElement(m.a,{isCompact:e},a.a.createElement(u.a,null,a.a.createElement(l.b,null),e?S.renderCompactSkeleton():S.renderFullSizeSkeleton()))))}}S.displayName="Skeleton";t.b=Object(b.a)(S)},"./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["position:relative;"])},"./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.a=e=>t=>a.a.createElement(i.a,null,s=>a.a.createElement(e,r({},t,{isCompact:s})))},"./src/packages/issue/issue-view/src/views/common/with-profilecard-next/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/profilecard-next/src/async.js"),r=s("./src/packages/platform/controllers/tenant-context/src/components/index.js");t.a=e=>{const t=(e=>e&&(e.accountId||e.id||e.value))(e.userAccount);return t?a.a.createElement(i.a,{TenantContextSubscriber:r.b,accountId:t,analyticsData:e.analyticsData,position:e.position,actions:e.actions},e.children):e.children}},"./src/packages/issue/issue-view/src/views/connect-field.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return k}));var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),r=s("./node_modules/uuid/index.js"),o=s.n(r),c=s("./node_modules/@atlaskit/analytics-next/dist/esm/withAnalyticsEvents.js"),l=s("./node_modules/@atlaskit/analytics-next/dist/esm/withAnalyticsContext.js"),u=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),f=s("./src/packages/issue/issue-view/src/drafts/draft-actions.js"),g=s("./src/packages/issue/issue-view/src/feature-flags.js"),h=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),y=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js");function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const v=Object(n.defineMessages)({defaultFallbackInvalidMessage:{id:"issue.field.default-fallback-invalid-message",defaultMessage:"The value could not be saved"}}),k={transformFromStateValue:(e,t,s)=>e,transformToStateValue:e=>e,fallbackInvalidMessage:e=>e.formatMessage(v.defaultFallbackInvalidMessage),additionalProps:(e,t)=>({}),additionalCallbacks:e=>({}),isOptimistic:!0,canContainMediaContent:!1,shouldSaveDraft:!1,saveField:({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n,fieldEditSessionId:a})=>{const i=a?`${e}/rest/api/2/issue/${t}?fieldEditSessionId=${a}`:`${e}/rest/api/2/issue/${t}`;return Object(u.e)(i,{body:JSON.stringify({fields:{[s]:n}})})},shouldDiscardChangeOnFailure:!1,onSaveFailureFlagType:null,onSaveSuccessFlagType:null,fieldId:""},w=(e,t,s,n)=>({baseUrl:e,projectKey:t,issueKey:s,fieldId:n});t.a=(e=>(t,s)=>r=>{const u=(e=>({mapStateToProps:(t,s)=>{const n=e(t,s),a=j(j({},k),n),{fieldId:r,transformFromStateValue:o,transformToStateValue:c,fallbackInvalidMessage:l,additionalProps:u,additionalCallbacks:b,isOptimistic:f,canContainMediaContent:g,saveField:h,shouldDiscardChangeOnFailure:y,shouldSaveDraft:O,onSaveFailureFlagType:E,onSaveSuccessFlagType:v}=a,S={isRichTextField:Object(p.G)(r)(t),isOptimistic:f,canContainMediaContent:g,saveField:h,shouldDiscardChangeOnFailure:y,shouldSaveDraft:O,onSaveFailureFlagType:E,onSaveSuccessFlagType:v},I=Object(i.a)(w),C=Object(i.a)(c),T=Object(i.a)(o);return(e,t)=>j({fieldId:r,fieldOptions:S,memoizedTransformToStateValue:C,additionalCallbacks:b,label:Object(p.m)(r)(e),isEditable:Object(p.A)(r)(e)&&"PREVIEW"!==Object(m.w)(e),isEditing:Object(p.B)(r)(e),fieldEditSessionId:Object(p.f)(r)(e),invalidMessage:Object(p.j)(r,l(t.intl))(e),customFieldConfig:Object(p.p)(r)(e),value:T(Object(p.h)(r)(e),I(Object(d.g)(e),Object(d.I)(e),Object(d.B)(e),r),t.intl),isWaiting:!f&&Object(p.D)(r)(e),isMobile:Object(d.u)(e)},u(e,t.intl))},mapDispatchToProps:e=>({initFieldOptions:({fieldId:t,fieldOptions:s})=>()=>e(Object(h.f)(t,s)),onEditRequest:({fieldId:t,fieldOptions:s})=>(...n)=>{if(Object(g.isShortcutMenuEnabled)()){const a=n.length?n[n.length-1]:void 0;e(Object(h.b)(t,s,o.a.v4(),a))}else e(Object(h.b)(t,s,o.a.v4()))},onChange:({fieldId:t,fieldOptions:s,memoizedTransformToStateValue:n})=>a=>e(Object(h.e)(t,n(a),s)),onConfirm:({fieldId:t,fieldOptions:s,analyticsAttributeIdRetriever:n})=>(...a)=>{const i=a.length>1?a[0]:void 0,r=a.length?a[a.length-1]:void 0;return e(Object(h.d)(t,s,i,r,n))},onBlur:({fieldId:t,fieldOptions:s})=>()=>e(Object(h.c)(t,s)),onCancel:({fieldId:t,fieldOptions:s})=>()=>{e(Object(h.c)(t,s)),e(Object(f.b)({fieldId:t}))},onPaste:({fieldId:t,fieldOptions:s})=>n=>e(Object(h.g)(t,s,n)),getAdditionalCallbacks:({additionalCallbacks:t})=>t(e)}),mergeStateAndDispatchProps:(e,t)=>{const s=Object.keys(t).reduce((s,n)=>(s[n]=t[n](e),s),{}),n=t.getAdditionalCallbacks(e);return j(j(j({},e),s),n)}}))(t);return Object(b.a)([Object(c.a)({onConfirm:{action:"updated"},onEditRequest:{action:"updateStarted"}}),Object(l.a)({componentName:"issueFields",actionSubject:e}),Object(a.b)(u.mapStateToProps,u.mapDispatchToProps,u.mergeStateAndDispatchProps),n.injectIntl],s)(Object(y.b)()(r))})("issueFields")},"./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const n=(e,t)=>"string"==typeof e&&e.toLowerCase().includes(t),a=(e,t)=>{if(e.data&&!0===e.data.__isNew__)return!0;const s=t.trim().toLowerCase();return!!n(e.label,s)||!(!e.data||!e.data.filterValues)&&e.data.filterValues.some(e=>n(e,s))}},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return re}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/rxjs/Rx.js"),o=s("./node_modules/lodash/noop.js"),c=s.n(o),l=s("./node_modules/@atlaskit/form--current/dist/esm/Messages.js"),u=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcut-scope.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/picker/base/messages.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),f=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),g=s("./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js"),h=Object(i.defineMessages)({empty:{id:"issue.views.field.select.empty",defaultMessage:"No matches found"},failedFetch:{id:"issue.views.field.select.failed-fetch",defaultMessage:"Search failed."},reloadIssue:{id:"issue.views.field.select.reload-issue",defaultMessage:"Try reloading the issue."}}),y=s("./node_modules/uuid/index.js"),O=s.n(y),j=s("./node_modules/@atlaskit/select/dist/esm/CreatableSelect.js"),E=s("./src/packages/platform/observability/analytics-legacy-gasv2-utils/src/hash-attribute.js"),v=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),k=s("./node_modules/@atlaskit/analytics-next/dist/esm/withAnalyticsEvents.js"),w=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),S=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),I=s("./src/packages/issue/issue-view/src/feature-flags.js"),C=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),T=s("./node_modules/lodash/flatMap.js"),P=s.n(T);const _=e=>P()(e.map(e=>(e=>void 0!==e.options)(e)&&e.options?e.options:e)),x=e=>null==e?[]:Array.isArray(e)?e:[e],D=(e,t=!1)=>t?e.toString():Object(E.a)(e.toString()).toString(),A=(e,t=!1)=>e.filter(e=>e.value).map(({value:e})=>D(e,t)),M=e=>{const t=e.map(({id:e})=>e||null);return t.every(e=>null===e)?[]:t},L=e=>e.filter(e=>e.value).map(({value:e})=>null!=e?`${e}`.length:0);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const U=Object(C.a)(e=>({label:e(""),isDisabled:!0,isAkSelectOption:!0})),F=Object(C.a)(e=>({label:e(""),isDisabled:!0,isAkSelectOption:!0})),V=Object(C.a)((e,t,s,n)=>!0===e?[...t,s,n]:t);class K extends n.Component{constructor(...e){super(...e),this.formatCreateLabel=e=>{const{footer:t,formatCreateLabel:s}=this.props;return void 0===t?s?s(e):e:"function"==typeof t?t(e):t},this.getShouldShowFooter=()=>{const{footer:e,shouldShowFooter:t}=this.props;return!!e&&t},this.isOptionShownInDropdown=(e,t)=>{const{filterOption:s,noOptionsMessage:n,loadingMessage:a,value:i}=this.props;return(s(e,t)&&e.label!==n("")&&e.label!==a("")&&!x(i).find(t=>t.value===e.value))},this.filterOptionWithFooterAndShowNoOptionsMessage=(e,t)=>{const{filterOption:s,options:n,isLoading:a,noOptionsMessage:i,loadingMessage:r}=this.props;return e.label===i("")?!0!==a&&!_(n).some(e=>this.isOptionShownInDropdown(e,t)):e.label===r("")?!0===a&&!_(n).some(e=>this.isOptionShownInDropdown(e,t)):s(e,t)}}render(){const e=this.props,{footer:t,onFooterSelect:s,options:n,noOptionsMessage:i,loadingMessage:r,filterOption:o}=e,c=N(e,["footer","onFooterSelect","options","noOptionsMessage","loadingMessage","filterOption"]),l=this.getShouldShowFooter(),u=F(i),d=U(r),p=V(l,n,u,d);return a.a.createElement(j.a,R({},c,{options:p,formatCreateLabel:this.formatCreateLabel,isValidNewOption:this.getShouldShowFooter,onCreateOption:s,filterOption:!0===l?this.filterOptionWithFooterAndShowNoOptionsMessage:o,loadingMessage:r,noOptionsMessage:i,allowCreateWhileLoading:!0}))}}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function W(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function H(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function G(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?H(Object(s),!0).forEach((function(t){$(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}K.displayName="SelectWithFooter",K.defaultProps={shouldShowFooter:!0};const q={onChange:"valueChanged",onInputChange:"inputChanged",onMenuOpen:"menuOpened",onMenuClose:"menuClosed"},z=Object(v.a)("select",q)(K),Y=Object(v.a)("select",q)(j.a),Q={action:"fake-action"};class J extends n.Component{constructor(e){super(e),this.getDefaultAnalyticsAttributes=e=>{const{fieldId:t,value:s,isLoading:n,optionValuesSafeForAnalytics:a}=this.props,i={queryLength:e.length,queryHash:""===e?e:Object(E.a)(e)},r=x(s),o=((e,t)=>e.filter(e=>"string"==typeof e.value&&e.value.toLowerCase().includes((t||"").toLowerCase())||"string"==typeof e.label&&e.label.toLowerCase().includes((t||"").toLowerCase())))(this.flatOptions,e),c=A(o,a);return G(G({fieldId:t,componentName:"select",packageName:"@atlaskit/select",options:c,optionsLength:c.length,optionsLengths:L(o),optionIds:M(o),selectedOptions:A(r,a),selectedOptionsLengths:L(r),selectedOptionIds:M(r),sessionId:this.sessionId,isLoading:n},i),{},{optionValuesSafeForAnalytics:a},Object(I.isRemoteIssueLinksEnabled)()?this.props.additionalAnalyticsProps:{})},this.getItemOrder=e=>{const t=[];return this.flatOptions.forEach((s,n)=>{const a=s.filterValues||[];(s.value===e.value||a.includes(e.value))&&t.push(n)}),t.length>0?t[0]:-1},this.startSession=()=>{this.sessionId=O.a.v4(),this.sessionStartedAt=w.default.now(),this.fireTrackAnalyticsEvent(this.props.createAnalyticsEvent({action:"started"}),"started","optionSelectionSession")},this.endSession=()=>{if(this.sessionId){const e=this.sessionStartedAt?w.default.now()-this.sessionStartedAt:0;this.fireTrackAnalyticsEvent(this.props.createAnalyticsEvent({action:"ended"}),"ended","optionSelectionSession",G({elapsedTime:e},this.props.additionalAnalyticsProps))}this.sessionStartedAt=0,this.sessionId=void 0},this.flatOptions=[],this.sessionId=void 0,this.queryAtSetValue="",this.query="",this.sessionStartedAt=0,this.isOpened=!1,this.fireOptionsLoadedEvent=e=>{e.update({action:"loaded",actionSubject:"options"}),this.fireAnalyticsEvent(e,this.query)},this.fireInputChangedEvent=(e,t,s)=>("set-value"===t.action&&(this.queryAtSetValue=this.query),this.query=e,s.update({action:"changed",actionSubject:"filter"}),this.fireAnalyticsEvent(s,this.query),this.sessionId),this.restartSession=()=>{this.endSession(),this.props.menuIsOpen&&(this.isOpened=!0,this.startSession())},this.fireOptionCreatedEvent=(e,t)=>{t.update({action:"created",actionSubject:"option"});const s=this.sessionId;this.restartSession(),this.fireAnalyticsEvent(t,this.queryAtSetValue,{selectedOption:D(e.value,this.props.optionValuesSafeForAnalytics),sessionId:s})},this.fireOptionRemovedEvent=(e,t)=>{t.update({action:"removed",actionSubject:"option"}),this.fireAnalyticsEvent(t,this.query,{removedItem:e?D(e.value,this.props.optionValuesSafeForAnalytics):void 0})},this.fireOptionSelectedEvent=(e,t)=>{t.update({action:"changed",actionSubject:"option"});const s=this.sessionId;this.restartSession(),this.fireAnalyticsEvent(t,this.queryAtSetValue,{selectedOrder:this.getItemOrder(e),selectedOption:D(e.value,this.props.optionValuesSafeForAnalytics),sessionId:s})},this.fireOpenChangedEvent=(e,t)=>{e.isOpen&&!this.isOpened&&this.startSession(),this.isOpened=e.isOpen,t.update({action:e.isOpen?"opened":"closed",actionSubject:"optionSelect",attributes:this.getDefaultAnalyticsAttributes(this.query)}),this.fireAnalyticsEvent(t,this.query)},this.onChange=(e,t,s)=>{const n=Array.isArray(e)?e[e.length-1]:e,a=this.sessionId;switch(t.action){case"create-option":null!==n&&this.fireOptionCreatedEvent(n,s);break;case"remove-value":case"pop-value":case"deselect-option":this.fireOptionRemovedEvent(t.removedValue||t.option,s);break;case"select-option":null!==n&&this.fireOptionSelectedEvent(n,s)}this.props.onChange&&this.props.onChange(e,t,a)},this.onInputChange=(e,t,s)=>{const{onInputChange:n}=this.props;"input-change"!==t.action&&"set-value"!==t.action||this.fireInputChangedEvent(e,t,s),n(e,t,this.sessionId)},this.onMenuOpen=e=>{this.fireOpenChangedEvent({isOpen:!0},e);const{onMenuOpen:t}=this.props;t&&t(e)},this.onMenuClose=e=>{this.fireOpenChangedEvent({isOpen:!1},e);const{onMenuClose:t}=this.props;t&&t(e)},this.onFocus=e=>{this.props.onFocus(e,this.sessionId)},this.flatOptions=_(this.props.options),this.isOpened=e.menuIsOpen,this.isOpened&&(this.startSession(),this.fireInputChangedEvent("",Q,this.props.createAnalyticsEvent({})))}componentDidUpdate(e){this.props.options!==e.options&&(this.flatOptions=_(this.props.options),this.fireOptionsLoadedEvent(this.props.createAnalyticsEvent()))}componentWillUnmount(){this.endSession()}fireAnalyticsEvent(e,t,s={}){const n=G(G({},this.getDefaultAnalyticsAttributes(t)),s);Object(S.h)(e,n)}fireTrackAnalyticsEvent(e,t,s,n){const a=G(G({},this.getDefaultAnalyticsAttributes(this.query)),n);Object(S.f)(e,`${s} ${t}`,a)}render(){const e=this.props,{canCreateNewItem:t,createAnalyticsEvent:s}=e,n=W(e,["canCreateNewItem","createAnalyticsEvent"]),i=t?Y:z;return a.a.createElement(i,B({},n,{onFocus:this.onFocus,onChange:this.onChange,onInputChange:this.onInputChange,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose}))}}J.displayName="SelectWithAnalyticsView",J.defaultProps={isLoading:!1,createAnalyticsEvent:c.a,optionValuesSafeForAnalytics:!1,onChange:c.a,onInputChange:c.a,onMenuOpen:c.a,onMenuClose:c.a};var Z=Object(k.a)()(J),X=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js"),ee=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js");function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function se(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ne(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ae(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(s),!0).forEach((function(t){ie(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ne(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ie(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const re={hideSelectedOptions:!0,allowCreateWhileLoading:!0,filterOption:g.a},oe=e=>ae({label:e.content},e),ce=(e,t)=>{const{label:s,filterValues:n}=e,a=ae({},se(e,["label","filterValues"]));return"create-option"===t.action&&void 0===a.content&&(a.content=e.label),a};class le extends n.Component{constructor(e){var t;super(e),this.onFocus=(e,t)=>{this.query$.next({query:"",sessionId:t,isImmediate:!0})},this.onChange=(e,t,s)=>{const{onChange:n,onChangeMulti:a,isMulti:i}=this.props;if(i){if(!a)return;this.query$.next({query:this.query||"",sessionId:s,isImmediate:!0}),a(Array.isArray(e)?e.map(e=>ce(e,t)):[],t)}else{if(!n||Array.isArray(e))return;n(e&&ce(e,t),t)}},this.onInputChange=(e,t,s)=>{if("input-change"!==t.action&&"set-value"!==t.action)return;let n=e;this.props.changeQueryValue&&(n=this.props.changeQueryValue(n)),this.query=n,"input-change"===t.action&&(this.setState({isLoading:!0}),this.query$.next({query:n,sessionId:s})),this.props.onInputChange&&this.props.onInputChange(n,t)},this.formatOptionLabel=(e,t)=>void 0!==this.props.formatOptionLabel?this.props.formatOptionLabel(e,t):e.iconUrl?a.a.createElement(X.e,null,a.a.createElement(X.d,null,a.a.createElement("img",{src:e.iconUrl,alt:"",width:2*m.e,height:2*m.e,role:"none"})),a.a.createElement(X.c,null,e.label)):e.label,this.transformItems=e=>e&&e.length>0?e.map(oe):[],this.transformToOptions=e=>1!==e.length||e[0].heading?e.map(e=>{const t=this.transformItems(e.items);return void 0!==e.heading?{label:e.heading,options:t}:{options:t}}):this.transformItems(e[0].items),this.subscription=void 0,this.query$=void 0,this.query=null,this.getFailedFetchMessage=()=>a.a.createElement(X.b,null,a.a.createElement("span",null,this.props.intl.formatMessage(h.failedFetch)," ",a.a.createElement("a",{role:"button",href:window.location.href,onClick:()=>window.location.reload()},this.props.intl.formatMessage(h.reloadIssue)))),this.noOptionsMessageDefault=()=>this.props.intl.formatMessage(h.empty),this.loadingMessageDefault=()=>this.props.intl.formatMessage(p.a.loading),this.filterOption=e=>!!this.state.hasLastFetchFailed||this.props.filterOption&&this.props.filterOption(e,this.query||""),this.renderSelectField=()=>{const e=this.props,{placeholder:t="",noOptionsMessage:s=this.noOptionsMessageDefault,loadingMessage:n=this.loadingMessageDefault,fieldId:i,onChangeMulti:r,invalidMessage:o,isOpen:c,hasAutocomplete:l,portalElement:u,intl:d,fetchSuggestions:p,additionalAnalyticsProps:m,debounceFetchSuggestionsTime:b,changeQueryValue:f,errorMessagePosition:g}=e,h=se(e,["placeholder","noOptionsMessage","loadingMessage","fieldId","onChangeMulti","invalidMessage","isOpen","hasAutocomplete","portalElement","intl","fetchSuggestions","additionalAnalyticsProps","debounceFetchSuggestionsTime","changeQueryValue","errorMessagePosition"]),y=o?"error":void 0;return a.a.createElement(Z,te({},re,h,{filterOption:this.filterOption,key:i,fieldId:i,options:this.state.options,value:this.getSelectedValue(),styles:Object(ee.a)(X.f,X.g,this.props.styles),additionalAnalyticsProps:m,isLoading:this.state.isLoading,isSearchable:l,menuIsOpen:c,menuPortalTarget:u,menuPlacement:"auto",placeholder:t,noOptionsMessage:s,loadingMessage:n,validationState:y,formatOptionLabel:this.formatOptionLabel,onChange:this.onChange,onFocus:this.onFocus,onInputChange:this.onInputChange}))},this.renderErrorMessage=()=>{const{invalidMessage:e,fieldId:t,errorMessagePosition:s}=this.props;return e?a.a.createElement(X.a,{key:`${t}-error-message`,errorMessagePosition:s},a.a.createElement(l.a,null,e)):null};const{onDataRequest:s,onDataLoaded:n,fetchSuggestions:i,debounceFetchSuggestionsTime:o,additionalAnalyticsProps:c}=this.props;if(this.query$=new r.Subject,this.subscription=this.query$.debounce(({isImmediate:e})=>e?r.Observable.empty():r.Observable.timer(o||0)).switchMap(({query:e,sessionId:t})=>(s&&s({isInitial:null===this.query}),this.setState({isLoading:!0}),i(e,t||void 0).then(e=>(this.setState({hasLastFetchFailed:!1}),e)).catch(e=>(b.i.safeError("issue.select.transform-suggestions","Could not fetch or transform suggestions to display in select",new u.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),c&&b.i.safeError("issue.select.fetch-transform-suggestions.details","Could not fetch or transform retrieved data",ae(ae({},c),{},{message:e.message})),Object(f.a)({meta:{id:"issueSelectFetchFailure",packageName:"jiraIssueView"},error:e,attributes:ae({},null!=c?c:{})}),this.setState({hasLastFetchFailed:!0}),[{items:[{content:this.getFailedFetchMessage(),value:"",isDisabled:!0}]}])))).subscribe(e=>{this.setState({options:this.transformToOptions(e),isLoading:!1}),n&&n({isInitial:null===this.query})}),null===(t=this.props.initialData)||void 0===t?void 0:t.data){const{data:e,loading:t,error:s}=this.props.initialData;this.state={options:this.transformToOptions(e),isLoading:t,hasLastFetchFailed:s}}else this.state={options:[],isLoading:!0,hasLastFetchFailed:!1}}componentDidUpdate(e){var t,s;if((null===(t=this.props.initialData)||void 0===t?void 0:t.data)&&(null===(s=e.initialData)||void 0===s?void 0:s.data)){const{loading:t,error:s,data:n}=this.props.initialData;t===e.initialData.loading&&s===e.initialData.error||this.setState({options:this.transformToOptions(n),isLoading:t,hasLastFetchFailed:s})}}componentWillUnmount(){this.subscription.unsubscribe()}getSelectedValue(){const{value:e}=this.props;return e?Array.isArray(e)?e.map(oe):oe(e):null}render(){const{errorMessagePosition:e}=this.props,t=[this.renderSelectField()];return"top"===e?t.unshift(this.renderErrorMessage()):t.push(this.renderErrorMessage()),a.a.createElement(d.a,null,a.a.createElement(a.a.Fragment,null,t))}}le.displayName="SelectFieldView",le.displayName="SelectFieldView",le.defaultProps={isMulti:!1,canCreateNewItem:!1,value:null,placeholder:void 0,autoFocus:!1,debounceFetchSuggestionsTime:0,filterOption:re.filterOption,errorMessagePosition:"top",optionValuesSafeForAnalytics:!1,onChangeMulti:c.a,onChange:c.a,onInputChange:c.a};t.a=Object(i.injectIntl)(le)},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return d})),s.d(t,"g",(function(){return b})),s.d(t,"e",(function(){return f})),s.d(t,"b",(function(){return g})),s.d(t,"d",(function(){return h})),s.d(t,"c",(function(){return y})),s.d(t,"a",(function(){return O}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/picker/base/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d={multiValue:e=>l(l({},e),{},{backgroundColor:a.a.N20}),option:(e,t)=>l(l(l(l({},e),Object(i.c)(t)),{},{cursor:"pointer"},t.isFocused&&!t.isSelected?{backgroundColor:a.a.N20}:{}),{},{"&:hover":l(l({},t.isSelected?{}:{backgroundColor:a.a.N20}),t.isDisabled?{backgroundColor:"transparent",cursor:"not-allowed"}:{})}),menu:e=>l(l({},e),{},{zIndex:r.f.modal}),menuPortal:e=>l(l({},e),{},{transform:"translateZ(0)"})},p=`${r.e/4}px`,m=`${r.e/2}px`,b={indicatorsContainer:e=>l(l({},e),{},{paddingRight:`${r.e/2}px`}),loadingIndicator:e=>l(l({},e),{},{paddingLeft:p,paddingRight:m}),clearIndicator:e=>l(l({},e),{},{paddingLeft:p,paddingRight:m}),dropdownIndicator:e=>l(l({},e),{},{display:"none"})},f=n.default.span(["display:flex;align-items:center;"]),g=Object(n.default)(f)(["justify-content:center;"]),h=n.default.span(["display:flex;padding-right:","px;"],r.e),y=n.default.span(["display:flex;"]),O=n.default.div(["",";",""],e=>"top"===e.errorMessagePosition?`margin-bottom: ${.75*r.e}px;`:"",()=>Object(o.isSideBySideLabelsAndFieldsEnabled)()?"\n        &&& > div {\n            min-height: auto;\n        }\n    ":"")},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return i}));const i=(e,...t)=>{const s=e||{};if(0===t.length)return s;const i=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},s);return t.forEach(e=>{e&&Object.keys(e).forEach(t=>{const s=i[t],n=e[t];i[t]=s?(e,...t)=>n(s(e,...t),...t):n})}),i}},"./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg":function(e,t,s){e.exports=s.p+"assets/default-avatar.b7f1021e538053b2b6f8108284f2ffc4.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/common/animations/classy-animator.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["position:absolute;right:0;top:0;width:","px;",";transition:",";overflow:hidden;opacity:",";visibility:",";"],e=>e.show?e.width:0,e=>null!=e.height?`height: ${e.height}px`:"",e=>e.show?"width 0.5s cubic-bezier(0.15, 1, 0.3, 1)":"width 0.5s cubic-bezier(0.15, 1, 0.3, 1), opacity 0, 0.5s, visibility 0, 0.5s",e=>e.show?1:0,e=>e.show?"visible":"hidden"),o=Object(n.forwardRef)((e,t)=>a.a.createElement(r,i({innerRef:t},e),e.children));t.a=o},"./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/product-requirements/state/store.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return p}));var n=s("./node_modules/react-sweet-state/lib/esm/index.js"),a=s("./src/packages/issue/issue-view/src/feature-flags.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),r=async(e,t,s)=>{const n=await(async(e,t)=>{const s=await Object(i.a)(`/wiki/rest/create-dialog/1.0/blueprints/web-items?spaceKey=${e}`),[n]=s.filter(e=>e.blueprintModuleCompleteKey===t);if(!n)throw new Error("Blueprint not found");return n})(e,t);return Object(i.a)(`/wiki/rest/create-dialog/1.0/content/blueprint/${t}/instance`,{method:"POST",body:JSON.stringify({content:{type:"page",title:s,status:"draft",space:{key:e}},contentBlueprintSpec:{context:{spaceKey:e,parentPageId:null},blueprintId:n.contentBlueprintId}})})},o=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),c=s("./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/product-requirements/state/types.js");var l={createPage:(e,t,s)=>async({setState:n})=>{n({error:null,loading:!0,data:null});let l,u=c.a.CREATE_DRAFT,d={};const p=`${t} - Product Requirements`;try{if(Object(a.isPageAlreadyCreatedFlagEnabled)()){u=c.a.FETCH_EXISTING_PAGE;const t=await(async e=>Object(i.a)(`/wiki/rest/api/search?cql=${e}`))(`space="${e}" AND title="${p}"`);if(t.results.length){const e=t.results[0];return void n({error:c.a.PAGE_ALREADY_EXISTS,loading:!1,data:t._links.base+e.url})}}d=await r(e,"com.atlassian.confluence.plugins.confluence-software-blueprints:requirements-blueprint",p),u=c.a.PUBLISH_DRAFT,l=await(e=>Object(i.a)(`/wiki/rest/api/content/blueprint/instance/${e.content.id}`,{method:"PUT",body:JSON.stringify({version:{number:e.content.version.number},title:e.content.title,type:"page",status:"current",space:{key:e.content.space.key}})}))(d);const t=(e=>null!=e._links.base?e._links.base+e._links.webui:"")(l);u=c.a.LINK_PAGE_TO_ISSUE,await((e,t)=>Object(i.a)(`/rest/confluenceIssueLink/1/confluence?issueId=${encodeURIComponent(e)}&pageUrl=${encodeURIComponent(t)}`,{method:"POST"}))(s,t),n({error:null,loading:!1,data:d._links.base+d.content._links.editui})}catch(e){(async e=>{Object(o.a)(`/wiki/rest/api/content/${e.id}?status=${e.status}`)})(l||d.content),n({loading:!1,error:u,data:null})}}};const u=Object(n.d)({initialState:{loading:!1,error:null,data:null},actions:l,name:"confluence-pages-product-requirements-is-loading-controller"}),d=Object(n.c)(u),p=Object(n.b)(u)},"./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/product-requirements/state/types.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={FETCH_EXISTING_PAGE:"fetchExistingPage",PAGE_ALREADY_EXISTS:"pageAlreadyExists",FETCH_BLUEPRINT:"fetchBlueprint",CREATE_DRAFT:"createDraft",PUBLISH_DRAFT:"publishDraft",LINK_PAGE_TO_ISSUE:"linkPageToIssue"}},"./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["height:46px;"])},"./src/packages/issue/issue-view/src/views/issue-base/context/context-items/common/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return d}));var n=s("./src/packages/development/summary-legacy/src/dev-panel/messages.js"),a=s("./src/packages/issue/issue-view/src/feature-flags.js");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=(e,t,s)=>e.reduce((e,i)=>{const{payload:r}=i;if("TAB"===i.type&&r&&r.tabId){const s=t[r.tabId];s&&e.push(s.name)}return r&&r.fieldId&&s[r.fieldId]?e.push(s[r.fieldId].title):Object(a.isDevPanelItemDisplayEnabled)()&&r&&"devSummary"===r.itemId&&e.push(n.a.label),e},[]),l=(e,t)=>{if(!e||e.length<=0)return"";if(1===e.length)return e[0];const s=e.slice(-1)[0];return`${e.slice(0,-1).join(", ")} ${t} ${s}`},u=e=>(null==e?void 0:e.fieldId)||(null==e?void 0:e.itemId)||(null==e?void 0:e.tabId),d=e=>{const{pinnedFields:t,visibleSecondaryContextItems:s,layoutDescriptor:n}=e,{primaryContextItems:a,secondaryContextItems:i}=n.context,o=new Set(t),c=a.filter(({payload:e})=>!o.has(u(e))),l=i.filter(({payload:e})=>!o.has(u(e))),d=s.filter(({payload:e})=>!o.has(u(e)));return{layoutDescriptor:r(r({},n),{},{context:{secondaryContextItems:l,primaryContextItems:c}}),visibleSecondaryContextItems:d}}},"./src/packages/issue/issue-view/src/views/issue-base/context/context-items/view/expander/show-more-button/view.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),o=s.n(r),c=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),l=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),d=s("./src/packages/issue/issue-view/src/views/issue-base/context/context-items/common/utils.js"),p=Object(i.defineMessages)({showMorePlural:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-plural",defaultMessage:"Show {fieldCount} more fields"},showMoreNotPlural:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-not-plural",defaultMessage:"Show {fieldCount} more field"},showMoreAnd:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-and",defaultMessage:"and"},showMoreAltText:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-alt-text",defaultMessage:"Show more"}}),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const g=m.default.small(["display:block;margin-top:","px;margin-bottom:","px;text-overflow:ellipsis;overflow:hidden;color:",";font-size:","px;line-height:",";"],-f.e/2,f.e/2,c.a.N200,1.5*f.e,f.e/6),h=Object(m.default)(b.a)(["& > span{color:",";& > span:first-child{align-self:auto;margin-left:","px;margin-right:","px;}}&&,&:hover,&:focus{height:inherit;text-align:left;}"],c.a.B400,-f.e,-f.e/2);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const O=({visibleSecondaryContextItemNameList:e,fieldCount:t,onExpand:s,intl:n})=>{const r=t>1?p.showMorePlural:p.showMoreNotPlural,m=Object(d.b)(e.map(e=>"object"==typeof e&&null!=e?n.formatMessage(e):e),n.formatMessage(p.showMoreAnd));return a.a.createElement(l.a,{content:m},a.a.createElement(h,{externalId:"showmorelink.expand",appearance:"subtle",iconBefore:a.a.createElement(o.a,{label:"",primaryColor:c.a.B400,size:"large"}),alt:n.formatMessage(p.showMoreAltText),shouldFitContainer:!0,onClick:(e,t)=>{s(),Object(u.h)(t,"showMore")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-more-button.container"},a.a.createElement(i.FormattedMessage,y({},r,{values:{fieldCount:t}})),a.a.createElement(g,null,m)))};O.displayName="ShowMoreButton";t.a=Object(i.injectIntl)(O)},"./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"c",(function(){return l}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js").b,o=n.default.div(["width:inherit;height:inherit;opacity:1;background-color:",";display:flex;flex-direction:column;position:fixed;overflow:hidden;",";"],a.a.N0,({top:e})=>null!=e&&`top: ${e}px;`),c=n.default.div(["display:flex;flex-direction:column;height:100%;padding-left:","px;"],r),l=n.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;height:30px;margin:","px ","px 0;"],i.e,i.e)},"./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/view.js":function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),l=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-inner-height/index.js"),u=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js"),d=s("./src/packages/issue/issue-view/src/views/issue-base/common/animations/classy-animator.js"),p=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js");class m extends n.Component{constructor(t){super(t),this.state={styles:{panelWidth:0,headerWidth:0,contentWidth:0,contextWidth:0,panelTop:0,panelHeight:0}},this.refFixedPanel=void 0,this.refPanelPositioner=void 0,this.scrollContainerCached=null,this.scrollContainerResizeObserver=e&&e.ResizeObserver?new window.ResizeObserver(()=>{requestAnimationFrame(()=>{this.updateSidePanelStyles()})}):null,this.getMemoizedStyles=Object(i.a)((e,t,s,n,a,i)=>({panelWidth:e,panelTop:t,panelHeight:s,headerWidth:n,contentWidth:a,contextWidth:i})),this.currentPosition={panelWidth:void 0,headerWidth:void 0,contentWidth:void 0,contextWidth:void 0,panelTop:void 0,panelHeight:void 0},this.updateSidePanelStyles=()=>{if(!this.props||!this.props.isOpen)return;const{refs:e}=this.props,t=document.getElementById("jira-issue-header-actions"),s=e.refPanelColumnElement,n=s&&getComputedStyle(s),a=(e=>e.refVisibilityContainer?e.refVisibilityContainer.offsetWidth:void 0)(e),i=((e,t)=>{const s=e.refPanelColumnElement;if(s&&t)return s.offsetWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)})(e,n),r=((e,t)=>e?e.offsetWidth:t||0+p.d)(t,i),o=this.calculateSidePanelPosition(),c=((e,t)=>{const s=e.refSidePanelContainerElement;return s&&s instanceof HTMLElement?s.offsetWidth+p.d-(t?parseFloat(t.paddingLeft):0):0})(e,n),l=o&&o.panelTop?o.panelTop:void 0,u=o&&o.panelHeight?o.panelHeight:void 0,d=this.getMemoizedStyles(c,l,u,r,i,a);d!==this.state.styles&&(this.setState({styles:d}),this.setSidePanelPosition(o))},this.getGlanceOffsetTop=e=>{if(!e)return;const t=e.getBoundingClientRect().top;let s=4;const n=document.getElementById("jira-issue-header-actions")||document.getElementById("jira-issue-header");if(n&&e.contains(n)){const e=this.props.refs.refLayoutContainer,a=e?e.getBoundingClientRect().top:0,i=n.getBoundingClientRect();s=(i&&i.bottom<0?a+i.height:i.bottom)+4-t}return s=Math.max(s,4),s},this.setSidePanelPosition=e=>{if(!e)return;const{panelTop:t,panelHeight:s}=e;this.currentPosition.panelTop!==t&&this.refFixedPanel.current&&(this.currentPosition.panelTop=t,this.refFixedPanel.current.style.top=null!=t?`${t}px`:""),this.currentPosition.panelHeight!==s&&this.refPanelPositioner.current&&(this.currentPosition.panelHeight=s,this.refPanelPositioner.current.style.height=null!=s?`${s}px`:"")},this.calculateSidePanelPosition=()=>{const e=this.getScrollContainer(),t=Object(l.a)(e);if(null===e||null===t)return;const s=Math.min(window.innerHeight,t||0),n=this.getGlanceOffsetTop(e)||0,a=n+e.getBoundingClientRect().top,i=Math.max(s-a,s-n);return i<=0&&c.i.safeError("issue.views.issue-base.context.side-panel",`panel height is <= 0: panelHeight='${i}`,new r.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),{panelTop:a,panelHeight:i<0?void 0:i}},this.updateSidePanelPosition=()=>{this.props.isOpen&&requestAnimationFrame(()=>{const e=this.calculateSidePanelPosition();this.setSidePanelPosition(e)})},this.refPanelPositioner=Object(n.createRef)(),this.refFixedPanel=Object(n.createRef)()}componentDidMount(){this.updateSidePanelStyles(),this.attachSidePanelListeners(),this.props&&this.props.refs&&this.scrollContainerResizeObserver&&(this.props.refs.refLayoutContainer&&this.scrollContainerResizeObserver.observe(this.props.refs.refLayoutContainer),this.props.refs.refPanelColumnElement&&this.scrollContainerResizeObserver.observe(this.props.refs.refPanelColumnElement))}componentDidUpdate(e){if(this.props.isOpen&&this.props.isOpen!==e.isOpen&&this.updateSidePanelStyles(),this.scrollContainerResizeObserver){const{refs:{refPanelColumnElement:t,refLayoutContainer:s}}=this.props,{refs:{refPanelColumnElement:n,refLayoutContainer:a}}=e;t&&this.scrollContainerResizeObserver.observe(t),s&&this.scrollContainerResizeObserver.observe(s),t===n&&s===a||(n&&this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.unobserve(n),a&&this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.unobserve(a),this.detachSidePanelListeners(),this.updateSidePanelPosition(),this.attachSidePanelListeners())}}componentWillUnmount(){this.detachSidePanelListeners(),this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.disconnect()}getScrollContainer(){return this.props.refs.refSidePanelContainerElement?this.props.refs.refSidePanelContainerElement:(this.scrollContainerCached||(this.scrollContainerCached=Object(u.a)(this.refPanelPositioner.current,!1)),this.scrollContainerCached)}attachSidePanelListeners(){const e=this.getScrollContainer();e&&(e===document.body?document.addEventListener("scroll",this.updateSidePanelPosition):e.addEventListener("scroll",this.updateSidePanelPosition))}detachSidePanelListeners(){const e=this.getScrollContainer();e&&e.removeEventListener("scroll",this.updateSidePanelPosition)}render(){const{isOpen:e,children:t}=this.props,{styles:s}=this.state,n=s.panelWidth?s.panelWidth:(s.contextWidth||0)+o.e;return a.a.createElement(d.a,{ref:this.refPanelPositioner,width:n,show:e},a.a.createElement(p.a,{innerRef:this.refFixedPanel},a.a.createElement(p.b,null,t(s))))}}m.displayName="SidePanel",m.displayName="SidePanel"}).call(this,s("./node_modules/webpack/buildin/global.js"))},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return La}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/lodash/noop.js"),o=s.n(r),c=s("./node_modules/@atlaskit/onboarding/dist/esm/components/SpotlightTarget.js"),l=s("./src/packages/issue/issue-context-service/src/types.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),m=s("./src/packages/issue/issue-view/src/selectors/clickthrough-banner-selector.js"),b=s("./node_modules/react-intl/lib/index.es.js"),f=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),g=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),h=s("./src/packages/issue/issue-view/src/feature-flags.js"),y=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),O=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),j=s("./node_modules/reselect/lib/index.js"),E=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");const v=Object(j.createSelector)(u.z,e=>e&&e.includes("flagActions")),k=Object(j.createSelector)(E.e,v,(e,t)=>e&&t);var w=s("./src/packages/issue/issue-view/src/selectors/issue-actions-selector.js"),S=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js");const I=Object(j.createSelector)(d.F,e=>"service_desk"===e),C=Object(j.createSelector)(d.u,I,O.f,w.h,S.a,(e,t,s,n,a)=>t?!e&&!a:n&&s),T=Object(j.createSelector)(d.u,I,O.e,w.h,S.a,(e,t,s,n,a)=>t?!e&&!a:n&&s);var P=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),_=s("./src/packages/platform/ui/error-boundary/src/index.js"),x=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/DropdownMenu.js"),D=s("./node_modules/@atlaskit/popup/dist/esm/index.js"),A=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),M=s("./node_modules/@atlaskit/analytics-next/dist/esm/useAnalyticsEvents.js"),L=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),R=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const N=()=>Object(R.b)("issue.details.improve-switch-view-menu",!1);var U=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/group/DropdownItemGroupRadio.js"),F=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/group/DropdownItemGroup.js"),V=s("./node_modules/@atlaskit/item/dist/esm/components/ItemGroup.js"),K=s("./node_modules/@atlaskit/menu/dist/esm/components/section/popup-menu-group.js"),B=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),W=s("./node_modules/@atlaskit/menu/dist/esm/components/section/section.js"),H=s("./node_modules/@atlaskit/theme/dist/esm/index.js");const G=B.default.div(["border-top:1px solid ",";"],H.a.N30),$=Object(B.default)(W.a)(["[data-ds--menu--heading-item='true']{padding:0 12px;margin:7px 0;}"]),q=({dropdownGroupData:{items:e,name:t,type:s,key:n},isFirst:i,onClick:r})=>{let o;if(N()){const i=s&&"radio"===s?U.a:F.a;o=a.a.createElement(i,{id:n,title:t},e.map(e=>e))}else if((()=>Object(R.b)("issue.details.burgermenu-popup-bugfix",!1))()){const s=t&&t.length>0?t:void 0;o=a.a.createElement(K.a,{minWidth:0},a.a.createElement($,{title:s},e.map((e,t)=>a.a.createElement("div",{key:t,onClick:r},e))))}else o=a.a.createElement(V.a,{title:t},e.map(e=>e));return i?o:a.a.createElement(G,null,o)};q.displayName="DropdownGroup";var z=q,Y=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js"),Q=s("./node_modules/@atlaskit/icon/glyph/more.js"),J=s.n(Q),Z=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js"),X=s("./src/packages/platform/controllers/intl/src/index.js"),ee=Object(b.defineMessages)({actions:{id:"issue-meatball-menu.dropdown-trigger.actions",defaultMessage:"Actions"}});function te(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function se(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?te(Object(s),!0).forEach((function(t){ne(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):te(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ne(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ae(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ie=Object(B.keyframes)(["to{box-shadow:0 0 0 10px transparent;}"]),re=(e,t)=>{const s=e(t),{buttonStyles:n}=s;return se(se({},ae(s,["buttonStyles"])),{},{buttonStyles:se(se({},n),{},{borderRadius:"4px",animation:`${ie} 1.45s 3 cubic-bezier(0.66, 0, 0, 1)`,animationDelay:"0.5s",boxShadow:`0 0 0 0 ${H.a.P300}`})})},oe=({isOpen:e,isDisabled:t,isLoading:s,hasPulse:n,onClick:i})=>{const{formatMessage:r}=Object(X.c)(),o=r(ee.actions);return a.a.createElement(Z.a,{content:o,position:"top"},a.a.createElement(Y.a,{"aria-label":o,"aria-expanded":e,isDisabled:t,isLoading:s,appearance:"subtle",spacing:"default",iconBefore:a.a.createElement(J.a,{label:"",size:"medium"}),theme:n?re:void 0,isSelected:e,onClick:i}))};oe.displayName="DropdownTrigger",oe.defaultProps={hasPulse:!1,isDisabled:!1};var ce=oe;const le=B.default.div(["min-width:150px;max-height:95vh;padding:4px 0px;&&{[role='menuitem']{padding:8px 12px 7px;}[class*='GroupTitle']{padding:8px 12px;> div[class*='GroupTitleText']{padding:0;}}}"]),ue=({meatballMenuData:e,hasPulse:t,isDisabled:s,isLoading:i})=>{const[r,o]=Object(n.useState)(!1),{createAnalyticsEvent:c}=Object(M.a)(),l=Object(n.useCallback)((e,t)=>{o(e.isOpen),Object(L.h)(t,"issueActionsOpenChanged")},[]),u=Object(n.useCallback)(()=>{o(!0);const e=c({action:"click",actionSubject:"dropdownItem"});Object(L.h)(e,"issueActionsOpenChanged")},[c]),d=Object(n.useCallback)(()=>{o(!1);const e=c({action:"click",actionSubject:"dropdownItem"});Object(L.h)(e,"issueActionsOpenChanged")},[c]);return N()?a.a.createElement(x.a,{appearance:"tall",position:"bottom right",trigger:a.a.createElement(ce,{isOpen:r,hasPulse:!0===t,isDisabled:s,isLoading:i}),onOpenChange:l,isMenuFixed:!0,boundariesElement:"window"},a.a.createElement(le,null,e.filter(({items:e})=>e.length>0).map((e,t)=>a.a.createElement(z,{key:e.key,dropdownGroupData:e,isFirst:0===t,onClick:d})))):a.a.createElement(D.a,{boundariesElement:"scrollParent",isOpen:r,placement:"auto-end",trigger:e=>a.a.createElement("div",e,a.a.createElement(ce,{isOpen:r,hasPulse:!0===t,isDisabled:s,isLoading:i,onClick:r?d:u})),onClose:d,content:()=>a.a.createElement(le,null,e.filter(({items:e})=>e.length>0).map((e,t)=>a.a.createElement(z,{key:e.key,dropdownGroupData:e,isFirst:0===t,onClick:d}))),zIndex:A.f.modal})};ue.displayName="MeatballMenu",ue.defaultProps={hasPulse:!1,isDisabled:!1,isLoading:!1};var de=ue,pe=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),me=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),be=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/item/DropdownItem.js");class fe extends n.Component{constructor(...e){super(...e),this.ecosystemModalLinkRef=void 0,this.setEcosystemModalLinkRef=e=>{this.ecosystemModalLinkRef=e},this.clickEcosystemModalLinkRef=()=>this.ecosystemModalLinkRef&&this.ecosystemModalLinkRef.click(),this.renderEcosystemModalLink=(e,t)=>a.a.createElement("a",{href:e,className:t,ref:this.setEcosystemModalLinkRef,display:"none"},"")}render(){const{id:e,linkText:t,tooltip:s,href:n,styleClass:i}=this.props;return(a.a.createElement(be.a,{key:e,onClick:this.clickEcosystemModalLinkRef,title:s},t,this.renderEcosystemModalLink(n,i)))}}fe.displayName="EcosystemWebItem",fe.defaultProps={styleClass:null,tooltip:null};var ge=s("./src/packages/forge/forge-ui-analytics/src/services/issue-action/index.js"),he=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-action/index.js"),ye=s("./src/packages/forge/forge-ui/src/ui/extension-title/index.js"),Oe=s("./src/packages/issue/issue-view/src/actions/forge-actions.js");function je(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Ee=e=>{let{onClick:t,source:s}=e,i=je(e,["onClick","source"]);const r=Object(n.useMemo)(()=>({source:s}),[s]),o=Object(n.useCallback)(()=>{Object(ge.a)(s),t(i)},[s,t,i]);return a.a.createElement(he.a,{analyticsData:r,shouldFireScreenEvent:!1},a.a.createElement(be.a,{key:i.id,onClick:o},a.a.createElement(ye.a,{extensionName:i.title,extensionEnvType:i.extension.environmentType})))};Ee.displayName="ForgeActionView";const ve=Object(p.a)([Object(i.b)(e=>({source:Object(u.b)(e)}),{onClick:Oe.c})])(Ee),ke=e=>{if("FORGE_ENTITY_TYPE"===e.type){return(e=>({component:()=>a.a.createElement(ve,e),eventName:e.id,key:e.id,isAllowed:!0}))(e)}return(e=>({component:()=>a.a.createElement(fe,{href:e.url,linkText:e.name,styleClass:e.styleClass,id:e.name,tooltip:e.tooltip}),eventName:e.name,key:e.name,isAllowed:!0}))(e)};class we extends n.Component{componentDidCatch(e,{componentStack:t}){R.i.safeError("issue.error-boundary.issue-actions-meatball-menu.ecosystem-items","An uncaught error has occurred in issue actions meatball menu ecosystem items",new me.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{message:e.message,stack:e.stack,componentStack:t}}))}render(){const{ecosystemActions:e}=this.props;return e.map(ke).filter(e=>e.isAllowed).reduce((e,t)=>{if(t.component){const s=t,n=s.component,{key:i}=s;e.push(a.a.createElement(n,{key:i}))}return e},[])}}we.displayName="EcosystemDropdownItems";var Se=we,Ie=Object(i.b)(e=>({ecosystemActions:Object(pe.j)(e)}),{})(Se),Ce=s("./src/packages/issue/issue-view/src/common/constants/flags.js"),Te=s("./src/packages/platform/utils/fetch/src/utils/as-text-stream.js");var Pe=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js"),_e=s("./src/packages/issue/issue-view/src/views/connect-field.js");const xe=Object(b.defineMessages)({addFlag:{id:"issue.flag.add",defaultMessage:"Add flag"},removeFlag:{id:"issue.flag.remove",defaultMessage:"Remove flag"}});class De extends n.Component{constructor(...e){super(...e),this.removeFlag=()=>{this.props.onChange(!1),this.props.onConfirm(),this.props.onActionSelectedAnalytics("removeFlag")},this.addFlag=()=>{this.props.onChange(!0),this.props.onConfirm(),this.props.onActionSelectedAnalytics("addFlag")}}render(){return this.props.value?a.a.createElement(be.a,{key:"removeFlag",onClick:this.removeFlag},this.props.removeFlagMessage):a.a.createElement(be.a,{key:"addFlag",onClick:this.addFlag},this.props.addFlagMessage)}}De.displayName="FlagIssueActionView",De.displayName="FlagIssueActionView";const Ae=({baseUrl:e,issueKey:t,value:s})=>((e,t,s)=>Object(Te.a)((e=>`${e}/rest/greenhopper/1.0/xboard/issue/flag/flag.json`)(e),{method:"POST",body:JSON.stringify({flag:s,issueKeys:[t],commentVisibility:"",comment:""})}).toPromise())(e,t,Object(Pe.c)(s));var Me=Object(_e.a)((e,t)=>({fieldId:Object(Pe.a)(e),shouldDiscardChangeOnFailure:!0,transformFromStateValue:Pe.c,transformToStateValue:Pe.d,saveField:Ae,additionalProps:(e,s)=>({onActionSelectedAnalytics:t.onActionSelectedAnalytics,addFlagMessage:s.formatMessage(xe.addFlag),removeFlagMessage:s.formatMessage(xe.removeFlag)}),onSaveFailureFlagType:Object(Pe.b)(e)?Ce.B:Ce.A}))(De),Le=s("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),Re=s("./src/packages/issue/issue-view/src/common/messages/time.js");const Ne=({onLogTimeClick:e})=>{const{formatMessage:t}=Object(X.c)(),{createAnalyticsEvent:s}=Object(M.a)(),i=Object(n.useCallback)(()=>{e();const t=s({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(t,"logWork")},[s,e]);return a.a.createElement(be.a,{key:"LogTimeActionView",onClick:i},t(Re.a.logWork))};Ne.displayName="LogWork";var Ue=Ne,Fe=Object(i.b)(null,e=>({onLogTimeClick:()=>{e(Object(Le.H)("ADD_MODAL",null))}}))(Ue);var Ve=(e,t)=>({name:"",key:"AddToIssueDropdownGroup",items:[...t?[a.a.createElement(Fe,{key:"logWork"})]:[],...e?[a.a.createElement(Me,{key:"flagIssue"})]:[],a.a.createElement(Ie,{key:"ecosystemItems"})]}),Ke=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),Be=s("./node_modules/react-async-component/commonjs/index.js"),We=s("./src/packages/platform/ui/modal/src/index.js");Object(Be.asyncComponent)({resolve:()=>s.e("async-jira-clone-issue-dialog").then(s.bind(null,"./src/packages/issue/clone-issue-dialog/src/ui/main.js")),name:"AsyncCloneIssueDialog"});const He=({children:e,packageName:t})=>a.a.createElement(We.a,{id:"clone-issue-dialog",packageName:t},e);He.displayName="CloneIssueDialogBoundary";const Ge=Object(j.createSelector)(d.I,e=>e.cloneModal),$e=Object(j.createSelector)(Ge,e=>e.isOpen),qe=Object(Ke.f)(()=>s.e("async-clone-issue-dialog").then(s.bind(null,"./src/packages/issue/clone-issue-dialog/src/index.js")),{moduleId:"./src/packages/issue/clone-issue-dialog/src/index.js"});var ze=Object(i.b)(e=>({isOpen:$e(e),issueKey:Object(u.B)(e),projectType:Object(d.F)(e)}),e=>({hideModal:()=>e((()=>({type:"HIDE_CLONE_MODAL"}))())}))(({isOpen:e,hideModal:t,issueKey:s,projectType:n})=>e?a.a.createElement(He,{packageName:"issue"},a.a.createElement(qe,{onClose:t,issueKey:s,projectType:n})):null),Ye=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),Qe=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),Je=s("./src/packages/platform/observability/analytics-web-react/src/components/view-tracker.js"),Ze=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),Xe=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),et=s("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js"),tt=s("./node_modules/lodash/isEmpty.js"),st=s.n(tt),nt=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const at=Object(nt.q)("children-issues"),it=Object(j.createSelector)(at,e=>!!e&&!st()(e.value));var rt,ot,ct,lt=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),ut=Object(b.defineMessages)({delete:{id:"issue.delete.confirm",defaultMessage:"Delete"},deleteHeading:{id:"issue.delete-heading",defaultMessage:"Delete {issueKey}?"},deleteWithSubtasksHeading:{id:"issue.delete-with-subtasks-heading",defaultMessage:"Delete {issueKey} and its subtasks?"},deleteWithChildrenHeading:{id:"issue.delete-with-children-heading",defaultMessage:"Delete {issueKey} and its child issues?"},cancel:{id:"issue.delete.cancel",defaultMessage:"Cancel"},deleteWarning:{id:"issue.delete-warning",defaultMessage:"You're about to permanently delete this issue, its comments and attachments, and all of its data."},deleteWithSubtasksWarning:{id:"issue.delete-with-subtasks-warning",defaultMessage:"You're about to permanently delete this issue and all its subtasks, its comments and attachments, and all of its data. You should move any subtasks you don't want to delete to another parent issue."},deleteWithChildrenWarning:{id:"issue.delete-with-children-warning",defaultMessage:"You're about to permanently delete this issue and all its child issues, its comments and attachments, and all of its data. You should move any child issues you don't want to delete to another parent issue."},deleteRecommendation:{id:"issue.delete-recommendation",defaultMessage:"If you're not sure, you can resolve or close this issue instead."}});function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let pt=Object(Ye.a)("issueDelete",Qe.a.MODAL)((ct=ot=class extends n.Component{constructor(...e){super(...e),this.onConfirmDeleteIssue=(e,t)=>{this.props.deleteConfirmAnalytics(t),this.props.triggerDeleteRequest(this.props.issueKey,t)},this.onCancel=(e,t)=>{this.props.deleteCancelAnalytics(t),this.props.triggerCloseDeleteIssueModal()},this.getChildConditionalDeleteHeading=()=>this.props.shouldShowChildSpecificCopy?this.props.isSimplifiedProject?ut.deleteWithChildrenHeading:ut.deleteWithSubtasksHeading:ut.deleteHeading,this.getChildConditionalDeleteWarning=()=>this.props.shouldShowChildSpecificCopy?this.props.isSimplifiedProject?ut.deleteWithChildrenWarning:ut.deleteWithSubtasksWarning:ut.deleteWarning}UNSAFE_componentWillReceiveProps(e){!e.isDeletingIssue&&this.props.isDeletingIssue&&(e.didIssueDeleteFail?this.props.issueDeleteCallbacks.onIssueDeleteFailure({issueId:this.props.issueId,issueKey:this.props.issueKey}):(this.props.triggerCloseDeleteIssueModal(),this.props.issueDeleteCallbacks.onIssueDeleteSuccess({issueId:this.props.issueId,issueKey:this.props.issueKey}),this.props.onClose()))}render(){const{issueKey:e,isDeletingIssue:t,intl:{formatMessage:s}}=this.props;return this.props.isDeleteIssueModalOpen&&a.a.createElement(Xe.b,{headerMessage:a.a.createElement(b.FormattedMessage,dt({},this.getChildConditionalDeleteHeading(),{values:{issueKey:e}})),appearance:"danger",contentMessage:a.a.createElement("span",null,a.a.createElement("p",null,s(this.getChildConditionalDeleteWarning())),a.a.createElement("p",null,s(ut.deleteRecommendation))),confirmActionText:s(ut.delete),cancelActionText:s(ut.cancel),onConfirm:this.onConfirmDeleteIssue,onCancel:this.onCancel,externalId:"issue.action.delete-confirmation-dialog",isLoading:t,isConfirmDisabled:t,isCancelDisabled:t},a.a.createElement(Je.a,null))}},ot.displayName="DeleteIssueView",ot.defaultProps={issueDeleteCallbacks:{onIssueDeleteSuccess:o.a,onIssueDeleteFailure:o.a}},rt=ct))||rt;var mt=Object(p.a)([b.injectIntl,Object(i.b)(e=>({issueId:Object(d.k)(e),issueKey:Object(u.B)(e),isDeletingIssue:Object(d.o)(e),isDeleteIssueModalOpen:Object(d.n)(e),didIssueDeleteFail:Object(d.b)(e),isSimplifiedProject:Object(d.u)(e),shouldShowChildSpecificCopy:Object(d.u)(e)?Object(y.b)(e)&&it(e):Object(lt.b)(e)}),e=>({triggerCloseDeleteIssueModal:()=>{e(Object(et.a)())},triggerDeleteRequest:(t,s)=>{e(Object(et.c)(t,s))}})),Object(Ze.a)({deleteCancelAnalytics:"deleteIssueCancel",deleteConfirmAnalytics:"deleteIssueDelete"})])(pt),bt=s("./src/packages/forge/forge-ui-async/src/ui/extension-issue-action/async.js"),ft=s("./src/packages/forge/forge-ui-async/src/ui/issue-action/async.js");const gt=B.default.div(["display:none;"]),ht=({activeAction:e,context:t,onClose:s,onRendered:i,source:r})=>{const o=Object(n.useMemo)(()=>({source:r}),[r]);if(!e)return null;return a.a.createElement(he.a,{analyticsData:o,shouldFireScreenEvent:!0},a.a.createElement(gt,{onKeyDown:e=>{"Escape"!==e.key&&"Esc"!==e.key||(e.nativeEvent.stopImmediatePropagation(),s())}},Object(h.isForgeIssueActionAndGlanceNextEnabled)()?a.a.createElement(ft.a,{extension:e.action.extension,platformContext:t,analyticsData:o,onClose:s,onInitialRender:i}):a.a.createElement(bt.a,{context:t,extension:e.action.extension,module:"jira:issueAction",analyticsData:o,tearDown:s,onInitialRender:i,showErrorFlag:!0})))};ht.displayName="ForgeActionRendererView";const yt=Object(p.a)([Object(i.b)(e=>({activeAction:Object(g.a)(e),context:Object(g.b)(e),source:Object(u.b)(e)}),{onClose:Oe.b,onRendered:Oe.d})])(ht);var Ot=s("./src/packages/issue/jira-settings-service/src/main.js");var jt=Object(b.defineMessages)({findOutMore:{id:"issue.find-out-more",defaultMessage:"Find out more"}});const Et=({isServiceDeskProject:e})=>{const{formatMessage:t}=Object(X.c)(),{createAnalyticsEvent:s}=Object(M.a)(),i=Object(n.useCallback)(()=>{const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"findOutMore")},[s]),r=e?"//support.atlassian.com/jira-service-desk-cloud/docs/changes-to-requests-in-the-new-issue-view/":"//confluence.atlassian.com/display/JIRACORECLOUD/The+new+Jira+issue+view";return a.a.createElement(be.a,{onClick:i,href:r,target:"_blank",key:"find-out-more"},t(jt.findOutMore))};Et.displayName="FindOutMore";var vt=Et,kt=Object(i.b)(e=>({isServiceDeskProject:"service_desk"===Object(d.F)(e)}),{})(vt),wt=Object(b.defineMessages)({newIssueView:{id:"issue.title-for-new-issue-actions",defaultMessage:"New Jira issue view"}}),St=s("./src/packages/common-legacy-do-not-add-anything-new/src/urls/old-issue-view-url.js"),It=Object(b.defineMessages)({seeOldView:{id:"issue.see-old-view",defaultMessage:"See the old view"}});const Ct=()=>{const{formatMessage:e}=Object(X.c)(),{createAnalyticsEvent:t}=Object(M.a)(),s=Object(n.useCallback)(()=>{const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"oldViewClickthrough")},[t]);return a.a.createElement(be.a,{onClick:s,href:Object(St.a)(),key:"old-view-clickthrough"},e(It.seeOldView))};Ct.displayName="OldViewClickthrough";var Tt=Ct,Pt=Object(b.defineMessages)({turnOffNewIssueView:{id:"issue.turn-off-new-issue-view",defaultMessage:"Turn off new issue view"}});const _t=({baseUrl:e})=>{const{formatMessage:t}=Object(X.c)(),{createAnalyticsEvent:s}=Object(M.a)(),i=Object(n.useCallback)(()=>{const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"optOut")},[s]),r=`${e}/secure/ViewPersonalSettings.jspa`;return(a.a.createElement(be.a,{onClick:i,href:r,target:"_blank",key:"opt-out"},t(Pt.turnOffNewIssueView)))};_t.displayName="OptOut";var xt=_t,Dt=Object(i.b)(e=>({baseUrl:Object(u.g)(e)}),{})(xt),At=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/issue/opt-in-back/src/services/onboarding-tour/main.js")),Mt=Object(b.defineMessages)({startTour:{id:"issue.start-changeboarding-tour",defaultMessage:"Take a tour"}});const Lt=()=>{const{formatMessage:e}=Object(X.c)(),{createAnalyticsEvent:t}=Object(M.a)(),[,{setTourIsActive:s}]=Object(At.a)(),i=Object(n.useCallback)(()=>{s();const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"startChangeBoardingTour")},[t,s]);return a.a.createElement(be.a,{onClick:i,key:"start-tour"},e(Mt.startTour))};Lt.displayName="StartTour";var Rt=Lt,Nt=s("./src/packages/issue/issue-view/src/actions/changeboarding-actions.js"),Ut=s("./node_modules/@atlaskit/icon/glyph/presence-active.js"),Ft=s.n(Ut),Vt=Object(b.defineMessages)({startTour:{id:"issue.start-guided-tour",defaultMessage:"Show me the highlights"}});const Kt=({onStartTourClick:e,shouldShowPulse:t})=>{const{formatMessage:s}=Object(X.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{e();const t=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(t,"startTour")},[i,e]);return a.a.createElement(be.a,{onClick:r,elemBefore:t?a.a.createElement(Ft.a,{label:"",primaryColor:H.a.P300}):null,key:"start-tour"},s(Vt.startTour))};Kt.displayName="StartTour";var Bt=Kt,Wt=Object(i.b)(e=>({shouldShowPulse:Object(O.b)(e)}),e=>({onStartTourClick:()=>{e(Object(Nt.c)(Date.now()))}}))(Bt),Ht=Object(b.defineMessages)({turnOffForNow:{id:"issue.turn-off-issue-view-for-now",defaultMessage:"Turn off for now"}});const Gt=({baseUrl:e})=>{const{formatMessage:t}=Object(X.c)(),{createAnalyticsEvent:s}=Object(M.a)(),i=Object(n.useCallback)(()=>{const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"turnOffForNow")},[s]),r=`${e}/secure/ViewPersonalSettings.jspa`;return(a.a.createElement(be.a,{onClick:i,href:r,target:"_blank",key:"turn-off-for-now"},t(Ht.turnOffForNow)))};Gt.displayName="TurnOffForNow";var $t=Gt,qt=Object(i.b)(e=>({baseUrl:Object(u.g)(e)}),{})($t);var zt=(e,t,s,n,i,r)=>{const o=Object(h.isOptInBackToBentoEnabled)()?Rt:Wt,[c]=Object(h.isAdminOptionsPhase2Enabled)()&&Object(h.isJiraSettingsHookEnabled)()?Object(Ot.b)():[{}];return{name:e(wt.newIssueView),key:"IssueActionsDropdownGroup",items:(()=>{const e=void 0!==c&&"LOCK_IN_NEW_ISSUE_VIEW"===c.newIssueViewTransitionLockingStatus;return Object(h.isAdminOptionsPhase2Enabled)()&&e?[...t?[a.a.createElement(o,{key:"startTour"})]:[],...s?[a.a.createElement(kt,{key:"findOutMore"})]:[],...r?[a.a.createElement(Tt,{key:"oldViewClickthrough"})]:[]]:[...t?[a.a.createElement(o,{key:"startTour"})]:[],...s?[a.a.createElement(kt,{key:"findOutMore"})]:[],...n?[a.a.createElement(qt,{key:"turnOffForNow"})]:[],...i?[a.a.createElement(Dt,{key:"optOut"})]:[],...r?[a.a.createElement(Tt,{key:"oldViewClickthrough"})]:[]]})()}},Yt=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),Qt=s("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js"),Jt=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),Zt=s("./src/packages/issue/issue-view/src/selectors/classic-project-config-selector.js"),Xt=s("./src/packages/issue/issue-view/src/selectors/request-type-selector.js"),es=s("./src/packages/platform/utils/types/src/general.js"),ts=s("./src/packages/project-settings/common/src/urls.js"),ss=Object(b.defineMessages)({configure:{id:"issue.configure",defaultMessage:"Configure"},swiftBacklink:{id:"issue.swift-backlink-title",defaultMessage:"Back to {issueKey}"}});const ns=({shouldShowSwiftLink:e,baseUrl:t,projectKey:s,viewScreenId:i,projectType:r,requestTypeId:o,issueTypeId:c,issueKey:l})=>{const{formatMessage:u}=Object(X.c)(),{createAnalyticsEvent:d}=Object(M.a)(),p=Object(n.useCallback)(()=>{const e=d({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"configureIssue")},[d]),m=null!=o&&""!==o?`${t}/servicedesk/admin/${s}/request-types/request-type/${o}`:`${t}/plugins/servlet/project-config/${s}/issuelayout?screenId=${i}`,b=(null!=o||""===o)&&0===i;if(e&&r){const{pathname:e,search:n}=window.location,i=Object(ts.a)(Object(es.b)(t),r,s,c,{url:`${e}${n}`,title:u(ss.swiftBacklink,{issueKey:l})});return a.a.createElement(be.a,{onClick:p,href:i,key:"configure"},u(ss.configure))}return(a.a.createElement(be.a,{onClick:p,href:m,target:"_blank",isDisabled:b,key:"configure"},u(ss.configure)))};ns.displayName="ConfigureIssue";var as=ns,is=Object(i.b)(e=>({projectType:Object(d.F)(e),baseUrl:Object(u.g)(e),issueKey:Object(u.B)(e),issueTypeId:Object(Jt.e)(e),projectKey:Object(u.I)(e),viewScreenId:Object(Zt.a)(e),requestTypeId:Object(Xt.a)(e),shouldShowSwiftLink:Object(w.i)(e)}),{})(as),rs=Object(b.defineMessages)({switchToModal:{id:"issue.switch-to-modal",defaultMessage:"Open issues in dialog"}});const os=({viewModeOptions:e,emitEventToLegacyApp:t})=>{const{formatMessage:s}=Object(X.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{!0===e.viewModeSwitchEnabled&&e.onSwitchToModal?e.onSwitchToModal():t("issue.details.view.switch-to-modal");const s=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(s,"switchToModal")},[i,t,e]);return a.a.createElement(be.a,{key:"switch-to-modal",onClick:r},s(rs.switchToModal))};os.displayName="SwitchToModal",os.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var cs=os,ls=Object(b.defineMessages)({switchToSidebar:{id:"issue.switch-to-sidebar",defaultMessage:"Open issues in sidebar"}});const us=({viewModeOptions:e,emitEventToLegacyApp:t})=>{const{formatMessage:s}=Object(X.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{!0===e.viewModeSwitchEnabled&&e.onSwitchToSidebar?e.onSwitchToSidebar():t("issue.details.view.switch-to-sidebar");const s=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(s,"switchToSidebar")},[i,t,e]);return a.a.createElement(be.a,{key:"switch-to-sidebar",onClick:r},s(ls.switchToSidebar))};us.displayName="SwitchToSidebar",us.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var ds=us;const ps=e=>{const t=document.getElementById("ghx-issue-fragment");window.AJS&&window.AJS.$(t).trigger(e)};var ms=(e,t,s,n)=>{if(Object(h.isImproveSwitchViewMenuEnabled)())return{name:"",key:"issueConfigurationDropdownGroup",items:[...t?[a.a.createElement(is,{key:"configureClassic"})]:[]]};const i=n?n.valueOf():null,r=s&&i===Yt.a.SOFTWARE_ISSUE||e.viewModeSwitchEnabled,o=!0===r&&Object(Qt.b)(e.viewMode),c=!0===r&&!Object(Qt.b)(e.viewMode);return{name:"",key:"issueConfigurationDropdownGroup",items:[...o?[a.a.createElement(cs,{key:"switchToModal",emitEventToLegacyApp:ps,viewModeOptions:e})]:[],...c?[a.a.createElement(ds,{key:"switchToSidebar",emitEventToLegacyApp:ps,viewModeOptions:e})]:[],...t?[a.a.createElement(is,{key:"configureClassic"})]:[]]}},bs=Object(b.defineMessages)({exportDOC:{id:"issue.export-doc",defaultMessage:"Export Word"}});const fs=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(X.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"exportDoc")},[i]),o=`${e}/si/jira.issueviews:issue-word/${t}/${t}.doc`;return(a.a.createElement(be.a,{key:"ExportDocIssueActionView",onClick:r,href:o,target:"_blank"},s(bs.exportDOC)))};fs.displayName="ExportIssueDoc";var gs=fs,hs=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueKey:Object(u.B)(e)}),{})(gs),ys=Object(b.defineMessages)({exportXML:{id:"issue.export-xml",defaultMessage:"Export XML"}});const Os=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(X.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"exportXml")},[i]),o=`${e}/si/jira.issueviews:issue-xml/${t}/${t}.xml`;return(a.a.createElement(be.a,{key:"ExportXmlIssueActionView",onClick:r,href:o,target:"_blank"},s(ys.exportXML)))};Os.displayName="ExportIssueXML";var js=Os,Es=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueKey:Object(u.B)(e)}),{})(js),vs=Object(b.defineMessages)({print:{id:"issue.print",defaultMessage:"Print"}});const ks=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(X.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"printIssue")},[i]),o=`${e}/si/jira.issueviews:issue-html/${t}/${t}.html`;return(a.a.createElement(be.a,{key:"PrintIssueActionView",onClick:r,href:o,target:"_blank"},s(vs.print)))};ks.displayName="PrintIssue";var ws=ks,Ss=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueKey:Object(u.B)(e)}),{})(ws);var Is={name:"",key:"issueExportDropdownGroup",items:[a.a.createElement(Ss,{key:"printIssue"}),a.a.createElement(Es,{key:"exportIssueXML"}),a.a.createElement(hs,{key:"exportIssueDoc"})]},Cs=Object(b.defineMessages)({clone:{id:"issue.clone",defaultMessage:"Clone"}});const Ts=({onCloneItemClick:e})=>{const{formatMessage:t}=Object(X.c)(),{createAnalyticsEvent:s}=Object(M.a)(),i=Object(n.useCallback)(()=>{e();const t=s({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(t,"cloneIssue")},[s,e]);return a.a.createElement(be.a,{key:"clone",onClick:i},t(Cs.clone))};Ts.displayName="CloneIssue";var Ps=Ts,_s=Object(i.b)(null,e=>({onCloneItemClick:()=>{e((()=>({type:"SHOW_CLONE_MODAL"}))())}}))(Ps),xs=Object(b.defineMessages)({clone:{id:"issue.clone",defaultMessage:"Clone"}});const Ds=({baseUrl:e,issueId:t})=>{const{formatMessage:s}=Object(X.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"cloneIssue")},[i]),o=`${e}/secure/CloneIssueDetails!default.jspa?id=${t||""}`;return(a.a.createElement(be.a,{key:"clone",href:o,onClick:r},s(xs.clone)))};Ds.displayName="CloneIssue";var As=Ds,Ms=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueId:Object(d.k)(e)}),{})(As),Ls=Object(b.defineMessages)({convertToIssue:{id:"issue.convert-to-issue",defaultMessage:"Convert to Issue"}});const Rs=({baseUrl:e,issueId:t})=>{const{formatMessage:s}=Object(X.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"convertToIssue")},[i]),o=`${e}/secure/ConvertSubTask.jspa?id=${t||""}`;return(a.a.createElement(be.a,{key:"convert-to-issue",href:o,onClick:r},s(Ls.convertToIssue)))};Rs.displayName="ConvertToIssue";var Ns=Rs,Us=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueId:Object(d.k)(e)}),{})(Ns),Fs=Object(b.defineMessages)({convertToSubtask:{id:"issue.convert-to-subtask",defaultMessage:"Convert to Subtask"}});const Vs=({baseUrl:e,issueId:t})=>{const{formatMessage:s}=Object(X.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"convertToSubtask")},[i]),o=`${e}/secure/ConvertIssue.jspa?id=${t||""}`;return(a.a.createElement(be.a,{key:"convert-to-subtask",href:o,onClick:r},s(Fs.convertToSubtask)))};Vs.displayName="ConvertToSubtask";var Ks=Vs,Bs=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueId:Object(d.k)(e)}),{})(Ks),Ws=Object(b.defineMessages)({delete:{id:"issue.delete",defaultMessage:"Delete"}});const Hs=({onDeleteIssueClick:e})=>{const{formatMessage:t}=Object(X.c)(),{createAnalyticsEvent:s}=Object(M.a)(),i=Object(n.useCallback)(()=>{e();const t=s({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(t,"deleteIssue")},[s,e]);return a.a.createElement(be.a,{key:"delete",onClick:i},t(Ws.delete))};Hs.displayName="DeleteIssue";var Gs=Hs,$s=Object(i.b)(null,e=>({onDeleteIssueClick:()=>{e(Object(et.e)())}}))(Gs),qs=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js");const zs=Object(j.createSelector)(d.A,e=>Boolean(e&&e.id));var Ys=Object(b.defineMessages)({addToParentLevel:{id:"issue.add-to-parent-level",defaultMessage:"Add parent"},changeParentLevel:{id:"issue.change-parent-level",defaultMessage:"Change parent"}});const Qs=({onLinkToParentClick:e,hasParent:t})=>{const{formatMessage:s}=Object(X.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{e();const t=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(t,"linkToParent")},[i,e]);return a.a.createElement(be.a,{key:"link-to-parent",onClick:r},s(t?Ys.changeParentLevel:Ys.addToParentLevel))};Qs.displayName="LinkToParent";var Js=Qs,Zs=Object(i.b)(e=>({hasParent:zs(e)}),e=>({onLinkToParentClick:()=>{e(Object(qs.h)())}}))(Js),Xs=Object(b.defineMessages)({move:{id:"issue.move",defaultMessage:"Move"}});const en=({isSubtask:e,baseUrl:t,issueId:s})=>{const{formatMessage:i}=Object(X.c)(),{createAnalyticsEvent:r}=Object(M.a)(),o=Object(n.useCallback)(()=>{const e=r({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"moveIssue")},[r]),c=e?`${t}/secure/MoveSubTaskChooseOperation!default.jspa?id=${s||""}`:`${t}/secure/MoveIssue!default.jspa?id=${s||""}`;return(a.a.createElement(be.a,{key:"move",href:c,onClick:o},i(Xs.move)))};en.displayName="MoveIssue";var tn=en,sn=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueId:Object(d.k)(e),isSubtask:Object(lt.c)(e)}),{})(tn);var nn=(e,t,s,n,i,r)=>({name:"",key:"IssueManipulationDropdownGroup",items:[...e?[a.a.createElement(Zs,{key:"linkToParent"})]:[],...t?[a.a.createElement(Bs,{key:"convertToSubtask"})]:[],...s?[a.a.createElement(Us,{key:"convertToIssue"})]:[],...n?[a.a.createElement(sn,{key:"moveIssue"})]:[],...i?Object(h.isInlineCloneEnabled)()?[a.a.createElement(_s,{key:"cloneIssue"})]:[a.a.createElement(Ms,{key:"cloneIssue"})]:[],...r?[a.a.createElement($s,{key:"deleteIssue"})]:[]]}),an=Object(b.defineMessages)({switchViewGroup:{id:"issue.switch-view.title",defaultMessage:"View issues in"},sideView:{id:"issue.switch-view.side-view",defaultMessage:"Side view"},dialog:{id:"issue.switch-view.dialog",defaultMessage:"Dialog"}}),rn=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/item/DropdownItemRadio.js");const on=Object(B.default)(rn.a)(["padding:","px ","px !important;"],A.e/2,1.5*A.e),cn=({viewModeOptions:e,emitEventToLegacyApp:t,isSelected:s})=>{const{formatMessage:i}=Object(X.c)(),{createAnalyticsEvent:r}=Object(M.a)(),o=Object(n.useCallback)(()=>{!0===e.viewModeSwitchEnabled&&e.onSwitchToModal?e.onSwitchToModal():t("issue.details.view.switch-to-modal");const s=r({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(s,"switchToModal")},[r,t,e]);return a.a.createElement(on,{id:"switch-to-modal",key:"switch-to-modal",onClick:o,isSelected:s},i(an.dialog))};cn.displayName="DialogView",cn.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var ln=cn;const un=({viewModeOptions:e,emitEventToLegacyApp:t,isSelected:s})=>{const{formatMessage:i}=Object(X.c)(),{createAnalyticsEvent:r}=Object(M.a)(),o=Object(n.useCallback)(()=>{!0===e.viewModeSwitchEnabled&&e.onSwitchToSidebar?e.onSwitchToSidebar():t("issue.details.view.switch-to-sidebar");const s=r({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(s,"switchToSidebar")},[r,t,e]);return a.a.createElement(on,{id:"switch-to-sidebar",key:"switch-to-sidebar",onClick:o,isSelected:s},i(an.sideView))};un.displayName="SideView",un.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var dn=un;const pn=e=>{const t=document.getElementById("ghx-issue-fragment");window.AJS&&window.AJS.$(t).trigger(e)};var mn=(e,t,s,n)=>{const i=n?n.valueOf():null,r=!0===(s&&i===Yt.a.SOFTWARE_ISSUE||t.viewModeSwitchEnabled),o=Object(Qt.b)(t.viewMode);return{name:e(an.switchViewGroup),key:"issueSwitchViewDropdownGroup",type:"radio",items:r?[a.a.createElement(dn,{key:"side-view",viewModeOptions:t,emitEventToLegacyApp:pn,isSelected:o}),a.a.createElement(ln,{key:"dialog-view",viewModeOptions:t,emitEventToLegacyApp:pn,isSelected:!o})]:[]}};const bn=({isLoading:e,isForgeLoading:t,shouldShowPulse:s,canLogTime:n,shouldShowFlagAction:i,canLinkToParent:r,shouldShowConvertToSubtask:o,shouldShowConvertToIssue:l,canMoveIssue:u,canCloneIssue:d,canDeleteIssue:p,issueDeleteCallbacks:m,onClose:b,shouldShowActions:f,shouldShowConfiguration:g,isSoftwareProjectType:y,viewModeOptions:O,analyticsSource:j,intl:E,shouldShowStartTour:v,shouldShowFindOutMore:k,shouldShowTurnOffForNow:w,shouldShowOptOut:S,shouldShowOldViewClickthrough:I})=>{if(!f)return null;if(e)return a.a.createElement(de,{isDisabled:!0,meatballMenuData:[]});const C={viewModeSwitchEnabled:!1},T=[Ve(i,n),nn(r,o,l,u,d,p),Is,zt(E.formatMessage,v,k,w,S,I),...Object(h.isImproveSwitchViewMenuEnabled)()?[mn(E.formatMessage,O||C,y,j)]:[],ms(O||C,g,y,j)];return a.a.createElement(_.b,null,a.a.createElement(P.a,null,a.a.createElement(c.a,{name:"BOARD_SIDEBAR"},a.a.createElement(de,{hasPulse:s,isLoading:t,meatballMenuData:T}),a.a.createElement(mt,{issueDeleteCallbacks:m,onClose:b}),a.a.createElement(yt,null),Object(h.isInlineCloneEnabled)()&&a.a.createElement(ze,null))))};bn.displayName="IssueActionsMeatballMenu";var fn=bn;const gn=Object(b.injectIntl)(Object(i.b)(e=>{var t;const s=Object(h.isOptInBackToBentoEnabled)()?O.e:O.f;return{isLoading:!Object(d.m)(e),isForgeLoading:!!(null===(t=Object(g.a)(e))||void 0===t?void 0:t.isLoading),shouldShowPulse:Object(O.b)(e),canLogTime:Object(f.b)(e),shouldShowFlagAction:k(e),shouldShowConvertToSubtask:Object(w.b)(e),shouldShowConvertToIssue:Object(w.a)(e),canLinkToParent:Object(y.a)(e),canCloneIssue:Object(E.b)(e),canDeleteIssue:Object(E.d)(e),canMoveIssue:Object(E.g)(e),shouldShowActions:Object(w.d)(e),shouldShowStartTour:Object(h.isOptInBackToBentoEnabled)()?Object(O.g)(e):Object(O.f)(e),shouldShowFindOutMore:Object(h.isOptInBackToBentoEnabled)()?Object(w.f)(e):Object(w.g)(e),shouldShowTurnOffForNow:Object(h.isOptInBackToBentoEnabled)()?T(e):C(e),shouldShowOptOut:(Object(d.t)(e)||!s(e))&&Object(w.h)(e),shouldShowOldViewClickthrough:Object(m.b)(e),shouldShowConfiguration:Object(w.e)(e)||!!Object(w.i)(e)&&!!Object(d.F)(e),isSoftwareProjectType:"software"===Object(d.F)(e),analyticsSource:Object(u.b)(e)}},{})(fn)),hn=e=>a.a.createElement(gn,{viewModeOptions:e.viewModeOptions,issueDeleteCallbacks:e.issueDeleteCallbacks,onClose:e.onClose});hn.displayName="IssueActionsMenu";var yn=hn,On=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/modal-close-button.js"),jn=s("./src/packages/project-settings/issue-restrictions/async.js"),En=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js");const vn=Object(nt.q)("issuerestriction"),kn=Object(j.createSelector)(vn,e=>e&&e.value&&e.value.issuerestrictions&&e.value.issuerestrictions.projectrole||[]),wn=Object(j.createSelector)(vn,e=>e&&e.value&&e.value.shouldDisplay||!1);const Sn=s("./src/packages/project-settings/issue-restrictions/src/common/types.js").a,In=Object(p.a)([Object(i.b)(e=>({currentIssueRestriction:kn(e),isIssueRestrictionDisplayForIssue:wn(e),hasError:!!Object(d.h)(e),projectKey:Object(d.D)(e),issueKey:Object(u.B)(e),edition:Object(En.a)(e),isSubtask:Object(lt.c)(e)}),{})])(({currentIssueRestriction:e,isIssueRestrictionDisplayForIssue:t,hasError:s,issueKey:n,projectKey:i,edition:r,isSubtask:o})=>!s&&t&&(!o||e.length>0)?a.a.createElement(jn.a,{entityKey:Object(es.l)(n),currentRestrictions:e,restrictionType:Sn,projectKeyOrId:Object(es.q)(i),edition:r,isSubtask:o}):null);var Cn=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),Tn=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),Pn=s.n(Tn),_n=s("./node_modules/@atlaskit/icon/glyph/unlock.js"),xn=s.n(_n),Dn=s("./src/packages/issue/fields/security-level/src/common/ui/styled.js");const An=Object(B.default)(Dn.a)(["color:",";"],H.a.N30),Mn=e=>{const{initialValue:t}=e,s=t?Pn.a:xn.a;return a.a.createElement(Y.a,{appearance:"subtle",spacing:"default",isDisabled:!0,iconBefore:a.a.createElement(An,null,a.a.createElement(s,{label:""}))})};Mn.displayName="Loading";var Ln=s("./src/packages/platform/ui/error-boundary/src/main.js");const Rn=({children:e,fallback:t,packageName:s})=>a.a.createElement(Ln.a,{id:"issue-security-level-field",packageName:s,render:()=>t},a.a.createElement(Ke.a,{fallback:t},e));Rn.displayName="IssueSecurityLevelFieldBoundary";var Nn=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js"),Un=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js");const Fn=Object(Ke.f)(()=>s.e("async-issue-field-security-level").then(s.bind(null,"./src/packages/issue/fields/security-level/src/index.js")),{moduleId:"./src/packages/issue/fields/security-level/src/index.js"}),Vn=Object(p.a)([Object(i.b)(e=>({securityLevelItems:Object(Un.a)(e),isSecurityLevelEnabledForIssue:Object(Un.d)(e),isSecurityLevelEditable:Object(Un.c)(e),error:Object(d.h)(e),issueKey:Object(u.B)(e)}),e=>({onSuccess:t=>e(Object(Nn.e)("security",t))}))])(({securityLevelItems:e,isSecurityLevelEnabledForIssue:t,isSecurityLevelEditable:s,error:n,issueKey:i,onSuccess:r})=>{const[o]=Object(Cn.b)({issueKey:i,fieldKey:"security"});if(!n&&t){const t=a.a.createElement(Mn,{initialValue:o});return(a.a.createElement(Rn,{packageName:"issue",fallback:t},a.a.createElement(Fn,{issueKey:i,initialValue:o||null,allowedValues:e,isEditable:s,onSuccess:r})))}return null});var Kn=s("./src/packages/growth/share-button/src/index.js"),Bn=s("./src/packages/growth/share-button/src/constants.js");const Wn=e=>{const{summary:t,issueAri:s,issueUrl:n,resourceOwner:i,subProductId:r}=e;return(a.a.createElement(Kn.b,{integrationType:Bn.a.BENTO_ISSUE,triggerButtonStyle:"icon-only",productId:i,subProductId:r,shareLink:n,shareTitle:t,shareContentType:"issue",objectAri:s}))};Wn.displayName="ShareView";var Hn=Object(p.a)([Object(i.b)(e=>({issueAri:Object(d.v)(e),resourceOwner:Object(d.G)(),summary:Object(nt.o)("summary")(e)||"",subProductId:Object(d.H)(e),issueUrl:Object(Jt.a)(e)}),{})])(Wn);const Gn=Kn.a,$n=B.default.div(["flex-shrink:0;"]),qn=Object(p.a)([Object(i.b)(e=>({isLoading:Object(d.r)(e),error:Object(d.h)(e),loggedInAccountId:Object(u.a)(e)}),{})])(({error:e=null,isLoading:t,loggedInAccountId:s})=>!e&&s?a.a.createElement($n,null,t?a.a.createElement(Gn,{triggerButtonStyle:"icon-only"}):a.a.createElement(Hn,null)):null);var zn=s("./node_modules/@atlaskit/icon/glyph/like.js"),Yn=s.n(zn),Qn=s("./src/packages/issue/issue-context-service/src/main.js");var Jn=s("./src/packages/issue/fields/voters/src/services/voters-list-service/context.js"),Zn=s("./src/packages/platform/utils/constants/src/status-categories.js"),Xn=Object(b.defineMessages)({addVoteDisabledTooltip:{id:"issue-field-voters.services.disable-resolved-issue-voting-service.add-vote-disabled-tooltip",defaultMessage:"You can't vote on resolved issues"},removeVoteDisabledTooltip:{id:"issue-field-voters.services.disable-resolved-issue-voting-service.remove-vote-disabled-tooltip",defaultMessage:"You can't change your vote on resolved issues"}});const ea=()=>{const{formatMessage:e}=Object(X.c)(),t=Object(Qn.d)(),[s]=Object(Cn.b)({issueKey:t,fieldKey:"status"}),a=Object(n.useMemo)(()=>"DONE"===Object(Zn.statusCategoryForId)(null==s?void 0:s.statusCategory.id),[s]),i=Object(n.useMemo)(()=>a?{addVote:e(Xn.addVoteDisabledTooltip),removeVote:e(Xn.removeVoteDisabledTooltip)}:void 0,[e,a]);return{isDisabled:a,tooltips:i}};var ta=s("./src/packages/issue/fields/voters/src/ui/vote-toggle/index.js"),sa=s("./src/packages/issue/permissions-service/src/main.js"),na=s("./node_modules/@atlaskit/spinner/dist/esm/spinner.js"),aa=s("./src/packages/issue/fields/voters/src/messages.js"),ia=s("./src/packages/issue/fields/voters/src/ui/button/index.js");const ra=B.default.div(["[data-role='droplistContent']{overflow:visible;}"]),oa=B.default.div(["width:240px;min-height:121px;padding:4px 0 0;"]),ca=B.default.div(["height:121px;display:flex;justify-content:center;align-items:center;"]),la=Object(Ke.f)(()=>s.e("async-voters-dropdown").then(s.bind(null,"./src/packages/issue/fields/voters/src/ui/dropdown-content/index.js")),{moduleId:"./src/packages/issue/fields/voters/src/ui/dropdown-content/index.js"}),ua=a.a.createElement(ca,null,a.a.createElement(na.a,{size:"medium"})),da=({setCloseDropdown:e,disableVotingProps:t})=>a.a.createElement(Ln.a,{id:"issue-voters-list",packageName:"issue",render:()=>ua},a.a.createElement(Ke.a,{fallback:ua},a.a.createElement(la,{setCloseDropdown:e,disableVotingProps:t})));da.displayName="LazyDropdownContent";const pa=({disableVotingProps:e})=>{const{formatMessage:t}=Object(X.c)(),s=t(aa.a.voteOptionsTooltip),[i,r]=Object(n.useState)(!1),o=Object(n.useCallback)(()=>{r(e=>!e)},[]),c=Object(n.useCallback)(()=>{r(!1)},[]);return a.a.createElement(ra,null,a.a.createElement(D.a,{boundariesElement:"scrollParent",isOpen:i,placement:"auto-end",trigger:e=>a.a.createElement("div",e,a.a.createElement(ia.a,{onClick:o,tooltip:s,isSelected:i})),onClose:c,content:()=>a.a.createElement(oa,null,i&&a.a.createElement(da,{setCloseDropdown:c,disableVotingProps:e})),zIndex:A.f.modal}))};pa.displayName="VoterDropdown";var ma=pa;const ba=({disableVotingProps:e})=>{const[t]=Object(sa.a)();return t.canViewVoters?a.a.createElement(ma,{disableVotingProps:e}):a.a.createElement(ta.a,{disableVotingProps:e})};ba.displayName="Voters";var fa=ba;const ga=()=>{const e=ea();return(a.a.createElement(fa,{disableVotingProps:e}))};ga.displayName="IssueVoters";var ha=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),ya=s("./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js");const Oa=B.default.div(["display:flex;padding:4px 8px;"]),ja=()=>Object(ya.a)(a.a.createElement(Oa,null,a.a.createElement(Yn.a,{size:"medium",primaryColor:H.a.N30,label:""}))),Ea=({hasError:e,isIssueLoading:t})=>{const s=Object(Qn.d)(),n=Object(ha.c)(),[i]=Object(Cn.b)({issueKey:s,fieldKey:"votes"});return e||!n?null:t||!i?a.a.createElement(ja,null):a.a.createElement(Ln.a,{id:"issue.details.vote-action"},a.a.createElement(Jn.a,{scope:s},a.a.createElement(ga,null)))};Ea.displayName="VotersItem";const va=Object(i.b)(e=>({hasError:!!Object(d.h)(e),isIssueLoading:Object(d.r)(e)}),{})(Ea),ka=Object(nt.q)("watches"),wa=Object(j.createSelector)(ka,e=>!!e);var Sa=s("./node_modules/@atlaskit/icon/glyph/watch.js"),Ia=s.n(Sa);const Ca=B.default.div(["display:flex;margin:4px 25px 4px 8px;"]),Ta=()=>Object(ya.a)(a.a.createElement("div",null,a.a.createElement(Ca,null,a.a.createElement(Ia.a,{label:"",size:"medium",primaryColor:H.a.N30})))),Pa=({children:e,fallback:t,packageName:s})=>a.a.createElement(Ln.a,{id:"issue-watchers",packageName:s,render:()=>t},a.a.createElement(Ke.a,{fallback:t},e));Pa.displayName="IssueWatchersBoundary";const _a=Object(Ke.f)(()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("async-issue-watchers")]).then(s.bind(null,"./src/packages/issue/issue-view/src/views/watchers/index.js")),{moduleId:"./src/packages/issue/issue-view/src/views/watchers/index.js"}),xa=({isWatchesPresent:e,isLoading:t,error:s})=>{const n=Object(ha.c)();return!s&&!!n?!e||t?a.a.createElement(Ta,null):a.a.createElement(Pa,{packageName:"issue",fallback:a.a.createElement(Ta,null)},a.a.createElement(_a,null)):null};xa.displayName="WatchersItem";const Da=Object(i.b)(e=>({isWatchesPresent:wa(e),isLoading:Object(d.r)(e),error:Object(d.h)(e)}),{})(xa);var Aa=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js");const Ma=({error:e=null,onClose:t=o.a,renderFeedback:s=(()=>null),shouldShowCloseButton:n=!1,isClickthroughBannerHidden:i=!1,issueDeleteCallbacks:r={},viewModeOptions:u={viewModeSwitchEnabled:!1},applicationKey:d,isCompact:p})=>{const m=u&&u.viewMode===l.b&&!e;let b;if(s){const e=i?s(d,!0):void 0;null!=e&&(b=a.a.createElement(c.a,{name:"GIVE_FEEDBACK"},a.a.createElement(Aa.a,null,e)))}return(a.a.createElement(Aa.b,null,a.a.createElement(Aa.c,{maxResponsiveWidth:m?258:0},n?a.a.createElement(On.a,{onClose:t}):null,a.a.createElement(yn,{externalId:"issue.opsbar",issueDeleteCallbacks:r,viewModeOptions:u,onClose:t}),a.a.createElement(qn,null),!p&&a.a.createElement(va,null),a.a.createElement(Da,null),a.a.createElement(In,null),a.a.createElement(Vn,null),b)))};Ma.displayName="HeaderActionsView",Ma.displayName="HeaderActionsView";const La=Object(p.a)([Object(i.b)(e=>({error:Object(d.h)(e),applicationKey:Object(u.e)(e),isClickthroughBannerHidden:Object(m.a)(e)}),{})])(Ma)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const i=2.5*a.e,r=n.default.div(["min-height:","px;margin-right:0;margin-left:auto;margin-bottom:","px;height:100%;align-items:center;max-width:100%;display:flex;justify-content:flex-end;padding-right:1px;"],4*a.e,a.e/4),o=n.default.div(["display:flex;flex-flow:row-reverse;"," [dir='rtl'] &{padding-right:","px;padding-left:","px;}"],e=>e.maxResponsiveWidth?`flex: 1 0 auto; justify-content: space-between; max-width: ${e.maxResponsiveWidth}px;`:`flex-shrink: 0; > * { margin-left: ${a.e}px; &:last-child { margin-left: 0; } }`,2*a.e,i),c=Object(n.default)(o)(["user-select:none;"]),l=n.default.div(["flex-shrink:0;"])},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return pt}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),c=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),l=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),u=s("./node_modules/react-intl/lib/index.es.js"),d=s("./node_modules/lodash/flow.js"),p=s.n(d),m=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),b=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),f=s("./node_modules/react-resource-router/build/esm/index.js"),g=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js"),h=s("./node_modules/@atlaskit/icon/glyph/arrow-left-circle.js"),y=s.n(h),O=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),j=Object(u.defineMessages)({back:{id:"issue.views.issue-base.foundation.back-button.back",defaultMessage:"Back"}}),E=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),v=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const k=E.default.div(["margin-right:","px;margin-left:-","px;"],1.5*v.e,1.5*v.e);var w=p()(u.injectIntl,Object(m.a)({onClick:"backFromIssueView"}),Object(b.a)("button",{onClick:"clicked"}))(e=>{const{url:t,intl:{formatMessage:s}}=e;return(a.a.createElement(k,null,a.a.createElement(g.a,{href:t,appearance:"subtle",onClick:e.onClick,component:__SPA__?f.a:void 0,iconBefore:a.a.createElement(y.a,{label:"",size:"small",primaryColor:O.a.N300})},s(j.back))))}),S=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),I=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),C=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),T=s("./src/packages/platform/observability/analytics-web-react/src/components/redux-analytics-data.js"),P=s("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js"),_=s("./src/packages/issue/issue-view/src/actions/issue-preview-actions.js"),x=s("./src/packages/issue/issue-view/src/actions/prefetch-issues-actions.js"),D=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),A=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),M=s("./src/packages/issue/issue-view/src/feature-flags.js"),L=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),R=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),N=s("./src/packages/issue/issue-view/src/selectors/project-selector.js"),U=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),F=s("./node_modules/lodash/isEqual.js"),V=s.n(F),K=s("./node_modules/lodash/noop.js"),B=s.n(K),W=s("./node_modules/@atlaskit/breadcrumbs--current/components/Breadcrumbs.js"),H=s("./node_modules/@atlaskit/breadcrumbs--current/components/BreadcrumbsItem.js"),G=s("./src/packages/platform/utils/types/src/general.js"),$=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js"),q=s("./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js"),z=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js"),Y=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/item/DropdownItem.js"),Q=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/group/DropdownItemGroup.js"),J=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/DropdownMenuStateless.js"),Z=s("./node_modules/@atlaskit/icon/glyph/edit-filled.js"),X=s.n(Z),ee=s("./node_modules/@atlaskit/spinner/dist/esm/spinner.js"),te=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js"),se=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),ne=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),ae=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),ie=Object(u.defineMessages)({triggerTooltipAddEpic:{id:"issue.details.issue-parent-switcher-trigger-tooltip-add-epic",defaultMessage:"{issueTypeName} - Add {target}"},triggerTooltipChangeEpic:{id:"issue.details.issue-parent-switcher-trigger-tooltip-change-epic",defaultMessage:"{issueTypeName} - Change {target}"},triggerTooltipAddParent:{id:"issue.details.issue-parent-switcher-trigger-tooltip-add-parent",defaultMessage:"{issueTypeName}Add parent"},triggerTooltipChangeParent:{id:"issue.details.issue-parent-switcher-trigger-tooltip-change-parent",defaultMessage:"{issueTypeName}Change parent"},dropdownEmpty:{id:"issue.details.issue-parent-switcher-dropdown-empty",defaultMessage:"No {target} has been created in this project. Create your first "},dropdownTitleEpic:{id:"issue.details.issue-parent-switcher-dropdown-title-epic",defaultMessage:"Recent {target}"},removeEpic:{id:"issue.details.issue-parent-switcher-remove-epic",defaultMessage:"Remove {target}"},viewEpics:{id:"issue.details.issue-parent-switcher-view-epics",defaultMessage:"View all {target}"},dropdownTitle:{id:"issue.details.issue-parent-switcher-dropdown-title",defaultMessage:"Recent parents"},removeParent:{id:"issue.details.issue-parent-switcher-remove-parent",defaultMessage:"Remove parent"},viewParents:{id:"issue.details.issue-parent-switcher-view-parents",defaultMessage:"View all parents"}});const re=E.default.div(["border-bottom:1px solid ",";"],O.a.N30),oe=E.default.div(["display:flex;justify-content:center;align-items:center;min-width:","px;min-height:","px;overflow:hidden;"],21*v.e,23.375*v.e),ce=E.default.div(["width:","px;padding:","px;& button,& span{padding:0;margin:0;vertical-align:initial;}"],25*v.e,1.5*v.e);function le(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ue(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const de=Object(ae.a)("dropdownItem",{onClick:"clicked"})(Y.a);class pe extends n.Component{constructor(...e){super(...e),this.state={isOpen:Boolean(this.props.isOpen),isLoading:!this.props.issueParents.length},this.onOpenChange=({isOpen:e,event:t},s)=>{const{clickRef:n,onOpenChange:a,onToggle:i}=this.props,r=n&&n.current&&t&&n.current.button.contains(t.target);i(s),this.toggleMenu(e),a&&!r&&a(e)},this.onItemClick=(e,t={})=>(s,n)=>{const{projectId:a,issueTypes:i,issues:r,issueTypeName:o,onSelect:c,setIssueParent:l,onViewAllParentsClick:u,onClick:d}=this.props;switch(e){case"add parent":case"change parent":l(r,t.parentId);break;case"remove parent":l(r);break;case"open modal":u();break;case"create parent":{const e=String((i.find(({name:e})=>e===o)||{}).id);a&&e||ne.a.safeError("issue-parent-switcher.create.issue.failure","Failed to create the first epic via global issue create",{projectId:a,issueTypeId:e}),((e,t)=>{window.WRM&&window.WRM.require(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],()=>{window.JIRA.Forms.createCreateIssueForm({pid:e,issueType:t}).asDialog({id:"software-create-issue-dialog"}).show()})})(a,e);break}}d(n.update({userAction:e})),c&&c(),!t.keepMenuOpen&&this.toggleMenu(!1)}}componentDidUpdate(e){const{issueParents:t,isOpen:s}=this.props;s!==e.isOpen&&s!==this.state.isOpen&&this.toggleMenu(s),t!==e.issueParents&&this.state.isLoading&&this.setState({isLoading:!1})}getMessageContent(e,t,s=!0){const{issueTypeName:n,issueHierarchyLevel:a,intl:{formatMessage:i}}=this.props,r="Epic"!==n?"":`${"Epic".toLowerCase()}${s?"s":""}`;return n&&0===a?i(e,{target:r}):i(t)}getTooltipContent(){const{isOrphan:e,issueTypeName:t,issueHierarchyLevel:s,intl:{formatMessage:n}}=this.props;if(t&&0===s){const s="Epic"!==t?t:"Epic".toLowerCase();return n(e?ie.triggerTooltipAddEpic:ie.triggerTooltipChangeEpic,{issueTypeName:t,target:s})}return n(e?ie.triggerTooltipAddParent:ie.triggerTooltipChangeParent,{issueTypeName:t?`${t} - `:""})}toggleMenu(e){const{issueParents:t,fetchIssueParents:s}=this.props;this.setState(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?le(Object(s),!0).forEach((function(t){ue(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):le(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({isOpen:e},e&&!t.length?{isLoading:!0}:{}),()=>{e&&!t.length&&s()})}renderTriggerButton(){const{isDisabled:e,isOpen:t,isOrphan:s,issueTypeName:n,issueTypeIconUrl:i,text:r}=this.props,o=this.getTooltipContent(),c=a.a.createElement(g.a,{"aria-label":o,"aria-expanded":t,isDisabled:e,spacing:"compact",appearance:"subtle",iconBefore:!s&&i?a.a.createElement(se.a,{alt:n||"",url:i}):a.a.createElement(X.a,{size:"small",label:""})},r);return s?c:a.a.createElement(te.a,{position:"top",content:o,delay:0},c)}renderIssueParentItem(e){const{id:t,key:s,summary:n,issueType:{name:i,iconUrl:r}}=e,o=a.a.createElement(se.a,{alt:i||"",url:r});return a.a.createElement(de,{key:s,elemBefore:o,onClick:this.onItemClick(`${this.props.isOrphan?"add":"change"} parent`,{parentId:t})},s," ",n)}renderDropdownItemGroup(e){return this.state.isLoading?a.a.createElement(oe,null,a.a.createElement(ee.a,{size:"large"})):a.a.createElement(Q.a,{title:this.getMessageContent(ie.dropdownTitleEpic,ie.dropdownTitle)},e.map(e=>this.renderIssueParentItem(e)))}renderDropdownMenu(){const{isOrphan:e,issueTypeName:t,issueHierarchyLevel:s,issueParents:n,issueKey:i,intl:{formatMessage:r}}=this.props,o=t&&"Epic"!==t?t:"Epic".toLowerCase(),c=(n||[]).filter(e=>e.key!==i).slice(0,5);return 0!==s||this.state.isLoading||n.length?a.a.createElement(a.a.Fragment,null,(this.state.isLoading||c.length>0)&&a.a.createElement(re,null,this.renderDropdownItemGroup(c)),a.a.createElement(Q.a,null,!e&&0===s&&a.a.createElement(de,{onClick:this.onItemClick("remove parent")},this.getMessageContent(ie.removeEpic,ie.removeParent,!1)),a.a.createElement(de,{onClick:this.onItemClick("open modal")},this.getMessageContent(ie.viewEpics,ie.viewParents)))):a.a.createElement(ce,null,r(ie.dropdownEmpty,{target:o}),a.a.createElement(g.a,{appearance:"link",spacing:"compact",onClick:this.onItemClick("create parent",{keepMenuOpen:!0})},o),".")}render(){return a.a.createElement(J.a,{isOpen:this.state.isOpen,trigger:this.renderTriggerButton(),onOpenChange:this.onOpenChange},this.renderDropdownMenu())}}pe.displayName="IssueParentSwitcher",pe.displayName="IssueParentSwitcher",pe.defaultProps={isDisabled:!1,isOrphan:!1,issueTypes:[],issues:[],issueParents:[],isOpen:!1,issueKey:"",issueTypeName:"",issueTypeIconUrl:"",issueHierarchyLevel:0,clickRef:null,projectId:null,fetchIssueParents:B.a,setIssueParent:B.a,text:"",onOpenChange:B.a,onSelect:B.a,onViewAllParentsClick:B.a};var me=Object(u.injectIntl)(pe),be=Object(c.a)([Object(m.a)({onToggle:"toggled",onClick:"clicked"}),Object(i.b)(e=>({projectId:Object(o.C)(e),issueTypes:Object(z.d)(e),issues:Object(q.a)(e),issueParents:Object(o.B)(e)}),e=>({fetchIssueParents:()=>{e(Object($.b)())},setIssueParent:(t,s)=>{e(s?Object($.f)(t,s):Object($.i)(t))},onViewAllParentsClick:()=>{e(Object($.h)())}}))])(me);const fe=e=>null===e?"":e.length>20?`${e.slice(0,20)}...`:e;var ge=Object(u.defineMessages)({addParent:{id:"issue.details.add-parent",defaultMessage:"Add {target}"},copy:{id:"issue.details.copy-to-clipboard",defaultMessage:"Copy link to issue"},rootProjectsLink:{id:"issue.details.root-projects-link",defaultMessage:"Projects"}}),he=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");const ye=Object(he.a)("div",{target:"e18k4ulk0"})({name:"sgt9w1",styles:"display:flex;flex-grow:0;overflow:visible;"}),Oe=Object(he.a)("span",{target:"e18k4ulk1"})("padding-right:",v.e,"px;display:flex;"),je=Object(he.a)("span",{target:"e18k4ulk2"})("border-radius:",v.a,"px;overflow:hidden;"),Ee=Object(he.a)(g.a,{target:"e18k4ulk3"})("opacity:0;transition:opacity 0.2s ease,transform 0.2s ease;transform:translate(-8px,0);",ye,":hover &{opacity:1;transform:translate(0,0);}&:focus{opacity:1;transform:translate(0,0);}"),ve=Object(he.a)("div",{target:"e18k4ulk4"})("display:flex;margin-left:-",v.e/2,"px;",e=>(e=>!0===e?"\n    & > div:last-child {\n        max-width: 200px;\n    }":"")(e.shouldTruncate)),ke=Object(he.a)("div",{target:"e18k4ulk5"})({name:"1id8hns",styles:"max-width:300px;"}),we=Object(he.a)("div",{target:"e18k4ulk6"})("color:",O.a.N100,";flex-shrink:0;padding:0 ",v.e,"px;text-align:center;width:",v.e,"px;"),Se=ye,Ie=Oe,Ce=je,Te=Ee,Pe=ve,_e=ke,xe=we;class De extends n.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.breadcrumbsItemRef=Object(n.createRef)(),this.onOpenChange=e=>{e!==this.state.isOpen&&this.setState({isOpen:e})},this.onClick=e=>{e.preventDefault(),this.setState(e=>({isOpen:!e.isOpen}))}}render(){const{issueTypeName:e,intl:{formatMessage:t}}=this.props,s=e&&"Epic"!==e?e:"Epic".toLowerCase();return a.a.createElement(a.a.Fragment,null,a.a.createElement(Pe,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-add-parent"},a.a.createElement(be,{clickRef:this.breadcrumbsItemRef,isOpen:this.state.isOpen,isOrphan:!0,issueTypeName:e,onOpenChange:this.onOpenChange,text:fe(t(ge.addParent,{target:s}))}),e?a.a.createElement(xe,null,"/"):null))}}De.displayName="BreadcrumbAddParent",De.defaultProps={issueTypeName:"Epic"};var Ae=Object(u.injectIntl)(De),Me=s("./node_modules/@atlaskit/icon/glyph/copy.js"),Le=s.n(Me),Re=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/field-copy-text/view.js"),Ne=s("./src/packages/issue/fields/summary/src/services/index.js"),Ue=s("./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js"),Fe=s("./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js"),Ve=s("./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js"),Ke=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),Be=s("./node_modules/reselect/lib/index.js");const We=Object(Be.createSelector)(o.E,L.g,(e,t)=>{const s=e&&e.issueTypes||[];return t.length?s.filter(e=>t.includes(e.id)):s}),He=Object(Be.createSelector)(o.I,e=>!(!e.issueType||!e.issueType.shouldShowIssueTypeList));var Ge=s("./node_modules/@atlaskit/droplist/dist/esm/components/Droplist.js"),$e=s("./node_modules/@atlaskit/item/dist/esm/components/Item.js"),qe=s("./node_modules/@atlaskit/item/dist/esm/components/ItemGroup.js"),ze=Object(u.defineMessages)({changeType:{id:"issue.details.change-issue-type",defaultMessage:"{issueType} - Change issue type"},changeTypeGroupName:{id:"issue.details.change-issue-type-groupname",defaultMessage:"Change Issue Type"}});class Ye extends n.Component{constructor(...e){super(...e),this.onOpenChange=({isOpen:e})=>{this.props.showIssueTypeList(!!e)},this.itemClick=e=>()=>{this.props.changeIssueType(this.props.issueKey,this.props.issueId,this.props.currentType,e),this.props.showIssueTypeList(!1)},this.toggleList=(e,t)=>{const{projectKey:s,isOpen:n}=this.props;s&&(n?this.props.showIssueTypeList(!1):(this.props.toggleListAnalytics(t),this.props.showIssueTypeList(!0)))}}static filterSubTaskTypePredicate(e,t){return!e.subtask||t.subtask}componentDidUpdate(e){const{isOpen:t,projectKey:s,loadIssueTypes:n}=this.props;e.isOpen!==t&&t&&s&&n(s)}createIssueTypeEntry(e,t){const s=a.a.createElement(se.a,{url:e.iconUrl,alt:e.name});return(a.a.createElement($e.a,{key:e.id,elemBefore:s,isDisabled:t,onClick:this.itemClick(e)},e.name))}createTriggerButton(e,t,s){const n=t&&t.name?t.name:"";return(a.a.createElement(te.a,{position:"top",content:e.formatMessage(ze.changeType,{issueType:n}),delay:0},a.a.createElement(g.a,{"aria-label":e.formatMessage(ze.changeType,{issueType:n}),spacing:"compact",appearance:"subtle",onClick:this.toggleList,iconBefore:s})))}renderIssueTypes(e){const{currentType:t}=this.props;if(e&&e.length>0){const s=e.filter(e=>e.id!==t.id).filter(e=>Ye.filterSubTaskTypePredicate(t,e)).map(e=>this.createIssueTypeEntry(e,!1));return s.unshift(this.createIssueTypeEntry(t,!0)),s}return null}render(){const{icon:e,intl:t,issueTypes:s,currentType:n,isOpen:i}=this.props,r=null==s||0===s.length;return a.a.createElement(Ge.a,{trigger:this.createTriggerButton(t,n,e),appearance:"default",position:"bottom left",isTriggerNotTabbable:!0,isLoading:r,onOpenChange:this.onOpenChange,isOpen:i},a.a.createElement(qe.a,{title:t.formatMessage(ze.changeTypeGroupName)},this.renderIssueTypes(s)))}}Ye.displayName="UnsafeIssueTypeChanger",Ye.displayName="IssueTypeChanger",Ye.defaultProps={isOpen:!1};const Qe=Object(u.injectIntl)(Object(Ke.a)()(Ye));var Je=p()(Object(m.a)({toggleListAnalytics:"changeIssueTypeDropdown"}),Object(b.a)("change-issue-type",{changeIssueType:"changeIssueType"}),Object(i.b)(e=>({issueTypes:We(e),currentType:Object(R.g)(e),projectKey:Object(o.D)(e),issueKey:Object(r.B)(e),issueId:Object(o.k)(e),isOpen:He(e)}),e=>({showIssueTypeList:t=>e(Object(Ve.d)(t)),loadIssueTypes:t=>e(Object(Ve.b)(t)),changeIssueType:(t,s,n,a,i)=>e(Object(Ve.g)(t,s,n,a,i))})))(Qe),Ze=Object(u.defineMessages)({uneditableIssueType:{id:"issue.details.uneditable-issue-type",defaultMessage:"{issueTypeName} - You cannot edit this issue type in this project."}}),Xe=Object(u.injectIntl)(Object(Ke.a)()(({intl:e,issueTypeIconUrl:t,issueTypeName:s})=>a.a.createElement(te.a,{position:"top",content:e.formatMessage(Ze.uneditableIssueType,{issueTypeName:s}),truncate:!0,delay:0},a.a.createElement(g.a,{spacing:"compact",appearance:"subtle",iconBefore:a.a.createElement(se.a,{url:t}),isDisabled:!0}))));const et=({isSimplifiedProject:e=!1,isIssueTypeFieldEditable:t=!1,issueKey:s=Object(G.l)(""),issueSummary:n="",issueTypeName:i="",issueTypeIconUrl:r="",relativeIssueUrl:o="",fullIssueUrl:c="",onClick:l=B.a,onCopyClick:u=B.a,intl:{formatMessage:d}})=>{const p=d(ge.copy),m=a.a.createElement(H.a,{key:"issueKeyBreadcrumbItem",href:o,onClick:l,text:s,target:"_blank"}),b=t?a.a.createElement(Je,{key:"issueTypeChanger",icon:a.a.createElement(se.a,{url:r,alt:i})}):a.a.createElement(Xe,{issueTypeName:i,issueTypeIconUrl:r}),[{value:f}]=Object(Ne.a)({issueKey:s}),g=Object(M.isExtractedSummaryFieldEnabled)()?f||"":n,h=e?a.a.createElement(te.a,{content:`${s}: ${g}`,position:"top",delay:0},m):m;return a.a.createElement(Fe.a,null,e=>a.a.createElement(Pe,{onMouseLeave:e.hide,onMouseEnter:e.show,onFocus:e.show,onBlur:e.hide,"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-current-issue-container"},b,h,(e=>e?a.a.createElement(Ue.a,{id:"BreadcrumbCurrentIssue",label:p,fullIssueUrl:c,onCopyClick:u,isVisible:e.isVisible}):a.a.createElement(Re.a,{label:p,tooltipDelay:0,tooltipLabel:p,tooltipLabelPosition:"top",shouldFitContainer:!0,value:c,hideFieldText:!0,remountOnChange:!0,onCopyClick:u},a.a.createElement(Te,{appearance:"subtle-link",iconBefore:a.a.createElement(Le.a,{size:"small",label:p}),spacing:"compact"})))(e)))};et.displayName="BreadcrumbCurrentIssue";var tt=Object(u.injectIntl)(et);class st extends n.Component{constructor(...e){super(...e),this.state={isHovered:!1},this.onHoveredChange=e=>()=>{this.setState({isHovered:e})}}renderBreadcrumbsItem(){const{isSimplifiedProject:e,parentIssue:t,issueHierarchyLevel:s,onClick:n}=this.props,{key:i,summary:r,url:o}=t;return a.a.createElement(te.a,{content:`${i}: ${r}`,position:"top",delay:0},a.a.createElement(H.a,{href:o,onClick:n,text:e?fe(0===s?r:i):i,truncationWidth:e?void 0:300,hasSeparator:!0}))}render(){const{isSimplifiedProject:e,isDisabled:t,parentIssue:s,issueHierarchyLevel:n}=this.props,{key:i,issueTypeName:r,issueTypeIconUrl:o}=s,c=this.renderBreadcrumbsItem();return e?a.a.createElement(Pe,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-parent-issue-container",onMouseEnter:t?void 0:this.onHoveredChange(!0),onMouseLeave:t?void 0:this.onHoveredChange(!1),shouldTruncate:!0},a.a.createElement(be,{isDisabled:t,issueKey:i,issueTypeName:r,issueTypeIconUrl:this.state.isHovered?"":o,issueHierarchyLevel:n,onSelect:this.onHoveredChange(!1)}),c):a.a.createElement("div",{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-parent-issue-container"},c)}}st.displayName="BreadcrumbParentIssue",st.defaultProps={isSimplifiedProject:!1,isDisabled:!0,issueHierarchyLevel:0,onClick:B.a};var nt=({isSimplifiedProject:e=!1,shouldShowProjectLevelBreadcrumb:t=!1,projectName:s="",projectUrl:n="",projectAvatarUrl:i="",onClick:r=B.a})=>{const o=Boolean(t&&s&&n),c=a.a.createElement(se.a,{url:i,alt:s}),l=a.a.createElement(Ie,null,a.a.createElement(Ce,null,c)),u=a.a.createElement(H.a,{href:n,onClick:r,text:e?fe(s):s,truncationWidth:0,iconBefore:l,hasSeparator:!0});return o&&a.a.createElement(_e,null,a.a.createElement(te.a,{content:s,position:"top",delay:0},u))};class at extends n.Component{constructor(...e){super(...e),this.onClick=e=>{this.props.onClick(e)},this.onProjectClick=e=>{if(e.ctrlKey||e.metaKey||e.shiftKey)return;e.preventDefault();const{projectUrl:t,onProjectClick:s}=this.props;t&&s(t,this.props.pushAction)},this.onParentClick=e=>t=>{if(t.ctrlKey||t.metaKey||t.shiftKey)return;t.preventDefault();const{onParentClick:s,issueKey:n}=this.props;s({childIssueKey:n,parentIssueKey:Object(G.l)(e),onIssueKeyChange:this.props.onIssueKeyChange})},this.onRootBreadcrumbClick=e=>{if(e.ctrlKey||e.metaKey||e.shiftKey)return;const{onRootBreadcrumbClick:t}=this.props;t()}}componentDidMount(){if(this.props.onExperienceSuccess(),this.props.parentIssues.length>0){const e=this.props.parentIssues.map(e=>e.key);this.props.prefetchParents(e)}}componentDidUpdate(e){const t=this.props.parentIssues.map(e=>e.key),s=e.parentIssues.map(e=>e.key);this.props.parentIssues.length>0&&!V()(s,t)&&this.props.prefetchParents(t)}render(){const{error:e,isSimplifiedProject:t,isLoadingComplete:s,shouldShowProjectLevelBreadcrumb:n,shouldShowRootProjectsBreadcrumb:i,projectName:r,projectUrl:o,projectAvatarUrl:c,parentIssues:l,isIssueTypeFieldEditable:u,issueKey:d,issueSummary:p,issueTypeName:m,issueTypeIconUrl:b,relativeIssueUrl:f,fullIssueUrl:g,onCopyClick:h,intl:{formatMessage:y},canLinkToParent:O,issueHierarchyLevel:j,parentLevelIssueTypeNames:E}=this.props,v=l.length>0,k=O&&null===e&&s,w=t&&0===j&&k,S=Object(M.isProjectsDirectoryPrettyUrlEnabled)()?"/jira/projects":"/secure/BrowseProjects.jspa";return a.a.createElement(Se,null,a.a.createElement(W.a,{maxItems:5},i&&a.a.createElement(H.a,{href:S,text:y(ge.rootProjectsLink),onClick:this.onRootBreadcrumbClick}),a.a.createElement(nt,{isSimplifiedProject:t,shouldShowProjectLevelBreadcrumb:n,projectName:r,projectUrl:o,projectAvatarUrl:c,onClick:this.onProjectClick}),v?l.map((e,s)=>a.a.createElement(st,{key:s,isSimplifiedProject:t,isDisabled:!k,parentIssue:e,issueHierarchyLevel:j,onClick:this.onParentClick(e?e.key:"")})):w&&a.a.createElement(Ae,{issueTypeName:E[0]}),a.a.createElement(tt,{isSimplifiedProject:t,isIssueTypeFieldEditable:u,issueKey:d,issueSummary:p,issueTypeName:m,issueTypeIconUrl:b,relativeIssueUrl:f,fullIssueUrl:g,onClick:this.onClick,onCopyClick:h})))}}function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}at.displayName="IssueBreadcrumbs",at.displayName="IssueBreadcrumbs",at.defaultProps={isSimplifiedProject:!1,isLoadingComplete:!1,issueSummary:"",issueTypeName:"",issueTypeIconUrl:"",issueHierarchyLevel:0,shouldShowRootProjectsBreadcrumb:!1,error:null,parentIssues:[],onCopyClick:B.a,onExperienceSuccess:B.a};const rt=e=>{const{push:t}=Object(f.o)();return(a.a.createElement(at,it({pushAction:t},e)))};rt.displayName="IssueBreadcrumbsWithPush";var ot=Object(c.a)([Object(I.a)("breadcrumbs",C.a.SCREEN),Object(U.c)("breadcrumbs"),Object(T.a)(e=>{const t=Object(r.b)(e);return{attributes:{issueHierarchyLevel:Object(L.d)(e),analyticsSource:`issue-view (${t?t.toString():"undefined"})`}}}),Object(b.a)("breadcrumbsItem",{onParentClick:"clicked",onClick:"clicked"}),Object(m.a)({onCopyClick:"copyUrlLink",onParentClick:"navigateToParentIssue",onClick:"navigateToCurrentIssue"}),Object(S.a)(e=>({onClick:()=>{e("full.issue.view")},onParentClick:()=>{e("parent-issue.view")},onProjectClick:()=>{e("project.view")},onRootBreadcrumbClick:()=>{e("projects-list.view")}})),u.injectIntl,Object(i.b)(e=>{const t=Object(o.u)(e);return{error:Object(o.h)(e),isSimplifiedProject:t,isLoadingComplete:Object(o.m)(e),issueKey:Object(r.B)(e),issueSummary:Object(A.o)("summary")(e)||"",relativeIssueUrl:Object(R.h)(e),fullIssueUrl:Object(R.a)(e),issueTypeName:Object(R.f)(e),issueTypeIconUrl:Object(R.d)(e),parentIssues:Object(R.b)(t)(e),projectName:Object(N.e)(e),projectUrl:Object(D.k)(Object(r.g)(e),Object(r.I)(e)),projectAvatarUrl:Object(N.a)(e),isIssueTypeFieldEditable:Object(R.c)(e),canLinkToParent:Object(L.a)(e),issueHierarchyLevel:Object(L.d)(e),parentLevelIssueTypeNames:Object(L.f)(e),onIssueKeyChange:Object(r.G)(e)}},e=>({onParentClick:({childIssueKey:t,parentIssueKey:s,onIssueKeyChange:n})=>{n&&n({fromIssueKey:t,toIssueKey:s,meta:{location:"breadcrumbs"}}),!Object(M.isRemoveDataProviderRefresh)()&&e(Object(_.b)(t,[])),__SPA__||e(Object(P.c)({fromIssueKey:t,toIssueKey:s}))},onProjectClick:(t,s)=>{e(Object(P.d)(t,s))},prefetchParents:t=>e(Object(x.a)({issueKeys:t}))}))])(rt),ct=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js");const lt=Object(E.default)(ct.b)(["margin-left:0;"]),ut=E.default.div(["display:flex;align-items:center;flex-grow:1;overflow:visible;font-size:",";[dir='rtl'] &{padding-left:0;padding-right:","px;}"],e=>e.isCompact?"12px":null,ct.d),dt=({error:e=null,isCompact:t,backButtonUrl:s,shouldShowProjectLevelBreadcrumb:n,shouldShowRootProjectsBreadcrumb:i=!1})=>null!==e?null:a.a.createElement(lt,null,a.a.createElement(ut,{isCompact:t},void 0!==s&&a.a.createElement(w,{url:s}),a.a.createElement(ot,{externalId:"issue",shouldShowProjectLevelBreadcrumb:n,shouldShowRootProjectsBreadcrumb:i})));dt.displayName="HeaderBreadcrumbsView";const pt=Object(c.a)([Object(i.b)(e=>({error:Object(o.h)(e),backButtonUrl:Object(r.f)(e)}),{}),l.a])(dt)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./node_modules/@atlaskit/page/dist/esm/GridColumn.js"),c=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),l=s("./src/packages/issue/issue-view/src/feature-flags.js"),u=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),d=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),p=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js"),m=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js"),b=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const g=2.5*f.e,h=b.default.div(["min-height:","px;margin-right:-","px;margin-bottom:","px;display:flex;justify-content:space-between;height:100%;align-items:center;"],4*f.e,g,f.e/4);class y extends n.Component{render(){const{shouldShowCloseButton:e,onClose:t,renderFeedback:s,isCompact:n,viewModeOptions:i,issueDeleteCallbacks:r,shouldShowProjectLevelBreadcrumb:c,shouldShowRootProjectsBreadcrumb:d}=this.props;return(a.a.createElement(u.a,{isCompact:n},a.a.createElement(o.a,{medium:Object(l.isSideBySideLabelsAndFieldsEnabled)()?10:12},a.a.createElement(h,null,a.a.createElement(m.a,{shouldShowProjectLevelBreadcrumb:c,shouldShowRootProjectsBreadcrumb:d,isCompact:n}),a.a.createElement(p.a,{renderFeedback:s,issueDeleteCallbacks:r,viewModeOptions:i,onClose:t,shouldShowCloseButton:e,isCompact:n})))))}}y.displayName="HeaderItemWithoutCompactMode",y.displayName="Header",y.defaultProps={issueDeleteCallbacks:{},shouldShowCloseButton:!1,shouldShowProjectLevelBreadcrumb:!1,shouldShowRootProjectsBreadcrumb:!1,renderFeedback:()=>null,viewModeOptions:{viewModeSwitchEnabled:!1},onClose:r.a};t.a=Object(c.a)([d.a])(y)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/modal-close-button.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js"),o=s("./node_modules/@atlaskit/icon/glyph/cross.js"),c=s.n(o),l=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js");const u=Object(i.defineMessages)({label:{id:"issue.label-for-modal-close-button",defaultMessage:"Close"}});class d extends n.PureComponent{render(){const e=this.props.intl.formatMessage(u.label),t=a.a.createElement(c.a,{label:"",size:"medium"});return a.a.createElement("div",null,a.a.createElement(l.a,{content:e,position:"top"},a.a.createElement(r.a,{"aria-label":e,appearance:"subtle",spacing:"default",iconBefore:t,onClick:this.props.onClose})))}}d.displayName="ModalActionsCloseButton",t.a=Object(i.injectIntl)(d)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const i=n.default.span(["margin-right:","px;"],a.e),r=n.default.span(["padding:","px;margin-left:","px;margin-right:","px;"],e=>e.compactMode?a.e/2:0,e=>e.compactMode?0:-4,e=>e.compactMode?0:-2)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js"),r=s("./src/packages/servicedesk/common/src/global-spotlight-target/index.js"),o=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/styled.js");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class p extends n.Component{render(){const{id:e,icon:t,onClick:s,extraAttributes:n,label:l,compactMode:d,testId:p,hasGlobalSpotlightTarget:m}=this.props,b=a.a.createElement(i.a,{"aria-label":l,spacing:d?"none":"default",iconBefore:a.a.createElement(o.b,{compactMode:d},t),onClick:s,theme:(e,t)=>{const s=e(t);return u(u({},s),{},{buttonStyles:u(u({},s.buttonStyles),{},{margin:0})})}},!d&&l),f=a.a.createElement(r.a,{id:`global-spotlight-target-${e}`},b);return a.a.createElement(o.a,c({},n,{"data-test-id":p}),m?f:b)}}p.displayName="View",p.defaultProps={hasGlobalSpotlightTarget:!1,extraAttributes:{},label:"",compactMode:!0,testId:void 0}},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-create-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-create-icon.b72a10e724bc55a4d580df6e4dc082f7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-icon.42c8f6da75b54a565bcc0061425abdb6.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-create-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-create-icon.b72a10e724bc55a4d580df6e4dc082f7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-icon.42c8f6da75b54a565bcc0061425abdb6.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js":function(e,t,s){"use strict";t.a=e=>"context"===e},"./src/packages/issue/issue-view/src/views/issue-details/app-provider/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/flow.js"),a=s.n(n),i=s("./src/packages/platform/services/issue/src/components/context/consumer.js"),r=s("./node_modules/react/index.js"),o=s.n(r),c=s("./src/packages/platform/controllers/spa-state/src/components/transition-state/index.js");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var u=s("./src/packages/issue/issue-view/src/common/metrics/context/index.js"),d=s("./node_modules/lodash/noop.js"),p=s.n(d),m=s("./node_modules/react-resource-router/build/esm/index.js"),b=s("./src/packages/platform/utils/app-base/src/index.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),g=s("./src/packages/common-legacy-do-not-add-anything-new/src/redux-disposable/index.js"),h=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),y=s("./src/packages/growth/cross-flow/src/services/cross-flow-provider/index.js"),O=s("./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js"),j=s("./src/packages/issue/issue-context-service/src/main.js"),E=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),v=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),k=s("./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js"),w=s("./src/packages/issue/issue-scroll/src/services/main.js"),S=s("./src/packages/issue/issue-tabs/src/services/main.js"),I=s("./src/packages/issue/user-preferences-services/src/main.js"),C=s("./src/packages/issue/issue-view-layout/src/services/main.js"),T=s("./src/packages/issue/permissions-service/src/main.js"),P=s("./src/packages/issue/project-context-service/src/main.js"),_=s("./src/packages/platform/services/issue/src/service/index.js"),x=s("./src/packages/issue/jira-settings-service/src/main.js"),D=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),A=s("./src/packages/issue/worklog/src/services/store/index.js");const M=e=>({type:"SET_CONTEXT",payload:e});var L=s("./src/packages/issue/issue-view/src/actions/external-actions.js"),R=s("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),N=s("./src/packages/issue/issue-view/src/common/metrics/index.js"),U=s("./src/packages/issue/issue-view/src/feature-flags.js"),F=s("./src/packages/issue/issue-view/src/layout-descriptor/view/context/view.js"),V=s("./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js"),K=s("./node_modules/react-sweet-state/lib/esm/index.js");const B=e=>!!(e&&e.savedAt>Date.now()-36e5),W=()=>({setState:e,getState:t})=>{const s=t();Object.entries(s).forEach(([t,s])=>{B(s)||e({[t]:void 0})})},H={setRecentIssue:(e,t)=>({setState:s,dispatch:n})=>{n(W()),s({[String(e)]:{issueState:t,savedAt:Date.now()}})},getRecentIssue:e=>({getState:t,dispatch:s})=>{s(W());const n=t()[e];return B(n)?null==n?void 0:n.issueState:void 0},getRecentIssuesCount:()=>({getState:e})=>{const t=e();return Object.values(t).filter(Boolean).length}},G=Object(K.d)({name:"recent-issues",initialState:{},actions:H}),$=Object(K.c)(G,{selector:null});var q=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/index.js"),z=s("./node_modules/react-redux/es/index.js");const Y=e=>({type:"FETCH_SCREENID_SUCCESS",payload:e&&e.data});var Q=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");var J=Object(z.b)(e=>({isSimplifiedProject:Object(Q.u)(e)}),{fetchScreenIdRequest:()=>({type:"FETCH_SCREENID_REQUEST"})})(e=>{const{fetchScreenIdRequest:t,isSimplifiedProject:s}=e;return Object(r.useEffect)(()=>{s||t()},[t,s]),null}),Z=s("./node_modules/lodash/join.js"),X=s.n(Z),ee=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),te=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),se=s("./src/packages/realtime/src/common/constants/events.js"),ne=s("./src/packages/realtime/src/index.js");var ae=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),ie=s("./node_modules/reselect/lib/index.js"),re=s("./src/packages/realtime/src/common/utils/pubsub.utils.js");const oe=Object(ie.createSelector)(ae.j,Q.C,(e,t)=>[Object(re.a)(e,t)]);function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function le(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ue=[se.g,se.b];var de=Object(z.b)(e=>({channels:oe(e),cloudId:Object(ae.j)(e),projectId:Object(Q.C)(e),issueId:Object(ae.A)(e)}),{realtimeUpdateCurrentIssue:e=>({type:"REALTIME_UPDATE_CURRENT_ISSUE",payload:e})},(e,t)=>({channels:e.channels,events:ue,cloudId:e.cloudId,projectId:e.projectId,onJoin:(t,s)=>{Object(te.b)(s,"channel joined","Realtime",{cloudId:new ee.a(e.cloudId),projectId:e.projectId,issueId:new ee.a(e.issueId),channels:new ee.a(X()(e.channels))})},onReceive:(s,n)=>{s&&s.payload.issueId===Number(e.issueId)&&(t.realtimeUpdateCurrentIssue({atlassianId:s.payload.atlassianId,updateType:s.type}),Object(te.b)(n,"event received","Realtime",{cloudId:new ee.a(e.cloudId),projectId:e.projectId,issueId:new ee.a(e.issueId),eventType:new ee.a(s.type)}))},onLeave:(t,s)=>{Object(te.b)(s,"channel left","Realtime",{cloudId:new ee.a(e.cloudId),projectId:e.projectId,issueId:new ee.a(e.issueId),channels:new ee.a(X()(e.channels))})}}))(e=>{let{cloudId:t,projectId:s}=e,n=le(e,["cloudId","projectId"]);return t&&s?o.a.createElement(ne.a,ce({appId:"issue-view"},n)):null}),pe=s("./node_modules/history/createBrowserHistory.js"),me=s.n(pe),be=s("./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js"),fe=s("./src/packages/issue/issue-view/src/actions/issue-preview-actions.js"),ge=s("./src/packages/issue/issue-view/src/actions/issue-remote-data-actions.js");const he=(e,t)=>({type:"FETCH_LOGGED_IN_USER_SUCCESS",payload:{user:e,applicationRoles:t}});var ye=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js");const Oe=e=>({type:"PREVIEW_DATA_FETCHED",payload:e});var je=s("./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js"),Ee=s("./src/packages/platform/utils/constants/src/fetch-default-options-with-strict-mode.js"),ve=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),ke=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");function we(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Se(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ie=(e,t,s)=>Object(ke.a)(((e,t,s)=>null!=s?`${e}/rest/api/2/project/${t}/properties/@atlassain.polaris.project.enabled?sessionId=${s}`:`${e}/rest/api/2/project/${t}/properties/@atlassain.polaris.project.enabled`)(e,t,s),function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?we(Object(s),!0).forEach((function(t){Se(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):we(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Ee.a)).then(e=>!!(e&&"key"in e&&"@atlassain.polaris.project.enabled"===e.key&&!0===e.value)||(ve.a.safeWarn("isPolarisProjectCheck","Request succeed but response is not expected",e),!1)).catch(e=>(404!==e.statusCode&&ve.a.safeError("isPolarisProjectCheck",`Request failed with code: ${e.statusCode}`,e),!1));var Ce=s("./node_modules/redux/es/index.js"),Te=s("./node_modules/redux-batched-actions/lib/index.js"),Pe=s("./node_modules/redux-observable/lib/es/index.js"),_e=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),xe=s("./src/packages/platform/utils/types/src/general.js"),De=s("./node_modules/rxjs/Rx.js"),Ae=s("./src/packages/platform/observability/analytics-web-react/src/utils/fire-track-event.js"),Me=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),Le=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),Re=s("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js");const Ne=e=>"string"==typeof e?""!==e.trim():!Object(Me.f)(e);var Ue=e=>{const{comment:t}=e;return!!t&&("string"==typeof t?""!==t.trim():!Object(Me.f)(t))},Fe=s("./node_modules/moment/moment.js"),Ve=s.n(Fe);const Ke=e=>{const{accountId:t,displayName:s=null,avatarUrls:n=null}=e;return{accountId:t,displayName:s,avatarUrl:n&&n["48x48"]}},Be=e=>{const{id:t,author:s=null,updateAuthor:n=null,timeSpent:a,started:i,created:r,updated:o,comment:c=null}=e,l=o!==r;return{id:t,author:s&&Ke(s),timeSpent:a,started:Ve()(i).valueOf(),updated:l?Ve()(o).valueOf():null,updateAuthor:l&&n?Ke(n):null,comment:Object(Me.g)(c)}},We=e=>e.map(Be);var He=s("./node_modules/lodash/omitBy.js"),Ge=s.n(He),$e=s("./node_modules/query-string/index.js"),qe=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const ze=(e,t)=>`${e}/rest/internal/3/issue/${t}/worklog`,Ye=e=>!e;var Qe=s("./src/packages/platform/utils/xsrf-token/src/index.js"),Je=s("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js");function Ze(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Xe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(s),!0).forEach((function(t){et(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ze(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function et(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var tt=Object(Pe.combineEpics)((e,t)=>e.ofType(Je.a).switchMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=Object(xe.l)(Object(ae.B)(s)),i=Object(Le.h)(s),r=Object(Le.i)(s),o=Object(Re.a)(i.daysPerWeek,i.hoursPerDay),{payload:{values:c},meta:{analyticsEvent:l}}=e,{timeRemaining:u,workDescription:d}=c||{},p=!!Ne(d)&&Object(Me.d)(d);return De.Observable.from(((e,t,s)=>{const{timeLogged:n,workDescription:a,timeRemaining:i,dateStarted:r}=s||{},o=Ge()({adjustEstimate:i?"new":"auto",newEstimate:i},Ye),c=`${ze(e,t)}?${Object($e.stringify)(o)}`;return Object(qe.d)(c,{body:JSON.stringify({timeSpent:n,comment:a,started:s.dateStarted?Ve()(r).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"):void 0})})})(n,a,c)).mergeMap(e=>{const t=Be(e),s=Ue(t);Object(Ae.a)(l,{action:"added",actionSubjectId:t.id,attributes:{withComment:s}});const n=(r.timeSpentSeconds||0)+e.timeSpentSeconds,a=o(u),i=Xe(Xe({},r),{},{timeSpentSeconds:n},null!==a?{remainingEstimateSeconds:a}:{});return De.Observable.of(Object(Je.n)(e.id,i,{shouldFetchViewContext:p}),Object(Je.A)(e.id))}).catch(e=>{const{timeLogged:t}=c,s={logTimeLength:t&&t.length,remainingTimeLength:u&&u.length};return _e.i.safeError("issue.activity.worklog.add-worklog",`Failed to save new worklog with input lengths: ${JSON.stringify(s)}`,e),De.Observable.of(Object(Je.l)())})}),(e,t)=>e.ofType(Je.k).switchMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=Object(Q.k)(s),i=Object(Le.h)(s),r=Object(Re.a)(i.daysPerWeek,i.hoursPerDay),{payload:{timeRemaining:o},meta:{analyticsEvent:c}}=e;return De.Observable.from(((e,t,s)=>Object(qe.d)(`${e}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object($e.stringify)({issueId:t,timetracking_remainingestimate:s,timetracking_targetsubfield:"timetracking_remainingestimate",fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(Qe.a)()})}))(n,a,o)).do(()=>{Object(Ae.a)(c,{action:"time-remaining-updated"})}).map(()=>Object(Je.L)(r(o))).catch(e=>{const t=o&&o.length;return _e.i.safeError("issue.activity.worklog.update-time-remaining",`Failed to update time remaining with input length: ${t}`,e),De.Observable.of(Object(Je.J)())})})),st=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),nt=(e,t,s,n,a)=>((e,t,s,n,a)=>Object(qe.a)(`${ze(e,t)}/${s}?adjustEstimate=${a?`new&newEstimate=${n}`:"leave"}`))(e,t,s,n,a);const at=(e,t)=>e.ofType(Je.c).switchMap(()=>{const e=t.getState();if(Object(Le.g)(e).length>0)return De.Observable.empty();const s=Object(ae.g)(e),n=Object(ae.B)(e),a=Object(Le.n)(e),i=Object(Le.k)(e);return a>0?De.Observable.of(Object(Je.w)(s,n)):i>a?De.Observable.of(Object(Je.y)(s,n)):De.Observable.empty()}),it=e=>(t,s)=>t.ofType(Je.b).switchMap(({payload:{worklogId:t,timeRemaining:n,isAdjustTimeRemainingChecked:a},meta:{analyticsEvent:i}})=>{const r=s.getState(),o=Object(ae.g)(r),c=Object(xe.l)(Object(ae.B)(r)),l=Object(Le.m)(r)[t],u=l&&l.comment,d=null!==u&&Object(Me.d)(u);return De.Observable.from(nt(o,c,t,n,a)).map(()=>{const s=Object(Le.m)(r)[t];return d&&e.refreshAttachments(Object(xe.l)(c)),Object(Je.r)(t,((e,t,s)=>{const n=Object(Le.h)(e),a=Object(Re.a)(n.daysPerWeek,n.hoursPerDay);return{timeSpentSecondsDelta:-(a(t.timeSpent)||0),newRemainingEstimateSeconds:a(s)}})(r,s,n))}).do(()=>Object(Ae.a)(i,{action:"deleted",actionSubjectId:t,attributes:{timeAdjusted:a}})).catch(e=>(_e.i.safeError("issue.activity.worklog.delete-worklog",`Could not delete worklog '${t}'`,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(Je.p)())))});const rt=()=>({type:"FETCH_VIEW_CONTEXT_REQUEST"}),ot=e=>({type:"FETCH_VIEW_CONTEXT_SUCCESS",payload:e}),ct=e=>({type:"FETCH_VIEW_CONTEXT_FAILURE",payload:{error:e}}),lt=()=>({type:"MARK_TOKEN_AS_OUTDATED"});var ut=s("./node_modules/lodash/isUndefined.js"),dt=s.n(ut);var pt=(e,t,s,n)=>Object(qe.e)(((e,t,s,n)=>{const a=n.timeRemaining?`?adjustEstimate=new&newEstimate=${n.timeRemaining}`:"?adjustEstimate=leave";return`${ze(e,t)}/${s}${a}`})(e,t,s,n),(e=>({body:JSON.stringify(Ge()({timeSpent:e.timeLogged,started:e.dateStarted?Ve()(e.dateStarted).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"):void 0,comment:e.workDescription},dt.a))}))(n));function mt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(s),!0).forEach((function(t){ft(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ft(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var gt=(e,t)=>e.ofType(Je.d).switchMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=Object(xe.l)(Object(ae.B)(s)),i=Object(Le.m)(s),{payload:{worklogId:r,values:o},meta:{analyticsEvent:c}}=e;let l=!1;return Ne(o.workDescription)&&(l=Object(Me.e)(i[r].comment,o.workDescription),l&&t.dispatch(lt())),De.Observable.from(((e,t,s,n)=>pt(e,t,s,n).then(e=>Be(e)))(n,a,r,o)).do(e=>{const t=Ue(e);Object(Ae.a)(c,{action:"edited",actionSubjectId:r,attributes:{withComment:t}})}).mergeMap(e=>{const t=bt(bt({},i),{},{[r]:e}),n=Object(Je.v)(t,e.id,((e,t,s)=>{const n=Object(Le.h)(e),a=Object(Re.a)(n.daysPerWeek,n.hoursPerDay),i=Object(Le.m)(e)[t.id];if(!i)return _e.i.safeError("issue.activity.worklog.edit-worklog","Could not find existing worklog with matching ID when editing a worklog and calculating time tracking deltas."),{timeSpentSecondsDelta:0,newRemainingEstimateSeconds:a(s)};const r=a(i.timeSpent)||0;return{timeSpentSecondsDelta:(a(t.timeSpent)||0)-r,newRemainingEstimateSeconds:a(s)}})(s,e,o.timeRemaining),{shouldFetchViewContext:l});return e.started!==i[r].started?De.Observable.of(n,Object(Je.A)(r)):De.Observable.of(n)}).catch(e=>(_e.i.safeError("issue.activity.worklog.edit-worklog","Failed to save edited worklog:",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(Je.t)())))}),ht=s("./src/packages/platform/observability/analytics-web-react/src/utils/fire-operational-event.js");const yt=(e,t,s)=>`\n    query {\n        viewIssue(issueKey: "${e}") {\n            worklogs (startAt: ${t}, maxResults: ${s}, orderBy: "-started") {\n                nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                timeSpent\n                started\n                updated\n                created\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                comment\n            }\n            totalCount\n            startIndex\n            }\n        }\n    }\n`,Ot=(e,t)=>`\n    query {\n        viewIssue(issueKey: "${e}") {\n            worklogs (worklogId: "${t}", orderBy: "-started") {\n                nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                created\n                started\n                updated\n                comment\n                timeSpent\n                timeSpentSeconds\n            }\n            totalCount\n            startIndex\n            }\n        }\n    }\n`;function jt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Et(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(s),!0).forEach((function(t){vt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function kt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const wt=e=>{const{totalCount:t,nodes:s,startIndex:n}=e.data.viewIssue.worklogs,a=s.map(e=>{let{updateAuthor:t=null,updated:s,comment:n,created:a}=e;const i=s!==a;return Et(Et({},kt(e,["updateAuthor","updated","comment","created"])),{},{updated:i?s:null,updateAuthor:i&&t?t:null,comment:Object(Me.a)(n)})});return{totalWorklogs:t,sortedWorklogIds:a.map(e=>e.id).reverse(),worklogs:a.reduce((e,t)=>Et(Et({},e),{},{[t.id]:t}),{}),startIndex:n||0}},St=(e,t,s)=>((e,t,s)=>Object(qe.d)(`${e}/rest/gira/1/`,{body:JSON.stringify({query:Ot(t,s),variables:{issueKey:t}})}))(e,t,s).then(wt);var It=(e,t,s,n)=>((e,t,s,n)=>Object(qe.d)(`${e}/rest/gira/1/`,{body:JSON.stringify({query:yt(t,s,n),variables:{issueKey:t}})}))(e,t,s,n).then(wt);const Ct=(e,t,s,n,a,i)=>De.Observable.from(It(e,t,n,a)).do(e=>{s&&Object(ht.a)(s,{attributes:{worklogItemCount:e.worklogs.length}})}).map(({worklogs:e,totalWorklogs:t,sortedWorklogIds:s})=>i(s,e,t)).catch(e=>(_e.i.safeError("issue.activity.worklog.fetch-more-worklogs","Could not fetch more worklogs:",new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),De.Observable.of(Object(Je.D)()))),Tt=(e,t)=>e.ofType(Je.f).switchMap(({payload:{baseUrl:e,issueKey:s,analyticsEvent:n}})=>{const a=t.getState(),i=Object(Le.n)(a),r=Object(Le.g)(a).length;return Ct(e,s,n,i+r,10,Je.z)}),Pt=(e,t)=>e.ofType(Je.e).switchMap(({payload:{baseUrl:e,issueKey:s,analyticsEvent:n}})=>{const a=t.getState(),i=Object(Le.n)(a);return Ct(e,s,n,i>10?i-10:0,i>10?10:i,Je.x)});var _t=s("./src/packages/platform/ui/flags/src/index.js"),xt=s("./src/packages/issue/issue-actions/activity-feed/src/messages.js"),Dt=s("./src/packages/issue/issue-scroll/src/services/types.js"),At=s("./src/packages/platform/utils/permalinks/src/index.js"),Mt=s("./src/packages/platform/utils/permalinks/src/constants.js"),Lt=s("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),Rt=s("./src/packages/issue/issue-view/src/common/messages/flags.js");const Nt=(e,t)=>e.ofType(Je.g).switchMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=Object(xe.l)(Object(ae.B)(s)),{payload:i}=e;return De.Observable.from(St(n,a,i.worklogId)).map(({totalWorklogs:e,worklogs:t,sortedWorklogIds:s,startIndex:n})=>Object(Je.C)(s,t,n||0,e)).catch(e=>(_e.i.safeError("issue.activity.worklog.fetch-worklog-by-id","Failed to load worklog list after adding new worklog",e),De.Observable.of(Object(Je.B)())))});var Ut=(e,t,s,n,a)=>((e,t,s,n,a)=>Object(qe.b)(`${ze(e,t)}?startAt=${s}&reverseSortOrder=${a?"true":"false"}${n?`&maxResults=${n}`:""}`))(e,t,s,n,a).then(e=>(e=>({totalWorklogs:e.total,worklogs:We(e.worklogs)}))(e));function Ft(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(s),!0).forEach((function(t){Kt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ft(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Kt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Bt=(e,t,s,n,a)=>De.Observable.from(Ut(e,t,n,a,!0)).do(e=>Object(ht.a)(s,{attributes:{worklogItemCount:e.worklogs.length}})).map(({totalWorklogs:e,worklogs:t})=>Object(Je.G)(t.map(e=>e.id),t.reduce((e,t)=>Vt(Vt({},e),{},{[t.id]:t}),{}),e)).catch(e=>(_e.i.safeError("issue.activity.worklog.fetch-worklogs","Could not fetch worklogs:",new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),De.Observable.of(Object(Je.D)()))),Wt=(e,t)=>e.ofType(Je.h,Je.j).switchMap(({payload:{baseUrl:e,issueKey:s},meta:{analyticsEvent:n}})=>{const a=t.getState(),i=Object(Le.g)(a).length;return Bt(e,s,n,i,10)}),Ht=e=>e.ofType(Je.i).switchMap(({payload:{baseUrl:e,issueKey:t},meta:{analyticsEvent:s}})=>Bt(e,t,s,0,5)),Gt=(e,t)=>Object(Pe.combineEpics)(tt,Wt,Ht,Nt,(e=>(t,s)=>t.ofType("SCROLL_TO_ATTACHMENT_WORKLOG").switchMap(()=>{const t=s.getState(),n=Object(ae.g)(t),a=Object(xe.l)(Object(ae.B)(t)),i=e.getScrollTargetId(Dt.a.WORKLOG);return null===i?De.Observable.of():De.Observable.from(St(n,a,i)).flatMap(({totalWorklogs:t,worklogs:s,sortedWorklogIds:n,startIndex:a})=>{const r={key:"Worklog",type:"Worklog",name:xt.a.worklog.defaultMessage};return window.history.replaceState({},null,Object(At.c)(i,Mt.b.WORKLOG)),e.setScrollTarget(null),De.Observable.of(Object(Je.C)(n,s,a||0,t),Object(Lt.a)(r),Object(Je.I)(!1))}).catch(e=>{_e.i.safeError("issue.activity.worklog.fetch-worklog-by-id","Failed to load worklog list after attempting worklog attachment fetch",e);const{showFlag:t}=Object(_t.useFlagsService)();return t({type:"error",title:[Rt.a.commentWorklogAttachmentFetchFailedTitle,{field:"worklog"}],description:Rt.a.commentWorklogAttachmentFetchFailedDescription,isAutoDismiss:!0}),De.Observable.of(Object(Je.B)())})}))(t),gt,(e=>Object(Pe.combineEpics)(it(e),at))(e),Pt,Tt),$t=(e,t)=>Gt(e,t);var qt=s("./node_modules/rxjs/operators.js"),zt=s("./node_modules/lodash/curry.js");const Yt=({meta:{batch:e}={}})=>!0===e,Qt=s.n(zt)()((e,{type:t})=>e.includes(t));var Jt=(...e)=>t=>t.pipe(Object(qt.filter)(t=>Yt(t)?t.payload.some(Qt(e)):e.includes(t.type)),Object(qt.flatMap)(t=>Yt(t)?De.Observable.from(t.payload.filter(Qt(e))):De.Observable.of(t))),Zt=s("./node_modules/icepick/icepick.js"),Xt=s("./src/packages/platform/utils/constants/src/issue-link-types.js"),es=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),ts=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),ss=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),ns=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),as=e=>/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i.test(e);function is(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function rs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?is(Object(s),!0).forEach((function(t){os(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):is(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function os(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const cs=Object(_e.j)("comment","description"),ls=e=>{switch(e){case"AUTHENTICATION_ERROR":return"AUTHENTICATION";case"NOT_FOUND_OR_NO_PERMISSION_ERROR":return"PERMISSION";case"UNKNOWN_ERROR":case"CONNECTIVITY_ERROR":default:return"GENERIC"}},us=Object(_e.j)("AUTHENTICATION","PERMISSION","GENERIC"),ds=Object(_e.j)("assignee","labels","priority","components","fixVersions","versions","com.pyxis.greenhopper.jira:gh-sprint","duedate","com.pyxis.greenhopper.jira:gh-epic-link","reporter","com.atlassian.jira.plugin.system.customfieldtypes:storypoint","description","watches","summary","timeoriginalestimate","timetracking","com.atlassian.jira.plugin.system.customfieldtypes:labels","com.atlassian.jira.plugin.system.customfieldtypes:textfield","com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","com.atlassian.jira.plugin.system.customfieldtypes:url","com.atlassian.jira.plugin.system.customfieldtypes:float","com.pyxis.greenhopper.jira:jsw-story-points","com.atlassian.jira.plugin.system.customfieldtypes:select","com.atlassian.jira.plugin.system.customfieldtypes:multiselect","com.atlassian.jira.plugin.system.customfieldtypes:version","com.atlassian.jira.plugin.system.customfieldtypes:textarea","com.atlassian.jira.plugin.system.customfieldtypes:multiversion","com.atlassian.jira.plugin.system.customfieldtypes:datepicker","com.atlassian.jira.plugin.system.customfieldtypes:grouppicker","com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker","com.atlassian.jira.plugin.system.customfieldtypes:userpicker","com.atlassian.jira.plugin.system.customfieldtypes:flagged","com.atlassian.jira.plugin.system.customfieldtypes:datetime","com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons","com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color","com.atlassian.servicedesk:vp-origin","com.atlassian.servicedesk.assets-plugin:assetfield","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype","com.atlassian.servicedesk:sd-request-participants","com.atlassian.servicedesk:sd-customer-organizations","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language","com.atlassian.jira.plugin.system.customfieldtypes:people","com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect"),ps=e=>t=>({eventData:Object(V.a)(t),eventNameSuffix:e}),ms=e=>e.startsWith("comment")?"comment":e,bs=e=>(t,s)=>{const{payload:{fieldId:n}}=s,a=null!==n&&ms(n);return{eventNameSuffix:e,eventData:{type:cs(a)}}},fs=e=>(t,s)=>{const{payload:{fieldId:n}}=s,a=null!=n?ms(n):n;return{eventNameSuffix:e,eventData:{type:cs(a)}}},gs=e=>["updatedField","oldValId","newValId","oldValName","newValName"].filter(t=>e&&Object.hasOwnProperty.call(e,t)).reduce((t,s)=>{const n=e[s]?{[s]:e[s]}:{};return rs(rs({},t),n)},{}),hs=e=>({eventData:{commentCount:Object(ss.J)(e)}}),ys=e=>{const t=(e=>e?JSON.stringify(e).length:0)(e.bodyAdf);return{isInternal:e.isInternal,charactersInCommentCount:t}};var Os={SAVE_LINKED_ISSUE_REQUEST:(e,t)=>Object(Zt.merge)(ps("issue-links.save.request"),((e,t)=>{const{payload:{newIssueLinks:{issueLinkType:s,issueLinks:n}}}=t,a=(null!=n&&null!==n.linkedIssues&&void 0!==n.linkedIssues&&Object.keys(n.linkedIssues).length>0?Object.keys(n.linkedIssues).map(e=>n.linkedIssues[e].issueId):[""])[0];return{eventData:{issueLinkTypeId:s.id,issueLinkTypeName:new ee.a(Object(Xt.a)(s.label)),issueLinkLinkedIssueId:a}}})(0,t)),SAVE_REMOTE_LINKED_ISSUE_REQUEST:ps("issue-links.save.request"),DELETE_LINKED_ISSUE_REQUEST:(e,t)=>Object(Zt.merge)(ps("issue-links.delete.request"),(e=>({eventData:{issueLinkTypeId:e.typeId,issueLinkTypeName:new ee.a(Object(Xt.a)(e.typeName))}}))(Object(ns.g)(t.payload.linkedIssueId)(e))),SAVE_LINKED_ISSUE_SUCCESS:ps("issue-links.save.success"),SAVE_LINKED_ISSUE_FAILURE:ps("issue-links.save.failure"),SAVE_REMOTE_LINKED_ISSUE_SUCCESS:ps("issue-links.save.success"),SAVE_REMOTE_LINKED_ISSUE_FAILURE:ps("issue-links.save.failure"),SAVE_LINKED_ISSUE_RETRY:ps("issue-links.save.retry"),SAVE_REMOTE_LINKED_ISSUE_RETRY:ps("issue-links.save.retry"),SAVE_LINKED_ISSUE_CANCEL:ps("issue-links.save.cancel"),SHOW_DELETE_COMMENT_MODAL:ps("comment.delete.linkclicked"),FETCH_OLDER_COMMENTS_REQUEST:ps("comment.fetcholder.click"),FETCH_NEWER_COMMENTS_REQUEST:ps("comment.fetchnewer.click"),EDIT_COMMENT_BEGIN:e=>ps("comment.edit.linkclicked")(e),SAVE_COMMENT_SUCCESS:(e,t)=>Object(Zt.merge)(ps("comment.save.success")(e),{eventData:rs(rs({},gs(t.payload)),{},{actionSubjectId:new ee.a(t.payload.comment.id),actionSubjectOptimisticId:new ee.a(t.payload.optimisticId)},ys(t.payload.comment))}),DELETE_COMMENT_REQUEST:(e,t)=>Object(Zt.merge)(ps("comment.delete.modal.confirm")(e),{eventData:rs(rs({},gs(t.payload)),{},{actionSubjectId:new ee.a(t.payload.id)})}),PASTED_INTO_COMMENT_FORM:(e,t)=>Object(Zt.merge)(ps("comment.paste")(e),{eventData:{isNewComment:"NEW_OPTIMISTIC_COMMENT"===t.payload.id,pastedContentLength:(t.payload.pastedContent||"").length,containsEmailAddress:as(t.payload.pastedContent)}}),FETCH_ISSUE_SUCCESS:e=>Object(Zt.merge)(ps("fetchissue.succeeded")(e),hs(e)),REFRESH_ISSUE_SUCCESS:e=>Object(Zt.merge)(ps("refreshissue.succeeded")(e),hs(e)),REFRESH_ISSUE_REQUEST:ps("refreshissue.request"),FETCH_ISSUE_REQUEST:ps("fetchissue.request"),LOAD_NEW_ISSUE:ps("load-new-issue"),FETCH_ISSUE_FAILURE:(e,t)=>({eventNameSuffix:"fetchissue.failed",eventData:{error:us(ls(Object(Q.h)(e))),statusCode:t.payload.statusCode,analyticsSource:Object(ae.b)(e)}}),DELETE_DRAFT_REQUEST:bs("issue.delete-draft.request"),DELETE_DRAFT_SUCCESS:bs("issue.delete-draft.success"),DELETE_DRAFT_FAILURE:bs("issue.delete-draft.failure"),DELETE_DRAFT_NEWER_CONTENT_FOUND:bs("issue.delete-draft.replaced-by-new-content"),LOAD_DRAFT_SUCCESS:fs("issue.load-draft.success"),LOAD_DRAFT_FAILURE:fs("issue.load-draft.failure"),LOGIN_SUCCESSFUL:e=>({eventNameSuffix:"login.succeeded",eventData:{analyticsSource:Object(ae.b)(e)}}),FIELD_EDIT_BEGIN:(e,t)=>Object(Zt.merge)(ps("field.edit")(e),{eventData:{fieldType:ds(Object(es.r)(t.payload.fieldId)(e)),fieldEditSessionId:new ee.a(t.payload.fieldEditSessionId),isReusableField:!0}}),FIELD_SAVE_REQUEST:(e,t)=>Object(Zt.merge)(ps("field.save")(e),{eventData:rs({fieldType:ds(Object(es.r)(t.payload.fieldId)(e)),fieldEditSessionId:new ee.a(Object(es.f)(t.payload.fieldId)(e)),isReusableField:!0,issueHierarchyLevel:Object(ts.d)(e)},gs(t.payload.eventData))}),FIELD_EDIT_CANCEL:(e,t)=>Object(Zt.merge)(ps("field.cancel")(e),{eventData:{fieldType:ds(Object(es.r)(t.payload.fieldId)(e)),fieldEditSessionId:new ee.a(Object(es.f)(t.payload.fieldId)(e)),isReusableField:!0}}),FIELD_PASTE:(e,t)=>Object(Zt.merge)(ps("field.paste")(e),{eventData:{fieldType:ds(Object(es.r)(t.payload.fieldId)(e)),isReusableField:!0,pastedContentLength:t.payload.pastedContent.length,containsEmailAddress:as(t.payload.pastedContent)}})},js=Object(_e.n)("issue");function Es(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function vs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ks(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vs(Object(s),!0).forEach((function(t){ws(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ws(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ss=({eventNameSuffix:e,eventData:t,analyticsEvent:s})=>{if(s)try{const e=((e,t)=>{const s=t.payload&&t.payload.action||"updated",{actionSubjectId:n,name:a,tags:i,containerType:r,containerId:o,objectType:c,objectId:l}=e;return{action:s,actionSubjectId:n,name:a,tags:i,containerType:r,containerId:o,objectType:c,objectId:l,attributes:Es(e,["actionSubjectId","name","tags","containerType","containerId","objectType","objectId"])}})(t,s);Object(Ae.a)(s,e)}catch(e){ve.a.safeError("issue.instrumentation.trigger-analytics-action","Failed to send action track event",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))}const n=(e=>{if(e&&e.attributes){const{attributes:t}=e,s=Es(e,["attributes"]);return ks(ks({},t),s)}return e})(t);js(e,n)},Is=Object.keys(Os);var Cs=(e,t)=>e.pipe(Jt(...Is),Object(qt.map)(e=>((e,t)=>Os[t.type]&&ks({analyticsEvent:t.payload&&t.payload.analyticsEvent},Os[t.type](e,t)))(t.getState(),e)),Object(qt.filter)(e=>!!e),Object(qt.tap)(Ss),Object(qt.ignoreElements)()),Ts=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/page-visibility/index.js"),Ps=s("./src/packages/issue/issue-fetch-services/src/services/issue-media-upload-permissions/index.js"),_s=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js"),xs=s("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),Ds=s("./src/packages/issue/issue-view/src/common/util/errors/index.js");const As=e=>((e,t,s)=>e.delay(t.delay,s||void 0).take(t.take).concat(e.flatMap(e=>De.Observable.throw(e))))(e,{delay:5e3,take:3});var Ms=s("./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js"),Ls=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,collection:e.targetCollection,tokenIssueTimestamp:Date.now()-1e4});const Rs=e=>De.Observable.of(Object(Ms.b)(e)),Ns=(e,t,s)=>Object(_s.a)(s,()=>Object(Ps.b)(e,t)).map(Ls).map(Ms.d).catch(e=>{if(403===e.statusCode)return Rs(e);throw e}).retryWhen(As).catch(Rs);var Us=s("./src/packages/issue/issue-view/src/common/media/user-auth/user-auth-actions.js"),Fs=s("./src/packages/issue/issue-fetch-services/src/services/issue-media-user-auth/index.js"),Vs=e=>({clientId:e.id,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,tokenIssueTimestamp:Date.now()-1e4});const Ks=e=>De.Observable.of(Object(Us.b)(e.statusCode)),Bs=(e,t)=>Object(_s.a)(t,()=>Object(Fs.b)(e)).map(Vs).map(Us.d).catch(e=>{if(403===e.statusCode)return Ks(e);throw e}).retryWhen(As).catch(Ks);var Ws=s("./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js"),Hs=s("./src/packages/issue/issue-view/src/common/media/view-context/view-context-transformer.js");const Gs=e=>De.Observable.of(ct(e)),$s=(e,t,s,n,a)=>Object(_s.a)(a,()=>Object(Ws.b)(e,t,s,n)).map(Hs.a).map(ot),qs=(e,t,s,n,a)=>$s(e,t,s,n,a).catch(e=>{if(403===e.statusCode)return Gs(e);throw e}).retryWhen(As).catch(Gs);var zs=(e,t,s,n)=>Object(Pe.combineEpics)(((e,t)=>Object(Pe.combineEpics)((s,n)=>s.ofType("FETCH_UPLOAD_CONTEXT_REQUEST").switchMap(()=>{const s=n.getState(),a=e(s),i=t(s);return Ns(a,i)}),(e,t)=>e.pipe(Jt("FETCH_UPLOAD_CONTEXT_SUCCESS","CHECK_UPLOAD_CONTEXT"),Object(qt.switchMap)(()=>{const e=t.getState(),s=Object(xs.b)(e);if(null==s||!Object(Ts.a)())return De.Observable.empty();const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return De.Observable.of(Object(Ms.c)()).delay(r)})),e=>e.ofType("FETCH_UPLOAD_CONTEXT_FAILURE").filter(({payload:e})=>403!==e.error.statusCode).do(({payload:e})=>{const{error:t}=e;Object(Ds.a)("issue.media.fetch-upload-context-error","Error when fetching media upload context",t,new st.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:t.statusCode}}))}).ignoreElements(),()=>De.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap(()=>Object(Ts.a)()?De.Observable.of(Object(Ms.a)()):De.Observable.empty())))(e,t),((e,t,s,n)=>Object(Pe.combineEpics)((a,i)=>a.ofType("FETCH_VIEW_CONTEXT_REQUEST").switchMap(()=>{const a=i.getState(),r=e(a),o=t(a),c=s(a);return n.refreshAttachments(Object(xe.l)(o)),$s(r,o,c).retryWhen(As).catch(e=>De.Observable.of(ct(e)))}),(e,t)=>e.pipe(Jt("FETCH_VIEW_CONTEXT_SUCCESS","CHECK_VIEW_CONTEXT"),Object(qt.switchMap)(()=>{const e=t.getState(),s=Object(xs.d)(e);if(null==s||!Object(Ts.a)())return De.Observable.empty();const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return De.Observable.of(rt()).delay(r)})),e=>e.ofType("FETCH_VIEW_CONTEXT_FAILURE").do(({payload:e})=>{const{error:t}=e;Object(Ds.a)("issue.media.fetch-view-context-error","Error when fetching media view context",t,new st.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:t.statusCode}}))}).ignoreElements(),()=>De.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap(()=>Object(Ts.a)()?De.Observable.of((()=>({type:"CHECK_VIEW_CONTEXT"}))()):De.Observable.empty())))(e,t,s,n),(e=>Object(Pe.combineEpics)((t,s)=>t.ofType("FETCH_USER_AUTH_REQUEST").switchMap(()=>{const t=s.getState(),n=e(t);return Bs(n)}),(e,t)=>e.pipe(Jt("FETCH_USER_AUTH_SUCCESS","CHECK_USER_AUTH"),Object(qt.switchMap)(()=>{const e=t.getState(),s=Object(xs.c)(e);if(null==s||!Object(Ts.a)())return De.Observable.empty();const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return De.Observable.of(Object(Us.c)()).delay(r)})),e=>e.ofType("FETCH_USER_AUTH_FAILURE").filter(({payload:e})=>403!==e.statusCode).do(({payload:e})=>{Object(Ds.a)("issue.media.fetch-user-auth-error","Error when fetching media user auth",e,new st.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:e.statusCode}}))}).ignoreElements(),()=>De.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap(()=>Object(Ts.a)()?De.Observable.of(Object(Us.a)()):De.Observable.empty())))(e)),Ys=s("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js"),Qs=s("./src/packages/issue/issue-view/src/drafts/draft-actions.js"),Js=s("./src/packages/issue/issue-view/src/drafts/draft-utils.js");let Zs;const Xs=(e,t)=>{const{payload:{fieldId:s,draftKey:n}}=e;if(s)return((e,t)=>{const s=Object(ae.B)(e),n=Object(ae.a)(e),a=Object(Js.c)(n,s,t),i=Object(Js.b)(a);return Zs.remove(a),Zs.remove(i),De.Observable.of(Object(Qs.c)(t))})(t,s);const a=Object(Js.d)(n);return n?(e=>{const t=Object(Js.b)(e);return Zs.remove(e),Zs.remove(t),De.Observable.of(Object(Qs.c)(e))})(a).catch(e=>(Object(Ds.a)("issue.draft.delete","Failed to delete a draft.",e),De.Observable.of(Object(Qs.a)(a,e)))):De.Observable.empty()};var en=(e,t)=>(Zs=Object(Ys.b)("issue-drafts"),e.ofType("DELETE_DRAFT_REQUEST").mergeMap(e=>Xs(e,t.getState())).catch(e=>(e=>De.Observable.of(Object(Qs.a)(null,e)))(e)));let tn;var sn=e=>(tn=Object(Ys.b)("issue-drafts"),e.ofType("LOAD_DRAFT_REQUEST").mergeMap(e=>(e=>{const{payload:{fieldId:t,draftKey:s,draftHandler:n}}=e,a=Object(Js.d)(s),i=tn.get(s);if(i){const e=n?De.Observable.of(n(t,i)):De.Observable.empty(),s=De.Observable.of(Object(Qs.f)(a,i));return De.Observable.concat(e,s).catch(e=>(Object(Ds.a)("issue.draft.fetch","Failed to fetch issue draft",e),De.Observable.of(Object(Qs.d)(a,e))))}return De.Observable.empty()})(e)).catch(e=>(e=>De.Observable.of(Object(Qs.d)(null,e)))(e)));let nn;var an=(e,t)=>(nn=Object(Ys.b)("issue-drafts"),e.ofType("SAVE_DRAFT_REQUEST").throttleTime(1e3,De.Scheduler.default,{leading:!0,trailing:!0}).switchMap(e=>((e,t)=>{const{payload:{fieldId:s,value:n}}=e,a=Object(ae.B)(t),i=Object(ae.a)(t),r=Object(Js.c)(i,a,s);return nn.set(r,n),De.Observable.of(Object(Qs.i)(r,n))})(e,t.getState())).catch(e=>(e=>(Object(Ds.a)("issue.save-draft","Failed to save draft",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(Qs.g)(e))))(e))),rn=s("./src/packages/common-legacy-do-not-add-anything-new/src/authenticate-using-app-links/index.js"),on=s("./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js"),cn=(e,t)=>e.ofType("APPLINK_AUTHENTICATION_REQUEST").mergeMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=e.payload,{analyticsEvent:i}=e.meta,r=Object(rn.a)(`${n}${a}`);return Object(U.isRemoteIssueLinksEnabled)()&&i&&Object(te.f)(i,"applink authenticate",{authStatus:"start"}),r?De.Observable.fromPromise(r).map(()=>(Object(U.isRemoteIssueLinksEnabled)()&&i&&Object(te.f)(i,"applink authenticate",{authStatus:"success"}),Object(on.b)())).catch(e=>(Object(Ds.a)("issue-applink-authentication-epic","Failed to authenticate with applinks",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty())):De.Observable.empty()}),ln=s("./node_modules/lodash/get.js"),un=s.n(ln),dn=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js");var pn=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),mn=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");const bn=(e,t)=>`project=${e} AND issuetype in (${t.join(",")}) ORDER BY lastViewed DESC, updated DESC, priority DESC`,fn=({issues:e})=>e.map(({id:e,key:t,fields:{summary:s,issuetype:n}})=>({id:Object(xe.j)(e),key:Object(xe.l)(t),summary:s,issueType:n}));function gn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(s),!0).forEach((function(t){yn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function yn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const On=e=>e.reduce((e,t)=>hn(hn({},e),{},{[t.id]:t.parentId}),{});var jn=Object(Pe.combineEpics)((e,t)=>e.ofType("FETCH_ISSUE_PARENTS_REQUEST").mergeMap(()=>{const e=t.getState();return((e,t,s)=>t?Object(pn.a)(Object(mn.p)(e),{method:"POST",body:JSON.stringify({jql:bn(t,s)})}).map(fn):De.Observable.of([]))(Object(ae.g)(e),Object(Q.C)(e),Object(ts.e)(e))}).map(dn.c).catch(e=>(Object(Ds.a)("issue.fetch-parent.failure","",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Object(dn.a)())),(e,t)=>e.ofType("SET_PARENT_REQUEST","SET_PARENT_OPTIMISTIC").mergeMap(e=>{const s=t.getState(),{payload:{issues:n}}=e,a="SET_PARENT_OPTIMISTIC"===e.type?e.payload.parentIssue&&e.payload.parentIssue.id:e.payload.parentId,i=Object(Q.B)(s),r="SET_PARENT_OPTIMISTIC"===e.type?e.payload.parentIssue:i.find(e=>e.id===a),o=n.filter(e=>e.parentId!==a&&e.id).map(e=>Number(e.id)),c=On(n.filter(e=>o.includes(Number(e.id))));if(!o.length)return De.Observable.empty();const l=Object(ae.g)(s),u=Object(Q.C)(s);return("SET_PARENT_OPTIMISTIC"===e.type?De.Observable.fromPromise(e.payload.requestPromise):((e,t,s,n)=>t?Object(pn.a)(((e,t,s)=>`${e}/rest/internal/simplified/1.0/projects/${t}/issues/${s}/children`)(e,t,s),{method:"POST",body:JSON.stringify(n)}):De.Observable.throw("Missing Project Id"))(l,u,e.payload.parentId,{issueIds:o})).flatMap(()=>r?De.Observable.of(Object(dn.g)(r,c)):De.Observable.of(Object(dn.j)(c))).catch(e=>(Object(Ds.a)("issue.set-parent.failure","",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty()))}),(e,t)=>e.ofType("UNSET_PARENT_REQUEST").mergeMap(e=>{const s=t.getState(),{payload:{issues:n}}=e,a=n.filter(e=>e.parentId&&e.id).map(e=>Number(e.id)),i=On(n.filter(e=>a.includes(Number(e.id))));return 0===a.length?De.Observable.empty():((e,t,s)=>t?Object(pn.a)(((e,t)=>`${e}/rest/internal/simplified/1.0/projects/${t}/issues/delete-parents`)(e,t),{method:"POST",body:JSON.stringify(s)}):De.Observable.throw("Missing Project Id"))(Object(ae.g)(s),Object(Q.C)(s),{issueIds:a}).flatMap(()=>De.Observable.of(Object(dn.j)(i))).catch(e=>(Object(Ds.a)("issue.unset-parent.failure","",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty()))}),e=>e.ofType("SET_PARENT_SUCCESS","UNSET_PARENT_SUCCESS").map(e=>((e,t=null)=>({type:"ISSUE_RELATIONSHIP_UPDATE_SUCCESS",payload:{oldParentIdsByIssueIds:e,parentIssueId:t}}))(un()(e,"payload.oldParentIdsByIssueIds",null),un()(e,"payload.parentIssue.id",null)))),En=s("./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js"),vn=s("./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js");const kn=(e,t,s,n)=>{const a=((e,t)=>`${e}/rest/api/2/attachment/upload/issue/${t}`)(t,s),i=(e=>({method:"POST",body:JSON.stringify({fileId:e.id})}))(e);return Object(pn.a)(a,i).map(t=>((e,t,s)=>({id:`${e.attachmentId}`,mediaApiFileId:t.id,createdDate:t.createdDate,author:s,mimetype:t.mimetype,filename:t.filename}))(t,e,n))};var wn=Object(Pe.combineEpics)((e,t)=>e.ofType("ATTACHMENT_MEDIA_SERVICES_UPLOAD_END").mergeMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=Object(ae.B)(s),i=Object(ae.a)(s),r=Object(vn.b)(e.payload.id)(s);return kn(r,n,a,i).retry(3).map(En.b).catch(e=>(Object(Ds.a)("issue.attachment.jira-create-error","Could not create attachment in Jira",e),De.Observable.of(Object(En.a)(r,e.statusCode))))}),e=>e.ofType("ATTACHMENT_JIRA_CREATE_FAILURE").do(e=>{ve.a.safeError("issue.attachment.jira-create-error","Could not create attachment in Jira",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{statusCode:e.payload.statusCode}}))}).ignoreElements(),e=>e.ofType("MEDIA_PICKER_ERROR","ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR").do(e=>{const{description:t,name:s,fileId:n}=e.payload;ve.a.safeError("issue.attachment.media-services-upload-error","Could not upload attachment to Media Services",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{description:t,name:s,fileId:n}}))}).ignoreElements());var Sn=Object(Pe.combineEpics)(e=>e.ofType("ATTACHMENT_MEDIA_SERVICES_UPLOAD_END").mapTo(lt()),e=>e.ofType("ATTACHMENT_JIRA_CREATE_FAILURE").mapTo((()=>({type:"MARK_TOKEN_AS_UP_TO_DATE"}))()),e=>e.ofType("ATTACHMENT_JIRA_CREATE_SUCCESS").mapTo(rt())),In=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),Cn=s("./src/packages/issue/issue-view/src/actions/card-cover-actions.js"),Tn=s("./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js");const Pn=mn.e,_n=(e,t)=>{const s=`[${t}]`;return In.a`query {
            agile {
                board {
                    additionalBoardData(rapidViewId: ${e}) {
                        isMediaOnCardsEnabled
                    }
                    media(issueIds: ${s}) {
                        cardMedia {
                            issueId
                            attachmentId
                            availableAttachmentIds
                        }
                    }
                }
            }
    }`},xn=e=>(Object(Ds.a)("issue.card-cover.fetch",e.message,e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(Cn.a)()));var Dn=(e,t)=>e.pipe(Jt("FETCH_ISSUE_SUCCESS","ATTACHMENT_JIRA_CREATE_SUCCESS"),Object(qt.filter)(()=>Object(Tn.b)(t.getState())),Object(qt.flatMap)(()=>(e=>{const t=Object(ae.J)(e),s=Object(Q.k)(e);return null==t||null==s?De.Observable.empty():Object(pn.a)(Pn(Object(ae.g)(e)),{method:"POST",body:JSON.stringify({query:_n(t,s)})})})(t.getState()).flatMap(e=>e.errors?xn(e):(e=>{const t=un()(e,"data.agile.board.additionalBoardData.isMediaOnCardsEnabled",!1),s=un()(e,"data.agile.board.media.cardMedia[0].attachmentId",null),n=un()(e,"data.agile.board.media.cardMedia[0].availableAttachmentIds",[]);return De.Observable.of(Object(Cn.b)({isEnabled:t,attachmentId:s,availableAttachmentIds:n}))})(e)).catch(e=>xn(e))));var An=(e,t)=>e.ofType("CARD_COVER_UPDATE_REQUEST").flatMap(e=>((e,t)=>{const s=Object(ae.g)(e),n=Object(Q.k)(e),{attachmentId:a}=t.payload;if(null==n)return De.Observable.empty();const i={method:a?"PUT":"DELETE"};return Object(pn.a)(((e,t,s)=>{const n=`${e}/rest/greenhopper/1.0/xboard/work/media/${t}`;return s?`${n}?attachmentId=${s}`:n})(s,n,a),i)})(t.getState(),e).flatMap(()=>(()=>De.Observable.of(Object(Cn.e)()))()).catch(t=>((e,t)=>(_e.i.safeError("issue.card-cover.update",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)})),De.Observable.of(Object(Cn.c)(t.payload.currentAttachmentId))))(t,e))),Mn=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),Ln=s("./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js");const Rn=e=>e.issueTypes,Nn=(e,t,s)=>((e,t,s)=>Object(pn.a)(`${e}/rest/internal/2/issue/${t}/changeissuetype`,{method:"post",body:JSON.stringify({targetIssueTypeId:s})}))(e,t,s).map(e=>e.changeSuccessful);var Un=s("./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js");const Fn=(e,t,s,n)=>{const a=((e,t,s)=>({action:e,actionSubjectId:Object(ee.c)(t)(t),attributes:s}))(t,s,n);Object(Ae.a)(e,a)};var Vn=Object(Pe.combineEpics)((e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_REQUEST").switchMap(e=>{const s=Object(ae.g)(t.getState()),{issueKey:n,targetType:a,issueId:i,analyticsEvent:r,currentType:o}=e.payload;return!o.subtask&&a.subtask?(Fn(r,"updated","simpleChangeIssueTypeRedirect",{subTask:a.subtask}),De.Observable.of(Object(Ln.f)(i,o,a))):Nn(s,n,a.id).map(e=>e?(Fn(r,"updated","simpleChangeIssueTypeSuccess"),Object(Ln.h)(n,a.name)):(Fn(r,"updated","simpleChangeIssueTypeRedirect",{subTask:a.subtask}),Object(Ln.f)(i,o,a))).catch(e=>(_e.i.safeError("change.issue.type.simplechange",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(Ln.e)(e))))}),(e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS").switchMap(({payload:{issueKey:e}})=>Object(Un.c)(t.getState()).flatMap(s=>{if(!Object(U.isRemoveDataProviderRefresh)()){const n=t.getState(),a=Object.keys(Object(es.t)(n)).map(e=>Object(es.q)(e)(n)).filter(e=>!!e);return De.Observable.of(Object(R.d)(s),Object(fe.b)(e,a))}return De.Observable.of(Object(R.d)(s))})),(e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_NOT_ALLOWED").do(e=>{const s=Object(ae.g)(t.getState()),{issueId:n,currentType:a,targetType:i}=e.payload;a.subtask&&i.subtask?Object(Mn.a)(`${s}/secure/MoveSubTaskChooseOperation!default.jspa?id=${n}`,!1):!a.subtask&&i.subtask?Object(Mn.a)(`${s}/secure/ConvertIssue.jspa?id=${n}`,!1):Object(Mn.a)(`${s}/secure/MoveIssue!default.jspa?id=${n}`,!1)}).ignoreElements()),Kn=s("./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js");const Bn=e=>(ve.a.safeError("jira.user.issue.changeboarding.lastinteracted","Error saving last interacted changeboarding timestamp",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty());var Wn=Object(Pe.combineEpics)(e=>e.ofType("CHANGEBOARDING_BANNER_SEEN").do(e=>{Object(Kn.d)(e.payload.currentSeenTimes+1),e.payload.firstSeenTimestamp||Object(Kn.c)(Date.now())}).ignoreElements(),(e,t)=>e.ofType("CHANGEBOARDING_TOUR_BEGIN","CHANGEBOARDING_BANNER_DISMISS").mergeMap(e=>De.Observable.of(e).mergeMap(()=>((e,t)=>{const s=Object(ae.g)(e),n=Object(mn.b)(s);return Object(qe.e)(n,{body:`${t}`})})(t.getState(),e.payload)).catch(Bn)).ignoreElements(),(e,t)=>e.ofType("OPT_OUT_REQUEST").switchMap(e=>{const s=`${Object(ae.g)(t.getState())}/rest/greenhopper/1.0/profile/labs-panel/issue-details-popup`,{analyticsEvent:n}=e.payload;return De.Observable.from(Object(qe.e)(s,{body:JSON.stringify({isEnabled:!1})})).map(()=>(n&&Object(te.b)(n,"changeboarding optedOut"),window.location.reload())).catch(e=>(ve.a.safeError("jira.issue.details.changeboarding.optout","Could not opt-out from new issue view",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty()))}));const Hn=e=>(ve.a.safeError("jira.user.issue.clickthrough.lastinteracted","Error saving last interacted clickthrough timestamp",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty());var Gn=(e,t)=>e.ofType("CLICKTHROUGH_BANNER_DISMISS").mergeMap(e=>De.Observable.of(e).mergeMap(()=>((e,t)=>{const s=Object(ae.g)(e),n=Object(mn.c)(s);return Object(qe.e)(n,{body:`${t}`})})(t.getState(),e.payload)).catch(Hn)).ignoreElements();const $n=["ADD_COMMENT_FORM_CANCEL","EDIT_COMMENT_CANCEL","SAVE_COMMENT_SUCCESS","DELETE_COMMENT_SUCCESS"];var qn=e=>e.ofType(...$n).mergeMap(e=>(e=>{if("ADD_COMMENT_FORM_CANCEL"===e.type||e.payload.isNewComment)return De.Observable.of(Object(Qs.b)({fieldId:Object(Js.a)("NEW_OPTIMISTIC_COMMENT")}));const t=(e=>{const t=(e.id||e.optimisticId).toString();return-1!==t.indexOf("NEW_OPTIMISTIC_COMMENT")?"NEW_OPTIMISTIC_COMMENT":t})(e.payload),s=Object(Js.a)(t);return De.Observable.of(Object(Qs.b)({fieldId:s}))})(e)).catch(e=>(e=>(ve.a.safeError("issue.comment-delete-draft",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty()))(e)),zn=s("./src/packages/issue/issue-view/src/actions/comment-actions.js");const Yn={method:"DELETE"},Qn=(e,t,s)=>{const n=Object(ae.g)(e),a=Object(xe.l)(Object(ae.B)(e)),i=((e,t,s)=>`${e}/rest/api/2/issue/${t}/comment/${s}`)(n,a,t);let r=!0;const{bodyAdf:o}=Object(ss.t)(e)[t];return r=o&&Object(Me.d)(o),Object(pn.a)(i,Yn).map(()=>(r&&s.refreshAttachments(a),Object(zn.h)(t))).catch(e=>((e,t)=>(Object(Ds.a)("issue.comment.delete","Could not delete a comment",e),De.Observable.of(404===e.statusCode?Object(zn.h)(t):Object(zn.f)(t))))(e,t))};var Jn=e=>(t,s)=>t.ofType("DELETE_COMMENT_REQUEST").mergeMap(t=>{const n=s.getState(),a=t.payload.id;return Qn(n,a,e)}),Zn=s("./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js");const Xn=(e,t,s)=>{const n=Object(ae.a)(t),a=Object(ae.B)(t);return Object(ss.n)(t).map(i=>{const r=Object(Js.a)(i),o=Object(Js.c)(n,a,r),c=Object(ss.f)(i)(t),l=null!=c?c:void 0;return De.Observable.of(Object(Qs.e)(i,o,((e,t,s)=>e&&t===s.payload.id?zn.l:null)(s,i,e),l))})},ea=e=>(Object(Ds.a)("issue.comment-load-draft",e.message,e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty());var ta=Object(Pe.combineEpics)((e,t)=>e.ofType("EDIT_COMMENT_BEGIN").mergeMap(e=>De.Observable.merge(...Xn(e,t.getState(),!0))).catch(e=>ea(e)),(e,t)=>e.pipe(Jt("FETCH_ISSUE_SUCCESS","REFRESH_ISSUE_SUCCESS","FETCH_MORE_COMMENTS_SUCCESS","FETCH_LATEST_COMMENTS_SUCCESS"),Object(qt.mergeMap)(e=>e.payload.comments?De.Observable.merge(...Xn(e,t.getState(),!1)):De.Observable.empty()),Object(qt.catchError)(e=>ea(e))));var sa=e=>e.ofType("SAVE_COMMENT_SUCCESS").filter(e=>e.meta.shouldFetchViewContext).mapTo(rt());var na=(e,t)=>e.ofType("EDIT_COMMENT_UPDATE").switchMap(e=>((e,t)=>{const{payload:{id:s,value:n}}=e,a=Object(ss.f)(s)(t);return De.Observable.of(Object(Qs.h)(Object(Js.a)(s),n,a))})(e,t.getState())).catch(e=>(e=>(Object(Ds.a)("issue.comment-save-draft",e.message,e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty()))(e)),aa=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),ia=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js");function ra(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function oa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(s),!0).forEach((function(t){ca(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ra(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ca(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const la=(e,t,s,n,a)=>{const i=((e,t)=>{const s=e.getState();if(Object(ae.v)(s)){return{properties:[{key:"sd.public.comment",value:{internal:Object(ss.C)(t)(s)}}]}}return{}})(e,t),r=((e,t)=>Object(ss.z)(e.getState())?{visibility:"public"===t.type?null:t}:{})(e,a);return{method:n?"POST":"PUT",body:JSON.stringify(oa(oa({body:s},i),r))}},ua=e=>{if(e instanceof aa.b&&e.message)try{const t=JSON.parse(e.message);return t.errorMessages?t.errorMessages.join("; "):void 0}catch(e){return void Object(Ds.a)("issue.save.comment","Failed to parse FetchError",e)}},da=(e,{id:t,bodyAdf:s,isNewComment:n,analyticsEvent:a,visibility:i},{shouldFetchViewContext:r})=>Object(pn.a)(((e,t,s)=>{const n=e.getState();return(({baseUrl:e,issueKey:t,id:s="",isNewComment:n=!1})=>`${e}/rest/api/3/issue/${t}/comment${n?"":`/${s}`}`)({baseUrl:Object(ae.g)(n),issueKey:Object(ae.B)(n),id:t,isNewComment:s})})(e,t,n),la(e,t,s,n,i)).map(ia.c).map(ia.a).map(e=>Object(zn.A)(e,t,n,a,{shouldFetchViewContext:r})).catch(e=>(Object(Ds.a)("issue.save.comment","Failed to save a comment",e),De.Observable.of(Object(zn.x)({optimisticId:t,isServerValidationError:!!e&&400===e.statusCode,invalidMessage:ua(e)}))));var pa=Object(Pe.combineEpics)((e,t)=>e.ofType("SAVE_COMMENT_RETRY").map(e=>{const s=t.getState(),{optimisticId:n,isNewComment:a}=e.payload;return Object(zn.y)(oa(oa({},Object(ss.H)(n)(s)),{},{isNewComment:a}))}),(e,t)=>e.ofType("SAVE_COMMENT_REQUEST").groupBy(e=>e.payload.comment.id).mergeMap(e=>e.concatMap(e=>{const{id:s,bodyAdf:n,isNewComment:a,visibility:i}=e.payload.comment,{analyticsEvent:r}=e.payload;if(!n||Object(Me.f)(n))return De.Observable.empty();let o=!1;if(a)o=Object(Me.d)(n);else{const e=Object(ss.t)(t.getState());o=Object(Me.e)(e[s].bodyAdf,n)}return o&&t.dispatch(lt()),da(t,{id:s,bodyAdf:n,isNewComment:a,analyticsEvent:r,visibility:i},{shouldFetchViewContext:o}).mergeMap(e=>"SAVE_COMMENT_FAILURE"===e.type?De.Observable.of(e):a?De.Observable.zip(De.Observable.of(e),De.Observable.of(Object(zn.o)())).mergeMap(e=>De.Observable.from(e)):De.Observable.zip(De.Observable.of(e)).mergeMap(e=>De.Observable.from(e)))}))),ma=e=>e.ofType("ADD_COMMENT_FORM_EXPAND","EDIT_COMMENT_BEGIN","PASTED_INTO_COMMENT_FORM","SAVE_COMMENT_SUCCESS").groupBy(e=>{switch(e.type){case"ADD_COMMENT_FORM_EXPAND":return"NEW_OPTIMISTIC_COMMENT";case"EDIT_COMMENT_BEGIN":case"PASTED_INTO_COMMENT_FORM":return e.payload.id;case"SAVE_COMMENT_SUCCESS":return e.payload.optimisticId.startsWith("NEW_OPTIMISTIC_COMMENT")?"NEW_OPTIMISTIC_COMMENT":e.payload.optimisticId;default:return null}}).map(e=>{const t=e.filter(({type:e})=>"ADD_COMMENT_FORM_EXPAND"===e||"EDIT_COMMENT_BEGIN"===e);return e.window(t).map(e=>{const t=e.filter(({type:e})=>"SAVE_COMMENT_SUCCESS"===e),s=e.filter(({type:e})=>"PASTED_INTO_COMMENT_FORM"===e).takeUntil(t).reduce((e,t)=>[...e,t.payload.pastedContent],[]);return t.withLatestFrom(s).mergeMap(([e,t])=>{const{comment:s}=e.payload;return 0===t.length?De.Observable.empty():De.Observable.of(Object(zn.B)(s,t))})}).mergeAll()}).mergeAll(),ba=s("./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js");var fa=e=>Object(pn.a)(Object(mn.d)(e)),ga=(e,t)=>e.ofType("FETCH_CONFLUENCE_APP_LINKS_REQUEST").switchMap(()=>{const e=t.getState(),s=Object(ae.g)(e);return fa(s).map(ba.c).catch(e=>(Object(Ds.a)("issue.fetch.confluence-app-links-epic","FETCH_CONFLUENCE_APP_LINKS_REQUEST: Failed to fetch confluence app links data",e,new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),De.Observable.of(Object(ba.b)())))}),ha=s("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js");const ya=e=>"blogpost"===e?"blogpost":"page",Oa=e=>{if(e.object.status.resolved){return{id:Object(xe.e)(e.id),globalId:Object(xe.s)(e.globalId),href:Object(xe.i)(e.object.url),title:e.object.title,type:ya(e.object.icon.title),lastUpdatedContext:{user:{displayName:Object(xe.f)(e.object.status.icon.title),avatarUrl:Object(xe.i)(e.object.status.icon.url16x16)}}}}return{id:Object(xe.g)(e.id),error:e.object.status.icon.url16x16?"APPLINK_REQ_AUTH":"REMOTE_SERVER",link:{id:Object(xe.g)(e.id),globalId:Object(xe.s)(e.globalId),href:Object(xe.i)(e.object.url)},repairLink:{href:Object(xe.i)(e.object.status.icon.url16x16)}}};var ja=s("./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js");const Ea=["blogpost","page"],va=e=>!e.includes("http")&&window&&window.location?`${window.location.protocol}//${window.location.host}${e}`:e;var ka=e=>((e,t)=>e.map(e=>e.filter(e=>Ea.includes(e.type)).map(e=>({id:Object(xe.e)(e.id.toString()),globalId:Object(xe.s)(""),href:Object(xe.i)(va(`${t}/wiki${e.url}`)),title:e.title,type:ya(e.contentType),space:e.space}))))((e=>Object(pn.a)((e=>`${e}/wiki/rest/recentlyviewed/1.0/recent?limit=20`)(e)))(e),e);var wa=Object(Pe.combineEpics)((e,t)=>e.ofType("CREATE_CONFLUENCE_PAGE_LINK_REQUEST").switchMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=Object(ae.A)(s),{pageHref:i}=e.payload,{analyticsEvent:r}=e.meta;return a?De.Observable.from((({baseUrl:e,issueId:t,pageHref:s})=>Object(qe.d)(`${(e=>`${e}/rest/confluenceIssueLink/1/confluence`)(e)}${((e,t)=>`?issueId=${e}&pageUrl=${t}`)(t,s)}`,{body:JSON.stringify({})}).then(Oa))({baseUrl:n,pageHref:i,issueId:Object(xe.j)(a.toString())})).do(e=>{Object(Ae.a)(r,{action:"created",actionSubjectId:e.id,attributes:{createdWithError:!!un()(e,"error"),needsAuthorization:!!un()(e,"repairLink.href")}})}).map(e=>Object(ha.d)(e)).catch(e=>(Object(Ds.a)("issue.fetch.confluence-pages-epic","CREATE_CONFLUENCE_PAGE_LINK_REQUEST",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(ha.a)(e.message)))):(_e.i.safeError("issue.fetch.confluence-pages-epic","CREATE_CONFLUENCE_PAGE_LINK_REQUEST",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error("addconfluencelink.error.issueId.invalid")})),De.Observable.of(Object(ha.a)("addconfluencelink.error.issueId.invalid")))}),(e,t)=>e.ofType("DELETE_CONFLUENCE_PAGE_LINK_REQUEST").switchMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=Object(ae.B)(s),{globalId:i}=e.payload;return De.Observable.fromPromise(((e,t,s)=>Object(qe.a)(`${e}/rest/api/2/issue/${t}/remotelink?globalId=${encodeURIComponent(s)}`))(n,a,i)).map(ha.g).catch(e=>(Object(Ds.a)("issue.fetch.confluence-pages-epic","DELETE_CONFLUENCE_PAGE_LINK_REQUEST: Failed to delete confluence page link",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(ha.e)())))}),(e,t)=>e.ofType("FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST").switchMap(()=>{const e=t.getState(),s=Object(ae.g)(e);return ka(s).map(ja.c).catch(e=>{const t={eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e};return _e.i.safeError("issue.fetch.confluence-recently-viewed-epic","FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST: Failed to fetch recently viewed confluence pages",new st.a(t)),De.Observable.of(Object(ja.a)())})})),Sa=s("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js");var Ia=(e,t)=>e.ofType("SET_CONTEXT").map(()=>Object(ae.m)(t.getState())).pairwise().mergeMap(([e,t])=>((e,t)=>e!==t?De.Observable.of(Object(Sa.c)({fromIssueKey:e,toIssueKey:t})):De.Observable.empty())(e.issueKey,t.issueKey)),Ca=s("./src/packages/issue/issue-view/src/actions/issue-links-actions.js");const Ta={method:"DELETE"};var Pa=(e,t)=>e.ofType("DELETE_LINKED_ISSUE_REQUEST").mergeMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=e.payload.linkedIssueId,i=((e,t)=>`${e}/rest/api/2/issueLink/${t}`)(n,a),r=Object(ns.g)(a)(s),o=Object(ns.j)(r.linkedIssueKey)(s);return Object(pn.a)(i,Ta).map(()=>Object(Ca.f)(a,{issueId:o.id,direction:r.direction})).catch(e=>(Object(Ds.a)("issue.issue-links.delete-issue-link-error","Error when removing issue link",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(Ca.d)(a))))}),_a=s("./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js");const xa={method:"DELETE"},Da=(e,t,s)=>Object(pn.a)(((e,t,s)=>`${e}/rest/api/3/issue/${t}/remotelink?globalId=${encodeURIComponent(s)}`)(e,t,s),xa),Aa=(e,t)=>e.ofType("DELETE_REMOTE_LINKED_ISSUE_REQUEST").mergeMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=Object(ae.B)(s),{globalId:i,analyticsEvent:r}=e.payload;return Da(n,a,i).map(()=>(r&&Object(te.b)(r,"remoteLinkedIssue deleted"),Object(_a.c)(i))).catch(e=>(Object(te.b)(r,"remoteLinkedIssue deleteFailed"),Object(Ds.a)("issue.issue-links.delete-issue-link-error","remote",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(_a.a)(i))))});var Ma=s("./node_modules/uuid/index.js"),La=s.n(Ma),Ra=s("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),Na=s("./src/packages/forge/forge-ui/src/common/ui/flags/issue-panel/operation-action/limit-failed/index.js"),Ua=s("./src/packages/forge/forge-ui/src/common/ui/flags/issue-panel/operation-action/generic-error/index.js"),Fa=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),Va=s("./src/packages/forge/forge-ui/src/utils/errors/index.js"),Ka=s("./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js"),Ba=s("./src/packages/issue/issue-view/src/actions/forge-actions.js"),Wa=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js");const Ha=(e,t,s)=>`${e}/rest/api/2/issue/${t}/properties/${s}`;var Ga=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),$a=s("./node_modules/lodash/fp/pipe.js"),qa=s.n($a),za=s("./node_modules/lodash/isBoolean.js"),Ya=s.n(za),Qa=s("./node_modules/lodash/isNumber.js"),Ja=s.n(Qa),Za=s("./node_modules/lodash/isString.js"),Xa=s.n(Za);function ei(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ti(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(s),!0).forEach((function(t){si(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ei(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function si(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ni=e=>t=>{if(404===t.statusCode)return e();throw t},ai=(e,t,s="none")=>e.added===t&&("none"===s||e.id===s),ii=(e,t,s)=>{const n=((e,t,s)=>`${e}/rest/api/2/issue/${t}/properties/${s}`)(e,t,s);return{get:()=>(e=>Object(qe.b)(e).then(({value:e})=>(Array.isArray(e)?e:[]).map(({added:e,id:t,collapsed:s})=>({added:e,id:t,collapsed:s})).filter(({added:e,id:t,collapsed:s})=>Ja()(e)&&(null==t||Xa()(t))&&(null==s||Ya()(s)))).catch(ni(()=>[])))(n),update:e=>((e,t)=>Object(qe.e)(e,{body:JSON.stringify(t)}).then(()=>t))(n,e),deleteEntry:()=>(e=>Object(qe.a)(e).then(()=>[]).catch(ni(()=>[])))(n)}},ri=qa()([async(e,{issueKey:t,extensionId:s,added:n,id:a},i)=>{const{get:r,update:o}=ii(e,t,s),c=await r();if(0===c.length)return[];const l=c.map(e=>ti(ti({},e),{},{collapsed:ai(e,n,a)?i:e.collapsed}));return o(l).then(()=>l)},De.Observable.fromPromise]),oi=qa()([async(e,t,s,n,a,i)=>{const{get:r,update:o}=ii(e,t,s),c=await r(),l={added:n,id:i,collapsed:!1};if(0===c.length)return o([l]).then(()=>[l]);if(Object(U.isIssuePanelNextEnabled)()&&a){if(c.length>=Object(U.getIssuePanelMultipleLimit)())throw new Va.b("Multiple issue panel installation limit reached.");return o([...c,l]).then(()=>[...c,l])}return[c[0]]},De.Observable.fromPromise]),ci=qa()([async(e,t,s,n,a)=>{const{get:i,update:r,deleteEntry:o}=ii(e,t,s),c=await i();if(0===c.length)return[];const l=c.filter(e=>Object(U.isIssuePanelNextEnabled)()?!ai(e,n,a):e.added!==n);return 0===l.length?o():r(l)},De.Observable.fromPromise]);var li=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js");function ui(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function di(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(s),!0).forEach((function(t){pi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ui(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const mi=(e,t)=>({addonModuleKey:t,baseUrl:Object(ae.g)(e),parentIssueKey:Object(ae.B)(e)}),bi=(e,t)=>{const s=Object(li.k)(t)(e);if(s)return s.name;Object(Ra.o)("Panel not found")},fi=(e,t,s)=>{const n=Object(Wa.b)(s,10);return((e,t,s)=>{const n=Ha(e,t,s);return De.Observable.fromPromise(Object(qe.e)(n,{body:JSON.stringify({added:s})}))})(e,t,n).map(()=>Object(Ka.c)(n)).catch(e=>(ve.a.safeError("issue.ecosystem.ecosystem-content-panel-epic",`saveExtensionToIssue failed: ${e}`,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(Ka.a)(e))))};var gi=Object(Pe.combineEpics)((e,t)=>e.ofType("ADD_CONTENT_PANEL_REQUEST").flatMap(e=>{const{addonModuleKey:s,baseUrl:n,parentIssueKey:a}=mi(t.getState(),e.payload),i=t.getState(),r=Object(Ga.p)(i),o=Object(li.j)(i),c=Object(Ga.f)(i),l=Object(Ga.n)(i),u=!Object(Ga.o)(i);if(Object(Fa.a)(e.payload)){const t=o.find(t=>Object(Fa.f)(t.appKey,t.moduleKey)===e.payload),i=t?t.name:void 0,r=!!(null==t?void 0:t.allowMultiple);return((e,t,s,n)=>{const a=Date.now(),i=La.a.v4().substring(0,8);return oi(e,t,s,a,n,i).mergeMap(e=>{const t=e[e.length-1],n=Object(U.isIssuePanelNextEnabled)()?Object(Fa.g)(s,i,t.added):`${s}-${t.added.toString()}`,a=De.Observable.of(Object(Ba.e)(n),Object(Ka.c)(n));return Object(Ra.h)(),a})})(n,a,s,r).catch(e=>{Object(Ra.d)(),Object(Ra.n)("Adding panel to the issue failed",e);const{showFlag:t}=Object(_t.useFlagsService)();return e instanceof Va.b?t(Object(Na.a)(Object(U.getIssuePanelMultipleLimit)(),i)):t(Object(Ua.a)(i)),De.Observable.of(Object(Ka.a)(e))})}return!l&&u?De.Observable.merge(...c.map(e=>`${e.appKey}_${e.moduleKey}`).filter(e=>!r.includes(e)).map(e=>fi(n,a,e))):fi(n,a,s)}),e=>e.ofType("ADD_CONTENT_PANEL_SUCCESS").switchMap(e=>{const t=e.payload;return De.Observable.of(Object(Ka.d)(t))}),(e,t)=>e.ofType("REMOVE_CONTENT_PANEL_REQUEST").flatMap(e=>{const{addonModuleKey:s,baseUrl:n,parentIssueKey:a}=mi(t.getState(),e.payload),i=Object(Wa.b)(s,10),r=t.getState(),o=Object(Ga.p)(r);if(Object(Fa.a)(s)){const t=bi(r,e.payload);return((e,t,s)=>{let n,a,i;if(Object(U.isIssuePanelNextEnabled)()){const e=Object(Wa.a)(s);if(null==e)return Object(Ra.c)(),De.Observable.of(Object(Ka.g)());n=e.extensionId,a=e.id,i=e.added}else n=Object(Wa.b)(s,10),i=Number(s.slice(n.length+1));return ci(e,t,n,i,a).mergeMap(()=>(Object(Ra.g)(),De.Observable.of(Object(Ka.i)(s),Object(Ba.f)(s))))})(n,a,s).catch(e=>{Object(Ra.c)(),Object(Ra.n)("Removing panel from the issue failed",e);const{showFlag:s}=Object(_t.useFlagsService)();return s(Object(Ua.a)(t)),De.Observable.of(Object(Ka.g)(e))})}if(!o.includes(s)&&!o.includes(i)){const e=Object(Ga.g)(r);return De.Observable.merge(...e.map(e=>`${e.appKey}_${e.moduleKey}`).filter(e=>e!==s).map(e=>fi(n,a,e)))}const c=o.includes(s)?s:i;return((e,t,s)=>{const n=Ha(e,t,s);return De.Observable.fromPromise(Object(qe.a)(n))})(n,a,c).map(()=>Object(Ka.i)(c)).catch(e=>(ve.a.safeError("issue.ecosystem.ecosystem-content-panel-epic",`removeExtensionFromIssue failed: ${e}`,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(Ka.g)(e))))}),(e,t)=>e.ofType("ADD_CONTENT_PANEL_SUCCESS","CONTENT_PANELS_CUSTOMISED_REQUEST").flatMap(e=>{const{baseUrl:s,parentIssueKey:n}=mi(t.getState(),e.payload);return Object(Ga.n)(t.getState())?De.Observable.empty():((e,t)=>{const s=Ha(e,t,"issue.content.panel.customised.flag");return De.Observable.fromPromise(Object(qe.e)(s,{body:JSON.stringify({createdOn:new Date})}))})(s,n).map(()=>Object(Ka.f)()).catch(e=>(ve.a.safeError("issue.ecosystem.ecosystem-content-panel-epic",`saveIssueCustomised failed: ${e}`,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty()))}),(e,t)=>e.ofType("FORGE_ISSUE_PANEL_UPDATE_REQUEST").flatMap(e=>{const s=Object(ae.g)(t.getState()),{issueKey:n,panelKey:a,collapsed:i}=e.payload,r=Object(Wa.a)(a);if(null==r)return Object(Ra.e)(),De.Observable.empty();const o=di(di({},r),{},{issueKey:n});return ri(s,o,i).map(()=>(Object(Ra.i)(),Object(Ba.h)({panelKey:a,collapsed:i}))).catch(e=>{Object(Ra.e)(),Object(Ra.n)("Update issue panel failed",e);const s=t.getState(),n=bi(s,a),{showFlag:i}=Object(_t.useFlagsService)();return i(Object(Ua.a)(n)),De.Observable.empty()})})),hi=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),yi=s("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js");var Oi=(e,t)=>e.ofType("REFRESH_ECOSYSTEM_REQUEST").switchMap(()=>{const e=t.getState();return((e,t,s)=>{const n=`${e}/rest/internal/2/issue/${t}/extension`;return Object(pn.a)(n,{perf:hi.b,headersProcessor:s&&s(hi.b.key)}).map(yi.b).catch(e=>(_e.i.safeError("issue.fetch.ecosystem-extensions-fetch-server","fetchEcosystemExtensions: Failed to fetch extensions",new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),De.Observable.of({})))})(Object(ae.g)(e),Object(ae.B)(e)).map(R.f).catch(e=>(_e.i.safeError("issue.fetch.ecosystem-refresh-epic","REFRESH_ECOSYSTEM_REQUEST: Failed to refresh ecosystem data",new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),De.Observable.empty()))}),ji=e=>t=>t.ofType("FETCH_ISSUE_FAILURE").do(t=>e&&e(t.payload.error)).ignoreElements(),Ei=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js");var vi=e=>e instanceof aa.a?"VALIDATION_ERROR":e instanceof aa.b?e.statusCode>=400&&e.statusCode<500?"VALIDATION_ERROR":"SERVER_ERROR":"CONNECTIVITY_ERROR",ki=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js");function wi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Si(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(s),!0).forEach((function(t){Ii(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ii(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ci=["summary","description","assignee","status"],Ti=({payload:e})=>Ci.includes(e.fieldId),Pi=e=>Object(ae.b)(e)||"unknown",_i=(...e)=>Object(Ei.a)((({state:e,hasSuccess:t,fieldId:s,hasEdit:n,errorMessage:a})=>({experience:"editIssue",analyticsSource:Pi(e),application:Object(ki.b)(e),edition:Object(ki.a)(e),wasExperienceSuccesful:t,field:s,hasEdit:n,additionalAttributes:Si({},null!=a?{errorMessage:a}:{})}))(...e));var xi=Object(Pe.combineEpics)((e,t)=>e.ofType("FIELD_EDIT_CANCEL").filter(Ti).filter(({payload:e})=>{const s=t.getState();return!Object(es.D)(e.fieldId)(s)}).do(e=>{const s=t.getState(),{fieldId:n}=e.payload;return _i({state:s,hasSuccess:!0,fieldId:n,hasEdit:!1})}).ignoreElements(),(e,t)=>e.ofType("FIELD_UPDATED").filter(Ti).do(e=>{const s=t.getState(),{fieldId:n}=e.payload;return _i({state:s,hasSuccess:!0,fieldId:n,hasEdit:!0})}).ignoreElements(),(e,t)=>e.ofType("FIELD_SAVE_FAILURE").filter(Ti).filter(({payload:e})=>"CONNECTIVITY_ERROR"!==vi(e.error)).do(e=>{const s=t.getState(),{fieldId:n,error:a}=e.payload,i=vi(a);return _i({state:s,hasSuccess:"SERVER_ERROR"!==i,fieldId:n,hasEdit:!0,errorMessage:`${a.statusCode||i} - ${a.message}`})}).ignoreElements()),Di=s("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js");const Ai="issue.issue-view.get-create-linked-issue-permission.epic";var Mi=(e,t)=>e.ofType("FETCH_CREATE_LINKED_ISSUE_PERMISSION_REQUEST").switchMap(()=>{const e=t.getState(),s=Object(Q.F)(e);return Object(Di.a)(e)&&("business"===s||"service_desk"===s)?(e=>Object(pn.a)(`${e}/rest/api/3/permissions/project`,{method:"POST",body:JSON.stringify({permissions:["CREATE_ISSUES"]})}).retry(2).flatMap(e=>{if(e&&e.projects){const t=e.projects.length>0;return De.Observable.of(Object(Ca.s)(t))}return ve.a.safeError(Ai,"The permission endpoint does not return the expected data"),De.Observable.of(Object(Ca.s)(!1))}).catch(e=>(ve.a.safeError(Ai,e),De.Observable.of(Object(Ca.s)(!1)))))(Object(ae.g)(e)):De.Observable.of(Object(Ca.s)(!1))}),Li=s("./node_modules/lodash/uniq.js"),Ri=s.n(Li),Ni=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const Ui=["assignee","project"],Fi=({id:e,key:t,fields:s})=>({id:e,assigneeUrl:s.assignee&&Object(Ni.c)(s.assignee).avatarUrl,assigneeDisplayName:s.assignee&&Object(Ni.c)(s.assignee).displayName,projectType:s.project&&s.project.projectTypeKey,issueKey:t}),Vi=(e,t)=>Object(Un.b)(e,t,Ui).map(e=>e.map(Fi).reduce((e,t)=>Object.assign(e,{[t.issueKey]:t}),{}));var Ki=Object(Pe.combineEpics)((e,t)=>e.ofType("FETCH_LINKED_ISSUES_REQUEST").switchMap(()=>{const e=t.getState(),s=Object(ae.g)(e),n=Object(ns.i)(e);return Vi(s,n).flatMap(e=>De.Observable.of(Object(Ca.k)(e))).catch(e=>(Object(Ds.a)("issue.issuelinks.fetch.linked.issues.epic","Error while fetching linked issues",e,new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),De.Observable.of(Object(Ca.j)(e))))}),(e,t)=>e.ofType("SAVE_LINKED_ISSUE_SUCCESS").switchMap(()=>{const e=t.getState(),s=Object(ae.g)(e),n=Object(ae.B)(e),a=Object(ns.l)(e),i=Ri()(Object.values(a).map(e=>e.linkedIssueKey)),r=Object.values(a).filter(e=>e.isSaved).map(e=>e.id);return De.Observable.zip(Object(Un.d)(s,n),Vi(s,i),(e,t)=>Object(Ca.i)(e,t,r,a)).catch(e=>(Object(Ds.a)("issue.issuelinks.fetch.linked.issues.epic","Error while fetching new issue links and their details",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(Ca.h)(r,e))))})),Bi=s("./src/packages/forge/forge-ui-analytics/src/services/fetch-modules/index.js"),Wi=s("./src/packages/forge/forge-ui/src/utils/can-fetch-forge/index.js"),Hi=s("./src/packages/issue/issue-fetch-services/src/services/issue-forge-data/index.js");const Gi=(e,t)=>{const s=Object(ae.g)(e),n=Object(ae.j)(e);return De.Observable.fromPromise((async(e,t,s)=>s||Object(Hi.a)(e,t))(s,n,t&&t.issueForgeData))};function $i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zi={FETCH_ISSUE_REQUEST:"fetch",REFRESH_ISSUE_REQUEST:"refresh",LOAD_NEW_ISSUE:"load-new",FETCH_FORGE_REQUEST:"fetch-forge"},Yi=Object.keys(zi);var Qi=e=>(t,s)=>t.ofType(...Yi).switchMap(t=>{const n=Object(ae.b)(s.getState()),a=s=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$i(Object(s),!0).forEach((function(t){qi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({actionType:zi[t.type],isPrefetched:!(!e||!e.issueForgeData)},s&&{isInfrastructure:s instanceof Va.a});return Object(Wi.a)()?(Object(Bi.f)(n,a()),Gi(s.getState(),e).map(e=>(Object(Bi.e)(n,a()),Object(Ba.a)(e))).catch(e=>(Object(Bi.d)(n,a(e),e),De.Observable.empty()))):De.Observable.empty()}),Ji=s("./src/packages/platform/services/issue/src/model/errors.js");function Zi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Xi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Zi(Object(s),!0).forEach((function(t){er(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Zi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function er(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const tr=(e,t)=>Object.entries(e).reduce((e,[s,{value:n,autoCompleteUrl:a,allowedValues:i,editable:r,required:o,schema:c,title:l,configuration:u}])=>({fieldValues:Xi(Xi({},e.fieldValues),{},{[s]:n}),fieldConfigs:Xi(Xi({},e.fieldConfigs),{},{[s]:{autoCompleteUrl:a,allowedValues:i,isEditable:!t&&r,isRequired:o,schema:c,title:l,configuration:u}})}),{}),sr=(e,t)=>e.reduce((e,{key:s,value:n,autoCompleteUrl:a,allowedValues:i,editable:r,required:o,schema:c,title:l})=>({fieldValues:Xi(Xi({},e.fieldValues),{},{[s]:n}),fieldConfigs:Xi(Xi({},e.fieldConfigs),{},{[s]:{autoCompleteUrl:a,allowedValues:i,isEditable:!t&&r,isRequired:o,schema:c,title:l}})}),{}),nr=(e,t,s,n,a=!1)=>{const{setIssue:i,mergeIssue:r,setIssues:o,mergeIssues:c}=t,{setIssueConfig:l,setIssuesConfig:u}=s,{fieldValues:d,fieldConfigs:p}=tr(e,a);a?r(n,d):i(n,d),l(n,p);const m=d["children-issues"]||[],b=[],f=[];m.forEach(e=>{const{fieldValues:t,fieldConfigs:s}=sr(e.fields,a);b.push({[e.key]:t}),f.push({[e.key]:s})}),a?c(b):o(b),u(f)},ar=(e,t,s,n,a=!1)=>{const{setIssue:i,mergeIssue:r}=t,{setIssueConfig:o}=s,{fieldValues:c,fieldConfigs:l}=tr(e,a);a?r(n,c):i(n,c),o(n,l),(c["children-issues"]||[]).forEach(e=>{const{fieldValues:t,fieldConfigs:s}=sr(e.fields,a);a?r(e.key,t):i(e.key,t),o&&o(e.key,s)})};var ir=s("./src/packages/platform/utils/constants/src/project-types.js");const rr=e=>e,or=e=>e,cr=e=>e;function lr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ur(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(s),!0).forEach((function(t){dr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function dr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const pr=e=>e.projectType===ir.j?"jsd":"default",mr=({id:e,type:t})=>"DEV_SUMMARY"===t||"RELEASES_PANEL"===t||"PANEL"===t?{id:or(e),type:"PANEL"}:"TAB"===t?{id:rr(e),type:"TAB"}:{id:cr(e),type:"FIELD"},br=(e,t)=>ur({contentSection:e.visible.map(mr),primaryContextSection:t.primary.map(mr),secondaryContextSection:t.secondary.map(mr)},e.request?{requestPortalSection:e.request.map(mr)}:{}),fr=e=>void 0!==e.contentRequest?"jsd":"default",gr=({itemId:e,type:t})=>mr({id:e,type:t}),hr=e=>ur({contentSection:e.content.map(gr),primaryContextSection:e.contextPrimary.map(gr),secondaryContextSection:e.contextSecondary.map(gr)},e.contentRequest?{requestPortalSection:e.contentRequest.map(gr)}:{});var yr=s("./src/packages/platform/services/issue/src/model/issue-custom-fields.js"),Or=s("./src/packages/platform/services/issue/src/model/issue-managed-fields.js"),jr=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");const Er={"com.atlassian.jira.plugin.system.customfieldtypes:float":yr.s,"com.pyxis.greenhopper.jira:jsw-story-points":yr.v,"com.atlassian.jira.plugin.system.customfieldtypes:url":yr.y,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":yr.w,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":yr.x,"com.atlassian.jira.plugin.system.customfieldtypes:labels":yr.m,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":yr.c,"com.atlassian.jira.plugin.system.customfieldtypes:datetime":yr.d,"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":yr.t,"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":yr.n,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":yr.p,"com.atlassian.jira.plugin.system.customfieldtypes:select":yr.u,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":yr.r,"com.atlassian.jira.plugin.system.customfieldtypes:version":yr.A,"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":yr.l,"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":yr.o,"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":yr.z,"com.atlassian.jira.plugin.system.customfieldtypes:people":yr.z,"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":yr.q,"com.atlassian.jira.plugin.system.customfieldtypes:flagged":yr.k,"com.pyxis.greenhopper.jira:jsw-issue-color":yr.b,"com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list":yr.z,"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":yr.a},vr={"com.pyxis.greenhopper.jira:gh-epic-link":Or.c,"com.pyxis.greenhopper.jira:gh-sprint":Or.f,"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":Or.g,"com.atlassian.teams:rm-teams-custom-field-team":Or.h,"com.atlassian.jpo:jpo-custom-field-parent":Or.e,"com.atlassian.jpo:jpo-custom-field-baseline-start":Or.b,"com.atlassian.jpo:jpo-custom-field-baseline-end":Or.a},kr=e=>{const{key:t}=e,s=(e=>{const{key:t}=e;return"description"===t?e.adfValue:"environment"===t||"com.atlassian.jira.plugin.system.customfieldtypes:textarea"===e.schema.custom?"atlassian-wiki-renderer"===e.schema.renderer?e.adfValue:e.value:void 0!==e.pendingValue?e.pendingValue:null!=e.renderedValue&&void 0!==e.renderedValue?e.renderedValue:e.value})(e),n=e.title||t,{editable:a}=e;return"status"===t||e.schema.system?((e,t,s,n,a,i)=>{switch(t){case"versions":return{type:jr.a,key:"versions",editable:a,title:n,value:s};case"assignee":return{type:jr.b,key:"assignee",editable:a,title:n,value:s};case"components":return{type:jr.e,key:"components",editable:a,title:n,value:s};case"description":return{type:jr.f,key:"description",editable:a,title:n,value:s};case"environment":return{type:jr.h,key:"environment",editable:a,title:n,value:s,renderer:i};case"duedate":return{type:jr.g,key:"duedate",editable:a,title:n,value:s};case"fixVersions":return{type:jr.i,key:"fixVersions",editable:a,title:n,value:s};case"issuetype":return{type:jr.l,key:"issuetype",title:"",editable:!1,value:{id:s.id,name:s.name,iconUrl:s.iconUrl}};case"labels":return{type:jr.n,key:"labels",editable:a,title:n,value:s};case"priority":return{type:jr.o,key:"priority",editable:a,title:n,value:s};case"reporter":return{type:jr.p,key:"reporter",editable:a,title:n,value:s};case"status":{const e=s,{name:t}=e,n=e.statusCategory.id;return{type:jr.r,key:"status",title:"",editable:!1,value:{name:t,statusCategory:{id:n}}}}case"summary":return{type:jr.t,key:"summary",editable:a,title:n,value:s};case"timetracking":return{type:jr.u,key:"timetracking",editable:a,title:n,value:s};default:return}})(e.schema&&e.schema.system&&e.schema.system,t,s,n,a,e.schema&&e.schema.renderer):e.schema.custom?((e,t,s,n,a,i)=>{const r=Er[e]||vr[e];if(r)switch(r){case"com.pyxis.greenhopper.jira:gh-epic-link":return{type:Or.c,key:t,editable:a,title:n,value:s};case"com.pyxis.greenhopper.jira:gh-sprint":return{type:Or.f,key:t,editable:a,title:n,value:s};case"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":return{type:Or.g,key:t,editable:a,title:n,value:s};case"com.atlassian.jpo:jpo-custom-field-parent":return{type:Or.e,key:t,editable:a,title:n,value:s};case"com.atlassian.jpo:jpo-custom-field-baseline-start":return{type:Or.b,key:t,editable:a,title:n,value:s};case"com.atlassian.jpo:jpo-custom-field-baseline-end":return{type:Or.a,key:t,editable:a,title:n,value:s};case"com.atlassian.teams:rm-teams-custom-field-team":return{type:Or.h,key:t,editable:a,title:n,value:s};default:return{type:r,key:t,editable:a,title:n,value:s,renderer:i}}})(e.schema.custom,t,s,n,a,e.schema.renderer):void 0},wr=(e,t,s,n,a,i,r)=>(o,c)=>o.ofType("UPDATE_PREVIEW_REQUEST").switchMap(o=>{if(o.payload){const l=o.payload;return e.getIssue$(l).flatMap(({error:e,issue:o})=>{if(e){const t=Object(U.isImproveIssueExpressLoggingEnabled)()&&(e=>{if(e instanceof Ji.a)return{error:"NOT_FOUND_OR_NO_PERMISSION_ERROR",errorMessage:e.message};const{statusCode:t,message:s,traceId:n}=e;return{error:t?"UNKNOWN_ERROR":"CONNECTIVITY_ERROR",statusCode:t,errorMessage:s,traceId:n}})(e);return _e.i.safeWarn("issue.data.provider.epic",`UPDATE_PREVIEW_REQUEST: dataProvider issue data lookup failed ${Object(U.isImproveIssueExpressLoggingEnabled)()?t.error:e}`),Object(U.isImproveIssueExpressLoggingEnabled)()?De.Observable.of(Object(fe.a)(t)):De.Observable.of(Object(fe.a)((e=>{switch(e){case Ji.c:return"NOT_FOUND_OR_NO_PERMISSION_ERROR";case Ji.b:return"CONNECTIVITY_ERROR";case Ji.d:default:return"UNKNOWN_ERROR"}})(e)))}const u=Object(U.isStoreFieldsWithBatchActionsEnabled)()?nr:ar;if(o){var d;u(Object(je.a)(o),t,s,l,!0),Object(U.isIssueLayoutScalabilitySweetStateEnabled)()&&n.setIssueViewLayout({templateKey:fr(o.layout),sections:hr(o.layout)});const e=null===(d=o.fields.get("project"))||void 0===d?void 0:d.value;return e&&i.setProjectContext(Object(ye.a)(l),e),Object(U.isAddIssueIdToSweetStateEnabled)()&&o.id&&r.mergeIssueContext({issueId:Object(xe.j)(o.id)}),a.setUserPreferences(o.myPreferences),"COMPLETE"!==Object(Q.w)(c.getState())?De.Observable.of(Oe(o)):De.Observable.empty()}return De.Observable.empty()})}return De.Observable.empty()}),Sr=e=>(t,s)=>t.ofType("REFRESH_DATA_PROVIDER_ISSUE").filter(()=>!Object(U.isRemoveDataProviderRefresh)()).switchMap(t=>{const{issueKey:s}=t.payload;return De.Observable.fromPromise((async(e,t)=>{const{issue:s}=await e.getIssue$(t,!0).toPromise();let n=[];if(s){const e=Object(je.a)(s);n=Object.keys(e).map(t=>Object(es.w)(t,e)).filter(Boolean)}return n})(e,s)).mergeMap(t=>(e=>{const t=e.map(e=>{try{return kr(e)}catch(e){return void ve.a.safeError("issue.details.data-provider-transformer","Failed to transform field",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))}}).filter(e=>!!e);return De.Observable.of(t)})(t).flatMap(t=>(e.updateIssue(s,t),De.Observable.empty())).catch(e=>(_e.i.safeError("issue.data.provider.epic","Error while refreshing cached issue data by fetching issue from server",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty())))});var Ir=(e,t,s,n,a,i,r)=>Object(Pe.combineEpics)(wr(e,t,s,n,a,i,r),(e=>t=>t.ofType("FETCH_ISSUE_REMOTE_DATA_REQUEST").switchMap(t=>{if(t.payload){const s=t.payload;return e.getIssueRemoteData$(s).flatMap(e=>De.Observable.of(Object(ge.c)(e)))}return De.Observable.of(Object(ge.a)())}))(e),(e=>(t,s)=>t.ofType("APPLINK_AUTHENTICATION_SUCCESS","SAVE_REMOTE_LINKED_ISSUE_SUCCESS").switchMap(()=>{const t=s.getState(),n=Object(ae.B)(t);return n?e.getIssueRemoteData$(n).flatMap(e=>De.Observable.of(Object(ge.c)(e))):De.Observable.empty()}))(e),Sr(e)),Cr=s("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js");const Tr=(e,t,s,n)=>{const a={action:t,actionSubjectId:Object(ee.c)(s)(s)};n?Object(Ae.b)(e,a):Object(Ae.a)(e,a)};var Pr=(e,t)=>e.ofType("DELETE_ISSUE_REQUEST").mergeMap(({payload:e})=>{const{issueKey:s,analyticsEvent:n}=e;return((e,t)=>{const s=((e,t)=>`${e}/rest/api/3/issue/${t}?deleteSubtasks=true`)(e,t);return Object(pn.a)(s,{method:"DELETE"})})(Object(ae.g)(t.getState()),s).map(()=>(Tr(n,"deleted","issueDeleted"),Object(Cr.d)(s))).catch(e=>(_e.i.safeError("issue.delete.issue-delete-epic","Failed to delete issue",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Tr(n,"deletedError","issueDeletedError",e),De.Observable.of(Object(Cr.b)(s,(e=>{try{return JSON.parse(e.message).errorMessages[0]}catch(e){return"Failed to delete issue"}})(e)))))}),_r=s("./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js");const xr=e=>t=>s=>{e.dispatch(((e,t)=>({type:"SAVE_SERVER_TIME",payload:{key:e,serverTime:t}}))(t,Number(s.get("atl-vtm-backend-time"))))};var Dr=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");function Ar(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Mr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Lr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Rr=(e,t)=>{let s="UNKNOWN_ERROR";if(401===e.statusCode?s="AUTHENTICATION_ERROR":403===e.statusCode||404===e.statusCode?s="NOT_FOUND_OR_NO_PERMISSION_ERROR":e.statusCode?t||(s="AUTHENTICATION_ERROR"):s="CONNECTIVITY_ERROR",e instanceof Dr.a){const t=e,{endpoint:n,traceId:a,statusCode:i,message:r}=t;return{errorMessage:i?`${r}, endpoint: ${n}, status code: ${i}`:`${r}, endpoint: ${n}`,endpoint:n,traceId:a,statusCode:i,error:s}}if(e instanceof aa.b){const t=e,{message:n,statusCode:a,traceId:i}=t;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(s),!0).forEach((function(t){Lr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({error:s,statusCode:a,errorMessage:`${n}, status code: ${a}`},i?{traceId:i}:{})}return{error:s,statusCode:void 0}};var Nr=({fieldValueActions:e,fieldConfigActions:t,issueViewLayoutActions:s,userPreferenceActions:n,issueTabsActions:a,permissionActions:i,attachmentActions:r,projectContextActions:o,prefetchedResourceManager:c,jiraSettingsActions:l,issueContextActions:u})=>(d,p)=>d.ofType("FETCH_ISSUE_REQUEST","LOAD_NEW_ISSUE").switchMap(()=>{Object(_r.a)();const d=p.getState(),m=Object(ae.a)(d),b=Object(ae.g)(d),f=Object(ae.B)(d),g=Object(ae.F)(d),h=Object(U.isStoreFieldsWithBatchActionsEnabled)()?nr:ar;return Object(U.isfetchMediaTokensFromGiraEnabled)()?(()=>Object(Un.a)(d,c).do(({issue:{fields:c,tabs:d,id:p},myPreferences:m,permissions:g,attachments:y,project:O,contentItemsCategories:j,contextItemsCategories:E,jiraSettings:v})=>{if(a.setIssueTabs(d),h(c,e,t,f),Object(U.isIssueLayoutScalabilitySweetStateEnabled)()&&s.setIssueViewLayout({templateKey:pr(O),sections:br(j,E)}),n.setUserPreferences(m),void 0!==g&&i.setPermissions(g),void 0!==y&&(r.setTotalCount(y.totalCount),r.setVisibleAttachments(y.nodes)),Object(U.isJiraSettingsHookEnabled)()&&v&&l.setJiraSettings(v),O&&o.setProjectContext(Object(xe.q)(O.projectKey),O),Object(U.isPolarisInsightsTabEnabled)()&&O){const{projectKey:e}=O;Ie(b,e).then(t=>o.mergeProjectProperty(Object(xe.q)(e),{isPolarisProject:t}))}Object(U.isAddIssueIdToSweetStateEnabled)()&&u.mergeIssueContext({issueId:Object(xe.j)(p)})}).mergeMap(e=>{const{viewContext:t,uploadContext:s,userAuth:n}=e,a=Ar(e,["viewContext","uploadContext","userAuth"]),i=t?De.Observable.of(ot(t)):qs(b,f,g,xr(p),null==c?void 0:c.issueMediaReadPermission);let r;return s?null!=s.error?r=Object(Ms.b)(new Error(s.error)):null!=s.clientId&&null!=s.serviceHost&&null!=s.token&&null!=s.tokenLifespanInMs&&null!=s.collection&&null!=s.tokenIssueTimestamp&&(r=Object(Ms.d)({clientId:s.clientId,serviceHost:s.serviceHost,token:s.token,tokenLifespanInMs:s.tokenLifespanInMs,collection:s.collection,tokenIssueTimestamp:s.tokenIssueTimestamp})):r=Object(Ms.c)(),i.map(e=>[e,r,n?Object(Us.d)(n):Object(Us.c)(),Object(R.d)(a)])}).flatMap(e=>(Object(N.c)(),c&&c.clearAll(),De.Observable.of(Object(Te.batchActions)(e)))).catch(e=>{const t=Rr(e,m);return"NOT_FOUND_OR_NO_PERMISSION_ERROR"===t.error||Object(Ds.a)("issue.fetch.issue-fetch-epic","FETCH_ISSUE_REQUEST: Failed to fetch issue data",e,new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),De.Observable.of(Object(R.b)(t))}))():(()=>De.Observable.zip(qs(b,f,g,xr(p),null==c?void 0:c.issueMediaReadPermission),Ns(b,f,null==c?void 0:c.issueMediaUploadPermission),Bs(b,null==c?void 0:c.issueMediaUserAuth),Object(Un.a)(d,c).do(({issue:{fields:c,tabs:d,id:p},myPreferences:m,permissions:g,attachments:y,project:O,contentItemsCategories:j,contextItemsCategories:E,jiraSettings:v})=>{if(a.setIssueTabs(d),h(c,e,t,f),Object(U.isIssueLayoutScalabilitySweetStateEnabled)()&&s.setIssueViewLayout({templateKey:pr(O),sections:br(j,E)}),n.setUserPreferences(m),g&&i.setPermissions(g),y&&r.setTotalCount(y.totalCount),y&&r.setVisibleAttachments(y.nodes),Object(U.isJiraSettingsHookEnabled)()&&v&&l.setJiraSettings(v),Object(U.isAddIssueIdToSweetStateEnabled)()&&u.mergeIssueContext({issueId:Object(xe.j)(p)}),O&&o.setProjectContext(Object(xe.q)(O.projectKey),O),Object(U.isPolarisInsightsTabEnabled)()&&O){const{projectKey:e}=O;Ie(b,e).then(t=>o.mergeProjectProperty(Object(xe.q)(e),{isPolarisProject:t}))}}).map(R.d)).mergeMap(e=>(Object(N.c)(),c&&c.clearAll(),De.Observable.of(Object(Te.batchActions)(e)))).catch(e=>{const t=Rr(e,m);return"NOT_FOUND_OR_NO_PERMISSION_ERROR"===t.error||Object(Ds.a)("issue.fetch.issue-fetch-epic","FETCH_ISSUE_REQUEST: Failed to fetch issue data",e,new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),De.Observable.of(Object(R.b)(t))}))()}),Ur=s("./src/packages/platform/utils/constants/src/fetch-default-options.js"),Fr=s("./src/packages/platform/utils/fetch/src/utils.js");function Vr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Kr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(s),!0).forEach((function(t){Br(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Vr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Br(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Wr=Kr(Kr({},Ur.a),{},{method:"POST"}),Hr=(e,t,s)=>"OUTWARD"===e.direction?{type:{id:e.id},inwardIssue:{key:t},outwardIssue:{key:s}}:{type:{id:e.id},inwardIssue:{key:s},outwardIssue:{key:t}},Gr=e=>201===e.status?Promise.resolve(null):Promise.reject(new Fr.a(e.status,`Error server response: ${e.status}`)),$r=(e,t,s,n)=>De.Observable.fromPromise(((e,t)=>fetch(e,Kr(Kr({},Wr),t)).then(Gr))(Object(mn.n)(e),{body:JSON.stringify(Hr(t,s,n))})),qr=(e,t,s,n,a)=>{const i=Object(ae.g)(e),r=Object(ae.B)(e);return $r(i,n,r,s).map(()=>Object(U.isRemoteIssueLinksEnabled)()?Object(Ca.q)(t,a.update({action:"succeeded"})):Object(Ca.r)(t)).catch(e=>(_e.i.safeError("issue.issuelinks.save.linked.issues.epic","Error while adding linked issues",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(U.isRemoteIssueLinksEnabled)()?Object(Ca.m)(t,e,null==a?void 0:a.update({action:"failed"})):Object(Ca.n)(t,e))))};var zr=Object(Pe.combineEpics)((e,t)=>e.ofType("SAVE_LINKED_ISSUE_RETRY").mergeMap(e=>{const s=t.getState(),{optimisticId:n,requestAnalyticsEvent:a}=e.payload,i=Object(ns.g)(n)(s),r=i&&i.linkedIssueKey,o=i&&{direction:i.direction,id:i.typeId};return qr(s,n,r,o,a)}),(e,t)=>e.ofType("SAVE_LINKED_ISSUE_REQUEST").mergeMap(e=>{const s=t.getState(),{optimisticId:n,linkedIssueKey:a,issueLinkType:i}=e.payload.newIssueLinks,{requestAnalyticsEvent:r}=e.payload;return qr(s,n,a,i,r)})),Yr=s("./node_modules/lodash/identity.js"),Qr=s.n(Yr),Jr=s("./node_modules/lodash/isEqual.js"),Zr=s.n(Jr);const Xr=(e,t)=>{const s=document.getElementById("ghx-issue-fragment");window.AJS&&s?window.AJS.$(s).trigger(e,t):ve.a.safeError("issue.rapid-board","Could not find container to send event for rapid board",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue"}))},eo="refresh-sprints-on-board",to="hide";var so=e=>Xr(eo,{sprintIds:[e]}),no=()=>Xr(to);const ao=({pathname:e,search:t})=>e+t,io=(e,t,s)=>(n,a)=>{const i={},r=n.ofType("NAVIGATE_TO_NEW_ISSUE").pluck("payload").do(({toIssueKey:e})=>{const n=a.getState(),i=Object(ae.b)(n),r=Object(ae.t)(n),o=s.getRecentIssuesCount(),c=s.getRecentIssue(e);Object(N.a)({analyticsSource:String(i),isLoadedWithPage:r,isRecentIssue:!!c,recentIssuesCount:o,isSPA:!0,store:a,dataProvider:t}),Object(N.g)()}).do(({fromIssueKey:t,toIssueKey:s})=>{if(e){i[ao(window.location)]=t;const n=((e,t,s)=>{const n=new RegExp(`${t}(?![\\d])`,"g"),a=e.match(n);return null===a||1!==a.length?null:e.replace(t,s)})(ao(window.location),t,s);n&&(i[n]=s,e.push(n))}}),o=e?De.Observable.create(t=>e.listen((e,s)=>{t.next({location:e,action:s})})).filter(({action:e})=>"POP"===e).filter(()=>{const e=a.getState();return!Object(ae.x)(e)}).map(({location:e})=>i[ao(e)]).filter(Qr.a).map(e=>({fromIssueKey:Object(ae.B)(a.getState()),toIssueKey:e})).filter(({fromIssueKey:e,toIssueKey:t})=>e!==t):De.Observable.empty(),c=a.getState();return De.Observable.merge(r,o).distinctUntilChanged((e,t)=>Zr()(e,t)).flatMap(({fromIssueKey:e,toIssueKey:t})=>{Object(_r.a)();const n=s.getRecentIssue(t);if(n)return De.Observable.of(Object(Sa.b)(t,n));const i=a.getState();if(!Object(U.isRemoveDataProviderRefresh)()){const s=Object.keys(Object(es.t)(c)).map(e=>Object(es.q)(e)(c)).filter(Boolean);if(Object(ae.x)(i))return De.Observable.of(Object(Sa.a)(t),Object(fe.c)(t),Object(ge.b)(t));const n=Object(fe.b)(e,s);return De.Observable.of(n,Object(Sa.a)(t),Object(fe.c)(t),Object(ge.b)(t))}return De.Observable.of(Object(Sa.a)(t),Object(fe.c)(t),Object(ge.b)(t))}).takeUntil(n.last().catch(()=>De.Observable.of(!0))).catch(e=>ve.a.safeError("issue.issue-navigation-epic","Unexpected error in issue-navigation-epic",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})))},ro=e=>e.ofType("NAVIGATE_TO_PROJECT").do(e=>{Object(Mn.a)(e.payload.projectUrl,!1,e.payload.pushAction)}).ignoreElements(),oo=e=>e.ofType("NAVIGATE_TO_SPRINT").do(e=>{so(e.payload.sprintId),no()}).ignoreElements();var co=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/page-visiblity-stream/page-visibility-stream.js"),lo=s("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),uo=s("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js");const po=(e,t)=>{const s=t.getState(),{atlassianId:n}=e.payload,a=Object(Q.y)(s),i=Object(Ga.g)(s).length>0||!!Object(lo.a)(s)||!!Object(uo.a)(s),r=a&&n!==a.id;return!i&&r};var mo=Object(Pe.combineEpics)((e,t)=>e.ofType("REALTIME_UPDATE_CURRENT_ISSUE").filter(()=>Object(Ts.a)()).switchMap(e=>po(e,t)?De.Observable.of(Object(R.g)()):De.Observable.empty()),(e,t)=>e.ofType("REALTIME_UPDATE_CURRENT_ISSUE").bufferToggle(co.a.filter(e=>!e),()=>co.a.filter(e=>e)).switchMap(e=>e.some(e=>po(e,t))?De.Observable.of(Object(R.g)()):De.Observable.empty()));var bo=({fieldValueActions:e,fieldConfigActions:t,issueViewLayoutActions:s,userPreferenceActions:n,attachmentActions:a,permissionActions:i,issueTabsActions:r,projectContextActions:o,issueContextActions:c})=>(l,u)=>l.ofType("REFRESH_ISSUE_REQUEST").switchMap(()=>{const l=u.getState(),d=Object(ae.g)(l),p=Object(ae.B)(l),m=Object(ae.F)(l);return De.Observable.zip(qs(d,p,m),Object(Un.a)(l).do(({issue:{fields:l,tabs:u,id:m},myPreferences:b,attachments:f,permissions:g,project:h,contentItemsCategories:y,contextItemsCategories:O})=>{if(r.setIssueTabs(u),(Object(U.isStoreFieldsWithBatchActionsEnabled)()?nr:ar)(l,e,t,p),Object(U.isIssueLayoutScalabilitySweetStateEnabled)()&&s.setIssueViewLayout({templateKey:pr(h),sections:br(y,O)}),n.setUserPreferences(b),g&&i.setPermissions(g),f&&a.setTotalCount(f.totalCount),f&&a.setVisibleAttachments(f.nodes),h&&o.setProjectContext(Object(xe.q)(h.projectKey),h),Object(U.isPolarisInsightsTabEnabled)()&&h){const{projectKey:e}=h;Ie(d,e).then(e=>o.mergeProjectProperty(Object(xe.q)(h.projectKey),{isPolarisProject:e}))}Object(U.isAddIssueIdToSweetStateEnabled)()&&c.mergeIssueContext({issueId:Object(xe.j)(m)})}).map(R.h)).mergeMap(De.Observable.from).catch(e=>(_e.i.safeError("issue.fetch.issue-refresh-epic","REFRESH_ISSUE_REQUEST: Failed to refresh issue data",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty()))});const fo=(e,t)=>Object(pn.a)((e=>`${e}/rest/graphql/1/`)(e),(e=>({method:"POST",body:JSON.stringify({query:In.a`query {
            issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
                id
                viewScreenId
            }
        }`})}))(t));var go=(e,t)=>e.ofType("FETCH_SCREENID_REQUEST").switchMap(()=>{const e=t.getState(),s=Object(ae.a)(e),n=Object(ae.g)(e),a=Object(ae.B)(e);return fo(n,a).map(Y).catch(e=>{const t=((e,t)=>{let s="UNKNOWN_ERROR";return 401===e?s="AUTHENTICATION_ERROR":403===e||404===e?s="NOT_FOUND_OR_NO_PERMISSION_ERROR":e?t||(s="AUTHENTICATION_ERROR"):s="CONNECTIVITY_ERROR",{error:s,statusCode:e}})(e.statusCode,s);return"NOT_FOUND_OR_NO_PERMISSION_ERROR"===t.error||Object(Ds.a)("issue.fetch.issue-screenid-epic","FETCH_ISSUE_REQUEST: Failed to fetch issue data",e,new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),De.Observable.of((e=>({type:"FETCH_SCREENID_FAILURE",payload:e}))(t))})}),ho=s("./node_modules/lodash/size.js"),yo=s.n(ho);const Oo=e=>({type:"SET_ISSUE_TYPES",payload:e});var jo=s("./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js");function Eo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(s),!0).forEach((function(t){ko(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Eo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ko(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const wo=new Map;var So=(e,t)=>e.ofType("SUBTASK_QUICK_ADD_CLICKED","ISSUE_IN_EPIC_QUICK_ADD_CLICKED","CHILD_ISSUE_QUICK_ADD_CLICKED","CHILD_ISSUE_PANEL_ADD_CLICKED").mergeMap(()=>{const e=t.getState(),s=Object(ae.I)(e),n=wo.get(s)||{time:new Date};if(n&&n.data&&new Date-n.time<18e5)return De.Observable.of(Oo(n.data));wo.set(s,n);const a=Object(ae.g)(e),i=xr(t);return De.Observable.concat(De.Observable.of((()=>({type:"FETCHING_ISSUE_TYPES"}))()),Object(jo.a)(a,s,i).mergeMap(e=>{const t=e&&e.issueTypes;return yo()(t)?(wo.set(s,vo(vo({},n),{},{data:t})),De.Observable.of(Oo(t))):(wo.delete(s),De.Observable.of((()=>({type:"FETCH_ISSUE_TYPES_FAILED"}))()))}))}),Io=s("./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js");var Co=(e,t)=>Object(pn.a)(Object(mn.i)(e,t)),To=(e,t)=>e.ofType("FETCH_JIRA_APP_LINKS_REQUEST","APPLINK_AUTHENTICATION_SUCCESS").switchMap(()=>{const e=t.getState(),s=Object(ae.g)(e),n=Object(ae.B)(e);return Co(s,n).map(Io.c).catch(e=>(Object(Ds.a)("issue.fetch.jira-app-links-epic","FETCH_JIRA_APP_LINKS_REQUEST: Failed to fetch jira app links data",e,new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),De.Observable.of(Object(Io.b)())))}),Po=s("./src/packages/issue/issue-view/src/actions/login-actions.js"),_o=(e,t)=>e.ofType("LOGIN").switchMap(()=>{const e=Object(ae.E)(t.getState());if(e){const s=`${Object(ae.g)(t.getState())}/login.jsp?os_destination=${encodeURIComponent(e)}`,n=window.open(s,"_blank");return De.Observable.fromEvent(window,"message").filter(e=>e.origin===window.location.origin).filter(e=>e.source===n).filter(e=>e.data&&"log-in-successful"===e.data.status&&e.data.accountId).do(e=>e.source.close()).mergeMap(e=>De.Observable.of(Object(Po.b)({accountId:e.data.accountId}),Object(R.c)()))}return De.Observable.empty()});const xo=(e,{fieldId:t,commentId:s},n=!1)=>{const a=Object(es.v)(e).filter(e=>e!==t),i=Object(ss.u)(e).filter(e=>e!==s),r=!n&&!!Object(ss.w)(e);return a.length>0||i.length>0||r?((e,t,s)=>({type:"MULTILINE_FIELD_EDIT_BEGIN",payload:{multilineFieldIdsToClose:e,commentIdsToClose:t,shouldCloseAddCommentForm:s}}))(a,i,r):null};var Do=Object(Pe.combineEpics)((e,t)=>e.ofType("FIELD_EDIT_BEGIN").filter(e=>Object(es.E)(e.payload.fieldId)(t.getState())).map(e=>xo(t.getState(),{fieldId:e.payload.fieldId})).filter(Boolean),(e,t)=>e.ofType("EDIT_COMMENT_BEGIN").map(e=>xo(t.getState(),{commentId:e.payload.id})).filter(Boolean),(e,t)=>e.ofType("ADD_COMMENT_FORM_EXPAND").map(()=>xo(t.getState(),{},!0)).filter(Boolean));const Ao=(e,t)=>{const s=Object(ae.a)(e),n=Object(ae.B)(e),a=Object(Js.a)("NEW_OPTIMISTIC_COMMENT"),i=Object(Js.c)(s,n,a);return De.Observable.of(Object(Qs.e)("NEW_OPTIMISTIC_COMMENT",i,t?zn.l:null))},Mo=e=>(ve.a.safeError("issue.new-comment-load-draft",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.empty());var Lo=Object(Pe.combineEpics)((e,t)=>e.ofType("SET_CONTEXT").mergeMap(()=>Ao(t.getState(),!1)).catch(e=>Mo(e)),(e,t)=>e.ofType("ADD_COMMENT_FORM_EXPAND").mergeMap(()=>Ao(t.getState(),!0)).catch(e=>Mo(e)));const Ro=new De.Subject;Ro.bufferTime(1e3,1e3,50).subscribe(e=>{Object(_.a)().loadIssues(Ri()(e))});const No=new De.Subject;No.bufferTime(1e3,1e3,50).subscribe(e=>Object(_.a)().loadIssuesById(Ri()(e)));var Uo=e=>e.ofType("PREFETCH_ISSUES").do(e=>{const{issueKeys:t,issueIds:s}=e.payload;t.forEach(e=>Ro.next(e)),s.forEach(e=>No.next(e))}).switchMap(()=>De.Observable.empty()),Fo=e=>(t,s)=>t.ofType("PROJECT_ISSUE_TYPES_REQUEST").mergeMap(t=>{const n=Object(ae.g)(s.getState()),a=t.payload;return((e,t)=>{const s=`${e}/rest/api/3/project/${t}`;return Object(pn.a)(s).map(Rn)})(n,a).do(t=>e.mergeProjectProperty(a,{issueTypes:t})).map(e=>Object(Ln.c)(e)).catch(e=>(_e.i.safeError("change.issue.type.fetchtypes",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(Object(Ln.a)(e))))});const Vo=Object(_e.j)("true","false");var Ko=(e,t)=>e.ofType("FETCH_PROJECT_HAS_SUBTASK_VALIDATORS").switchMap(()=>{const e=t.getState();return((e,t)=>Object(pn.a)(((e,t)=>`${e}/rest/internal/2/project/${t}/hasValidatorsOnSubtasks`)(e,t)))(Object(ae.g)(e),Object(ae.I)(e)).do(e=>{Object(_e.m)("project-validators.projectHasSubtaskValidators.result",{result:Vo(e)})}).map(e=>(e=>({type:"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_SUCCESS",payload:e}))(e)).catch(()=>De.Observable.of((()=>({type:"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_FAILURE"}))()))});var Bo=(e,t)=>e.ofType("SET_CONTEXT").scan(({issueKey:e},t)=>({issueKey:t.payload.issueKey,loggedInAccountId:t.payload.atlassianAccountId,previousIssueKey:e}),{issueKey:null,previousIssueKey:null,loggedInAccountId:null}).filter(({loggedInAccountId:e})=>null!==e).filter(({issueKey:e,previousIssueKey:t})=>e!==t).map(({issueKey:e})=>e).delay(3e3).switchMap(e=>{const s=t.getState(),n=`${Object(ae.g)(s)}/rest/internal/2/issue/${e}/history`;return Object(pn.a)(n,{method:"POST"}).catch(e=>((e=>404===e.statusCode)(e)||Object(Ds.a)("issue.recently-viewed-issue-epic","Client network error occurred when fetching user issue history",e,new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),De.Observable.empty())).ignoreElements()});function Wo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ho(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(s),!0).forEach((function(t){Go(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Go(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $o=e=>{const{applicationType:t,applicationName:s,issueLinkUrl:n,relationship:a,summary:i,iconUrl:r,issueKey:o}=e;return Ho({application:{name:s,type:t},relationship:a,object:{summary:i,icon:{url16x16:r},title:o,url:n}},"WITH_ISSUE_ID"===e.payloadType?{globalId:e.globalId}:{appLinkId:e.appLinkId})},qo=Ho(Ho({},Ur.a),{},{method:"POST"}),zo=(e,t,s)=>((e,t,s)=>Object(pn.a)(Object(mn.o)(e,t),Ho(Ho({},qo),{},{body:JSON.stringify($o(s))})))(Object(ae.g)(e),Object(ae.B)(e),t).map(e=>Object(_a.h)(t.id,e,s.update({action:"succeeded"}))).catch(e=>De.Observable.of(Object(_a.e)(t.id,t.issueKey,e,s.update({action:"failed"})))),Yo=(e,t)=>e.ofType("SAVE_REMOTE_LINKED_ISSUE_REQUEST").mergeMap(e=>{const s=t.getState(),{newRemoteIssueLink:n,requestAnalyticsEvent:a}=e.payload;return zo(s,n,a)}),Qo=(e,t)=>e.ofType("SAVE_REMOTE_LINKED_ISSUE_RETRY").mergeMap(e=>{const s=t.getState(),{optimisticId:n,requestAnalyticsEvent:a}=e.payload,i=((e,t)=>{const s=Object(ns.n)(e).find(e=>e.id===t);if(s&&void 0!==s.applicationName&&void 0!==s.applicationType&&void 0!==s.iconUrl&&void 0!==s.relationship&&void 0!==s.summary){if(void 0===s.globalId){if(void 0===s.appLinkId)return;return{id:s.id,applicationType:s.applicationType,applicationName:s.applicationName,issueLinkUrl:s.issueLinkUrl,relationship:s.relationship,summary:s.summary,iconUrl:s.iconUrl,issueKey:s.issueKey,appLinkId:s.appLinkId,payloadType:"WITHOUT_ISSUE_ID"}}return{id:s.id,globalId:s.globalId,applicationType:s.applicationType,applicationName:s.applicationName,issueLinkUrl:s.issueLinkUrl,relationship:s.relationship,summary:s.summary,iconUrl:s.iconUrl,issueKey:s.issueKey,remoteIssueId:s.remoteIssueId,payloadType:"WITH_ISSUE_ID"}}})(s,n);return i?zo(s,i,a):De.Observable.empty()});var Jo=s("./src/packages/issue/issue-view/src/actions/request-panel-metadata-actions.js");const Zo=e=>(_e.i.safeError("issue.request-panel-metadata.fetch",JSON.stringify(e),new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:new Error(JSON.stringify(e))})),De.Observable.of(Object(Jo.b)()));var Xo=(e,t)=>e.ofType("FETCH_REQUEST_PANEL_METADATA").flatMap(()=>(e=>Object(pn.a)(((e,t)=>`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-panel-metadata`)(Object(ae.g)(e),Object(ae.B)(e))))(t.getState()).flatMap(e=>e.errors?Zo(e):(e=>De.Observable.of(Object(Jo.c)(e)))(e)).catch(e=>Zo(e))),ec=(e,t)=>e.ofType("SHARE_AS_COMMENT").switchMap(()=>{const e=t.getState();return Object(ss.w)(e)?De.Observable.empty():De.Observable.of(Object(zn.c)(),Object(zn.d)("NEW_OPTIMISTIC_COMMENT",!1))}),tc=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),sc=s("./src/packages/issue/issue-view/src/views/connect-field.js"),nc=e=>e.ofType("FIELD_SHORTCUT_SELECTED").switchMap(e=>{const{fieldKey:t,isRichTextField:s,analyticsEvent:n}=e.payload;switch(t){case"issuelinks":return De.Observable.of(Object(Ca.a)());case"issuetype":return De.Observable.of(Object(Ln.d)(!0));default:{const{isOptimistic:e,canContainMediaContent:a,saveField:i,shouldSaveDraft:r,shouldDiscardChangeOnFailure:o,onSaveFailureFlagType:c,onSaveSuccessFlagType:l}=sc.b;return Object(te.f)(n,"issueFields updateStarted",{isFromDotMenu:!0,fieldType:t}),De.Observable.of(Object(tc.b)(t,{isRichTextField:s,isOptimistic:e,canContainMediaContent:a,saveField:i,shouldDiscardChangeOnFailure:o,shouldSaveDraft:r,onSaveFailureFlagType:c,onSaveSuccessFlagType:l}))}}});var ac=e=>e.ofType("SET_TIMESTAMP_DISPLAY_SETTING").do(e=>{window.localStorage.setItem("jira.absolutedate.issueview",e.payload)}).ignoreElements();var ic=(e,t)=>e.ofType("FETCH_LOGGED_IN_USER_REQUEST").switchMap(()=>{const e=t.getState(),s=Object(ae.a)(e);if(!s)return De.Observable.empty();const n=((e,t)=>`${e}/rest/api/2/user?${`accountId=${encodeURIComponent(t)}`}${Object(U.isUseAppPermissionsFromTenantContextEnabled)()?"":"&expand=applicationRoles"}`)(Object(ae.g)(e),s);return Object(pn.a)(n).map(Ni.d).map(e=>{const t=Object(Ni.c)(e),s=Object(Ni.a)(e);return he(t,s)}).catch(e=>(Object(Ds.a)("issue.fetch.user-fetch-epic","FETCH_LOGGED_IN_USER_REQUEST: Failed to fetch logged in user details",e,new st.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),De.Observable.of((()=>({type:"FETCH_LOGGED_IN_USER_FAILURE"}))())))}),rc=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-meta.js");var oc=()=>Object(U.isUseAppPermissionsFromTenantContextEnabled)()?()=>De.Observable.empty():Object(U.isItSafeLoggingEnabledToUseAppPermissionsFromTenantContext)()?e=>e.ofType("FETCH_LOGGED_IN_USER_REQUEST").switchMap(()=>{const e=["ajs-has-jira-software","ajs-has-jira-service-desk","ajs-has-jira-core"].filter(e=>null==Object(rc.a)(e));return e.length&&_e.i.safeWarn("issue.fetch.user-fetch-timing-epic",`Missing some product access meta tags: ${e.toString()}`),De.Observable.empty()}):(()=>{let e=null,t=null;return(s,n)=>s.pipe(Jt("FETCH_LOGGED_IN_USER_SUCCESS","FETCH_ISSUE_SUCCESS"),Object(qt.mergeMap)(s=>{switch(s.type){case"FETCH_LOGGED_IN_USER_SUCCESS":if(e&&!t){const t=n.getState();"service_desk"===Object(Q.F)(t)&&_e.i.safeWarn("issue.fetch.user-fetch-timing-epic",`Issue data loaded before user data loaded. By [${Date.now()-e}]ms`)}t=Date.now();break;case"FETCH_ISSUE_SUCCESS":e=Date.now()}return De.Observable.empty()}))})(),cc=s("./src/packages/issue/issue-view/src/actions/web-links-actions.js"),lc=s("./src/packages/issue/issue-view/src/selectors/web-links-selector.js");const uc=(e,t,s)=>({object:{icon:{url16x16:s},title:e,url:t}}),dc=({baseUrl:e,issueId:t,href:s,linkText:n,iconUrl:a})=>Object(qe.d)(`${((e,t)=>`${e}/rest/api/3/issue/${t}/remotelink`)(e,t)}`,{body:JSON.stringify(uc(n,s,a))}).then(e=>((e,t,s,n)=>({id:Object(xe.u)(e.id),href:t,linkText:s,iconUrl:n}))(e,s,n,a)),pc=(e,t,s)=>{const n=e.message;Object(Ds.a)(s,t,e,{errorReason:n})},mc=(e,t,s,n,a)=>{if(void 0===s||void 0===n){const e=void 0===s?"No issueId when creating weblink":"Broken weblink state when creating weblink";return _e.i.safeError("issue.fetch.web-links-epic",a,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)})),De.Observable.empty()}const{href:i,linkText:r,iconUrl:o}=n,c=null==o?"":o;return De.Observable.from(dc({baseUrl:t,href:i,issueId:Object(xe.j)(s.toString()),linkText:null==r?i:r,iconUrl:Object(xe.i)(c)})).map(e=>Object(cc.e)(n.id,e)).catch(e=>(pc(e,`${a}: Failed to create web link`,"issue.fetch.web-links-epic"),De.Observable.of(Object(cc.b)(n.id))))},bc=(e,t)=>e.ofType("DELETE_WEB_LINK_REQUEST").switchMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=Object(ae.B)(s),{id:i}=e.payload;return De.Observable.fromPromise(((e,t,s)=>Object(qe.a)(`${e}/rest/api/3/issue/${t}/remotelink/${s}`))(n,a,i)).map(()=>Object(cc.i)(i)).catch(e=>(pc(e,"DELETE_WEB_LINK_REQUEST: Failed to delete web link","issue.fetch.web-links-epic"),De.Observable.of(Object(cc.g)(i))))}),fc=(e,t)=>e.ofType("CREATE_WEB_LINK_REQUEST").switchMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=Object(ae.A)(s),{optimisticId:i}=e.payload,r=Object(lc.d)(i)(s);return mc(0,n,a,r,"CREATE_WEB_LINK_REQUEST")}),gc=(e,t)=>e.ofType("CREATE_WEB_LINK_RETRY").switchMap(e=>{const s=t.getState(),n=Object(ae.g)(s),a=Object(ae.A)(s),{optimisticId:i}=e.payload,r=Object(lc.d)(i)(s);return mc(0,n,a,r,"CREATE_WEB_LINK_RETRY")});var hc=e=>e.ofType("state.EDIT_WORKLOG_SUCCESS","state.ADD_WORKLOG_SUCCESS").filter(e=>e.meta.shouldFetchViewContext).mapTo(rt()),yc=s("./src/packages/issue/issue-view/src/common/model/linked-issue-type.js"),Oc=s("./src/packages/issue/issue-view/src/model/change-type.js"),jc=s("./node_modules/lodash/forEach.js"),Ec=s.n(jc);const vc=["FIELD_SAVE_SUCCESS","SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS","ISSUE_RELATIONSHIP_UPDATE_SUCCESS","FIELD_SAVE_REQUEST","FIELD_SAVE_FAILURE","FIELD_UPDATED","FETCH_LINKED_ISSUES_DATA_SUCCESS","DELETE_LINKED_ISSUE_SUCCESS","CHILD_ISSUE_ADD_SUCCESS","ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS"];var kc=e=>(t,s)=>t.ofType(...vc).do(t=>{if(e)try{const n=Object(xe.j)(String(Object(ae.A)(s.getState())));switch(t.type){case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS":{const{payload:{fieldId:s,targetTypeName:a}}=t;e({issueId:n,type:Oc.a.ISSUE_TYPE_CHANGED,fieldId:s,meta:{typeName:a}});break}case"FIELD_UPDATED":{const{payload:{fieldId:s,fieldValue:a}}=t;e({issueId:n,type:Oc.a.FIELD_CHANGED,fieldId:s,meta:{fieldId:s,fieldValue:a}});break}case"ISSUE_RELATIONSHIP_UPDATE_SUCCESS":{const{payload:{oldParentIdsByIssueIds:s,parentIssueId:a}}=t;e({issueId:n,type:Oc.a.ISSUE_RELATIONSHIP_UPDATED,meta:{newParentIssueId:a,oldParentIssueId:s[n]||null}});break}case"FETCH_LINKED_ISSUES_DATA_SUCCESS":{const s=((e,t)=>{const{payload:{optimisticLinks:s,issueLinks:n}}=t,a=[];return Ec()(s,e=>{const t=n.linkedIssues[e.linkedIssueKey];t&&a.push({linkedIssueId:Object(xe.j)(t.id),direction:e.direction})}),a})(0,t);s.length&&e({issueId:n,type:Oc.a.ISSUE_LINKS_CREATED,meta:{links:s}});break}case"DELETE_LINKED_ISSUE_SUCCESS":{const{meta:{issueId:s,direction:a}}=t;e({issueId:n,type:Oc.a.ISSUE_LINK_DELETED,meta:{linkedIssueId:s,direction:Object(yc.b)(a)}});break}case"CHILD_ISSUE_ADD_SUCCESS":{const{issueKey:s,issueLink:a,issueSummary:i,issueTypeIconUrl:r,issueTypeName:o}=t.payload.childIssue;e({issueId:n,type:Oc.a.CHILD_ISSUE_ADDED,meta:{childIssue:{id:Object(xe.j)(t.payload.childIssue.id),issueKey:s,issueLink:a,issueSummary:i,issueTypeIconUrl:r||void 0,issueTypeName:o||void 0}}});break}case"ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS":e({issueId:n,type:Oc.a.ISSUE_CHILDREN_ORDER_CHANGED,meta:t.payload});break;case"FIELD_SAVE_REQUEST":{const{payload:{fieldId:s,value:a}}=t;e({issueId:n,type:Oc.a.FIELD_CHANGE_REQUESTED,meta:{fieldId:s,fieldValue:a}});break}case"FIELD_SAVE_FAILURE":{const{payload:{fieldId:s}}=t;e({issueId:n,type:Oc.a.FIELD_CHANGE_FAILED,meta:{fieldId:s}});break}}}catch(e){_e.i.safeError("issue.issue-field.ops.change-notification","Failed to call onChange callback",new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))}}).ignoreElements();const wc=e=>({type:"FIELD_LOAD_DRAFT_FAILURE",payload:e});var Sc=e=>e.ofType("FIELD_SAVE_SUCCESS").mergeMap(e=>(e=>{const{payload:{fieldId:t}}=e;return De.Observable.of(Object(Qs.b)({fieldId:t}))})(e)).catch(e=>(e=>(Object(Ds.a)("issue.delete-draft-request","Could not send request to delete field draft from local storage",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of((e=>({type:"FIELD_DELETE_DRAFT_FAILURE",payload:e}))(e))))(e));var Ic=(e,t)=>e.ofType("FIELD_EDIT_BEGIN").mergeMap(e=>De.Observable.merge(...((e,t)=>{const s=Object(es.H)(t);if(-1!==s.indexOf(e.payload.fieldId)){const n=Object(ae.a)(t),a=Object(ae.B)(t);return s.map(s=>{const i=Object(es.o)(s)(t),r=Object(Js.c)(n,a,s);return De.Observable.of(Object(Qs.e)(s,r,s!==e.payload.fieldId?null:tc.e,i))})}return[]})(e,t.getState()))).catch(e=>(e=>(Object(Ds.a)("issue.load-field-draft","Failed to send request to load field draft from local storage ",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of(wc(e))))(e));var Cc=e=>e.ofType("FIELD_INIT_OPTIONS","FIELD_EDIT_REQUEST_EXTERNAL").groupBy(e=>e.payload.fieldId).mergeMap(e=>{const t=e.filter(e=>"FIELD_EDIT_REQUEST_EXTERNAL"===e.type),s=e.filter(e=>"FIELD_INIT_OPTIONS"===e.type),n=t.takeUntil(s).takeLast(1).merge(s.take(1)).pairwise(),a=t.withLatestFrom(s);return De.Observable.merge(n,a).map(([e,t])=>{const{fieldId:s,fieldOptions:n}=t.payload;return Object(tc.b)(s,n)})}),Tc=s("./src/packages/issue/issue-view/src/common/constants/flags.js"),Pc=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),_c=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js");function xc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Dc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xc(Object(s),!0).forEach((function(t){Ac(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ac(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Mc=(e,t)=>{const s=e.ofType("ASSIGN_TO_ME_EXTERNAL"),n=e.ofType("FIELD_INIT_OPTIONS").filter(e=>"assignee"===e.payload.fieldId);return s.filter(()=>{const e=t.getState();return Object(Q.y)(e)&&Object(Pc.d)(e)}).withLatestFrom(n,(e,{payload:{fieldOptions:s}})=>{const n=t.getState(),a=Object(Q.y)(n);return a?Object(_c.b)("assignee",(({avatarUrl:e,displayName:t,id:s})=>({avatarUrls:{"48x48":e},displayName:t,accountId:s}))(a),Dc(Dc({},s),{},{onSaveSuccessFlagType:Tc.d})):null})},Lc=Object(Pe.combineEpics)(Cc,Mc);var Rc=(e,t)=>e.pipe(Jt("FETCH_ISSUE_SUCCESS"),Object(qt.mergeMap)(e=>De.Observable.merge(...((e,t)=>{const s=Object(ae.a)(t),n=Object(ae.B)(t);return Object(es.H)(t).map(e=>{const a=Object(es.h)(e)(t),i=Object(Js.c)(s,n,e);return De.Observable.of(Object(Qs.e)(e,i,null,a))})})(0,t.getState()))),Object(qt.catchError)(e=>(e=>(Object(Ds.a)("issue.load-field-draft","Failed to send request to load field draft from local storage ",e,{}),De.Observable.of(wc(e))))(e)));var Nc=e=>e.ofType("FIELD_SAVE_SUCCESS").filter(e=>e.payload.fieldOptions.canContainMediaContent&&e.meta.shouldFetchViewContext).mapTo(rt());var Uc=(e,t)=>e.ofType("FIELD_EDIT_UPDATE").mergeMap(e=>((e,t)=>{const{payload:{fieldId:s,fieldOptions:n,value:a}}=e;if(!(!!n&&n.shouldSaveDraft))return De.Observable.empty();const i=Object(es.n)(s)(t);return De.Observable.of(Object(Qs.h)(s,a,i))})(e,t.getState())).catch(e=>(e=>(Object(Ds.a)("issue.save-draft","Could not send request to save field draft to local storage",e,new st.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),De.Observable.of((e=>({type:"FIELD_SAVE_DRAFT_FAILURE",payload:e}))(e))))(e)),Fc=s("./node_modules/lodash/pickBy.js"),Vc=s.n(Fc),Kc=s("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js");function Bc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Wc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Hc=e=>e&&e.id,Gc=(e,t)=>Object(Un.c)(e,t).map(R.h),$c=(e,t,s,n,a,i,r)=>{const o=Object(ae.g)(e),c=Object(ae.B)(e),l=Object(es.l)(t)(e),u=Object(es.r)(t)(e),d=Object(es.f)(t)(e),p=Object(es.q)(t)(e),m=Object(Kc.b)(p)?s:((e,t)=>{switch(e){case"option2":return t.id;case"array":return t.map(e=>e.id);default:return t}})(u,s);return i.setFieldValue(c,t,m),De.Observable.fromPromise(n.saveField(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bc(Object(s),!0).forEach((function(t){Wc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({baseUrl:o,issueKey:c,fieldId:t,fieldMetaKey:l,value:m,saveFieldData:a},d?{fieldEditSessionId:d}:null),e)).flatMap(e=>[Object(_c.c)(t,n,m,e,{issueKey:c,shouldFetchViewContext:r}),Object(_c.e)(t,m)])},qc=(e,t)=>e.ofType("FIELD_EDIT_CONFIRM").map(e=>{const s=t.getState(),{fieldId:n,fieldOptions:a,saveFieldData:i,analyticsEvent:r,analyticsAttributeIdRetriever:o=Hc}=e.payload,c=Object(es.h)(n)(s),l=Object(es.n)(n)(s);if(Zr()(c,l))return Object(tc.c)(n,a);let u=!1;if(a.isRichTextField&&a.canContainMediaContent){const e=Object(es.q)(n)(s),a=e&&e.adfValue;u=Object(Me.e)(a,c),u&&t.dispatch(lt())}const d=Vc()({updatedField:n,oldValId:o(l),newValId:o(c)},e=>null!=e);return Object(_c.b)(n,c,a,i,r,d,u)}),zc=e=>(t,s)=>t.ofType("FIELD_SAVE_REQUEST").groupBy(e=>e.payload.fieldId).mergeMap(t=>t.switchMap(t=>{const n=s.getState(),a=Object(ae.B)(n),{fieldId:i,value:r,fieldOptions:o,saveFieldData:c,shouldFetchViewContext:l}=t.payload,u=o.isOptimistic?$c(n,i,r,o,c,e,l):((e,t,s,n,a,i,r)=>$c(e,t,s,n,a,i,r).mergeMap(t=>Gc(e).mergeMap(e=>De.Observable.of(e,t))))(n,i,r,o,c,e,l),d=Object(es.o)(i)(n);return u.catch(t=>{const s=(e=>e instanceof aa.a?e.errors&&e.errors.length>0?e.errors[0].error:e.message:null)(t);return e.setFieldValue(a,i,d),De.Observable.of(Object(_c.a)(i,s,t,o))})})),Yc=e=>{const{fieldId:t,extraParams:s}=e.payload;if("status"===t)return{shouldRefreshComments:s&&s.viaDialog}},Qc=["status"],Jc=[...Qc,"timeoriginalestimate"],Zc=(e,t)=>(s,n)=>s.ofType("FIELD_UPDATED").filter(e=>Object(U.isTimeRemainingFieldEnabled)()?Jc.includes(e.payload.fieldId):Qc.includes(e.payload.fieldId)).switchMap(s=>Object(U.isTimeRemainingFieldEnabled)()?((e,t,s,n)=>Object(Un.c)(e,t).do(t=>{const{fields:a}=t.issue,i=Object(ae.B)(e);return(Object(U.isStoreFieldsWithBatchActionsEnabled)()?nr:ar)(a,s,n,i),t}).map(R.h))(n.getState(),Yc(s),e,t):Gc(n.getState(),Yc(s))),Xc=(e,t)=>e.ofType(Tc.L,"ZERO_APPROVAL_REQUIRED").switchMap(()=>Gc(t.getState()));var el=(e,t)=>Object(Pe.combineEpics)(qc,zc(e),Zc(e,t),Xc),tl=(e,t)=>e.ofType("FIELD_EDIT_BEGIN","FIELD_PASTE","FIELD_SAVE_SUCCESS").groupBy(e=>e.payload.fieldId).map(e=>{const s=e.filter(({type:e})=>"FIELD_EDIT_BEGIN"===e);return e.window(s).map(e=>{const s=e.filter(({type:e})=>"FIELD_SAVE_SUCCESS"===e),n=e.filter(({type:e})=>"FIELD_PASTE"===e).takeUntil(s).reduce((e,t)=>[...e,t.payload.pastedContent],[]);return s.withLatestFrom(n).mergeMap(([e,s])=>{const{fieldId:n,fieldOptions:a}=e.payload,i=Object(es.o)(n)(t.getState());return 0===s.length?De.Observable.empty():De.Observable.of(Object(_c.d)(n,a,i,s))})}).mergeAll()}).mergeAll();const sl=()=>[en,an,sn,Uc,Sc,Rc,Ic,qn,ta,na],nl=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g)=>((e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g)=>[Ia,Cs,Nr({fieldValueActions:a,fieldConfigActions:i,issueViewLayoutActions:r,userPreferenceActions:l,issueTabsActions:m,permissionActions:p,attachmentActions:o,prefetchedResourceManager:u,jiraSettingsActions:b,projectContextActions:f,issueContextActions:g}),bo({fieldValueActions:a,fieldConfigActions:i,issueViewLayoutActions:r,userPreferenceActions:l,permissionActions:p,issueTabsActions:m,attachmentActions:o,projectContextActions:f,issueContextActions:g}),Qi(u),Oi,cn,ic,oc(),el(a,i),_o,pa,Jn(o),Gn,Zn.d,Zn.e,Object(Zn.c)(d),ec,Ki,jn,zs(ae.g,ae.B,ae.F,o),Sn,sa,Nc,Pa,zr,Mi,wn,...sl(),kc(e),Lo,gi,Dn,An,io(n,s,c),ro,oo,Ir(s,a,i,r,l,f,g),Pr,Lc,ji(t),ma,tl,Ko,Bo,Wn,Fo(f),Vn,ac,Xo,To,ga,wa,mo,$t(o,d),hc,xi,Do,So,go,bc,fc,gc,Uo,...Object(U.isShortcutMenuEnabled)()?[nc]:[],...Object(U.isRemoteIssueLinksEnabled)()?[Aa,Yo,Qo]:[]])(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g);function al(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function il(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?al(Object(s),!0).forEach((function(t){rl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):al(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function rl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ol={server:{}};var cl=(e=ol,t)=>{const{type:s,payload:n}=t;switch(s){case"SAVE_SERVER_TIME":return n.serverTime?il(il({},e),{},{server:il(il({},e.server),{},{[n.key]:n.serverTime})}):e;default:return e}};var ll=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_UPLOAD_CONTEXT_SUCCESS":return n;case"FETCH_UPLOAD_CONTEXT_FAILURE":return null;default:return e}};var ul=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_USER_AUTH_SUCCESS":return n;case"FETCH_USER_AUTH_FAILURE":return null;default:return e}};function dl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(s),!0).forEach((function(t){ml(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ml(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bl={clientId:"FETCH_ERROR",serviceHost:"FETCH_ERROR",tokenLifespanInMs:0,tokenIssueTimestamp:0,token:null,areTokenPermissionsUpToDate:!1,collection:null};var fl=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_VIEW_CONTEXT_FAILURE":return bl;case"FETCH_VIEW_CONTEXT_SUCCESS":return n;case"MARK_TOKEN_AS_OUTDATED":return pl(pl({},e),{},{areTokenPermissionsUpToDate:!1});case"MARK_TOKEN_AS_UP_TO_DATE":return pl(pl({},e),{},{areTokenPermissionsUpToDate:!0});default:return e}},gl=s("./node_modules/lodash/mapValues.js"),hl=s.n(gl),yl=s("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js");function Ol(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function jl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ol(Object(s),!0).forEach((function(t){El(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ol(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function El(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vl={},kl=(e,t,s,n=[])=>{const a=jl(jl({},e),{},{[t]:jl(jl({},e[t]),s)});return n.forEach(e=>{delete a[t][e]}),a};var wl=(e=vl,t)=>{switch(t.type){case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_SUCCESS":{const{fields:s}=t.payload.issue;return hl()(s,t=>jl(jl({},t),{},{editingValue:e[t.key]&&e[t.key].editingValue,pendingValue:e[t.key]&&e[t.key].pendingValue}))}case"PREVIEW_DATA_FETCHED":{const s=Object(je.a)(t.payload);return Object(Zt.merge)(e,s)}case"FIELD_EDIT_BEGIN":{const{fieldId:s,fieldOptions:{isRichTextField:n},fieldEditSessionId:a}=t.payload,i=n?Object(yl.b)(e[s]):Object(yl.a)(e[s]);return kl(e,s,jl({editingValue:i},a?{fieldEditSessionId:a}:null),["invalidMessage","isInvalid"])}case"MULTILINE_FIELD_EDIT_BEGIN":{const{multilineFieldIdsToClose:s}=t.payload;if(null!=s){const t=s.reduce((t,s)=>jl(jl({},t),{},{[s]:jl(jl({},e[s]),{},{editingValue:void 0})}),{});return jl(jl({},e),t)}return e}case"FIELD_EDIT_UPDATE":{const{fieldId:s,value:n}=t.payload;return kl(e,s,{editingValue:n},["invalidMessage","isInvalid"])}case"FIELD_SAVE_REQUEST":{const{fieldId:s,value:n}=t.payload;return kl(e,s,{pendingValue:n},["editingValue"])}case"FIELD_EDIT_CANCEL":{const{fieldId:s}=t.payload;return kl(e,s,{},["editingValue","invalidMessage","isInvalid","fieldEditSessionId"])}case"FIELD_SAVE_SUCCESS":{const{fieldId:s,fieldOptions:n}=t.payload;if(!(s in e))return e;const{pendingValue:a}=e[s];let i=kl(e,s,{},["pendingValue","fieldEditSessionId"]);return n.isOptimistic&&(i=n.isRichTextField?kl(i,s,{adfValue:a}):kl(i,s,{value:a})),i}case"FIELD_SAVE_FAILURE":{const{fieldId:s,invalidMessage:n,fieldOptions:a}=t.payload,{pendingValue:i}=e[s],r=a.shouldDiscardChangeOnFailure?["editingValue"]:[];return kl(e,s,{editingValue:i,isInvalid:!0,invalidMessage:n},["pendingValue","fieldEditSessionId",...r])}case"FIELD_ADD_ALLOWED_VALUES":{const{allowedValues:s,fieldId:n}=t.payload,a=e[n]&&e[n].allowedValues||[];return kl(e,n,{allowedValues:[...a,...s]})}case"state.UPDATE_TIME_REMAINING_SUCCESS":{const{timeRemaining:s}=t.payload;return jl(jl({},e),{},{timetracking:jl(jl({},e.timetracking),{},{value:jl(jl({},e.timetracking.value),{},{remainingEstimateSeconds:s})})})}case"state.ADD_WORKLOG_SUCCESS":{const{timeTracking:s}=t.payload;return kl(e,"timetracking",{value:s})}case"state.EDIT_WORKLOG_SUCCESS":case"state.DELETE_WORKLOG_SUCCESS":{const{timeSpentSecondsDelta:s,newRemainingEstimateSeconds:n}=t.payload.timeTrackingDeltas,a=e.timetracking.value,i=jl(jl({},a),{},{timeSpentSeconds:(a.timeSpentSeconds||0)+s});return null!==n&&(i.remainingEstimateSeconds=n),kl(e,"timetracking",{value:i})}case"UPDATE_APPROVAL_LINKED_USER_PICKER_FIELD":{const{linkedUserPickerFieldId:s,newApproverList:n}=t.payload;return s&&e[s]?kl(e,s,{value:n}):e}default:return e}};function Sl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Il(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Sl(Object(s),!0).forEach((function(t){Cl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Cl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Tl={selectedActivityItem:null};var Pl=(e=Tl,t)=>{switch(t.type){case"SELECT_ACTIVITY_ITEM":return Il(Il({},e),{},{selectedActivityItem:t.payload});default:return e}};function _l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function xl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Dl={epic:void 0};var Al=(e=Dl,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_l(Object(s),!0).forEach((function(t){xl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t.payload.issue.agile);default:return e}};function Ml(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ll(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ml(Object(s),!0).forEach((function(t){Rl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ml(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Rl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Nl={isOpen:!1};var Ul=(e=Nl,t)=>{switch(t.type){case"SHOW_ASSIGN_ISSUE_PARENT_MODAL":return Ll(Ll({},e),{},{isOpen:!0});case"HIDE_ASSIGN_ISSUE_PARENT_MODAL":return Ll(Ll({},e),{},{isOpen:!1});default:return e}};function Fl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fl(Object(s),!0).forEach((function(t){Kl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Kl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Bl={isPopupOpen:!1,attachments:{},placeholderAttachmentCount:0},Wl=(e,{id:t,mediaApiFileId:s})=>{const n=[t,s],a=Object.keys(e.attachments).filter(e=>!n.includes(e)).reduce((t,s)=>Vl(Vl({},t),{},{[s]:e.attachments[s]}),{});return Vl(Vl({},e),{},{attachments:a})};var Hl=(e=Bl,t)=>{switch(t.type){case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_BEGIN":{const s=t.payload;return Vl(Vl({},e),{},{attachments:Vl(Vl({},e.attachments),{},{[s.id]:s})})}case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_END":return e;case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR":{const{fileId:s}=t.payload;if(null==s)return e;const n=Object.keys(e.attachments).filter(e=>e!==s).reduce((t,s)=>Vl(Vl({},t),{},{attachments:Vl(Vl({},t.attachments),{},{[s]:e.attachments[s]})}),{});return Vl(Vl({},e),{},{attachments:n})}case"ATTACHMENT_JIRA_CREATE_SUCCESS":return Wl(e,t.payload);case"ATTACHMENT_JIRA_CREATE_FAILURE":return Wl(e,t.payload.attachment);case"ATTACHMENT_PICKER_POPUP_OPEN_SUCCESS":return Vl(Vl({},e),{},{isPopupOpen:!0});case"ATTACHMENT_PICKER_POPUP_CLOSE_SUCCESS":return Vl(Vl({},e),{},{isPopupOpen:!1});case"ATTACHMENT_PANEL_DRAG_ENTER":return Vl(Vl({},e),{},{placeholderAttachmentCount:t.payload});case"ATTACHMENT_PANEL_DRAG_LEAVE":case"ATTACHMENT_PANEL_DROP":return Vl(Vl({},e),{},{placeholderAttachmentCount:0});default:return e}};function Gl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gl(Object(s),!0).forEach((function(t){ql(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ql(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zl={isBannerVisible:!1,isBannerDismissed:!1,isTourActive:!1};var Yl=(e=zl,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":case"FETCH_ISSUE_SUCCESS":{const s=t.payload.myPreferences&&t.payload.myPreferences["jira.user.issue.changeboarding.lastinteracted"];return void 0!==s?$l($l({},e),{},{isBannerVisible:null===s}):e}case"CHANGEBOARDING_BANNER_DISMISS":return $l($l({},e),{},{isBannerVisible:!1,isBannerDismissed:!0});case"CHANGEBOARDING_TOUR_BEGIN":return $l($l({},e),{},{isBannerVisible:!1,isTourActive:!0});case"CHANGEBOARDING_TOUR_END":return $l($l({},e),{},{isTourActive:!1});default:return e}};function Ql(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Jl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ql(Object(s),!0).forEach((function(t){Zl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ql(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Zl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Xl={subtaskQuickAddClickCount:0,issueInEpicQuickAddClickCount:0,childIssueQuickAddClickCount:0};var eu=(e=Xl,t)=>{switch(t.type){case"SUBTASK_QUICK_ADD_CLICKED":return Jl(Jl({},e),{},{subtaskQuickAddClickCount:e.subtaskQuickAddClickCount+1});case"ISSUE_IN_EPIC_QUICK_ADD_CLICKED":return Jl(Jl({},e),{},{issueInEpicQuickAddClickCount:e.issueInEpicQuickAddClickCount+1});case"CHILD_ISSUE_QUICK_ADD_CLICKED":return Jl(Jl({},e),{},{childIssueQuickAddClickCount:e.childIssueQuickAddClickCount+1});default:return e}};function tu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function su(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tu(Object(s),!0).forEach((function(t){nu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const au={isBannerVisible:!1};var iu=(e=au,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":case"FETCH_ISSUE_SUCCESS":{const s=t.payload.myPreferences&&t.payload.myPreferences["jira.user.issue.clickthrough-banner.lastinteracted"];return void 0!==s?su(su({},e),{},{isBannerVisible:null===s}):e}case"CLICKTHROUGH_BANNER_DISMISS":return su(su({},e),{},{isBannerVisible:!1});default:return e}};const ru={isOpen:!1};var ou=(e=ru,t)=>{const{type:s}=t;switch(s){case"SHOW_CLONE_MODAL":return{isOpen:!0};case"HIDE_CLONE_MODAL":return{isOpen:!1};default:return e}},cu=s("./src/packages/common-legacy-do-not-add-anything-new/src/icepick/unset-in.js");function lu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function uu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?lu(Object(s),!0).forEach((function(t){du(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function du(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const pu=Object(Zt.freeze)({pendingSavedValues:{},pendingDeletedIds:[],deleteModalCommentId:null,isLoadingMoreComments:!1,commentEditors:{},isCommentAttachmentInProgress:!1,hasScrolledPermalinkComment:!1,loadingStage:"LOADING"});var mu=(e=pu,t)=>{const s=t=>Object(Zt.updateIn)(e,["pendingDeletedIds"],e=>e.filter(e=>e!==t));switch(t.type){case"SAVE_COMMENT_REQUEST":{const{isNewComment:s,id:n,createdDate:a,authorId:i,bodyHtml:r,bodyAdf:o,visibility:c}=t.payload.comment;let l=e;if(s){const t=e.commentEditors.NEW_OPTIMISTIC_COMMENT;if(void 0!==t){const s=Object(cu.a)(e,["commentEditors","NEW_OPTIMISTIC_COMMENT"]);l=Object(Zt.setIn)(s,["commentEditors",n],t)}}const u={id:n,createdDate:a,authorId:i,bodyHtml:r,bodyAdf:o,isInternal:un()(l,["commentEditors",n,"isInternal"],!0),visibility:c};return Object(Zt.chain)(l).setIn(["pendingSavedValues",n],u).setIn(["commentEditors",n,"isEditing"],!1).setIn(["loadingStage"],"LOADING").value()}case"FETCH_OLDER_COMMENTS_REQUEST":case"FETCH_NEWER_COMMENTS_REQUEST":return Object(Zt.set)(e,"isLoadingMoreComments",!0);case"FETCH_MORE_COMMENTS_SUCCESS":case"FETCH_MORE_COMMENTS_FAILURE":return Object(Zt.set)(e,"isLoadingMoreComments",!1);case"SAVE_COMMENT_RETRY":{const{payload:s}=t,n=Object(cu.a)(e,["pendingSavedValues",s.optimisticId,"hasSaveFailed"]);return(t=>!!Object(Zt.getIn)(e,["commentEditors",t]))(s.optimisticId)?n:Object(Zt.setIn)(n,["pendingSavedValues",s.optimisticId,"createdDate"],s.createdDate)}case"SAVE_COMMENT_EDIT":return Object(Zt.setIn)(e,["commentEditors",t.payload.optimisticId,"isEditing"],!0);case"SAVE_COMMENT_SUCCESS":case"SAVE_COMMENT_CANCEL":return Object(cu.a)(Object(cu.a)(e,["commentEditors",t.payload.optimisticId]),["pendingSavedValues",t.payload.optimisticId]);case"FETCH_LATEST_COMMENTS_SUCCESS":case"FETCH_ISSUE_SUCCESS":return Object(Zt.set)(e,"loadingStage","COMPLETE");case"SAVE_COMMENT_FAILURE":return Object(Zt.setIn)(e,["pendingSavedValues",t.payload.optimisticId,"hasSaveFailed"],!0);case"DELETE_COMMENT_REQUEST":{const{payload:s}=t;return Object(Zt.chain)(e).updateIn(["pendingDeletedIds"],e=>[...e,s.id]).set("deleteModalCommentId",null).value()}case"DELETE_COMMENT_SUCCESS":return s(t.payload.id);case"DELETE_COMMENT_FAILURE":return s(t.payload);case"SHOW_DELETE_COMMENT_MODAL":return Object(Zt.set)(e,"deleteModalCommentId",t.payload);case"DELETE_COMMENT_CANCEL":return Object(Zt.set)(e,"deleteModalCommentId",null);case"EDIT_COMMENT_BEGIN":return Object(Zt.setIn)(e,["commentEditors",t.payload.id],{isEditing:!0,isInternal:t.payload.isInternal});case"EDIT_COMMENT_UPDATE":return Object(Zt.setIn)(e,["commentEditors",t.payload.id],{isEditing:!0,isInternal:Object(Zt.getIn)(e,["commentEditors",t.payload.id,"isInternal"]),editingValue:t.payload.value,visibility:Object(Zt.getIn)(e,["commentEditors",t.payload.id,"visibility"])});case"EDIT_COMMENT_VISIBILITY":return Object(Zt.setIn)(e,["commentEditors",t.payload.id,"visibility"],t.payload.visibility);case"EDIT_COMMENT_COLLAPSE":case"EDIT_COMMENT_CANCEL":return Object(cu.a)(e,["commentEditors",t.payload.id]);case"ADD_COMMENT_FORM_CANCEL":case"ADD_COMMENT_FORM_COLLAPSE":{const t=Object(Zt.unset)(e,"addCommentEditorExpand");return Object(cu.a)(t,["commentEditors","NEW_OPTIMISTIC_COMMENT"])}case"ADD_COMMENT_FORM_EXPAND":return Object(Zt.set)(e,"addCommentEditorExpand",!0);case"CHANGE_COMMENT_VISIBILITY":{const{id:s,isInternal:n}=t.payload;return Object(Zt.setIn)(e,["commentEditors",s,"isInternal"],n)}case"SET_COMMENT_ATTACHMENT_IN_PROGRESS":return Object(Zt.set)(e,"isCommentAttachmentInProgress",t.payload.isInProgress);case"SET_COMMENT_SCROLL_STATUS":return Object(Zt.set)(e,"hasScrolledPermalinkComment",t.payload.status);case"MULTILINE_FIELD_EDIT_BEGIN":{const{commentIdsToClose:s,shouldCloseAddCommentForm:n}=t.payload;if(null!=s){const t=(n?s.concat("NEW_OPTIMISTIC_COMMENT"):s).reduce((t,s)=>uu(uu({},t),{},{[s]:uu(uu({},e.commentEditors[s]),{},{editingValue:void 0,visibility:void 0,isEditing:!1})}),{});return uu(uu({},e),{},{commentEditors:uu(uu({},e.commentEditors),t),addCommentEditorExpand:!n&&e.addCommentEditorExpand})}return e}default:return e}};function bu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function fu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?bu(Object(s),!0).forEach((function(t){gu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):bu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function gu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const hu={isShowMoreExpanded:!1};var yu=(e=hu,t)=>{const{type:s}=t;switch(s){case"EXPAND_SHOW_MORE":return fu(fu({},e),{},{isShowMoreExpanded:!0});case"COLLAPSE_SHOW_MORE":return fu(fu({},e),{},{isShowMoreExpanded:!1});default:return e}};function Ou(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ju(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ou(Object(s),!0).forEach((function(t){Eu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ou(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Eu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vu={isContextPanelOpen:!1,contextPanelItem:void 0};var ku=(e=vu,t)=>{switch(t.type){case"CONTEXT_PANEL_SHOW":return ju(ju({},e),{},{isContextPanelOpen:!0,contextPanelItem:t.payload});case"CONTEXT_PANEL_HIDE":return ju(ju({},e),{},{isContextPanelOpen:!1});default:return e}},wu=s("./src/packages/platform/utils/types/src/edition.js"),Su=s("./src/packages/platform/utils/types/src/license-state.js"),Iu=s("./src/packages/issue/issue-view/src/configurations.js");function Cu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Cu(Object(s),!0).forEach((function(t){Pu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Cu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Pu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _u={applicationKey:"",issueActions:[],contextItemCategories:{primary:[],secondary:[]},contentItemCategories:{visible:[],request:void 0},atlassianAccountId:null,baseUrl:Object(xe.b)(""),isAnonymous:!1,issueKey:Object(xe.l)(""),isModal:!1,cloudId:null,locale:"en_US",maxTokenLength:0,ecosystemEnabled:null,isLoadedWithPage:null,rapidViewMap:null,estimationStatistic:null,licensedProducts:{},appEditions:{software:wu.d,core:wu.d,serviceDesk:wu.d},appPermissions:{hasCoreAccess:!1,hasSoftwareAccess:!1,hasServiceDeskAccess:!1},licenseStates:{core:Su.d,software:Su.d,serviceDesk:Su.d},siteAdminStatus:"unknown",productCrossSellConfig:"unknown",isLoading:!1,viewMode:null,firstActivationDateMs:null},xu=({itemId:e,type:t})=>({id:e,type:t}),Du=({state:e,projectConfig:t,issueId:s,contextPrimary:n,contextSecondary:a,contentVisible:i,contentRequest:r})=>{const o=Object(Iu.g)(t);return Tu(Tu({},e),{},{issueId:s,applicationKey:o.applicationKey,issueActions:o.issueActions,ecosystemEnabled:o.ecosystemEnabled,contentItemCategories:{visible:i,request:r},contextItemCategories:{primary:n,secondary:a}})};var Au=(e=_u,t)=>{switch(t.type){case"SET_CONTEXT":{const{payload:s}=t;return Tu(Tu({},e),s)}case"LOAD_NEW_ISSUE":return Tu(Tu({},e),{},{issueKey:t.payload.issueKey});case"LOGIN_SUCCESSFUL":return Tu(Tu({},e),{},{atlassianAccountId:t.payload.accountId});case"PREVIEW_DATA_FETCHED":{const{payload:s}=t;if(s&&s.id&&s.fields.has("project")){const{contextPrimary:t,contextSecondary:n,content:a,contentRequest:i}=s.layout,{id:r}=s,o=s.fields.get("project").value,c=a?a.map(xu):[],l=i&&i.map(xu);return Du({state:e,projectConfig:o,issueId:Object(xe.j)(r),contextPrimary:t.map(xu),contextSecondary:n.map(xu),contentVisible:c,contentRequest:l})}return e}case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_SUCCESS":{const s=t.payload.project,n=t.payload.issue.id,{licensedProducts:a}=t.payload,{licenseStates:i}=t.payload;let r=e.contentItemCategories.visible,o=e.contentItemCategories.request,c=e.contextItemCategories.primary,l=e.contextItemCategories.secondary;if(t.payload.issue.contextItemsCategories){const{primary:e,secondary:s}=t.payload.issue.contextItemsCategories;c=e||[],l=s||[]}return t.payload.issue.contentItemsCategories&&(r=t.payload.issue.contentItemsCategories.visible||[],o=t.payload.issue.contentItemsCategories.request),Tu(Tu({},Du({state:e,projectConfig:s,issueId:n,contextPrimary:c,contextSecondary:l,contentVisible:r,contentRequest:o})),{},{licensedProducts:a,licenseStates:i})}default:return e}};function Mu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Lu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mu(Object(s),!0).forEach((function(t){Ru(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ru(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Nu={};var Uu=(e=Nu,t)=>{switch(t.type){case"LOAD_DRAFT_SUCCESS":case"SAVE_DRAFT_REQUEST":return Lu(Lu({},e),{},{[t.payload.fieldId]:!0});case"DELETE_DRAFT_SUCCESS":return Lu(Lu({},e),{},{[t.payload.fieldId]:!1});default:return e}},Fu=(e=null,t)=>{switch(t.type){case"ECOSYSTEM_SHOW_GLANCE":return t.payload;case"ECOSYSTEM_HIDE_GLANCE":return null;default:return e}},Vu=s("./node_modules/lodash/omit.js"),Ku=s.n(Vu);function Bu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Wu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(s),!0).forEach((function(t){Hu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Hu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Gu=Wu(Wu({canAddComments:!1,canAdministerJira:!1,canAdministerProject:!1,canAssignIssues:!1,canBeAssignedToIssues:!1,canCloneIssue:!1,canCreateAttachments:!1,canCreateChildren:!1,canCreateSubtask:!1,canDeleteAllAttachments:!1,canDeleteAllComments:!1,canDeleteIssue:!1,canDeleteOwnAttachments:!1,canDeleteOwnComments:!1,canEditAllComments:!1,canEditIssues:!1,canEditOwnComments:!1,canLinkIssues:!1,canManageWatchers:!1,canMoveIssue:!1,canScheduleIssues:!1,canViewWatchers:!1,canBrowseUsers:!1},{canDeleteAllWorklogs:!1,canDeleteOwnWorklogs:!1,canEditAllWorklogs:!1,canEditOwnWorklogs:!1,canLogWork:!1}),{},{canUseServiceDeskAgentFeatures:!1,canViewDevTools:!1});function $u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$u(Object(s),!0).forEach((function(t){zu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function zu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Yu={isEnabled:!1,attachmentId:null,availableAttachmentIds:[]};function Qu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ju(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qu(Object(s),!0).forEach((function(t){Zu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Zu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Xu={};const ed=[];var td=s("./node_modules/lodash/filter.js"),sd=s.n(td),nd=s("./node_modules/lodash/pick.js"),ad=s.n(nd);function id(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function rd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?id(Object(s),!0).forEach((function(t){od(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):id(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function od(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const cd={isLinkingEnabled:!0,createLinkedPage:{clickedCount:0,isLoading:!1,isInvalid:!1,errorMessage:""},linkedPages:{pages:[],pageCount:0},mentionedPages:{pages:[],pageCount:0}},ld=["linkedPages","mentionedPages"];var ud=(e=cd,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s}=t.payload,n=ad()(s.confluencePages,ld),a=rd(rd({},e),n);return rd(rd({},a),{},{isLinkingEnabled:!!s.isLinkingEnabled})}case"PREVIEW_DATA_FETCHED":{const{remoteLinks:s}=t.payload;if(s&&s.confluencePages){const{linkedPages:t,mentionedPages:n}=s.confluencePages;return rd(rd({},e),{},{linkedPages:rd(rd({},e.linkedPages),{},{pageCount:t.pageCount}),mentionedPages:rd(rd({},e.mentionedPages),{},{pageCount:n.pageCount})})}return e}case"DELETE_CONFLUENCE_PAGE_LINK_REQUEST":{const{globalId:s}=t.payload,n=((e,t)=>ld.reduce((e,s)=>{const{pages:n}=e[s],a=sd()(n,e=>(e.link?e.link.globalId:e.globalId)!==t);return rd(rd({},e),{},{[s]:{pageCount:a.length,pages:a}})},ad()(e,ld)))(e,s);return rd(rd({},e),n)}case"CREATE_CONFLUENCE_PAGE_LINK_REQUEST":return rd(rd({},e),{},{createLinkedPage:rd(rd({},e.createLinkedPage),{},{isLoading:!0})});case"CREATE_CONFLUENCE_PAGE_LINK_FAILED":{const{errorMessage:s}=t.payload;return rd(rd({},e),{},{createLinkedPage:rd(rd({},e.createLinkedPage),{},{errorMessage:s,isLoading:!1,isInvalid:!0})})}case"CREATE_CONFLUENCE_PAGE_LINK_MODIFIED":return rd(rd({},e),{},{createLinkedPage:rd(rd({},e.createLinkedPage),{},{errorMessage:"",isInvalid:!1})});case"LINK_CONFLUENCE_PAGE_CLOSED":return rd(rd({},e),{},{createLinkedPage:cd.createLinkedPage});case"CREATE_CONFLUENCE_PAGE_LINK_SUCCESS":{const s=e.linkedPages.pages||[];return rd(rd({},e),{},{linkedPages:rd(rd({},e.linkedPages),{},{pages:[...s,t.payload.confluencePageLink],pageCount:e.linkedPages.pageCount+1}),createLinkedPage:rd(rd({},e.createLinkedPage),{},{isLoading:!1,isInvalid:!1,errorMessage:""})})}case"LINK_CONFLUENCE_PAGE_CLICKED":return rd(rd({},e),{},{createLinkedPage:rd(rd({},e.createLinkedPage),{},{clickedCount:e.createLinkedPage.clickedCount+1})});default:return e}};function dd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dd(Object(s),!0).forEach((function(t){md(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function md(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bd={activityPanels:{},canInstallAddons:!1,contentPanels:{},backgroundScripts:[],ecosystemOnDate:0,glances:{},operations:[]};var fd=s("./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js");function gd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gd(Object(s),!0).forEach((function(t){yd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function yd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Od={createLinkedIncident:{clickedCount:0},createMajorIncident:{clickedCount:0}};const jd=[];var Ed=s("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js");function vd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function kd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vd(Object(s),!0).forEach((function(t){wd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Sd={issueLinks:{},linkedIssues:{},linkedIssueKeys:[]};function Id(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Cd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Id(Object(s),!0).forEach((function(t){Td(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Id(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Td(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Pd={isLoadingComplete:!1};const _d=[];const xd={status:"NOT_LOADED",remoteLinks:[]};var Dd=s("./src/packages/platform/utils/constants/src/status-categories.js");function Ad(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Md(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ld(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Md(Object(s),!0).forEach((function(t){Rd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Md(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Rd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Nd={isLoading:!1,hasError:!1,isSaved:!1,isDeleted:!1,isOptimistic:!1},Ud=(e,t)=>{var s,n,a,i,r,o,c;return{id:e.issueId.toString(),issueKey:e.issueKey.stringValue,issueSummary:e.summary.textValue,statusCategoryId:null===(s=e.status)||void 0===s?void 0:s.statusCategoryId,statusCategory:Object(Dd.statusCategoryForId)(null===(n=e.status)||void 0===n?void 0:n.statusCategoryId),issueLink:Object(mn.r)(t),statusName:null===(a=e.status)||void 0===a?void 0:a.name,statusId:null===(i=e.status)||void 0===i?void 0:i.statusId,issuePriorityUrl:Object(mn.r)(e.priority.iconUrl),issuePriorityName:e.priority.name,issueTypeIconUrl:Object(mn.r)(e.issueType.iconUrl),issueTypeName:e.issueType.name,assigneeDisplayName:null===(r=e.assignee)||void 0===r||null===(o=r.userValue)||void 0===o?void 0:o.displayName,assigneeUrl:(null===(c=e.assignee)||void 0===c?void 0:c.userValue)?Object(mn.r)(e.assignee.userValue.avatarUrl):null}},Fd=e=>e.map(e=>{const{preview:t,details:s}=e;let n={};return n=s.error?{issueDetails:null,remoteIssueLinkError:s}:{issueDetails:Ud(s.associatedIssue,t.href),remoteIssueLinkError:null},Ld(Ld({id:t.id.toString(),globalId:void 0===t.globalId?void 0:Object(xe.s)(t.globalId),applicationType:t.applicationType,applicationName:t.applicationName,issueLinkUrl:Object(mn.r)(t.href),relationship:t.relationship,issueKey:Object(xe.l)(t.title),remoteIssueId:Object(xe.j)(t.issueId.toString())},n),Nd)}),Vd=e=>{let t={};if("WITH_ISSUE_ID"===e.payloadType){const{payloadType:s}=e;t=Ad(e,["payloadType"])}else{const{payloadType:s}=e;t=Ld(Ld({},Ad(e,["payloadType"])),{},{remoteIssueId:Object(xe.j)(`OPTIMISTIC_ISSUE_ID_${Date.now()}`)})}const s=Ld(Ld({},Nd),{},{isLoading:!0,isOptimistic:!0});return Ld(Ld({},t),{},{issueDetails:null,remoteIssueLinkError:null},s)};function Kd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Bd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Kd(Object(s),!0).forEach((function(t){Wd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Kd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Wd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Hd={remoteIssueCount:0,remoteIssues:[]};function Gd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gd(Object(s),!0).forEach((function(t){qd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zd={isLinkingEnabled:!0,linkCount:0,links:[],createClickCount:0};function Yd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yd(Object(s),!0).forEach((function(t){Jd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Jd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zd={sortedWorklogIds:[],worklogs:{},totalWorklogs:0,worklogsStartIndex:0};function Xd(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ep(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function tp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(s),!0).forEach((function(t){sp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ep(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function sp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const np=Object(Zt.freeze)({users:{},applicationRoles:[],ecosystem:bd,forge:fd.b,issueLinks:Sd,issueTypes:_d,issueContentPanels:jd,issueRemoteData:Pd,permissions:Gu,comments:Xu,totalComments:0,commentsStartIndex:0,loadedComments:0,confluencePages:cd,webLinks:zd,subtasks:[],subtasksConfiguration:{enabled:!0},cardCover:Yu,timeTrackingConfiguration:{isTimeTrackingEnabled:!1,daysPerWeek:0,hoursPerDay:0,defaultUnit:"minute"},issueLinkTypes:[],childrenIssues:{},parentIssue:null,parentLevelIssues:[],refreshedOn:0,requestPanelMetadata:{channel:void 0,requestUrl:""},worklog:Zd,confluenceAppLinks:ed,incidentManagement:Od,issue:null,jiraSettings:{subtasksConfiguration:{enabled:!0},issueLinkTypes:[],timeTrackingConfiguration:{isTimeTrackingEnabled:!1,daysPerWeek:0,hoursPerDay:0,defaultUnit:"minute"}}}),ap=(e,t=[])=>Ku()(e,[...t,"forgeIssueProperties"]);var ip=(e,t)=>{const s=(e=>{if(e)return e;const t={};return Object.assign(t,{issueTypes:_d}),Object(U.isRemoteIssueLinksEnabled)()&&Object.assign(t,{remoteIssueLinks:Hd,jiraAppLinks:xd}),tp(tp({},np),t)})(e);let n=Object(Zt.chain)(s).set("cardCover",((e=Yu,t)=>{switch(t.type){case"CARD_COVER_FETCH_SUCCESS":return t.payload.cardCover;case"CARD_COVER_UPDATE_REQUEST":case"CARD_COVER_UPDATE_FAILURE":return qu(qu({},e),{},{attachmentId:t.payload.attachmentId});default:return e}})(s.cardCover,t)).set("comments",((e=Xu,t)=>{switch(t.type){case"SAVE_COMMENT_SUCCESS":{const{comment:s}=t.payload;return Ju(Ju({},e),{},{[s.id]:s})}case"DELETE_COMMENT_SUCCESS":{const s=Ju({},e);return delete s[t.payload.id],s}default:return e}})(s.comments,t)).set("confluencePages",ud(s.confluencePages,t)).set("issueLinks",((e=Sd,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":{const{fields:s}=t.payload,n=s.get(jr.k);if(n){const{value:e}=n;return Object(Ed.b)(Object(xe.b)(""),Object(Ed.a)(e))}return e}case"FETCH_LINKED_ISSUES_SUCCESS":return Object(Zt.merge)(e,{linkedIssues:t.payload});case"FETCH_LINKED_ISSUES_DATA_SUCCESS":{const{linkedIssues:s,issueLinks:n,optimisticIds:a}=t.payload,i=Object(cu.a)(e,["issueLinks",a]);return Object(Zt.chain)(i).merge({linkedIssues:s}).merge(n).value()}case"SAVE_LINKED_ISSUE_REQUEST":{const{newIssueLinks:s}=t.payload;return Object(Zt.chain)(e).merge(s.issueLinks).setIn(["issueLinks",s.optimisticId,"isOptimistic"],!0).setIn(["issueLinks",s.optimisticId,"isLoading"],!0).setIn(["issueLinks",s.optimisticId,"hasError"],!1).setIn(["issueLinks",s.optimisticId,"isSaved"],!1).value()}case"SAVE_LINKED_ISSUE_FAILURE":return Object(Zt.chain)(e).setIn(["issueLinks",t.payload.optimisticId,"isLoading"],!1).setIn(["issueLinks",t.payload.optimisticId,"hasError"],!0).value();case"SAVE_LINKED_ISSUE_SUCCESS":return Object(Zt.setIn)(e,["issueLinks",t.payload.optimisticId,"isSaved"],!0);case"FETCH_LINKED_ISSUES_DATA_FAILURE":{let s=e;return t.payload.optimisticIds.forEach(e=>{s=Object(Zt.setIn)(s,["issueLinks",e,"isLoading"],!1)}),s}case"SAVE_LINKED_ISSUE_RETRY":return Object(Zt.chain)(e).setIn(["issueLinks",t.payload.optimisticId,"isLoading"],!0).setIn(["issueLinks",t.payload.optimisticId,"hasError"],!1).value();case"DELETE_LINKED_ISSUE_REQUEST":{const s=Object(Zt.setIn)(e,["issueLinks",t.payload.linkedIssueId,"isDeleted"],!0);return Object(cu.a)(s,["deleteModalLinkId"])}case"DELETE_LINKED_ISSUE_FAILURE":return Object(Zt.setIn)(e,["issueLinks",t.payload,"isDeleted"],!1);case"DELETE_LINKED_ISSUE_SUCCESS":case"SAVE_LINKED_ISSUE_CANCEL":return Object(cu.a)(e,["issueLinks",t.payload]);case"ADD_ISSUE_LINK_CLICKED":return Object(Zt.setIn)(e,["quickAddClicked"],((e||{}).quickAddClicked||0)+1);case"ADD_ISSUE_LINK_CLOSED":return Object(Zt.setIn)(e,["quickAddClicked"],0);case"SET_CREATE_LINKED_ISSUE_PERMISSION":return Object(Zt.setIn)(e,["canCreateLinkedIssue"],t.payload.canCreateLinkedIssue);case"REFRESH_ISSUE_SUCCESS":if(t.payload.issueLinks){const s=t.payload.issueLinks;return Object(Zt.setIn)(s,["canCreateLinkedIssue"],e.canCreateLinkedIssue)}return e;case"CREATE_LINKED_ISSUE_SUCCESS":{const{newIssueLinks:s}=t.payload;return Ec()(s.issueLinks,(e,t)=>{s.issueLinks[t]=kd(kd({},e),{},{isOptimistic:!1,isLoading:!0,hasError:!1,isSaved:!0})}),Object(Zt.merge)(e,s)}default:return e}})(s.issueLinks,t)).set("ecosystem",((e=bd,t)=>{switch(t.type){case"CONTENT_PANEL_SELECTED":return pd(pd({},e),{},{selectedContentPanel:t.payload});case"CONTENT_PANEL_UNSELECT":return pd(pd({},e),{},{selectedContentPanel:void 0});case"REFRESH_ECOSYSTEM_SUCCESS":return pd({},t.payload);case"FETCH_ISSUE_SUCCESS":return pd({},t.payload.ecosystem);default:return e}})(s.ecosystem,t)).set("forge",Object(fd.a)(s.forge,t)).set("confluenceAppLinks",((e=ed,t)=>{switch(t.type){case"FETCH_CONFLUENCE_APP_LINKS_SUCCESS":return t.payload;default:return e}})(s.confluenceAppLinks,t)).set("issueContentPanels",((e=jd,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":return t.payload.issueContentPanels||e;case"ADD_CONTENT_PANEL_SUCCESS":return[...e,t.payload];case"REMOVE_CONTENT_PANEL_SUCCESS":{const{payload:s}=t;return e.filter(e=>e!==s)}case"CONTENT_PANELS_CUSTOMISED_SUCCESS":return e.includes("issue.content.panel.customised.flag")?e:[...e,"issue.content.panel.customised.flag"];default:return e}})(s.issueContentPanels,t)).set("issueTypes",((e=_d,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":return t.payload.issueTypes||e||_d;case"SET_ISSUE_TYPES":return t.payload.map(e=>{const{id:t,name:s,subtask:n,iconUrl:a,fields:i}=e;return{id:t,name:s,subtask:n,iconUrl:a,fields:i}});default:return t.type,e}})(s.issueTypes,t)).set("webLinks",((e=zd,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s={}}=t.payload,{webLinks:n}=s,{linkCount:a=0,links:i=[]}=n||{};return $d($d({},e),{},{isLinkingEnabled:!!s.isLinkingEnabled,linkCount:a,links:i})}case"SHOW_CREATE_WEB_LINK_FORM":return $d($d({},e),{},{createClickCount:e.createClickCount+1});case"HIDE_CREATE_WEB_LINK_FORM":return $d($d({},e),{},{createClickCount:zd.createClickCount});case"DELETE_WEB_LINK_REQUEST":{const{id:s}=t.payload,n=e.links.map(e=>e.id===s?$d($d({},e),{},{isDeleting:!0,deleteFailed:!1}):e);return $d($d({},e),{},{links:n})}case"DELETE_OPTIMISTIC_WEB_LINK":case"DELETE_WEB_LINK_SUCCESS":{const{id:s}=t.payload;if(s&&e.links){const t=e.links.filter(e=>e.id!==s),n=t.length;return $d($d({},e),{},{linkCount:n,links:t})}return e}case"DELETE_WEB_LINK_FAILED":{const{id:s}=t.payload,n=e.links.map(e=>e.id===s?$d($d({},e),{},{isDeleting:!1,deleteFailed:!0}):e);return $d($d({},e),{},{links:n})}case"CANCEL_FAILED_WEB_LINK_DELETION":{const{id:s}=t.payload,n=e.links.map(e=>{if(e.id!==s)return e;return{id:e.id,href:e.href,linkText:e.linkText,iconUrl:e.iconUrl}});return $d($d({},e),{},{links:n})}case"CREATE_WEB_LINK_REQUEST":{const{optimisticId:s,href:n,linkText:a,iconUrl:i}=t.payload;return $d($d({},e),{},{linkCount:e.linkCount+1,links:[...e.links,{id:s,href:n,linkText:a,iconUrl:i,isCreating:!0,createFailed:!1}]})}case"CREATE_WEB_LINK_SUCCESS":{const{optimisticId:s,webLink:n}=t.payload,a=e.links.map(e=>e.id===s?n:e);return $d($d({},e),{},{links:a})}case"CREATE_WEB_LINK_FAILED":{const{optimisticId:s}=t.payload,n=e.links.map(e=>e.id===s?$d($d({},e),{},{isCreating:!1,createFailed:!0}):e);return $d($d({},e),{},{links:n})}case"CREATE_WEB_LINK_RETRY":{const{optimisticId:s}=t.payload,n=e.links.map(e=>e.id===s?$d($d({},e),{},{isCreating:!0,createFailed:!1}):e);return $d($d({},e),{},{links:n})}default:return e}})(s.webLinks,t)).set("incidentManagement",((e=Od,t)=>{switch(t.type){case"LINK_INCIDENT_CLICKED":return hd(hd({},e),{},{createLinkedIncident:hd(hd({},e.createLinkedIncident),{},{clickedCount:e.createLinkedIncident.clickedCount+1})});case"CREATE_MAJOR_INCIDENT_CLICKED":return hd(hd({},e),{},{createMajorIncident:hd(hd({},e.createMajorIncident),{},{clickedCount:e.createMajorIncident.clickedCount+1})});default:return e}})(s.incidentManagement,t)).value();return Object(U.isRemoteIssueLinksEnabled)()&&(n=Object(Zt.set)(n,"remoteIssueLinks",((e=Hd,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s={}}=t.payload,{remoteLinkedIssues:n=[]}=s,a=n.length,i=Bd(Bd({},e),{},{remoteIssueCount:a,remoteIssues:Fd(n)});return Bd({},i)}case"DELETE_REMOTE_LINKED_ISSUE_REQUEST":{const{globalId:s}=t.payload;return Bd(Bd({},e),{},{remoteIssues:e.remoteIssues.map(e=>e.globalId===s?Bd(Bd({},e),{},{isDeleted:!0}):e)})}case"DELETE_REMOTE_LINKED_ISSUE_SUCCESS":{const s=t.payload;return Bd(Bd({},e),{},{remoteIssues:e.remoteIssues.reduce((e,t)=>(t.globalId!==s&&e.push(t),e),[])})}case"DELETE_REMOTE_LINKED_ISSUE_FAILURE":{const s=t.payload;return Bd(Bd({},e),{},{remoteIssues:e.remoteIssues.map(e=>e.globalId===s?Bd(Bd({},e),{},{isDeleted:!1}):e)})}case"SAVE_REMOTE_LINKED_ISSUE_REQUEST":{const{newRemoteIssueLink:s}=t.payload;return Bd(Bd({},e),{},{remoteIssues:e.remoteIssues.concat(Vd(s))})}case"SAVE_REMOTE_LINKED_ISSUE_SUCCESS":{const{optimisticId:s,saveRemoteLinkResponse:{id:n,issueId:a,globalId:i}}=t.payload;return Bd(Bd({},e),{},{remoteIssues:e.remoteIssues.map(e=>e.id===s?Bd(Bd({},e),{},{id:n.toString(),globalId:Object(xe.s)(i),remoteIssueId:void 0!==a?Object(xe.j)(a.toString()):e.remoteIssueId,isOptimistic:!1,isSaved:!0}):e)})}case"SAVE_REMOTE_LINKED_ISSUE_FAILURE":{const{optimisticId:s,error:n}=t.payload;return 400===n.statusCode?Bd(Bd({},e),{},{remoteIssues:e.remoteIssues.filter(e=>e.id!==s)}):Bd(Bd({},e),{},{remoteIssues:e.remoteIssues.map(e=>e.id===s?Bd(Bd({},e),{},{isLoading:!1,hasError:!0}):e)})}case"SAVE_REMOTE_LINKED_ISSUE_RETRY":{const{optimisticId:s}=t.payload;return Bd(Bd({},e),{},{remoteIssues:e.remoteIssues.map(e=>e.id===s?Bd(Bd({},e),{},{isLoading:!0,hasError:!1}):e)})}case"SAVE_REMOTE_LINKED_ISSUE_CANCEL":{const s=t.payload;return Bd(Bd({},e),{},{remoteIssues:e.remoteIssues.filter(e=>e.id!==s)})}default:return e}})(s.remoteIssueLinks,t)),n=Object(Zt.set)(n,"jiraAppLinks",((e=xd,t)=>{switch(t.type){case"FETCH_JIRA_APP_LINKS_SUCCESS":return{status:"LOADED",remoteLinks:t.payload.map(e=>({id:e.id,name:e.name,baseUrl:Object(xe.b)(e.url),authUrl:Object(xe.i)(e.authUrl),requireCredentials:e.requireCredentials}))};case"FETCH_JIRA_APP_LINKS_FAILED":return{status:"ERROR",remoteLinks:e.remoteLinks};case"FETCH_JIRA_APP_LINKS_REQUEST":return{status:"LOADING",remoteLinks:e.remoteLinks};case"APPLINK_AUTHENTICATION_SUCCESS":return{status:"NOT_LOADED",remoteLinks:e.remoteLinks};default:return e}})(s.jiraAppLinks,t))),n=Object(Zt.set)(n,"worklog",((e=Zd,t)=>{switch(t.type){case"state.FETCH_WORKLOGS_BY_ID_SUCCESS":{const{sortedWorklogIds:s,worklogs:n,startIndex:a,totalWorklogs:i}=t.payload;return Qd(Qd({},e),{},{sortedWorklogIds:s,worklogs:n,worklogsStartIndex:a,totalWorklogs:i})}case"state.FETCH_WORKLOGS_BY_ID_FAILURE":return Qd({},Zd);case"state.EDIT_WORKLOG_SUCCESS":{const{worklogs:s}=t.payload;return Qd(Qd({},e),{},{worklogs:s})}case"state.FETCH_WORKLOGS_SUCCESS":{const{sortedWorklogIds:s,worklogs:n,totalWorklogs:a}=t.payload,{worklogsStartIndex:i}=e;return{sortedWorklogIds:s.slice().reverse().concat(e.sortedWorklogIds),worklogs:Qd(Qd({},e.worklogs),n),totalWorklogs:a,worklogsStartIndex:i}}case"state.FETCH_OLDER_WORKLOGS_SUCCESS":{const{worklogs:s,sortedWorklogIds:n,totalWorklogs:a}=t.payload;return Qd(Qd({},e),{},{worklogs:Qd(Qd({},e.worklogs),s),sortedWorklogIds:[...n,...e.sortedWorklogIds],totalWorklogs:a})}case"state.FETCH_NEWER_WORKLOGS_SUCCESS":{const{worklogs:s,sortedWorklogIds:n,totalWorklogs:a}=t.payload,i=e.worklogsStartIndex||0;return Qd(Qd({},e),{},{worklogs:Qd(Qd({},e.worklogs),s),sortedWorklogIds:[...e.sortedWorklogIds,...n],totalWorklogs:a,worklogsStartIndex:i-n.length})}case"FETCH_ISSUE_SUCCESS":{const{payload:e}=t,{sortedWorklogIds:s,worklogs:n,totalWorklogs:a,worklogsStartIndex:i}=e;return{sortedWorklogIds:s,worklogs:n,totalWorklogs:a,worklogsStartIndex:i}}case"state.DELETE_WORKLOG_SUCCESS":{const{worklogId:s}=t.payload,{totalWorklogs:n,worklogsStartIndex:a}=e;return{sortedWorklogIds:e.sortedWorklogIds.filter(e=>e!==s),worklogs:Ku()(e.worklogs,s),totalWorklogs:n-1,worklogsStartIndex:a}}default:return e}})(s.worklog,t)),n=Object(Zt.set)(n,"issueRemoteData",((e=Pd,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":case"FETCH_ISSUE_REMOTE_DATA_FAILURE":return Cd(Cd({},e),{},{isLoadingComplete:!0});default:return e}})(s.issueRemoteData,t)),((e,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_ISSUE_SUCCESS":{const t=Object(U.isForgeIssuePanelNextEnabled)()?Object(Zt.merge)(e,ap(n,["issueContentPanels","issueTypes"])):Object(Zt.merge)(e,Ku()(n,["issueContentPanels","issueTypes"]));return Ku()(t,[["issue","fields"],["issue","contextItemsCategories"],["issue","contentItemsCategories"],"changeboardingLastInteracted","clickthroughBannerLastInteracted","licensedProducts","licenseStates"])}case"FETCH_SCREENID_SUCCESS":case"FETCH_MORE_COMMENTS_SUCCESS":return Object(Zt.merge)(e,n);case"FETCH_LATEST_COMMENTS_SUCCESS":{const{comments:t,commentsStartIndex:s,loadedComments:a,totalComments:i,users:r}=n;return Object(Zt.chain)(e).setIn(["comments"],t).setIn(["users"],r).setIn(["commentsStartIndex"],s).setIn(["loadedComments"],a).setIn(["totalComments"],i).value()}case"PREVIEW_DATA_FETCHED":{const{fields:t}=n;let s=e;const a=t&&t.get("project");if(a&&a.value&&(s=Object(Zt.set)(s,"project",a.value)),n.comments){const{comments:{comments:e={},totalCount:t,startIndex:a}}=n;s=Object(Zt.chain)(s).setIn(["comments"],e).setIn(["loadedComments"],Object.keys(e).length).setIn(["totalComments"],t).setIn(["commentsStartIndex"],a).value()}return n.users&&(s=Object(Zt.set)(s,"users",Object(Zt.merge)(e.users,n.users))),s}case"REFRESH_ISSUE_SUCCESS":{const t=Object(U.isForgeIssuePanelNextEnabled)()?ap(n):n,s=Object.keys(t).reduce((s,n)=>"users"===n?Object(Zt.set)(s,"users",Object(Zt.merge)(e.users,t.users)):"issueTypes"===n||"issueLinks"===n||"issueContentPanels"===n?s:Object(Zt.set)(s,n,t[n]),e);return Object(Zt.setIn)(s,["refreshedOn"],Date.now())}case"FETCH_LOGGED_IN_USER_SUCCESS":{const{user:t,applicationRoles:s}=n,a=t.id,i=tp({},e.users);return a&&(i[t.id]=t),tp(tp({},e),{},{users:i},Object(U.isUseAppPermissionsFromTenantContextEnabled)()?void 0:{applicationRoles:s})}case"SAVE_COMMENT_SUCCESS":return n.isNewComment?Object(Zt.chain)(e).setIn(["loadedComments"],e.loadedComments+1).setIn(["totalComments"],e.totalComments+1).value():e;case"DELETE_COMMENT_SUCCESS":return Object(Zt.chain)(e).setIn(["loadedComments"],e.loadedComments-1).setIn(["totalComments"],e.totalComments-1).value();case"REQUEST_PANEL_METADATA_FETCH_SUCCESS":{const t=Object(cu.a)(e,["requestPanelMetadata"]);return Object(Zt.setIn)(t,["requestPanelMetadata"],n)}case"PROJECT_ISSUE_TYPES_REQUEST_SUCCESS":return Object(Zt.setIn)(e,["project","issueTypes"],n);case"FETCH_ISSUE_PARENTS_SUCCESS":return Object(Zt.setIn)(e,["parentLevelIssues"],n);case"SET_PARENT_SUCCESS":{const s=t.payload.parentIssue,{issueType:n}=s,a=Xd(s,["issueType"]),{name:i,iconUrl:r}=n||{},o=tp(tp({},a),{},{issueTypeName:i||"",issueTypeIconUrl:r||""});return Object(Zt.setIn)(e,["parentIssue"],o)}case"UNSET_PARENT_SUCCESS":return Object(Zt.setIn)(e,["parentIssue"],null);case"CHILD_ISSUE_ADD_SUCCESS":{const{payload:{childIssue:s}}=t;s.isLoading=void 0;const n=JSON.parse(JSON.stringify(e.childrenIssues));return n.push(s),Object(Zt.setIn)(e,["childrenIssues"],n)}case"SUBTASK_ADD_SUCCESS":{const{payload:{subtask:s}}=t,n=JSON.parse(JSON.stringify(e.subtasks));return n.push(s),Object(Zt.setIn)(e,["subtasks"],n)}default:return e}})(n,t)};const rp=e=>{const{traceId:t,errorMessage:s,endpoint:n,statusCode:a}=e,i={};return null!==t&&(i.traceId=t),null!==s&&(i.errorMessage=s),null!==n&&(i.endpoint=n),null!==a&&(i.statusCode=a),i};var op=(e=null,t)=>{switch(t.type){case"FETCH_ISSUE_FAILURE":return rp(t.payload);case"ISSUE_PREVIEW_FAILURE":return Object(U.isImproveIssueExpressLoggingEnabled)()?rp(t.payload):e;default:return e}};var cp=(e=null,t)=>{switch(t.type){case"FETCH_ISSUE_FAILURE":case"ISSUE_PREVIEW_FAILURE":return t.payload.error;case"LOGIN_SUCCESSFUL":return null;default:return e}};var lp=(e="NONE",t)=>{switch(t.type){case"FETCHING_ISSUE_TYPES":return"PENDING";case"SET_ISSUE_TYPES":return"COMPLETE";case"FETCH_ISSUE_TYPES_FAILED":return"FAILED";default:return t.type,e}};const up=e=>e.length>0?e[0].id+1:1,dp=[];var pp=(e=dp,t)=>{switch(t.type){case"SAVE_COMMENT_FAILURE":return t.payload.invalidMessage&&t.payload.invalidMessage.includes("CONTENT_LIMIT_EXCEEDED")?[{type:Tc.l,id:up(e)},...e]:[{type:t.payload.isServerValidationError?Tc.k:Tc.j,id:up(e)},...e];case"DELETE_COMMENT_FAILURE":return[{type:Tc.m,id:up(e)},...e];case"CLICKTHROUGH_BANNER_DISMISS":return[{type:Tc.i,id:up(e)},...e];case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR":case"ATTACHMENT_JIRA_CREATE_FAILURE":return[{type:Tc.e,id:up(e)},...e];case"EDITOR_CHANGE_FAILURE":case"EDITOR_EXPANDED_FAILURE":case"EDITOR_SAVE_FAILURE":return[{type:Tc.u,id:up(e)},...e];case Tc.H:return[{type:Tc.H,id:up(e)},...e];case"DELETE_LINKED_ISSUE_FAILURE":case"DELETE_REMOTE_LINKED_ISSUE_FAILURE":return[{type:Tc.q,id:up(e)},...e];case"SAVE_REMOTE_LINKED_ISSUE_FAILURE":{const{error:s,remoteIssueKey:n}=t.payload;if(400===s.statusCode){const t=(e=>{try{const t=JSON.parse(e),s=Object.values(t.errors||{});return[...t.errorMessages||[],...s].join(" ")}catch(t){return e}})(s.message);return[{type:Tc.E,id:up(e),titleI18nValues:{remoteIssueKey:n},descriptionI18nValues:{i18nServerErrorMessage:t}},...e]}return e}case"FIELD_SAVE_FAILURE":{const{fieldOptions:s}=t.payload,{onSaveFailureFlagType:n}=s;if(s.isRichTextField&&t.payload.invalidMessage){if(t.payload.invalidMessage.includes("CONTENT_LIMIT_EXCEEDED"))return[{type:Tc.I,id:up(e)},...e];if(t.payload.invalidMessage&&t.payload.invalidMessage.includes("is required"))return[{type:Tc.J,id:up(e)},...e]}return n?[{type:n,id:up(e)},...e]:e}case"FIELD_SAVE_SUCCESS":{const{onSaveSuccessFlagType:s}=t.payload.fieldOptions;return s?[{type:s,id:up(e),descriptionI18nValues:{issueKey:t.meta&&t.meta.issueKey}},...e]:e}case"DISMISS_FLAG":return e.filter(e=>e.id!==t.payload);case"DELETE_ISSUE_FAILURE":return[{type:Tc.p,id:up(e),titleI18nValues:{issueKey:t.payload.issueKey}},...e];case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS":return[{type:Tc.h,id:up(e),titleI18nValues:{destType:t.payload.targetTypeName}},...e];case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_FAILURE":return[{type:Tc.g,id:up(e)},...e];case"TOGGLE_WATCHING_ERROR":return[{type:Tc.Q,id:up(e)},...e];case"FETCH_WATCHERS_ERROR":return[{type:Tc.z,id:up(e)},...e];case"START_WATCHING_SUCCESS":return[{type:Tc.M,id:up(e)},...e];case"STOP_WATCHING_SUCCESS":return[{type:Tc.N,id:up(e)},...e];case"REMOVE_WATCHER_ERROR":return[{type:Tc.G,id:up(e)},...e];case"ADD_WATCHER_ERROR":return[{type:Tc.b,id:up(e)},...e];case"state.ADD_WORKLOG_FAILURE":return[{type:Tc.c,id:up(e)},...e];case"state.UPDATE_TIME_REMAINING_FAILURE":return[{type:Tc.P,id:up(e)},...e];case"state.EDIT_WORKLOG_SUCCESS":return[{type:Tc.x,id:up(e)},...e];case"state.EDIT_WORKLOG_FAILURE":return[{type:Tc.w,id:up(e)},...e];case"state.DELETE_WORKLOG_SUCCESS":return[{type:Tc.t,id:up(e)},...e];case"state.DELETE_WORKLOG_FAILURE":return[{type:Tc.s,id:up(e)},...e];case"DELETE_CONFLUENCE_PAGE_LINK_FAILED":return[{type:Tc.o,id:up(e)},...e];case"DELETE_WEB_LINK_FAILED":return[{type:Tc.r,id:up(e)},...e];case Tc.K:return[{type:Tc.K,id:up(e)},...e];case Tc.L:return[{type:Tc.L,id:up(e)},...e];case Tc.a:return[{type:Tc.a,id:up(e)},...e];case Tc.F:return[{type:Tc.F,id:up(e)},...e];case"FETCH_JIRA_APP_LINKS_FAILED":return[{type:Tc.y,id:up(e)},...e];default:return e}};function mp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?mp(Object(s),!0).forEach((function(t){fp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function fp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const gp={showCreateIncidentPanel:!1,showCreateMajorIncidentModal:!1};var hp=(e=gp,t)=>{switch(t.type){case"LINK_INCIDENT_CLICKED":return bp(bp({},e),{},{showCreateIncidentPanel:!0});case"LINK_INCIDENT_PANEL_CLOSED":return bp(bp({},e),{},{showCreateIncidentPanel:!1});case"CREATE_MAJOR_INCIDENT_CLICKED":return bp(bp({},e),{},{showCreateMajorIncidentModal:!0});case"CREATE_MAJOR_INCIDENT_MODAL_CLOSED":return bp(bp({},e),{},{showCreateMajorIncidentModal:!1});default:return e}};function yp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Op(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yp(Object(s),!0).forEach((function(t){jp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ep={isDeleteIssueModalOpen:!1,isDeletingIssue:!1,didIssueDeleteFail:!1,issueKey:null};var vp=(e=Ep,t)=>{switch(t.type){case"OPEN_DELETE_ISSUE_MODAL":return Op(Op({},e),{},{isDeleteIssueModalOpen:!0});case"CLOSE_DELETE_ISSUE_MODAL":return Op(Op({},e),{},{isDeleteIssueModalOpen:!1});case"DELETE_ISSUE_REQUEST":return Op(Op({},e),{},{isDeletingIssue:!0,didIssueDeleteFail:!1,issueKey:t.payload.issueKey});case"DELETE_ISSUE_SUCCESS":return Op(Op({},e),{},{isDeletingIssue:!1,didIssueDeleteFail:!1,issueKey:t.payload});case"DELETE_ISSUE_FAILURE":return Op(Op({},e),{},{isDeletingIssue:!1,didIssueDeleteFail:!0,issueKey:t.payload.issueKey});default:return e}},kp=(e="LOADING",t)=>{const{type:s}=t;switch(s){case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_FAILURE":return"COMPLETE";case"PREVIEW_DATA_FETCHED":return"LOADING"===e?"PREVIEW":e;case"LOGIN_SUCCESSFUL":case"LOAD_NEW_ISSUE":return"LOADING";default:return e}};function wp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Sp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wp(Object(s),!0).forEach((function(t){Ip(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ip(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Cp={shouldShowIssueTypeList:!1};var Tp=(e=Cp,t)=>{const{type:s,payload:n}=t;switch(s){case"SHOW_ISSUE_TYPE_LIST":return Sp(Sp({},e),{},{shouldShowIssueTypeList:n});default:return e}};function Pp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Pp(Object(s),!0).forEach((function(t){xp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Pp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Dp={projectHasSubtaskValidators:{status:"LOADING"}};var Ap=(e=Dp,t)=>{switch(t.type){case"SET_CONTEXT":return e;case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS":return _p(_p({},e),{},{projectHasSubtaskValidators:{status:"LOADING"}});case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_SUCCESS":return _p(_p({},e),{},{projectHasSubtaskValidators:{status:"LOADED",value:t.payload}});case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_FAILURE":return _p(_p({},e),{},{projectHasSubtaskValidators:{status:"FAILED"}});default:return e}},Mp=(e=[],t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_SUCCESS":return n;default:return e}};const Lp={timestamp:0,value:void 0};var Rp=(e=Lp,t)=>{switch(t.type){case"SHARE_AS_COMMENT":return{timestamp:Date.now(),value:t.payload.value};case"CLEAR_SHARED_AS_COMMENT_VALUES":return{timestamp:Date.now()};default:return e}};function Np(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Up(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Np(Object(s),!0).forEach((function(t){Fp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Np(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Fp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Vp={triggerShortcutDialogCount:0};var Kp=(e=Vp,t)=>{const{type:s}=t;switch(s){case"TRIGGER_SHORTCUT_DIALOG_OPEN":return Up(Up({},e),{},{triggerShortcutDialogCount:e.triggerShortcutDialogCount+1});default:return e}};const Bp={issueUpdatedTimestamp:0};var Wp=(e=Bp,t)=>{const{type:s,payload:n}=t;switch(s){case"FIELD_UPDATED":return"status"===n.fieldId?{issueUpdatedTimestamp:Date.now()}:e;case"SAVE_COMMENT_SUCCESS":return{issueUpdatedTimestamp:Date.now()};default:return e}};const Hp=window.localStorage&&window.localStorage.getItem("jira.absolutedate.issueview")||"RELATIVE";var Gp=(e=Hp,t)=>{switch(t.type){case"SET_TIMESTAMP_DISPLAY_SETTING":return t.payload;case"FETCH_ISSUE_SUCCESS":return Hp;default:return e}};function $p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$p(Object(s),!0).forEach((function(t){zp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function zp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Yp={newIssueViewLockedIn:!1};var Qp=(e=Yp,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":{const s=t.payload.meta&&t.payload.meta.newIssueViewLockedIn;return void 0!==s?qp(qp({},e),{},{newIssueViewLockedIn:s}):e}case"FETCH_ISSUE_SUCCESS":{const{newIssueViewLockedIn:s}=t.payload;return void 0!==s?qp(qp({},e),{},{newIssueViewLockedIn:s}):e}default:return e}};function Jp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Zp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Jp(Object(s),!0).forEach((function(t){Xp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Jp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Xp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const em={hasIssueViewMounted:!1};var tm=(e=em,t)=>{switch(t.type){case"ISSUE_VIEW_MOUNTED":return Zp(Zp({},e),{},{hasIssueViewMounted:!0});default:return t.type,e}};function sm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sm(Object(s),!0).forEach((function(t){am(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function am(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const im={openModal:"NO_MODAL",isSaving:!1,activeWorklogId:null};function rm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function om(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?rm(Object(s),!0).forEach((function(t){cm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function cm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const lm={hasScrolledPermalink:!1};var um=Object(Ce.combineReducers)({loadingStage:(e="LOADING",t)=>{switch(t.type){case"state.FETCH_WORKLOGS_REQUEST_INITIAL":case"state.FETCH_WORKLOGS_RETRY":case"state.ADD_WORKLOG_SUCCESS":case"state.FETCH_SURROUNDING_WORKLOGS_BY_ID":return"LOADING";case"state.FETCH_NEWER_WORKLOGS_REQUEST":return"LOADING_NEWER_WORKLOGS";case"state.FETCH_OLDER_WORKLOGS_REQUEST":return"LOADING_OLDER_WORKLOGS";case"state.FETCH_WORKLOGS_SUCCESS":case"FETCH_ISSUE_SUCCESS":case"state.FETCH_WORKLOGS_BY_ID_SUCCESS":case"state.FETCH_NEWER_WORKLOGS_SUCCESS":case"state.FETCH_OLDER_WORKLOGS_SUCCESS":return"COMPLETE";case"state.FETCH_WORKLOGS_FAILURE":return"LOADING"===e?"ERROR":"ERROR_ADDITIONAL";case"state.FETCH_WORKLOGS_BY_ID_FAILURE":return"ERROR";default:return e}},modal:(e=im,t)=>{switch(t.type){case"state.OPEN_MODAL":return{openModal:t.payload.modalType,isSaving:!1,activeWorklogId:t.payload.worklogId};case"state.UPDATE_TIME_REMAINING_REQUEST":case"state.ADD_WORKLOG_REQUEST":case"state.EDIT_WORKLOG_REQUEST":case"state.DELETE_WORKLOG_REQUEST":return nm(nm({},e),{},{isSaving:!0});case"state.UPDATE_TIME_REMAINING_FAILURE":case"state.ADD_WORKLOG_FAILURE":case"state.EDIT_WORKLOG_FAILURE":case"state.DELETE_WORKLOG_FAILURE":return nm(nm({},e),{},{isSaving:!1});case"state.CLOSE_MODAL":case"state.ADD_WORKLOG_SUCCESS":case"state.UPDATE_TIME_REMAINING_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":case"state.DELETE_WORKLOG_SUCCESS":return{openModal:"NO_MODAL",isSaving:!1,activeWorklogId:null};default:return e}},highlightedWorklogId:(e=null,t)=>{switch(t.type){case"state.ADD_WORKLOG_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":return t.payload.worklogId;case"state.DISPOSE_WORKLOG_APP":return null;case"state.OPEN_MODAL":default:return e}},permalinkStatus:(e=lm,t)=>{switch(t.type){case"SET_WORKLOG_SCROLL_STATUS":return om(om({},e),{},{hasScrolledPermalink:t.payload.status});case"state.ADD_WORKLOG_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":return om(om({},e),{},{hasScrolledPermalink:!1});default:return e}}});function dm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dm(Object(s),!0).forEach((function(t){mm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function mm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bm={agile:void 0,context:void 0,entities:void 0,fields:void 0,mediaContext:{viewContext:null,uploadContext:null,userAuth:null},shareAsComment:void 0,sla:void 0,timing:void 0,ui:void 0,validators:void 0},fm=()=>{const e={};return Object(U.isShortcutMenuEnabled)()&&(e.shortcutDialog=Kp),e.issueType=Tp,e},gm=(e,t)=>Object(Ce.combineReducers)({agile:Al,context:Au,entities:ip,fields:wl,mediaContext:Object(Ce.combineReducers)({uploadContext:ll,userAuth:ul,viewContext:fl}),shareAsComment:Rp,sla:Wp,timing:cl,ui:Object(Ce.combineReducers)(pm({attachments:Object(Ce.combineReducers)({picker:Hl}),activityFeed:Pl,assignIssueParentModal:Ul,comments:mu,changeboarding:Yl,childPanel:eu,clickthroughBanner:iu,cloneModal:ou,contextItems:yu,contextPanel:ku,drafts:Uu,ecosystem:Object(Ce.combineReducers)({glance:Fu}),error:cp,fetchIssueTypesStatus:lp,flags:pp,issueDeletion:vp,loadingStage:kp,recentlyVisitedConfluencePages:Mp,timestampDisplaySetting:Gp,uiConfig:Qp,viewMountStatus:tm,worklog:um,incidentManagement:hp,errorMessage:op},fm())),validators:Ap})(e,t);var hm=(e=bm,t)=>{if("LOAD_NEW_ISSUE"===t.type){const s=gm({ui:{clickthroughBanner:e.ui.clickthroughBanner,changeboarding:e.ui.changeboarding,uiConfig:e.ui.uiConfig}},M(Object(ae.m)(e))),n=gm(s,t),a=Object(Q.y)(e),i=Object(U.isUseAppPermissionsFromTenantContextEnabled)()?[]:Object(Pc.a)(e);return a?gm(n,he(a,i)):n}if("LOAD_RECENT_ISSUE"===t.type){const s=Object(ae.m)(e),{issueState:n}=t.payload;return gm(pm(pm({},n),{},{context:pm(pm(pm({},n.context),s),{},{issueId:n.context.issueId,contentItemCategories:n.context.contentItemCategories,contextItemCategories:n.context.contextItemCategories})}),Object(R.g)())}return gm(e,t)};const ym=()=>e=>t=>{try{e(t)}catch(e){throw _e.i.safeError("issue.middleware.error-logger",`Unhandled error in ${t.type}`),e}},Om=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,h)=>{const y=Object(g.b)(((e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g)=>Object(Pe.combineEpics)(...nl(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g)))(e,t,s,n,a,i,r,o,c,u,l,d,p,m,b,f,h)),O=Object(Pe.createEpicMiddleware)(y);return[ym,O]};var jm=s("./src/packages/issue/issue-view/src/common/service/issue/gira/index.js"),Em=s("./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js"),vm=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js");function km(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?km(Object(s),!0).forEach((function(t){Sm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):km(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Sm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Im=e=>Object(U.isfetchMediaTokensFromGiraEnabled)()?(({resourceManager:e,savePreferences:t,saveIssueTabs:s,saveProjectContext:n,storeFieldsWithContext:a,storeIssueLayoutData:i,attachmentActions:r,permissionActions:o,jiraSettingsActions:c,store:l,issueData:u,baseUrl:d})=>{const p=e.getGiraData(),m=e.getGqlData();if(p&&p.viewIssue&&p.mediaContext&&p.mediaContext.readToken&&m){l.dispatch(Oe(u));const{readToken:e,uploadToken:b,userToken:f}=p.mediaContext;if(e){const t=Object(Em.b)(e);l.dispatch(ot(t))}if(b)if(null!=b.clientId&&null!=b.endpointUrl&&null!=b.targetCollection&&null!=b.token&&null!=b.tokenDurationInMins){const e=Ls({clientId:b.clientId,endpointUrl:b.endpointUrl,targetCollection:b.targetCollection,token:b.token,tokenDurationInMins:b.tokenDurationInMins});l.dispatch(Object(Ms.d)(e))}else null!=b.error&&l.dispatch(Object(Ms.b)(new Error(b.error)));if(f){const e=Object(Em.c)(f);l.dispatch(Object(Us.d)(e))}const g=Object(vm.b)(m,d),h=wm(wm({},Object(jm.c)(p)),g);s(h.issue.tabs);const{project:y}=h;y&&n(Object(xe.q)(y.projectKey),y),a(h.issue.fields),Object(U.isIssueLayoutScalabilitySweetStateEnabled)()&&i({templateKey:pr(h.project),sections:br(h.contentItemsCategories,h.contextItemsCategories)}),t(h.myPreferences),l.dispatch(Object(R.d)(h)),h.attachments&&r.setVisibleAttachments(h.attachments.nodes),h.attachments&&r.setTotalCount(h.attachments.totalCount),h.permissions&&o.setPermissions(h.permissions),Object(U.isJiraSettingsHookEnabled)()&&h.jiraSettings&&c.setJiraSettings(h.jiraSettings)}})(e):(({resourceManager:e,savePreferences:t,saveIssueTabs:s,saveProjectContext:n,storeFieldsWithContext:a,storeIssueLayoutData:i,permissionActions:r,attachmentActions:o,jiraSettingsActions:c,store:l,issueData:u,baseUrl:d})=>{const p=e.getMediaReadPermission(),m=e.getMediaUploadPermission(),b=e.getMediaUser(),f=e.getGiraData(),g=e.getGqlData();if(p&&m&&b&&f&&g){l.dispatch(Oe(u));const e=Object(Hs.a)(p);l.dispatch(ot(e));const h=Ls(m);l.dispatch(Object(Ms.d)(h));const y=Vs(b);l.dispatch(Object(Us.d)(y));const O=Object(vm.b)(g,d),j=wm(wm({},Object(jm.c)(f)),O);s(j.issue.tabs);const{project:E}=j;E&&n(Object(xe.q)(E.projectKey),E),a(j.issue.fields),Object(U.isIssueLayoutScalabilitySweetStateEnabled)()&&i({templateKey:pr(j.project),sections:br(j.contentItemsCategories,j.contextItemsCategories)}),t(j.myPreferences),l.dispatch(Object(R.d)(j)),j.attachments&&o.setVisibleAttachments(j.attachments.nodes),j.attachments&&o.setTotalCount(j.attachments.totalCount),j.permissions&&r.setPermissions(j.permissions),Object(U.isJiraSettingsHookEnabled)()&&j.jiraSettings&&c.setJiraSettings(j.jiraSettings)}})(e);function Cm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Cm(Object(s),!0).forEach((function(t){Pm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Cm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Pm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _m=(e,t)=>{const{baseUrl:s,cloudId:n,licensedProducts:a,locale:i,atlassianAccountId:r,productCrossSellConfig:o,siteAdminStatus:c,isAnonymous:l,appEditions:u,appPermissions:d,licenseStates:p,firstActivationDateMs:m}=t;return{analyticsSource:e.analyticsSource,appEditions:u,appPermissions:d,atlassianAccountId:r,baseUrl:s,backButtonUrl:e.backButtonUrl,boardId:e.boardId,boardType:e.boardType,cloudId:n,estimationStatistic:e.estimationStatistic,firstActivationDateMs:m,isAnonymous:l,isLoadedWithPage:e.isLoadedWithPage,isLoading:!1,isModal:e.isModal,isSpaEnabled:e.isSpaEnabled,issueKey:e.issueKey,licensedProducts:a,licenseStates:p,locale:i,loginRedirectUrl:e.loginRedirectUrl,maxTokenLength:Object(be.a)(),onIssueKeyChange:e.onIssueKeyChange,productCrossSellConfig:o,rapidViewId:e.rapidViewId,rapidViewMap:e.rapidViewMap,siteAdminStatus:c,viewMode:e.viewMode}},xm=e=>({analyticsSource:e.analyticsSource,backButtonUrl:e.backButtonUrl,boardId:e.boardId,boardType:e.boardType,estimationStatistic:e.estimationStatistic,isLoadedWithPage:e.isLoadedWithPage,isLoading:!1,isModal:e.isModal,isSpaEnabled:e.isSpaEnabled,issueKey:e.issueKey,loginRedirectUrl:e.loginRedirectUrl,maxTokenLength:Object(be.a)(),onIssueKeyChange:e.onIssueKeyChange,rapidViewId:e.rapidViewId,rapidViewMap:e.rapidViewMap,viewMode:e.viewMode}),Dm=(e,t,s,n,a,i,r,o,c,l,u,d,m,b,f,g)=>{const h=n.getRecentIssue(e.issueKey),y=h?Tm(Tm({},h),{},{context:Tm(Tm({},h.context),_m(e,t))}):void 0;return(({initialState:e,onChange:t=p.a,onError:s=p.a,dataProvider:n,history:a,issueKey:i=Object(xe.l)(""),fieldsValueActions:r,fieldsConfigActions:o,issueViewLayoutActions:c,attachmentActions:l,recentIssuesActions:u,prefetchedResourceManager:d,userPreferenceActions:m,issueScrollActions:b,permissionActions:f,issueTabsActions:g,jiraSettingsActions:h,projectContextActions:y,issueContextActions:O})=>Object(Ce.createStore)(Object(Te.enableBatching)(hm),e,Object(_e.a)({name:`issue-${i}`})(Object(Ce.applyMiddleware)(...Om(t,s,n,a,r,o,c,l,u,d,m,b,f,g,h,y,O)))))({attachmentActions:l,onChange:e.onChange,onError:e.onError,dataProvider:s,history:e.history||me()(),initialState:y,issueKey:e.issueKey,fieldsValueActions:a,fieldsConfigActions:i,issueViewLayoutActions:r,prefetchedResourceManager:c,recentIssuesActions:n,userPreferenceActions:o,issueScrollActions:u,permissionActions:d,issueTabsActions:m,jiraSettingsActions:b,projectContextActions:f,issueContextActions:g})},Am=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h)=>{const y=a.getRecentIssue(e.issueKey),O=a.getRecentIssuesCount();Object(N.a)({analyticsSource:e.analyticsSource,isLoadedWithPage:e.isLoadedWithPage||!1,isSPA:!e.isInitialRender,isRecentIssue:!!y,recentIssuesCount:O,dataProvider:s,store:n,route:b});const j=Object(U.isStoreFieldsWithBatchActionsEnabled)()?nr:ar;if(n.dispatch(M(_m(e,t))),d.setIssueContext(xm(e)),e.dispatchExternalActionRef&&e.dispatchExternalActionRef(l),y)n.dispatch(Object(R.g)());else{const a=s.getIssue(e.issueKey);if(c&&a&&Im({resourceManager:c,savePreferences:e=>o.setUserPreferences(e),storeFieldsWithContext:t=>j(t,i,r,e.issueKey),storeIssueLayoutData:e=>{f.setIssueViewLayout({templateKey:e.templateKey,sections:e.sections})},saveIssueTabs:e=>m.setIssueTabs(e),saveProjectContext:(e,s)=>{h.setProjectContext(e,s),Object(U.isPolarisInsightsTabEnabled)()&&s&&Ie(t.baseUrl,e).then(t=>h.mergeProjectProperty(e,{isPolarisProject:t}))},permissionActions:p,attachmentActions:u,jiraSettingsActions:g,store:n,issueData:a,baseUrl:t.baseUrl}),(e=>!Object(Q.m)(e.getState()))(n))if(a){var E;n.dispatch(Oe(a)),j(Object(je.a)(a),i,r,e.issueKey,!0),Object(U.isIssueLayoutScalabilitySweetStateEnabled)()&&f.setIssueViewLayout({templateKey:fr(a.layout),sections:hr(a.layout)}),o.setUserPreferences(a.myPreferences);const t=null===(E=a.fields.get("project"))||void 0===E?void 0:E.value;t&&h.setProjectContext(Object(ye.a)(e.issueKey),t)}else n.dispatch(Object(fe.c)(e.issueKey));c&&c.isAllDataReady()&&a?(n.dispatch(Object(R.a)()),c.clearAll()):(Object(N.f)(),n.dispatch(Object(R.c)())),n.dispatch((()=>({type:"FETCH_LOGGED_IN_USER_REQUEST"}))())}y||n.dispatch(Object(ge.b)(e.issueKey))};function Mm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Lm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mm(Object(s),!0).forEach((function(t){Rm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Rm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Nm(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Um=Object(h.a)(()=>"variation"===Object(U.getProductRequirementsDocDiscoveryFlag)(),({children:e})=>o.a.createElement(y.a,null,e),({children:e})=>e),Fm=Object(h.a)(U.isOptInBackToBentoEnabled,k.a,({children:e})=>o.a.createElement(o.a.Fragment,null,e)),Vm=e=>{const{analyticsSource:t,backButtonUrl:s,boardId:n,boardType:a,dispatchExternalActionRef:i,estimationStatistic:c,isLoadedWithPage:l,isModal:u,issueKey:d,isSpaEnabled:h,locationTransformer:y,loginRedirectUrl:k,rapidViewId:K,rapidViewMap:B,viewMode:W,children:H}=e,G=Object(D.l)(),z=Object(_.a)(),[{route:Y}]=Object(m.n)(),[,Q]=(()=>{const[,e]=$(),t=Object(r.useCallback)(t=>e.getRecentIssue(t),[e]),s=Object(r.useCallback)((t,s)=>e.setRecentIssue(t,s),[e]),n=Object(r.useCallback)(()=>e.getRecentIssuesCount(),[e]);return[null,Object(r.useMemo)(()=>({setRecentIssue:s,getRecentIssue:t,getRecentIssuesCount:n}),[t,s,n])]})(),[,Z]=Object(E.b)(),[,X]=Object(v.c)(),[ee]=Object(q.b)(),[,te]=Object(I.a)(),[,se]=Object(O.a)(d),[,ne]=Object(w.a)(),[,ae]=Object(T.a)(),[,ie]=Object(j.c)(),[,re]=Object(U.isIssueLayoutScalabilitySweetStateEnabled)()?Object(C.a)():[void 0,{setIssueViewLayout:p.a}],[,oe]=Object(S.b)(),[,ce]=Object(U.isJiraSettingsHookEnabled)()?Object(x.a)():[void 0,{setJiraSettings:p.a}],[,le]=Object(P.c)(),ue=Object(r.useMemo)(()=>Dm(e,G,z,Q,X,Z,re,te,ee,se,ne,ae,oe,ce,le,ie),[]),pe=Object(r.useCallback)(()=>{const e=ue.getState(),t=Object(V.a)(e),{attributes:s}=t;return Lm(Lm({},Nm(t,["attributes"])),s)},[ue]),me=Object(r.useCallback)(e=>{const t=Object(L.d)(e);ue.dispatch(t)},[ue]);Object(r.useMemo)(()=>{Am(e,G,z,ue,Q,X,Z,te,ee,me,se,ie,ae,oe,Y,re,ce,le)},[]),Object(r.useEffect)(()=>()=>{const e=ue.getState();"COMPLETE"===e.ui.loadingStage&&Q.setRecentIssue(d,e)},[d,Q,ue]);const be=Object(r.useRef)(!0);return Object(r.useEffect)(()=>{be.current||(ue.dispatch(M(_m(e,G))),ie.setIssueContext(xm(e))),be.current=!1},[s,d,k,K,a,n,l,u,B,c,t,W]),Object(r.useEffect)(()=>{if(!be.current){Q.getRecentIssue(e.issueKey)&&ue.dispatch(Object(R.g)())}},[e.issueKey,Q,ue]),Object(r.useEffect)(()=>()=>{ee&&ee.clearAll(),!1!==h&&null!=h||setTimeout(()=>ue.dispatch(g.a)),i&&i(null)},[]),Object(N.g)(),o.a.createElement(Fm,null,o.a.createElement(A.a,{scope:d},o.a.createElement(Um,null,o.a.createElement(b.a,{store:ue,locale:G.locale,addAnalyticsPayload:pe},o.a.createElement(o.a.Fragment,null,o.a.createElement(de,null),o.a.createElement(J,null),o.a.createElement(f.a,null,o.a.createElement(F.b,{store:ue,locationTransformer:y},H)))))))};Vm.displayName="AppProvider";var Km=Vm;t.a=a()(i.a,(()=>e=>{var t,s;return s=t=class extends r.Component{constructor(...e){super(...e),this.MetricsContext=Object(u.b)(this.props.metrics)}render(){const{MetricsContext:t}=this;return(o.a.createElement(t.Provider,{value:Object(u.a)(this.props.metrics)},o.a.createElement(e,this.props)))}},t.displayName=`WithMetricsProvider(${e.displayName||e.name})`,s})(),(function(e){return t=>o.a.createElement(c.a,null,s=>o.a.createElement(e,l({},t,{isInitialRender:s.isInitialRender})))}))(Km)},"./src/packages/issue/issue-view/src/views/issue-details/error/auth-error.svg":function(e,t,s){e.exports=s.p+"assets/auth-error.37d7a62ee1c48c2d5ae201ec8f798f18.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/error/permission-error.svg":function(e,t,s){e.exports=s.p+"assets/permission-error.c932893e3cfcbf2f521d55c8596010e7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error.svg":function(e,t,s){e.exports=s.p+"assets/unknown-error.0ae7398ce07e7e3c1125e09977c8fd48.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/issue-app.js":function(e,t,s){"use strict";s.r(t);const n=e=>{try{window.performance.mark(e)}catch(e){}};n("jira.issue-view.issue-app.eval-start");var a=s("./node_modules/react/index.js"),i=s.n(a),r=s("./node_modules/lodash/noop.js"),o=s.n(r),c=s("./node_modules/@atlaskit/onboarding/dist/esm/components/SpotlightManager.js"),l=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),u=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),p=s("./src/packages/growth/up-flow/persistent-upgrade-banner/src/async.js"),m=s("./src/packages/issue/issue-view/src/common/util/events/index.js"),b=s("./src/packages/issue/issue-view/src/feature-flags.js");const f=[u.a.FULL_ISSUE,u.a.SERVICEDESK_QUEUES_ISSUE,u.a.SERVICEDESK_REPORTS_ISSUE];var g=s("./src/packages/issue/issue-view/src/views/assign-issue-parent-modal/index.js"),h=s("./src/packages/issue/issue-view/src/views/banner/index.js"),y=s("./src/packages/platform/utils/constants/src/application-keys.js"),O=s("./node_modules/react-redux/es/index.js"),j=s("./node_modules/lodash/flow.js"),E=s.n(j),v=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),k=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js");var w=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),S=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),I=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),C=s("./src/packages/issue/issue-view/src/selectors/clickthrough-banner-selector.js"),T=s("./src/packages/issue/issue-view/src/views/changeboarding/banner/index.js"),P=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),x=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js"),D=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js");const A=P.default.div(["margin:","px 0 ","px;"],d.e,2*d.e),M=(x.b,P.default.div(["display:flex;align-items:center;color:",";border-bottom:2px solid ",";margin-bottom:","px;margin-left:","px;padding:","px 0 ","px ","px;"],_.a.N100,_.a.N30,2*d.e,-D.b,2.5*d.e,d.e/2,D.b)),L=P.default.div(["display:flex;align-self:baseline;padding-right:","px;"],d.e),R=P.default.div(["display:flex;flex:2;align-items:flex-start;padding-top:3px;flex-wrap:wrap;"]),N=P.default.div(["display:flex;flex-wrap:wrap;flex:2;margin-bottom:","px;"],2*d.e),U=P.default.div(["margin-right:","px;line-height:20px;min-width:352px;"],d.e),F=P.default.div(["display:inline-block;"]),V=P.default.div(["display:flex;"]),K=P.default.div(["display:flex;flex-shrink:0;align-self:flex-start;margin-right:-10px;margin-left:-12px;margin-top:","px;"],-d.e/2),B=P.default.div(["margin-left:","px;"],2*d.e);var W=s("./node_modules/react-intl/lib/index.es.js"),H=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),G=s("./node_modules/react-resource-router/build/esm/index.js"),$=s("./node_modules/@atlaskit/icon/glyph/cross.js"),q=s.n($),z=s("./node_modules/@atlaskit/icon/glyph/info.js"),Y=s.n(z),Q=s("./node_modules/@atlaskit/onboarding/dist/esm/components/SpotlightTarget.js"),J=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js"),Z=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js"),X=s("./src/packages/issue/issue-view/src/configurations.js"),ee=s("./node_modules/query-string/index.js"),te=s.n(ee);var se=Object(W.defineMessages)({heading:{id:"full-page-issue.banner.heading",defaultMessage:"We're updating the issue view to help you get more done."},learnMore:{id:"full-page-issue.banner.learn-more",defaultMessage:"Learn more"},seeTheOldView:{id:"full-page-issue.banner.see-the-old-view",defaultMessage:"See the old view"},dismissBanner:{id:"full-page-issue.banner.dismiss-banner",defaultMessage:"Dismiss banner"}});class ne extends a.Component{constructor(...e){super(...e),this.getOldViewUrl=Object(H.a)(()=>(()=>{const{search:e,host:t,protocol:s,pathname:n,hash:a}=window.location,i=te.a.parse(e);return i.oldIssueView="true",`${s}//${t}${n}?${te.a.stringify(i)}${a}`})())}renderSpaLinkComponent(){const{applicationKey:e}=this.props,t=this.getOldViewUrl(),s=null!=t&&t.includes("jira/servicedesk");return e===Object(X.j)().applicationKey&&s&&__SPA__?G.a:void 0}renderFeedback(){const{renderFeedback:e,applicationKey:t,isClickthroughBannerHidden:s}=this.props;return e&&null!=t&&e(t,s)}render(){const{issueId:e,learnMoreUrl:t,isClickthroughBannerHidden:s,isIssueViewComplete:n,onClose:a,intl:r,onClickthroughClick:o}=this.props,c=this.getOldViewUrl();return i.a.createElement(M,null,i.a.createElement(L,null,i.a.createElement(Y.a,{primaryColor:_.a.P300,size:"medium",label:"info"})),i.a.createElement(R,null,i.a.createElement(N,null,i.a.createElement(U,null,r.formatMessage(se.heading),"\xa0",i.a.createElement(F,null,i.a.createElement(W.FormattedMessage,{id:"learnMoreOrSeeTheOldView",defaultMessage:"{learnMore} or {seeTheOldView}",values:{learnMore:i.a.createElement(Z.a,{appearance:"link",href:t,spacing:"none",target:"_blank"},r.formatMessage(se.learnMore)),seeTheOldView:i.a.createElement(Z.a,{appearance:"link",component:this.renderSpaLinkComponent(),externalId:"issue.old-full-page",externalValues:{issueId:e},href:c,spacing:"none",onClick:o},r.formatMessage(se.seeTheOldView))}})))),s?null:i.a.createElement(K,null,i.a.createElement(Q.a,{name:"GIVE_FEEDBACK"},i.a.createElement(V,null,this.renderFeedback()))),i.a.createElement(B,null,i.a.createElement(J.a,{content:r.formatMessage(se.dismissBanner)},i.a.createElement(Z.a,{spacing:"compact",isDisabled:!n,iconBefore:i.a.createElement(q.a,{size:"small",label:r.formatMessage(se.dismissBanner)}),onClick:a})))))}}ne.displayName="FullPageIssueBannerView";var ae=Object(W.injectIntl)(ne);function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function re(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class oe extends a.Component{render(){const e=this.props,{shouldShowChangeboardingBanner:t,isClickthroughBannerHidden:s}=e,n=re(e,["shouldShowChangeboardingBanner","isClickthroughBannerHidden"]);return t?i.a.createElement(A,null,i.a.createElement(T.a,null)):s&&Object(b.isPersistentUpgradeBannerEnabled)()?i.a.createElement(p.a,{isBannerEnabled:!0,isFullWidth:!0}):s?null:i.a.createElement(ae,ie({},n,{isClickthroughBannerHidden:s}))}}oe.displayName="BannerView",oe.defaultProps={isClickthroughBannerHidden:!1,isIssueViewComplete:!1};var ce=E()(Object(v.a)("button",{onClose:"clicked",onClickthroughClick:"clicked"}),Object(k.a)({onClose:"fullIssueBannerDismissed",onClickthroughClick:"clickthroughToOldIssue"}),Object(O.b)(e=>({shouldShowChangeboardingBanner:Object(I.d)(e),isClickthroughBannerHidden:Object(C.a)(e),isIssueViewComplete:Object(S.m)(e),issueId:Object(w.A)(e)}),e=>({onClose:()=>e((e=>({type:"CLICKTHROUGH_BANNER_DISMISS",payload:e}))(Date.now()))})))(oe);var le=({issueId:e,oldViewUrl:t,applicationKey:s,isProjectSimplified:n,renderFeedback:a})=>{const r=s===y.a.SERVICE_DESK?"https://confluence.atlassian.com/display/SERVICEDESKCLOUD/Changes+to+requests+in+the+new+issue+view":"https://confluence.atlassian.com/jiracorecloud/the-new-jira-issue-view-938040503.html";switch(s){case y.a.EMPTY_APPLICATION_KEY:case y.a.SIMPLE_SOFTWARE_BOARD:return null;case y.a.SERVICE_DESK:return n?null:i.a.createElement(ce,{issueId:e,oldViewUrl:t,learnMoreUrl:r,renderFeedback:a,applicationKey:s});default:return i.a.createElement(ce,{issueId:e,oldViewUrl:t,learnMoreUrl:r,renderFeedback:a,applicationKey:s})}},ue=s("./src/packages/issue/issue-view/src/views/changeboarding/ui/main.js"),de=s("./src/packages/issue/issue-view/src/views/changeboarding/index.js"),pe=s("./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js"),me=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),be=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),fe=s("./src/packages/platform/utils/types/src/general.js"),ge=s("./src/packages/issue/issue-view/src/feedback-button/index.js");const he={[y.a.SOFTWARE_ISSUE]:{feedbackGroupId:"jira-software-full-issueview",collectorId:"12f21050"},[y.a.CORE_ISSUE]:{feedbackGroupId:"jira-core-full-issueview",collectorId:"f7ac9eb0"},[y.a.SERVICE_DESK]:{feedbackGroupId:"jira-service-desk-full-issueview",collectorId:"3311e016"},[y.a.BITBUCKET_ISSUE]:{feedbackGroupId:"bitbucket-jira-issueview",collectorId:"e7fdb917"}};function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Oe=({applicationKey:e,baseUrl:t,locale:s,isCompact:n=!1})=>{if(null==e||!(e=>Boolean(he[e]))(e))return null;const a=he[e];return(i.a.createElement(Q.a,{name:"GIVE_FEEDBACK"},i.a.createElement(ge.a,ye({},a,{baseUrl:t,locale:s,isCompact:n}))))};Oe.displayName="Feedback";var je=Oe;const Ee=Object(O.b)(e=>({baseUrl:Object(fe.b)(Object(w.g)(e)),locale:Object(w.D)(e),applicationKey:Object(w.e)(e)}),{})(je);const ve=(e,t=!0)=>i.a.createElement(Ee,{isCompact:t});ve.displayName="renderFeedback";var ke=s("./src/packages/platform/controllers/global/document-title/src/index.js"),we=s("./src/packages/issue/issue-context-service/src/main.js"),Se=s("./src/packages/issue/fields/summary/src/services/index.js"),Ie=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const Ce=Object(Ie.o)("summary"),Te=Object(O.b)(e=>({issueKey:Object(w.B)(e),summary:Ce(e)}),{})(({issueKey:e,summary:t,location:s})=>(s===u.a.FULL_ISSUE||s===u.a.SERVICEDESK_QUEUES_ISSUE||s===u.a.SERVICEDESK_REPORTS_ISSUE)&&null!=t&&i.a.createElement(ke.a,{title:`[${e}] ${t}`})),Pe=({location:e})=>{const t=Object(we.d)(),[{value:s}]=Object(Se.a)({issueKey:t});return e!==u.a.FULL_ISSUE&&e!==u.a.SERVICEDESK_QUEUES_ISSUE&&e!==u.a.SERVICEDESK_REPORTS_ISSUE||null===s?null:i.a.createElement(ke.a,{title:`[${t}] ${s}`})};Pe.displayName="ExtractedDocumentTitle";var _e=({location:e})=>{const t=Object(b.isExtractedSummaryFieldEnabled)()?Pe:Te;return(i.a.createElement(t,{location:e}))},xe=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js"),De=s("./src/packages/issue/issue-view/src/views/issue-details/app-provider/index.js"),Ae=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),Me=s("./src/packages/platform/services/providers-project-context/src/index.js"),Le=s("./src/packages/routes/src/ui/spa/servicedesk/practices/resources/index.js"),Re=s("./src/packages/servicedesk/change-management-tour/src/async.js");var Ne=Object(O.b)(e=>({fields:Object(Ie.t)(e),projectId:Object(fe.p)(Object(S.C)(e))}),{})(e=>{const{data:t}=Object(Le.b)(),{baseUrl:s}=Object(Ae.f)();return Object(b.isPageLayoutEnabled)()&&!e.projectId?null:!0===t&&i.a.createElement(Me.a,{baseUrl:s,projectKeyOrId:e.projectId},({data:t})=>t&&!0===t.isProjectAdmin?i.a.createElement(Re.a,e):null)}),Ue=s("./src/packages/platform/ui/error-boundaries/src/ui/js-error-boundary/index.js"),Fe=s("./src/packages/servicedesk/incident-management-tour/src/async.js");var Ve,Ke,Be,We=Object(O.b)(e=>({fields:Object(Ie.t)(e),projectId:Object(fe.p)(Object(S.C)(e))}),{})(e=>{const{data:t}=Object(Le.b)(),{baseUrl:s}=Object(Ae.f)();return Object(b.isPageLayoutEnabled)()&&!e.projectId?null:!0===t&&i.a.createElement(Ue.a,{id:"incidentManagementTourIssues",packageName:"jiraServicedeskIncidentManagementTour",fallback:"flag"},i.a.createElement(Me.a,{baseUrl:s,projectKeyOrId:e.projectId},({data:t})=>t&&!0===t.isProjectAdmin?i.a.createElement(Fe.a,e):null))}),He=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),Ge=s("./src/packages/issue/issue-view/src/views/issue-details/issue-data-provider-refresher.js"),$e=s("./src/packages/issue/issue-view/src/views/issue-details/issue-view.js"),qe=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js"),ze=s("./src/packages/issue/issue-view/src/common/metrics/index.js"),Ye=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/mark-product-start/index.js");const Qe=new Set([u.a.SOFTWARE_ISSUE,u.a.AGILITY_BACKLOG]),Je=[u.a.FULL_ISSUE,u.a.SERVICEDESK_QUEUES_ISSUE,u.a.SERVICEDESK_REPORTS_ISSUE];let Ze=Object(l.b)("issue")((Be=Ke=class extends a.PureComponent{constructor(e){super(e),this.onEscape=e=>{Object(m.c)(e)&&(this.props.onClose(),e.preventDefault())},this.canCloseOnEsc=()=>Qe.has(this.props.analyticsSource),this.getRenderFeedback=()=>{const{analyticsSource:e}=this.props;if(f.includes(e))return ve},this.renderTopBanner=(e,t)=>{const{analyticsSource:s}=this.props;return Object(b.isOptInBackToBentoEnabled)()||!f.includes(s)||t?f.includes(s)&&Object(b.isPersistentUpgradeBannerEnabled)()?i.a.createElement(p.a,{isBannerEnabled:!0,isFullWidth:!0}):null:le({applicationKey:e,renderFeedback:this.getRenderFeedback()})},this.renderIssueView=()=>{const e=this.getIssueViewProps();return(i.a.createElement($e.default,e))},this.renderChangeManagementTour=()=>i.a.createElement(Ne,{currentIssueKey:this.props.issueKey}),this.renderChangeboardingTour=()=>{const e=Je.includes(this.props.analyticsSource)?i.a.createElement(ue.a,null):null;return Object(b.isOptInBackToBentoEnabled)()?e:i.a.createElement(de.a,{isFeedbackEnabled:void 0!==this.getRenderFeedback()})},this.renderIncidentManagementTour=()=>i.a.createElement(We,{currentIssueKey:this.props.issueKey}),this.isMobile=()=>this.props.analyticsSource===u.a.MOBILE_ISSUE,this.isFullPage=e=>e===u.a.FULL_ISSUE,this.getIssueViewProps=()=>({renderFeedback:this.getRenderFeedback(),issueDeleteCallbacks:{onIssueDeleteSuccess:this.props.onIssueDeleteSuccess,onIssueDeleteFailure:this.props.onIssueDeleteFailure},viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowCloseButton:this.props.shouldShowCloseButton,issueMaxWidth:this.props.issueMaxWidth});const{analyticsSource:t}=e;(Object(b.isFullPageBentoBM3Enabled)()||Object(b.isEmbeddedPageBentoBM3Enabled)())&&Object(ze.h)(this.isFullPage(t))}componentDidMount(){this.canCloseOnEsc()&&document.addEventListener("keydown",this.onEscape)}UNSAFE_componentWillReceiveProps(e){if((Object(b.isFullPageBentoBM3Enabled)()||Object(b.isEmbeddedPageBentoBM3Enabled)())&&e.issueKey!==this.props.issueKey){const{analyticsSource:e}=this.props;Object(ze.h)(this.isFullPage(e))}}componentWillUnmount(){this.canCloseOnEsc()&&document.removeEventListener("keydown",this.onEscape)}renderHeader(){const{onClose:e,shouldShowCloseButton:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n,onIssueDeleteSuccess:a,onIssueDeleteFailure:r,viewModeOptions:o}=this.props;if(!this.isMobile())return null;const c=Object(b.isRemoveDataProviderRefresh)()?i.a.createElement(xe.a,{shouldShowCloseButton:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n,issueDeleteCallbacks:{onIssueDeleteSuccess:a,onIssueDeleteFailure:r},onClose:e,renderFeedback:this.getRenderFeedback(),viewModeOptions:o}):i.a.createElement(Ge.a,{onClose:e,refreshOnUnmount:!0},i.a.createElement(xe.a,{shouldShowCloseButton:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n,issueDeleteCallbacks:{onIssueDeleteSuccess:a,onIssueDeleteFailure:r},onClose:e,renderFeedback:this.getRenderFeedback(),viewModeOptions:o}));return(i.a.createElement(qe.a,{elementId:"jira-issue-header",customStyles:`padding-left: ${3*d.e}px; padding-right: ${3*d.e}px;`},c))}render(){const{innerBanner:e,analyticsSource:t,backButtonUrl:s,dispatchExternalActionRef:n,ecosystemEnabled:r,estimationStatistic:o,history:l,isCompact:u,isLoadedWithPage:d,isSpaEnabled:p,issueActions:m,issueKey:f,locationTransformer:y,loginRedirectUrl:O,metrics:j,onChange:E,onError:v,onIssueKeyChange:k,rapidViewId:w,rapidViewMap:S,viewModeOptions:I,issueMaxWidth:C}=this.props,T={analyticsSource:t,backButtonUrl:s,dispatchExternalActionRef:n,ecosystemEnabled:r,estimationStatistic:o,history:l,isLoadedWithPage:d,isSpaEnabled:p,issueActions:m,issueKey:f,locationTransformer:y,loginRedirectUrl:O,metrics:j,onChange:E,onError:v,onIssueKeyChange:k,rapidViewId:w,rapidViewMap:S,viewMode:I&&I.viewMode},P=this.isMobile()?a.Fragment:He.a,_=this.isMobile()?a.Fragment:He.b,x=Object(b.isSidebarComponentsEnabled)()?a.Fragment:c.c;return i.a.createElement(i.a.Fragment,null,"full-issue"===t&&i.a.createElement(Ye.a,null),i.a.createElement(De.a,T,i.a.createElement(_e,{location:t}),!Object(b.isRemoveDataProviderRefresh)()&&i.a.createElement(Ge.a,{refreshOnUnmount:!0,onClose:this.props.onClose}),i.a.createElement(pe.b,{defaultIsCompact:u},i.a.createElement(x,null,i.a.createElement(me.a,null,i.a.createElement(be.a,null,i.a.createElement(P,{issueMaxWidth:C},i.a.createElement(_,null,this.renderChangeboardingTour(),i.a.createElement(h.a,{renderTopBanner:this.renderTopBanner}),this.renderHeader(),i.a.createElement("div",null,e))),i.a.createElement(g.a,null),this.renderIssueView(),this.renderChangeManagementTour(),this.renderIncidentManagementTour()))))))}},Ke.defaultProps={isCompact:!1,isLoadedWithPage:!1,isSpaEnabled:!1,shouldShowRootProjectsBreadcrumb:!1,viewModeOptions:{viewModeSwitchEnabled:!1},onClose:o.a,onIssueDeleteSuccess:o.a,onIssueDeleteFailure:o.a},Ve=Be))||Ve;t.default=Ze;(()=>{n("jira.issue-view.issue-app.eval-end")})()},"./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const a=4*s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js").e,i=e=>`calc((100% - ${e}px) / 2)`,r=(e,t)=>`\n        ${e}: ${i(t)}; /* for browsers which do not support max(); negative padding is ignored by browsers */\n        ${e}: max(${i(t)}, 0px); /* for browsers which support max() */\n        \n        .msie-11 & { /* IE11 is the only browser which does not ignore negative padding */\n            ${e}: 0;\n        }\n    `,o=n.default.div(["flex-shrink:0;",""],({issueMaxWidth:e})=>void 0!==e?`\n        ${r("padding-left",e)}\n        ${r("padding-right",e)}    \n        `:""),c=n.default.div(["padding:0 ","px;"],a)},"./src/packages/issue/issue-view/src/views/issue-details/issue-data-provider-refresher.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s("./node_modules/react-redux/es/index.js"),i=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),o=s("./src/packages/issue/issue-view/src/actions/issue-preview-actions.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");class u extends n.Component{constructor(...e){super(...e),this.onCloseHandler=()=>{this.props.refreshIssueData(this.props.currentIssueKey,this.props.fieldData),this.props.onClose()}}componentWillUnmount(){this.props.refreshOnUnmount&&this.props.refreshIssueData(this.props.currentIssueKey,this.props.fieldData)}render(){const{children:e}=this.props,t=e?n.Children.count(e):0;if(t<=0)return null;1!==t&&r.i.safeError("data.provider.issue.refreshed",`Refresher expects 1 child but ${t} specified`,new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue"}));const s=n.Children.map(e,e=>Object(n.cloneElement)(e,{onClose:this.onCloseHandler}));return n.Children.only(s[0])}}u.displayName="ReadOnlyDataIssueRefresher",u.defaultProps={refreshOnUnmount:!1},t.a=Object(a.b)(e=>({currentIssueKey:Object(c.B)(e),fieldData:Object(l.s)(e)}),e=>({refreshIssueData:(t,s)=>e(Object(o.b)(t,s))}))(u)},"./src/packages/issue/issue-view/src/views/issue-details/issue-layout/styled.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return d})),s.d(t,"d",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"g",(function(){return b})),s.d(t,"i",(function(){return f})),s.d(t,"h",(function(){return g})),s.d(t,"b",(function(){return h})),s.d(t,"j",(function(){return y})),s.d(t,"f",(function(){return O})),s.d(t,"e",(function(){return j}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),i=s("./src/packages/issue/issue-view/src/feature-flags.js"),r=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js"),o=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),c=s("./src/packages/issue/issue-view/src/views/issue-details/issue-layout/utils.js");const l=2*a.e,u=1.5*a.e,d=n.default.div(["padding:0 ","px ","px;"," ",""],()=>Object(i.isSideBySideLabelsAndFieldsEnabled)()?4*a.e:l,r.c,({issueMaxWidth:e})=>void 0!==e?`padding-top: ${r.b}px;`:"",({isLeftmost:e,isRightmost:t})=>e?`\n                padding-left: ${o.d}px;\n                `:t?`\n                padding-left: ${Object(i.isSideBySideLabelsAndFieldsEnabled)()?3*a.e:l+a.e}px\n                padding-right: ${o.d-1.5*a.e}px;\n                `:""),p=n.default.div(["flex-grow:1;",";",""],({scrollHidden:e})=>e?Object(n.css)(["overflow:hidden;","{border-right:","px solid transparent;}"],d,15):"\n        overflow-x: hidden; /* 2 value shorthand syntax is not supported in IE11 */\n        overflow-y: auto;\n   ",({medium:e,isLeftmost:t,isRightmost:s,issueMaxWidth:n})=>{const a=e/(Object(i.isSideBySideLabelsAndFieldsEnabled)()?10:12),r=s?u:t?-u:0,l=void 0!==n;return`\n            width: ${`${(100*a).toFixed(3)}%`};\n            width: ${Object(i.isSideBySideLabelsAndFieldsEnabled)()?`calc(${a} * min(${Object(c.a)()}px, 100%) + ${r}px)`:`calc(${a.toFixed(5)} * min(${Object(c.a)()}px, 100%) + ${r}px)`};\n            ${t&&l?Object(o.c)("padding-left",n):""}\n            ${s&&l?Object(o.c)("padding-right",n):""}\n        `}),m=n.default.div(["margin-top:","px;"],3*a.e),b=n.default.div(["position:relative;height:100%;display:flex;flex-direction:column;"]),f=n.default.div(["display:flex;flex:1 1 auto;min-width:0;width:100%;"]),g=n.default.div(["display:flex;flex:1 1 auto;> div{display:flex;flex:1 1 auto;}"]),h=n.default.div(["display:flex;flex-wrap:wrap;flex-direction:row;align-items:flex-start;justify-content:space-between;align-content:stretch;margin-left:","px;margin-bottom:","px;padding-left:","px;"],-a.e,3*a.e,1.25*a.e),y=n.default.div(["visibility:",";"],e=>e.show?"visible":"hidden"),O=n.default.div(["height:100%;",";"],({scrollHidden:e})=>e?Object(n.css)(["overflow:hidden;border-right:","px solid transparent;"],15):"\n        overflow: auto;\n   "),j=n.default.div(["",""],({issueMaxWidth:e})=>void 0===e?`padding: 0 ${2.5*a.e}px;`:`padding: ${r.b}px ${4*a.e}px ${r.c}px;`)},"./src/packages/issue/issue-view/src/views/issue-details/issue-layout/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/issue/issue-view/src/feature-flags.js");const a=()=>Object(n.isSideBySideLabelsAndFieldsEnabled)()?1400:1280},"./src/packages/issue/issue-view/src/views/issue-details/issue-view.js":function(e,t,s){"use strict";s.r(t),s.d(t,"Issue",(function(){return Dq}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/lodash/noop.js"),o=s.n(r),c=s("./node_modules/query-string/index.js"),l=s.n(c),u=s("./node_modules/@atlaskit/page/dist/esm/GridColumn.js"),d=s("./node_modules/@atlaskit/smart-card/dist/esm/index.js"),p=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),m=s("./src/packages/platform/observability/analytics-web-react/src/components/view-tracker.js"),b=s("./node_modules/@atlaskit/analytics-next/dist/esm/withAnalyticsEvents.js"),f=s("./src/packages/platform/observability/analytics-web-react/src/utils/fire-track-event.js"),g=s("./src/packages/platform/observability/analytics-web-react/src/components/redux-analytics-data.js"),h=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/jira-bridge.js"),y=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),O=s("./src/packages/shortcuts-dialog/src/main.js");var j=s("./node_modules/react-intl/lib/index.es.js"),E=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),v=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),k=s("./node_modules/react-sweet-state/lib/esm/index.js"),w=s("./src/packages/issue/worklog/src/services/store/index.js");const S=Object(k.c)(w.b,{selector:e=>e.isRollingUp});var I=s("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),C=s("./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js"),T=s("./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js"),P=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),_=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),x=s("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),D=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),A=s("./src/packages/issue/issue-view/src/selectors/status-selector.js"),M=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),L=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),R=s("./src/packages/platform/ui/error-boundary/src/main.js"),N=s("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),U=s("./node_modules/lodash/isFinite.js"),F=s.n(U),V=s("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js"),K=e=>{const t=Object(V.a)(1,1)(e);return null!==t&&F()(t)},B=e=>""===e.trim()||K(e),W=s("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js");const H=e=>e.length>0&&!Number.isNaN(Number(e));var G=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),$=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),q=s("./node_modules/@atlaskit/button/dist/esm/components/Button.js"),z=s("./node_modules/@atlaskit/spinner/dist/esm/spinner.js"),Y=Object(j.defineMessages)({save:{id:"issue.log-time.modal.log-time-action.save",defaultMessage:"Save"},cancel:{id:"issue.log-time.modal.log-time-action.cancel",defaultMessage:"Cancel"}}),Q=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),J=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const Z=Q.default.div(["display:inline-flex;justify-content:flex-end;align-items:center;width:100%;>:not(:first-child){margin-left:","px;}"],J.e/2),X=Q.default.div(["> *{display:flex;}margin-right:","px;"],J.e),ee=()=>a.a.createElement(X,null,a.a.createElement(z.a,{size:"small"}));ee.displayName="renderSpinner";const te=e=>{const{formState:t,onConfirm:s,onCancel:n,intl:i}=e;return(a.a.createElement(Z,null,"submitting"===t?ee():null,a.a.createElement(q.a,{appearance:"primary",onClick:s,isDisabled:"invalid"===t||"submitting"===t},i.formatMessage(Y.save)),a.a.createElement(q.a,{appearance:"subtle",onClick:n,isDisabled:"submitting"===t},i.formatMessage(Y.cancel))))};te.displayName="LogTimeModalFooter";var se=te,ne=Object(j.injectIntl)(se),ae=s("./node_modules/@atlaskit/field-base/components/Label.js"),ie=s("./node_modules/moment-timezone/index.js"),re=s.n(ie);function oe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ce(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(s),!0).forEach((function(t){le(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):oe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function le(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ue=(e,t,s,n)=>{const a=re.a.tz(e,n);return a.isValid()&&e?{dateValue:a.format("YYYY-MM-DD"),timeValue:a.format("HH:mm"),zoneValue:a.format("ZZ")}:{dateValue:t,timeValue:s,zoneValue:re()().tz(n).format("ZZ")}};var de=s("./node_modules/lodash/isNaN.js"),pe=s.n(de),me=s("./node_modules/@atlaskit/datetime-picker/dist/esm/components/DateTimePicker.js"),be=s("./src/packages/platform/utils/constants/src/datetimepicker-available-times.js"),fe=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/date-messages.js"),ge=s("./src/packages/compatibility/src/main.js");class he extends n.Component{constructor(...e){super(...e),this.onChange=e=>{const t=Object(ge.a)(e);this.props.onChange(pe()(Date.parse(t))?null:t)},this.parseValue=(e,t,s)=>this.props.parseValue(e,t,s,this.props.timeZone)}render(){const{autoFocus:e,isDisabled:t,value:s,timeZone:n,intl:{formatMessage:i}}=this.props;return(a.a.createElement(me.a,{autoFocus:e,isDisabled:t,value:s||"",onChange:this.onChange,timeIsEditable:!0,parseValue:n?this.parseValue:void 0,datePickerSelectProps:{placeholder:i(fe.a.placeholderDate)},timePickerSelectProps:{formatCreateLabel:e=>e,filterOption:(e,t)=>!t||e.value===t||e.label===t},times:be.a}))}}he.displayName="DateTimeFieldView",he.defaultProps={isDisabled:!1,value:void 0,autoFocus:!1};var ye=Object(j.injectIntl)(he),Oe=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),je=s("./src/packages/issue/issue-view/src/common/component/editor/async.js"),Ee=Object(j.defineMessages)({label:{id:"issue.log-time.modal.work-description.label",defaultMessage:"Work description"}});const ve=Object(Oe.f)(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/common/component/editor/index.js")),{moduleId:"./src/packages/issue/issue-view/src/common/component/editor/index.js"});class ke extends n.Component{render(){const e=a.a.createElement(je.b,{mediaContext:this.props.mediaContext,defaultValue:this.props.defaultValue});return(a.a.createElement(a.a.Fragment,null,a.a.createElement(ae.a,{label:this.props.intl.formatMessage(Ee.label)}),a.a.createElement(je.a,{packageName:"issue",fallback:e},a.a.createElement(ve,{isExpanded:!0,externalId:this.props.externalId,baseUrl:this.props.baseUrl,isDisabled:this.props.isDisabled,defaultValue:this.props.defaultValue,portalElement:this.props.portalElement,onChange:this.props.onChange,onChangeFailure:this.props.onChangeFailure,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider}))))}}ke.displayName="WorkDescription",ke.defaultProps={portalElement:void 0};var we=Object(j.injectIntl)(ke);const Se=Q.default.div(["align-items:center;display:flex;flex-direction:row;>:not(:first-child){margin-left:","px;}"],J.e),Ie=Q.default.div(["width:50%;"]),Ce=Q.default.div(["width:100%;"]);var Te=s("./src/packages/issue/issue-view/src/common/messages/time.js");class Pe extends n.Component{constructor(...e){super(...e),this.state={shouldAppearInvalid:!this.props.isValid},this.onBlur=()=>{this.setState({shouldAppearInvalid:!this.props.isValid})}}UNSAFE_componentWillReceiveProps(e){!this.props.isValid&&e.isValid&&this.setState({shouldAppearInvalid:!1})}render(){return a.a.createElement("div",{onBlur:this.onBlur},this.props.children(this.state.shouldAppearInvalid))}}Pe.displayName="WithValidationOnBlur";var _e=s("./node_modules/@atlaskit/field-text/FieldTextStateless.js");class xe extends n.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e.target.value)}}render(){return a.a.createElement(_e.a,{value:this.props.value,label:this.props.label,placeholder:this.props.placeholder,isInvalid:this.props.isInvalid,invalidMessage:this.props.isInvalid?this.props.invalidMessage:void 0,disabled:this.props.isDisabled,required:this.props.isRequired,autoFocus:this.props.autoFocus,onChange:this.onChange,onBlur:this.props.onBlur,shouldFitContainer:!0})}}xe.displayName="TimeLogTextField",xe.defaultProps={isInvalid:!1,isRequired:!1,isDisabled:!1,autoFocus:!1,placeholder:void 0,invalidMessage:void 0,onBlur:o.a};var De=Object(j.defineMessages)({timeRemaining:{id:"issue.log-time.modal.time-remaining",defaultMessage:"Time remaining"},timeSpent:{id:"issue.log-time.modal.time-spent",defaultMessage:"Time spent"}}),Ae=s("./node_modules/@atlaskit/tooltip/dist/esm/Tooltip.js");const Me=Q.default.div(["padding:","px ","px;"],J.e-2,J.e-6),Le=Q.default.div(["list-style:inside;margin-top:","px;padding-left:","px;padding-bottom:","px;"],J.e,J.e/2,J.e/2);class Re extends n.Component{tooltipContentRender(){const{intl:e}=this.props;return(a.a.createElement(Me,null,a.a.createElement("p",null,e.formatMessage(Te.a.exampleFormat,{formatExample:"2w 4d 6h 45m"})),a.a.createElement(Le,null,a.a.createElement("li",null,e.formatMessage(Te.a.weeks,{w:"w"})),a.a.createElement("li",null,e.formatMessage(Te.a.days,{d:"d"})),a.a.createElement("li",null,e.formatMessage(Te.a.hours,{h:"h"})),a.a.createElement("li",null,e.formatMessage(Te.a.minutes,{m:"m"})))))}render(){const{children:e,shouldRenderContent:t}=this.props;return(a.a.createElement(Ae.a,{content:t?this.tooltipContentRender():null},e))}}Re.displayName="TimeTrackingTooltip";var Ne=Re;const Ue=e=>{const{isValid:t,value:s,onChange:n,onBlur:i,isDisabled:r,intl:o}=e;return(a.a.createElement(Pe,{isValid:t},e=>a.a.createElement(Ne,{shouldRenderContent:t&&!r,intl:o},a.a.createElement(xe,{value:s,isInvalid:e,invalidMessage:Te.b,onChange:n,onBlur:i,isDisabled:r,label:o.formatMessage(De.timeSpent),placeholder:"2w 4d 6h 45m",autoFocus:!0}))))};Ue.displayName="ValidatedLogTimeInput";var Fe=Ue,Ve=({isValid:e,value:t,onChange:s,onBlur:n,isDisabled:i,intl:r})=>a.a.createElement(Pe,{isValid:e},o=>a.a.createElement(Re,{shouldRenderContent:e&&!i,intl:r},a.a.createElement(xe,{value:t,isInvalid:o,invalidMessage:Te.b,onChange:s,onBlur:n,isDisabled:i,label:r.formatMessage(De.timeRemaining),placeholder:"2w 4d 6h 45m"})));class Ke extends n.Component{constructor(...e){super(...e),this.onDateStartedChange=e=>{this.props.onDateStartedChange(e)}}render(){const{value:{timeLogged:e,timeRemaining:t,dateStarted:s,workDescription:n}}=this.props;return(a.a.createElement(a.a.Fragment,null,a.a.createElement(Se,null,a.a.createElement(Ie,null,a.a.createElement(Fe,{value:e,isDisabled:this.props.isDisabled,isValid:this.props.isTimeLoggedValid,onChange:this.props.onTimeLoggedChange,onBlur:this.props.onTimeLoggedBlur,intl:this.props.intl})," "),a.a.createElement(Ie,null,a.a.createElement(Ve,{value:t,isDisabled:this.props.isDisabled,isValid:this.props.isTimeRemainingValid,onChange:this.props.onTimeRemainingChange,onBlur:this.props.onTimeRemainingBlur,intl:this.props.intl}))),!this.props.isCollapsed&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Ce,null,a.a.createElement(j.FormattedMessage,{id:"issue.log-time.modal.date-started",defaultMessage:"Date started"},e=>a.a.createElement(ae.a,{label:String(e),isRequired:!0})),a.a.createElement(ye,{value:s||null,timeZone:this.props.timeZone,parseValue:ue,onChange:this.onDateStartedChange,isDisabled:this.props.isDisabled})),a.a.createElement(we,{defaultValue:n,isDisabled:this.props.isDisabled,portalElement:this.props.portalElement,onChange:this.props.onWorkDescriptionChange,onChangeFailure:this.props.onWorkDescriptionChangeFailure,externalId:this.props.externalId,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider}))))}}Ke.displayName="LogTimeModalForm",Ke.defaultProps={portalElement:void 0};var Be=Object(j.injectIntl)(Ke),We=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/checkbox/dist/esm/Checkbox.js")),He=s("./node_modules/@atlaskit/lozenge/dist/esm/Lozenge/index.js"),Ge=s("./src/packages/platform/controllers/intl/src/index.js"),$e=s("./node_modules/@atlaskit/badge/dist/esm/components/index.js");const qe=({value:e})=>a.a.createElement($e.a,null,e);qe.displayName="OriginalEstimateView";var ze=qe,Ye=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),Qe=s("./src/packages/issue/issue-view/src/feature-flags.js"),Je=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),Ze=Object(j.defineMessages)({underOriginalEstimate:{id:"issue.log-time.under-original-estimated-time-tooltip",defaultMessage:"{time} under original estimate"},overOriginalEstimate:{id:"issue.log-time.over-original-estimated-time-tooltip",defaultMessage:"{time} over original estimate"}});const Xe=Q.default.div(["padding:","px;background-color:transparent;border-radius:3px;",";&:hover{background-color:",";}"],J.e/2,e=>e.hasPointerCursor?"cursor: pointer;":"",Je.a.N60),et=Q.default.div(["background-color:",";border-radius:","px;display:flex;height:","px;overflow:hidden;width:100%;",";"],Je.a.N40,J.e/2,e=>e.isCompact?J.e/2:J.e,e=>e.hasPointerCursor?"cursor: pointer;":"");class tt extends n.Component{renderProgressBar(){return Object(Qe.isRollupSubtaskPhase2Enabled)()&&this.props.shouldHighlightOnHover?a.a.createElement(Xe,{hasPointerCursor:!!this.props.tooltip},a.a.createElement(et,{isCompact:this.props.isCompact,hasPointerCursor:!!this.props.tooltip},this.props.children)):a.a.createElement(et,{isCompact:this.props.isCompact,hasPointerCursor:!!this.props.tooltip},this.props.children)}render(){return this.props.tooltip?a.a.createElement(Ae.a,{content:this.props.tooltip},this.renderProgressBar()):this.renderProgressBar()}}tt.displayName="ProgressBar",tt.defaultProps={isCompact:!0,shouldHighlightOnHover:!1,children:null,tooltip:null};const st=Q.default.div(["background-color:",";flex-shrink:0;width:",";transition:width 0.3s ease;&:first-child{border-top-left-radius:","px;border-bottom-left-radius:","px;}&:last-child{border-top-right-radius:","px;border-bottom-right-radius:","px;}"],e=>e.color,e=>e.width,J.e/2,J.e/2,J.e/2,J.e/2);class nt extends n.Component{render(){const{color:e,proportion:t}=this.props,s=t>0?`${100*t}%`:"0";return a.a.createElement(st,{color:e,width:s})}}nt.displayName="ProgressBarSegment",nt.defaultProps={color:Je.a.B400,proportion:0};const at=(e,t)=>{const{loggedTime:s,remainingTime:n}=e;return s&&void 0!==t?s+(n||0)-t:0};class it extends n.Component{constructor(...e){super(...e),this.secondsToTimeString=e=>{const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(W.a)(t,s)(e)}}getTooltip(){const{value:e,estimatedTime:t}=this.props,s=at(e,t);return 0===s?null:s>0?this.props.intl.formatMessage(Ze.overOriginalEstimate,{time:this.secondsToTimeString(s)}):this.props.intl.formatMessage(Ze.underOriginalEstimate,{time:this.secondsToTimeString(-s)})}render(){const{value:e,estimatedTime:t,shouldHighlightOnHover:s}=this.props,{loggedTime:n=0}=e,i=((e,t=0)=>{const{loggedTime:s=0,remainingTime:n=0}=e;return Math.max(t,s+n)})(e,t),r=Math.max(at(e,t),0),o=i?(n-r)/i:0,c=i?r/i:0;return a.a.createElement(tt,{tooltip:this.getTooltip(),isCompact:this.props.isCompact,shouldHighlightOnHover:s},a.a.createElement(nt,{color:this.props.isDone?Je.a.G300:Je.a.B400,proportion:o}),a.a.createElement(nt,{color:Je.a.Y300,proportion:c}))}}it.displayName="ProgressTracker",it.defaultProps={isCompact:!0,isDone:!1,shouldHighlightOnHover:!1,value:{loggedTime:0}};var rt=Object(j.injectIntl)(it);const ot=Q.default.div(["width:100%;display:flex;"]),ct=Q.default.div(["flex-grow:1;margin-top:",";"],()=>Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?`${J.e/4}px;`:`${J.e/2}px;`),lt=Q.default.small(["color:",";display:flex;justify-content:space-between;margin-top:0;font-size:","px;flex-wrap:wrap;"],Je.a.N500,J.d),ut=Q.default.span(["margin-right:","px;"],J.e/2),dt=Q.default.span(["cursor:pointer;"]),pt=Q.default.span(["font-weight:normal;"]);class mt extends n.Component{constructor(...e){super(...e),this.getTimeRemainingText=()=>{if(!this.props.value.remainingTime)return null;const e=this.secondsToTimeString(this.props.value.remainingTime);return(a.a.createElement(dt,null,a.a.createElement(j.FormattedMessage,{id:"issue.log-time.remaining-time",defaultMessage:"{time} remaining",values:{time:a.a.createElement(pt,null,e)}})))},this.secondsToTimeString=e=>{const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(W.a)(t,s)(e)}}getTimeLoggedText(){if(this.props.value&&this.props.value.loggedTime){const e=this.secondsToTimeString(this.props.value.loggedTime);return(a.a.createElement(j.FormattedMessage,{id:"issue.log-time.time-logged",defaultMessage:"{time} logged",values:{time:a.a.createElement(pt,{"data-testid":"issue.issue-view.common.logged-time.value"},e)}}))}return(a.a.createElement(j.FormattedMessage,{id:"issue.log-time.no-time-logged",defaultMessage:"No time logged"}))}render(){const{config:e,isDone:t,isCompact:s,value:n,estimatedTime:i}=this.props;return(a.a.createElement(ot,null,a.a.createElement(ct,null,a.a.createElement(rt,{value:n,estimatedTime:i,config:e,isDone:t,isCompact:s}),a.a.createElement(lt,null,a.a.createElement(ut,null,this.getTimeLoggedText()),this.getTimeRemainingText()))))}}mt.displayName="LoggedTime",mt.defaultProps={isCompact:!0,isDone:!1};var bt=Object(j.defineMessages)({includeSubtasksLabel:{id:"issue.log-time-modal.include-subtasks",defaultMessage:"Include subtasks"},includeChildIssueLabel:{id:"issue.log-time-modal.include-child-issues",defaultMessage:"Include child issues"}});const ft=Q.default.p(["margin-top:","px;"],2*J.e),gt=Q.default.div(["margin-left:-","px;padding-top:","px;& > label > span{color:",";}"],J.e/2,J.e,Je.a.N500);var ht=e=>{const{config:t,value:s,isDone:i,estimatedTime:r,shouldDisplayRollUpDataControl:o,isRollingUpData:c,onToggleRollingUpData:l,isClassicProject:u}=e,{formatMessage:d}=Object(Ge.c)(),p=Object(n.useCallback)(e=>{const{daysPerWeek:s,hoursPerDay:n}=t,i=u?()=>a.a.createElement(j.FormattedMessage,{id:"issue.log-time.modal.original-estimate.with-rollup-subtasks",defaultMessage:"The original estimate for this issue and subtasks was {time}.",values:{time:Object(Qe.isTimeRemainingFieldEnabled)()?a.a.createElement(ze,{value:Object(W.a)(s,n)(e)}):a.a.createElement(He.a,null,Object(W.a)(s,n)(e))}}):()=>a.a.createElement(j.FormattedMessage,{id:"issue.log-time.modal.original-estimate.with-rollup-child-issues",defaultMessage:"The original estimate for this issue and child issues was {time}.",values:{time:Object(Qe.isTimeRemainingFieldEnabled)()?a.a.createElement(ze,{value:Object(W.a)(s,n)(e)}):a.a.createElement(He.a,null,Object(W.a)(s,n)(e))}});return(a.a.createElement(ft,null,c&&o?a.a.createElement(i,null):a.a.createElement(j.FormattedMessage,{id:"issue.log-time.modal.original-estimate",defaultMessage:"The original estimate for this issue was {time}.",values:{time:Object(Qe.isTimeRemainingFieldEnabled)()?a.a.createElement(ze,{value:Object(W.a)(s,n)(e)}):a.a.createElement(He.a,null,Object(W.a)(s,n)(e))}})))},[t,u,c,o]),m=Object(n.useCallback)(()=>a.a.createElement(gt,null,a.a.createElement(We.a,{isChecked:c,onChange:({target:{checked:e}},t)=>{l(e,t)},label:d(u?bt.includeSubtasksLabel:bt.includeChildIssueLabel),name:"roll-up-time-tracking-toggle-from-dialog"}),Qe.isOperationalEventEnabled?a.a.createElement(Ye.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"toggleRollUpDataControlFromWorklogDialog"}):a.a.createElement(Ye.c,{action:"exposed",actionSubject:"feature",actionSubjectId:"toggleRollUpDataControlFromWorklogDialog"})),[d,u,c,l]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(mt,{config:t,value:s,estimatedTime:r,isDone:i,isCompact:!1}),o&&m(),"number"==typeof r?p(r):null)};class yt extends n.Component{constructor(...e){super(...e),this.state={containerRef:void 0},this.setContainerRef=e=>{this.state.containerRef||this.setState({containerRef:e})},this.renderHeader=()=>a.a.createElement("h3",null,this.props.header),this.renderFooter=()=>a.a.createElement(ne,{formState:this.props.formState,onConfirm:this.props.onSubmit,onCancel:this.props.onCancel})}secondsToTimeString(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(W.a)(t,s)(e)}timeStringToSeconds(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(V.a)(t,s)(e)}renderProgressTracker(){const{progressTrackerValue:e,progressTrackerValue:{loggedTime:t,remainingTime:s},estimatedTime:n,rolledUpEstimatedTime:i,config:r,isDone:o,shouldDisplayRollUpDataControl:c,isRollingUpData:l,onToggleRollingUpData:u,isClassicProject:d}=this.props;return void 0===t&&void 0===s&&void 0===n&&!1===c?null:a.a.createElement(ht,{config:r,value:e,estimatedTime:l?i:n,isDone:o,shouldDisplayRollUpDataControl:c,isRollingUpData:l,onToggleRollingUpData:u,isClassicProject:d})}renderForm(){return a.a.createElement(Be,{value:this.props.value,isCollapsed:this.props.isCollapsed,isDisabled:"submitting"===this.props.formState,isTimeLoggedValid:this.props.isTimeLoggedValid,onTimeLoggedBlur:this.props.onTimeLoggedBlur,isTimeRemainingValid:this.props.isTimeRemainingValid,onTimeRemainingBlur:this.props.onTimeRemainingBlur,timeZone:this.props.timeZone,portalElement:this.state.containerRef,onTimeLoggedChange:this.props.onTimeLoggedChange,onTimeRemainingChange:this.props.onTimeRemainingChange,onDateStartedChange:this.props.onDateStartedChange,onWorkDescriptionChange:this.props.onWorkDescriptionChange,onWorkDescriptionChangeFailure:this.props.onWorkDescriptionChangeFailure,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,activityProvider:this.props.activityProvider,externalId:this.props.externalId})}render(){return a.a.createElement($.a,{header:this.renderHeader,footer:this.renderFooter,isOpen:!0,width:"small",onDialogDismissed:this.props.onCancel},a.a.createElement(G.a,{onEscape:this.props.onCancel},a.a.createElement("div",{ref:this.setContainerRef,"data-testid":"issue.issue-view.common.log-time-modal-dialog.contents"},this.renderProgressTracker(),this.renderForm())))}}yt.displayName="LogTimeModal",yt.defaultProps={isDone:!1,progressTrackerValue:{},estimatedTime:void 0};s("./node_modules/lodash/clamp.js");const Ot={minute:"m",hour:"h",day:"d",week:"w"},jt=e=>Ot[e]||Ot.minute;function Et(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(s),!0).forEach((function(t){kt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Et(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function kt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class wt extends n.Component{constructor(e){super(e),this.onTimeLoggedBlur=()=>{this.applyDefaultTimeFormat(this.state.value.timeLogged,this.onTimeLoggedChange)},this.onTimeRemainingBlur=()=>{this.applyDefaultTimeFormat(this.state.value.timeRemaining,this.onTimeRemainingChange)},this.onTimeLoggedChange=e=>{const t=B(e);if(this.setState(({value:s})=>({value:vt(vt({},s),{},{timeLogged:e}),hasUserInteracted:!0,isTimeLoggedValid:t})),t&&this.props.initialValue.timeRemaining){const t=(this.timeStringToSeconds(e)||0)-(this.timeStringToSeconds(this.props.initialValue.timeLogged)||0),s=(this.timeStringToSeconds(this.props.initialValue.timeRemaining)||0)-t,n=this.secondsToTimeString(s);this.setState(({value:e})=>({value:vt(vt({},e),{},{timeRemaining:n}),isTimeRemainingValid:!0}))}},this.onTimeRemainingChange=e=>{this.setState(({value:t})=>({value:vt(vt({},t),{},{timeRemaining:e}),hasUserInteracted:!0,isTimeRemainingValid:B(e)}))},this.onDateStartedChange=e=>{this.setState(({value:t})=>({value:vt(vt({},t),{},{dateStarted:e}),defaultDateStarted:null,hasUserInteracted:!0}))},this.onWorkDescriptionChange=e=>{this.setState(({value:t})=>({value:vt(vt({},t),{},{workDescription:e}),hasUserInteracted:!0}))},this.onSubmit=(e,t)=>{const{value:{workDescription:s}}=this.state,n="string"!=typeof this.state.value.workDescription?Object(L.h)(s):s,a=vt(vt({},this.getValue()),{},{workDescription:n});this.props.onSubmit(a,t)},this.applyDefaultTimeFormat=(e,t)=>{let s=e.trim();if(H(s)){const{defaultUnit:e}=this.props.config;s=`${s}${jt(e)}`}s!==e&&t(s)},this.state={value:e.initialValue,defaultDateStarted:Date.now(),isTimeLoggedValid:!0,isTimeRemainingValid:!0,hasUserInteracted:!1}}getIsCollapsed(){return this.props.isCollapsible&&!this.state.value.timeLogged}getDateStarted(){const{defaultDateStarted:e,value:{dateStarted:t,timeLogged:s}}=this.state;if(!this.props.shouldUpdateDate||t)return t;if(!e)return null;const n=this.timeStringToSeconds(s)||0;try{return new Date(e-1e3*n).toISOString()}catch(t){return new Date(e).toISOString()}}getValue(){return vt(vt({},this.state.value),{},{dateStarted:this.getDateStarted()})}getFormState(){return this.props.isWaiting?"submitting":this.state.hasUserInteracted&&this.props.validator(this.getValue())?"valid":"invalid"}getProgressTrackerValue(){const{value:{timeLogged:e,timeRemaining:t}}=this.state,{initialValue:s,isRollingUpData:n}=this.props,a=n?this.props.rolledUpTimeTracking:this.props.timeTracking,i=(this.timeStringToSeconds(e)||0)-(this.timeStringToSeconds(s.timeLogged)||0),r=i||a.loggedTime?(i||0)+(a.loggedTime||0):void 0,o=this.timeStringToSeconds(t),c=(o||0)-(this.timeStringToSeconds(s.timeRemaining)||0),l="number"==typeof o;let{remainingTime:u}=a;return l&&(u=n?(a.remainingTime||0)+c:o||0),{loggedTime:r,remainingTime:u}}secondsToTimeString(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(W.a)(t,s)(e)}timeStringToSeconds(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(V.a)(t,s)(e)}render(){return a.a.createElement(yt,{value:this.getValue(),progressTrackerValue:this.getProgressTrackerValue(),estimatedTime:this.props.estimatedTime,rolledUpEstimatedTime:this.props.rolledUpEstimatedTime,config:this.props.config,header:this.props.header,formState:this.getFormState(),timeZone:this.props.timeZone,isCollapsed:this.getIsCollapsed(),isDone:this.props.isDone,isTimeLoggedValid:this.state.isTimeLoggedValid,isTimeRemainingValid:this.state.isTimeRemainingValid,onSubmit:this.onSubmit,onCancel:this.props.onCancel,onTimeLoggedChange:this.onTimeLoggedChange,onTimeLoggedBlur:this.onTimeLoggedBlur,onTimeRemainingChange:this.onTimeRemainingChange,onTimeRemainingBlur:this.onTimeRemainingBlur,onDateStartedChange:this.onDateStartedChange,onWorkDescriptionChange:this.onWorkDescriptionChange,onWorkDescriptionChangeFailure:this.props.onWorkDescriptionChangeFailure,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject})}}wt.displayName="LogTimeModalWithValidation",wt.defaultProps={isCollapsible:!1,isDone:!1,isWaiting:!1,shouldUpdateDate:!1};const St=Object(E.a)({onSubmit:"clicked",onCancel:"clicked",onToggleRollingUpData:"toggleRollingUpData"})(Object(v.b)("worklogModal")(wt));var It,Ct=e=>a.a.createElement(R.a,{id:"issue.issue-view.common.worklog-dialog"},a.a.createElement(N.a,{id:"common.worklog-dialog",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},a.a.createElement(St,e))),Tt=Object(j.defineMessages)({title:{id:"issue.activity.worklog.add-modal.title",defaultMessage:"Time tracking"}});const Pt=({timeLogged:e,timeRemaining:t,dateStarted:s})=>(!!e||!!t)&&(B(e)||"0"===e)&&B(t)&&!!s;let _t=Object(v.a)("addWorklog",M.a.MODAL)(It=class extends n.Component{render(){const{timeTracking:e,rolledUpTimeTracking:t,timeTrackingConfiguration:s,intl:n}=this.props,{timeSpentSeconds:i,remainingEstimateSeconds:r,originalEstimateSeconds:c}=e,{daysPerWeek:l,hoursPerDay:u}=s,d={timeLogged:"",timeRemaining:"number"==typeof r?Object(W.a)(l,u)(r):"",workDescription:L.c,dateStarted:null},p={loggedTime:i,remainingTime:r};return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ct,{initialValue:d,timeTracking:p,rolledUpTimeTracking:{loggedTime:t.timeSpentSeconds,remainingTime:t.remainingEstimateSeconds},estimatedTime:c,rolledUpEstimatedTime:t.originalEstimateSeconds,config:s,header:n.formatMessage(Tt.title),timeZone:this.props.timeZone,isCollapsible:!0,isDone:this.props.isDone,isWaiting:this.props.isSaving,shouldUpdateDate:!0,validator:Pt,onSubmit:this.props.onSubmit,onCancel:this.props.onCancel,onWorkDescriptionChangeFailure:o.a,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider||{},mentionEncoder:this.props.mentionEncoder||o.a,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject}),a.a.createElement(m.a,null))}})||It;function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Dt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const At=e=>{const{timeTrackingValue:t,rolledUpTimeTrackingValue:s}=e,i=Dt(e,["timeTrackingValue","rolledUpTimeTrackingValue"]),[r,{markRollingUpData:o,unmarkRollingUpData:c}]=S(),l=Object(n.useCallback)(e=>{e?o():c()},[o,c]);return a.a.createElement(_t,xt({},i,{timeTracking:t,rolledUpTimeTracking:s,isRollingUpData:r,onToggleRollingUpData:l}))};At.displayName="WrappedWorklogModal";const Mt=Object(j.injectIntl)(Object(E.a)({onSubmit:"submitAddWorklog",onCancel:"cancelAddWorklog"})(Object(v.b)("worklog")(At)));var Lt=Object(i.b)(e=>({timeTrackingConfiguration:Object(D.h)(e),rolledUpTimeTrackingValue:Object(D.j)(e)(!0),timeTrackingValue:Object(D.i)(e),timeZone:Object(_.z)(e),isDone:"DONE"===Object(A.b)(e),isSaving:Object(D.e)(e),baseUrl:Object(P.g)(e),mediaContext:Object(x.a)(e),mentionEncoder:Object(C.a)(Object(P.g)(e)),mentionProvider:Object(T.a)(e),shouldDisplayRollUpDataControl:Object(D.c)(e),isClassicProject:Object(_.l)(e)}),e=>({onSubmit:(t,s)=>{const{timeLogged:n,timeRemaining:a}=t||{};e(!n&&a?Object(I.K)(a,s):Object(I.m)(t,s))},onCancel:()=>{e(Object(I.o)())}}))(Mt),Rt=s("./node_modules/lodash/flow.js"),Nt=s.n(Rt),Ut=s("./src/packages/issue/issue-view/src/activity/worklog/state/selectors.js"),Ft=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),Vt=s.n(Ft),Kt=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),Bt=Object(j.defineMessages)({delete:{id:"issue.activity.worklog.delete-modal.delete",defaultMessage:"Delete"},deleteHeading:{id:"issue.activity.worklog.delete-modal.delete-heading",defaultMessage:"Delete worklog entry?"},cancel:{id:"issue.activity.worklog.delete-modal.cancel",defaultMessage:"Cancel"},deleteWarning:{id:"issue.activity.worklog.delete-modal.delete-warning",defaultMessage:"Once you delete, it's gone for good."},adjustCheckboxLabel:{id:"issue.activity.worklog.delete-modal.adjust-checkbox-label",defaultMessage:"Adjust time remaining"},adjustCurrentLabel:{id:"issue.activity.worklog.delete-modal.adjust-current-label",defaultMessage:"Current"},adjustNewLabel:{id:"issue.activity.worklog.delete-modal.adjust-new-label",defaultMessage:"New time remaining"},adjustNewSubtext:{id:"issue.activity.worklog.delete-modal.adjust-new-subtext",defaultMessage:"By default, deleted time ({timeSpent}) is added to the time remaining."}});const Wt=Q.default.div(["display:flex;margin-top:-","px;"],3*J.e),Ht=Q.default.div(["display:flex;flex-direction:column;align-items:center;max-width:","px;"],11*J.e),Gt=Q.default.div(["color:#6b778c;font-size:","px;font-weight:600;line-height:1.3333333333333333;padding:","px 0 ","px 0;"],3*J.e/2,5*J.e/2,J.e/2),$t=Q.default.div(["text-align:center;padding:","px;"],1.25*J.e),qt=Q.default.div(["margin:","px ","px ","px ","px;"],6*J.e,2*J.e,6*J.e,J.e),zt=Q.default.div(["margin:","px 0 ","px -","px;"],2*J.e,2*J.e,.5*J.e),Yt=Q.default.div(["width:50%;"]),Qt=Q.default.div(["font-size:","px;margin-top:","px;color:",";"],1.25*J.e,J.e/2,Je.a.N90);var Jt;let Zt=Object(v.a)("deleteWorklog",M.a.MODAL)(Jt=class extends n.Component{constructor(...e){super(...e),this.secondsToTimeString=Object(W.a)(this.props.timeTrackingConfig.daysPerWeek,this.props.timeTrackingConfig.hoursPerDay),this.timeStringToSeconds=Object(V.a)(this.props.timeTrackingConfig.daysPerWeek,this.props.timeTrackingConfig.hoursPerDay),this.state={isAdjustTimeRemainingChecked:!0,timeRemaining:this.secondsToTimeString(this.props.timeRemainingSeconds+this.timeStringToSeconds(this.props.worklog.timeSpent))},this.onTimeRemainingChange=e=>this.setState({timeRemaining:e.target.value}),this.onCheckboxChange=()=>this.setState({isAdjustTimeRemainingChecked:!this.state.isAdjustTimeRemainingChecked}),this.onConfirm=(e,t)=>this.props.onConfirm(this.state.isAdjustTimeRemainingChecked?this.state.timeRemaining:this.secondsToTimeString(this.props.timeRemainingSeconds),this.state.isAdjustTimeRemainingChecked,t),this.originalTimeRemaining=this.secondsToTimeString(this.props.timeRemainingSeconds)}renderTimeRemainingInput(e){const{isDeleting:t,intl:{formatMessage:s}}=this.props,{timeRemaining:n}=this.state;return a.a.createElement(Pe,{isValid:e},e=>a.a.createElement(_e.a,{value:n,isInvalid:e,invalidMessage:e?Te.b:void 0,onChange:this.onTimeRemainingChange,label:s(Bt.adjustNewLabel),placeholder:s(Te.a.timeInputPlaceholder),disabled:t,required:!0,shouldFitContainer:!0}))}renderContent(e){const{isDeleting:t,worklog:{timeSpent:s},intl:{formatMessage:n}}=this.props,{isAdjustTimeRemainingChecked:i}=this.state;return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,n(Bt.deleteWarning)),a.a.createElement(zt,null,a.a.createElement(We.a,{isChecked:i,isDisabled:t,onChange:this.onCheckboxChange,label:n(Bt.adjustCheckboxLabel),name:"adjust-checkbox"})),i&&a.a.createElement(Wt,null,a.a.createElement(Ht,null,a.a.createElement(Gt,null,n(Bt.adjustCurrentLabel)),a.a.createElement($t,null,this.originalTimeRemaining)),a.a.createElement(qt,null,a.a.createElement(Vt.a,null)),a.a.createElement(Yt,null,this.renderTimeRemainingInput(e),a.a.createElement(Qt,null,n(Bt.adjustNewSubtext,{timeSpent:s})))))}render(){const{isDeleting:e,onCancel:t,intl:{formatMessage:s}}=this.props,{timeRemaining:n,isAdjustTimeRemainingChecked:i}=this.state,r=K(n);return a.a.createElement(Kt.b,{headerMessage:s(Bt.deleteHeading),appearance:"danger",contentMessage:this.renderContent(r),confirmActionText:s(Bt.delete),cancelActionText:s(Bt.cancel),onConfirm:this.onConfirm,onCancel:t,isLoading:e,isConfirmDisabled:e||i&&!r,isCancelDisabled:e,externalId:"issue.activity.worklog.delete-modal"},a.a.createElement(m.a,null))}})||Jt;function Xt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function es(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(s),!0).forEach((function(t){ts(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Xt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ts(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var ss,ns=Nt()(Object(v.b)("worklog"),Object(E.a)({onConfirm:"confirmDeleteWorklog",onCancel:"cancelDeleteWorklog"}),j.injectIntl,Object(i.b)(e=>({isDeleting:Object(D.e)(e),worklog:Object(D.a)(e),timeTrackingConfig:Object(D.h)(e),timeRemainingSeconds:Object(Ut.c)(e)}),{dispatchDeleteWorklog:I.q,onCancel:I.o},(e,{dispatchDeleteWorklog:t,onCancel:s})=>es(es({},e),{},{onCancel:s,onConfirm:(s,n,a)=>{e.worklog&&t(e.worklog.id,s,n,a)}})))(Zt),as=Object(j.defineMessages)({title:{id:"issue.activity.worklog.edit-modal.title",defaultMessage:"Edit work log"}});const is=()=>({timeLogged:e,timeRemaining:t,dateStarted:s})=>(K(e)||"0"===e)&&B(t)&&!!s;let rs=Object(v.a)("editWorklog",M.a.MODAL)(ss=class extends n.Component{constructor(...e){super(...e),this.onSubmit=(e,t)=>{const{worklog:s}=this.props;s&&this.props.onSubmit(s.id,e,t)}}render(){const{worklog:e,timeTracking:t,rolledUpTimeTracking:s,timeTrackingConfiguration:n,intl:i}=this.props;if(!e)return null;const{timeSpentSeconds:r,remainingEstimateSeconds:c,originalEstimateSeconds:l}=t,{daysPerWeek:u,hoursPerDay:d}=n,p={timeLogged:e.timeSpent,timeRemaining:"number"==typeof c?Object(W.a)(u,d)(c):"",dateStarted:new Date(e.started).toISOString(),workDescription:e.comment||L.c},b={loggedTime:r,remainingTime:c};return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ct,{initialValue:p,timeTracking:b,rolledUpTimeTracking:{loggedTime:s.timeSpentSeconds,remainingTime:s.remainingEstimateSeconds},estimatedTime:l,rolledUpEstimatedTime:s.originalEstimateSeconds,config:n,header:i.formatMessage(as.title),timeZone:this.props.timeZone,isCollapsible:!1,isDone:this.props.isDone,isWaiting:this.props.isSaving,shouldUpdateDate:!1,validator:is(),onSubmit:this.onSubmit,onCancel:this.props.onCancel,onWorkDescriptionChangeFailure:o.a,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider||{},mentionEncoder:this.props.mentionEncoder||o.a,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject}),a.a.createElement(m.a,null))}})||ss;function os(){return(os=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function cs(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ls=e=>{const{timeTrackingValue:t,rolledUpTimeTrackingValue:s}=e,i=cs(e,["timeTrackingValue","rolledUpTimeTrackingValue"]),[r,{markRollingUpData:o,unmarkRollingUpData:c}]=S(),l=Object(n.useCallback)(e=>{e?o():c()},[o,c]);return a.a.createElement(rs,os({},i,{timeTracking:t,rolledUpTimeTracking:s,isRollingUpData:r,onToggleRollingUpData:l}))};ls.displayName="WrappedWorklogModal";const us=Object(j.injectIntl)(Object(E.a)({onSubmit:"submitEditWorklog",onCancel:"cancelEditWorklog"})(Object(v.b)("worklog")(ls)));var ds=Object(i.b)(e=>({worklog:Object(D.a)(e),timeTrackingConfiguration:Object(D.h)(e),rolledUpTimeTrackingValue:Object(D.j)(e)(!0),timeTrackingValue:Object(D.i)(e),timeZone:Object(_.z)(e),isDone:"DONE"===Object(A.b)(e),isSaving:Object(D.e)(e),baseUrl:Object(P.g)(e),mediaContext:Object(x.a)(e),mentionEncoder:Object(C.a)(Object(P.g)(e)),mentionProvider:Object(T.a)(e),shouldDisplayRollUpDataControl:Object(D.c)(e),isClassicProject:Object(_.l)(e)}),e=>({onSubmit:(t,s,n)=>{e(Object(I.u)(t,s,n))},onCancel:()=>{e(Object(I.o)())}}))(us),ps=s("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),ms=s("./node_modules/react-resource-router/build/esm/index.js"),bs=s("./src/packages/platform/services/bento-transition-check/src/utils/index.js"),fs=s("./src/packages/platform/services/bento-transition-check/src/components/index.js"),gs=s("./src/packages/platform/controllers/spa-state/src/components/transition-state/index.js"),hs=s("./src/packages/platform/services/bento-transition-check/src/types.js"),ys=s("./src/packages/platform/controllers/spa-state/src/common/index.js"),Os=s("./src/packages/issue/issue-view/src/common/metrics/index.js");class js extends n.Component{constructor(...e){super(...e),this.hasErrored=!1,this.endOfCriticalPath=void 0,this.errorOnCriticalPath=void 0,this.hasSubmittedMetrics=!1,this.timestampRecievedWhileOptimisticCheckIsPending=void 0,this.spaState=void 0}componentDidMount(){const{isPreview:e,isComplete:t,metrics:s,bentoTransitionCheck:n,lastTransitionStartTime:a,hasBentoEnabledCheck:i,isInitialRender:r}=this.props;this.hasErrored||((e||t)&&s.onPreviewRendered({isInitialRender:r,lastTransitionStartTime:a}),t&&(s.onInteractive({lastTransitionStartTime:a}),this.endOfCriticalPath&&this.endOfCriticalPath(),!i||r?this.submitMetrics():n===hs.a.ALLOW&&this.submitMetrics(a)))}componentDidUpdate(e){const{error:t,metrics:s,isLoading:n,lastTransitionStartTime:a,issueKey:i,hasBentoEnabledCheck:r,isInitialRender:o}=this.props;t&&(this.hasErrored=!0,this.errorOnCriticalPath&&this.errorOnCriticalPath()),this.resetSubmissionStateIfNewView(n,e,i),this.hasErrored||((this.isPreviewModeAfterBentoSpaTransition(e)||this.didBentoMoveOutOfLoadingState(e))&&s.onPreviewRendered({isInitialRender:o,lastTransitionStartTime:a}),(this.didJustMoveToComplete(e)||this.isFirstLoadOfRecentIssue(e))&&(s.onInteractive({lastTransitionStartTime:a}),this.endOfCriticalPath&&this.endOfCriticalPath()),this.props.isComplete&&!this.hasSubmittedMetrics&&(!r||o?this.submitMetrics():this.hasSpaBentoCheckCompleted()&&this.submitMetrics(a)))}setTimestampRecievedWhileOptimisticCheckIsPending(e,t){e&&t!==hs.a.INITIAL||(this.timestampRecievedWhileOptimisticCheckIsPending=this.props.lastTransitionStartTime)}hasSpaBentoCheckCompleted(){return this.checkIsBentoCompletedWithPageResetHistoryBlocker()}checkIsBentoCompletedWithPageResetHistoryBlocker(){return this.props.hasBentoEnabledCheck&&this.props.bentoTransitionCheck===hs.a.ALLOW}checkIsBentoCompletedWithOutPageResetHistoryBlocker(){return this.props.hasBentoEnabledCheck&&this.props.bentoTransitionCheck===hs.a.ALLOW&&this.isTimestampFromAfterPending()}isFirstLoadOfRecentIssue(e){return this.props.issueKey!==e.issueKey&&this.props.isComplete}resetSubmissionStateIfNewView(e,t,s){(e&&!t.isLoading||s!==t.issueKey)&&(this.hasSubmittedMetrics=!1)}isTimestampFromAfterPending(){return this.timestampRecievedWhileOptimisticCheckIsPending!==this.props.lastTransitionStartTime}submitMetrics(e){this.props.isInitialRender||!e?Object(Os.j)():Object(Os.j)(e,this.spaState),this.hasSubmittedMetrics=!0,this.timestampRecievedWhileOptimisticCheckIsPending=null}didBentoMoveOutOfLoadingState(e){const{isPreview:t,isComplete:s}=this.props;return e.isLoading&&(t||s)}isPreviewModeAfterBentoSpaTransition(e){const{isPreview:t,issueKey:s}=this.props;return e.issueKey!==s&&t}didJustMoveToComplete(e){const{isComplete:t}=this.props;return t&&!e.isComplete}render(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(ys.a,null,(e,{setAppReady:t,setAppErrorReady:s})=>(this.endOfCriticalPath=t,this.errorOnCriticalPath=s,this.spaState=e,null)))}}js.displayName="BentoMetrics";var Es=js;function vs(){return(vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const ks=e=>null!=e?e-performance.timing.navigationStart:e,ws=e=>{const[{isTransitionCurrentlyAllowed:t}]=Object(fs.b)(),[{isInitialRender:s,lastTransitionStartTime:n}]=Object(gs.b)();return a.a.createElement(ms.f,null,({route:i})=>a.a.createElement(Es,vs({},e,{bentoTransitionCheck:t,isInitialRender:s,lastTransitionStartTime:ks(n),hasBentoEnabledCheck:!!i&&Object(bs.a)(i)})))};ws.displayName="BentoMetricsWithSpaTimingInfo";var Ss=ws,Is=s("./src/packages/issue/issue-view/src/common/metrics/context/index.js");function Cs(){return(Cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var Ts=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),Ps=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),_s=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js"),xs=s("./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js"),Ds=s("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),As=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/index.js"),Ms=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),Ls=s("./src/packages/issue/issue-view/src/views/common/skeleton/skeleton-view.js"),Rs=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),Ns=s("./node_modules/lodash/find.js"),Us=s.n(Ns),Fs=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),Vs=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),Ks=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/op-triggers/on-mount-and-update/index.js"),Bs=s("./src/packages/platform/ui/flags/src/index.js");var Ws=s("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js"),Hs=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),Gs=s("./node_modules/@atlaskit/icon/glyph/editor/error.js"),$s=s.n(Gs),qs=s("./node_modules/@atlaskit/icon/glyph/editor/success.js"),zs=s.n(qs),Ys=s("./src/packages/issue/issue-view/src/common/constants/flags.js");const Qs=Q.default.span(["color:",";"],e=>e.color),Js=a.a.createElement(Qs,{size:"medium",color:Je.a.R300},a.a.createElement($s.a,{label:""})),Zs=a.a.createElement(Qs,{size:"medium",color:Je.a.G300},a.a.createElement(zs.a,{label:""})),Xs={[Ys.j]:{messages:Object(j.defineMessages)({title:{id:"issue.generic-server-error-when-adding-comment-title",defaultMessage:"Comment could not be updated"},description:{id:"issue.generic-server-error-when-adding-comment-description",defaultMessage:"There was a connection problem and your comment was not successfully updated. Check your network before trying to update or add another comment."}}),icon:Js,type:"error"},[Ys.k]:{messages:Object(j.defineMessages)({title:{id:"issue.server-validation-error-when-adding-comment-title",defaultMessage:"We couldn't save your comment"},description:{id:"issue.server-validation-error-when-adding-comment-description",defaultMessage:"It might be empty or have invalid formatting. If you copy-pasted, try removing the formatting and adding it directly in the editor."}}),icon:Js,type:"error"},[Ys.l]:{messages:Object(j.defineMessages)({title:{id:"issue.content-exceeded-error-when-adding-comment-title",defaultMessage:"We couldn't save your comment"},description:{id:"issue.content-exceeded-error-when-adding-comment-description",defaultMessage:"The comment is too long. Try reducing its length, splitting it, or attaching a file to the issue."}}),icon:Js,type:"error"},[Ys.m]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-deleting-comment-title",defaultMessage:"Comment could not be deleted"},description:{id:"issue.server-error-when-deleting-comment-description",defaultMessage:"There was a connection problem and the comment was not successfully deleted. Try checking your network connection."}}),icon:Js,type:"error"},[Ys.u]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-retrieving-editor-value-title",defaultMessage:"The text editor failed"},description:{id:"issue.error-when-retrieving-editor-value-description",defaultMessage:"Retry your last action, or refresh the page."}}),icon:Js,type:"error"},[Ys.H]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-confirming-rich-text-field-value-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-confirming-rich-text-field-value-description",defaultMessage:"It may contain formatting we don\u2019t recognize. Try removing the formatting before saving."}}),icon:Js,type:"error"},[Ys.I]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-confirming-rich-text-field-value-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-confirming-rich-text-field-value-description-maximum-length-exceeded",defaultMessage:"It's too long for the field. Try attaching a file or page to the issue, or adding part of the content as comments."}}),icon:Js,type:"error"},[Ys.J]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-saving-empty-required-rich-text-field-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-saving-empty-required-rich-text-field",defaultMessage:"This field is required and cannot be empty."}}),icon:Js,type:"error"},[Ys.e]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-adding-attachment-title",defaultMessage:"We couldn't save your attachment"},description:{id:"issue.error-when-adding-attachment-description",defaultMessage:"Reload the issue then try adding it again."}}),icon:Js,type:"error"},[Ys.q]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-deleting-issue-link-title",defaultMessage:"We couldn't remove the issue link"},description:{id:"issue.server-error-when-deleting-issue-link-description",defaultMessage:"Try reloading the page and removing the issue link again."}}),icon:Js,type:"error"},[Ys.f]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-deleting-attachment-title",defaultMessage:"Attachment could not be deleted"},description:{id:"issue.server-error-when-deleting-attachment-description",defaultMessage:"There was a connection problem and the attachment was not successfully deleted. Try checking your network connection."}}),icon:Js,type:"error"},[Ys.Q]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-toggle-watch-title",defaultMessage:"We couldn't update your watch status"},description:{id:"issue.server-error-when-toggle-watch-description",defaultMessage:"Check your connection and try clicking watch again."}}),icon:Js,type:"error"},[Ys.z]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-fetching-watchers-title",defaultMessage:"We couldn't load the watchers list"},description:{id:"issue.error-when-fetching-watchers-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"error"},[Ys.M]:{messages:Object(j.defineMessages)({title:{id:"issue.start-watching-success-title",defaultMessage:"You're watching this issue"},description:{id:"issue.start-watching-success-description",defaultMessage:"We'll notify you when there's activity on it."}}),icon:Zs,type:"success"},[Ys.N]:{messages:Object(j.defineMessages)({title:{id:"issue.stop-watching-success-title",defaultMessage:"You stopped watching this issue"},description:{id:"issue.stop-watching-success-description",defaultMessage:"We won't notify you about activity on it."}}),icon:Zs,type:"success"},[Ys.G]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-removing-watcher-title",defaultMessage:"We couldn't remove that watcher"},description:{id:"issue.error-when-removing-watcher-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"error"},[Ys.b]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-adding-watcher-title",defaultMessage:"We couldn't add that watcher"},description:{id:"issue.error-when-adding-watcher-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"error"},[Ys.O]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-reordering-subtask",defaultMessage:"We couldn't reorder those subtasks"},description:{id:"issue.error-when-reordering-subtask-description",defaultMessage:"Wait a few moments, then give it another try."}}),icon:Js,type:"error"},[Ys.A]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-add-flag-title",defaultMessage:"We couldn't flag this issue"},description:{id:"issue.server-error-when-add-flag-description",defaultMessage:"Check your connection and try adding the flag again."}}),icon:Js,type:"error"},[Ys.B]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-remove-flag-title",defaultMessage:"We couldn't remove the flag from this issue"},description:{id:"issue.server-error-when-remove-flag-description",defaultMessage:"Check your connection and try removing the flag again."}}),icon:Js,type:"error"},[Ys.D]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-logging-work-title",defaultMessage:"We couldn't add your time spent"},description:{id:"issue.server-error-when-logging-work-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"error"},[Ys.d]:{messages:Object(j.defineMessages)({title:{id:"issue.assign-to-me-flag-title",defaultMessage:"Successfully assigned to you"},description:{id:"issue.assign-to-me-flag-description",defaultMessage:"You're now the assignee for {issueKey}."}}),icon:Zs,type:"success",shouldAutoDismiss:!0},[Ys.n]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-creating-child-issue-title",defaultMessage:"We couldn't create the child issue"},description:{id:"issue.error-when-creating-child-issue-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"error"},[Ys.C]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-linking-child-issue-title",defaultMessage:"We couldn't link the child issue"},description:{id:"issue.error-when-linking-child-issue-description",defaultMessage:"The issue was created but the linking failed. Head over to your board and try again."}}),icon:Js,type:"error"},[Ys.h]:{messages:Object(j.defineMessages)({title:{id:"change.issue.type.success.title",defaultMessage:"Issue type changed to {destType}"},description:{id:"change.issue.type.success.description",defaultMessage:"Issue type changed"}}),icon:Zs,type:"success",shouldAutoDismiss:!0},[Ys.g]:{messages:Object(j.defineMessages)({title:{id:"change.issue.type.error.title",defaultMessage:"Error changing issue type"},description:{id:"change.issue.type.error.description",defaultMessage:"There was an error changing the issue type. Please try again."}}),icon:Js,type:"error"},[Ys.p]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-deleting-issue-title",defaultMessage:"We couldn't delete {issueKey}"},description:{id:"issue.error-when-deleting-issue-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"error",actions:[{messages:Object(j.defineMessages)({content:{id:"issue.error-when-deleting-issue-call-to-action",defaultMessage:"Try again"}}),onClick:({closeFlag:e,retryIssueDelete:t,deleteFailureIssueKey:s})=>{t&&null!=s&&""!==s&&t(s),e()}}]},[Ys.x]:{messages:Object(j.defineMessages)({title:{id:"issue.activity.worklog.flags.edit-success-title",defaultMessage:"Work log entry updated"}}),icon:Zs,type:"success",shouldAutoDismiss:!0},[Ys.t]:{messages:Object(j.defineMessages)({title:{id:"issue.activity.worklog.flags.delete-success-title",defaultMessage:"Work log entry deleted"}}),icon:Zs,type:"success",shouldAutoDismiss:!0},[Ys.i]:{messages:Object(j.defineMessages)({title:{id:"issue.clickthrough-banner.flags.dismissed.title",defaultMessage:"Banner be gone!"},description:{id:"issue.clickthrough-banner.flags.dismissed.description",defaultMessage:"You can still open the old view through the \u2022\u2022\u2022 menu on an issue."}}),icon:Zs,type:"success",shouldAutoDismiss:!0},[Ys.c]:{messages:Object(j.defineMessages)({title:{id:"issue.activity.worklog.flags.add-failure-title",defaultMessage:"We couldn't save your changes"},description:{id:"issue.activity.worklog.flags.add-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"error"},[Ys.P]:{messages:Object(j.defineMessages)({title:{id:"issue.activity.worklog.flags.update-time-remaining-failure-title",defaultMessage:"We couldn't save your edit"},description:{id:"issue.activity.worklog.flags.update-time-remaining-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"error"},[Ys.w]:{messages:Object(j.defineMessages)({title:{id:"issue.activity.worklog.flags.edit-failure-title",defaultMessage:"We couldn't save your edit"},description:{id:"issue.activity.worklog.flags.failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"error"},[Ys.s]:{messages:Object(j.defineMessages)({title:{id:"issue.activity.worklog.flags.delete-failure-title",defaultMessage:"We couldn't delete the work log entry"},description:{id:"issue.activity.worklog.flags.failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"error"},[Ys.o]:{messages:Object(j.defineMessages)({title:{id:"issue.confluence-pages.delete-failure-title",defaultMessage:"We couldn\u2019t remove the page link"},description:{id:"issue.confluence-pages.delete-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"error"},[Ys.K]:{messages:Object(j.defineMessages)({title:{id:"issue.approval.action.save-error-title",defaultMessage:"We couldn\u2019t save your approval response"},description:{id:"issue.approval.action.save-error-description",defaultMessage:"Give it a few seconds, then try again."}}),icon:Js,type:"error",shouldAutoDismiss:!0},[Ys.L]:{messages:Object(j.defineMessages)({title:{id:"issue.approval.action.save-success-title",defaultMessage:"We've saved your response."}}),icon:Zs,type:"success",shouldAutoDismiss:!0},[Ys.a]:{messages:Object(j.defineMessages)({title:{id:"issue.approval.action.add-approver-error-title",defaultMessage:"We couldn\u2019t add the approver"},description:{id:"issue.approval.action.add-approver-error-description",defaultMessage:"Check your connection, then try again later."}}),icon:Js,type:"error",shouldAutoDismiss:!0},[Ys.F]:{messages:Object(j.defineMessages)({title:{id:"issue.approval.action.remove-approver-error-title",defaultMessage:"We couldn\u2019t remove the approver"},description:{id:"issue.approval.action.remove-approver-error-description",defaultMessage:"Check your connection, then try again later."}}),icon:Js,type:"error",shouldAutoDismiss:!0},[Ys.v]:{messages:Object(j.defineMessages)({title:{id:"issue.color.action.change-color-title",defaultMessage:"We couldn\u2019t change the epic color"},description:{id:"issue.color.action.change-color-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"success",shouldAutoDismiss:!0},[Ys.y]:{messages:Object(j.defineMessages)({title:{id:"issue.link.jira-app-link-fetch-error-title",defaultMessage:"We couldn\u2019t fetch remote Jira application links"},description:{id:"issue.link.jira-app-link-fetch-error-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Js,type:"error",shouldAutoDismiss:!0},[Ys.E]:{messages:Object(j.defineMessages)({title:{id:"issue.link.jira-remote-link-server-error-title",defaultMessage:"We couldn't link the issue to {remoteIssueKey}."},description:{id:"issue.link.jira-remote-link-server-error-description",defaultMessage:"Reason: {i18nServerErrorMessage}"}}),icon:Js,type:"error",shouldAutoDismiss:!0}};function en(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function tn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?en(Object(s),!0).forEach((function(t){sn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):en(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function sn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class nn extends n.Component{constructor(...e){super(...e),this.onFlagDismissed=e=>{const{flags:t,onFlagDismissed:s,fireAnalyticsEvent:n}=this.props,a=Us()(t,{id:e});if(a){const e=Xs[a.type];e.onDismissed&&e.onDismissed({fireAnalyticsEvent:n})}s(e)}}render(){const{onFlagDismissed:e,flags:t,retryIssueDelete:s,fireAnalyticsEvent:n,deleteFailureIssueKey:i,FlagServiceSubscriber:r}=this.props;return(a.a.createElement(r,null,({showFlag:r})=>t.map(t=>{const o=Xs[t.type],c=t.titleI18nValues?[o.messages.title,t.titleI18nValues]:o.messages.title,l=t.descriptionI18nValues&&o.messages.description?[o.messages.description,t.descriptionI18nValues]:o.messages.description,u=(o.actions||[]).map(({messages:a,onClick:r})=>({content:a.content,onClick:()=>r({closeFlag:()=>e(t.id),retryIssueDelete:s,deleteFailureIssueKey:i,fireAnalyticsEvent:n})})),d=tn(tn({title:c},l&&{description:l}),{},{type:o.type,actions:u,isAutoDismiss:o.shouldAutoDismiss});return a.a.createElement(Ks.a,{key:t.id,args:[d],op:r})})))}}nn.displayName="UnsafeFlags",nn.displayName="Flags";var an=Nt()(Object(Fs.a)(e=>({fireAnalyticsEvent:(t,s)=>e(t,s)})),Object(Vs.a)("deleteIssueRetry",{retryIssueDelete:"deleteIssueRetry"}),Object(i.b)(e=>({flags:Object(_.i)(e),deleteFailureIssueKey:Object(P.B)(e),FlagServiceSubscriber:Bs.FlagServiceSubscriber}),e=>({onFlagDismissed:t=>e((e=>({type:"DISMISS_FLAG",payload:e}))(t)),retryIssueDelete:(t,s)=>{e(Object(Ws.c)(t,s))}})),Object(Hs.a)())(nn),rn=s("./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js"),on=s("./src/packages/issue/issue-view/src/common/media/user-auth/user-auth-actions.js"),cn=s("./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js"),ln=s("./node_modules/@atlaskit/media-picker/dist/esm/index.js"),un=s("./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js"),dn=s("./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js");function pn(){return(pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function mn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function fn(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const gn=e=>class extends n.Component{constructor(...e){super(...e),this.uploadTokensPromisesResolvers=[],this.onUploadsStart=e=>{const{files:t}=e,{onUploadStart:s}=this.props;t.forEach(e=>{s({id:`${e.id}`,createdDate:Date.now()})})},this.onUploadEnd=e=>{const{file:t}=e,{onUploadEnd:s}=this.props;s({id:`${t.id}`})},this.onError=e=>{const{error:t}=e,{onUploadError:s,onGeneralError:n}=this.props;["upload_fail","object_create_fail"].includes(t.name)?s(t):n(t)},this.resolveAuthPromise=([e,t])=>{if(!this.props.uploadContext||!this.isTokenUpToDate())return void t();const{serviceHost:s,clientId:n,token:a}=this.props.uploadContext;e({clientId:n,token:a,baseUrl:s})}}componentDidUpdate(e){e.uploadContext!==this.props.uploadContext&&this.resolveUploadPromises()}resolveUploadPromises(){this.uploadTokensPromisesResolvers.forEach(this.resolveAuthPromise),this.uploadTokensPromisesResolvers=[]}isTokenUpToDate(){if(!this.props.uploadContext)return!1;const{tokenIssueTimestamp:e,tokenLifespanInMs:t}=this.props.uploadContext;return e+t>Date.now()}render(){const t=this.props,{onUploadStart:s,onUploadEnd:n,onUploadError:i,onGeneralError:r,uploadContext:o,eventHandlers:c,config:l}=t,u=fn(t,["onUploadStart","onUploadEnd","onUploadError","onGeneralError","uploadContext","eventHandlers","config"]);if(!o)return null;const d={authProvider:()=>new Promise((e,t)=>{this.isTokenUpToDate()?this.resolveAuthPromise([e,t]):(this.props.requestUploadToken(),this.uploadTokensPromisesResolvers=[...this.uploadTokensPromisesResolvers,[e,t]])})},p=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(s),!0).forEach((function(t){bn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({uploadParams:{collection:o.collection}},l),m=c?c["upload-error"]:this.onError,b=c?c["uploads-start"]:this.onUploadsStart,f=c&&c["upload-end"]?c["upload-end"]:this.onUploadEnd,g=c&&c["upload-preview-update"];return a.a.createElement(e,pn({mediaClientConfig:d,config:p,onUploadsStart:b,onError:m,onEnd:f,onPreviewUpdate:g},u))}};var hn=e=>Nt()([Object(i.b)(e=>({uploadContext:Object(x.a)(e).uploadContext}),e=>({onUploadStart:t=>e(Object(un.c)(t)),onUploadEnd:t=>e(Object(un.d)(t)),onUploadError:t=>e(Object(un.e)(t)),onGeneralError:t=>e(Object(un.f)(t)),requestUploadToken:()=>e(Object(dn.c)())}))])(gn(e));const yn=hn(ln.a);var On=Object(i.b)(e=>({isOpen:Object(cn.a)(e)}),e=>({onClose:()=>e(Object(rn.a)())}))(e=>a.a.createElement(yn,{isOpen:e.isOpen,onClose:e.onClose})),jn=s("./node_modules/prop-types/index.js"),En=s.n(jn),vn=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/get-event-for-web-client.js"),kn=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),wn=s("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),Sn=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js");function In(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Cn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?In(Object(s),!0).forEach((function(t){Tn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):In(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Tn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Pn extends n.Component{constructor(...e){super(...e),this.picker=void 0}componentDidMount(){Object(ln.d)(Cn(Cn({},this.props.mediaClientConfig),{},{userAuthProvider:this.props.userAuthProvider}),Cn(Cn({},this.props.config),{},{proxyReactContext:this.context})).then(e=>{e.on("uploads-start",this.props.onUploadsStart),e.on("upload-end",this.props.onEnd),e.on("upload-error",this.props.onError),this.props.onPickerReady&&this.props.onPickerReady(e),this.picker=e})}componentWillUnmount(){const{picker:e}=this;e&&(e.removeAllListeners(),"function"==typeof e.teardown&&e.teardown())}render(){return null}}Pn.displayName="BaseMediaPicker",Pn.contextTypes={getAtlaskitAnalyticsEventHandlers:En.a.func};var _n=hn(Pn);function xn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Dn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(s),!0).forEach((function(t){An(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function An(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Mn extends n.Component{constructor(...e){super(...e),this.uploadTokensPromisesResolvers=[],this.onPickerReady=e=>{this.picker=e,this.picker.on("closed",this.props.onClose)},this.onMount=e=>{const{payload:t}=Object(vn.a)(e);this.analyticsSource=null!=t.source&&""!==t.source?t.source:"unknown"},this.overrideSourceHandler=e=>{e.update(e=>Dn(Dn({},e),{},{source:this.analyticsSource}))},this.resolveAuthPromise=([e,t])=>{if(!this.isTokenUpToDate())return void t();const{clientId:s,token:n}=this.props.userAuth;e({clientId:s,token:n,baseUrl:this.props.serviceHost})},this.userAuthProvider=()=>new Promise((e,t)=>{this.isTokenUpToDate()?this.resolveAuthPromise([e,t]):(this.props.requestAuthToken(),this.uploadTokensPromisesResolvers=[...this.uploadTokensPromisesResolvers,[e,t]])}),this.picker=void 0,this.analyticsSource=void 0}getChildContext(){const{getAtlaskitAnalyticsEventHandlers:e}=this.context;return{getAtlaskitAnalyticsEventHandlers:()=>[this.overrideSourceHandler,...e()]}}componentDidUpdate(e){e.userAuth!==this.props.userAuth&&this.resolveUploadPromises(),!e.isOpen&&this.props.isOpen&&this.picker&&this.picker.show()}resolveUploadPromises(){this.uploadTokensPromisesResolvers.forEach(this.resolveAuthPromise),this.uploadTokensPromisesResolvers=[]}isTokenUpToDate(){if(!this.props.userAuth)return!1;const{tokenIssueTimestamp:e,tokenLifespanInMs:t}=this.props.userAuth;return e+t>Date.now()}render(){const{eventHandlers:e,isOpen:t}=this.props;return(a.a.createElement(kn.a,{sourceType:wn.d,sourceName:"addAttachment"},a.a.createElement(a.a.Fragment,null,a.a.createElement(Sn.a,{onMount:this.onMount}),a.a.createElement(_n,{userAuthProvider:this.userAuthProvider,onPickerReady:this.onPickerReady,eventHandlers:e}),t&&a.a.createElement(Ye.b,null))))}}Mn.displayName="PopupMediaPicker",Mn.childContextTypes={getAtlaskitAnalyticsEventHandlers:En.a.func},Mn.contextTypes={getAtlaskitAnalyticsEventHandlers:En.a.func};const Ln=e=>{const{userAuth:t,viewContext:s,isMobile:n,onClose:i,isOpen:r,eventHandlers:o,requestAuthToken:c}=e;return!n&&t&&s&&s.serviceHost?a.a.createElement("div",null,a.a.createElement(Mn,{eventHandlers:o,userAuth:t,serviceHost:s.serviceHost,onClose:i,requestAuthToken:c,isOpen:r})):a.a.createElement(On,{eventHandlers:o})};Ln.displayName="PopupMediaPickerWithBrowserFallback";var Rn=Object(i.b)(e=>({userAuth:Object(x.a)(e).userAuth,viewContext:Object(x.a)(e).viewContext,isMobile:Object(P.u)(e),isOpen:Object(cn.a)(e)}),e=>({onClose:()=>{e(Object(rn.a)())},requestAuthToken:()=>e(Object(on.c)())}))(Ln),Nn=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),Un=s("./node_modules/lodash/reduce.js"),Fn=s.n(Un),Vn=s("./node_modules/lodash/set.js"),Kn=s.n(Vn),Bn=s("./node_modules/lodash/some.js"),Wn=s.n(Bn),Hn=s("./node_modules/@atlaskit/adf-utils/dist/esm/builders/nodes/doc.js"),Gn=s("./node_modules/@atlaskit/adf-utils/dist/esm/builders/nodes/paragraph.js"),$n=s("./node_modules/@atlaskit/adf-utils/dist/esm/builders/nodes/media-single.js"),qn=s("./node_modules/@atlaskit/adf-utils/dist/esm/builders/nodes/media-group.js"),zn=s("./node_modules/@atlaskit/adf-utils/dist/esm/builders/nodes/media.js");const Yn="issue.issue-base.content.attachment.picker.servicedesk";class Qn extends n.Component{constructor(...e){super(...e),this.onUploadsStart=({files:e})=>{this.props.setCommentAttachmentInProgress(!0),this.commentAttachments=e.map(e=>({file:e,isUploadFinished:!1}))},this.onUploadFinished=({file:e})=>{this.injectAttachmentsToCommentEditor(this.commentAttachments),this.markAttachmentAsUploadFinished(e.id)},this.onUploadError=({file:e})=>{y.a.safeError(Yn,"Failed to upload an attachment.",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),this.markAttachmentAsUploadFinished(e.id)},this.getAttachmentsDocNode=(e,t)=>{const s=this.separateImageAndNonImageAttachments(e),n=this.getMediaSingleNodes(s.images,t),a=s.nonImages.length>0?this.getMediaGroupNode(s.nonImages,t):null;return a?Object(Hn.a)(a,...n,Object(Gn.a)()):Object(Hn.a)(...n,Object(Gn.a)())},this.getMediaSingleNodes=(e,t)=>e.map(e=>this.getMediaSingleNode(e,t)),this.getMediaSingleNode=(e,t)=>{const s=this.getMediaNode(e,200,200,t);return Object($n.a)({layout:"center"})(s)},this.getMediaGroupNode=(e,t)=>Object(qn.a)(...e.map(e=>this.getMediaNode(e,null,null,t))),this.getMediaNode=({file:e},t,s,n)=>Object(zn.a)({id:e.id,collection:n,type:"file",name:e.name,size:e.size,width:t,height:s,__key:e.id,__fileName:e.name,__fileSize:e.size,__fileMimeType:e.type,__displayType:null}),this.markAttachmentAsUploadFinished=e=>{Kn()(Us()(this.commentAttachments,t=>t.file.id===e),"isUploadFinished",!0),Wn()(this.commentAttachments,{isUploadFinished:!1})||(this.props.setCommentAttachmentInProgress(!1),this.commentAttachments=[])},this.commentAttachments=void 0,this.separateImageAndNonImageAttachments=e=>Fn()(e,(e,t)=>(this.isImageAttachment(t.file.type)?e.images.push(t):e.nonImages.push(t),e),{images:[],nonImages:[]}),this.injectAttachmentsToCommentEditor=e=>{const{uploadContext:t}=this.props;if(!t)return void y.a.safeError(Yn,"Failed to upload attachments. Upload context not available.",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"}));const s=this.getAttachmentsDocNode(e,t.collection);this.props.onEditCommentUpdate(s)},this.isImageAttachment=e=>!!e&&(e.indexOf("image/")>-1||e.indexOf("video/")>-1),this.eventHandlers={"uploads-start":this.onUploadsStart,"upload-end":this.onUploadFinished,"upload-error":this.onUploadError}}render(){const{render:e}=this.props;return e(this.eventHandlers)}}Qn.displayName="EventHandlersProvider";var Jn=Nt()([Object(i.b)(e=>({uploadContext:Object(x.a)(e).uploadContext}),e=>({onEditCommentUpdate:t=>{e(Object(Nn.d)("NEW_OPTIMISTIC_COMMENT",!0)),e(Object(Nn.l)("NEW_OPTIMISTIC_COMMENT",t))},setCommentAttachmentInProgress:t=>e(Object(Nn.C)(t))}))])(Qn),Zn=()=>a.a.createElement(Jn,{render:e=>a.a.createElement(Rn,{eventHandlers:e})}),Xn=s("./node_modules/reselect/lib/index.js"),ea=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),ta=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js");const sa=Object(Xn.createSelector)(ea.F,ta.y,cn.a,Object(ea.B)("timetracking"),D.f,(e,t,s,n,a)=>!(e||t||s||n||"EDIT_MODAL"===a));var na=s("./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js");function aa(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ia=hn(ln.b),ra=e=>{let{isEnabled:t}=e,s=aa(e,["isEnabled"]);return(a.a.createElement(na.a,null,e=>t&&0===e?a.a.createElement(ia,s):null))};ra.displayName="CommonClipboardMediaPicker";var oa=Nt()([Object(i.b)(e=>({isEnabled:sa(e)}),{})])(ra),ca=()=>a.a.createElement(Jn,{render:e=>a.a.createElement(oa,{eventHandlers:e})});function la(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ua=hn(ln.c);var da=Nt()([Object(i.b)(e=>({isEnabled:sa(e)}),{})])(e=>{const{isEnabled:t}=e,s=la(e,["isEnabled"]);return t?a.a.createElement(ua,s):null});class pa extends n.Component{getConfig(){return{container:this.props.container}}render(){return a.a.createElement(Jn,{render:e=>a.a.createElement(da,{config:this.getConfig(),eventHandlers:e})})}}pa.displayName="ServiceDeskDropzonePicker";function ma(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ba(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(s),!0).forEach((function(t){fa(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ma(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function fa(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ga={headless:!0};class ha extends n.Component{constructor(...e){super(...e),this.onPickerReady=e=>{this.picker=e,e.on("drag-enter",this.onDragEnter),e.on("drag-leave",this.onDragLeave),e.on("drop",this.onDrop)},this.onDragEnter=({length:e})=>{this.numAttachments!==e&&(this.numAttachments=e,this.props.onDragEnter(e))},this.onDragLeave=()=>{0!==this.numAttachments&&(this.numAttachments=0,this.props.onDragLeave())},this.onDrop=()=>{this.numAttachments=0,this.props.onDrop()},this.numAttachments=0,this.picker=void 0}getConfig(){return ba(ba({},ga),{},{container:this.props.container})}render(){return a.a.createElement(da,{config:this.getConfig(),onPickerReady:this.onPickerReady})}}ha.displayName="DropzoneMediaPicker";var ya=Nt()([Object(i.b)(()=>({}),e=>({onDragEnter:t=>e((e=>({type:"ATTACHMENT_PANEL_DRAG_ENTER",payload:e}))(t)),onDragLeave:()=>e((()=>({type:"ATTACHMENT_PANEL_DRAG_LEAVE"}))()),onDrop:()=>e((()=>({type:"ATTACHMENT_PANEL_DROP"}))())}))])(ha),Oa=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),ja=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),Ea=s("./src/packages/platform/utils/types/src/application.js"),va=s("./src/packages/platform/utils/types/src/edition.js");class ka extends n.Component{constructor(e){super(e),this.state={noErrorsAfterTimeout:!1,caughtError:!1}}componentDidMount(){this.props.isReady&&setTimeout(()=>{this.setState({noErrorsAfterTimeout:!0})},1e3)}shouldComponentUpdate(e,t){if(t.caughtError)return!0;if(!this.state.noErrorsAfterTimeout&&t.noErrorsAfterTimeout){const{experience:e,analyticsSource:t}=this.props,{application:s,edition:n}=this.getApplicationAndEdition();return Object(Oa.a)({experience:e,wasExperienceSuccesful:!0,analyticsSource:t,application:s,edition:n}),!1}return!(this.props.isReady||!e.isReady)&&(setTimeout(()=>{this.setState({noErrorsAfterTimeout:!0})},1e3),!0)}componentDidCatch(e){const{experience:t,analyticsSource:s}=this.props,{application:n,edition:a}=this.getApplicationAndEdition();Object(Oa.a)({experience:t,wasExperienceSuccesful:!1,analyticsSource:s,application:n,edition:a,additionalAttributes:{errorMessage:e.message||"unknown"}}),this.setState({caughtError:!0})}getApplicationAndEdition(){const{projectType:e}=this.props;if(null==e)return{application:null,edition:null};const t=Object(Ea.e)(e),s=ja.f&&Object(ja.f)(),n=s&&s.appEditions;return{application:t,edition:n?Object(va.f)(t,n):null}}render(){const{caughtError:e}=this.state;return e?null:this.props.children}}function wa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Sa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(s),!0).forEach((function(t){Ia(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wa(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ia(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}ka.displayName="AddAttachmentFrontendSlaTracker";const Ca=(e,t,s)=>{const n=s?s.type:"",a=Object(ja.j)(e,t,n);return{appKey:a(e),moduleKey:a(t),statusType:a(n)}},Ta=(e,t)=>{const s=Object(ja.j)(e,t);return{appKey:s(e),moduleKey:s(t)}},Pa=(e,t)=>Ta(e,t),_a=e=>e.map(e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name})),xa=e=>e.map(e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,type:e.type})),Da=e=>e.map(e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,type:e.type,showByDefault:e.showByDefault})),Aa=e=>e.map(e=>({name:e.name})),Ma=e=>"WEB_PANEL"===e.type,La=e=>"ISSUE_MODULE"===e.type;var Ra=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),Na=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js");class Ua extends n.Component{constructor(...e){super(...e),this.fireAnalytics=()=>{const{glances:e,contentPanels:t,activityPanels:s,operations:n,ecosystemCustomFieldIds:a}=this.props;this.props.ecosystemLoadedAnalytics(e,t,s,n,a.length)}}componentDidMount(){this.fireAnalytics()}componentDidUpdate(){this.fireAnalytics()}render(){return null}}Ua.displayName="EcosystemAnalyticsView";var Fa=Nt()(Object(Fs.a)(e=>({ecosystemLoadedAnalytics:(t,s,n,a,i)=>e("addons-loaded",((e=[],t=[],s=[],n=[],a=0)=>{const i={glances:xa(e),contentPanels:Da(t),activityPanels:_a(s),operations:Aa(n)},r=Object.keys(i).reduce((e,t)=>i[t]&&i[t].length?e+i[t].length:e,0),o=JSON.stringify(i);return{totalGlances:e.filter(La).length,totalLegacyGlances:e.filter(Ma).length,totalContentPanels:t.filter(La).length,totalLegacyContentPanels:t.filter(Ma).length,totalActivityPanels:s.length,totalOperations:n.length,totalCustomIssueFields:a,totalModules:r,data:Object(ja.j)(o)(o)}})(t,s,n,a,i))})),Object(i.b)(e=>({glances:Object(Ra.i)(e),contentPanels:Object(Ra.g)(e),activityPanels:Object(Ra.a)(e),operations:Object(Ra.j)(e),ecosystemCustomFieldIds:Object(Na.b)(e)}),{}),Object(Hs.a)())(Ua),Va=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js");const Ka=e=>{Object(Va.a)({name:"ac/create"}).then(()=>e(window.connectHost))};var Ba=()=>window.connectHost,Wa=s("./node_modules/@atlassian/connect-module-core/dist/es6/index.js"),Ha=s("./src/packages/common-legacy-do-not-add-anything-new/src/ecosystem/default-connect-iframe-provider.js"),Ga=s("./node_modules/@atlaskit/empty-state/dist/esm/EmptyState/index.js"),$a=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/error-state/assets/error.svg"),qa=s.n($a);const za=Object(j.defineMessages)({timeout:{id:"issue.content.ecosystem-panels.timeout",defaultMessage:"We're having trouble connecting to {appName}.\nTry contacting the developer for support."}}),Ya=e=>`https://marketplace.atlassian.com/plugins/${e}/cloud/support?rel="noopener noreferrer"`;class Qa extends n.Component{constructor(...e){super(...e),this.tertiaryAction=a.a.createElement(q.a,{appearance:"subtle-link",href:Ya(this.props.appKey),target:"_blank"},this.props.appName)}render(){const{appName:e,intl:t}=this.props;return(a.a.createElement(Ga.a,{size:"narrow",imageUrl:qa.a,maxImageWidth:80,maxImageHeight:80,isLoading:!1,description:t.formatMessage(za.timeout,{appName:e}),tertiaryAction:this.tertiaryAction}))}}Qa.displayName="TimeoutView",Qa.displayName="TimeoutView";var Ja=Object(j.injectIntl)(Qa);const Za=`${3*J.e}px`,Xa=Q.default.div(["margin-top:",";"],Za),ei=e=>{const{options:t,appKey:s,moduleKey:n,appName:i,options:{url:r},refreshedOn:o}=e,c=new Ha.a,l=o?`connect-iFrame-${s}-${n}-${o}`:`connect-iFrame-${s}-${n}`;return(a.a.createElement(Xa,null,a.a.createElement(Wa.a,{key:l,appKey:s,moduleKey:n,url:r,connectHost:Ba(),connectIframeProvider:c,options:c.convertConnectOptions(t),width:"100%",height:"100%",timeoutIndicator:()=>a.a.createElement(Ja,{appName:i,appKey:s})})))};ei.displayName="EcosystemModuleBase",ei.defaultProps={refreshedOn:0};const ti=e=>a.a.createElement(ei,e);ti.displayName="EcosystemModuleBaseWithoutRefresh";const si=Object(Hs.a)()(ti);var ni=Object(Ts.a)([Object(i.b)(e=>({refreshedOn:Object(_.d)(e)}),{})])(ei);const ai=Q.default.div(["display:none;"]);class ii extends n.Component{constructor(...e){super(...e),this.state={connectHost:null}}componentDidMount(){Ka(e=>this.setState({connectHost:e}))}render(){const{connectHost:e}=this.state,{scripts:t}=this.props;return e?a.a.createElement(ai,null,t.map(({appKey:e,moduleKey:t,options:s,shouldReloadOnRefresh:n})=>{const i=n?ni:si,r=`${e}-${t}`;return(a.a.createElement(i,{key:r,appKey:e,moduleKey:t,options:s,appName:r}))})):null}}ii.displayName="EcosystemBackgroundScriptsView";var ri=Object(Ts.a)([Object(i.b)(e=>({scripts:Object(Ra.h)(e)}),{})])(ii),oi=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js"),ci=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js"),li=s("./src/packages/issue/issue-view/src/actions/login-actions.js"),ui=s("./src/packages/issue/issue-view/src/views/issue-details/error/auth-error.svg"),di=s.n(ui);const pi=Q.default.div(["text-align:center;flex-direction:column;color:",";display:flex;justify-content:center;align-items:center;"],Je.a.N800),mi=Q.default.h2(["font-size:20px;font-weight:bold;margin-top:","px;margin-bottom:","px;max-width:100%;"],1.5*J.e,1.5*J.e),bi=Q.default.p(["max-width:100%;"]),fi=e=>a.a.createElement(pi,null,e.image,a.a.createElement(mi,null,e.header),a.a.createElement(bi,null,e.description),e.children);fi.displayName="ErrorDisplay",fi.defaultProps={description:void 0,children:null};var gi=fi;const hi=Object(j.defineMessages)({authErrorHeader:{id:"issue.text-for-header-in-authentication-error",defaultMessage:"Log in to Jira to see this issue"},authBtn:{id:"issue.text-for-login-button-in-authentication-error",defaultMessage:"Log in"}}),yi=Q.default.img(["width:160px;margin-bottom:14px;"]),Oi=Object(j.injectIntl)(e=>a.a.createElement(gi,{header:e.intl.formatMessage(hi.authErrorHeader),image:a.a.createElement(yi,{src:di.a,alt:""})},a.a.createElement(ci.a,{externalId:"issue.login",appearance:"primary",onClick:e.login},e.intl.formatMessage(hi.authBtn))));var ji=Object(i.b)(null,e=>({login:()=>e(Object(li.a)())}))(Oi),Ei=s("./src/packages/issue/issue-view/src/views/issue-details/error/permission-error.svg"),vi=s.n(Ei);const ki=Object(j.defineMessages)({permissionErrorHeader:{id:"issue.text-for-header-in-permission-error",defaultMessage:"You don't have access to this issue"},permissionErrorDescription:{id:"issue.text-for-description-in-permission-error",defaultMessage:"Make sure the issue exists in this project. If it does, ask a project admin for permission to see the project's issues."}}),wi=Q.default.img(["height:100px;width:145px;"]);var Si=Object(j.injectIntl)(({intl:e})=>a.a.createElement(gi,{header:e.formatMessage(ki.permissionErrorHeader),description:e.formatMessage(ki.permissionErrorDescription),image:a.a.createElement(wi,{src:vi.a,alt:""})})),Ii=s("./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error.svg"),Ci=s.n(Ii);const Ti=Object(j.defineMessages)({unknownErrorHeader:{id:"issue.text-for-header-in-generic-error",defaultMessage:"We couldn't connect to that issue"},unknownErrorDescription:{id:"issue.text-for-description-in-generic-error",defaultMessage:"Make sure that this issue actually exists in that project. If it does, try again in a few minutes. If you still can't link to the issue, contact your Jira admin."}}),Pi=Q.default.img(["height:130px;width:120px;"]);var _i=Object(j.injectIntl)(({intl:e})=>a.a.createElement(gi,{header:e.formatMessage(Ti.unknownErrorHeader),description:e.formatMessage(Ti.unknownErrorDescription),image:a.a.createElement(Pi,{src:Ci.a,alt:""})})),xi=s("./node_modules/lodash/isEqual.js"),Di=s.n(xi),Ai=s("./node_modules/lodash/throttle.js"),Mi=s.n(Ai),Li=s("./node_modules/@atlaskit/width-detector/dist/esm/WidthObserver/index.js"),Ri=(s("./node_modules/@atlaskit/width-detector/dist/esm/WidthDetector.js"),s("./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js"));function Ni(){return(Ni=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ui(e){return t=>{const[s,i]=Object(n.useState)(void 0),r=Mi()(i,50);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ri.a,null,a.a.createElement(Li.a,{setWidth:r})),a.a.createElement(e,Ni({},t,{containerWidth:s})))}}var Fi=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),Vi=s("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),Ki=s("./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js");const Bi="FORGE_ENTITY_TYPE",Wi="CONNECT_ENTITY_TYPE";var Hi=s("./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js"),Gi=s("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),$i=s("./src/packages/platform/utils/permalinks/src/index.js"),qi=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),zi=s("./src/packages/issue/project-context-service/src/main.js"),Yi=s("./src/packages/issue/issue-actions/activity-feed/src/messages.js");function Qi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ji(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(s),!0).forEach((function(t){Zi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Zi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Xi(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const er=Object(Q.default)(Ki.c)(["margin-top:","px;"],J.e/2);er.displayName="ActivityItemHeading";const tr=Q.default.div(["display:flex;"]),sr=e=>(t,s)=>{const n=t(s),{buttonStyles:a}=n;return Ji(Ji({},Xi(n,["buttonStyles"])),{},{buttonStyles:Ji(Ji({},a),{},{padding:`0 ${J.e/2}px 0 ${J.e/2}px`,margin:`0 ${J.e/2}px 0 ${J.e/2}px`,backgroundColor:e?Je.a.N400:Je.a.N20,"&:hover":{backgroundColor:e?Je.a.N400:Je.a.N30},"&:active":{backgroundColor:e?Je.a.N400:Je.a.B50}})})};var nr=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/DropdownMenuStateless.js"),ar=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/group/DropdownItemGroup.js"),ir=s("./src/packages/forge/forge-ui-analytics/src/services/issue-activity/index.js"),rr=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-activity/index.js"),or=s("./src/packages/forge/forge-ui/src/ui/extension-title/index.js");const cr=({item:e,component:t})=>{const s=t;return(a.a.createElement(s,null,a.a.createElement(or.a,{extensionName:e.name,extensionEnvType:e.extension.environmentType})))};cr.displayName="ForgeIssueActivityTrigger";const lr=({component:e,item:t,onClick:s,isSelected:i})=>{const r=e,o=Object(n.useCallback)((e,t)=>{Object(ir.a)(),s(e,t)},[s]);return a.a.createElement(rr.a,{shouldFireScreenEvent:!1},a.a.createElement(r,{onClick:o,isSelected:!!i},a.a.createElement(or.a,{extensionName:t.name,extensionEnvType:t.extension.environmentType})))};lr.displayName="ForgeIssueActivityView";var ur=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),dr=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/item/DropdownItem.js"),pr=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js");const mr=Q.default.span(["max-width:","px;display:inline-block;line-height:normal;vertical-align:text-bottom;",";"],20*J.e,pr.e);mr.displayName="DropdownTrigger";const br=Object(Q.default)(dr.a)(["min-width:","px;"],16*J.e);function fr(){return(fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}br.displayName="DropdownItem";const gr=({children:e,onClick:t})=>a.a.createElement(yr,{onClick:t},e);gr.displayName="DropdownItemComponent";const hr=({items:e,selectedItem:t,onSelectActivityItem:s})=>{const[i,r]=Object(n.useState)(!1),o=Object(n.useMemo)(()=>"FORGE_ENTITY_TYPE"===t.type?a.a.createElement(cr,{item:t,component:mr}):a.a.createElement(mr,null,t.name),[t]);return a.a.createElement(kn.a,{sourceType:wn.b,sourceName:"activityFeed"},a.a.createElement(Sn.a,{onMount:qi.d}),a.a.createElement(nr.a,{isOpen:i,onOpenChange:({isOpen:e},t)=>{r(e),Object(qi.h)(t,{isOpen:e})},trigger:o,triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",theme:sr(i)},position:"bottom left"},a.a.createElement(ar.a,null,e.filter(e=>e.key!==t.key).map(e=>{const t={key:e.key,onClick:(t,n)=>s(e,n,"dropdownItemSelected")};return"FORGE_ENTITY_TYPE"===e.type?a.a.createElement(lr,fr({},t,{component:gr,item:e})):a.a.createElement(gr,t,e.name)}))))};hr.displayName="ActivityFeedDropdown";const yr=Object(ur.a)("dropdownItem",{onClick:"clicked"})(br);function Or(){return(Or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const jr=({children:e,onClick:t,isSelected:s})=>a.a.createElement(q.a,{appearance:"subtle",spacing:"compact",isSelected:s,theme:sr(s),onClick:t},e);jr.displayName="ButtonComponent";const Er=({items:e,selectedItem:t,onSelectActivityItem:s})=>a.a.createElement(kn.a,{sourceType:wn.f,sourceName:"activityFeedButtons"},a.a.createElement(Sn.a,{onMount:e=>Object(qi.e)(e)}),e.map(e=>{const n={key:e.key,isSelected:t.key===e.key,onClick:(t,n)=>s(e,n,"buttonItemSelected")};return"FORGE_ENTITY_TYPE"===e.type?a.a.createElement(lr,Or({},n,{component:jr,item:e})):a.a.createElement(jr,n,e.name)}));Er.displayName="ActivityFeedButtons";var vr=s("./src/packages/platform/utils/types/src/general.js"),kr=s("./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js"),wr=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),Sr=s("./src/packages/issue/issue-view/src/common/state/selectors/reactions-selector.js"),Ir=s("./src/packages/issue/issue-view/src/drafts/draft-utils.js"),Cr=s("./src/packages/issue/issue-view/src/selectors/issue-remote-data-selector.js");const Tr=Object(Xn.createSelector)(Cr.a,e=>e),Pr=Object(Xn.createSelector)(_.I,e=>e.drafts),_r=e=>Object(Xn.createSelector)(Pr,t=>!!t[e]);var xr=s("./node_modules/@atlaskit/avatar--next/dist/esm/Avatar.js"),Dr=s("./node_modules/@atlaskit/comment/dist/esm/components/ActionItem.js"),Ar=s("./node_modules/@atlaskit/comment/dist/esm/components/Edited.js"),Mr=s("./node_modules/@atlaskit/comment/dist/esm/components/Comment.js"),Lr=s("./node_modules/@atlaskit/comment/dist/esm/components/Author.js"),Rr=s("./src/packages/platform/observability/browser-metrics/src/index.js"),Nr=s("./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js"),Ur=s("./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js"),Fr=s("./src/packages/issue/issue-view/src/common/component/timestamp/index.js"),Vr=Object(j.defineMessages)({draftIndicator:{id:"issue.draft-indicator-for-multiline-field",defaultMessage:"Unsaved changes"}}),Kr=s("./src/packages/issue/issue-view/src/common/model/comment-type.js"),Br=s("./src/packages/issue/issue-view/src/common/util/scroll/index.js"),Wr=s("./src/packages/issue/issue-view/src/views/common/with-profilecard-next/index.js");const Hr={TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.assignee.time-to.render-initial-suggestions",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.assignee.time-to.reflect-input-results",TIME_TO_REFLECT_SELECTED:"jira.fe.issue.fields.assignee.time-to.reflect-selected",TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT:"jira.fe.issue.fields.assignee.time-to.assign-to-me-via-shortcut"},Gr={TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.summary.time-to.render-edit-view",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.summary.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.summary.time-to.render-read-view-on-cancel"},$r={TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.labels.time-to.render-initial-suggestions",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.labels.time-to.reflect-input-results",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.labels.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.labels.time-to.render-read-view-on-cancel",TIME_TO_REFLECT_SELECTED_EXISTING:"jira.fe.issue.fields.labels.time-to.reflect-selected-existing",TIME_TO_REFLECT_SELECTED_NEW:"jira.fe.issue.fields.labels.time-to.reflect-selected-new",TIME_TO_REFLECT_REMOVED_EXISTING:"jira.fe.issue.fields.labels.time-to.reflect-removed-existing"},qr={TIME_TO_REFLECT_SELECTED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.reflect-selected-issue",TIME_TO_REFLECT_REMOVED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.reflect-removed-issue",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.issue-links.time-to.reflect-input-results",TIME_TO_RENDER_LINKED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.render-linked-issue",TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT:"jira.fe.issue.fields.issue-links.time-to.render-new-linked-issue-input"},zr={TIME_TO_REFLECT_SELECTED_SPRINT:"jira.fe.issue.fields.sprint.time-to.reflect-selected-sprint",TIME_TO_REFLECT_REMOVED_SPRINT:"jira.fe.issue.fields.sprint.time-to.reflect-removed-sprint",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.sprint.time-to.reflect-input-results",TIME_TO_RENDER_READ_VIEW:"jira.fe.issue.fields.sprint.time-to.render-read-view",TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.sprint.time-to.render-initial-suggestions"},Yr={TIME_TO_RENDER_READ_VIEW:"jira.fe.issue.fields.priority.time-to.render-read-view",TIME_TO_RENDER_SUGGESTIONS:"jira.fe.issue.fields.priority.time-to.render-suggestions",TIME_TO_REFLECT_PRIORITY_UPDATE:"jira.fe.issue.fields.priority.time-to.reflect-priority-update"},Qr={TIME_TO_RENDER_NEW_COMMENT_EDITOR:"jira.fe.issue.fields.comments.time-to.render-new-comment-editor",TIME_TO_RENDER_SAVED_COMMENT:"jira.fe.issue.fields.comments.time-to.render-saved-comment"},Jr={TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.description.time-to.render-edit-view",TIME_TO_SAVE_UPDATED_DESCRIPTION:"jira.fe.issue.field.description.time-to.save-updated-description",TIME_TO_SAVE_UNCHANGED_DESCRIPTION:"jira.fe.issue.field.description.time-to.save-unchanged-description"},Zr={TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED:"jira.fe.issue.fields.epic-link.time-to.fetch-input-results.epic-picker-enabled",TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_DISABLED:"jira.fe.issue.fields.epic-link.time-to.fetch-input-results.epic-picker-disabled"};var Xr=s("./src/packages/issue/issue-view/src/activity/common/messages.js"),eo=s("./src/packages/issue/issue-view/src/activity/common/styles/index.js");const to=({children:e,fallback:t,packageName:s})=>a.a.createElement(R.a,{id:"issue-comment-reactions",packageName:s,render:()=>t},a.a.createElement(Oe.a,{fallback:t},e));to.displayName="IssueCommentReactionsBoundary";var so=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),no=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),ao=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js");const io=async(e,t)=>{const{errors:s,data:n}=await Object(no.a)(e).query({query:"\nquery CommentVisibilitiesQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        commentVisibilities {\n            type\n            value\n        }\n    }\n}\n",variables:{issueKey:t}});if(s)throw new Error("GraphqlErrorResponse");if(n&&n.viewIssue&&n.viewIssue.commentVisibilities){return(e=>e.map(ao.d))(n.viewIssue.commentVisibilities)}throw new Error("GraphqlNullData")};var ro={fetch:()=>async({getState:e,setState:t},{issueKey:s,baseUrl:n,createAnalyticsEvent:a})=>{const i=e();if(!(i.loading||i.error||i.data)){t({loading:!0,error:null,data:null});try{const e=await io(n,s);t({loading:!1,error:null,data:{commentVisibilities:e}}),((e,t)=>{const s=e({action:"fetched"}),n={totalCount:t.length,roleCount:t.filter(e=>"role"===e.type).length,groupCount:t.filter(e=>"group"===e.type).length};Object(qi.c)(s,"commentVisibilities fetched",n)})(a,e)}catch(e){(e=>{const t="GraphqlErrorResponse"===e.message||"GraphqlNullData"===e.message?e.message:"other";Object(so.a)("issue.fetch.comment-visibilities","An error occurred attempting to fetch comment visibilities from gira",e,{errorReason:t})})(e),t({loading:!1,error:e,data:null})}}}};var oo=Object(k.d)({name:"issue-view-comment-visibilities",initialState:{data:null,loading:!1,error:null},actions:ro}),co=Object(k.e)(oo,{displayName:"CommentVisibilitiesSubscriber"}),lo=s("./node_modules/lodash/countBy.js"),uo=s.n(lo),po=s("./node_modules/lodash/isEmpty.js"),mo=s.n(po),bo=s("./node_modules/@atlaskit/icon/glyph/check.js"),fo=s.n(bo),go=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),ho=s.n(go),yo=s("./node_modules/@atlaskit/icon/glyph/unlock.js"),Oo=s.n(yo),jo=s("./node_modules/@atlaskit/select/dist/esm/PopupSelect/PopupSelect.js"),Eo=s("./node_modules/@atlaskit/color-picker--current/node_modules/react-select/dist/chunk-80640036.browser.esm.js"),vo=Object(j.defineMessages)({publicTooltip:{id:"comment-visibility.button.public-tooltip",defaultMessage:"Visible to all users"},optionsTooltip:{id:"comment-visibility.button.options-tooltip",defaultMessage:"Only visible to {value}"}});const ko=Q.default.div(["display:flex;align-items:center;",";"],e=>e.removeIconMargin?`margin: 0 ${-J.e/2}px;`:null),wo=Q.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:250px;"]);function So(){return(So=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Io(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Co(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(s),!0).forEach((function(t){To(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Io(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function To(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Po(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const _o=(e,t)=>{const s=e(t),{buttonStyles:n}=s,a=Po(s,["buttonStyles"]);return Co({buttonStyles:Co(Co({},n),{},{maxWidth:"300px"})},a)},xo=({selectedOption:e,isSelected:t})=>{const s="public"===e.type,n=s?Oo.a:ho.a,i=s?a.a.createElement(j.FormattedMessage,vo.publicTooltip):a.a.createElement(j.FormattedMessage,So({},vo.optionsTooltip,{values:{value:e.value}}));return a.a.createElement(Ae.a,{content:i,position:"left"},a.a.createElement(q.a,{spacing:"default",theme:_o,isSelected:t,shouldFitContainer:!0,iconBefore:a.a.createElement(ko,{removeIconMargin:!s},a.a.createElement(n,{label:""}))},!s&&a.a.createElement(wo,null,e.value)))};xo.displayName="TargetButton";var Do=xo,Ao=Object(j.defineMessages)({errorMessage:{id:"issue.activity.comment.comment-visibility.error-image.messages.errorMessage",defaultMessage:"We couldn't load the visibility options"}}),Mo=s("./src/packages/issue/issue-view/src/activity/comment/comment-visibility/assets/Error.svg"),Lo=s.n(Mo);const Ro=Q.default.div(["width:","px;"],25*J.e),No=Q.default.div(["width:","px;height:","px;margin:12px 0;background:center no-repeat url(",");"],10*J.e,10*J.e,Lo.a),Uo=Q.default.div(["display:flex;flex-direction:column;align-items:center;"]),Fo=Q.default.p(["color:",";text-align:center;"],Je.a.N200),Vo=({intl:e})=>a.a.createElement(Ro,null,a.a.createElement(Uo,null,a.a.createElement(No,null),a.a.createElement(Fo,null,e.formatMessage(Ao.errorMessage))));Vo.displayName="ErrorImage";var Ko=Object(j.injectIntl)(Vo),Bo=Object(j.defineMessages)({visibleToAllUsers:{id:"comment-visibility.visible-to-all-users",defaultMessage:"Visible to all users"},projectRolesLabel:{id:"comment-visibility.project-roles-label",defaultMessage:"Project roles"},groupsLabel:{id:"comment-visibility.groups-label",defaultMessage:"Groups"}});const Wo=(e,t)=>e.value===t.value&&e.type===t.type;function Ho(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Go(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ho(Object(s),!0).forEach((function(t){$o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ho(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const qo=(e,t,s)=>e.filter(e=>e.type===s).map(e=>Go(Go({},e),{},{selected:!!e&&Wo(e,t)})),zo=e=>({label:"",options:[Go(Go({},Kr.a),{},{selected:"public"===e.type})]}),Yo=Q.default.div(["display:flex;justify-content:center;align-items:center;height:","px;"],18*J.e),Qo=()=>a.a.createElement(Yo,null,a.a.createElement(z.a,null));Qo.displayName="LoadingSpinner";const Jo=Q.default.div(["display:flex;justify-content:left;align-items:center;"]),Zo=Q.default.span(["padding:0 5px 0 0;flex-shrink:0;max-height:","px;"],3*J.e),Xo=Q.default.span(["margin-left:","px;max-height:","px;"],J.e/2,3*J.e),ec=Q.default.div(["font-size:11px;font-weight:initial;padding-top:4px;"]),tc=Q.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),sc=Q.default.div(["display:flex;justify-content:center;padding:","px;"],2*J.e),nc=Q.default.div(["min-width:","px;margin-left:","px;"],4.5*J.e,J.e/2);function ac(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ic(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ac(Object(s),!0).forEach((function(t){rc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ac(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function rc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const oc=({label:e})=>e&&a.a.createElement(ec,null,e),cc={container:e=>ic(ic({},e),{},{paddingBottom:"0",paddingTop:"0"}),group:e=>ic(ic({},e),{},{paddingBottom:"4px",paddingTop:"0"}),option:(e,{data:{selected:t},isFocused:s})=>{const n=s?Je.a.N20:e.backgroundColor,a=t?Je.a.B50:n;return ic(ic({},e),{},{backgroundColor:a})}},lc={placement:"bottom-end",modifiers:{offset:{offset:`0, ${J.e}px`},preventOverflow:{escapeWithReference:!0},setZIndex:{enabled:!0,order:890,fn:e=>ic(ic({},e),{},{styles:ic(ic({},e.styles),{},{zIndex:J.f.modal})})}}},uc=Object(ur.a)("commentVisibilitySelect",{onOpen:"opened",onChange:"changed"})(jo.a),dc=({value:e,selected:t,isPublic:s})=>{const n=s?Oo.a:ho.a;return(a.a.createElement(Ae.a,{content:e,delay:2e3},a.a.createElement(Jo,null,a.a.createElement(Zo,null,a.a.createElement(n,{label:""})),a.a.createElement(tc,null,e),a.a.createElement(Xo,null,t?a.a.createElement(fo.a,{primaryColor:Je.a.B500,label:""}):null))))};dc.displayName="OptionLabel";const pc=({isLoading:e,options:t,initialValue:s,onChange:i,error:r,intl:{formatMessage:o}})=>{const c=e||r,[l,u]=Object(n.useState)(s),[d,p]=Object(n.useState)(!1),m=Object(n.useCallback)(()=>p(!0),[]),b=Object(n.useCallback)(()=>p(!1),[]),f="public"===s.type;if((c||mo()(t))&&f)return null;const g=c||null==t?((e,t,s)=>{const n=[zo(t)];if(e){const a=e.type===t.type&&e.value===t.value;n.push({label:"group"===e.type?s(Bo.groupsLabel):s(Bo.projectRolesLabel),options:[Go(Go({},e),{},{selected:a})]})}return n})(s,l,o):((e,t,s)=>[zo(s),{label:t(Bo.projectRolesLabel),options:qo(e,s,"role")},{label:t(Bo.groupsLabel),options:qo(e,s,"group")}])(t,o,l),h=c?{MenuList:e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Eo.z.MenuList,e,e.children),a.a.createElement(sc,null,r?a.a.createElement(Ko,null):a.a.createElement(Qo,null)))}:void 0;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Sn.a,{onMount:e=>Object(qi.b)(e,"commentVisibilitySelect rendered")}),a.a.createElement(nc,null,a.a.createElement(uc,{onClose:b,onOpen:e=>{m();const s=uo()(t,"type");Object(qi.h)(e,"commentVisibilityView",{roleCount:s.role||0,groupCount:s.group||0,totalCount:null==t?1:t.length+1})},maxMenuWidth:300,minMenuWidth:175,maxMenuHeight:340,formatOptionLabel:({type:e,value:t,selected:s})=>{const n="public"===e;return(a.a.createElement(dc,{isPublic:n,selected:s,value:n?o(Bo.visibleToAllUsers):t}))},popperProps:lc,components:h,styles:cc,formatGroupLabel:oc,options:g,target:({ref:e})=>a.a.createElement("div",{ref:e},a.a.createElement(Do,{selectedOption:l,isSelected:d})),isLoading:e,error:r,onChange:(e,t,s)=>{(e=>{i(e),u(e)})((({type:e,value:t})=>({type:e,value:t}))(e)),Object(qi.h)(s,"commentVisibilityView")},isSearchable:null!=t&&t.length+1>30,searchThreshold:30})))};var mc=Object(Ts.a)([j.injectIntl])(e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Sn.a,{onMount:t=>{Object(qi.b)(t,"commentVisibilitySelect mounted",{isLoading:e.isLoading})}}),a.a.createElement(pc,e)));const bc=({initialValue:e,onChange:t})=>a.a.createElement(co,null,({loading:s,error:n,data:i})=>a.a.createElement(mc,{initialValue:e,onChange:t,isLoading:s,error:n,options:i?i.commentVisibilities:null}));bc.displayName="CommentVisibilitySelect";var fc=Object(Hs.a)()(bc),gc=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/html-view.js"),hc=s("./src/packages/issue/issue-view/src/activity/comment/comment-view/content/styled.js");const yc=({isEditing:e,bodyHtml:t})=>a.a.createElement(hc.a,null,e?null:a.a.createElement(gc.a,{html:t}));yc.displayName="PreviewCommentContent";var Oc=Object(Hs.a)()(Object(j.injectIntl)(yc));const jc=({bodyHtml:e})=>a.a.createElement(Oc,{bodyHtml:e,isEditing:!1});jc.displayName="IssueCommentEditorReadonly";const Ec=({children:e,fallback:t,packageName:s})=>a.a.createElement(R.a,{id:"issue-comment-editor",packageName:s,render:()=>t},a.a.createElement(Oe.a,{fallback:t},e));Ec.displayName="IssueCommentEditorBoundary";const vc=Object(j.defineMessages)({edit:{id:"issue.text-for-edit-comment-action",defaultMessage:"Edit"},delete:{id:"issue.text-for-delete-comment-action",defaultMessage:"Delete"},edited:{id:"issue.text-for-edited-comment-flag",defaultMessage:"Edited"},retrySave:{id:"issue.text-for-retry-save-comment-action",defaultMessage:"Retry"},cancelSave:{id:"issue.text-for-cancel-save-comment-action",defaultMessage:"Cancel"},saving:{id:"issue.text-for-save-comment-sending",defaultMessage:"Saving..."},confirmationHeader:{id:"issue.confirm-delete-comment-modal-header",defaultMessage:"Delete this comment?"},confirmationContent:{id:"issue.confirm-delete-comment-modal-text",defaultMessage:"Once you delete, it's gone for good."},confirmationActionText:{id:"issue.confirm-delete-comment-action-text",defaultMessage:"Delete"},internalNote:{id:"issue.internal-comment-distinguishing-text",defaultMessage:"Internal note"},copy:{id:"issue.activity.comment.comment-items.comment-item.copy",defaultMessage:"Copy link to comment"}}),kc={inner:{paddingTop:J.e,paddingBottom:J.e/2,paddingLeft:J.e},outer:{paddingTop:28}},wc=Q.default.div(["border-radius:","px;padding:","px 0 ","px ","px;margin:","px 0 -","px -","px;",";"],J.e/2,kc.inner.paddingTop,kc.inner.paddingBottom,kc.inner.paddingLeft,kc.outer.paddingTop-kc.inner.paddingTop,kc.inner.paddingBottom,kc.inner.paddingLeft,e=>e.isEditing?"":`background-color: ${e.highlightColor};`),Sc=Q.default.div(["height:","px;margin-left:-7px;margin-bottom:4px;"],2.5*J.e),Ic=Q.default.div(["padding-top:","px;&:first-child,&:first-of-type{padding:0;}"],3.5*J.e);J.e;function Cc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Cc(Object(s),!0).forEach((function(t){Pc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Cc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Pc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function _c(){return(_c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const xc=Object(Oe.f)(()=>s.e("async-comment-reactions").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-reactions/index.js")),{moduleId:"./src/packages/issue/issue-view/src/activity/comment/comment-reactions/index.js"}),Dc=Object(Oe.f)(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-view/content/index.js")),{moduleId:"./src/packages/issue/issue-view/src/activity/comment/comment-view/content/index.js"});class Ac extends n.Component{constructor(...e){super(...e),this.onDeleteConfirm=()=>{const{createAnalyticsEvent:e,getOnDeleteConfirm:t}=this.props;return t(e({action:"deleted"}))},this.onEditClick=(e,t)=>{const{getOnEditClick:s,isInternal:n,hasDraft:a}=this.props;s(n),Object(qi.b)(t,"editCommentEditor expanded",{hasDraft:a})},this.onEditSave=e=>{if(!Object(L.f)(e)){const{author:t,commentId:s,createdDate:n,bodyHtml:a,shouldShowCommentVisibility:i,visibility:r,visibilityEdited:o,getOnEditSave:c,createAnalyticsEvent:l}=this.props,u=t?t.id:null,d=l({action:"updated"});i&&d.update({isVisibilityUpdated:!Wo(r,o)}),c({authorId:u,createdDate:n,bodyAdf:e,bodyHtml:a,isNewComment:s.includes("NEW_OPTIMISTIC_COMMENT"),visibility:o},d)}},this.getAuthorDisplayName=e=>e?e.displayName:this.props.intl.formatMessage(Xr.a.anonymous),this.getCommentReactions=()=>a.a.createElement(Sc,null,a.a.createElement(to,{packageName:"issue",fallback:a.a.createElement(a.a.Fragment,null)},a.a.createElement(xc,{commentId:this.props.commentId}))),this.getCommentActions=()=>[this.props.canEdit&&a.a.createElement(Dr.a,{onClick:this.onEditClick},this.props.intl.formatMessage(vc.edit),this.props.hasDraft?` (${this.props.intl.formatMessage(Vr.draftIndicator)})`:""),this.props.canDelete&&a.a.createElement(Dr.a,{onClick:this.props.onDeleteClick},this.props.intl.formatMessage(vc.delete)),this.props.showReactions&&this.getCommentReactions()].filter(e=>!!e),this.getCommentSaveFailedActions=()=>[a.a.createElement(Dr.a,{key:"retry",onClick:this.props.onSaveRetry},this.props.intl.formatMessage(vc.retrySave)),a.a.createElement(Dr.a,{key:"edit",onClick:this.props.onSaveEdit},this.props.intl.formatMessage(vc.edit)),a.a.createElement(Dr.a,{key:"cancel",onClick:this.props.onSaveCancel},this.props.intl.formatMessage(vc.cancelSave))].filter(e=>!!e),this.getCommentContent=()=>{const{bodyAdf:e,bodyHtml:t,commentId:s,isOptimistic:n,isEditing:i,onEditCancel:r,onEditUpdate:o,onEditPaste:c,onBlur:l,visibilityEdited:u,onCommentVisibilityChange:d,shouldShowCommentVisibility:p}=this.props,m={bodyHtml:t,commentId:s,isEditing:i,secondaryToolbarComponents:p?[a.a.createElement(fc,{key:"commentVisibilitySelector",initialValue:u,onChange:d})]:null,onCancel:r,onChange:o,onSave:this.onEditSave,onPaste:c,onBlur:l,isLoading:n};return a.a.createElement(Ec,{packageName:"issue",fallback:a.a.createElement(jc,{bodyHtml:m.bodyHtml})},a.a.createElement(Dc,_c({},m,{bodyAdf:e})))},this.getCommentTime=()=>a.a.createElement(Fr.b,{value:this.props.createdDate,timeZone:this.props.timeZone,tooltipPosition:"top",extraStyles:eo.a}),this.getCommentEditedToolTip=()=>{const{intl:e}=this.props,t=a.a.createElement(j.FormattedMessage,_c({},Xr.a.editedBy,{values:{author:this.getAuthorDisplayName(this.props.updateAuthor),timestamp:a.a.createElement(Fr.b,{value:this.props.updatedDate,timeZone:this.props.timeZone})}}));return a.a.createElement(Ae.a,{content:t,position:"top"},a.a.createElement(Ar.a,null,e.formatMessage(vc.edited)))},this.getFormattedGridContainer=(e,t)=>a.a.createElement(eo.f,null,a.a.createElement(eo.e,null,e),t?a.a.createElement(eo.e,null,t):null),this.getPermalinkIcon=e=>{const{commentId:t,fullIssueUrl:s,onCopyClick:n,intl:{formatMessage:i}}=this.props;return(a.a.createElement(Nr.a,{id:t,fullIssueUrl:`${s}?focusedCommentId=${t}`,label:i(vc.copy),onCopyClick:n,isVisible:e.isVisible}))},this.renderEditedOld=()=>this.props.edited?this.getCommentEditedToolTip():null,this.getEditingAndRestrictedTo=(e,t)=>{const{isEditing:s,hasSaveFailed:n,isOptimistic:a}=this.props,i=this.getPermalinkIcon(t),r=e.length>0;if(a&&!n)return{restrictedTo:null,edited:null};const o=r?this.getFormattedGridContainer(e,i):null,c=r?null:i,l=this.getCommentEditedToolTip();return s?{restrictedTo:null,edited:this.props.edited?l:null}:this.props.edited?{restrictedTo:o,edited:this.getFormattedGridContainer(l,c)}:{restrictedTo:o,edited:c}},this.renderComment=e=>{const{author:t,isOptimistic:s,hasSaveFailed:n,hasDeleteModal:i,onDeleteCancel:r,isEditing:o,isHighlighted:c,isInternal:l}=this.props;return(a.a.createElement(Ur.a,null,u=>{const{restrictedTo:d,edited:p}=s?{}:this.getEditingAndRestrictedTo(e,u),m=a.a.createElement(Mr.a,{avatar:a.a.createElement(Wr.a,{userAccount:t,analyticsData:{trigger:"comment-avatar"}},a.a.createElement(xr.a,{borderColor:"transparent",src:t&&t.avatarUrl,size:"medium"})),author:a.a.createElement(Wr.a,{userAccount:t,analyticsData:{trigger:"comment-author"}},a.a.createElement(Lr.a,null,this.getAuthorDisplayName(t))),time:this.getCommentTime(),edited:s?this.renderEditedOld():p,content:a.a.createElement("div",null,this.getCommentContent(),i&&a.a.createElement(Kt.b,{appearance:"danger",headerMessage:this.props.intl.formatMessage(vc.confirmationHeader),contentMessage:this.props.intl.formatMessage(vc.confirmationContent),confirmActionText:this.props.intl.formatMessage(vc.confirmationActionText),onConfirm:this.onDeleteConfirm,onCancel:r,externalId:"issue.comment.delete"})),restrictedTo:s?e:d,actions:s||o?[]:this.getCommentActions(),isError:n&&!o,errorActions:this.getCommentSaveFailedActions(),isSaving:s&&!n,savingText:this.props.intl.formatMessage(vc.saving),highlighted:!l&&!o&&c});return s?m:a.a.createElement(Ic,{onMouseEnter:u.show,onMouseLeave:u.hide,onFocus:u.show,onBlur:u.hide},a.a.createElement("span",{ref:this.setCommentPermalinkContainer},m))}))},this.renderInternalComment=()=>{const{visibility:e,intl:t,isEditing:s,isHighlighted:n}=this.props,i=n?Je.a.Y75:Je.a.Y50,r="public"===e.type?`${t.formatMessage(vc.internalNote)}`:`${e.value} \u2022 ${t.formatMessage(vc.internalNote)}`;return(a.a.createElement(wc,{isEditing:s,highlightColor:i},this.renderComment(r)))},this.setCommentPermalinkContainer=e=>{this.commentPermalinkContainer=e},this.commentPermalinkContainer=void 0,this.scrollCommentIntoView=()=>{const{isHighlighted:e,hasScrolledPermalink:t,hasLoadedAllAsyncComponents:s,setScrollStatus:n,createAnalyticsEvent:a}=this.props;if(e&&!t&&s){Object(Br.b)(this.commentPermalinkContainer,{scrollMode:"always",behavior:"smooth"}),n(!0);const e=a({action:"scrolled"});Object(qi.h)(e,"permalink comment",{name:"comment"})}}}componentDidMount(){this.props.isOptimistic?Object(Rr.c)().markTimeToFeedback({key:Qr.TIME_TO_RENDER_SAVED_COMMENT}):Object(Rr.c)().markTimeToFinishTask({key:Qr.TIME_TO_RENDER_SAVED_COMMENT}),this.scrollCommentIntoView()}shouldComponentUpdate(e){if(!this.props.hasLoadedAllAsyncComponents&&e.hasLoadedAllAsyncComponents||!this.props.hasScrolledPermalink&&e.hasScrolledPermalink){const t=Tc(Tc({},this.props),{},{hasLoadedAllAsyncComponents:e.hasLoadedAllAsyncComponents,hasScrolledPermalink:e.hasScrolledPermalink});if(Object(ja.h)(t,e))return e.isHighlighted&&!e.hasScrolledPermalink}return!0}componentDidUpdate(){this.scrollCommentIntoView()}render(){const{visibility:e,isInternal:t}=this.props;return t?this.renderInternalComment():this.renderComment(e.value)}}function Mc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Lc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mc(Object(s),!0).forEach((function(t){Rc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Rc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Ac.displayName="Comment",Ac.displayName="Comment",Ac.defaultProps={isEditing:!1,visibility:Kr.a,updatedDate:null,edited:!1};var Nc=Object(Ts.a)([j.injectIntl,Object(Vs.a)("issueFields",{onEditSave:"updated",onDeleteConfirm:"deleted",onScrolledToPermalink:"scrolled"}),Object(E.a)({onCopyClick:"copyCommentUrl"}),Object(i.b)((e,{commentId:t})=>e=>({bodyAdf:Object(ta.j)(t)(e),bodyHtml:Object(ta.f)(t)(e),hasDraft:_r(Object(Ir.a)(t))(e),author:Object(ta.e)(t)(e),updateAuthor:Object(ta.q)(t)(e),createdDate:Object(ta.g)(t)(e),updatedDate:Object(ta.r)(t)(e),edited:Object(ta.h)(t)(e),isOptimistic:Object(ta.o)(t)(e),hasSaveFailed:Object(ta.p)(t)(e),canEdit:Object(ta.d)(t)(e),isEditing:Object(ta.B)(t)(e),canDelete:Object(ta.c)(t)(e),hasDeleteModal:Object(ta.m)(t)(e),visibility:Object(ta.s)(t)(e),visibilityEdited:Object(ta.k)(t)(e),isInternal:Object(ta.D)(t)(e),showReactions:Object(Sr.b)(e),timeZone:Object(_.z)(e),shouldShowCommentVisibility:Object(ta.z)(e),hasLoadedAllAsyncComponents:Tr(e),hasScrolledPermalink:Object(ta.v)(e)}),(e,{commentId:t})=>({getOnEditClick:s=>e(Object(Nn.i)(t,s)),onEditCancel:()=>e(Object(Nn.j)(t)),onEditUpdate:s=>e(Object(Nn.l)(t,s)),onEditPaste:s=>e(Object(Nn.u)(t,s)),onBlur:()=>e(Object(Nn.k)(t)),getOnEditSave:(s,n)=>e(Object(Nn.y)(Lc({id:t},s),n)),onCommentVisibilityChange:s=>{e(Object(Nn.m)(t,s))},onDeleteClick:()=>e(Object(Nn.E)(t)),getOnDeleteConfirm:s=>e(Object(Nn.g)(t,s)),onDeleteCancel:()=>e(Object(Nn.e)()),onSaveRetry:()=>e(Object(Nn.z)(t,(new Date).toISOString(),(e=>e.includes("NEW_OPTIMISTIC_COMMENT"))(t))),onSaveEdit:()=>e(Object(Nn.w)(t)),onSaveCancel:()=>e(Object(Nn.v)(t)),setScrollStatus:t=>e(Object(Nn.D)(t))}),(e,t,s)=>Lc(Lc(Lc({},e),t),s))])(Ac),Uc=Object(k.b)(oo,{displayName:"CommentVisibilitiesContainer"});function Fc(){return(Fc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var Vc=e=>t=>{const{baseUrl:s,issueKey:n,shouldFetchCommentVisibilities:i,createAnalyticsEvent:r}=t;return(a.a.createElement(Uc,{baseUrl:s,issueKey:n,createAnalyticsEvent:r},a.a.createElement(co,null,(s,{fetch:n})=>a.a.createElement(e,Fc({},t,{fetchCommentVisibilities:i?n:void 0})))))},Kc=s("./node_modules/@atlaskit/onboarding/dist/esm/components/SpotlightTarget.js"),Bc=s("./src/packages/platform/services/refs-store/src/index.js"),Wc=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),Hc=s("./src/packages/issue/issue-view/src/activity/comment/servicedesk-comment-editor-container/index.js");const Gc=Q.default.button(["text-align:left;color:grey;font:inherit;background:white;width:100%;height:40px;padding-left:","px;padding-right:","px;padding-top:","px;padding-bottom:","px;border:1px solid ",";border-radius:","px;box-sizing:border-box;"],2.5*J.e,2.5*J.e,1.5*J.e,1.5*J.e,Je.a.N40,J.a),$c=Q.default.div(["display:flex;justify-content:space-between;align-items:center;height:14px;padding-top:1px;letter-spacing:-0.005em;"]),qc=Q.default.span(["padding-top:","px;"],J.e/2),zc=Q.default.div(["text-align:center;"]);class Yc extends n.Component{constructor(...e){super(...e),this.state={changed:!1},this.onClick=()=>{this.props.onExpanded(),this.setState({changed:!0})}}static getServiceDeskFallbackEditor(){return a.a.createElement(zc,null,a.a.createElement(z.a,{size:"medium"}))}getGeneralFallbackEditor(){return a.a.createElement(Gc,{onClick:this.onClick},a.a.createElement($c,null,this.props.placeholder,this.state.changed&&a.a.createElement(qc,null,a.a.createElement(z.a,{size:"small"}))))}render(){return this.props.isServiceDesk?Yc.getServiceDeskFallbackEditor():this.getGeneralFallbackEditor()}}Yc.displayName="FallbackAddCommentEditor",Yc.defaultProps={placeholder:"",onExpanded:o.a};const Qc=Object(Ts.a)([Object(i.b)(e=>({isServiceDesk:Object(P.v)(e)}),{})])(Yc),Jc=({children:e,fallback:t,packageName:s})=>a.a.createElement(R.a,{id:"issue-add-comment-editor",packageName:s,render:()=>t},a.a.createElement(Oe.a,{fallback:t},e));Jc.displayName="IssueAddCommentEditorBoundary";const Zc=Object(j.defineMessages)({placeholder:{id:"issue.placeholder-for-empty-comment-editor",defaultMessage:"Add a comment\u2026"},draftPlaceholder:{id:"issue.draft-placeholder-for-empty-comment-editor",defaultMessage:"You have an unsaved comment"},commentShortcutHintHeading:{id:"issue.comment.shortcut-hint-pro-tip-text",defaultMessage:"Pro tip:"},commentShortcutHintMessage:{id:"issue.comment.shortcut-hint-message-with-pro-tip-text",defaultMessage:"{proTipText} press {shortcutKey} to comment"}});var Xc=s("./node_modules/@atlaskit/modal-dialog/dist/esm/styled/Content.js");const el=Q.default.small(["color:",";display:block;margin-top:","px;white-space:nowrap;font-size:12px;line-height:1.33333333333333;"],Je.a.N200,J.e),tl=Object(Q.css)(["@supports (position:sticky) or (position:-webkit-sticky){position:sticky;z-index:10;transition:transform 0.3s cubic-bezier(0.86,0,0.07,1) 0.1s;transform:translate(0,",");bottom:-1px;background:white;padding-left:","px;margin-left:-","px;"," &{bottom:-2px;}","}"],e=>e.isHidden?"100px":"0",J.e,J.e,Xc.c.toString(),e=>e.isHidden?(()=>Object(Wc.c)()?"":"display: contents")():""),sl=Object(Q.css)(["@supports (position:sticky) or (position:-webkit-sticky){box-shadow:inset 0 2px 0 0 ",";margin-top:",";}"],Je.a.N30,Za),nl=Q.default.div(["",";"],e=>e.isSticky&&tl),al=Q.default.div(["display:flex;padding-top:","px;padding-bottom:","px;background:white;",""],2*J.e,2*J.e,e=>e.isSticky?sl:""),il=Q.default.div(["margin-right:","px;margin-top:","px;"],1.5*J.e,J.e/4);function rl(){return(rl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const ol=["avatarUrl","hasDraft","isExpanded","isServiceDesk","isEditorFocused","isLoading"],cl=Object(Oe.f)(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js")),{moduleId:"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js"});class ll extends n.Component{constructor(...e){super(...e),this.state={isSticky:!1,shouldHide:!1},this.onSave=e=>{Object(Rr.c)().markStartOfInteraction({key:Qr.TIME_TO_RENDER_SAVED_COMMENT,cancelExisting:!0}),Object(L.f)(e)||(this.props.onSave(e),this.props.onCancel())},this.setAddCommentContainerRef=e=>{this.addCommentContainer=e},this.setEditorContainerRef=e=>{this.editorContainer=e},this.setContainerRef=e=>{this.container=e},this.getScrollParent=e=>e&&"_issue-app-modal-dialog-wrapper"!==e.className?"auto"===window.getComputedStyle(e).overflowY||"scroll"===window.getComputedStyle(e).overflowY?e:this.getScrollParent(e.parentElement):null,this.setOverflowNode=()=>{this.overflowNode||(this.overflowNode=this.getScrollParent(this.container)),this.setSticky()},this.setSticky=()=>{const{container:e}=this;if(this.overflowNode&&e){const t=this.overflowNode.getBoundingClientRect(),s=e.getBoundingClientRect(),n=Math.min(t.bottom,window.innerHeight),a=!this.props.isExpanded&&s.bottom>=n;a!==this.state.isSticky&&this.setState({isSticky:a})}},this.addCommentContainer=void 0,this.editorContainer=void 0,this.container=void 0,this.editorEndElement=void 0,this.overflowNode=void 0,this.observer=void 0,this.onEditorExpandedWithAnalytics=()=>{Object(Rr.c)().markStartOfInteraction({key:Qr.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0}),this.props.onEditorExpandedWithAnalytics()},this.onExpand=()=>{Object(Rr.c)().markStartOfInteraction({key:Qr.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0}),this.props.onExpand()}}componentDidMount(){this.overflowNode=this.getScrollParent(this.container),Object(Wc.d)()||(window.addEventListener("resize",this.setOverflowNode),this.overflowNode&&(this.overflowNode.addEventListener("scroll",Mi()(this.setSticky,100)),this.setSticky())),this.props.isExpanded&&this.scrollEditorIntoView(),this.setupStickyObserver(),this.props.isEditorFocused&&this.setupStickyHidingObserver()}shouldComponentUpdate(e,t){const s=!ol.every(t=>this.props[t]===e[t]),n=!Object.entries(this.state).every(([e,s])=>s===t[e]);return s||n}componentDidUpdate(e){!e.isExpanded&&this.props.isExpanded&&(Object(Rr.c)().markTimeToFinishTask({key:Qr.TIME_TO_RENDER_NEW_COMMENT_EDITOR}),this.scrollEditorIntoView()),e.isEditorFocused!==this.props.isEditorFocused&&(this.props.isEditorFocused?this.setupStickyHidingObserver():this.removeStickyHidingObserver())}componentWillUnmount(){Object(Wc.d)()||(window.removeEventListener("resize",this.setOverflowNode),this.overflowNode&&this.overflowNode.removeEventListener("scroll",this.setSticky)),this.observer&&this.container&&this.observer.unobserve(this.container),this.observer&&this.editorEndElement&&this.observer.unobserve(this.editorEndElement)}setupStickyObserver(){if(window.IntersectionObserver&&this.container){const e=e=>{e.forEach(e=>{const t=!this.props.isExpanded&&!e.isIntersecting;switch(e.target){case this.container:this.state.isSticky!==t&&this.setState({isSticky:t});break;case this.editorEndElement:{const t=!e.isIntersecting&&e.boundingClientRect.y>=0&&e.boundingClientRect.y>=e.rootBounds.y;this.state.shouldHide!==t&&this.setState({shouldHide:t});break}}})},t={root:this.overflowNode,rootMargin:"0px",threshold:0};this.observer=new IntersectionObserver(e,t),this.observer.observe(this.container)}}setupStickyHidingObserver(){window.IntersectionObserver&&this.observer&&(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js")))().then(()=>setTimeout(()=>{this.editorEndElement=document.getElementsByClassName("issue-editor-end")[0],this.editorEndElement&&this.observer&&this.observer.observe(this.editorEndElement)}))}removeStickyHidingObserver(){window.IntersectionObserver&&this.observer&&this.editorEndElement&&this.observer.unobserve(this.editorEndElement)}scrollEditorIntoView(){setTimeout(()=>{Object(Br.b)(this.addCommentContainer,{scrollMode:"if-needed",behavior:"auto",block:"end"})})}renderAddCommentEditor(){const{hasDraft:e,newCommentDraft:t,isExpanded:s,intl:n,onEdit:i,onCancel:r,onPaste:o,onBlur:c,isServiceDesk:l,isLoading:u,editorSecondaryToolbarComponents:d}=this.props,p=e&&!Object(L.f)(t)?`\u2022 ${n.formatMessage(Zc.draftPlaceholder)}`:n.formatMessage(Zc.placeholder),m=a.a.createElement(Qc,{placeholder:p,onExpanded:this.onEditorExpandedWithAnalytics}),b=a.a.createElement(Jc,{packageName:"issue",fallback:m},a.a.createElement(cl,{externalId:"issue.comment.add-form",defaultValue:t,isExpanded:s,shouldFocus:!0,placeholder:p,onExpanded:this.onEditorExpandedWithAnalytics,onChange:i,onSave:this.onSave,onPaste:o,onBlur:c,onCancel:r,isLoading:u,secondaryToolbarComponents:d}));return l?a.a.createElement(Hc.a,{isExpanded:s,onExpanded:this.onExpand,commentId:"NEW_OPTIMISTIC_COMMENT"},b):b}render(){const{isExpanded:e,isEditorFocused:t,avatarUrl:s}=this.props,n=t&&this.state.shouldHide&&!e,i=a.a.createElement(He.a,null,"M"),r=a.a.createElement("strong",null,a.a.createElement(j.FormattedMessage,Zc.commentShortcutHintHeading)),o=()=>!e&&a.a.createElement(el,null,a.a.createElement(j.FormattedMessage,rl({},Zc.commentShortcutHintMessage,{values:{shortcutKey:i,proTipText:r}})));return(a.a.createElement("span",{ref:this.setAddCommentContainerRef},a.a.createElement(nl,{isSticky:this.state.isSticky,isHidden:n},a.a.createElement(al,{isSticky:this.state.isSticky},a.a.createElement(il,null,a.a.createElement(xr.a,{size:"medium",src:s})),a.a.createElement(hc.a,{innerRef:this.setEditorContainerRef,"data-test-id":"issue.activity.comment"},this.renderAddCommentEditor(),a.a.createElement(o,null)))),a.a.createElement("span",{ref:this.setContainerRef})))}}function ul(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ul(Object(s),!0).forEach((function(t){pl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ul(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}ll.displayName="AddCommentForm",ll.displayName="AddCommentForm",ll.defaultProps={isServiceDesk:!1,isLoading:!1,hasDraft:!1,avatarUrl:void 0,newCommentDraft:null,onExpand:o.a,onSave:o.a,onEdit:o.a,onPaste:o.a,onBlur:o.a,onCancel:o.a};var ml=Object(Ts.a)([j.injectIntl,Object(Vs.a)("issueFields",{onSave:"created",onEditorExpandedWithAnalytics:"commentExpanded"}),Object(i.b)(e=>({authorId:Object(P.a)(e),avatarUrl:Object(_.x)(e),newCommentDraft:Object(ta.j)("NEW_OPTIMISTIC_COMMENT")(e),hasDraft:_r(Object(Ir.a)("NEW_OPTIMISTIC_COMMENT"))(e),isExpanded:Object(ta.w)(e)||null!=Object(ta.i)("NEW_OPTIMISTIC_COMMENT")(e),isServiceDesk:Object(P.v)(e),isEditorFocused:Object(ea.F)(e)||Object(ta.A)(e),isLoading:Object(P.v)(e)&&Object(ta.x)(e),shouldShowCommentVisibilitySelect:Object(ta.z)(e),visibility:Object(ta.l)("NEW_OPTIMISTIC_COMMENT")(e)||Kr.a}),e=>({onExpand:()=>e(Object(Nn.c)()),onEdit:t=>e(Object(Nn.l)("NEW_OPTIMISTIC_COMMENT",t)),onVisibilityChange:t=>e(Object(Nn.m)("NEW_OPTIMISTIC_COMMENT",t)),onPaste:t=>e(Object(Nn.u)("NEW_OPTIMISTIC_COMMENT",t)),onBlur:()=>e(Object(Nn.b)()),onCancel:()=>e(Object(Nn.a)()),getOnSave:(t,s)=>e(Object(Nn.y)(dl({id:`NEW_OPTIMISTIC_COMMENT_${(new Date).getTime()}`,createdDate:(new Date).toISOString(),isNewComment:!0},t),s))}),(e,t,s)=>dl(dl(dl(dl({},s),e),t),{},{editorSecondaryToolbarComponents:e.shouldShowCommentVisibilitySelect?[a.a.createElement(fc,{key:"commentVisibilitySelect",initialValue:e.visibility,onChange:t.onVisibilityChange})]:void 0,onSave:(s,n)=>{e.shouldShowCommentVisibilitySelect&&n.update({isCommentRestricted:"public"!==e.visibility.type}),t.getOnSave({authorId:e.authorId,bodyAdf:s,bodyHtml:void 0,richContent:void 0,visibility:e.visibility},n)},onEditorExpandedWithAnalytics:s=>{t.onExpand(),Object(qi.b)(s,"addCommentEditor expanded",{hasDraft:e.hasDraft})}}))])(ll),bl=s("./src/packages/issue/issue-view/src/activity/common/component/feed-skeleton/view.js");const fl=Q.default.div([""]);var gl=e=>{const{list:t,loadingStage:s,canAddComments:i,numNewerCommentsToLoad:r}=e,[,{register:o}]=Object(Bc.b)(),c=Object(n.useCallback)(e=>{o("PERMALINK",e)},[o]);return"LOADING"===s&&r>0?a.a.createElement(eo.d,null,a.a.createElement(bl.a,null)):a.a.createElement("span",null,Object(Qe.isOptInBackToBentoEnabled)()&&a.a.createElement(Kc.a,{name:"PERMALINK"},a.a.createElement(fl,{innerRef:c})," "),t,i&&a.a.createElement(ml,null))},hl=s("./src/packages/issue/issue-view/src/activity/common/component/load-more-button/index.js");const yl=Q.default.div(["margin:"," 0 ","px 0;"],Za,1.5*J.e);class Ol extends n.Component{componentDidMount(){const{fetchCommentVisibilities:e}=this.props;e&&e()}UNSAFE_componentWillReceiveProps(e){e.loadedComments!==this.props.loadedComments&&0===e.loadedComments&&e.totalComments>0&&(0===e.startIndex?e.fetchMoreOlderComments():e.fetchMoreNewerComments())}render(){const{commentIds:e,canAddComments:t,fetchMoreNewerComments:s,fetchMoreOlderComments:n,totalComments:i,loadedComments:r,fullIssueUrl:o,isLoadingMoreComments:c,startIndex:l,loadingStage:u}=this.props;if(!e.length&&!t)return null;const{numNewerCommentsToLoad:d,numOlderCommentsToLoad:p}=Object(kr.a)(i,r,l),{hasPermalink:m,permalinkId:b}=Object($i.a)("Comments"),f=e.length?a.a.createElement(a.a.Fragment,null,a.a.createElement(hl.a,{onClick:n,numberToLoad:p,isDisabled:c,isLoading:c},a.a.createElement(j.FormattedMessage,{id:"issue.comments-view-older-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 older comment} other {{numberToLoad} older comments}}",values:{numberToLoad:p}})),a.a.createElement(yl,{"data-test-id":"issue.activity.comments-list"},e.map(e=>a.a.createElement(Nc,{key:e,commentId:e,fullIssueUrl:o,isHighlighted:m&&e===b}))),a.a.createElement(hl.a,{onClick:s,numberToLoad:d,isDisabled:c,isLoading:c},a.a.createElement(j.FormattedMessage,{id:"issue.comments-view-newer-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 newer comment} other {{numberToLoad} newer comments}}",values:{numberToLoad:d}}))):null;return a.a.createElement(gl,{loadingStage:u,canAddComments:t,list:f,numNewerCommentsToLoad:d})}}Ol.displayName="Comments",Ol.displayName="Comments",Ol.defaultProps={canAddComments:!1};var jl=Object(Ts.a)([Object(v.b)("comment"),Vc,Object(b.a)(),Object(i.b)(e=>({commentIds:Object(ta.K)(e),canAddComments:Object(ta.b)(e),totalComments:Object(ta.J)(e),startIndex:Object(ta.I)(e),loadedComments:Object(ta.F)(e),isLoadingMoreComments:Object(ta.E)(e),baseUrl:Object(P.g)(e),issueKey:Object(P.B)(e),shouldFetchCommentVisibilities:Object(ta.z)(e),fullIssueUrl:Object(wr.a)(e),loadingStage:Object(ta.G)(e)}),e=>({fetchMoreOlderComments:()=>{e(Object(Nn.t)())},fetchMoreNewerComments:()=>{e(Object(Nn.s)())}}))])(Ol),El=s("./node_modules/lodash/castArray.js"),vl=s.n(El),kl=s("./node_modules/lodash/get.js"),wl=s.n(kl),Sl=s("./node_modules/lodash/every.js"),Il=s.n(Sl),Cl=s("./node_modules/lodash/fp/get.js"),Tl=s.n(Cl),Pl=s("./node_modules/lodash/unionBy.js"),_l=s.n(Pl),xl=s("./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg"),Dl=s.n(xl);function Al(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ml(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Al(Object(s),!0).forEach((function(t){Ll(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Al(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ll(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Rl=(e,t,s)=>(e=>void 0===e)(Tl()(t,s))?e:Tl()(t,s),Nl=(e,t,s)=>t.filter(t=>s.some(s=>e(t)===e(s))),Ul=(e,t,s)=>t.filter(t=>!s.some(s=>e(t)===e(s))),Fl=({key:e,accountId:t,displayName:s,avatarUrls:n})=>({approver:{accountId:t,key:e,displayName:s,isFromLinkedField:!0,avatarUrl:Rl(Dl.a,"24x24",n)}}),Vl=({approver:{key:e,accountId:t,displayName:s},approverDecision:n})=>({approver:{accountId:t,key:e,displayName:s},approverDecision:n}),Kl=(e,t)=>{const s=Il()(t,e=>e.approver.accountId);return((e,t)=>{const s=e.map(e=>e.approver.accountId);return t.map(e=>s.includes(e.approver.accountId)?{approverDecision:e.approverDecision,approver:Ml(Ml({},e.approver),{},{isFromLinkedField:!0})}:e)})(t,_l()(e,t,e=>s?e.approver.accountId:null))},Bl=(e,t)=>{if(t&&t.value){const s=+t.value;if("number"===t.type)return s;if("percent"===t.type)return Math.ceil(e*(s/100))}return e},Wl=({name:e})=>({name:e,type:"group",meta:{memberCount:NaN,approvedCount:NaN},id:void 0}),Hl=(e,t)=>{const s=e||[];return[...Nl(Tl()("name"),s,t),...Ul(Tl()("name"),t,s).map(Wl)]},Gl=(e,t,s,n)=>"multi_group_picker"!==e.configuration.approvers.type?((e,t,s,n)=>{const a=(t?e.approvers.filter(e=>"pending"!==e.approverDecision):e.approvers).map(Vl),i=t.map(Fl),r=Kl(a,i),o=Tl()(["configuration","condition"],e),c=Bl(r.length,o),l="com.atlassian.jira.plugin.system.customfieldtypes:userpicker"===n,{id:u,name:d,finalDecision:p,canAnswerApproval:m,decisions:b,approverPrincipals:f}=e;return{id:u,name:d,finalDecision:p,approvers:r,minApprovalsRequired:c,canAnswerApproval:m,linkedFieldName:s,isSingleUserPicker:l,decisions:(b||[]).map(Vl),approverPrincipals:f,configuration:e.configuration}})(e,t,s,n):(({id:e,name:t,finalDecision:s,approvers:n,configuration:a,canAnswerApproval:i,decisions:r,approverPrincipals:o},c,l)=>({id:e,name:t,finalDecision:s,approvers:n.map(Vl),minApprovalsRequired:Bl(n.length,a.condition),canAnswerApproval:i,linkedFieldName:l,isSingleUserPicker:!1,decisions:(r||[]).map(Vl),approverPrincipals:Hl(o,c),configuration:a}))(e,t,s),$l=Object(Xn.createSelector)((e,t)=>t?Object(ea.n)(t)(e):void 0,e=>e&&e.activeApproval),ql=Object(Xn.createSelector)((e,t)=>$l(e,t),e=>wl()(e,["configuration","approvers","customFieldId"])),zl=Object(Xn.createSelector)((e,t)=>$l(e,t),e=>wl()(e,["configuration","approvers","customFieldName"])),Yl=Object(Xn.createSelector)((e,t)=>$l(e,t),(e,t)=>{const s=t&&((e,t)=>{const s=ql(e,t);return s?Object(ea.n)(s)(e):void 0})(e,t);return s?vl()(s):[]},(e,t)=>zl(e,t),(e,t)=>((e,t)=>{const s=ql(e,t);return s&&Object(ea.r)(s)(e)})(e,t),(e,t,s,n)=>e&&Gl(e,t,s,n)),Ql=Object(Xn.createSelector)(Object(ea.q)("servicedesk-approvals"),e=>e&&e.value&&e.value.completedApprovals||[]),Jl=(Object(Xn.createSelector)(Ql,e=>e&&e.length),Object(Xn.createSelector)(ta.a,ta.K,ta.J,ta.F,ta.I,Ql,(e,t,s,n,a,i)=>{const r=[];Object.keys(e).filter(e=>t.includes(e)).forEach(t=>{const s=e[t],n={comment:s,timestamp:new Date(s.createdDate).getTime(),type:"COMMENT"};r.push(n)}),i&&i.forEach(e=>{const t={approval:e,timestamp:wl()(e,"completedDate.epochMillis"),type:"APPROVAL"};r.push(t)}),r.sort((e,t)=>e.timestamp-t.timestamp);let o=r.slice();const c=n+a;return a&&s>n&&o[o.length-1]&&"APPROVAL"===o[o.length-1].type&&(o=o.slice(0,o.map(e=>e.type).lastIndexOf("COMMENT")+1)),s>c&&o[0]&&"APPROVAL"===o[0].type?o.slice(o.map(e=>e.type).indexOf("COMMENT")):o})),Zl=Object(Xn.createSelector)(Yl,P.a,(e,t)=>!!(e&&t&&e.approvers&&e.approvers.length)&&e.approvers.some(e=>e.approver.accountId===t&&(!e.approverDecision||"pending"===e.approverDecision)));var Xl=s("./src/packages/servicedesk/jsd-mystique/src/ui/icon/index.js"),eu=s("./src/packages/servicedesk/approval-decision/src/ui/index.js");const tu=e=>{const{approval:t}=e;if(t){const s=t.completedDate||t.createdDate||{},n=new Date(s.epochMillis).toJSON();return a.a.createElement(eu.a,{icon:a.a.createElement(Xl.a,{size:"small",label:"Jira Servicedesk Icon"}),finalDecision:t.finalDecision,status:t.status,time:n,approvers:t.approvers,timeZone:e.timeZone})}return null};tu.defaultProps={timeZone:void 0};var su=tu;const nu=Q.default.div(["margin:"," 0 ","px 0;"],Za,1.5*J.e);class au extends n.Component{constructor(...e){super(...e),this.renderJsdActivityItems=e=>{const{timeZone:t,fullIssueUrl:s}=this.props,{hasPermalink:n,permalinkId:i}=Object($i.a)("Comments");return a.a.createElement(nu,{"data-test-id":"issue.issue-view.activity.servicedesk.jsd-activity-items-list"},e.map(e=>{switch(e.type){case"COMMENT":return e.comment&&a.a.createElement(Nc,{key:e.comment.id,commentId:e.comment.id,fullIssueUrl:s,isHighlighted:n&&e.comment.id===i});case"APPROVAL":return e.approval&&a.a.createElement(su,{key:e.approval.id,approval:e.approval,timeZone:t});default:return null}}))}}UNSAFE_componentWillReceiveProps(e){e.loadedComments!==this.props.loadedComments&&0===e.loadedComments&&e.totalComments>0&&(0===e.startIndex?e.fetchMoreOlderComments():e.fetchMoreNewerComments())}render(){const{canAddComments:e,fetchMoreOlderComments:t,fetchMoreNewerComments:s,isLoadingMoreComments:n,jsdActivityItems:i,startIndex:r,totalComments:o,loadedComments:c,totalApprovalDecisionsItems:l,loadingStage:u}=this.props;if(!i.length&&!e)return null;const{numNewerActivityItemsToLoad:d,numOlderActivityItemsToLoad:p}=Object(kr.b)(o,c,r,i,l),m=i.length?a.a.createElement(a.a.Fragment,null,a.a.createElement(hl.a,{onClick:()=>{t()},numberToLoad:p,isDisabled:n,isLoading:n},a.a.createElement("div",{"data-test-id":"issue.issue-view.activity.servicedesk.comments-view.view-older-comments-button"},a.a.createElement(j.FormattedMessage,{id:"issue.comments-view-older-comments-text",defaultMessage:"View {numComments, plural, one {1 older comment} other {{numComments} older comments}}",values:{numComments:p}}))),this.renderJsdActivityItems(i),a.a.createElement(hl.a,{onClick:()=>{s()},numberToLoad:d,isDisabled:n,isLoading:n},a.a.createElement(j.FormattedMessage,{id:"issue.comments-view-newer-comments-text",defaultMessage:"View {numComments, plural, one {1 newer comment} other {{numComments} newer comments}}",values:{numComments:d}}))):null;return a.a.createElement(gl,{loadingStage:u,canAddComments:e,list:m,numNewerCommentsToLoad:d})}}au.displayName="ServicedeskComments",au.displayName="ServicedeskComments",au.defaultProps={canAddComments:!1};var iu=Object(Ts.a)([Object(v.b)("ServicedeskComments"),Object(i.b)(e=>({canAddComments:Object(ta.b)(e),totalComments:Object(ta.J)(e),startIndex:Object(ta.I)(e),loadedComments:Object(ta.F)(e),isLoadingMoreComments:Object(ta.E)(e),timeZone:Object(_.z)(e),jsdActivityItems:Jl(e),totalApprovalDecisionsItems:Ql(e),fullIssueUrl:Object(wr.a)(e),loadingStage:Object(ta.G)(e)}),e=>({fetchMoreOlderComments:()=>{e(Object(Nn.t)())},fetchMoreNewerComments:()=>{e(Object(Nn.s)())}}))])(au),ru=s("./src/packages/issue/issue-view/src/common/actions/timestamp-display-setting-actions.js"),ou=s("./src/packages/issue/issue-view/src/common/state/selectors/timestamp-display-setting-selector.js"),cu=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),lu=s("./src/packages/forge/forge-ui-async/src/ui/issue-activity/async.js");const uu=Q.default.div(["margin-top:",";"],Za),du=({source:e,extension:t,context:s})=>{const i=Object(n.useMemo)(()=>({source:e}),[e]);return(a.a.createElement(rr.a,{analyticsData:i,shouldFireScreenEvent:!0},a.a.createElement(uu,null,a.a.createElement(lu.a,{extension:t,platformContext:s,analyticsData:i}))))};du.displayName="ForgeIssueActivity";var pu=du;const mu=e=>t=>s=>a.a.createElement(R.a,{id:e,packageName:"issue"},a.a.createElement(Oe.a,{fallback:a.a.createElement(eo.d,null,a.a.createElement(bl.a,null))},a.a.createElement(t,s))),bu=mu("activity-feed-item-history")(Object(Oe.f)(()=>s.e("async-activity-feed-item-history").then(s.bind(null,"./src/packages/issue/issue-actions/issue-history/src/index.js")),{moduleId:"./src/packages/issue/issue-actions/issue-history/src/index.js"}));bu.displayName="History";const fu=mu("activity-feed-item-worklog")(Object(Oe.f)(()=>s.e("async-activity-feed-item-worklog").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/worklog/index.js")),{moduleId:"./src/packages/issue/issue-view/src/activity/worklog/index.js"}));fu.displayName="Worklog";const gu=mu("activity-feed-item-polaris-insights")(Object(Oe.f)(()=>s.e("async-activity-feed-item-polaris-insights").then(s.bind(null,"./src/packages/polaris/insights/src/index.js")),{moduleId:"./src/packages/polaris/insights/src/index.js"}));gu.displayName="PolarisInsights";var hu=Object(Ts.a)([Object(i.b)(e=>({baseUrl:Object(P.g)(e),issueKey:Object(P.B)(e),timeZone:Object(_.z)(e),timestampDisplaySetting:Object(ou.a)(e),context:Object(cu.b)(e),source:Object(P.b)(e)}),e=>({onSwitchTimestampDisplaySetting:t=>{e(Object(ru.a)(t))}}))])(({selectedItem:e,baseUrl:t,issueKey:s,timeZone:n,timestampDisplaySetting:i,onSwitchTimestampDisplaySetting:r,context:o,source:c})=>{if(!e)return null;switch(e.type){case"JSDComments":return a.a.createElement(iu,null);case"Comments":return a.a.createElement(jl,null);case"PolarisInsights":return a.a.createElement(gu,{issueKey:Object(vr.l)(s)});case Wi:return a.a.createElement(ni,{appKey:e.appKey,moduleKey:e.moduleKey,options:e.options,appName:e.name});case"FORGE_ENTITY_TYPE":return a.a.createElement(pu,{key:e.extension.id,source:c,context:o,extension:e.extension});case"History":return a.a.createElement(bu,{baseUrl:Object(vr.b)(t),issueKey:Object(vr.l)(s),timeZone:n,timestampDisplaySetting:i,onSwitchTimestampDisplaySetting:r});case"Worklog":return a.a.createElement(fu,{timeZone:n,timestampDisplaySetting:i,onSwitchTimestampDisplaySetting:r});default:return null}});function yu(){return(yu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ou(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ju(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Eu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ju(Object(s),!0).forEach((function(t){vu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ju(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ku extends n.Component{constructor(...e){super(...e),this.getAnalyticsData=e=>{switch(e.type){case Bi:return{extensionId:e.extension.id};case Wi:return((e,t)=>Ta(e,t))(e.appKey,e.moduleKey);default:return{}}},this.getEcosystemActivity=()=>this.props.ecosystemModules.map(e=>{switch(e.type){case Bi:return Eu({key:Object(Fi.f)(e.appKey,e.moduleKey)},e);case Wi:return Eu({key:`${e.moduleKey}${e.appKey}`},e);default:return y.a.safeError("issue.issue-actions.activity-feed","Tried to show ecosystem activity with other type than connect or forge"),null}}).filter(Boolean),this.getJSDCommentActivity=()=>{const{commentIds:e,canAddComments:t,intl:s}=this.props;return e.length||t?[{key:"JSDComments",type:"JSDComments",name:s.formatMessage(Yi.a.comments)}]:[]},this.getCommentActivity=()=>{const{commentIds:e,canAddComments:t,intl:s}=this.props;return e.length||t?[{key:"Comments",type:"Comments",name:s.formatMessage(Yi.a.comments)}]:[]},this.getHistoryActivity=()=>[{key:"History",type:"History",name:this.props.intl.formatMessage(Yi.a.history)}],this.getWorklogActivity=()=>this.props.shouldShowWorklog?[{key:"Worklog",type:"Worklog",name:this.props.intl.formatMessage(Yi.a.worklog)}]:[],this.getPolarisInsights=()=>this.props.isPolarisProject?[{key:"PolarisInsights",type:"PolarisInsights",name:this.props.intl.formatMessage(Yi.a.polarisInsights)}]:[],this.getActivityItems=()=>{const{isServiceDesk:e}=this.props;return[...e?this.getJSDCommentActivity():this.getCommentActivity(),...this.getHistoryActivity(),...this.getWorklogActivity(),...this.getPolarisInsights(),...this.getEcosystemActivity()]},this.getSelectedItem=(e=[])=>{if(this.props.selectedItem)return this.props.selectedItem;const t=Object($i.b)();if(t){const{permalinkType:s}=t,n=e.find(e=>e.type===s);if(n)return n}return e[0]},this.selectActivityItem=(e,t,s)=>{const n=[s,this.getAnalyticsData(e)];Object(qi.h)(t,...n),this.props.onSwitchSelectedActivityItem(e)},this.renderChangeboardingMount=()=>{const{permalinkType:e}=Object($i.b)()||{};return"Comments"===e||"Worklog"===e?a.a.createElement(Sn.a,{onMount:t=>{Object(qi.b)(t,"Comments"===e?"permalinkWithChangeboardingModalComments mounted":"permalinkWithChangeboardingModalWorklog mounted")}}):null}}render(){const{permalinkType:e}=Object($i.b)()||{};if(("Worklog"===e||!this.props.commentIds.length)&&this.props.isPreview)return a.a.createElement(Hi.a,null);const t=this.getActivityItems(),s=this.getSelectedItem(t);if(!t.length||!s)return null;const{intl:{formatMessage:n},setActivityItemsRef:i,shouldDisplayDropdown:r}=this.props;return(a.a.createElement(kn.a,{sourceType:wn.f,sourceName:"activityFeed"},this.renderChangeboardingMount(),a.a.createElement(Ki.c,{leftAlign:!0},a.a.createElement(Ki.e,{"data-test-id":"issue-activity-feed.heading"},t.length>1?n(Yi.a.activity):s.name)),t.length>1?a.a.createElement(er,{leftAlign:!0},a.a.createElement(tr,{innerRef:i},a.a.createElement(Ki.b,null,n(Yi.a.filterBy)),a.a.createElement(Ki.d,{leftAlign:!0},r?a.a.createElement(hr,{items:t,selectedItem:s,onSelectActivityItem:this.selectActivityItem}):a.a.createElement(Er,{items:t,selectedItem:s,onSelectActivityItem:this.selectActivityItem})))):null,a.a.createElement(hu,{selectedItem:s})))}}ku.displayName="FeedDisplay",ku.defaultProps={isServiceDesk:!1,shouldDisplayDropdown:!1,canAddComments:!1,selectedItem:null,ecosystemModules:[]},ku.displayName="FeedDisplay";const wu=e=>{const{projectKey:t}=e,s=Ou(e,["projectKey"]),n=Object(zi.a)(t);return a.a.createElement(ku,yu({},s,{isPolarisProject:n}))};wu.displayName="FeedDisplayWrapper";var Su=Object(Ts.a)([j.injectIntl,Object(i.b)(e=>({isPreview:Object(_.s)(e),isServiceDesk:Object(P.v)(e),shouldShowWorklog:Object(D.d)(e),canAddComments:Object(ta.b)(e),commentIds:Object(ta.K)(e),ecosystemModules:Object(Ra.e)(e),selectedItem:Object(Gi.a)(e),projectKey:Object(P.I)(e)}),e=>({onSwitchSelectedActivityItem:t=>{e(Object(Vi.a)(t))}}))])(wu);class Iu extends n.Component{constructor(...e){super(...e),this.state={shouldDisplayDropdown:!1},this.componentDidMount=()=>{this.setShouldDisplayDropdown()},this.componentDidUpdate=()=>{this.setShouldDisplayDropdown()},this.setActivityItemsRef=e=>{this.activityItemsRef=e},this.setShouldDisplayDropdown=()=>{const{containerWidth:e}=this.props,t=this.updateAndGetTotalWidth();if(0!==e&&0!==t){const s=e<=t+15;this.state.shouldDisplayDropdown!==s&&this.setState({shouldDisplayDropdown:s})}},this.getActivityItemsRefWidth=()=>this.activityItemsRef?this.activityItemsRef.clientWidth:0,this.updateAndGetTotalWidth=()=>{const e=this.getActivityItemsRefWidth();return this.totalExpandedWidth<e&&(this.totalExpandedWidth=e),this.totalExpandedWidth},this.totalExpandedWidth=0,this.activityItemsRef=void 0}render(){const{shouldDisplayDropdown:e}=this.state;return(a.a.createElement(Su,{shouldDisplayDropdown:e,setActivityItemsRef:this.setActivityItemsRef}))}}Iu.displayName="ActivityFeed",Iu.defaultProps={containerWidth:0};var Cu=Object(Ts.a)([Ui])(Iu),Tu=s("./src/packages/issue/issue-view-layout/src/services/main.js"),Pu=s("./node_modules/@atlaskit/tabs/dist/esm/components/TabItem.js"),_u=s("./node_modules/@atlaskit/tabs/dist/esm/components/Tabs.js"),xu=s("./src/packages/issue/issue-tabs/src/services/main.js"),Du=s("./src/packages/issue/issue-context-service/src/main.js"),Au=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),Mu=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),Lu=s("./src/packages/platform/ui/field-config/src/index.js"),Ru=s("./src/packages/issue/fields/components/field-heading/src/styled.js"),Nu=s("./src/packages/issue/fields/components/field-pin/src/index.js"),Uu=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),Fu=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),Vu=s("./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js");const Ku=Q.default.div(["[class*='CompactWrapper']{margin-bottom:",";}"],2*J.e);var Bu=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),Wu=s("./src/packages/issue/issue-view/src/actions/editor-actions.js"),Hu=s("./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js");const Gu=()=>document.querySelector(".issue-app-modal-ak-dropdown-portal"),$u=()=>document.querySelector(".issue-app-modal-editor-dropdown-portal"),qu=Object(Xn.createSelector)(P.A,_.C,(e,t)=>({objectId:e,containerId:t}));var zu=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),Yu=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const Qu=e=>Object.values(Object(Lu.T)()).includes(e),Ju=e=>Object(Xn.createSelector)(Object(ea.c)(e),e=>!e||e.length>1),Zu=e=>Object(Xn.createSelector)(Yu.e,Object(ea.o)(e),(e,t)=>Boolean(e&&t&&t.rating)),Xu=e=>Object(Xn.createSelector)(Object(ea.n)(e),e=>Boolean(e&&(e.showField||e.hasEpicLinkFieldDependency))),ed=({fieldType:e,fieldId:t,state:s})=>{switch(e){case"com.atlassian.servicedesk:sd-request-feedback":return Zu(t)(s);case"com.atlassian.jpo:jpo-custom-field-parent":return Xu(t)(s);case"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":return Ju(t)(s);case"com.atlassian.servicedesk.approvals-plugin:sd-approvals":return(e=>Object(Xn.createSelector)(Object(ea.n)(e),e=>Boolean(e)))(t)(s);case"com.pyxis.greenhopper.jira:jsw-issue-color":return!1;default:return!0}};function td(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function sd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?td(Object(s),!0).forEach((function(t){nd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):td(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ad=Object(Xn.createSelector)(_.c,e=>e&&e.tabs||{}),id=e=>Object(Xn.createSelector)(ad,t=>Boolean(Object.keys(t).find(s=>t[s].items.find(t=>t.id===e)))),rd=(e,t)=>t,od=(e,t)=>{if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){const s=t;return e.map(e=>e.id).sort().join("")===s.map(e=>e.id).sort().join("")}return!1},cd=()=>{const e=Object(Mu.a)((e,t)=>sd(sd({},e),{},{items:t}),od);return Object(Xn.createSelector)((()=>Object(Xn.createSelector)(ad,rd,(e,t)=>e[t]||null))(),e=>e,(t,s)=>{if(!t)return null;const n=t.items.filter(({id:e})=>!!((e,t)=>{if(!Object(ea.a)(t).includes(e))return!1;const s=Object(zu.a)(Object(ea.w)(e,Object(ea.t)(t)));return!(void 0===s||!Qu(s))&&ed({fieldType:s,fieldId:e,state:t})})(e,s));return n.length>0?e(t,n):null})};var ld=s("./src/packages/issue/issue-view/src/views/connect-field.js"),ud=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/inline-edit/messages.js"),dd=s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js");const pd=Q.default.div([""," margin-bottom:","px;"],e=>e.isEditing?"":"\n        & > div > div > div > div > div {\n            min-height: 32px !important;\n        }\n        & > div > div > div > div > div > div {\n            padding: 0 6px;\n        }\n    ",e=>!0!==e.isGrouped?3*J.e:0),md=e=>a.a.createElement(pd,{isEditing:e.isEditing,isGrouped:e.isGrouped,"data-testid":e["data-testid"]},a.a.createElement(dd.a,e));md.displayName="CompactInlineEditStateless";var bd=md,fd=s("./src/packages/issue/issue-view/src/common/component/renderer/index.js"),gd=Object(j.defineMessages)({nonEditablePlaceholderText:{id:"issue.views.field.rich-text.nonEditablePlaceholderText",defaultMessage:"None"}});const hd=Q.default.div(["width:100%;"]),yd=Object(Oe.f)(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/common/component/editor/index.js")),{moduleId:"./src/packages/issue/issue-view/src/common/component/editor/index.js"});class Od extends n.Component{render(){const e=a.a.createElement(je.b,{mediaContext:this.props.mediaContext,defaultValue:this.props.value});return(a.a.createElement(hd,{"data-test-id":"issue.views.field.rich-text.editor-container"},a.a.createElement(je.a,{packageName:"issue",fallback:e},a.a.createElement(yd,{baseUrl:this.props.baseUrl,portalElement:this.props.portalElement,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,emojiProvider:this.props.emojiProvider,externalId:this.props.externalId,defaultValue:this.props.value,onCancel:this.props.onCancel,onBlur:this.props.onBlur,onSave:this.props.onSave,onChange:this.props.onChange,isDisabled:this.props.isDisabled,isInvalid:this.props.isInvalid,isExpanded:this.props.isExpanded,shouldFocus:this.props.shouldFocus,onSaveFailure:this.props.onSaveFailure,onChangeFailure:this.props.onChangeFailure,onPaste:this.props.onPaste}))))}}Od.displayName="RichTextFieldView",Od.displayName="RichTextFieldView",Od.defaultProps={isDisabled:!1,isInvalid:!1,isExpanded:!1,shouldFocus:!1,value:null,mediaContext:null,mentionEncoder:null,emojiProvider:null,onPaste:o.a};const jd=Q.default.div(["width:100%;"]),Ed=["isEditable","isEditing","externalId","noValueText","mediaContext"];class vd extends n.Component{constructor(...e){super(...e),this.onMouseDownEditView=()=>{this.mouseDownSelection=window.getSelection().toString()},this.onEditRequested=()=>{const e=window.getSelection().toString(),t=e&&0!==e.length,s=this.mouseDownSelection&&0!==this.mouseDownSelection.length;t||s||this.props.onEditRequest()},this.getEditValue=()=>this.props.adfValue,this.getNonEditablePlaceholderText=()=>this.props.intl.formatMessage(gd.nonEditablePlaceholderText),this.mouseDownSelection=void 0}componentDidMount(){this.props.onExperienceSuccess()}shouldComponentUpdate(e){return!Ed.every(t=>this.props[t]===e[t])}renderContent(){return a.a.createElement(jd,null,a.a.createElement(fd.a,{mediaContext:this.props.mediaContext,mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,adf:Object(L.h)(this.props.adfValue),placeholder:this.props.isEditable?this.props.noValueText:this.getNonEditablePlaceholderText()}))}renderReadView(){const{intl:e,isEditable:t,isMobile:s,fieldId:n}=this.props;return(a.a.createElement("div",{onMouseDown:this.onMouseDownEditView,role:"presentation","data-test-id":`issue.views.field.rich-text.${n}`},a.a.createElement(bd,{label:"",isLabelHidden:!0,readView:this.renderContent(),onEditRequested:this.onEditRequested,isEditing:!1,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:""}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:""}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:""}),editView:t?a.a.createElement("div",null):null,onConfirm:o.a,onCancel:o.a,isFitContainerWidthReadView:!s})))}renderEditView(){return a.a.createElement(Od,{baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,portalElement:this.props.portalElement,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,contextIdentifier:this.props.contextIdentifier,activityProvider:this.props.activityProvider,externalId:this.props.externalId,isDisabled:void 0,isExpanded:!0,shouldFocus:!0,value:this.getEditValue(),onCancel:this.props.onCancel,onChange:this.props.onChange,onBlur:this.props.onBlur,onSave:this.props.onConfirm,onSaveFailure:this.props.onSaveFailure,onChangeFailure:this.props.onChangeFailure,onPaste:this.props.onPaste})}render(){return this.props.isEditing?this.renderEditView():this.renderReadView()}}vd.displayName="RichTextInlineEditView",vd.displayName="RichTextInlineEditView",vd.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,adfValue:void 0,contextIdentifier:void 0,onExperienceSuccess:o.a};var kd=Object(j.injectIntl)(vd);const wd=Object(j.defineMessages)({noValueText:{id:"issue.placeholder-for-empty-issue-description-field",defaultMessage:"Add a description..."}});function Sd(){return(Sd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Id=e=>{const{onEditRequest:t,onConfirm:s,isEditing:i}=e;Object(n.useEffect)(()=>{i?Object(Rr.c)().markTimeToFinishTask({key:Jr.TIME_TO_RENDER_EDIT_VIEW}):(Object(Rr.c)().markTimeToFeedback({key:Jr.TIME_TO_SAVE_UPDATED_DESCRIPTION}),Object(Rr.c)().markTimeToFeedback({key:Jr.TIME_TO_SAVE_UNCHANGED_DESCRIPTION}))},[i]);const r=Object(n.useCallback)(()=>{Object(Rr.c)().markStartOfInteraction({key:Jr.TIME_TO_RENDER_EDIT_VIEW,cancelExisting:!0}),t()},[t]),o=Object(n.useCallback)(()=>{Object(Rr.c)().markStartOfInteraction({key:Jr.TIME_TO_SAVE_UPDATED_DESCRIPTION,cancelExisting:!0}),Object(Rr.c)().markStartOfInteraction({key:Jr.TIME_TO_SAVE_UNCHANGED_DESCRIPTION,cancelExisting:!0}),s()},[s]);return a.a.createElement(kd,Sd({},e,{onEditRequest:r,onConfirm:o}))};Id.displayName="DescriptionField";var Cd=Nt()(Object(Fu.b)("description"),Object(ld.a)(()=>({fieldId:"description",shouldSaveDraft:!0,isOptimistic:!0,saveField:({baseUrl:e,issueKey:t,value:s})=>((e,t,s)=>{const n=`${e}/rest/internal/3/issue/${t}/description`,a=JSON.stringify(s);return Object(Bu.e)(n,{body:a})})(e,t,s),canContainMediaContent:!0,onSaveFailureFlagType:Ys.H,additionalProps:(e,t)=>{const s=Object(P.g)(e);return{baseUrl:s,portalElement:id("description")(e)?$u()||document.body:void 0,adfValue:Object(ea.g)("description")(e),htmlValue:Object(ea.i)("description")(e),isInvalid:Object(ea.k)("description")(e),invalidMessage:Object(ea.j)("description")(e),mediaContext:Object(x.a)(e),mentionProvider:Object(T.a)(e),contextIdentifier:qu(e),mentionEncoder:Object(C.a)(s),activityProvider:Object(Hu.a)(e),externalId:"issue.descriptionHtml",noValueText:t.formatMessage(wd.noValueText)}},additionalCallbacks:e=>({onExpandedFailure:()=>e(Object(Wu.b)()),onSaveFailure:()=>e(Object(Wu.c)()),onChangeFailure:()=>e(Object(Wu.a)())})})))(Id);class Td extends n.Component{componentDidMount(){this.props.onExperienceSuccess()}componentDidUpdate(e){const{isEditing:t,isWaiting:s,hasDraft:n}=this.props,a=!(e.isEditing||t||s||n),i=a&&e.hasDraft&&!e.isWaiting,r=a&&!e.hasDraft&&e.isWaiting;i?Object(Rr.c)().markTimeToFinishTask({key:Jr.TIME_TO_SAVE_UPDATED_DESCRIPTION}):r&&Object(Rr.c)().markTimeToFinishTask({key:Jr.TIME_TO_SAVE_UNCHANGED_DESCRIPTION})}render(){const{area:e,label:t,fieldId:s,hasDraft:i,isEditing:r,isWaiting:o,intl:c}=this.props,l="content"===e?Ki.c:Ru.e,u="content"===e?Ki.e:Ru.f,d=Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?Ku:n.Fragment,p=Object(Vu.a)(e);return a.a.createElement(d,null,a.a.createElement(l,null,a.a.createElement(Ki.b,null,a.a.createElement(u,null,t),!i||r||o?null:a.a.createElement(Ki.a,null,`\u2022 ${c.formatMessage(Vr.draftIndicator)}`),!0===p&&a.a.createElement(Nu.a,{fieldId:s,label:t}))),a.a.createElement(Cd,null))}}Td.displayName="Description",Td.defaultProps={area:"context",onExperienceSuccess:o.a},Td.displayName="Description";var Pd=Nt()(j.injectIntl,Object(Uu.c)("description-container"),Object(Fu.b)("description"),Object(Hs.a)(),Object(i.b)(e=>({label:Object(ea.m)("description")(e),hasDraft:_r("description")(e),isEditing:Object(ea.B)("description")(e),isWaiting:Object(ea.D)("description")(e)}),{}),Object(Hs.a)())(Td),_d=s("./node_modules/react-dom/index.js"),xd=s.n(_d),Dd=s("./node_modules/@atlaskit/field-text-area/index.js");const Ad=Q.default.div(["",";"],Object(pr.f)("textarea"));class Md extends n.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e.target.value)},this.editView=Object(n.createRef)(),this.textarea=void 0}componentDidMount(){if(this.editView&&this.editView.current){const e=xd.a.findDOMNode(this.editView.current);e instanceof HTMLElement&&(this.textarea=e.querySelector("textarea"))}}componentWillUnmount(){this.textarea=null}render(){let e=(e=>e?e.split(/\r\n|\r|\n/).length:0)(this.props.value);if(this.textarea){const{scrollHeight:t}=this.textarea,s=window.getComputedStyle(this.textarea),n=Number.parseFloat(s.getPropertyValue("line-height"));Number.isNaN(n)||(e=Math.round(t/n))}const t=this.props.scrollRows||e,s="content"===this.props.area?20:5,n=Math.min(s,Math.max(2,t));return a.a.createElement(Ad,null,a.a.createElement(Dd.a,{ref:this.editView,value:this.props.value,onChange:this.onChange,isInvalid:!!this.props.invalidMessage,invalidMessage:this.props.invalidMessage,shouldFitContainer:!0,autoFocus:!0,isLabelHidden:!0,label:"",minimumRows:n}))}}Md.displayName="TextAreaField",Md.displayName="TextAreaField",Md.defaultProps={value:"",invalidMessage:null,scrollRows:null,area:"context"};const Ld=Q.default.div(["[class*='CompactWrapper'] > *{margin-left:0;}[class*='ContentWrapper']{padding-left:0;padding-right:0;}"]),Rd=Object(Q.default)(Ld)(["[class*='CompactWrapper']{margin-bottom:",";}"],2*J.e);class Nd extends n.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e)},this.onConfirm=()=>{const{value:e}=this.props;this.props.onChange(Object(L.i)(e)),this.props.onConfirm()},this.readView=void 0}renderReadView(){const{value:e,noValueText:t,area:s}=this.props;return e&&0!==e.trim().length?"content"===s||"content-request"===s?a.a.createElement(pr.d,{innerRef:e=>{this.readView=e}},e&&Object(L.i)(e)):a.a.createElement(pr.c,{innerRef:e=>{this.readView=e},maxRows:5},e):a.a.createElement(pr.b,null,t)}renderEditView(){let e;if(this.readView){const{scrollHeight:t}=this.readView,s=window.getComputedStyle(this.readView),n=Number.parseFloat(s.getPropertyValue("line-height"));e=Math.round(t/n)}return(a.a.createElement(Md,{value:this.props.value,onChange:this.onChange,invalidMessage:this.props.invalidMessage,scrollRows:e,area:this.props.area}))}getField(){return a.a.createElement(G.a,{onEscape:this.props.onCancel},a.a.createElement(bd,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!0,isConfirmOnBlurDisabled:this.props.isConfirmOnBlurDisabled,editButtonLabel:this.props.intl.formatMessage(ud.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:this.props.intl.formatMessage(ud.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:this.props.intl.formatMessage(ud.a.cancelButtonLabel,{fieldName:this.props.label})}))}render(){const{area:e,fieldId:t,label:s}=this.props;if(Object(Qe.isSideBySideLabelsAndFieldsEnabled)()){const n="context"===e?Rd:Ld,i=Object(Vu.a)(e);return a.a.createElement(n,null,"content"===e?a.a.createElement(Ki.c,null,a.a.createElement(Ki.e,null,s)):a.a.createElement(Ru.e,null,a.a.createElement(Ru.f,null,s),!0===i&&a.a.createElement(Nu.a,{fieldId:t,label:s})),this.getField())}return(a.a.createElement(Ld,null,"content"===e?a.a.createElement(Ki.c,null,a.a.createElement(Ki.e,null,s)):a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,s)),this.getField()))}}Nd.displayName="TextAreaInlineEditView",Nd.displayName="TextAreaInlineEditView",Nd.defaultProps={isEditable:!1,isEditing:!1,isConfirmOnBlurDisabled:!1,value:"",label:"",noValueText:null,invalidMessage:null};var Ud=Object(j.injectIntl)(Nd),Fd=Object(j.defineMessages)({noValue:{id:"issue.common.multi-line-text.text-for-edit-view-when-no-value-is-provided",defaultMessage:"None"}}),Vd=Object(ld.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(Fd.noValue),area:t.area})}))(Ud);const Kd=Object(j.defineMessages)({noValueText:{id:"issue.multiline-field.empty-placeholder",defaultMessage:"None"}});function Bd(){return(Bd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Wd(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Hd=e=>{const{label:t,area:s,hasDraft:n,intl:i,isEditing:r,containerWidth:o}=e,c=Wd(e,["label","area","hasDraft","intl","isEditing","containerWidth"]),l=n&&!r,u="content"===s?Ki.c:Ru.e,d="content"===s?Ki.e:Ru.f,p=Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?Ku:"div",m=Object(Vu.a)(s);return a.a.createElement(p,null,a.a.createElement(u,null,a.a.createElement(Ki.b,null,a.a.createElement(d,null,t),!0===l?a.a.createElement(Ki.a,null,`\u2022 ${i.formatMessage(Vr.draftIndicator)}`):null,!0===m&&a.a.createElement(Nu.a,{fieldId:e.fieldId,label:t}))),a.a.createElement(kd,Bd({isEditing:r},c)))};Hd.displayName="MultilineField";var Gd=Object(ld.a)((e,t)=>({fieldId:t.fieldId,shouldSaveDraft:!0,isOptimistic:!0,saveField:({baseUrl:e,issueKey:s,value:n})=>((e,t,s,n)=>{const a=`${e}/rest/api/3/issue/${t}`;return Object(Bu.e)(a,{body:JSON.stringify({fields:{[s]:n}})})})(e,s,t.fieldId,n),canContainMediaContent:!0,onSaveFailureFlagType:Ys.H,additionalProps:(e,s)=>{const n=Object(P.g)(e);return{baseUrl:n,portalElement:id(t.fieldId)(e)?$u()||document.body:void 0,adfValue:Object(ea.g)(t.fieldId)(e),hasDraft:_r(t.fieldId)(e),htmlValue:Object(ea.i)(t.fieldId)(e),isInvalid:Object(ea.k)(t.fieldId)(e),invalidMessage:Object(ea.j)(t.fieldId)(e),mediaContext:Object(x.a)(e),mentionProvider:Object(T.a)(e),mentionEncoder:Object(C.a)(n),activityProvider:Object(Hu.a)(e),externalId:`issue.${t.fieldId}`,noValueText:s.formatMessage(Kd.noValueText),area:t.area}},additionalCallbacks:e=>({onExpandedFailure:()=>e(Object(Wu.b)()),onSaveFailure:()=>e(Object(Wu.c)()),onChangeFailure:()=>e(Object(Wu.a)())})}))(Ui(Object(j.injectIntl)(Hd)));var $d=Object(i.b)((e,t)=>({isRichTextField:Object(ea.G)(t.fieldId)(e)}),{})(e=>{const{isRichTextField:t,fieldId:s,area:n="context"}=e;return t?a.a.createElement(Gd,{fieldId:s,area:n}):a.a.createElement(Vd,{fieldId:s,area:n})}),qd=s("./src/packages/servicedesk/approval-panel/src/async.js");const zd=e=>({type:"CONTEXT_PANEL_SHOW",payload:e}),Yd=()=>({type:"CONTEXT_PANEL_HIDE"}),Qd=e=>a.a.createElement(qd.b,e);Qd.displayName="ApprovalPanelContainer";var Jd=Object(Ts.a)([Object(i.b)(e=>{const t="servicedesk-approvals",s=ql(e,t)||"",n=Object(ea.A)(s)(e);return{approval:Yl(e,t),baseUrl:Object(P.g)(e),issueId:Object(P.A)(e),fieldId:t,isSimplifiedProject:Object(_.u)(e),hasLinkedFieldEditPermissions:n,canCurrentUserApprove:Zl(e,t)}},e=>({onOpenPanel:(t,s)=>{e(zd({key:"approval-panel",type:"approval-panel",title:s,payload:{approvalFieldId:t}}))},onSaveApprovalAnswerError:()=>{e((()=>({type:Ys.K}))())},onSaveApprovalAnswerSuccess:()=>{e((()=>({type:Ys.L}))())},onZeroApprovalRequired:()=>{e((()=>({type:"ZERO_APPROVAL_REQUIRED"}))())}}))])(Qd);function Zd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Xd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Zd(Object(s),!0).forEach((function(t){ep(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Zd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ep(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const tp=e=>a.a.createElement(qd.a,e);tp.displayName="AsyncApprovalGlancePanelContainer";var sp=Object(Ts.a)([Object(i.b)((e,t)=>{const s=t.payload&&t.payload.approvalFieldId||"",n=ql(e,s)||"",a=Object(ea.A)(n)(e),i=Object(ea.o)("status")(e)||{};return{fieldId:n,approvalFieldId:s,approval:Yl(e,s),baseUrl:Object(P.g)(e),issueKey:Object(P.B)(e),fieldMetaKey:Object(ea.l)(n)(e)||"",fieldAutoCompleteUrl:Object(ea.d)(n)(e)||"",hasLinkedFieldEditPermissions:a,portalElement:Gu()||document.body,issueStatusId:i.id}},e=>({renderApproverList:()=>{e(Object(ps.g)())},onApproverListUpdated:(t,s)=>{e(((e,t)=>({type:"UPDATE_APPROVAL_LINKED_USER_PICKER_FIELD",payload:{linkedUserPickerFieldId:e,newApproverList:t}}))(t,s))},onHidePanel:()=>{e(Yd())},onAddApproverError:()=>{e((()=>({type:Ys.a}))())},onRemoveApproverError:()=>{e((()=>({type:Ys.F}))())}}),(e,t,s)=>Xd(Xd(Xd(Xd({},s),e),t),{},{onApproverListUpdated:s=>{t.onApproverListUpdated(e.fieldId,s)}}))])(tp),np=s("./node_modules/lodash/memoize.js"),ap=s.n(np),ip=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),rp=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),op=s("./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js"),cp=s("./src/packages/issue/permissions-service/src/main.js"),lp=s("./node_modules/lodash/toString.js"),up=s.n(lp),dp=s("./node_modules/uuid/index.js"),pp=s.n(dp);const mp=ap()((e,t,s)=>Object(rp.a)(((e,t,s="")=>`${t}/rest/api/3/user/assignable/search?issueKey=${e}&recommend=true&query=&sessionId=${s}`)(e,t,s))),bp=ap()((e,t,s,n,a)=>{const i=`${e.baseUrl}/gateway/api/fields/v2/prefetch`;return Object(rp.a)(i,{body:JSON.stringify({context:{product:"jira",sessionId:n,containerId:e.projectId,objectId:e.issueId,principalId:e.accountIdloggedInUser,tenantId:e.cloudId,additionalContext:{properties:t,type:"issue",customPropertyMappings:s}},prefetchFields:a}),headers:{"Content-Type":"application/json"},method:"POST"})},e=>+e.issueId),fp=ap()((e,t,s,n)=>Object(rp.a)(((e,t,s="",n)=>`${t}/rest/api/1.0/labels/${n}/suggest?query=&sessionId=${s}`)(0,t,s,n)));function gp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gp(Object(s),!0).forEach((function(t){yp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function yp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Op="smart-field-prefetch.index",jp={assignee:mp,labels:fp},Ep={assignee:null,labels:null},vp={setField:(e,t,s,n,a)=>({setState:i})=>{i({[e]:{prefetchSessionId:t,prefetched:s,fieldValuePromise:a,sessionId:n}})}},kp={},wp=e=>(kp[e]||(kp[e]=(e=>Object(k.d)({name:`smart-issue-prefetch-${e}`,initialState:Ep,actions:vp}))(e)),kp[e]),Sp={},Ip=(e,{fieldId:t}={})=>e[t],Cp={},Tp=(e,t)=>{if(void 0!==Sp[e]&&null!==Sp[e]){if(void 0!==Sp[e][t]&&null!==Sp[e][t])return Sp[e][t]}else Sp[e]=hp({labels:null,assignee:null},Sp[e]);return Sp[e][t]=Object(k.e)(wp(e),{selector:Ip}),Sp[e][t]},Pp=e=>null!=e,_p=e=>Pp(e)&&""!==e;var xp=Object(n.memo)(e=>{const t=(e=>{if(_p(e.projectId)&&Pp(e.issueId)&&e.issueId!==Object(vr.j)("")&&_p(e.cloudId)&&_p(e.issueKey)&&Pp(e.fields))return hp(hp({},e),{},{issueId:e.issueId,projectId:e.projectId})})(e);if(void 0===t)return null;const[s,a]=(e=>(Cp[e]||(Cp[e]=Object(k.c)(wp(e))),Cp[e]))(t.issueKey)(),{issueId:i,cloudId:r,projectId:o,accountIdloggedInUser:c,fields:l,baseUrl:u,issueKey:d,customFieldMappings:p,createAnalyticsEvent:m}=t,b={issueId:i,cloudId:r,projectId:o,accountIdloggedInUser:c,baseUrl:u};return Object(n.useEffect)(()=>{if(s&&Object.values(s).filter(e=>e).length>0)return;const e=Object.keys(jp||{}),t=e.filter(e=>!!l[e]&&l[e].editable);if(!((e,t,s)=>!(e.length<t.length&&(s&&y.a.safeInfo(Op,"Prefetch request skipped for non-editable fields.",s({action:"skipped",actionSubject:"prefetch"}).update({prefetchableFields:t,permissiableFields:e})),0===e.length)))(t,e,m))return;const n=pp.a.v4();bp(b,l,p,n,t).then(({prefetchFields:e=[]})=>{((e,t,s,n)=>{if(null==e)return;const a=e({action:"requested",actionSubject:"prefetchFields",actionSubjectId:n}),i={prefetchSessionId:n,requestedFields:t,positiveFields:s};Object(qi.c)(a,"prefetchFields requested",n,i)})(m,t,e,n),t.forEach(t=>{if(e.includes(t)){const e=pp.a.v4(),s=jp[t](d,u,e,i);a.setField(t,n,!0,e,s),((e,t,s,n)=>{if(null==e)return;const a=e({action:"prefetched",actionSubject:"field"}),i={fieldFetchSessionId:n,prefetchSessionId:s,fieldId:t};Object(qi.c)(a,"field prefetched",i)})(m,t,n,e)}else a.setField(t,n,!1,null,null)})}).catch(e=>{y.a.safeError(Op,"error while calling frs prefetch",e)})},[u,b,l,d,p,a,m,i,s]),null},(e,t)=>up()(e.issueId)===up()(t.issueId)&&up()(e.projectId)===up()(t.projectId)),Dp=s("./src/packages/platform/utils/constants/src/fetch-default-options-with-strict-mode.js");function Ap(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ap(Object(s),!0).forEach((function(t){Lp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ap(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Lp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Rp=(e,t,s,n)=>Object(Bu.e)(((e,t,s)=>s?`${e}/rest/api/3/issue/${t}/assignee?sessionId=${s}`:`${e}/rest/api/3/issue/${t}/assignee`)(e,t,n),Mp(Mp({},Dp.a),{},{body:JSON.stringify({accountId:s})}));var Np=s("./node_modules/lodash/isNil.js"),Up=s.n(Np),Fp=s("./node_modules/@atlaskit/form--current/dist/esm/Messages.js"),Vp=s("./node_modules/@atlaskit/input/dist/esm/index.js"),Kp=s("./src/packages/issue/fields/components/user-picker/src/main.js"),Bp=s("./src/packages/profilecard-next/src/common/constants.js"),Wp=Q.default.div(["padding-right:","px;padding-top:1px;& span[role='img']{background-color:"," !important;}"],J.e,Je.a.N30),Hp=Q.default.div(["align-items:center;display:flex;padding-top:1px;"]);function Gp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gp(Object(s),!0).forEach((function(t){qp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zp=Q.default.div([""," margin-bottom:24px;"],({isEditing:e,fixedHeight:t})=>!e&&`\n        & > div > div > div > div > div {\n            min-height: ${4*J.e}px !important;\n        }\n        & > div > div > div > div > div > div {\n            padding: 0;\n            padding-left: 6px;\n            height: ${t?`${4*J.e}px`:"unset"};\n        }\n    `);class Yp extends n.Component{constructor(...e){super(...e),this.shouldTrackAssigneeInteractions=()=>"assignee"===this.props.fieldId,this.onChange=e=>{this.shouldTrackAssigneeInteractions()&&Object(Rr.c)().markStartOfInteraction({key:Hr.TIME_TO_REFLECT_SELECTED,cancelExisting:!0}),this.props.onChange(e)},this.onDataRequest=e=>{!0!==e&&this.shouldTrackAssigneeInteractions()&&Object(Rr.c)().markStartOfInteraction({key:Hr.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=(e=!0,t=0)=>{this.shouldTrackAssigneeInteractions()&&Object(Rr.c)().markTimeToFinishTask({key:e?Hr.TIME_TO_RENDER_INITIAL_SUGGESTIONS:Hr.TIME_TO_REFLECT_INPUT_RESULT,collectors:[e=>$p($p({},e),{},{resultsLength:t})]})},this.onEditRequested=()=>{this.shouldTrackAssigneeInteractions()&&Object(Rr.c)().markStartOfInteraction({key:Hr.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()}}componentDidUpdate(e){if(this.shouldTrackAssigneeInteractions()){const{value:t,isEditing:s}=this.props;!1===e.isEditing&&!1===s&&e.value!==t&&Object(Rr.c)().markTimeToFinishTask({key:Hr.TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT}),e.isEditing&&!s&&e.value!==t&&Object(Rr.c)().markTimeToFinishTask({key:Hr.TIME_TO_REFLECT_SELECTED}),!e.isEditing&&s&&setTimeout(()=>{Object(Rr.c)().markTimeToFeedback({key:Hr.TIME_TO_RENDER_INITIAL_SUGGESTIONS})},0)}}getActions(){const{fieldId:e}=this.props;return"reporter"===e?[Bp.c,Bp.b]:"assignee"===e?[Bp.c,Bp.a]:void 0}renderReadView(){const{customReadView:e}=this.props;if(e)return e(this.props.value);const t=this.props.value||this.props.emptyOption||{avatarUrl:"",name:""};return(a.a.createElement(Wr.a,{userAccount:t,analyticsData:{trigger:this.props.fieldId},position:"left-start",actions:this.getActions()},a.a.createElement(Hp,null,a.a.createElement(Wp,null,a.a.createElement(xr.a,{borderColor:"transparent",src:t.avatarUrl,size:"small"})),a.a.createElement(Vp.a,{isEditing:!1,value:t.name}))))}renderReadViewWithContentWrapper(){const e=this.props.fieldContentWrapper;return Up()(e)?this.renderReadView():a.a.createElement(e,null,this.renderReadView())}renderEditView(){const{portalElement:e,emptyOption:t,initialOptions:s,fetchSuggestions:n,fieldId:i,value:r,onCancel:o,onConfirm:c}=this.props,l={portalElement:e,emptyOption:t,initialOptions:s,fetchSuggestions:n,fieldId:i,value:r,onCancel:o,onSelection:c,width:"100%",onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded,onChange:this.onChange};return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Kp.a,l):a.a.createElement(G.a,{onEscape:o},a.a.createElement(Kp.a,l))}render(){const{intl:e,label:t,isEditing:s,isEditable:n,isMobile:i,invalidMessage:r,fieldId:c,titleView:l=this.props.label,showPinButton:u,onCancel:d,customReadView:p}=this.props;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,l),!0===u&&a.a.createElement(Nu.a,{fieldId:c,label:t})),a.a.createElement(Ru.g,{isEditing:s,"data-test-id":`issue.views.field.user.${c}`,fixedHeight:!p},null!=r?a.a.createElement(Fp.a,{key:`${c}-error-message`},r):null,a.a.createElement(G.a,{onEscape:d},a.a.createElement(dd.a,{editView:n?this.renderEditView():null,readView:this.renderReadViewWithContentWrapper(),areActionButtonsHidden:!0,disableEditViewFieldBase:!0,shouldConfirmOnEnter:!0,isEditing:s,isInvalid:!!r,invalidMessage:r,isLabelHidden:!0,label:t,onCancel:o.a,onConfirm:o.a,onEditRequested:this.onEditRequested,onFocus:o.a,isFitContainerWidthReadView:!i,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:t})})))):a.a.createElement("div",null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,l)),a.a.createElement(zp,{isEditing:this.props.isEditing,fixedHeight:!this.props.customReadView,"data-test-id":`issue.views.field.user.${this.props.fieldId}`},null!=this.props.invalidMessage?a.a.createElement(Fp.a,{key:`${this.props.fieldId}-error-message`},this.props.invalidMessage):null,a.a.createElement(dd.a,{editView:this.props.isEditable?this.renderEditView():null,readView:this.renderReadViewWithContentWrapper(),areActionButtonsHidden:!0,disableEditViewFieldBase:!0,shouldConfirmOnEnter:!0,isEditing:this.props.isEditing,isInvalid:!!this.props.invalidMessage,invalidMessage:this.props.invalidMessage,isLabelHidden:!0,label:this.props.label,onCancel:o.a,onConfirm:o.a,onEditRequested:this.onEditRequested,onFocus:o.a,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:this.props.label})})))}}Yp.displayName="UserInlineEditView",Yp.displayName="UserInlineEditView",Yp.defaultProps={isMobile:!1,label:"",initialOptions:[],emptyOption:null,invalidMessage:null,value:null};var Qp=Object(j.injectIntl)(Yp);const Jp=(e,t,s,n,a,i)=>{if(null==e)return;const r=e({action:"access",actionSubject:"fieldPrefetchCache",actionSubjectId:n}),o={fieldSelectionSessionId:n,fieldFetchSessionId:i,prefetchSessionId:s,cacheHit:t,fieldId:a};Object(qi.b)(r,"fieldPrefetchCache access",n,o)},Zp=(e,t,s,n,a)=>Jp(e,!0,t,s,a,n),Xp=(e,t,s,n)=>Jp(e,!1,t,s,n),em=(e,t,s,n,a)=>{n&&Object(qi.b)(n({action:e,actionSubject:t}),`${t} ${e}`,{sessionId:a||"",elapsedTimeMs:ip.default.now()-s})},tm=(e,t,s,n)=>{em("succeeded",`${e}Suggestions`,t,s,n)},sm=(e,t,s,n)=>{em("failed",`${e}Suggestions`,t,s,n)},nm=e=>e?(e=>({avatarUrl:e.avatarUrls&&e.avatarUrls["48x48"],id:e.accountId,name:e.displayName}))(e):null,am=e=>e?(e=>({avatarUrls:{"48x48":e.avatarUrl},displayName:e.name,accountId:e.id}))(e):null;function im(){return(im=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function rm(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const om=Object(j.defineMessages)({assignToMe:{id:"issue.assignee.text-for-logged-in-user",defaultMessage:"Assign to me"},unassignedOption:{id:"issue.assignee.text-when-no-value-is-provided",defaultMessage:"Unassigned"}}),cm=e=>e&&e.accountId,lm=Object(Mu.a)(e=>({avatarUrl:"",name:e(om.unassignedOption)})),um=Object(Mu.a)((e,t)=>e?[{avatarUrl:e.avatarUrl,id:e.id,name:e.displayName,displayName:t(om.assignToMe)}]:[]),dm=Object(Mu.a)((e,t)=>e?[{avatarUrl:"",id:null,name:t(om.unassignedOption),displayName:t(om.unassignedOption)}]:[]),pm=Object(Mu.a)((e,t,s,n)=>[...!Boolean(t&&e&&e.id===t.accountId)&&n?um(e,s):[],...t?dm(e,s):[]]),mm=(e,t)=>!!e&&t.toLowerCase().startsWith(e.toLowerCase()),bm=(e,t)=>Object(Mu.a)(s=>{const n=mm(s,t(om.assignToMe));return[...mm(s,t(om.unassignedOption))?dm(e,t):[],...n?um(e,t):[]]}),fm=Object(Mu.a)((e,t,s,n)=>(a,i)=>{if(!e)return Promise.resolve([]);const r=bm(t,s)(a),o=null!=i?`&sessionId=${i}`:"";if(Object(Qe.isFieldSuggestionsRequestAnalyticsEnabled)()){const t=ip.default.now();return Object(rp.a)(`${e}${a}${o}`).then(e=>{tm("assignee",t,n,i);const s=e.map(nm).filter(Boolean);return[...r,...s]}).catch(e=>{throw sm("assignee",t,n,i),e})}return Object(rp.a)(`${e}${a}${o}`).then(e=>{const t=e.map(nm).filter(Boolean);return[...r,...t]})}),gm=ap()((e,t)=>(s,n)=>{if(!s&&null!=e){const{prefetchSessionId:a,prefetched:i,fieldValuePromise:r,sessionId:o}=e,{createAnalyticsEvent:c}=t;if(i&&null!==r&&null!==o){const e=t.getDefaultOptions(s);if(Zp(c,a,n||"",o,"assignee"),Object(Qe.isFieldSuggestionsRequestAnalyticsEnabled)()){const t=ip.default.now();return r.then(s=>{tm("assignee",t,c,n);const a=s.map(nm).filter(Boolean);return[...e,...a]}).catch(e=>{throw sm("assignee",t,c,n),e})}return r.then(e=>e.map(nm).filter(Boolean)).then(t=>[...e,...t])}return Xp(c,a,n||"","assignee"),t.fetchSuggestions(s,n)}return t.fetchSuggestions(s,n)},(e,t)=>`${e&&e.prefetchSessionId||""}_${t.issueKey}`),hm=e=>{Object(n.useMemo)(()=>e.initFieldOptions(),[]);const t=Object(n.useRef)(null);Object(n.useEffect)(()=>{t.current&&e.isEditing&&Object(Br.a)(t.current)},[e.isEditing]);const[{value:s}]=Object(op.a)({issueKey:e.issueKey}),[{canBeAssignedToIssues:i,canAssignIssues:r}]=Object(cp.a)(),o=!!r,{formatMessage:c}=Object(Ge.c)(),l=pm(e.loggedInUser,s,c,!!i),u=Object(n.useCallback)(()=>{const t=Tp(e.issueKey,"assignee");return(a.a.createElement(t,{fieldId:"assignee"},t=>{const n=gm(t,e),{createAnalyticsEvent:i,getDefaultOptions:r,initFieldOptions:u,intl:d,issueKey:p,loggedInUser:m}=e,b=rm(e,["createAnalyticsEvent","getDefaultOptions","initFieldOptions","intl","issueKey","loggedInUser"]);return a.a.createElement(Qp,im({},b,{fetchSuggestions:n,fieldId:"assignee",value:nm(s),initialOptions:l,isEditable:o,emptyOption:lm(c)}))}))},[c,l,o,e,s]);return a.a.createElement(Kc.a,{name:"EDIT_FIELD"},a.a.createElement("div",{ref:e=>{t.current=e}},u()))};hm.displayName="AssigneeView",hm.displayName="AssigneeView";const ym=(e,t)=>`${e}/rest/api/3/user/assignable/search?issueKey=${t}&recommend=true&query=`,Om=({baseUrl:e,issueKey:t,value:s,saveFieldData:n})=>{const a=null==s?null:s.accountId;return Rp(e,t,a,n)};var jm=Nt()(Object(b.a)(),Object(Fu.b)("assignee"),Object(ld.a)((e,t)=>(e=>({fieldId:"assignee",transformFromStateValue:nm,transformToStateValue:am,saveField:Om,additionalProps:(t,s)=>{const n=Object(_.y)(t);return{portalElement:id(e.fieldId)(t)?Gu()||document.body:void 0,fetchSuggestions:fm(ym(Object(P.g)(t),Object(P.B)(t)),n,s.formatMessage,e.createAnalyticsEvent),issueKey:Object(P.B)(t),getDefaultOptions:bm(n,s.formatMessage),loggedInUser:n,showPinButton:Object(Vu.a)(e.area),analyticsAttributeIdRetriever:cm}}}))(t)))(hm),Em=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");function vm(){return(vm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function km(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const wm=Object(j.defineMessages)({assignToMe:{id:"issue.assignee.text-for-logged-in-user",defaultMessage:"Assign to me"},unassignedOption:{id:"issue.assignee.text-when-no-value-is-provided",defaultMessage:"Unassigned"}}),Sm=Object(Mu.a)(e=>({avatarUrl:"",name:e.formatMessage(wm.unassignedOption)})),Im=Object(Mu.a)((e,t)=>e?[{avatarUrl:e.avatarUrl,id:e.id,name:e.displayName,displayName:t.formatMessage(wm.assignToMe)}]:[]),Cm=Object(Mu.a)((e,t)=>e?[{avatarUrl:"",id:null,name:t.formatMessage(wm.unassignedOption),displayName:t.formatMessage(wm.unassignedOption)}]:[]),Tm=Object(Mu.a)((e,t,s,n)=>[...!(t&&e&&e.id===t.accountId)&&n?Im(e,s):[],...t?Cm(e,s):[]]),Pm=(e,t)=>!!e&&t.toLowerCase().startsWith(e.toLowerCase()),_m=(e,t)=>Object(Mu.a)(s=>{const n=Pm(s,t.formatMessage(wm.assignToMe));return[...Pm(s,t.formatMessage(wm.unassignedOption))?Cm(e,t):[],...n?Im(e,t):[]]}),xm=Object(Mu.a)((e,t,s)=>(n,a)=>{if(!e)return Promise.resolve([]);const i=_m(t,s)(n),r=null!=a?`&sessionId=${a}`:"";return Object(rp.a)(`${e}${n}${r}`).then(e=>{const t=e.map(nm).filter(Boolean);return[...i,...t]})}),Dm=ap()((e,t)=>(s,n)=>{if(!s&&null!=e){const{prefetchSessionId:a,prefetched:i,fieldValuePromise:r,sessionId:o}=e,{createAnalyticsEvent:c}=t;if(i&&null!==r&&null!==o){const e=t.getDefaultOptions(s);return Zp(c,a,n||"",o,"assignee"),r.then(e=>e.map(nm).filter(Boolean)).then(t=>[...e,...t])}return Xp(c,a,n||"","assignee"),t.fetchSuggestions(s,n)}return t.fetchSuggestions(s,n)},(e,t)=>`${e&&e.prefetchSessionId||""}_${t.issueKey}`);class Am extends n.Component{constructor(...e){super(...e),this.assigneeContainer=void 0}componentDidMount(){this.props.initFieldOptions()}componentDidUpdate(){this.assigneeContainer&&this.props.isEditing&&Object(Br.a)(this.assigneeContainer)}renderWithCachedValue(){const{props:e}=this,t=Tp(e.issueKey,"assignee");return a.a.createElement(t,{fieldId:"assignee"},t=>{const s=Dm(t,e),{createAnalyticsEvent:n,getDefaultOptions:i,initFieldOptions:r,intl:o,issueKey:c}=e,l=km(e,["createAnalyticsEvent","getDefaultOptions","initFieldOptions","intl","issueKey"]);return a.a.createElement(Qp,vm({},l,{fetchSuggestions:s,fieldId:"assignee"}))})}render(){return a.a.createElement(Kc.a,{name:"EDIT_FIELD"},a.a.createElement("div",{ref:e=>{this.assigneeContainer=e}},this.renderWithCachedValue()))}}Am.displayName="AssigneeView",Am.displayName="AssigneeView";const Mm=(e,t)=>`${e}/rest/api/3/user/assignable/search?issueKey=${t}&recommend=true&query=`,Lm=({baseUrl:e,issueKey:t,value:s,saveFieldData:n})=>{const a=null==s?null:s.accountId;return Rp(e,t,a,n)},Rm=e=>e&&e.accountId;var Nm=Nt()(Object(b.a)(),Object(Fu.b)("assignee"),Object(ld.a)((e,t)=>(e=>({fieldId:e.fieldId,transformFromStateValue:nm,transformToStateValue:am,saveField:Lm,additionalProps:(t,s)=>{const n=Object(_.y)(t);return{portalElement:id(e.fieldId)(t)?Gu()||document.body:void 0,fetchSuggestions:xm(Mm(Object(P.g)(t),Object(P.B)(t)),n,s),issueKey:Object(P.B)(t),getDefaultOptions:_m(n,s),isEditable:Object(Em.a)(t),emptyOption:Sm(s),initialOptions:Tm(n,Object(ea.n)(e.fieldId)(t),s,Object(Yu.d)(t)),showPinButton:Object(Vu.a)(e.area),analyticsAttributeIdRetriever:Rm}}}))(t)))(Am),Um=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),Fm=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),Vm=s("./src/packages/issue/fields/cascading-select-custom-field/src/common/utils.js"),Km=s("./src/packages/issue/fields/cascading-select-custom-field/src/ui/cascading-select-view/main.js"),Bm=Object(j.defineMessages)({noOptionsSelected:{id:"issue-field-cascading-select.no-options-selected",defaultMessage:"None"}});const Wm=Q.default.div(["z-index:300;position:relative;"]);function Hm(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Gm=(e,t)=>e&&e.child?`${e.label} - ${e.child.label}`:e?e.label:t.formatMessage(Bm.noOptionsSelected),$m=e=>{const{label:t,isEditable:s,isMobile:i,allowedValues:r,areOptionsOnSameRow:o,showPinButton:c,intl:l}=e,u=Hm(e,["label","isEditable","isMobile","allowedValues","areOptionsOnSameRow","showPinButton","intl"]),[{value:d,error:p},{saveValue:m}]=Object(Fm.a)(u),[b,f]=Object(n.useState)(Object(Vm.a)(d)),[g,h]=Object(n.useState)(Object(Vm.a)(d)),[y,O]=Object(n.useState)(!1),[j,E]=Object(n.useState)(Gm(b,l)),v=Object(n.useCallback)(e=>{E(Gm(e,l))},[l]),k=()=>O(!0),w=e=>{m(Object(Vm.d)(b),null,e),O(!1),v(b),Object(qi.h)(e,"cascadingSelect",{hasChild:!(!b||!b.child||null==b.child),isEmpty:!b}),h(b)},S=()=>{O(!1),f(g)},I=async e=>{f(e)},C=()=>b?a.a.createElement("div",null,j):a.a.createElement(pr.b,null,j),T=()=>a.a.createElement(Wm,null,a.a.createElement(Km.a,{value:b,allowedValues:Object(Vm.b)(r),allowedChildValues:Object(Vm.c)(r),onChange:I,isInvalid:!!p,areOptionsOnSameRow:o,isEditable:s}));return Object(n.useEffect)(()=>{v(b)},[b,v]),Object(n.useEffect)(()=>{p&&O(!0)},[p]),Object(n.useEffect)(()=>{f(Object(Vm.a)(d))},[d]),Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,t),!0===c&&a.a.createElement(Nu.a,{fieldId:u.fieldKey,label:t})),a.a.createElement(Ru.g,{isEditing:y},a.a.createElement(G.a,{onEscape:S},a.a.createElement(dd.a,{isLabelHidden:!0,label:t,readView:C(),editView:s?T():null,onConfirm:w,onCancel:S,onEditRequested:k,isEditing:y,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!i})))):a.a.createElement("div",null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,t)),a.a.createElement(bd,{isLabelHidden:!0,label:t,readView:C(),editView:s?T():null,onConfirm:w,onCancel:S,onEditRequested:k,isEditing:y,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!i}))};$m.defaultProps={initialValue:null,isMobile:!1,areOptionsOnSameRow:!1,fieldType:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect"};var qm=Object(j.injectIntl)($m);function zm(){return(zm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Ym=e=>{const{issueKey:t,fieldKey:s,label:n}=e,[i]=Object(Um.b)({issueKey:t,fieldKey:s}),[r]=Object(Au.a)(t,s);return a.a.createElement(qm,zm({},e,{allowedValues:r&&r.allowedValues||[],isEditable:r&&r.isEditable||!1,label:r&&r.title||n,initialValue:i}))};Ym.displayName="CascadingSelectView";var Qm=Object(Ts.a)([Object(i.b)((e,{fieldId:t,area:s})=>({fieldKey:t,fieldType:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect",error:Object(_.h)(e),issueKey:Object(P.B)(e),isMobile:Object(P.u)(e),label:Object(ea.m)(t)(e),areOptionsOnSameRow:"content"===s||"content-request"===s,showPinButton:Object(Vu.a)(s)}),{})])(Object(Uu.b)()(Ym)),Jm=s("./node_modules/@atlaskit/tag--current/dist/esm/Tag/index.js"),Zm=s("./node_modules/@atlaskit/tag-group/dist/esm/TagGroup/index.js"),Xm=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/check-for-href.js");const eb=Q.default.div(["margin:-4px;width:100%;"]);class tb extends n.Component{constructor(...e){super(...e),this.handleTagSelected=e=>{Object(Xm.a)(e.target,e.currentTarget)&&(e.stopPropagation(),this.props.onClick&&this.props.onClick())},this.handleTagMouseDown=e=>{e.preventDefault(),Object(Xm.a)(e.target,e.currentTarget)&&e.stopPropagation()},this.renderTag=e=>{const t=a.a.createElement(Jm.a,{appearance:this.props.tagAppearance,text:void 0!==e.content?e.content:e.label,color:e.color,href:this.props.shouldHideLinks?void 0:e.href,elemBefore:e.elemBefore});return this.props.isUserTag?a.a.createElement(Wr.a,{userAccount:e,analyticsData:{trigger:"user-tag"},position:"left-start"},t):t}}render(){const{value:e,noValueText:t}=this.props;return e&&!mo()(e)?a.a.createElement(eb,null,a.a.createElement(Zm.a,null,e.map(e=>a.a.createElement("div",{onClick:this.handleTagSelected,onMouseDown:this.handleTagMouseDown,onKeyPress:this.handleTagSelected,key:null!=e.key?e.key:e.value,role:"presentation"},this.renderTag(e))))):a.a.createElement(pr.b,null,t)}}tb.displayName="TagView",tb.defaultProps={isUserTag:!1,shouldHideLinks:!1,value:null,noValueText:null,tagAppearance:"default"};var sb=Object(Vs.a)("tagView",{onClick:"clicked"})(tb),nb=s("./node_modules/@atlaskit/select/dist/esm/CheckboxSelect.js"),ab=s("./node_modules/@atlaskit/icon/glyph/error.js"),ib=s.n(ab);const rb=Q.default.div(["align-items:center;color:",";display:flex;margin-top:","px;"],e=>e.colour,J.e/2),ob=Q.default.div(["margin-left:","px;"],J.e/2),cb={default:null,success:null,error:Je.a.R400};class lb extends n.Component{render(){const{children:e,validationMessage:t,validationState:s}=this.props;return(a.a.createElement("div",null,e,s&&t?a.a.createElement(rb,{colour:cb[s]},a.a.createElement(ib.a,{label:`${s} icon`,role:"presentation"}),a.a.createElement(ob,null,t)):null))}}lb.displayName="SelectValidationWrapper",lb.displayName="SelectValidationWrapper",lb.defaultProps={children:null,validationState:"default",validationMessage:null};class ub extends n.Component{render(){const{invalidMessage:e,options:t,placeholder:s,onChange:n,value:i}=this.props;return(a.a.createElement(lb,{validationState:null!=e?"error":null,validationMessage:e},a.a.createElement(nb.a,{options:t,placeholder:s,onChange:n,value:i,tabSelectsValue:!1,autoFocus:!0})))}}ub.displayName="CheckboxFieldView",ub.displayName="CheckboxFieldView",ub.defaultProps={value:[],options:[],placeholder:null,invalidMessage:null};class db extends n.Component{renderReadView(){return a.a.createElement(sb,{value:this.props.value,noValueText:this.props.noValueText,tagAppearance:this.props.tagAppearance,shouldHideLinks:this.props.isMobile})}renderEditView(){return a.a.createElement(ub,{value:this.props.value,options:this.props.options,onChange:this.props.onChange,placeholder:this.props.placeholder,invalidMessage:this.props.invalidMessage})}render(){const{intl:e,label:t,onCancel:s,isEditable:n,isEditing:i,onConfirm:r,onEditRequest:o,isMobile:c,fieldId:l,showPinButton:u}=this.props;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,t),!0===u&&a.a.createElement(Nu.a,{fieldId:l,label:t})),a.a.createElement(Ru.g,{isEditing:i},a.a.createElement(G.a,{onEscape:s},a.a.createElement(dd.a,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:i,onConfirm:r,onCancel:s,onEditRequested:o,isFitContainerWidthReadView:!c,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:t})})))):a.a.createElement("div",null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,this.props.label)),a.a.createElement(G.a,{onEscape:this.props.onCancel},a.a.createElement(bd,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:this.props.isEditing,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:this.props.label})})))}}db.displayName="CheckboxInlineEditView",db.displayName="CheckboxInlineEditView",db.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,options:[],value:[],label:"",placeholder:null,noValueText:null,tagAppearance:"default",invalidMessage:null};var pb=Object(j.injectIntl)(db);const mb=Object(j.defineMessages)({noValue:{id:"issue.context-items.text-for-edit-view-when-no-value-is-provided",defaultMessage:"None"},version_no_value_placeholder:{id:"issue.version.text-no-value",defaultMessage:"Select version"}}),bb=e=>({label:e.value,value:e.id}),fb=e=>e?e.map(bb):[],gb=e=>e&&e.map(e=>({id:e.value,value:e.label})),hb=Object(j.defineMessages)({placeholder:{id:"issue.checkbox-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),yb=ap()(e=>(e=>e&&e.map(bb)||[])(e));var Ob=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:fb,transformToStateValue:gb,additionalProps:(e,s)=>({options:yb(Object(ea.c)(t.fieldId)(e)),placeholder:s.formatMessage(hb.placeholder,{fieldName:Object(ea.m)(t.fieldId)(e)}),noValueText:s.formatMessage(mb.noValue),showPinButton:Object(Vu.a)(t.area)})}))(pb),jb=s("./node_modules/react-async-component/commonjs/index.js");const Eb=Object(jb.asyncComponent)({resolve:()=>s.e("async-cmdb-object-inline-edit-view").then(s.bind(null,"./src/packages/issue/fields/cmdb-object/src/ui/main.js")),name:"AsyncIssueCmdbObjectField"});var vb=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),kb=Object(ld.a)((e,{fieldId:t})=>({fieldId:t,additionalProps:e=>{var s;const n=Object(ea.q)(t)(e)||{},a=Object(P.B)(e);return{issueKey:a,projectKey:Object(vb.a)(a),cmdbFieldConfig:null===(s=n.configuration)||void 0===s?void 0:s.cmdbFieldConfig}}}))(Eb),wb=s("./src/packages/platform/utils/constants/src/fetch-default-options.js");function Sb(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ib(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Sb(Object(s),!0).forEach((function(t){Cb(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sb(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Cb(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Tb=(e,t,s,n,a)=>!t||t.length<=1?Promise.resolve(t):((e,t,s)=>{let n;const a=new Promise(e=>{n=setTimeout(()=>{ja.i.safeWarn("smarts.fields.ranking","FRS has timeout after 5000ms"),e(t)},s)}),i=e().then(e=>(n&&clearTimeout(n),e));return Promise.race([a,i])})(()=>((e,t,s,n,a)=>{const i=t.map(e=>({[e.id]:e})).reduce((e,t)=>Ib(Ib({},e),t),{}),{atlassianAccountId:r,cloudId:o,baseUrl:c}=Object(ja.f)(),l=`${c}/gateway/api/fields/v2/recommendations/`;return Object(rp.a)(l,Ib(Ib({},wb.a),{},{method:"POST",body:JSON.stringify({context:{objectId:s,containerId:n,principalId:r,product:"jira",tenantId:o,sessionId:a},fieldId:e,fieldObjects:t.map(({id:e,name:t})=>({id:e,value:t}))})})).then(({fieldObjects:e})=>e.map(({id:e})=>i[e])).catch(s=>(ja.i.safeError("smarts.fields.ranking",`error while ranking ${e} via FRS`,s),t))})(e,t,s,n,a),t,5e3),Pb=Object(j.defineMessages)({placeholder:{id:"issue.components.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select component"},createNewItem:{id:"issue.components.create-new-component-message",defaultMessage:"Create new component"}}),_b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/jql/helpers.js");const xb=(e,{baseUrl:t,projectKey:s})=>e.map(e=>{const n=`project = ${Object(_b.b)(s)} AND component = ${Object(_b.b)(e.name)}`;return{href:Object(_b.a)(t,n),content:e.name,value:e.id}}),Db=e=>[{items:e.map(e=>({content:e.name,value:e.id}))}],Ab=e=>e.map(e=>({name:e.content,id:e.value}));var Mb=s("./node_modules/@atlaskit/icon/glyph/add.js"),Lb=s.n(Mb),Rb=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js");function Nb(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ub(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Nb(Object(s),!0).forEach((function(t){Fb(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Nb(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Fb(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Vb=Q.default.div(["display:flex;align-items:center;"]),Kb=Q.default.span(["margin-left:","px;flex-grow:1;"],J.e),Bb=Q.default.div(["display:flex;align-items:center;color:",";padding:6px 12px;&:hover{background-color:",";}&:active{background-color:",";}"],Je.a.B400,Je.a.N20,Je.a.B75),Wb={option:(e,t)=>Ub(Ub(Ub({},e),!0===t.data.__isNew__?Ub(Ub({},t.isFocused?{"> .issue-view__select-footer":{"background-color":Je.a.N20}}:{}),{},{position:"sticky",bottom:0,"background-color":`${Je.a.N0} !important`,"border-top":"2px solid rgba(9, 30, 66, 0.13)",padding:0,"padding-top":`${J.e}px`,"padding-bottom":0,overflow:"visible",":after":{content:'""',display:"block",position:"absolute",bottom:"-8px",left:0,width:"100%",height:"8px","background-color":Je.a.N0,"border-bottom-left-radius":`${J.e/2}px`,"border-bottom-right-radius":`${J.e/2}px`}}):{}),!0===t.data.isAkSelectOption?{"text-align":"center","padding-top":`${J.e}px`,"padding-bottom":`${2*J.e}px`}:{})};var Hb=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js");class Gb extends n.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{const{onChange:s,onConfirm:n}=this.props;s&&s(e,t),n()}}renderEditView(){const{fieldId:e,value:t,fetchSuggestions:s,additionalAnalyticsProps:n,placeholder:i,isEditing:r,isMulti:o,invalidMessage:c,hasAutocomplete:l,debounceFetchSuggestionsTime:u,allowEmptyValue:d,portalElement:p,canCreateNewItem:m,formatCreateLabel:b,styles:f,onChangeMulti:g,footer:h,onFooterSelect:y,shouldShowFooter:O,filterOption:j,formatOptionLabel:E,onDataRequest:v,onDataLoaded:k,components:w,componentsProps:S,initialData:I}=this.props;return(a.a.createElement(Hb.a,{initialData:I,componentsProps:S,components:w,fieldId:e,value:t,fetchSuggestions:s,additionalAnalyticsProps:n,placeholder:i,isOpen:r,invalidMessage:c,hasAutocomplete:l,debounceFetchSuggestionsTime:u,isClearable:d,portalElement:p,canCreateNewItem:m,formatCreateLabel:b,styles:f,autoFocus:!0,onChange:this.onChange,footer:h,onFooterSelect:y,shouldShowFooter:O,onChangeMulti:g,isMulti:o,filterOption:j,formatOptionLabel:E,onDataRequest:v,onDataLoaded:k,optionValuesSafeForAnalytics:this.props.optionValuesSafeForAnalytics}))}renderReadView(){const e=this.props.fieldContentWrapper;return Up()(e)?this.props.renderReadView():a.a.createElement(e,null,this.props.renderReadView())}render(){const{intl:{formatMessage:e},label:t,fieldId:s,isEditable:n,isEditing:i,isMobile:r,isMulti:o,showPinButton:c,onCancel:l,onEditRequest:u,onConfirm:d,titleView:p=this.props.label}=this.props;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,p),!0===c&&a.a.createElement(Nu.a,{fieldId:s,label:t})),a.a.createElement(Ru.g,{isEditing:i},a.a.createElement(G.a,{onEscape:l},a.a.createElement(dd.a,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!o,isEditing:i,onConfirm:d,onCancel:l,onEditRequested:u,isFitContainerWidthReadView:!r,editButtonLabel:e(ud.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e(ud.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e(ud.a.cancelButtonLabel,{fieldName:t})})))):a.a.createElement("div",null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,p)),a.a.createElement(G.a,{onEscape:l},a.a.createElement(bd,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!o,isEditing:i,onConfirm:d,onCancel:l,onEditRequested:u,isFitContainerWidthReadView:!r,editButtonLabel:e(ud.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e(ud.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e(ud.a.cancelButtonLabel,{fieldName:t})})))}}Gb.displayName="SelectInlineEditView",Gb.displayName="SelectInlineEditView",Gb.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,isMulti:!1,hasAutocomplete:!1,label:"",noValueText:null,allowEmptyValue:!1,debounceFetchSuggestionsTime:0,onChange:o.a};var $b=Object(j.injectIntl)(Gb);function qb(){return(qb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function zb(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Yb=e=>{const{validate:t,invalidMessage:s,value:n,onChange:i,tagAppearance:r,onDataRequest:o,onDataLoaded:c,customReadView:l}=e,u=zb(e,["validate","invalidMessage","value","onChange","tagAppearance","onDataRequest","onDataLoaded","customReadView"]);return a.a.createElement($b,qb({},u,{value:n,isMulti:!0,onChangeMulti:i,invalidMessage:t(n)||s,renderReadView:()=>{const{value:t,noValueText:s,tagAppearance:n,isMobile:i,customReadView:r}=e;return r?r(t):a.a.createElement(sb,{value:t,noValueText:s,tagAppearance:n,shouldHideLinks:i})},onDataRequest:o,onDataLoaded:c}))};Yb.displayName="MultiSelectInlineEditView",Yb.displayName="MultiSelectInlineEditView",Yb.defaultProps={tagAppearance:"default",validate:()=>null,hasAutocomplete:!0,debounceFetchSuggestionsTime:300};var Qb=Yb;function Jb(){return(Jb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Zb(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class Xb extends n.Component{renderFooter(){const{intl:e}=this.props;return(a.a.createElement(Bb,{className:"issue-view__select-footer"},a.a.createElement(Lb.a,{label:"",size:"small"}),a.a.createElement(Kb,null,e.formatMessage(Pb.createNewItem))))}render(){const e=this.props,{shouldShowFooter:t,baseUrl:s,projectKey:n,intl:i}=e,r=Zb(e,["shouldShowFooter","baseUrl","projectKey","intl"]);return(a.a.createElement(Qb,Jb({},r,{styles:Wb,shouldShowFooter:t,footer:this.renderFooter(),onFooterSelect:()=>Object(Rb.a)(`${s}/plugins/servlet/project-config/${n}/administer-components`,!1),allowEmptyValue:!0,optionValuesSafeForAnalytics:!0})))}}Xb.displayName="View";const ef=Object(Mu.a)((e,t,s,n)=>((e,t,s,n)=>Tb("components",e,t,s,n))(e,t,s,n)),tf=Object(Mu.a)((e,t,s)=>(n,a)=>ef(e,t,s,a).then(Db));var sf=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:xb,transformToStateValue:Ab,additionalProps:(e,s)=>({baseUrl:Object(P.g)(e),projectKey:Object(P.I)(e),fetchSuggestions:tf(Object(ea.c)(t.fieldId)(e),Object(P.A)(e),Object(_.C)(e)),placeholder:s.formatMessage(Pb.placeholder),noValueText:s.formatMessage(mb.noValue),shouldShowFooter:(Object(Yu.c)(e)||Object(Yu.b)(e))&&!Object(P.u)(e),showPinButton:Object(Vu.a)(t.area)})}))(Object(j.injectIntl)(Xb));var nf=Object(j.defineMessages)({placeholder:{id:"issue.customer-request-type.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Request Type"}});const af=e=>({issueTypeId:e.issueType.toString(),content:e.name,value:e.id,iconUrl:e.iconUrl}),rf=e=>e&&(e=>{if(e.errorMessage)return{hasError:!0};if(!e.requestType)return null;const{icon:t,issueTypeId:s,id:n,name:a}=e.requestType;return{issueTypeId:s,content:a,value:n,iconUrl:t._links.iconUrls["48x48"]}})(e),of=e=>({requestType:{icon:{_links:{iconUrls:{"48x48":e.iconUrl||""}}},id:e.value,name:e.content,issueTypeId:e.issueTypeId}}),cf=e=>[{items:e.validRequestTypes.map(af)}];var lf=s("./src/packages/platform/ui/asset-tracking/assets-item/src/feature-flags.js"),uf=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),df=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/text-with-icon/index.js");function pf(){return(pf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const mf=e=>()=>{const{value:t,noValueText:s}=e;if(t&&!Array.isArray(t)){const{iconUrl:e,content:s}=t;return e?a.a.createElement(df.a,{iconUrl:e},s):s}return(a.a.createElement(pr.b,null,s))},bf=e=>a.a.createElement($b,pf({},e,{renderReadView:e.renderReadView||mf(e),isMulti:!1}));bf.displayName="SingleSelectInlineEditView",bf.displayName="SingleSelectInlineEditView";var ff=bf;const gf=Q.default.div(["display:flex;align-items:center;"]),hf=Q.default.span(["margin-left:","px;"],J.e),yf=Q.default.div(["display:flex;padding-left:","px;padding-right:","px;"],.75*J.e,.75*J.e);function Of(){return(Of=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function jf(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ef(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jf(Object(s),!0).forEach((function(t){vf(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jf(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vf(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function kf(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const wf=e=>{if(null!==e&&void 0!==e.iconUrl)return()=>a.a.createElement(gf,null,a.a.createElement(yf,null,a.a.createElement(uf.a,{url:e.iconUrl})),a.a.createElement(hf,null,e.content))},Sf=e=>{const{issueTypeId:t}=e,s=kf(e,["issueTypeId"]),{value:n}=e;if(null!==n&&!0===n.hasError)return null;const i=null!==n&&n&&t!==n.issueTypeId?null:s.value,r=Ef(Ef({},s),{},{value:i});return Object(lf.a)()?a.a.createElement(ff,Of({},r,{renderReadView:wf(i)})):a.a.createElement(ff,r)};Sf.displayName="RequestTypeField";const If=(e,t)=>t?`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-types?query=`:null,Cf=Object(Mu.a)(e=>t=>e?Object(rp.a)(`${e}${t}`).then(cf):Promise.resolve([])),Tf=({baseUrl:e,value:t},s)=>{const{requestType:n}=t;return(async(e,t,s)=>{if(!t)throw new Error("Issue ID not available");return Object(Bu.d)(((e,t)=>`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-types/`)(e,t),{body:JSON.stringify({rtId:s})})})(e,Object(P.A)(s),n.id)},Pf=e=>e&&e.requestType&&e.requestType.id;var _f=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:rf,transformToStateValue:of,saveField:Tf,additionalProps:(e,s)=>({fetchSuggestions:Cf(If(Object(P.g)(e),Object(P.A)(e))),isEditable:Object(Em.e)(e),issueTypeId:Object(wr.e)(e),hasAutocomplete:!0,placeholder:s.formatMessage(nf.placeholder),noValueText:s.formatMessage(mb.noValue),debounceFetchSuggestionsTime:300,analyticsAttributeIdRetriever:Pf,showPinButton:Object(Vu.a)(t.area)})}))(Sf);class xf extends n.Component{renderEditView(){return a.a.createElement(ye,{value:this.props.value,onChange:this.props.onChange,timeZone:this.props.timeZone,parseValue:this.props.parseValue})}renderReadView(){const{value:e,formatDateTime:t}=this.props;return e?t(e):a.a.createElement(pr.b,null,this.props.noValueText)}render(){const{intl:e,isEditable:t,onCancel:s,label:n,value:i,isEditing:r,invalidMessage:o,onConfirm:c,onEditRequest:l,isMobile:u,fieldId:d,showPinButton:p}=this.props;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,n),!0===p&&a.a.createElement(Nu.a,{fieldId:d,label:n})),a.a.createElement(Ru.g,{isEditing:r},a.a.createElement(G.a,{onEscape:s},a.a.createElement(dd.a,{isLabelHidden:!0,label:n,readView:this.renderReadView(),editView:t?this.renderEditView():null,value:i,isEditing:r,invalidMessage:o,isInvalid:!!o,onCancel:s,onConfirm:c,onEditRequested:l,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!u,areActionButtonsHidden:!0,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:n}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:n}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:n})})))):a.a.createElement("div",null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,this.props.label)),a.a.createElement(G.a,{onEscape:this.props.onCancel},a.a.createElement(bd,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,value:this.props.value,isEditing:this.props.isEditing,invalidMessage:this.props.invalidMessage,isInvalid:!!this.props.invalidMessage,onCancel:this.props.onCancel,onConfirm:this.props.onConfirm,onEditRequested:this.props.onEditRequest,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!this.props.isMobile,areActionButtonsHidden:!0,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:this.props.label})})))}}xf.displayName="DateTimeInlineEditFieldView",xf.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:"",noValueText:null,value:null,invalidMessage:null,formatDateTime:e=>e,onConfirm:o.a,onCancel:o.a,onEditRequest:o.a};var Df=Object(j.injectIntl)(xf);const Af=Object(Mu.a)((e,t)=>s=>((e,t,s)=>{if(!t)return null;const n={day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0},a=s?ce(ce({},n),{},{timeZone:s}):ce({},n),i=re()(t).valueOf();return e.formatDate(i,a)})(e,s,t));var Mf=Object(ld.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>{const n=Object(_.z)(e);return{noValueText:s.formatMessage(mb.noValue),formatDateTime:Af(s,n),timeZone:n,parseValue:ue,showPinButton:Object(Vu.a)(t.area)}}}))(Df),Lf=s("./node_modules/@atlaskit/inline-dialog/dist/esm/InlineDialog/index.js"),Rf=s("./node_modules/@atlaskit/datetime-picker/dist/esm/components/DatePicker.js");class Nf extends n.Component{render(){const{autoFocus:e,isDisabled:t,value:s,intl:{formatMessage:n}}=this.props;return(a.a.createElement(Rf.a,{autoFocus:e,isDisabled:t,value:s||void 0,onChange:this.props.onChange,placeholder:n(fe.a.placeholderDate)}))}}Nf.displayName="DateFieldView",Nf.defaultProps={isDisabled:!1,value:void 0,autoFocus:!1};var Uf=Object(j.injectIntl)(Nf);class Ff extends n.Component{renderEditView(){return a.a.createElement(Uf,{value:this.props.value,onChange:this.props.onChange,autoFocus:!0})}renderReadView(){const{value:e,noValueText:t}=this.props;return e||a.a.createElement(pr.b,null,t)}render(){const{intl:e,isEditable:t,onCancel:s,label:n,value:i,isEditing:r,onConfirm:o,onEditRequest:c,isMobile:l,invalidMessage:u,fieldId:d,showPinButton:p}=this.props;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,n),!0===p&&a.a.createElement(Nu.a,{fieldId:d,label:n})),a.a.createElement(Ru.g,{isEditing:r},a.a.createElement(G.a,{onEnter:o,onEscape:s},a.a.createElement(Lf.a,{content:u,isOpen:!!u,placement:"top"},a.a.createElement(dd.a,{isLabelHidden:!0,label:n,readView:this.renderReadView(),editView:t?this.renderEditView():null,value:i,isEditing:r,onCancel:s,onConfirm:o,onEditRequested:c,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!l,areActionButtonsHidden:!0,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:n}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:n}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:n})}))))):a.a.createElement("div",null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,this.props.label)),a.a.createElement(G.a,{onEnter:this.props.onConfirm,onEscape:this.props.onCancel},a.a.createElement(Lf.a,{content:this.props.invalidMessage,isOpen:!!this.props.invalidMessage,placement:"top"},a.a.createElement(bd,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,value:this.props.value,isEditing:this.props.isEditing,onCancel:this.props.onCancel,onConfirm:this.props.onConfirm,onEditRequested:this.props.onEditRequest,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!this.props.isMobile,areActionButtonsHidden:!0,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:this.props.label})}))))}}Ff.displayName="DateInlineEditFieldView",Ff.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:"",noValueText:null,value:"",invalidMessage:null};var Vf=Object(j.injectIntl)(Ff);const Kf=e=>e?e.replace(/-/g,"/"):"",Bf=e=>e?e.replace(/\//g,"-"):null;var Wf=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Kf,transformToStateValue:Bf,additionalProps:(e,s)=>({noValueText:s.formatMessage(mb.noValue),showPinButton:Object(Vu.a)(t.area)})}))(Vf),Hf=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Kf,transformToStateValue:Bf,additionalProps:(e,s)=>({noValueText:s.formatMessage(mb.noValue),showPinButton:Object(Vu.a)(t.area)})}))(Vf),Gf=s("./node_modules/@atlaskit/icon/glyph/shortcut.js"),$f=s.n(Gf),qf=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/mount-animator.js");const zf=(e,t)=>({type:"ECOSYSTEM_SHOW_GLANCE",payload:{appKey:e,moduleKey:t}}),Yf=()=>({type:"ECOSYSTEM_HIDE_GLANCE"});var Qf=s("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js"),Jf=(e,t,s)=>{Ka(n=>{n&&n.broadcastEvent(e,t,s)})},Zf=s("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js");const Xf=Q.default.div(["display:flex;flex-direction:column;"]),eg=Q.default.div(["position:relative;overflow:hidden;display:flex;border-radius:3px;margin-left:-","px;","     height:","px;width:100%;transition:background-color 0.2s ease-in-out,border-color 0.2s ease-in-out;&:hover{background:",";cursor:pointer;}&:focus{box-shadow:0 0 0 2px ",";outline:0;background:",";}"],J.e,()=>Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?"":`margin-bottom: ${3*J.e}px;`,4*J.e,Je.a.N30,Je.a.B100,Je.a.N30),tg=Q.default.div(["overflow:hidden;margin-top:","px;margin-bottom:","px;margin-left:","px;height:24px;width:24px;align-items:center;",""],.5*J.e,.5*J.e,J.e,()=>Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?`\n        padding-left: ${.25*J.e}px;\n        padding-right: ${.25*J.e}px;\n    `:""),sg=Q.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;line-height:","px;padding-left:","px;"],4*J.e,J.e),ng=Q.default.div(["font-weight:600;display:inline;"]),ag=Q.default.div(["color:",";display:flex;align-items:center;margin-right:","px};"],Je.a.N70,J.e),ig=Q.default.div(["position:absolute;right:0;width:","px;height:","px;background-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,"," 25%);"],7*J.e,4*J.e,Je.a.N20),rg=Q.default.div(["position:absolute;right:0;margin:","px ","px;height:26px;width:26px;background:",";color:",";border-radius:50%;align-items:center;padding:2px 0 0 2px;"],J.e/4,J.e,Je.a.N30,Je.a.N60),og=Object(Q.keyframes)(["0%{right:-28px;}100%{right:0;}"]),cg=Q.default.div(["position:absolute;animation:"," 0.15s ease-in-out;"],og);var lg=s("./node_modules/lodash/omitBy.js"),ug=s.n(lg);function dg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pg(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dg(Object(s),!0).forEach((function(t){mg(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function mg(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bg=e=>["click_through","open_panel"].find(t=>t===e)||"open_panel",fg=e=>{const t=ug()(e,e=>null==e);return void 0===t.workMode?t:pg(pg({},t),{},{workMode:bg(t.workMode)})};function gg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hg(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function yg(){return(yg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class Og extends n.Component{constructor(...e){super(...e),this.state={isHovering:!1,update:void 0},this.onGlanceUpdate=(e,t,s)=>{s.addonKey===this.props.appKey&&s.moduleKey===this.props.moduleKey&&this.setState({update:fg(s.data)})},this.getGlanceIcon=()=>this.state.update&&this.state.update.icon?this.state.update.icon:this.props.icon,this.getGlanceWorkMode=()=>this.state.update&&this.state.update.workMode||this.props.workMode,this.eventHandlers={onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})},this.handleOpenGlancePanel=()=>{const{appKey:e,moduleKey:t,status:s,onGlanceShowAnalytics:n,onOpenGlancePanel:a,onClickThroughGlancePanel:i}=this.props,r=this.getGlanceWorkMode();"open_panel"===r?(n(Ca(e,t,s)),a(e,t)):"click_through"===r&&i(e,t)},this.container=void 0,this.renderStatus=()=>{const e=this.state.update&&this.state.update.status?this.state.update.status:this.props.status;if(!e)return null;const{value:t,type:s}=e;if(t.label)switch(s){case"lozenge":return a.a.createElement(He.a,{appearance:t.type},t.label);case"icon":return a.a.createElement(uf.a,{url:Object(Qf.a)(this.props.glance.options.origin,t.label),alt:t.type,width:24,height:24});case"badge":{const e=parseInt(t.label,10);return e>=0?a.a.createElement($e.a,{appearance:"default"},e):null}default:return null}return null},this.renderContent=()=>{if(this.state.update&&this.state.update.content)return a.a.createElement(sg,null,this.state.update.content);const{label:e,name:t}=this.props;return e.value===t?a.a.createElement(sg,null,a.a.createElement(j.FormattedMessage,{id:"issue.ecosystem.context.rich-glance-label",defaultMessage:"Open {label}",values:{label:a.a.createElement(ng,null,e.value)}})):a.a.createElement(sg,null,e.value)}}componentDidMount(){h.a.addUpdateIssueGlanceListener(this.onGlanceUpdate)}componentWillUnmount(){h.a.removeUpdateIssueGlanceListener(this.onGlanceUpdate)}render(){const{name:e,glance:t,moduleKey:s}=this.props;if(Object(Qe.isHOT93411Enabled)()&&s&&"string"==typeof s&&/^atlascode-issue-panel-glance/.test(s))return null;const n=this.getGlanceIcon();return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,{"data-test-id":"issue.views.issue-base.context.ecosystem-glance-panel"},a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,e)),a.a.createElement(Ru.g,null,a.a.createElement(G.a,{onEnter:this.handleOpenGlancePanel},a.a.createElement(eg,yg({onClick:this.handleOpenGlancePanel,tabIndex:"0"},this.eventHandlers),n&&a.a.createElement(tg,null,a.a.createElement(uf.a,{url:Object(Qf.a)(t.options.origin,n.url),alt:n.alt,width:24,height:24})),this.renderContent(),a.a.createElement(ag,null,this.renderStatus()),this.state.isHovering&&a.a.createElement(qf.a,{mountAnimation:cg},a.a.createElement(ig,null,a.a.createElement(rg,null,"click_through"===this.getGlanceWorkMode()?a.a.createElement($f.a,{size:"medium",label:""}):a.a.createElement(Vt.a,{size:"medium",label:""})))))))):a.a.createElement(Xf,{innerRef:e=>{this.container=e},"data-test-id":"issue.views.issue-base.context.ecosystem-glance-panel"},a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,e)),a.a.createElement(G.a,{onEnter:this.handleOpenGlancePanel},a.a.createElement(eg,yg({onClick:this.handleOpenGlancePanel,tabIndex:"0"},this.eventHandlers),n&&a.a.createElement(tg,null,a.a.createElement(uf.a,{url:Object(Qf.a)(t.options.origin,n.url),alt:n.alt,width:24,height:24})),this.renderContent(),a.a.createElement(ag,null,this.renderStatus()),this.state.isHovering&&a.a.createElement(qf.a,{mountAnimation:cg},a.a.createElement(ig,null,a.a.createElement(rg,null,"click_through"===this.getGlanceWorkMode()?a.a.createElement($f.a,{size:"medium",label:""}):a.a.createElement(Vt.a,{size:"medium",label:""})))))))}}Og.displayName="ConnectGlance",Og.displayName="ConnectGlance",Og.defaultProps={icon:null,openedGlance:null,status:null,workMode:"open_panel",onGlanceShowAnalytics:o.a};const jg=(e,t)=>{Jf("ISSUE_GLANCE_CONTENT_CLICKED",{addon_key:e,key:t})};var Eg=Object(Ts.a)([Object(Fs.a)(e=>({onGlanceShowAnalytics:t=>e("show",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gg(Object(s),!0).forEach((function(t){hg(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t))})),Object(i.b)((e,t)=>({openedGlance:Object(Zf.a)(e),glance:Object(Ra.l)(t.appKey,t.moduleKey)(e),onClickThroughGlancePanel:jg}),e=>({onOpenGlancePanel:(t,s)=>{e(zf(t,s)),Jf("ISSUE_GLANCE_OPENED",{addon_key:t,key:s})}}))])(Og),vg=s("./node_modules/redux/es/index.js"),kg=s("./src/packages/forge/forge-ui-analytics/src/services/custom-field/index.js"),wg=s("./src/packages/forge/forge-ui-analytics/src/ui/custom-field-edit/index.js"),Sg=s("./src/packages/forge/forge-ui-async/src/ui/custom-field/async.js"),Ig=s("./src/packages/forge/forge-ui-analytics/src/common/ui/index.js"),Cg=s("./src/packages/forge/forge-ui-analytics/src/services/custom-field-edit/index.js");function Tg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Pg(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Tg(Object(s),!0).forEach((function(t){_g(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Tg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var xg=(e,t)=>{switch(t.type){case"FORGE_CUSTOM_FIELD_EDIT_INITIALIZATION":return Pg(Pg({},e),{},{isEditing:!0,isLoading:!0});case"FORGE_CUSTOM_FIELD_EDIT_RENDERED":return Pg(Pg({},e),{},{isLoading:!1});case"FORGE_CUSTOM_FIELD_EDIT_CANCEL":return Pg(Pg({},e),{},{isEditing:!1});case"FORGE_CUSTOM_FIELD_EDIT_SET_VALUE":return Pg(Pg({},e),{},{isEditing:!1,editValue:t.payload});case"FORGE_CUSTOM_FIELD_EDIT_FAILED":return Pg(Pg({},e),{},{isEditing:!1,isLoading:!1});default:return e}};function Dg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ag(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Dg(Object(s),!0).forEach((function(t){Mg(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Dg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Mg(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Lg=({context:e,extension:t,source:s,fieldId:i,value:r,viewComponent:o,onConfirm:c,onCancel:l})=>{const[{isEditing:u,isLoading:d,editValue:p},m]=Object(n.useReducer)(xg,{isEditing:!1,isLoading:!1,editValue:r}),b=Object(n.useCallback)(e=>{c(),m((e=>({type:"FORGE_CUSTOM_FIELD_EDIT_SET_VALUE",payload:e}))(e)),Object(Cg.b)(s,{displayType:"modal"})},[c,s]),f=Object(n.useCallback)(()=>{l(),m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_CANCEL"}))()),Object(Cg.c)(s,{displayType:"modal"})},[l,s]),g=Object(n.useCallback)(()=>{m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_RENDERED"}))())},[]),h=Object(n.useCallback)(()=>{m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_FAILED"}))())},[]),y=Object(n.useCallback)(()=>{Object(Cg.d)(s,{displayType:"modal"}),m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_INITIALIZATION"}))())},[s]),O=Object(n.useMemo)(()=>Ag(Ag({},e),{},{fieldValue:p}),[e,p]),j=Object(n.useMemo)(()=>({source:s}),[s]);return a.a.createElement(a.a.Fragment,null,o(y,p,d),u&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Sg.b,{extension:t,fieldId:i,platformContext:O,analyticsData:j,onConfirm:b,onCancel:f,onRender:g,onError:h,extensionContext:Object(Qe.isForgeCustomFieldDataPassInExtensionContext)()?{fieldValue:p}:void 0}),a.a.createElement(Ig.a,{analyticsData:j})))};const Rg=Q.default.div(["position:relative;width:100%;"]),Ng=Q.default.div(["opacity:",";"],e=>e.isLoading?"0.7":"1.0"),Ug=Q.default.div(["position:absolute;top:0;right:0;margin-right:","px;"],J.e/2);var Fg=({children:e,isLoading:t})=>a.a.createElement(Rg,null,a.a.createElement(Ng,{isLoading:t},e),t&&a.a.createElement(Ug,null,a.a.createElement(z.a,{size:"small"})));const Vg=e=>({content:e.name,value:e.name}),Kg=Object(Mu.a)(e=>t=>Object(rp.a)(`${e}/rest/api/2/groups/picker?query=${t}`).then(e=>(e=>e&&e.groups?[{items:e.groups.map(Vg)}]:[{items:[]}])(e)));var Bg=Object(j.defineMessages)({placeholder:{id:"issue.forge.group.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select group"}});function Wg(){return(Wg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Hg(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Gg=e=>{let{extension:t,type:s,value:i,customReadView:r,onChange:o,intl:{formatMessage:c}}=e,l=Hg(e,["extension","type","value","customReadView","onChange","intl"]);const u=Object(Mu.a)(e=>e?{name:String(e.value)}:null),d=Object(Mu.a)(e=>e?{value:String(e.name),content:String(e.name)}:null),p=Object(n.useCallback)(e=>o(u(e)),[u,o]),m=Object(n.useCallback)(Up()(r)?()=>null:()=>r(i),[r,i]),b=Up()(r)?void 0:m;return a.a.createElement(ff,Wg({},l,{renderReadView:b,value:d(i),placeholder:c(Bg.placeholder),noValueText:c(mb.noValue),onChange:p,hasAutocomplete:!0}))};Gg.displayName="View";var $g=Nt()([j.injectIntl,Object(i.b)((e,{fieldId:t})=>({fetchSuggestions:Kg(Object(P.g)(e)),allowEmptyValue:!Object(ea.C)(t)(e)}),{})])(Gg),qg=Object(j.defineMessages)({placeholder:{id:"issue.forge.groups.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select groups"}});function zg(){return(zg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Yg(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Qg=e=>{let{extension:t,type:s,value:i,onChange:r,customReadView:o,intl:{formatMessage:c}}=e,l=Yg(e,["extension","type","value","onChange","customReadView","intl"]);const u=Object(Mu.a)(e=>e?e.map(e=>({name:String(e.value)})):[]),d=Object(Mu.a)(e=>e?e.map(e=>({value:String(e.name),content:String(e.name)})):[]),p=Object(n.useCallback)(e=>r(u(e)),[u,r]),m=Object(n.useCallback)(Up()(o)?()=>null:e=>o(u(e)),[o]),b=Up()(o)?void 0:m;return a.a.createElement(Qb,zg({},l,{value:d(i),customReadView:b,placeholder:c(qg.placeholder),noValueText:c(mb.noValue),onChange:p}))};Qg.displayName="View";var Jg=Nt()([j.injectIntl,Object(i.b)((e,{fieldId:t})=>({fetchSuggestions:Kg(Object(P.g)(e)),allowEmptyValue:!Object(ea.C)(t)(e)}),{})])(Qg),Zg=Object(j.defineMessages)({placeholder:{id:"issue.labels.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Label"},createNewItem:{id:"issue.labels.create-new-item-message",defaultMessage:"New label"}});const Xg=(e,{baseUrl:t,fieldId:s})=>e?e.map(e=>{const n=encodeURIComponent(`${(e=>{if(e.startsWith("customfield_")){return`cf[${e.substring("customfield_".length,e.length)}]`}return e})(s)} = ${Object(_b.b)(e)}`);return{content:e,value:e,href:`${t}/issues/?jql=${n}`}}):[],eh=e=>e.map(e=>e.value),th=e=>[{items:e.suggestions?e.suggestions.map(e=>({content:e.label,value:e.label})):[]}],sh=e=>{if(e.length>55)return a.a.createElement(j.FormattedMessage,{id:"issue.labels-view.input-too-many-labels",defaultMessage:"Can't have more than {max} labels.",values:{max:55}});return e.map(e=>e.content.trim()).some(e=>e.includes(" ")||e.length>255)?a.a.createElement(j.FormattedMessage,{id:"issue.labels-view.input-label-is-invalid",defaultMessage:"Labels can't have spaces or be more than {max} characters.",values:{max:255}}):void 0};function nh(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ah(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?nh(Object(s),!0).forEach((function(t){ih(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):nh(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ih(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function rh(){return(rh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function oh(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ch=ap()((e,t)=>(s,n)=>{if(null==e)return Promise.resolve([]);let a=`${e}${encodeURIComponent(s)}`;return null!=n&&(a=`${a}&sessionId=${n}`),null!=t&&(a=`${a}&fieldEditSessionId=${t}`),Object(rp.a)(a).then(th)},(e,t)=>`${e}_${t}`),lh=ap()((e,t)=>(s,n)=>{if(!s&&null!=e){const{prefetched:s,fieldValuePromise:a,sessionId:i,prefetchSessionId:r}=e,{createAnalyticsEvent:o}=t;if(s&&null!==a&&null!==i)return Zp(o,r,n||"",i,"labels"),a.then(e=>th(e));Xp(o,r,n||"","labels")}return t.fetchSuggestions(s,n)},(e,t)=>`${e&&e.prefetchSessionId||""}_${t.issueKey}`);ap()(e=>t=>`${t} (${e.formatMessage(Zg.createNewItem)})`);class uh extends n.Component{constructor(...e){super(...e),this.onEditRequest=()=>{Object(Rr.c)().cancel({key:$r.TIME_TO_REFLECT_INPUT_RESULT},!0),Object(Rr.c)().markStartOfInteraction({key:$r.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()},this.onConfirm=()=>{Object(Rr.c)().markStartOfInteraction({key:$r.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM}),this.props.onConfirm()},this.onCancel=()=>{Object(Rr.c)().markStartOfInteraction({key:$r.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),this.props.onCancel()},this.onChange=(e,t)=>{null!=t&&null!=t.action&&("select-option"===t.action?Object(Rr.c)().markStartOfInteraction({key:$r.TIME_TO_REFLECT_SELECTED_EXISTING}):"remove-value"===t.action?Object(Rr.c)().markStartOfInteraction({key:$r.TIME_TO_REFLECT_REMOVED_EXISTING}):"create-option"===t.action&&Object(Rr.c)().markStartOfInteraction({key:$r.TIME_TO_REFLECT_SELECTED_NEW})),this.props.onChange(e)},this.onDataRequest=({isInitial:e})=>{e||Object(Rr.c)().markStartOfInteraction({key:$r.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e}={})=>{e?Object(Rr.c)().markTimeToFinishTask({key:$r.TIME_TO_RENDER_INITIAL_SUGGESTIONS}):Object(Rr.c)().markTimeToFinishTask({key:$r.TIME_TO_REFLECT_INPUT_RESULT})}}componentDidMount(){this.props.initFieldOptions()}componentDidUpdate(e){const{isEditing:t,value:s,fieldId:n}=this.props;if("labels"===n){const n=!e.isEditing&&t,a=e.isEditing&&!t;e.isEditing&&t&&(s.length>e.value.length?(Object(Rr.c)().markTimeToFinishTask({key:$r.TIME_TO_REFLECT_SELECTED_EXISTING}),Object(Rr.c)().markTimeToFinishTask({key:$r.TIME_TO_REFLECT_SELECTED_NEW})):s.length<e.value.length&&Object(Rr.c)().markTimeToFinishTask({key:$r.TIME_TO_REFLECT_REMOVED_EXISTING})),a&&(Object(Rr.c)().markTimeToFinishTask({key:$r.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),e.value===s&&Object(Rr.c)().markTimeToFinishTask({key:$r.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM})),n&&Object(Rr.c)().markTimeToFeedback({key:$r.TIME_TO_RENDER_INITIAL_SUGGESTIONS})}}renderMultiSelectInlineEditView(e){const{initFieldOptions:t,issueKey:s,createAnalyticsEvent:n}=e,i=oh(e,["initFieldOptions","issueKey","createAnalyticsEvent"]),r="labels"===this.props.fieldId?{onEditRequest:this.onEditRequest,onConfirm:this.onConfirm,onCancel:this.onCancel,onChange:this.onChange,onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded}:{};return a.a.createElement(Qb,rh({},i,r))}renderWithCachedValue(){const{issueKey:e}=this.props,t=Tp(e,"labels");return a.a.createElement(t,{fieldId:"labels"},e=>{const t=lh(e,this.props),s=ah(ah({},this.props),{},{fetchSuggestions:t});return this.renderMultiSelectInlineEditView(s)})}render(){return"labels"===this.props.fieldId?this.renderWithCachedValue():this.renderMultiSelectInlineEditView(this.props)}}uh.displayName="LabelsView",uh.displayName="LabelsView";var dh=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Xg,transformToStateValue:eh,additionalProps:(e,s)=>({fetchSuggestions:ch(Object(ea.d)(t.fieldId)(e),Object(ea.f)(t.fieldId)(e)),placeholder:s.formatMessage(Zg.placeholder),noValueText:s.formatMessage(mb.noValue),formatCreateLabel:e=>`${e} (${s.formatMessage(Zg.createNewItem)})`,canCreateNewItem:!0,allowEmptyValue:!0,validate:sh,issueKey:Object(P.B)(e),showPinButton:Object(Vu.a)(t.area)})}))(uh),ph=Object(j.defineMessages)({placeholder:{id:"issue.forge.labels.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select label"},createNewItem:{id:"issue.forge.labels.create-new-item-message",defaultMessage:"{value} (New label)"}});function mh(){return(mh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function bh(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const fh=e=>{const t=e.map(e=>({value:String(e.value),content:e.content,href:e.href||""}));return sh(t)||null},gh=e=>{let{intl:t,value:s,type:i,extension:r,baseUrl:c,projectKey:l,onChange:u,customReadView:d}=e,p=bh(e,["intl","value","type","extension","baseUrl","projectKey","onChange","customReadView"]);const m=Object(n.useCallback)(e=>t.formatMessage(ph.createNewItem,{value:e}),[t]),b=Object(n.useCallback)(e=>{const t=eh(e.map(e=>({value:String(e.value),content:e.content,href:e.href||""})));u(t)},[u]),f=Object(n.useMemo)(()=>{const e={fieldId:p.fieldId,issueKey:p.issueKey,baseUrl:c,projectKey:l};return Xg(s,e).map(e=>({value:String(e.value),content:e.content,href:e.href||""}))},[c,p.fieldId,p.issueKey,l,s]),g=Object(n.useCallback)(Up()(d)?()=>null:()=>d(s),[d]),h=Up()(d)?void 0:g;return a.a.createElement(uh,mh({},p,{placeholder:t.formatMessage(ph.placeholder),noValueText:t.formatMessage(mb.noValue),customReadView:h,canCreateNewItem:!0,allowEmptyValue:!0,validate:fh,formatCreateLabel:m,value:f,onChange:b,initFieldOptions:o.a}))};gh.displayName="View";var hh=Nt()([j.injectIntl,Object(i.b)((e,{fieldId:t})=>({fetchSuggestions:ch(Object(ea.d)(t)(e),Object(ea.f)(t)(e)),issueKey:Object(P.B)(e),baseUrl:Object(P.g)(e),projectKey:Object(P.I)(e)}),{})])(gh),yh=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-url.js"),Oh=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-valid-email-address.js"),jh=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/prefix-url.js");const Eh=(e,t)=>{const{type:s="text",value:n="",placeholder:i="",invalidMessage:r,onChange:o,compact:c=!1}=e;return(a.a.createElement(_e.a,{type:s,value:n,placeholder:i,onChange:o,isInvalid:!!r,invalidMessage:r,shouldFitContainer:!0,autoFocus:!0,isLabelHidden:!0,label:"",ref:t,compact:c}))};Eh.displayName="SingleLineTextField",Eh.displayName="SingleLineTextField";var vh=Object(n.forwardRef)(Eh);class kh extends n.Component{constructor(e){super(e),this.onChange=e=>{const{type:t}=this.props;let s;"number"===t?""===e.target.value?s=null:(s=Number(e.target.value),this.setState({displayValue:e.target.value})):s=e.target.value,"url"===t&&this.setState({showValidationMessage:!1,invalidMessage:e.target.validationMessage}),this.props.onChange(s)},this.onConfirm=()=>{this.state.invalidMessage?(this.setState({showValidationMessage:!0}),this.editFieldRef.current&&this.editFieldRef.current.focus()):this.props.onConfirm()},this.onCancel=()=>{"url"===this.props.type&&this.setState({showValidationMessage:!1,invalidMessage:null}),this.props.onCancel()},this.editFieldRef=Object(n.createRef)(),this.state={invalidMessage:null,showValidationMessage:!1,displayValue:null}}componentDidUpdate(e){"number"===this.props.type&&this.props.value!==e.value&&(this.state.displayValue=null)}renderReadView(){const{value:e,noValueText:t,type:s,customReadView:n}=this.props;if(n)return n(e);if(null==e||""===e)return a.a.createElement(pr.b,null,t);const i=((e,t)=>{switch(e){case"number":return a.a.createElement(j.FormattedNumber,{value:t});case"text":return Object(Oh.a)(t)?a.a.createElement("a",{href:`mailto:${t}`},t):Number(t)?t:Object(yh.a)(t)?a.a.createElement("a",{href:Object(jh.a)(t,"//"),target:"_blank"},t):t;case"url":return Object(Oh.a)(t)?a.a.createElement("a",{href:`mailto:${t}`},t):a.a.createElement("a",{href:Object(jh.a)(t,"//"),target:"_blank"},t);default:return t}})(s,e);return(a.a.createElement(pr.a,null,i))}renderReadViewWithContentWrapper(){const e=this.props.fieldContentWrapper;return Up()(e)?this.renderReadView():a.a.createElement(e,null,this.renderReadView())}renderEditView(){const{value:e,placeholder:t}=this.props,s=null!=e?this.state.displayValue||e.toString():"";return a.a.createElement(vh,{ref:this.editFieldRef,type:this.props.type,value:s,placeholder:t,onChange:this.onChange,invalidMessage:this.props.invalidMessage||(this.state.showValidationMessage?this.state.invalidMessage:null)})}render(){const{intl:e,label:t,isEditable:s,isEditing:n,onEditRequest:i,isMobile:r,titleView:o=this.props.label,fieldId:c,showPinButton:l}=this.props;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,o),!0===l&&a.a.createElement(Nu.a,{fieldId:c,label:t})),a.a.createElement(Ru.g,{isEditing:n},a.a.createElement(G.a,{onEnter:this.onConfirm,onEscape:this.onCancel},a.a.createElement(dd.a,{isLabelHidden:!0,label:t,readView:this.renderReadViewWithContentWrapper(),editView:s?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:n,onConfirm:this.onConfirm,onCancel:this.onCancel,onEditRequested:i,isFitContainerWidthReadView:!r,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:t})})))):a.a.createElement("div",null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,o)),a.a.createElement(G.a,{onEnter:this.onConfirm,onEscape:this.onCancel},a.a.createElement(bd,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadViewWithContentWrapper(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:this.props.label})})))}}kh.displayName="SingleLineTextInlineEditView",kh.displayName="SingleLineTextInlineEditView",kh.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,value:null,noValueText:null,invalidMessage:null,type:"text",label:""};var wh=Object(j.injectIntl)(kh);function Sh(){return(Sh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ih(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Ch=e=>{switch(e){case"string":return"text";case"number":case"url":return e;default:return"text"}},Th=e=>{let{extension:t}=e,s=Ih(e,["extension"]);const{properties:{data:{type:n}}}=t;return(a.a.createElement(wh,Sh({},s,{noValueText:null,type:Ch(n)})))};Th.displayName="View";var Ph=Th;function _h(){return(_h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function xh(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Dh=e=>e.users?e.users.map(nm):[],Ah=Object(Mu.a)(e=>t=>null===e?Promise.resolve([]):Object(rp.a)(`${e}${t}`).then(Dh)),Mh=Object(Mu.a)(e=>({avatarUrl:"",name:e.formatMessage(mb.noValue)})),Lh=e=>{let{isFieldRequired:t,extension:s,type:n,value:i,isFieldInTab:r}=e,o=xh(e,["isFieldRequired","extension","type","value","isFieldInTab"]);const c=r&&(Gu()||document.body)||void 0;return a.a.createElement(Yp,_h({},o,{value:nm(i),emptyOption:t?void 0:Mh(o.intl),portalElement:c,onChange:e=>{o.onChange(am(e))}}))};Lh.displayName="View";var Rh=Nt()([j.injectIntl,Object(i.b)((e,{fieldId:t})=>({isFieldInTab:id(t)(e),fetchSuggestions:Ah(Object(ea.d)(t)(e)),isFieldRequired:Object(ea.C)(t)(e)}),{})])(Lh),Nh=Object(j.defineMessages)({placeholder:{id:"issue.multi-user.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select User"}});const Uh=Object(Mu.a)(e=>e&&e.map(e=>({displayName:e.content,accountId:e.accountId,id:Object(vr.a)(String(e.value)),avatarUrls:{"24x24":String(e.avatarUrl)}}))),Fh=Object(Mu.a)(e=>e?e.map(e=>({content:e.displayName,value:String(e.accountId),key:e.accountId,avatarUrl:e.avatarUrls&&e.avatarUrls["24x24"],accountId:e.accountId,elemBefore:a.a.createElement(xr.a,{size:"xsmall",src:e.avatarUrls&&e.avatarUrls["24x24"]})})):[]),Vh=Object(Mu.a)(e=>[{items:(e&&e.users||[]).map(e=>({content:e.displayName,value:String(e.accountId),accountId:e.accountId,avatarUrl:e.avatarUrls["24x24"]}))}]),Kh=e=>e&&e.map(e=>({displayName:e.content,accountId:e.accountId,id:e.value,avatarUrls:{"24x24":e.avatarUrl}})),Bh=e=>e?e.map(e=>({content:e.displayName,value:e.accountId,key:e.accountId,avatarUrl:e.avatarUrls["24x24"],accountId:e.accountId,elemBefore:a.a.createElement(xr.a,{size:"xsmall",src:e.avatarUrls["24x24"]})})):[],Wh=e=>[{items:(e&&e.users||[]).map(e=>({content:e.displayName,value:e.accountId,accountId:e.accountId,avatarUrl:e.avatarUrls["24x24"]}))}];function Hh(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gh(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Hh(Object(s),!0).forEach((function(t){$h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hh(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const qh=Object(Mu.a)(e=>t=>e?Object(rp.a)(`${e}${t}`).then(Object(Qe.isForgeUiUserListCustomFieldIntegrationEnabled)()?Vh:Wh):Promise.resolve([]));var zh=Object(ld.a)((e,t)=>Gh(Gh({fieldId:t.fieldId},Object(Qe.isForgeUiUserListCustomFieldIntegrationEnabled)()?{transformFromStateValue:Fh,transformToStateValue:Uh}:{transformFromStateValue:Bh,transformToStateValue:Kh}),{},{additionalProps:(e,s)=>({fetchSuggestions:qh(Object(ea.d)(t.fieldId)(e)),placeholder:s.formatMessage(Nh.placeholder),noValueText:s.formatMessage(mb.noValue),tagAppearance:"rounded",showDropdownOnClick:!1,isUserTag:!0,formatOptionLabel:e=>a.a.createElement(Vb,null,e.avatarUrl&&a.a.createElement(xr.a,{size:"small",src:e.avatarUrl}),a.a.createElement(Kb,null,e.label)),showPinButton:Object(Vu.a)(t.area)})}))(Qb);function Yh(){return(Yh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Qh(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Jh=e=>a.a.createElement(Vb,null,Up()(e.avatarUrl)?null:a.a.createElement(xr.a,{size:"small",src:e.avatarUrl}),a.a.createElement(Kb,null,e.label));Jh.displayName="formatOptionLabel";const Zh=e=>{let{isFieldRequired:t,extension:s,type:i,value:r,onChange:o,customReadView:c,intl:{formatMessage:l},isFieldInTab:u}=e,d=Qh(e,["isFieldRequired","extension","type","value","onChange","customReadView","intl","isFieldInTab"]);const p=Object(n.useCallback)(e=>o(Uh(e)),[o]),m=Object(n.useCallback)(Up()(c)?()=>null:e=>c(Uh(e)),[c]),b=Up()(c)?void 0:m;return a.a.createElement(Qb,Yh({},d,{value:Fh(r),customReadView:b,placeholder:l(Nh.placeholder),noValueText:l(mb.noValue),onChange:p,tagAppearance:"rounded",formatOptionLabel:Jh}))};Zh.displayName="View";const Xh={none:{user:Rh,group:$g,string:Ph,number:Ph},list:{string:hh,group:Jg,user:Nt()([j.injectIntl,Object(i.b)((e,{fieldId:t})=>({fetchSuggestions:qh(Object(ea.d)(t)(e))}),{})])(Zh)}};var ey=Object(Mu.a)((e,t="none")=>{const s=Xh[t];return s?s[e]:null});const ty=Q.default.div(["width:100%;&:focus{outline:none;}"]),sy=e=>{switch(e.type){case"user":return"list"===e.collection?(e=>Up()(e)?null:e.map(e=>({accountId:Up()(e.accountId)?e.id:e.accountId})))(e.value):(e=>Up()(e)?null:{accountId:Up()(e.accountId)?e.id:e.accountId})(e.value);case"group":return"list"===e.collection?(e=>null==e?null:e.map(e=>e.name))(e.value):(e=>null==e?null:e.name)(e.value);case"string":case"number":default:return e.value}};function ny(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ay(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function iy(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ay(Object(s),!0).forEach((function(t){ry(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ay(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ry(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const oy=(e,t,s,n="none",i)=>Object(Mu.a)(r=>a.a.createElement(ty,null,a.a.createElement(Sg.a,{extension:e,platformContext:iy(iy({},t),{},{fieldValue:sy({type:s,collection:n,value:r})}),extensionContext:Object(Qe.isForgeCustomFieldDataPassInExtensionContext)()?{fieldValue:sy({type:s,collection:n,value:r})}:void 0,analyticsData:i}))),cy=e=>{let{hasCustomFieldExtensions:t,isFilteredOut:s,extension:i,context:r,fieldId:o,value:c,source:l}=e,u=ny(e,["hasCustomFieldExtensions","isFilteredOut","extension","context","fieldId","value","source"]);const d=Object(n.useMemo)(()=>({source:l}),[l]);if(!t||s)return null;if(!i){const{fieldValue:e}=r,t=ny(r,["fieldValue"]);return Object(kg.b)("Forge extension passed to ForgeCustomField component is null or undefined",iy({fieldId:o},t)),Object(kg.a)(l),null}const{properties:{data:{type:p,collection:m}}}=i,b=Object(Mu.a)(oy)(i,r,p,m,d),f=a.a.createElement(or.a,{extensionName:u.label,extensionEnvType:i.environmentType}),g=!Up()(i.properties.function),h=iy(iy({value:c,fieldId:o,extension:i,titleView:f},g?{customReadView:b}:null),u),y=ey(p,m);if(!y)return Object(kg.b)("Forge extension passed to ForgeCustomField type is not supported",{fieldId:o,type:p}),null;if(i.properties.edit){const e=(e,t,s)=>{const n=({children:e})=>a.a.createElement(Fg,{isLoading:s},e);n.propTypes={children:En.a.node};const i=iy(iy({},h),{},{onEditRequest:e,value:t},g?{customReadView:e=>a.a.createElement(Fg,{isLoading:s},b(e))}:{fieldContentWrapper:n});return(a.a.createElement(y,i))};return(a.a.createElement(wg.a,{analyticsData:d},a.a.createElement(Lg,{fieldId:o,extension:i,source:l,context:r,value:c,onConfirm:h.onConfirm,onCancel:h.onCancel,viewComponent:e})))}return(a.a.createElement(y,h))};cy.displayName="ForgeCustomField";var ly=Object(vg.compose)(Object(ld.a)((e,{fieldId:t,area:s})=>({fieldId:t,additionalProps:()=>({showPinButton:Object(Vu.a)(s)})})),Object(i.b)((e,{fieldId:t})=>({hasCustomFieldExtensions:Object(cu.l)(e),isFilteredOut:Object(cu.m)(t)(e),extension:Object(cu.c)(t)(e),context:Object(cu.b)(e),source:Object(P.b)(e)}),{}))(cy),uy=s("./src/packages/forge/forge-ui-analytics/src/services/issue-glance/index.js"),dy=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-glance/index.js");function py(){return(py=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class my extends n.Component{constructor(...e){super(...e),this.state={isHovering:!1},this.eventHandlers={onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})},this.onOpenGlancePanel=()=>{const{appKey:e,moduleKey:t,onOpenGlancePanel:s,source:n}=this.props;Object(uy.a)(n),s(e,t)}}renderStatus(){const{status:e={}}=this.props;switch(e.type){case"lozenge":return a.a.createElement(He.a,{appearance:e.value.type},e.value.label);case"badge":{const t=parseInt(e.value,10);return t>=0?a.a.createElement($e.a,{appearance:"default"},t):null}default:return null}}render(){const{title:e,label:t,extension:{environmentType:s},source:n}=this.props;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(dy.a,{analyticsData:{source:n}},a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,a.a.createElement(or.a,{extensionName:e,extensionEnvType:s}))),a.a.createElement(Ru.g,null,a.a.createElement(G.a,{onEnter:this.onOpenGlancePanel},a.a.createElement(eg,py({onClick:this.onOpenGlancePanel,tabIndex:"0"},this.eventHandlers),a.a.createElement(sg,null,t),a.a.createElement(ag,null,this.renderStatus()),this.state.isHovering&&a.a.createElement(qf.a,{mountAnimation:cg},a.a.createElement(ig,null,a.a.createElement(rg,null,a.a.createElement(Vt.a,{size:"medium",label:""}))))))))):a.a.createElement(dy.a,{analyticsData:{source:n}},a.a.createElement(Xf,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,a.a.createElement(or.a,{extensionName:e,extensionEnvType:s}))),a.a.createElement(G.a,{onEnter:this.onOpenGlancePanel},a.a.createElement(eg,py({onClick:this.onOpenGlancePanel,tabIndex:"0"},this.eventHandlers),a.a.createElement(sg,null,t),a.a.createElement(ag,null,this.renderStatus()),this.state.isHovering&&a.a.createElement(qf.a,{mountAnimation:cg},a.a.createElement(ig,null,a.a.createElement(rg,null,a.a.createElement(Vt.a,{size:"medium",label:""}))))))))}}my.displayName="ForgeGlance",my.displayName="ForgeGlance";var by=Object(Ts.a)([Object(i.b)(e=>({source:Object(P.b)(e)}),e=>({onOpenGlancePanel:(t,s)=>{e(zf(t,s))}}))])(my),fy=s("./src/packages/cache/src/services/epics/index.js"),gy=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");const hy=()=>Object(Qe.isEpicPickerFewerMaxResultsEnabled)()?20:100;var yy=s("./node_modules/lodash/omit.js"),Oy=s.n(yy),jy=s("./node_modules/@atlaskit/checkbox/dist/esm/CheckboxIcon.js"),Ey=s("./node_modules/@atlaskit/analytics-next/dist/esm/useAnalyticsEvents.js");const vy=({onVisibilityChange:e})=>{const[t,s]=Object(n.useState)(!1),i=Object(n.useRef)(),r=Object(n.useRef)();return Object(n.useEffect)(()=>{e(t)},[t,e]),Object(n.useEffect)(()=>{(()=>{if(window.IntersectionObserver&&r.current){const e=e=>{e.forEach(e=>{e.target===r.current&&s(e.isIntersecting)})},t={root:null,rootMargin:"0px",threshold:0};i.current=new IntersectionObserver(e,t).observe(r.current)}})();const e=r.current;return()=>{var t;null===(t=i.current)||void 0===t||t.unobserve(e)}},[]),a.a.createElement("div",{ref:r})};vy.displayName="Intersection";var ky=vy,wy=Object(j.defineMessages)({checkboxLabel:{id:"issue.views.field.epic.checkbox.label",defaultMessage:"Show done epics"},doneEpicLabel:{id:"issue.views.field.epic.done.label",defaultMessage:"Done"}});const Sy=Q.default.div(["min-width:","px;"],1.5*J.e),Iy=Q.default.div(["display:flex;flex-direction:row;justify-content:flex-end;padding:","px ","px;border-bottom:2px solid ",";"],J.e,1.5*J.e,Je.a.N30),Cy=Q.default.label(["display:flex;flex-direction:row;align-items:center;"]),Ty=Q.default.div(["display:flex;flex-direction:row;align-items:center;color:",";font-size:12px;margin-top:","px;"],Je.a.N300,J.e/2),Py=Q.default.span(["overflow:hidden;text-overflow:ellipsis;max-width:100%;"]),_y=e=>{var t,s,i,r,o;const{createAnalyticsEvent:c}=Object(Ey.a)(),l=hy(),u=(null===(t=e.options[1])||void 0===t||null===(s=t.options)||void 0===s?void 0:s.length)===l,d=null===(i=e.selectProps.componentsProps)||void 0===i?void 0:i.onChange,p=null===(r=e.selectProps.componentsProps)||void 0===r?void 0:r.isChecked,m=Object(n.useCallback)(e=>{if(e&&u){const e=c({});Object(qi.f)(e,"intersectionComponent viewed","epicLink")}},[c,u]),b=Object(n.useCallback)(e=>{if(d){d(e);const t=c({});Object(qi.f)(t,"doneEpics filtered","epicLink",{includeDone:!p})}},[c,p,d]);return a.a.createElement(Eo.z.MenuList,e,a.a.createElement(Iy,{onClick:b},a.a.createElement(Cy,null,e.intl.formatMessage(wy.checkboxLabel),a.a.createElement(jy.a,{isChecked:null===(o=e.selectProps.componentsProps)||void 0===o?void 0:o.isChecked}))),e.children,u&&a.a.createElement(ky,{onVisibilityChange:m}))};_y.displayName="Menu";var xy=Object(j.injectIntl)(_y),Dy=s("./node_modules/@atlaskit/icon/glyph/editor/done.js"),Ay=s.n(Dy),My=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/mixins.js");const Ly=Q.default.span(["display:flex;flex-direction:column;margin:0 ","px;padding:","px 0;overflow:hidden;flex-grow:1;"],J.e,J.e/4),Ry=Q.default.span(["",";flex-grow:1;"],My.a),Ny=Q.default.span(["display:inline-block;color:",";font-size:12px;margin-top:","px;"],Je.a.N300,J.e/2);var Uy=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js");const Fy=(e,t)=>a.a.createElement(Ty,null,null!=e.description?a.a.createElement(Py,null,e.description):null,!0===e.isDone?a.a.createElement(a.a.Fragment,null,a.a.createElement(Ay.a,{primaryColor:Je.a.G500}),a.a.createElement("span",null,t)):null);Fy.displayName="renderOptionDescription";const Vy=({option:e,intl:{formatMessage:t}})=>a.a.createElement(Uy.e,null,null!=e.elemBefore?e.elemBefore:null,a.a.createElement(Ly,null,a.a.createElement(Ry,null,e.label),Fy(e,t(wy.doneEpicLabel))));Vy.displayName="CustomOption";var Ky=Object(j.injectIntl)(Vy);function By(){return(By=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Wy=e=>a.a.createElement(Jm.a,{color:e,elemBefore:a.a.createElement(Sy,null),text:""});Wy.displayName="getOptionColorElem";class Hy extends n.Component{constructor(...e){super(...e),this.state={includeDoneEpics:!1,query:"",data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.sessionId="default-session-id",this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t,!this.state.includeDoneEpics).then(e=>{this.setState({data:e,loading:!1})})},this.renderReadView=()=>{const{value:e,noValueText:t,isMobile:s}=this.props;return(a.a.createElement(sb,{value:e?[e]:null,noValueText:t,shouldHideLinks:s}))},this.fetchSuggestions=(e,t)=>(null!=t&&""!==t&&(this.sessionId=t),this.setState({query:e}),this.props.fetchSuggestions(e,!this.state.includeDoneEpics,this.sessionId).then(e=>(this.setState({data:e}),e))),this.onChangeIncludeDone=async()=>{const{query:e,includeDoneEpics:t}=this.state;this.setState({includeDoneEpics:!t,loading:!0},()=>this.fetchSuggestions(e).then(e=>{this.setState({data:e,loading:!1,error:!1})}).catch(()=>{this.setState({data:[],loading:!1,error:!0})}))},this.formatOptionLabel=(e,{context:t})=>"menu"===t?a.a.createElement(Ky,{option:e}):e.label}render(){const{data:e,loading:t,error:s}=this.state,n={data:e,loading:t,error:s},i={MenuList:xy},r={isChecked:this.state.includeDoneEpics,onChange:this.onChangeIncludeDone};return a.a.createElement(ff,By({},Oy()(this.props,"getDataFromCache"),{debounceFetchSuggestionsTime:300,initialData:n,componentsProps:r,fetchSuggestions:this.fetchSuggestions,additionalAnalyticsProps:{isEpicLink:!0},components:i,renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0}))}}Hy.displayName="EpicInlineEditView",Hy.displayName="EpicInlineEditView";var Gy=Object(j.defineMessages)({placeholder:{id:"issue.epic.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Epic"},recent:{id:"issue.epic.text-for-heading-in-recent-group",defaultMessage:"Recent"},allEpics:{id:"issue.epic.text-for-heading-in-all-epics-group",defaultMessage:"All epics"}}),$y=s("./src/packages/issue/epic-color/src/common/constants.js");const qy=e=>{const t=e.color?e.color.key:$y.c[e.colorKey];return t?$y.b[t]:null},zy=(e,{baseUrl:t})=>e&&((e,t)=>({content:e.name,value:e.key,isDone:e.done,color:qy(e),href:`${t}/browse/${e.key}`,fromCache:e.fromCache}))(e,t),Yy=(e,t)=>e.filter(e=>!(t&&e.done)&&e.key&&e.name&&e.color&&e.color.key).slice(-5).reverse(),Qy=(e,t=!1)=>{const s=$y.b[e.color.key];return{color:s,content:e.name,value:e.key,id:e.id,description:e.key,elemBefore:Wy(s),filterValues:[e.name,e.key],isDone:e.done,fromCache:t}},Jy=e=>{if(!e)return null;const t=Object.keys($y.b),s=t.find(t=>$y.b[t]===e.color)||t[0];return{name:e.content,key:e.value,done:e.isDone,id:e.id,color:{key:s},fromCache:e.fromCache}},Zy=(e,t,s)=>{const n=(null==e?void 0:e.values)||[],a=((e,t)=>t.map(t=>{const s=e.find(e=>e.key===t.key);return s?(fy.a.update(t.key,s),s):t}))(n,t);return[{heading:s.formatMessage(Gy.recent),items:a.map(e=>Qy(e,!0))},{heading:s.formatMessage(Gy.allEpics),items:n.map(e=>Qy(e,!1))}]},Xy=Object(Mu.a)((e,t,s)=>(n,a,i)=>{const r=pp()(),{markTimeToFinishTask:o}=Object(Rr.c)().markStartOfInteraction({key:Zr.TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED,concurrentId:r,cancelExisting:!0}),c=hy(),l=Object(Qe.isSmartEpicRankingEnabled)()?`${e}/rest/agile/1.0/epic/search?excludeDone=${a}&projectKey=${t}&maxResults=${c}&query=${n}&sessionId=${i}&shouldRank=true`:`${e}/rest/agile/1.0/epic/search?excludeDone=${a}&projectKey=${t}&maxResults=${c}&query=${n}`,u=Object(rp.a)(l).then(e=>(o({}),e)).catch(e=>{throw Object(Rr.c)().cancel({key:Zr.TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED,concurrentId:r},!0),e});return Promise.all([u,fy.a.getAll()]).then(([e,t])=>{const n=Yy(t,a);return Zy(e,n,s)})});var eO=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:zy,transformToStateValue:Jy,additionalProps:(e,s)=>({fetchSuggestions:Xy(Object(P.g)(e),Object(P.I)(e),s),placeholder:s.formatMessage(Gy.placeholder),noValueText:s.formatMessage(mb.noValue),allowEmptyValue:!0,getDataFromCache:e=>fy.a.getAll().then(t=>Yy(t,e)).then(e=>Zy(void 0,e,s)),showPinButton:Object(Vu.a)(t.area)}),saveField:({baseUrl:e,issueKey:s,fieldMetaKey:n,value:a})=>(t.createAnalyticsEvent&&(null==a?void 0:a.key)&&(Object(qi.b)(t.createAnalyticsEvent({}),"epicPickerCache set",{isFromCache:a.fromCache}),fy.a.set(a.key,a)),Object(Bu.e)(Object(gy.f)(e,s),{body:JSON.stringify({fields:{[n]:a?a.key:null}})}).catch(e=>{throw t.createAnalyticsEvent&&(null==a?void 0:a.key)&&(Object(qi.b)(t.createAnalyticsEvent({}),"epicPickerCache remove"),(null==a?void 0:a.key)&&fy.a.remove(a.key)),e}))}))(Hy),tO=Object(j.defineMessages)({placeholder:{id:"issue.multi-group-picker.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select groups"}});const sO=e=>e&&Vg(e),nO=e=>e&&{name:e.value},aO=e=>e?(e=>e.map(e=>sO(e)))(e):[],iO=e=>e?e.map(e=>nO(e)):[];var rO=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:aO,transformToStateValue:iO,additionalProps:(e,s)=>({fetchSuggestions:Kg(Object(P.g)(e)),placeholder:s.formatMessage(tO.placeholder),noValueText:s.formatMessage(mb.noValue),showPinButton:Object(Vu.a)(t.area)})}))(Qb),oO=Object(j.defineMessages)({placeholder:{id:"issue.group-picker.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select group"}}),cO=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:sO,transformToStateValue:nO,additionalProps:(e,s)=>({fetchSuggestions:Kg(Object(P.g)(e)),placeholder:s.formatMessage(oO.placeholder),noValueText:s.formatMessage(mb.noValue),allowEmptyValue:!Object(ea.C)(t.fieldId)(e),hasAutocomplete:!0,showPinButton:Object(Vu.a)(t.area)})}))(ff),lO=s("./src/packages/servicedesk/knowledge-glance/src/ui/kb-glance/main.js");var uO=Object(Ts.a)([Object(i.b)((e,t)=>({itemId:t.itemId,isVisible:Object(Yu.e)(e),baseUrl:Object(P.g)(e),issueKey:Object(P.B)(e),locale:Object(P.D)(e),issueId:Object(P.A)(e),projectKey:Object(P.I)(e),isAdmin:"admin"===Object(P.O)(e),showPinButton:Object(Vu.a)(t.area)}),{})])(({isVisible:e=!0,onOpenPanel:t,baseUrl:s,issueKey:n,locale:i,issueId:r,projectKey:o,isAdmin:c,itemId:l,showPinButton:u})=>e&&a.a.createElement(lO.a,{baseUrl:s,locale:i,issueKey:n,onOpenPanel:t,issueId:r,projectKey:o,isAdmin:c,itemId:l,showPinButton:u})),dO=s("./src/packages/servicedesk/knowledge-glance/src/ui/kb-glance-panel/main.js"),pO=s("./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js");const mO=Object(Xn.createSelector)(_.I,e=>e.contextPanel),bO=Object(Xn.createSelector)(mO,e=>e&&e.isContextPanelOpen),fO=Object(Xn.createSelector)(mO,e=>e&&e.contextPanelItem);var gO=Object(Ts.a)([Object(i.b)(e=>({isEditorOpen:Object(ta.w)(e),isPanelOpen:bO(e)}),{onShareAsComment:pO.b})])(dO.a),hO=Object(j.defineMessages)({placeholder:{id:"issue.multi-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}});const yO=e=>({value:e.id,content:e.value}),OO=e=>e?e.map(yO):[],jO=e=>e&&e.map(e=>({id:e.value,value:e.content})),EO=e=>e&&[{items:e.map(yO)}]||[],vO=Object(Mu.a)(e=>()=>Promise.resolve(e).then(EO));var kO=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:OO,transformToStateValue:jO,additionalProps:(e,s)=>({fetchSuggestions:vO(Object(ea.c)(t.fieldId)(e)),placeholder:s.formatMessage(hO.placeholder,{fieldName:Object(ea.m)(t.fieldId)(e)}),noValueText:s.formatMessage(mb.noValue),showPinButton:Object(Vu.a)(t.area)})}))(Qb),wO=s("./src/packages/issue/fields/number/src/ui/main.js"),SO=s("./src/packages/issue/fields/number/src/services/index.js");const IO=Object(Q.default)(Ru.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),CO=Object(Q.default)(Ru.d)(["& > div > div > div > div > div > div{width:100%;}"]),TO=Q.default.div(["margin-bottom:16px;& > div > div > div > div > div{width:100%;}& > div > div > div > div > div > div{min-height:32px !important;}& > div > div > div > div > div > div > div{padding:0 6px;}"]);var PO=Object(n.memo)(({fieldId:e,label:t,area:s})=>{const{formatMessage:i}=Object(Ge.c)(),r=Object(Du.d)(),o=Object(Vu.a)(s),[{value:c,fieldConfig:l}]=Object(SO.a)({issueKey:r,fieldKey:e}),u=(null==l?void 0:l.title)||t,d=Object(n.useCallback)(()=>null===c||""===c?a.a.createElement(pr.b,null,i(mb.noValue)):c.toString(),[i,c]),p=Object(Qe.isInlineEditEnterFixEnabled)()?IO:CO;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(p,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,u),!0===o&&a.a.createElement(Nu.a,{fieldId:e,label:u})),a.a.createElement(Ru.g,null,a.a.createElement(wO.default,{label:u,issueKey:r,fieldKey:e,noValueText:i(mb.noValue),readView:d(),isFitContainerWidthReadView:!0}))):a.a.createElement(TO,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,u)),a.a.createElement(wO.default,{label:u,issueKey:r,fieldKey:e,readView:d(),noValueText:i(mb.noValue),isFitContainerWidthReadView:!0}))}),_O=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js"),xO=s("./src/packages/issue/fields/number/src/ui/async.js");const DO=Object(Q.default)(Ru.g)(["& > div > div > div > div > div > div{width:100%;}"]),AO=Object(Q.default)(Ru.g)(["& > div > div > div > div > div{width:100%;}"]),MO=Q.default.div(["margin-bottom:16px;& > div > div > div > div > div{width:100%;}& > div > div > div > div > div > div{min-height:32px !important;}& > div > div > div > div > div > div > div{padding:0 6px;}"]),LO=Object(Oe.f)(()=>s.e("async-issue-field-number").then(s.bind(null,"./src/packages/issue/fields/number/src/index.js")),{moduleId:"./src/packages/issue/fields/number/src/index.js"});var RO=Object(n.memo)(({issueKey:e,fieldId:t,label:s,noValueText:n,onUpdate:i,showPinButton:r})=>{const[{value:o}]=Object(SO.a)({issueKey:e,fieldKey:t}),c=null===o||""===o?a.a.createElement(pr.b,null,n):a.a.createElement($e.a,null,o.toString()),l=Object(Qe.isInlineEditEnterFixEnabled)()?DO:AO;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,s),!0===r&&a.a.createElement(Nu.a,{fieldId:t,label:s})),a.a.createElement(l,null,a.a.createElement(xO.b,{packageName:"issue",fallback:c},a.a.createElement(LO,{label:s,issueKey:e,fieldKey:t,readView:c,isFitContainerWidthReadView:!0,onUpdate:i})))):a.a.createElement(MO,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,s)),a.a.createElement(xO.b,{packageName:"issue",fallback:c},a.a.createElement(LO,{label:s,issueKey:e,fieldKey:t,readView:c,isFitContainerWidthReadView:!0,onUpdate:i})))}),NO=Object(ld.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(P.B)(e),noValueText:s.formatMessage(mb.noValue),type:"number",showPinButton:Object(Vu.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(_O.e)(t.fieldId,s))})}))(RO),UO=Object(ld.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(mb.noValue),type:"number",showPinButton:Object(Vu.a)(t.area)})}))(wh),FO=s("./node_modules/@atlaskit/icon/glyph/people-group.js"),VO=s.n(FO);var KO=Object(j.defineMessages)({placeholder:{id:"issue.organizations.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select the Organizations"},organizationIconLabel:{id:"issue.organizations.organization-icon-label",defaultMessage:"Organization icon"}});const BO=e=>({value:e.id,content:e.name,elemBefore:a.a.createElement(VO.a,{label:""})}),WO=e=>e?e.map(BO):[],HO=e=>e&&e.map(e=>({id:e.value,name:e.content})),GO=e=>[{items:e.map(BO)}],$O=Object(Mu.a)(e=>t=>e?Object(rp.a)(`${e}${t}`).then(GO):Promise.resolve([])),qO=({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>((e,t,s,n)=>Object(Bu.e)(Object(gy.f)(e,t),{body:JSON.stringify({fields:{[s]:n.map(e=>Number(e.id))}})}))(e,t,s,n),zO=e=>e&&Array.isArray(e)?e.map(e=>e.id).join(","):e;var YO=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:WO,transformToStateValue:HO,saveField:qO,additionalProps:(e,s)=>({tagAppearance:"rounded",formatOptionLabel:e=>a.a.createElement(Vb,null,a.a.createElement(VO.a,{label:s.formatMessage(KO.organizationIconLabel)}),a.a.createElement(Kb,null,e.content)),fetchSuggestions:$O(Object(ea.d)(t.fieldId)(e)),placeholder:s.formatMessage(KO.placeholder),noValueText:s.formatMessage(mb.noValue),analyticsAttributeIdRetriever:zO,showPinButton:Object(Vu.a)(t.area)})}))(Qb),QO=s("./src/packages/platform/utils/xsrf-token/src/index.js"),JO=s("./src/packages/issue/fields/components/error-flag/src/main.js"),ZO=s("./src/packages/issue/fields/components/inline-edit/src/main.js");const XO=e=>t=>Object(W.a)(e.daysPerWeek,e.hoursPerDay)(t||0),ej=e=>t=>{let s=t.trim();if(H(s)){const{defaultUnit:t}=e;s=`${s}${jt(t)}`}return s},tj=e=>t=>{const s=ej(e)(t);return""===s||K(s)},sj=e=>t=>{const s=ej(e)(t);return tj(e)(s)?Object(V.a)(e.daysPerWeek,e.hoursPerDay)(s):0};var nj=Object(j.defineMessages)({errorTitle:{id:"issue-field-original-estimate.error-title",defaultMessage:"We couldn't set the original estimate value"},errorMessage:{id:"issue-field-original-estimate.error-message",defaultMessage:"Check your connection, then give it another try."}});const aj=({issueKey:e,issueId:t,fieldId:s,timeTrackingValue:n,onSuccess:a,onFailure:i})=>{const[r]=Object(Au.a)(e,s),o=(null==r?void 0:r.schema.system)||"",[{value:l,error:u},{saveValue:d,resetError:p}]=Object(Fm.a)({fieldKey:s,issueKey:e,fieldType:o,initialValue:null,saveField:(e,s,a,i)=>(async({issueId:e,newValue:t,baseUrl:s,timeTrackingValue:n})=>{const a=n&&null!=n.remainingEstimateSeconds;return Object(Bu.d)(`${s}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(c.stringify)({issueId:e,timetracking_originalestimate:null!==t?`${t/60}m`:null,timetracking_targetsubfield:a?"timetracking_originalestimate":void 0,fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(QO.a)()})})})({issueId:t,newValue:a,baseUrl:i,timeTrackingValue:n}),onSuccess:a,onFailure:i});return[{value:l,error:u,fieldConfig:r},{saveValue:d,resetError:p}]},ij=Q.default.div(["width:","px;cursor:auto;"],8.5*J.e),rj=({isInvalidInput:e,invalidTimeFormatMessage:t,placeholder:s,value:n,onChange:i})=>a.a.createElement(ij,null,a.a.createElement(vh,{compact:!0,type:"text",value:n,placeholder:s,onChange:i,invalidMessage:e?t:void 0}));rj.displayName="OriginalEstimateEdit";var oj=rj;function cj(){return(cj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function lj(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var uj=Object(n.memo)(e=>{var t;const{isMobile:s,config:i,editView:r,fieldId:o,issueId:c,issueKey:l,onUpdate:u,placeholder:d,readView:p,timeTrackingValue:m,invalidTimeFormatMessage:b,onCancel:f,onConfirm:g,onEdit:h,onEnter:y,onEscape:O}=e,j=lj(e,["isMobile","config","editView","fieldId","issueId","issueKey","onUpdate","placeholder","readView","timeTrackingValue","invalidTimeFormatMessage","onCancel","onConfirm","onEdit","onEnter","onEscape"]),[{value:E,error:v,fieldConfig:k},{saveValue:w,resetError:S}]=aj({fieldId:o,issueId:c&&Object(vr.j)(c),issueKey:Object(vr.l)(l),onSuccess:u,timeTrackingValue:m}),[I,C]=Object(n.useState)(!1),[T,P]=Object(n.useState)(null),_=Object(n.useMemo)(()=>XO(i)(T),[i,T]),[x,D]=Object(n.useState)(""),[A,M]=Object(n.useState)(!1);Object(n.useEffect)(()=>{D(_)},[_]),Object(n.useEffect)(()=>{P(E)},[E]),Object(n.useEffect)(()=>{v&&C(!0)},[v]);const L=null!==(t=null==k?void 0:k.isEditable)&&void 0!==t&&t,R=Object(n.useCallback)(e=>{if(x!==_)if(tj(i)(x)){const t=sj(i)(x);w(t,null,e),Object(qi.h)(e),M(!1),C(!1)}else M(!0),C(!0);else C(!1)},[x,_,i,w]),N=Object(n.useCallback)(e=>{S(),M(!1),C(!1),D(_),P(E),Object(qi.h)(e)},[E,S,_]),U=Object(n.useCallback)(e=>{N(e),null==f||f(e)},[f,N]),F=Object(n.useCallback)(e=>{R(e),null==g||g(e)},[R,g]),V=Object(n.useCallback)(e=>{C(!0),Object(qi.h)(e),null==h||h(e)},[h]),K=Object(n.useCallback)(e=>{N(e),null==O||O(e)},[O,N]),B=Object(n.useCallback)(e=>{R(e),null==y||y(e)},[y,R]),W=Object(n.useCallback)(e=>{const{value:t}=e.target;M(!1),S(),D(t)},[S,D]),H=Object(n.useCallback)(()=>a.a.createElement(ze,{value:_}),[_]),G=Object(n.useCallback)(()=>a.a.createElement(oj,{isInvalidInput:A,invalidTimeFormatMessage:b,placeholder:d,value:x,onChange:W}),[x,b,A,W,d]);return a.a.createElement(a.a.Fragment,null,v&&(()=>v?a.a.createElement(JO.a,{error:v,title:nj.errorTitle,description:nj.errorMessage}):null)(),a.a.createElement(ZO.a,cj({actionSubject:"originalEstimateInlineEdit",isEditable:L,isEditing:I,readView:H(),editView:L?G():null,onCancel:U,onConfirm:F,onEdit:V,onEscape:K,onEnter:B},j)))});const dj=Q.default.div(["margin-bottom:16px;& > div > div > div > div > div{width:100%;}& > div > div > div > div > div > div{min-height:32px !important;}& > div > div > div > div > div > div > div{padding:0 6px;}"]),pj=Object(Q.default)(Ru.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),mj=Object(Q.default)(Ru.d)(["& > div > div > div > div > div > div{width:100%;}"]);var bj=Object(n.memo)(({isEditable:e,isMobile:t,config:s,fieldId:n,invalidTimeFormatMessage:i,issueId:r,issueKey:o,label:c,placeholder:l,timeTrackingValue:u,showPinButton:d,onUpdate:p})=>{const m=Object(Qe.isInlineEditEnterFixEnabled)()?pj:mj;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(m,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,c),!0===d&&a.a.createElement(Nu.a,{fieldId:n,label:c})),a.a.createElement(Ru.g,null,a.a.createElement(uj,{isEditable:e,isFitContainerWidthReadView:!0,isMobile:t,config:s,fieldId:n,invalidTimeFormatMessage:i,issueId:r,issueKey:o,label:c,placeholder:l,timeTrackingValue:u,onUpdate:p}))):a.a.createElement(dj,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,c)),a.a.createElement(uj,{isEditable:e,isFitContainerWidthReadView:!0,isMobile:t,config:s,fieldId:n,invalidTimeFormatMessage:i,issueId:r,issueKey:o,label:c,placeholder:l,timeTrackingValue:u,onUpdate:p}))});const fj=Object(j.defineMessages)({placeholder:{id:"issue.time-estimate.placeholder-for-the-field",defaultMessage:"2w 4d 6h 45m"}});var gj=Object(ld.a)((e,t)=>({fieldId:t.fieldId,isOptimistic:!1,additionalProps:(e,s)=>({config:Object(D.h)(e),placeholder:s.formatMessage(fj.placeholder),issueKey:Object(P.B)(e),issueId:Object(P.A)(e),timeTrackingValue:Object(ea.h)("timetracking")(e),invalidTimeFormatMessage:a.a.createElement(j.FormattedMessage,{id:"issue.time-estimate.input-time-string-is-invalid",defaultMessage:"Your estimate must be in the format {format}.",values:{format:a.a.createElement("b",null,"2w 4d 6h 45m")}}),isEditable:Object(ea.A)(t.fieldId)(e)&&!!Object(QO.a)(),showPinButton:Object(Vu.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(_O.e)(t.fieldId,s))})}))(bj),hj=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/epic-selector.js"),yj=s("./node_modules/lodash/debounce.js"),Oj=s.n(yj),jj=s("./node_modules/@atlaskit/select/dist/esm/AsyncSelect.js"),Ej=Object(j.defineMessages)({menuHeader:{id:"issue.views.field.parent.edit.menuHeader",defaultMessage:"To set an epic as a parent, use the epic link instead."},noMatches:{id:"issue.views.field.parent.edit.noMatches",defaultMessage:"No Matches"},placeholder:{id:"issue.views.field.parent.edit.placeholder",defaultMessage:"Choose a parent to assign this issue to."}});const vj=Q.default.img(["margin-right:","px;"],J.e),kj=Q.default.div(["display:flex;flex-direction:row;overflow:hidden;"]),wj=Q.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),Sj=Q.default.div(["padding:","px ","px ","px;"],J.e,2*J.e,2*J.e),Ij=Q.default.div(["color:",";"],Je.a.N90);function Cj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tj(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Cj(Object(s),!0).forEach((function(t){Pj(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Cj(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Pj(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _j=Object(j.injectIntl)(e=>a.a.createElement(Eo.z.MenuList,e,a.a.createElement(Sj,null,e.intl.formatMessage(Ej.menuHeader)),e.children)),xj=e=>{const t=e.data.data;if(t){const{issueType:s,summary:n,key:i}=t,{iconUrl:r}=s;return a.a.createElement(Eo.z.Option,e,a.a.createElement(kj,null,a.a.createElement(vj,{src:r})," ",a.a.createElement(wj,null,i," ",n)))}return null},Dj=Object(j.injectIntl)(e=>{const{data:t}=e.data,s=t?t.label:a.a.createElement(Ij,null,e.intl.formatMessage(Ej.placeholder));return a.a.createElement(Eo.z.SingleValue,e,s)});class Aj extends n.Component{constructor(...e){super(...e),this.onChange=e=>{const{hasEpicLinkFieldDependency:t,showField:s}=this.props.value,n=null!=e?e.data:null,a=Tj(Tj({data:n,value:n?n.key:null},{hasEpicLinkFieldDependency:t}),{showField:s});this.props.onChange(a),this.props.onConfirm(a)},this.debouncedLoadOptions=Oj()((e,t)=>{this.props.loadOptions(e).then(t,()=>{t([])})},300)}render(){const{value:e,portalElement:t,menuPlacement:s,intl:{formatMessage:n}}=this.props;return(a.a.createElement(jj.a,{value:e,autoFocus:!0,defaultOptions:!0,components:{MenuList:_j,Option:xj,SingleValue:Dj},menuPortalTarget:t,menuPlacement:s,onChange:this.onChange,loadOptions:this.debouncedLoadOptions,defaultMenuIsOpen:!0,isClearable:null!==e.data,noOptionsMessage:()=>n(Ej.noMatches),cacheOptions:!0}))}}Aj.displayName="EditableParentLinkField";var Mj=Object(j.injectIntl)(Aj),Lj=Object(j.defineMessages)({label:{id:"issue.views.field.parent.label",defaultMessage:"Parent link"}}),Rj=Object(j.defineMessages)({epicLinkExists:{id:"issue.views.field.parent.epic-link-exists-message.epicLinkExists",defaultMessage:"Cannot use parent link when epic link is set."}});const Nj=Q.default.div(["color:",";"],Je.a.N90),Uj=e=>{const{intl:{formatMessage:t}}=e;return(a.a.createElement(Nj,null,t(Rj.epicLinkExists)))};Uj.displayName="EpicLinkExistsMessage";var Fj=Object(j.injectIntl)(Uj);const Vj=Q.default.div(["display:flex;flex-direction:row;overflow:hidden;white-space:nowrap;"]),Kj=Q.default.a(["margin-right:","px;cursor:pointer;"],J.e),Bj=Q.default.div(["overflow:hidden;text-overflow:ellipsis;"]),Wj=Q.default.img(["margin-right:","px;"],J.e),Hj=e=>{const{showError:t,value:s,noValueText:n}=e;if(t)return a.a.createElement(Fj,null);if(s.data){const{key:e,summary:t,issueType:{iconUrl:n},url:i}=s.data;return(a.a.createElement(Vj,null,a.a.createElement(Wj,{src:n}),a.a.createElement(Kj,{href:i,target:"_blank"},e),a.a.createElement(Bj,null,t)))}return(a.a.createElement(pr.b,null,n))};Hj.displayName="ParentViewField";var Gj=Hj;class $j extends n.Component{constructor(...e){super(...e),this.shouldShowError=()=>this.props.hasEpic&&this.props.value.hasEpicLinkFieldDependency}renderEditableField(){const{onChange:e,onConfirm:t,fetchSuggestions:s,value:n,portalElement:i,menuPlacement:r}=this.props;return this.shouldShowError()?null:a.a.createElement("span",null,a.a.createElement(Mj,{value:n,loadOptions:s,portalElement:i,menuPlacement:r,onChange:e,onConfirm:t}))}render(){const{intl:{formatMessage:e},value:t,noValueText:s,isEditing:n,onConfirm:i,onCancel:r,onEditRequest:o,isMobile:c,isEditable:l,fieldId:u,showPinButton:d}=this.props,p=e(Lj.label);return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,p),!0===d&&a.a.createElement(Nu.a,{fieldId:u,label:p})),a.a.createElement(Ru.g,{isEditing:n},a.a.createElement(G.a,{onEscape:r},a.a.createElement(dd.a,{isLabelHidden:!0,label:p,readView:a.a.createElement(Gj,{noValueText:s,value:t,showError:this.shouldShowError()}),editView:l?this.renderEditableField():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:n,onConfirm:i,onCancel:r,onEditRequested:o,isFitContainerWidthReadView:!c})))):a.a.createElement(a.a.Fragment,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,p)),a.a.createElement(G.a,{onEscape:this.props.onCancel},a.a.createElement(bd,{isLabelHidden:!0,label:p,readView:a.a.createElement(Gj,{noValueText:s,value:t,showError:this.shouldShowError()}),editView:this.props.isEditable?this.renderEditableField():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:n,onConfirm:i,onCancel:r,onEditRequested:o,isFitContainerWidthReadView:!c})))}}$j.displayName="ParentField";var qj=Object(j.injectIntl)($j);const zj=e=>e;function Yj(){return(Yj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Qj(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Jj=Object(Mu.a)((e,t,s,n)=>a=>s?Object(Bu.d)(`${e}/rest/jpo/1.0/parent/suggest`,{body:JSON.stringify({query:a,projectId:t,issueTypeId:s,maxResults:100})}).then(t=>((e,t,s)=>{if(!e||!e.issues||e.issues.length<=0)return[];const{projects:n}=e,a=e.issueTypes;return e.issues.map(e=>{const i=`${n.filter(t=>t.id===e.projectId)[0].key}-${e.issueKey}`,{iconUrl:r}=a.filter(t=>+t.id===e.issueTypeId)[0];return{data:{key:i,summary:e.issueSummary,value:i,label:`${i} ${e.issueSummary}`,issueType:{id:e.issueTypeId,iconUrl:`${t}${r}`},url:`${t}/browse/${i}`},hasEpicLinkFieldDependency:s.hasEpicLinkFieldDependency,showField:s.showField,value:i}})})(t,e,n)):[]),Zj=e=>{let{epic:t,isVisible:s,intl:n}=e,i=Qj(e,["epic","isVisible","intl"]);if(!s)return null;const r=null!=t;return(a.a.createElement(qj,Yj({hasEpic:r},i)))};Zj.displayName="ParentView";var Xj=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:(e,t)=>((e,t)=>((e,t)=>({hasEpicLinkFieldDependency:e.hasEpicLinkFieldDependency,showField:e.showField,value:e.data&&e.data.key?e.data.key:null,data:e.data?{key:e.data.key,value:e.data.key,summary:e.data.summary,url:`${t}/browse/${e.data.key}`,label:`${e.data.key} ${e.data.summary}`,issueType:e.data.issueType?{iconUrl:`${t}${e.data.issueType.iconUrl}`,id:e.data.issueType.id}:e.data.issueType}:null}))(e,t.baseUrl))(e,t),transformToStateValue:zj,additionalProps:(e,s)=>({fetchSuggestions:Jj(Object(P.g)(e),Object(_.C)(e),Object(wr.e)(e),Object(ea.n)(t.fieldId)(e)),noValueText:s.formatMessage(mb.noValue),epic:Object(hj.a)(e),isVisible:Xu(t.fieldId)(e),portalElement:id(t.fieldId)(e)?Gu()||document.body:void 0,showPinButton:Object(Vu.a)(t.area)}),saveField:({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>Object(Bu.e)(Object(gy.f)(e,t),{body:JSON.stringify({fields:{[s]:n&&n.data?n.data.key:null}})})}))(Zj);const eE=e=>e.map(e=>({id:Object(vr.a)(e.id),accountId:Object(vr.a)(e.id),displayName:e.name,avatarUrls:{"24x24":e.avatarUrl}})),tE=e=>Array.isArray(e)?e.reduce((e,t)=>{const s=(e=>{if(!e||"object"!=typeof e||!e.accountId||!e.displayName)return null;let t="";return e.avatarUrls&&"object"==typeof e.avatarUrls&&(t=String(e.avatarUrls["24x24"])),{id:String(e.accountId),name:String(e.displayName),type:"user",fixed:!1,avatarUrl:t}})(t);return s?[...e,s]:e},[]):[];var sE=s("./src/packages/project-settings/people-field/src/index.js"),nE=Object(j.defineMessages)({placeholderMulti:{id:"issue.people.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Choose people"},placeholderSingle:{id:"issue.people.text-for-edit-view-when-no-value-is-provided-single-mode",defaultMessage:"Choose a person"},singleValueValidationError:{id:"issue.people.single-value-validation-error",defaultMessage:"You can only add one person to this field"}});const aE=Object(Mu.a)(e=>e.map(e=>({value:e.id,content:e.name,elemBefore:a.a.createElement(xr.a,{size:"xsmall",src:e.avatarUrl})}))),iE=e=>!e||!1!==e.isMulti;class rE extends n.Component{isValid(){const{configuration:e,value:t}=this.props;return!iE(e)&&t.length>1}renderReadView(){const{value:e,intl:t,isMobile:s}=this.props;return(a.a.createElement(sb,{value:aE(e),noValueText:t.formatMessage(mb.noValue),tagAppearance:"rounded",shouldHideLinks:s,isUserTag:!0}))}renderEditView(){const{onChange:e,value:t,baseUrl:s,intl:n,configuration:i}=this.props,r=iE(i)||t.length>1;return a.a.createElement(sE.a,{baseUrl:s,isMulti:r,autoFocus:!0,isInvalid:this.isValid(),isInputDisabled:this.isValid(),invalidMessage:n.formatMessage(nE.singleValueValidationError),placeholder:n.formatMessage(r?nE.placeholderMulti:nE.placeholderSingle),isDisabled:!1,appearance:"compact",onChange:e,value:t})}render(){const{label:e,isEditable:t,isEditing:s,isMobile:n,onConfirm:i,onCancel:r,onEditRequest:o,intl:c,value:l,configuration:u,fieldId:d,showPinButton:p}=this.props,m=!iE(u)&&l.length<=1;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,e),!0===p&&a.a.createElement(Nu.a,{fieldId:d,label:e})),a.a.createElement(Ru.g,{isEditing:s},a.a.createElement(G.a,{onEscape:r},a.a.createElement(dd.a,{isLabelHidden:!0,label:e,readView:this.renderReadView(),editView:t?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:s,shouldConfirmOnEnter:m,isValid:!s||this.isValid(),onConfirm:i,onCancel:r,areActionButtonsHidden:m,onEditRequested:o,isFitContainerWidthReadView:!n,editButtonLabel:c.formatMessage(ud.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:c.formatMessage(ud.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:c.formatMessage(ud.a.cancelButtonLabel,{fieldName:e})})))):a.a.createElement("div",null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,e)),a.a.createElement(bd,{isLabelHidden:!0,label:e,readView:this.renderReadView(),editView:t?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:s,shouldConfirmOnEnter:m,isValid:!s||this.isValid(),onConfirm:i,onCancel:r,areActionButtonsHidden:m,onEditRequested:o,isFitContainerWidthReadView:!n,editButtonLabel:c.formatMessage(ud.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:c.formatMessage(ud.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:c.formatMessage(ud.a.cancelButtonLabel,{fieldName:e})}))}}rE.displayName="People",rE.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:""};var oE=Object(ld.a)((e,{fieldId:t,area:s})=>({fieldId:t,transformFromStateValue:tE,transformToStateValue:eE,additionalProps:e=>{const n=Object(ea.q)(t)(e)||{};return{baseUrl:Object(vr.b)(Object(P.g)(e)),configuration:n.configuration||{},showPinButton:Object(Vu.a)(s)}}}))(Object(j.injectIntl)(rE));const cE=e=>({content:e.name,value:e.id,iconUrl:e.iconUrl}),lE=e=>e&&cE(e),uE=e=>e&&{name:e.content,id:e.value,iconUrl:e.iconUrl},dE=e=>[{items:e.map(cE)}];function pE(){return(pE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const mE=Object(j.defineMessages)({placeholder:{id:"issue.priority.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select priority"}}),bE=Object(Mu.a)(e=>()=>Promise.resolve(e).then(dE)),fE=()=>{Object(Rr.c)().markTimeToFeedback({key:Yr.TIME_TO_RENDER_SUGGESTIONS})},gE=()=>{Object(Rr.c)().markTimeToFinishTask({key:Yr.TIME_TO_RENDER_SUGGESTIONS})},hE=e=>{const{isEditing:t,value:s,onChange:i,onEditRequest:r,onConfirm:o,onCancel:c}=e,l=Object(n.useRef)(!1);Object(n.useEffect)(()=>{Object(Rr.c)().markTimeToFinishTask({key:Yr.TIME_TO_REFLECT_PRIORITY_UPDATE})},[s]),Object(n.useEffect)(()=>{t||Object(Rr.c)().markTimeToFinishTask({key:Yr.TIME_TO_RENDER_READ_VIEW})},[t]);const u=Object(n.useCallback)(e=>{l.current=!0,Object(Rr.c)().markStartOfInteraction({key:Yr.TIME_TO_REFLECT_PRIORITY_UPDATE,cancelExisting:!0}),i(e)},[i]),d=Object(n.useCallback)(()=>{Object(Rr.c)().markStartOfInteraction({key:Yr.TIME_TO_RENDER_SUGGESTIONS,cancelExisting:!0}),r()},[r]),p=Object(n.useCallback)(()=>{l.current||Object(Rr.c)().markStartOfInteraction({key:Yr.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),l.current=!1,o()},[o]),m=Object(n.useCallback)(()=>{Object(Rr.c)().markStartOfInteraction({key:Yr.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),c()},[c]);return Object(lf.a)()?a.a.createElement(ff,pE({},e,{onEditRequest:d,onConfirm:p,onCancel:m,onChange:u,onDataRequest:fE,onDataLoaded:gE,renderReadView:wf(s)})):a.a.createElement(ff,pE({},e,{onEditRequest:d,onConfirm:p,onCancel:m,onChange:u,onDataRequest:fE,onDataLoaded:gE}))};hE.displayName="PriorityView";var yE=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:lE,transformToStateValue:uE,additionalProps:(e,s)=>({fetchSuggestions:bE(Object(ea.c)(t.fieldId)(e)),placeholder:s.formatMessage(mE.placeholder),noValueText:s.formatMessage(mb.noValue),portalElement:id(t.fieldId)(e)?Gu()||document.body:void 0,showPinButton:Object(Vu.a)(t.area)})}))(hE),OE=s("./node_modules/@atlaskit/select/dist/esm/RadioSelect.js");class jE extends n.Component{render(){const{invalidMessage:e,options:t,placeholder:s,onChange:n,value:i,portalElement:r}=this.props;return(a.a.createElement(lb,{validationState:null!=e?"error":null,validationMessage:e},a.a.createElement(OE.a,{menuPortalTarget:r,options:t,placeholder:s,onChange:n,value:i,tabSelectsValue:!1,autoFocus:!0})))}}jE.displayName="RadioFieldView",jE.displayName="RadioFieldView",jE.defaultProps={value:null,options:[],placeholder:null,invalidMessage:null};class EE extends n.Component{constructor(...e){super(...e),this.emptyOption={label:this.props.intl.formatMessage(mb.noValue)}}getOptions(){const{options:e,value:t}=this.props;return t?[this.emptyOption,...e]:e}renderReadView(){const{value:e,noValueText:t}=this.props;return e?e.label:a.a.createElement(pr.b,null,t)}renderEditView(){return this.props.isEditable?a.a.createElement(jE,{portalElement:this.props.portalElement,value:this.props.value,options:this.getOptions(),onChange:this.props.onChange,placeholder:this.props.placeholder,invalidMessage:this.props.invalidMessage}):null}render(){const{label:e,onCancel:t,isEditing:s,onConfirm:n,onEditRequest:i,isMobile:r,fieldId:o,showPinButton:c,intl:l}=this.props;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,e),!0===c&&a.a.createElement(Nu.a,{fieldId:o,label:e})),a.a.createElement(Ru.g,{isEditing:s},a.a.createElement(G.a,{onEscape:t},a.a.createElement(dd.a,{isLabelHidden:!0,label:e,readView:this.renderReadView(),editView:this.renderEditView(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:s,onConfirm:n,onCancel:t,onEditRequested:i,isFitContainerWidthReadView:!r,editButtonLabel:l.formatMessage(ud.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:l.formatMessage(ud.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:l.formatMessage(ud.a.cancelButtonLabel,{fieldName:e})})))):a.a.createElement("div",null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,e)),a.a.createElement(G.a,{onEscape:t},a.a.createElement(bd,{isLabelHidden:!0,label:e,readView:this.renderReadView(),editView:this.renderEditView(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:s,onConfirm:n,onCancel:t,onEditRequested:i,isFitContainerWidthReadView:!r,editButtonLabel:l.formatMessage(ud.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:l.formatMessage(ud.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:l.formatMessage(ud.a.cancelButtonLabel,{fieldName:e})})))}}EE.displayName="RadioInlineEditView",EE.displayName="RadioInlineEditView",EE.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,options:[],value:null,label:"",placeholder:null,noValueText:null,invalidMessage:null};var vE=Object(j.injectIntl)(EE);const kE=e=>({label:e.value,value:e.id}),wE=e=>e?kE(e):null,SE=e=>e&&void 0!==e.value?{id:e.value,value:e.label}:null,IE=Object(j.defineMessages)({placeholder:{id:"issue.radio-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),CE=ap()(e=>(e=>e&&e.map(kE)||[])(e));var TE=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:wE,transformToStateValue:SE,additionalProps:(e,s)=>({portalElement:id(t.fieldId)(e)?Gu()||document.body:void 0,options:CE(Object(ea.c)(t.fieldId)(e)),placeholder:s.formatMessage(IE.placeholder,{fieldName:Object(ea.m)(t.fieldId)(e)}),noValueText:s.formatMessage(mb.noValue),showPinButton:Object(Vu.a)(t.area)})}))(vE);const PE=({issueKey:e,fieldKey:t})=>{const[s]=Object(Au.a)(e,t),[n]=Object(Um.b)({fieldKey:t,issueKey:e});return[{value:n,fieldConfig:s},{}]},_E=Q.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),xE=({value:e})=>a.a.createElement(_E,null,e||"\xa0");xE.displayName="ReadOnlyFieldView";var DE=({fieldKey:e,readView:t})=>{const s=Object(Du.d)(),[{value:i}]=PE({issueKey:s,fieldKey:e});return null!=t&&"function"==typeof t?Object(n.createElement)(t,{value:i}):a.a.createElement(xE,{value:i})};const AE=Q.default.div(["margin-bottom:16px;"]),ME=Object(Q.default)(Ru.d)(["align-items:center;"]);var LE=({fieldId:e,label:t,area:s})=>{const i=Object(Du.d)(),{formatMessage:r}=Object(Ge.c)(),[{fieldConfig:o}]=PE({issueKey:i,fieldKey:e}),c=(null==o?void 0:o.title)||t,{noValue:l}=mb,u=Object(n.useCallback)(({value:e})=>null==e?a.a.createElement(pr.b,null,r(l)):a.a.createElement(xE,{value:e}),[r,l]),d=Object(Vu.a)(s);return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(ME,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,c),!0===d&&a.a.createElement(Nu.a,{fieldId:e,label:c})),a.a.createElement(Ru.g,null,a.a.createElement(DE,{fieldKey:e,readView:u}))):a.a.createElement(AE,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,c)),a.a.createElement(DE,{fieldKey:e,readView:u}))};const RE=Object(Mu.a)(e=>({avatarUrl:"",name:e,id:null})),NE=Object(Mu.a)(e=>[RE(e)]);var UE=Object(Mu.a)((e,t,s)=>async n=>{if(!e)return[];return[...!s&&((e,t)=>!!e&&!!t&&t.toLowerCase().startsWith(e.toLowerCase()))(n,t)?[RE(t)]:[],...(await Object(rp.a)(`${e}${n}`)).map(nm)]});const FE=Object(j.defineMessages)({noReporter:{id:"issue.reporter.text-when-no-value-is-provided",defaultMessage:"Anonymous"}});var VE=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:nm,transformToStateValue:am,additionalProps:(e,s)=>{const n=Object(ea.C)(t.fieldId)(e),a=s.formatMessage(FE.noReporter);return{portalElement:id(t.fieldId)(e)?Gu()||document.body:void 0,fetchSuggestions:UE(Object(ea.d)(t.fieldId)(e),a,n),emptyOption:n?void 0:RE(a),initialOptions:n?void 0:NE(a),fieldId:"reporter",showPinButton:Object(Vu.a)(t.area)}}}))(Qp),KE=s("./node_modules/lodash/range.js"),BE=s.n(KE),WE=s("./node_modules/@atlaskit/icon/glyph/star.js"),HE=s.n(WE),GE=s("./node_modules/@atlaskit/icon/glyph/star-filled.js"),$E=s.n(GE);const qE=Object(Xn.createSelector)(_.e,e=>e.requestPanelMetadata.channel),zE=Object(Xn.createSelector)(_.e,e=>e.requestPanelMetadata.requestUrl||""),YE=Object(Xn.createSelector)(_.e,e=>e.requestPanelMetadata.csatComment||""),QE=Object(ea.e)("com.atlassian.servicedesk:sd-request-feedback-date"),JE=Object(Xn.createSelector)(QE,e=>e&&e.renderedValue),ZE=Q.default.div(["max-width:220px;padding-right:","px;margin-right:-","px;margin-bottom:","px;max-height:240px;overflow:auto;",";"],J.e,2*J.e,J.e,Object(pr.f)("&")),XE=Q.default.div(["height:20px;color:#6c798f;",";"],e=>!e.hasComment&&Object(Q.css)(["margin:-","px 0;padding:10px 0;"],2*J.e));var ev=Object(Ts.a)([Object(i.b)(e=>({feedbackDate:JE(e),comment:YE(e)}),{})])(e=>{const{feedbackDate:t,comment:s}=e;return(a.a.createElement(a.a.Fragment,null,s&&a.a.createElement(ZE,null,s),t&&a.a.createElement(XE,{hasComment:!!s},t)))});const tv=Q.default.div(["margin-top:0;margin-bottom:","px;"],3*J.e),sv=Q.default.div(["margin-top:"," cursor:pointer;"],()=>Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?`${.5*J.e}px;`:`${J.e}px;`);class nv extends n.Component{constructor(...e){super(...e),this.state={shouldShowDetails:!1},this.onToggle=()=>this.setState({shouldShowDetails:!this.state.shouldShowDetails}),this.renderStar=e=>{const t=BE()(5).map(t=>t<e?a.a.createElement($E.a,{label:"",key:t,primaryColor:Je.a.Y300}):a.a.createElement(HE.a,{label:"",key:t,primaryColor:Je.a.N60}));return(a.a.createElement(a.a.Fragment,null,t))}}render(){const{fieldName:e,rating:t,isVisible:s,fieldId:n,showPinButton:i}=this.props;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?s&&a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,e),!0===i&&a.a.createElement(Nu.a,{fieldId:n,label:e})),a.a.createElement(Ru.g,null,a.a.createElement(Lf.a,{onClose:this.onToggle,content:a.a.createElement(ev,null),isOpen:this.state.shouldShowDetails},a.a.createElement(sv,{onClick:this.onToggle},this.renderStar(t))))):s&&a.a.createElement(tv,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,e)),a.a.createElement(Lf.a,{onClose:this.onToggle,content:a.a.createElement(ev,null),isOpen:this.state.shouldShowDetails},a.a.createElement(sv,{onClick:this.onToggle},this.renderStar(t))))}}nv.displayName="RequestFeedback",nv.defaultProps={isVisible:!0};const av=(e,t)=>{const s=Object(ea.o)(t)(e);return s&&s.rating};var iv=Object(Ts.a)([Object(i.b)((e,t)=>({fieldId:t.fieldId,rating:av(e,t.fieldId),fieldName:Object(ea.m)(t.fieldId)(e),isVisible:Zu(t.fieldId)(e),showPinButton:Object(Vu.a)(t.area)}),{})])(nv);var rv=Object(j.defineMessages)({placeholder:{id:"issue.request-language.placeholder",defaultMessage:"Select Request language"},languageUnknown:{id:"issue.request-language.languageUnknown",defaultMessage:"Language unknown"}});const ov=e=>({content:e.displayName,value:e.languageCode}),cv=Object(Mu.a)(e=>({displayName:e.formatMessage(rv.languageUnknown),languageCode:""})),lv=(e,t,s)=>ov(e||cv(s)),uv=e=>({displayName:e.content,languageCode:e.value.toString()});function dv(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const pv=Object(Mu.a)((e,t)=>()=>Promise.resolve(((e,t)=>[{items:[cv(t),...e].map(ov)}])(e,t))),mv=({baseUrl:e,value:t},s)=>{const{languageCode:n}=t;return(async(e,t,s)=>{if(!t)throw new Error("Issue ID not available");return Object(Bu.e)(((e,t)=>`${e}/rest/servicedesk/lingo-integration/1/request-language/${t}`)(e,t),{body:JSON.stringify({languageCode:s})})})(e,Object(P.A)(s),n)},bv=e=>e&&e.languageCode;var fv=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:lv,transformToStateValue:uv,saveField:mv,additionalProps:(e,s)=>({fetchSuggestions:pv(Object(ea.c)(t.fieldId)(e),s),shouldHide:!Ju(t.fieldId)(e),hasAutocomplete:!0,placeholder:s.formatMessage(rv.placeholder),analyticsAttributeIdRetriever:bv,showPinButton:Object(Vu.a)(t.area)})}))(e=>{const{shouldHide:t}=e,s=dv(e,["shouldHide"]);return t?null:a.a.createElement(ff,s)}),gv=Object(j.defineMessages)({placeholder:{id:"issue.request-participants.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select the Request Participants"}});const hv=e=>e?e.map(e=>({content:e.displayName,value:e.accountId,avatarUrl:e.avatarUrls["24x24"],elemBefore:a.a.createElement(xr.a,{size:"xsmall",src:e.avatarUrls["24x24"]})})):[],yv=e=>e&&e.map(e=>({displayName:e.content,id:Object(vr.a)(e.value),accountId:Object(vr.a)(e.value),avatarUrls:{"24x24":e.avatarUrl}})),Ov=e=>[{items:(e&&e.users||[]).map(e=>({content:e.displayName,value:e.accountId,avatarUrl:e.avatarUrl}))}],jv=Object(Mu.a)(e=>t=>e?Object(rp.a)(`${e}${t}`).then(Ov):Promise.resolve([])),Ev=e=>e&&Array.isArray(e)?e.map(e=>e.accountId).join(","):e;var vv=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:hv,transformToStateValue:yv,additionalProps:(e,s)=>({fetchSuggestions:jv(Object(ea.d)(t.fieldId)(e)),placeholder:s.formatMessage(gv.placeholder),noValueText:s.formatMessage(mb.noValue),tagAppearance:"rounded",formatOptionLabel:e=>a.a.createElement(Vb,null,e.avatarUrl&&a.a.createElement(xr.a,{size:"small",src:e.avatarUrl}),a.a.createElement(Kb,null,e.content)),analyticsAttributeIdRetriever:Ev,showPinButton:Object(Vu.a)(t.area)})}))(Qb),kv=Object(j.defineMessages)({placeholder:{id:"issue.service-entity.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select a service"}});const wv=e=>encodeURIComponent((e=>e.startsWith("b:")?e:`b:${window.btoa(e)}`)(e)),Sv=(e,t,s)=>`${((e,t)=>`${e}/jira/servicedesk/projects/${t}/services`)(e,t)}/${wv(s)}`,Iv=(e,{baseUrl:t,projectKey:s})=>e?e.map(e=>({value:e.id,content:e.name,href:Sv(t,s,e.id)})):[],Cv=e=>e.map(e=>({id:String(e.value),name:e.content})),Tv=(e,t,s)=>e.services.map(e=>({value:e.id,content:e.name,href:Sv(t,s,e.id)}));var Pv=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js");function _v(){return(_v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function xv(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Dv=e=>{const{initFieldOptions:t,resolveServiceUrl:s,baseUrl:i,projectKey:r}=e,o=xv(e,["initFieldOptions","resolveServiceUrl","baseUrl","projectKey"]),[c,l]=Object(n.useState)(!1),[u,d]=Object(n.useState)(null),[p,m]=Object(n.useState)([]),{createAnalyticsEvent:b}=Object(Ey.a)();return Object(n.useEffect)(()=>{t()},[t]),Object(n.useEffect)(()=>{l(!0);const t=e.value.map(e=>e.value);if(!t||!t.length)return m([]),void l(!1);Object(rp.a)(s,{method:"POST",body:JSON.stringify({ids:t})}).then(e=>{l(!1),m(Tv(e,i,r))}).then(()=>{Object(qi.b)(b({}),"jiraIssueView.serviceEntityFetch succeeded")},e=>{Object(Pv.a)({meta:{id:"serviceEntityFetch",packageName:"jiraIssueView"},error:e}),d(e),l(!1)})},[i,b,r,e.value,s]),a.a.createElement(Qb,_v({},o,{value:p}))};Dv.displayName="ServiceEntityView";var Av=Dv;const Mv=ap()((e,t,s,n)=>(a,i)=>{if(null==e)return Promise.resolve([]);let r=`${e}${encodeURIComponent(a)}`;return null!=i&&(r=`${r}&sessionId=${i}`),null!=t&&(r=`${r}&fieldEditSessionId=${t}`),Object(rp.a)(r).then(e=>((e,t,s)=>[{items:Tv(e,t,s)}])(e,s,n))},(e,t,s,n)=>`${e||""}_${t}_${s}_${n}`);var Lv=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Iv,transformToStateValue:Cv,additionalProps:(e,s)=>({baseUrl:Object(P.g)(e),projectKey:Object(P.I)(e),fetchSuggestions:Mv(Object(ea.d)(t.fieldId)(e),Object(ea.f)(t.fieldId)(e),Object(P.g)(e),Object(P.I)(e)),placeholder:s.formatMessage(kv.placeholder),noValueText:s.formatMessage(mb.noValue),canCreateNewItem:!1,allowEmptyValue:!0,resolveServiceUrl:Object(ea.d)(t.fieldId)(e),showPinButton:Object(Vu.a)(t.area),additionalAnalyticsProps:{source:"service-selector"}})}))(Av),Rv=Object(ld.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(mb.noValue),type:"text",showPinButton:Object(Vu.a)(t.area)})}))(wh);const Nv=e=>({value:e.id,content:e.value,iconUrl:e.iconUrl}),Uv=e=>e&&Nv(e),Fv=e=>e&&{id:e.value,value:e.content,iconUrl:e.iconUrl},Vv=e=>e&&[{items:e.map(Nv)}]||[],Kv=Object(j.defineMessages)({placeholder:{id:"issue.single-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),Bv=ap()(e=>()=>Promise.resolve(e).then(Vv));var Wv=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Uv,transformToStateValue:Fv,additionalProps:(e,s)=>({fetchSuggestions:Bv(Object(ea.c)(t.fieldId)(e)),placeholder:s.formatMessage(Kv.placeholder,{fieldName:Object(ea.m)(t.fieldId)(e)}),noValueText:s.formatMessage(mb.noValue),allowEmptyValue:!0,hasAutocomplete:!0,portalElement:id(t.fieldId)(e)?Gu()||document.body:void 0,showPinButton:Object(Vu.a)(t.area)})}))(ff),Hv=s("./src/packages/servicedesk/sla-panel/src/index.js");const Gv=Object(Xn.createSelector)(e=>e.sla,e=>e.issueUpdatedTimestamp),$v=Q.default.div(["order:'-1';"]);class qv extends n.Component{render(){const{isVisible:e,baseUrl:t,issueKey:s,locale:n,issueUpdatedTimestamp:i}=this.props;return e&&a.a.createElement($v,{id:"sla-panel"},a.a.createElement(Hv.a,{baseUrl:t,issueKey:s,locale:n,issueUpdatedTimestamp:i}))}}qv.displayName="SlaPanel",qv.defaultProps={isVisible:!0};var zv=Object(Ts.a)([Object(i.b)(e=>({baseUrl:Object(P.g)(e),issueKey:Object(P.B)(e),locale:Object(P.D)(e),issueUpdatedTimestamp:Gv(e),isVisible:Object(Yu.e)(e)}),{})])(qv),Yv=s("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js");const Qv=e=>Object(Xn.createSelector)(Yu.g,_.m,Object(ea.A)(e),(e,t,s)=>e.canScheduleIssues&&t&&s),Jv=(e,t)=>`${e}/secure/GHGoToBoard.jspa?sprintId=${t}`;var Zv=s("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js");const Xv=({option:e})=>a.a.createElement(Uy.e,null,null!=e.elemBefore?e.elemBefore:null,a.a.createElement(Ly,null,a.a.createElement(Ry,null,e.label),null!=e.description?a.a.createElement(Ny,null,e.description):null));Xv.displayName="RichOptionView";const ek=Q.default.div(["margin-left:","px;"],J.e),tk=Q.default.span(["padding:","px;"],J.e/2),sk=Q.default.div(["margin-top:","px;display:flex;justify-content:space-between;max-width:300px;"],J.e),nk=Q.default.span(["font-weight:500;"]),ak=`\n    margin-right: ${3*J.e}px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n`,ik=Q.default.a(["",";"],ak),rk=Q.default.span(["",";"],ak),ok=Q.default.div(["white-space:nowrap;"]);class ck extends n.Component{constructor(...e){super(...e),this.state={isDialogOpen:!1},this.handleButtonClick=e=>{this.setState({isDialogOpen:!this.state.isDialogOpen}),e.stopPropagation()},this.handleDialogClose=e=>{this.setState({isDialogOpen:e.isOpen})},this.handleDialogClick=e=>{e.stopPropagation()},this.handleDialogMouseDown=e=>{e.preventDefault(),e.stopPropagation()},this.renderInlineDialogContent=()=>a.a.createElement("div",null,a.a.createElement(nk,null,this.props.closedSprintsLabel),this.props.closedSprints.map(e=>a.a.createElement(sk,{key:e.name},this.props.shouldHideLinks?a.a.createElement(rk,null,e.name):a.a.createElement(ik,{href:e.href},e.name),a.a.createElement(ok,null,e.endDate))))}render(){return a.a.createElement(ek,{onClick:this.handleDialogClick,onMouseDown:this.handleDialogMouseDown},a.a.createElement(Lf.a,{content:this.renderInlineDialogContent(),isOpen:this.state.isDialogOpen,onClose:this.handleDialogClose,placement:"bottom"},a.a.createElement(q.a,{onClick:this.handleButtonClick,spacing:"none",isSelected:this.state.isDialogOpen},a.a.createElement(tk,null,`+${this.props.closedSprints.length}`))))}}ck.displayName="ClosedSprintsView",ck.defaultProps={shouldHideLinks:!1,closedSprints:[],closedSprintsLabel:null};const lk=Q.default.div(["display:flex;align-items:center;width:100%;"]),uk=Q.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);function dk(){return(dk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function pk(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class mk extends n.Component{constructor(...e){super(...e),this.onSprintClick=e=>{const{rapidViewId:t,value:s,onSprintClicked:n}=this.props;t&&s&&n(s.value),e.stopPropagation()},this.onEditRequest=()=>{Object(Rr.c)().cancel({key:zr.TIME_TO_REFLECT_INPUT_RESULT},!0),Object(Rr.c)().markStartOfInteraction({key:zr.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()},this.onChange=(e,t)=>{t&&("select-option"===t.action?Object(Rr.c)().markStartOfInteraction({key:zr.TIME_TO_REFLECT_SELECTED_SPRINT}):"clear"===t.action&&Object(Rr.c)().markStartOfInteraction({key:zr.TIME_TO_REFLECT_REMOVED_SPRINT})),this.props.onChange(e)},this.onConfirm=()=>{Object(Rr.c)().markStartOfInteraction({key:zr.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),this.props.onConfirm()},this.onCancel=()=>{Object(Rr.c)().markStartOfInteraction({key:zr.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),this.props.onCancel()},this.onDataRequest=({isInitial:e})=>{e||Object(Rr.c)().markStartOfInteraction({key:zr.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e}={})=>{e?Object(Rr.c)().markTimeToFinishTask({key:zr.TIME_TO_RENDER_INITIAL_SUGGESTIONS}):Object(Rr.c)().markTimeToFinishTask({key:zr.TIME_TO_REFLECT_INPUT_RESULT})},this.renderSprintContent=()=>{const{baseUrl:e,rapidViewId:t,value:s}=this.props;return Object(Zv.a)()&&t?s&&s.content:a.a.createElement("a",{href:null==t&&s?Jv(e,s.value):void 0,onClick:this.onSprintClick},s&&s.content)},this.renderReadView=()=>{const{value:e,noValueText:t,closedSprints:s,closedSprintsLabel:n,isMobile:i}=this.props;return(a.a.createElement(lk,null,a.a.createElement(uk,null,e?this.renderSprintContent():a.a.createElement(pr.b,null,t)),s.length>0&&a.a.createElement(ck,{closedSprints:s,closedSprintsLabel:n,shouldHideLinks:i})))},this.formatOptionLabel=(e,{context:t})=>"menu"===t?a.a.createElement(Xv,{option:e}):e.label}componentDidUpdate(e){const{isEditing:t,value:s}=this.props;!e.isEditing&&t&&Object(Rr.c)().markTimeToFeedback({key:zr.TIME_TO_RENDER_INITIAL_SUGGESTIONS}),e.isEditing&&!t&&(e.value!==s?s?Object(Rr.c)().markTimeToFinishTask({key:zr.TIME_TO_REFLECT_SELECTED_SPRINT}):Object(Rr.c)().markTimeToFinishTask({key:zr.TIME_TO_REFLECT_REMOVED_SPRINT}):Object(Rr.c)().markTimeToFinishTask({key:zr.TIME_TO_RENDER_READ_VIEW}))}render(){const e=this.props,{baseUrl:t,closedSprints:s,closedSprintsLabel:n,rapidViewId:i,onSprintClicked:r}=e,o=pk(e,["baseUrl","closedSprints","closedSprintsLabel","rapidViewId","onSprintClicked"]);return(a.a.createElement(ff,dk({},o,{onEditRequest:this.onEditRequest,onChange:this.onChange,onConfirm:this.onConfirm,onCancel:this.onCancel,onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded,renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0,optionValuesSafeForAnalytics:!0})))}}mk.displayName="SprintInlineEditView",mk.displayName="SprintInlineEditView",mk.defaultProps={closedSprints:[],closedSprintsLabel:null};var bk=Object(j.defineMessages)({placeholder:{id:"issue.sprint.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Sprint"},activeSprints:{id:"issue.sprint.active-heading",defaultMessage:"Active"},futureSprints:{id:"issue.sprint.future-heading",defaultMessage:"Future"},closedSprintsLabel:{id:"issue.sprint.text-for-closed-sprints-inline-dialog",defaultMessage:"{count} completed {count, plural, one {sprint} other {sprints}}"}});const fk=e=>(e?e.find(e=>e.state&&"active"===e.state.toLowerCase()):null)||null,gk=e=>({content:e.name,value:e.id}),hk=e=>{const t=fk(e),s=(e=>(e?e.find(e=>e.state&&"future"===e.state.toLowerCase()):null)||null)(e);return t&&gk(t)||s&&gk(s)},yk=e=>t=>{if(!t)return e;const s={name:t.content,id:t.value,state:"active"};return e.concat(s)},Ok=e=>({content:e.name,value:e.id,description:e.boardName,id:e.id}),jk=Object(Mu.a)((e,t,s)=>({id:s.id,name:s.name,href:Jv(t,s.id),endDate:e.formatDate(s.endDate,{day:"2-digit",month:"short",year:"numeric"})})),Ek=(e,t)=>{const s=e.length;return s>0?t.formatMessage(bk.closedSprintsLabel,{count:s}):null},vk=Object(Mu.a)((e,t)=>(s,n)=>{let a=`${t}/rest/greenhopper/1.0/sprint/picker?query=${s}&maxResults=10&maxActiveSprints=5`;if(Object(Qe.isSmartSprintRankingEnabled)()){a=`url&sessionId=${""!==n&&null!=n?n:"default-session-id"}&shouldRank=true`}return Object(rp.a)(a).then(t=>((e,t)=>{const s=e.suggestions||[],n=e.allMatches||[],a=s.concat(n),i=a.filter(e=>"ACTIVE"===e.stateKey).map(Ok),r=a.filter(e=>"FUTURE"===e.stateKey).map(Ok);return[{heading:t.formatMessage(bk.activeSprints),items:i},{heading:t.formatMessage(bk.futureSprints),items:r}]})(t,e))}),kk=Object(Mu.a)((e,t,s)=>((e,t,s)=>e.map(e=>jk(s,t,e)))(e,t,s));var wk=Object(ld.a)((e,t)=>{const s=(e=>Object(Xn.createSelector)(Object(ea.q)(e),e=>e&&e.value?e.value.filter(e=>"closed"===e.state||"CLOSED"===e.state):[]))(t.fieldId)(e);return{fieldId:t.fieldId,transformFromStateValue:hk,transformToStateValue:yk(s),additionalProps:(e,n)=>({fetchSuggestions:vk(n,Object(P.g)(e)),closedSprints:kk(s,Object(P.g)(e),n),closedSprintsLabel:Ek(s,n),placeholder:n.formatMessage(bk.placeholder),noValueText:n.formatMessage(mb.noValue),allowEmptyValue:!0,rapidViewId:Object(P.J)(e),baseUrl:Object(P.g)(e),isEditable:Qv(t.fieldId)(e),showPinButton:Object(Vu.a)(t.area)}),additionalCallbacks:e=>({onSprintClicked:t=>e(Object(Yv.e)(t))}),saveField:({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>{const a=fk(n);return Object(Bu.e)(Object(gy.f)(e,t),{body:JSON.stringify({fields:{[s]:a?a.id:null}})})}}})(mk),Sk=Object(j.defineMessages)({errorTitle:{id:"issue-field-classic-story-point.error-title",defaultMessage:"We couldn't set the story point value"},errorMessage:{id:"issue-field-classic-story-point.error-message",defaultMessage:"Check your connection, then give it another try."},negativeNumbersNotAllowed:{id:"issue-field-classic-story-point.negative-numbers-not-allowed",defaultMessage:"Time for some positivity. Story point estimates can't be negative."}});const Ik=({issueKey:e,issueId:t,fieldKey:s,onSuccess:n})=>{const[a]=Object(Au.a)(e,s),i=wl()(a,"schema.type","number"),[{value:r,error:o},{saveValue:l,resetError:u}]=Object(Fm.a)({fieldKey:s,issueKey:e,fieldType:i,initialValue:null,saveField:(e,n,a,i)=>(async(e,t,s,n)=>null!==s&&s<0?Promise.reject(new Error(Sk.negativeNumbersNotAllowed.id)):Object(Bu.d)(`${n}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(c.stringify)({[t]:s,issueId:e,skipScreenCheck:!0,atl_token:Object(QO.a)(),singleFieldEdit:!0})}))(Object(vr.l)(t.toString()),s,a,i),onSuccess:n});return[{value:r,error:o,fieldConfig:a},{saveValue:l,resetError:u}]},Ck=Q.default.div(["width:","px;cursor:auto;"],8.5*J.e);function Tk(){return(Tk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Pk(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var _k=Object(n.memo)(e=>{const{isInvalid:t=!1,type:s,defaultValue:n}=e,i=Pk(e,["isInvalid","type","defaultValue"]),r=null===n?"":n;return a.a.createElement(Ck,null,a.a.createElement(_e.a,Tk({appearance:"subtle",autoFocus:!0,compact:!0,isLabelHidden:!0,isInvalid:t,shouldFitContainer:!0,type:s,value:r},i)))});const xk=Q.default.div(["cursor:pointer;&:hover > span{color:",";background-color:",";}"],Je.a.N800,Je.a.N90);var Dk=({isEditable:e,noValueText:t,value:s})=>{const n={min:-1*Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER};if(null===s)return a.a.createElement(pr.b,null,t);const i=a.a.createElement($e.a,n,s);return e?a.a.createElement(xk,null,i):i};function Ak(){return(Ak=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Mk(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Lk=Object(n.memo)(e=>{const{fieldKey:t,issueKey:s,issueId:i,onCancel:r,onEdit:o,onEscape:c,onConfirm:l,onEnter:u,onUpdate:d,readView:p,editView:m,noValueText:b}=e,f=Mk(e,["fieldKey","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText"]),[{value:g,error:h,fieldConfig:y},{saveValue:O,resetError:j}]=Ik({issueKey:Object(vr.l)(s),issueId:i&&Object(vr.j)(i),fieldKey:t,onSuccess:d}),E=wl()(y,"schema.type","number"),[v,k]=Object(n.useState)(!1),[w,S]=Object(n.useState)(g),I=!!y&&y.isEditable;Object(n.useEffect)(()=>{h&&k(!0)},[h]);const C=Object(n.useCallback)(e=>{w!==g&&O(w,null,e),k(!1),Object(qi.h)(e)},[O,w,g]),T=Object(n.useCallback)(e=>{j(),k(!1),S(g),Object(qi.h)(e)},[j,g]),P=Object(n.useCallback)(e=>{T(e),r&&r(e)},[r,T]),_=Object(n.useCallback)(e=>{C(e),l&&l(e)},[l,C]),x=Object(n.useCallback)(e=>{k(!0),Object(qi.h)(e),o&&o(e)},[o]),D=Object(n.useCallback)(e=>{T(e),c&&c(e)},[c,T]),A=Object(n.useCallback)(e=>{C(e),u&&u(e)},[u,C]),M=Object(n.useCallback)(e=>{j();const t=""===e.target.value?null:Number(e.target.value);S(t)},[j,S]);return a.a.createElement(a.a.Fragment,null,h&&(()=>{if(!h)return null;const e=h.message===Sk.negativeNumbersNotAllowed.id?Sk.negativeNumbersNotAllowed:Sk.errorMessage;return(a.a.createElement(JO.a,{error:h,title:Sk.errorTitle,description:e}))})(),a.a.createElement(ZO.a,Ak({actionSubject:"numberInlineEdit",isEditable:I,isEditing:v,readView:(()=>void 0!==p?p:a.a.createElement(Dk,{isEditable:I,value:g,noValueText:b}))(),editView:I?(()=>void 0!==m?m:a.a.createElement(_k,{defaultValue:w,onChange:M,type:E,isInvalid:!!h}))():null,onCancel:P,onConfirm:_,onEdit:x,onEscape:D,onEnter:A},f)))});const Rk=Q.default.div(["margin-bottom:16px;& > div > div > div > div > div{width:100%;}& > div > div > div > div > div > div{min-height:32px !important;}& > div > div > div > div > div > div > div{padding:0 6px;}"]),Nk=Object(Q.default)(Ru.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),Uk=Object(Q.default)(Ru.d)(["& > div > div > div > div > div > div{width:100%;}"]),Fk=({issueKey:e,fieldId:t,showPinButton:s,issueId:n,label:i,noValueText:r,onUpdate:o})=>{const c=Object(Qe.isInlineEditEnterFixEnabled)()?Nk:Uk;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(c,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,i),!0===s&&a.a.createElement(Nu.a,{fieldId:t,label:i})),a.a.createElement(Ru.g,null,a.a.createElement(Lk,{label:i,issueKey:e,issueId:n,fieldKey:t,noValueText:r,isFitContainerWidthReadView:!0,onUpdate:o}))):a.a.createElement(Rk,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,i)),a.a.createElement(Lk,{label:i,issueKey:e,issueId:n,fieldKey:t,noValueText:r,isFitContainerWidthReadView:!0,onUpdate:o}))};Object(n.memo)(Fk);var Vk=Object(ld.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(P.B)(e),issueId:Object(P.A)(e),noValueText:s.formatMessage(mb.noValue),isEditable:Object(ea.A)(t.fieldId)(e)&&"PREVIEW"!==Object(_.w)(e)&&!!Object(QO.a)(),showPinButton:Object(Vu.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(_O.e)(t.fieldId,s))})}))(Fk),Kk=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),Bk=Object(j.defineMessages)({errorTitle:{id:"issue-field-team.error-title",defaultMessage:"We couldn't set the team value"},errorMessage:{id:"issue-field-team.error-message",defaultMessage:"Check your connection, then give it another try."}});const Wk=({issueKey:e,fieldKey:t,onSuccess:s})=>{const[n]=Object(Au.a)(e,t),a=wl()(n,"schema.type","array"),[{value:i,error:r},{saveValue:o,resetError:c}]=Object(Fm.a)({fieldKey:t,issueKey:e,fieldType:a,initialValue:null,onSuccess:s});return[{value:i,error:r,fieldConfig:n},{saveValue:o,resetError:c}]};var Hk=s("./node_modules/@atlaskit/user-picker--next/dist/esm/components/smart-user-picker/components/index.js");const Gk=e=>{const{fieldId:t,siteId:s,defaultValue:n,isMulti:i=!0,isClearable:r=!0,debounceTime:o=300,onChange:c,placeholder:l}=e;return(a.a.createElement(Hk.a,{width:"100%",autoFocus:!0,appearance:"compact",debounceTime:o,fieldId:t,includeGroups:!1,includeTeams:!0,includeUsers:!1,isClearable:r,isMulti:i,productKey:"jira",siteId:s,value:n,onChange:c,placeholder:l}))};Gk.displayName="TeamPickerEdit";var $k=Gk,qk=s("./node_modules/@atlaskit/theme/dist/esm/constants.js");const zk=Q.default.div(["display:flex;font-size:","px;height:","em;line-height:",";max-width:100%;padding:0px;"],Object(qk.h)(),2.5*Object(qk.j)()/Object(qk.h)(),2.5*Object(qk.j)()/Object(qk.h)()),Yk=Q.default.div(["padding:0px;"]);var Qk=e=>{const{defaultValue:t,placeholder:s}=e;return Up()(t)?a.a.createElement(zk,null,s):a.a.createElement(Yk,null,a.a.createElement(Zm.a,null,(e=>e.map(e=>a.a.createElement(Jm.a,{appearance:"rounded",text:e.name,key:e.id,elemBefore:a.a.createElement(xr.a,{appearance:"circle",size:"xsmall",src:e.avatarUrl})})))(t)))};function Jk(){return(Jk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Zk(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Xk=e=>{var t,s;const{fieldKey:i,issueKey:r,issueId:o,onCancel:c,onEdit:l,onEscape:u,onConfirm:d,onEnter:p,onUpdate:m,readView:b,editView:f,noValueText:g="DEFAULT PLACEHOLDER MESSAGE",useTeamField:h=Wk}=e,y=Zk(e,["fieldKey","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText","useTeamField"]),O=Object(Kk.l)().cloudId,[{value:j,error:E,fieldConfig:v},{saveValue:k,resetError:w}]=h({issueKey:Object(vr.l)(r),fieldKey:i,onSuccess:m}),[S,I]=Object(n.useState)(!1),[C,T]=Object(n.useState)(j),P=null!==(t=null==v?void 0:v.isEditable)&&void 0!==t&&t,_=(null!==(s=wl()(v,"schema.configuration"))&&void 0!==s?s:[]).reduce((e,t)=>(e[t.key]=t.value,e),{}),x="false"!==(null==_?void 0:_.isMulti);Object(n.useEffect)(()=>{E&&I(!0)},[E]);const D=Object(n.useCallback)(e=>{Di()(C,j)||k(C,null,e),I(!1),Object(qi.h)(e)},[k,C,j]),A=Object(n.useCallback)(e=>{w(),I(!1),T(j),Object(qi.h)(e)},[w,j]),M=Object(n.useCallback)(e=>{A(e),c&&c(e)},[A,c]),L=Object(n.useCallback)(e=>{D(e),d&&d(e)},[d,D]),R=Object(n.useCallback)(e=>{I(!0),Object(qi.h)(e),l&&l(e)},[l]),N=Object(n.useCallback)(e=>{A(e),u&&u(e)},[A,u]),U=Object(n.useCallback)(e=>{D(e),p&&p(e)},[p,D]),F=Object(n.useCallback)(e=>{w(),T(Array.isArray(e)?e:[e])},[w,T]);return a.a.createElement(a.a.Fragment,null,E&&(()=>E?a.a.createElement(JO.a,{error:E,title:Bk.errorTitle,description:Bk.errorMessage}):null)(),a.a.createElement(ZO.a,Jk({areActionButtonsHidden:!x,shouldConfirmOnEnter:!x,actionSubject:"teamInlineEdit",isEditable:P,isEditing:S,readView:(()=>void 0!==b?b:a.a.createElement(Qk,{defaultValue:C,placeholder:g}))(),editView:P?(()=>void 0!==f?f:a.a.createElement($k,{defaultValue:C,fieldId:i,siteId:O,onChange:F,placeholder:g,isMulti:x}))():null,onCancel:M,onConfirm:L,onEdit:R,onEscape:N,onEnter:U},y)))};const ew=Q.default.div(["margin-bottom:16px;& > div > div > div > div > div{width:100%;}& > div > div > div > div > div > div{min-height:32px !important;}& > div > div > div > div > div > div > div{padding:0 6px;}"]),tw=e=>{const{label:t,issueKey:s,fieldId:n,issueId:i,onUpdate:r,noValueText:o,showPinButton:c}=e;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,t),!0===c&&a.a.createElement(Nu.a,{fieldId:n,label:t})),a.a.createElement(Ru.g,null,a.a.createElement(Xk,{label:t,issueKey:s,issueId:i,fieldKey:n,onUpdate:r,noValueText:o,isFitContainerWidthReadView:!0}))):a.a.createElement(ew,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,t)),a.a.createElement(Xk,{label:t,issueKey:s,issueId:i,fieldKey:n,onUpdate:r,noValueText:o,isFitContainerWidthReadView:!0}))};Object(n.memo)(tw);var sw=Object(ld.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(P.B)(e),issueId:Object(P.A)(e),noValueText:s.formatMessage(mb.noValue),isEditable:Object(ea.A)(t.fieldId)(e)&&"PREVIEW"!==Object(_.w)(e)&&!!Object(QO.a)(),showPinButton:Object(Vu.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(_O.e)(t.fieldId,s))})}))(tw),nw=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js");var aw=Object(j.defineMessages)({menuHeader:{id:"issue.views.field.team.edit.menuHeader",defaultMessage:"Plan-specific teams can only be selected through a plan."},noMatches:{id:"issue.views.field.team.edit.noMatches",defaultMessage:"No Matches"},placeholder:{id:"issue.views.field.team.edit.placeholder",defaultMessage:"Choose a team to assign this issue to."},sharedTeam:{id:"issue.context-items.team.shared-team",defaultMessage:"Shared Team"},menuFooter:{id:"issue.context-items.team.edit.menuFooter",defaultMessage:"Showing 100 results. To display more results, please refine your search."}});const iw=Q.default.img(["width:","px;height:","px;margin-right:","px;"],2*J.e,2*J.e,J.e),rw=Q.default.div(["display:flex;flex-direction:row;overflow:hidden;align-items:center;justify-content:start;padding:0 ","px;"],J.e/2),ow=Q.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),cw=Q.default.div(["padding:","px ","px ","px;"],J.e,2*J.e,2*J.e),lw=Q.default.div(["padding:0 ","px ","px ","px;color:",";font-weight:bold;font-size:12px;"],2*J.e,J.e,2*J.e,Je.a.DN30),uw=Q.default.div(["color:",";font-size:12px;padding:","px ","px;"],Je.a.N90,J.e,2*J.e),dw=e=>{const{intl:{formatMessage:t},options:s}=e,n=s.length>0&&s[0].moreResultsAvailable?a.a.createElement(uw,null,t(aw.menuFooter)):null;return a.a.createElement(Eo.z.MenuList,e,a.a.createElement(cw,null,t(aw.menuHeader)),e.children,n)};dw.displayName="MenuListComponent";var pw=Object(j.injectIntl)(dw);var mw=e=>{const t=e.data;if(t){const{avatarUrl:s}=t;return(a.a.createElement(Eo.z.Option,e,a.a.createElement(rw,null,a.a.createElement(iw,{src:s||Dl.a})," ",a.a.createElement(ow,null,e.children))))}return null};const bw=e=>{const{data:t,intl:{formatMessage:s}}=e,n=t?t.label:a.a.createElement(pr.b,null,s(aw.placeholder));return a.a.createElement(Eo.z.SingleValue,e,n)};bw.displayName="SingleValueComponent";var fw=Object(j.injectIntl)(bw);const gw=e=>a.a.createElement(pw,e);gw.displayName="MenuList";const hw=e=>a.a.createElement(fw,e);hw.displayName="SingleValue";const yw=e=>a.a.createElement(mw,e);yw.displayName="Option";const Ow=Object(j.injectIntl)(e=>a.a.createElement(lw,null,e.intl.formatMessage(aw.sharedTeam)));class jw extends n.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e),this.props.onConfirm(e)},this.debouncedLoadOptions=Oj()((e,t)=>{this.props.loadOptions(e).then(t,()=>{t([])})},300)}render(){const{value:e,portalElement:t,menuPlacement:s,intl:{formatMessage:n}}=this.props;return(a.a.createElement(jj.a,{value:e,autoFocus:!0,defaultOptions:!0,menuPortalTarget:t,menuPlacement:s,components:{MenuList:gw,Option:yw,SingleValue:hw,GroupHeading:Ow},onChange:this.onChange,loadOptions:this.debouncedLoadOptions,defaultMenuIsOpen:!0,isClearable:null!==e,noOptionsMessage:()=>n(aw.noMatches),placeholder:n(aw.placeholder),cacheOptions:!0}))}}jw.displayName="EditableTeamField";var Ew=Object(j.injectIntl)(jw),vw=Object(j.defineMessages)({label:{id:"issue.views.field.team.label",defaultMessage:"Team"}}),kw=s("./node_modules/@atlaskit/icon/glyph/share.js"),ww=s.n(kw);const Sw=Q.default.div(["display:flex;flex-direction:row;overflow:hidden;white-space:nowrap;align-items:center;justify-content:start;"]),Iw=Q.default.div(["overflow:hidden;text-overflow:ellipsis;margin-right:","px;display:inline-block;"],J.e),Cw=Q.default.img(["vertical-align:middle;width:","px;height:","px;margin-right:","px;display:inline-block;"],3*J.e,3*J.e,J.e),Tw=Q.default.span(["width:","px;height:","px;color:",";"],2*J.e,2*J.e,Je.a.R500),Pw=e=>{const{value:t,noValueText:s}=e;if(t){const{label:e,isShared:s,avatarUrl:n}=t,i=s?a.a.createElement(Tw,null,a.a.createElement(ww.a,{label:"",size:"small"})):null;return a.a.createElement(Sw,null,a.a.createElement(Cw,{src:n||Dl.a}),a.a.createElement(Iw,null,e),i)}return(a.a.createElement(pr.b,null,s))};Pw.displayName="TeamViewField";var _w=Pw;class xw extends n.Component{renderEditableField(){const{isEditable:e,isSubTask:t,fetchSuggestions:s,onChange:n,onConfirm:i,value:r,portalElement:o,menuPlacement:c}=this.props;return e&&!t?a.a.createElement("span",null,a.a.createElement(Ew,{value:r,loadOptions:s,portalElement:o,menuPlacement:c,onChange:n,onConfirm:i})):null}render(){const{intl:{formatMessage:e},value:t,noValueText:s,isEditing:n,onConfirm:i,onCancel:r,onEditRequest:o,isMobile:c,fieldId:l,showPinButton:u}=this.props,d=e(vw.label);return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,d),!0===u&&a.a.createElement(Nu.a,{fieldId:l,label:d})),a.a.createElement(Ru.g,{isEditing:n},a.a.createElement(G.a,{onEscape:r},a.a.createElement(dd.a,{isLabelHidden:!0,label:d,readView:a.a.createElement(_w,{noValueText:s,value:t}),editView:this.renderEditableField(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:n,onConfirm:i,onCancel:r,onEditRequested:o,isFitContainerWidthReadView:!c})))):a.a.createElement(a.a.Fragment,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,d)),a.a.createElement(G.a,{onEscape:r},a.a.createElement(bd,{isLabelHidden:!0,label:d,readView:a.a.createElement(_w,{noValueText:s,value:t}),editView:this.renderEditableField(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:n,onConfirm:i,onCancel:r,onEditRequested:o,isFitContainerWidthReadView:!c})))}}xw.displayName="TeamField";var Dw=Object(j.injectIntl)(xw);const Aw=(e,t)=>e?((e,t)=>({value:e.id,label:e.title,isShared:e.isShared,avatarUrl:e.avatarUrl?`${t}${e.avatarUrl}`:""}))(e,t.baseUrl):null,Mw=e=>e?(e=>({id:e.value,title:e.label,isShared:e.isShared,avatarUrl:e.avatarUrl?e.avatarUrl:""}))(e):null,Lw=Object(Mu.a)(e=>t=>Object(Bu.d)(`${e}/rest/teams/1.0/teams/find`,{body:JSON.stringify({query:t,excludedIds:[],maxResults:100})}).then(t=>((e,t)=>[{options:e.teams.map(e=>({value:e.id,label:e.title,isShared:e.shareable,avatarUrl:e.avatarUrl?`${t}${e.avatarUrl}`:""})),moreResultsAvailable:e.moreResultsAvailable}])(t,e))),Rw=({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>{const a=n&&n.id?n.id.toString():null;return Object(Bu.e)(Object(gy.f)(e,t),{body:JSON.stringify({fields:{[s]:a}})})};var Nw=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Aw,transformToStateValue:Mw,additionalProps:(e,s)=>({fetchSuggestions:Lw(Object(P.g)(e)),noValueText:s.formatMessage(mb.noValue),portalElement:id(t.fieldId)(e)?Gu()||document.body:void 0,isSubTask:Object(nw.c)(e),showPinButton:Object(Vu.a)(t.area)}),saveField:Rw}))(Dw),Uw=s("./node_modules/lodash/isNumber.js"),Fw=s.n(Uw);const Vw=(e="m")=>({m:()=>"minute",h:()=>"hour",d:()=>"day",w:()=>"week"}[e]());var Kw=e=>"0m"===e||""===e||null===e?"":e.split(" ").map(e=>(e=>{const t=e.slice(0,-1),s=e.slice(-1),n="m"===s||"h"===s||"d"===s||"w"===s,a=Number(n?t:e),i=Vw(n?s:"m");return Fw()(a)&&a>0&&n?((e,t,s="s")=>`${e} ${t}${e>1?s:""}`)(a,i):""})(e)).join(" ").trim();class Bw extends n.Component{constructor(...e){super(...e),this.state={isInputInvalid:!1,value:this.props.value},this.onChange=e=>{const{value:t}=e.target;this.setState({value:t,isInputInvalid:!1})},this.getDefaultTimeFormatValue=e=>{let t=e.trim();if(H(t)){const{defaultUnit:e}=this.props.config;t=`${t}${jt(e)}`}return t},this.onConfirm=()=>{const e=this.getDefaultTimeFormatValue(this.state.value);""===e||K(e)?(this.setState({isInputInvalid:!1}),this.props.onChange(e),this.props.onConfirm()):(this.setState({isInputInvalid:!0}),this.editFieldRef.current&&this.editFieldRef.current.focus())},this.onCancel=()=>{this.props.onCancel()},this.onEditRequested=()=>{this.setState({isInputInvalid:!1,value:this.props.value}),this.props.onEditRequest()},this.editFieldRef=Object(n.createRef)()}UNSAFE_componentWillReceiveProps(e){e.value!==this.props.value&&this.setState({value:e.value})}renderReadView(){const{noValueText:e,value:t}=this.props;return t?a.a.createElement($e.a,null,t):a.a.createElement(pr.b,null,e)}renderEditView(){const{placeholder:e,invalidMessage:t,invalidTimeFormatMessage:s}=this.props,{value:n,isInputInvalid:i}=this.state;return a.a.createElement(vh,{ref:this.editFieldRef,type:"text",value:n,placeholder:e,onChange:this.onChange,invalidMessage:i?s:t})}render(){const{intl:e,isEditable:t,label:s,isEditing:n,isMobile:i,value:r,fieldId:o,showPinButton:c}=this.props,l=Kw(r),u=`${s}, ${l?`${l} estimated`:"no estimate given"}`;return Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,s),!0===c&&a.a.createElement(Nu.a,{fieldId:o,label:s})),a.a.createElement(Ru.g,{isEditing:n},a.a.createElement(G.a,{onEnter:this.onConfirm,onEscape:this.onCancel},a.a.createElement(dd.a,{isLabelHidden:!0,label:s,readView:this.renderReadView(),editView:t?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:n,onConfirm:this.onConfirm,onCancel:this.onCancel,onEditRequested:this.onEditRequested,isFitContainerWidthReadView:!i,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:u}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:s}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:s})})))):a.a.createElement("div",null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,this.props.label)),a.a.createElement(G.a,{onEnter:this.onConfirm,onEscape:this.onCancel},a.a.createElement(bd,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.onCancel,onEditRequested:this.onEditRequested,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:u}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:this.props.label})})))}}Bw.displayName="TimeStringInlineEditView",Bw.displayName="TimeStringInlineEditView",Bw.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,value:"",label:"",noValueText:null,invalidMessage:null,invalidTimeFormatMessage:null};var Ww=Object(j.injectIntl)(Bw);function Hw(){return(Hw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Gw(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const $w=Object(j.defineMessages)({placeholder:{id:"issue.time-estimate.placeholder-for-the-field",defaultMessage:"2w 4d 6h 45m"}}),qw=(e,t)=>{const s=Object(_.k)(t),{baseUrl:n,value:a}=e,i=Object(ea.h)("timetracking")(t),r=i&&null!=i.remainingEstimateSeconds;return Object(Bu.d)(`${n}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(c.stringify)({issueId:s,timetracking_originalestimate:null!==a?`${a/60}m`:null,timetracking_targetsubfield:r?"timetracking_originalestimate":void 0,fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(QO.a)()})})};class zw extends n.Component{constructor(...e){super(...e),this.onChangeTransform=e=>{const{config:t,onChange:s}=this.props;s((e=>t=>""===t?null:Object(V.a)(e.daysPerWeek,e.hoursPerDay)(t))(t)(e))},this.transformFromValue=e=>{const{config:t}=this.props;return(e=>t=>null==t?"":Object(W.a)(e.daysPerWeek,e.hoursPerDay)(t))(t)(e)}}render(){const e=this.props,{value:t,onChange:s}=e,n=Gw(e,["value","onChange"]),i=this.transformFromValue(Number(t));return a.a.createElement(Ww,Hw({},n,{onChange:this.onChangeTransform,value:i}))}}zw.displayName="TransformerWrapper";var Yw=Object(ld.a)((e,t)=>({fieldId:t.fieldId,saveField:qw,isOptimistic:!1,additionalProps:(e,s)=>({config:Object(D.h)(e),noValueText:s.formatMessage(mb.noValue),placeholder:s.formatMessage($w.placeholder),invalidTimeFormatMessage:a.a.createElement(j.FormattedMessage,{id:"issue.time-estimate.input-time-string-is-invalid",defaultMessage:"Your estimate must be in the format {format}.",values:{format:a.a.createElement("b",null,"2w 4d 6h 45m")}}),isEditable:Object(ea.A)(t.fieldId)(e)&&!!Object(QO.a)(),showPinButton:Object(Vu.a)(t.area)})}))(zw),Qw=Object(j.defineMessages)({timeRemainingFieldLabel:{id:"issue.context.time-remaining-field.label",defaultMessage:"Time remaining"},includeSubtasksLabel:{id:"issue.time-tracking.include-subtasks",defaultMessage:"Include subtasks"},includeChildrenLabel:{id:"issue.time-tracking.include-children",defaultMessage:"Include child issues"}}),Jw=Object(j.defineMessages)({errorTitle:{id:"issue-field-remaining-estimate.error-title",defaultMessage:"We couldn't set the remaining estimate value"},errorMessage:{id:"issue-field-remaining-estimate.error-message",defaultMessage:"Check your connection, then give it another try."}});const Zw=({issueId:e,issueKey:t,onSuccess:s})=>{const[n]=Object(Au.a)(t,"timetracking"),a=(null==n?void 0:n.schema.type)||"timetracking",[{value:i,error:r},{saveValue:o,resetError:l}]=Object(Fm.a)({fieldKey:"timetracking",issueKey:t,fieldType:a,initialValue:{originalEstimateSeconds:0,timeSpentSeconds:0,remainingEstimateSeconds:0},saveField:(t,s,n,a)=>(async({issueId:e,newValue:t,baseUrl:s})=>{const n=t.remainingEstimateSeconds;return Object(Bu.d)(`${s}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(c.stringify)({issueId:e,timetracking_remainingestimate:void 0!==n?`${n/60}m`:null,timetracking_targetsubfield:"timetracking_remainingestimate",fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(QO.a)()})})})({issueId:e,newValue:n,baseUrl:a}),onSuccess:s});return[{value:i,error:r,fieldConfig:n},{saveValue:o,resetError:l}]},Xw=Q.default.div(["width:","px;cursor:auto;"],8.5*qk.j),eS=e=>{const{defaultValue:t,placeholderMessage:s,onChange:n,isInvalidInput:i,invalidTimeFormatMessage:r}=e;return(a.a.createElement(Xw,null,a.a.createElement(vh,{compact:!0,type:"text",value:t,placeholder:s,onChange:n,invalidMessage:i?r:void 0})))};eS.displayName="RemainingEstimateEdit";var tS=eS;const sS=Q.default.div(["padding:0px;"]),nS=e=>{const{defaultValue:t}=e;return(a.a.createElement(sS,null,a.a.createElement($e.a,null,t)))};nS.displayName="RemainingEstimateView";var aS=nS;function iS(){return(iS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function rS(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function oS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?rS(Object(s),!0).forEach((function(t){cS(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rS(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function cS(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function lS(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var uS=e=>{const{config:t,issueKey:s,issueId:i,onCancel:r,onEdit:o,onEscape:c,onConfirm:l,onEnter:u,onUpdate:d,readView:p,editView:m,placeholderMessage:b,invalidTimeFormatMessage:f,useRemainingEstimateField:g=Zw}=e,h=lS(e,["config","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","placeholderMessage","invalidTimeFormatMessage","useRemainingEstimateField"]),[y]=Object(cp.a)(),O=y.canLogWork,[{value:j,error:E},{saveValue:v,resetError:k}]=g({issueId:i,issueKey:Object(vr.l)(s),onSuccess:d}),w=j.remainingEstimateSeconds||0,[S,I]=Object(n.useState)(!1),[C,T]=Object(n.useState)(!1),P=Object(n.useMemo)(()=>XO(t)(w),[t,w]),[_,x]=Object(n.useState)(P);Object(n.useEffect)(()=>{x(P)},[P]),Object(n.useEffect)(()=>{E&&T(!0)},[E]);const D=Object(n.useCallback)(e=>{if(Di()(_,P))T(!1);else if(tj(t)(_)){const s=oS(oS({},j),{},{remainingEstimateSeconds:sj(t)(_)||0});v(s,null,e),Object(qi.h)(e),I(!1),T(!1)}else I(!0),T(!0)},[t,P,v,j,_]),A=Object(n.useCallback)(e=>{k(),I(!1),T(!1),x(P),Object(qi.h)(e)},[P,k]),M=Object(n.useCallback)(e=>{A(e),r&&r(e)},[A,r]),L=Object(n.useCallback)(e=>{D(e),l&&l(e)},[l,D]),R=Object(n.useCallback)(e=>{T(!0),Object(qi.h)(e),o&&o(e)},[o]),N=Object(n.useCallback)(e=>{A(e),c&&c(e)},[A,c]),U=Object(n.useCallback)(e=>{D(e),u&&u(e)},[u,D]),F=Object(n.useCallback)(e=>{I(!1),k(),x(e.target.value)},[k,x]);return a.a.createElement(a.a.Fragment,null,E&&(()=>E?a.a.createElement(JO.a,{error:E,title:Jw.errorTitle,description:Jw.errorMessage}):null)(),a.a.createElement(ZO.a,iS({actionSubject:"remainingEstimateInlineEdit",isEditable:O,isEditing:C,readView:(()=>void 0!==p?p:a.a.createElement(aS,{defaultValue:P}))(),editView:O?(()=>void 0!==m?m:a.a.createElement(tS,{defaultValue:_,placeholderMessage:b,onChange:F,invalidTimeFormatMessage:f,isInvalidInput:S}))():null,onCancel:M,onConfirm:L,onEdit:R,onEscape:N,onEnter:U},h)))};const dS=e=>void 0===e,pS=e=>{if(!e)return Object.seal({});const{remainingEstimateSeconds:t,timeSpentSeconds:s}=e;return ug()({loggedTime:s,remainingTime:t},dS)},mS=Q.default.div(["margin-bottom:","px;margin-left:-","px;padding-top:","px;& > label > span{color:",";}"],e=>e.sideBySideMode?0:3*J.e,J.e/2,J.e/2,Je.a.N500),bS=Q.default.div(["margin-bottom:16px;& > div > div > div > div > div{width:100%;}& > div > div > div > div > div > div{min-height:32px !important;}& > div > div > div > div > div > div > div{padding:0 6px;}"]);class fS extends n.Component{renderReadView(){const{value:e,isDone:t,config:s}=this.props;return(a.a.createElement(mt,{value:pS(e),estimatedTime:e.originalEstimateSeconds,isDone:t,config:s}))}renderRemainingEstimateView(){const{config:e,fieldId:t,issueKey:s,issueId:n,showPinButton:i,invalidTimeFormatMessage:r,placeholderMessage:o,timeRemainingFieldLabel:c}=this.props;return n?Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,c),!0===i&&a.a.createElement(Nu.a,{fieldId:t,label:c})),a.a.createElement(Ru.g,null,a.a.createElement(uS,{config:e,issueKey:s,issueId:n,value:"",placeholderMessage:o,invalidTimeFormatMessage:r,isFitContainerWidthReadView:!0}))):a.a.createElement(bS,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,c)),a.a.createElement(uS,{config:e,issueKey:s,issueId:n,value:"",placeholderMessage:o,invalidTimeFormatMessage:r,isFitContainerWidthReadView:!0})):null}renderRollUpToggle(){const{rollupLabel:e,isRollingUpData:t,onToggleRollingUpData:s}=this.props;return(a.a.createElement(mS,{sideBySideMode:Object(Qe.isSideBySideLabelsAndFieldsEnabled)()},a.a.createElement(We.a,{isChecked:t,onChange:({target:{checked:e}},t)=>{s(e,t)},label:e,name:"include-subtasks-children-in-time-tracking-toggle-from-context"}),Qe.isOperationalEventEnabled?a.a.createElement(Ye.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"toggleRollUpDataControlFromContext"}):a.a.createElement(Ye.c,{action:"exposed",actionSubject:"feature",actionSubjectId:"toggleRollUpDataControlFromContext"})))}render(){const{isVisible:e,label:t,isEditable:s,isMobile:n,onEditRequest:i,editButtonLabel:r,confirmButtonLabel:o,cancelButtonLabel:c,fieldId:l,showPinButton:u,shouldDisplayRollUpDataControl:d}=this.props;return e?Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?a.a.createElement(Ru.d,null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,t),!0===u&&a.a.createElement(Nu.a,{fieldId:l,label:t})),a.a.createElement(Ru.g,{"data-testid":"issue.views.issue-base.context.time-tracking.value"},a.a.createElement(G.a,null,a.a.createElement(dd.a,{label:t,readView:this.renderReadView(),editView:s?a.a.createElement("div",null):null,isEditing:!1,areActionButtonsHidden:!0,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!n,isLabelHidden:!0,onEditRequested:i,editButtonLabel:r,confirmButtonLabel:o,cancelButtonLabel:c}),d&&this.renderRollUpToggle()))):a.a.createElement("div",null,a.a.createElement(Ru.b,null,a.a.createElement(Ru.c,null,t)),a.a.createElement(bd,{label:t,readView:this.renderReadView(),editView:this.props.isEditable?a.a.createElement("div",null):null,isEditing:!1,areActionButtonsHidden:!0,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!this.props.isMobile,isLabelHidden:!0,onEditRequested:this.props.onEditRequest,editButtonLabel:this.props.editButtonLabel,confirmButtonLabel:this.props.confirmButtonLabel,cancelButtonLabel:this.props.cancelButtonLabel,isGrouped:d,"data-testid":"issue.views.issue-base.context.time-tracking.value"}),d&&this.renderRollUpToggle()):Object(Qe.isTimeRemainingFieldEnabled)()?this.renderRemainingEstimateView():null}}fS.displayName="TimeTrackingView",fS.displayName="TimeTrackingView";var gS=fS;function hS(){return(hS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function yS(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const OS=Object(E.a)({onToggleRollingUpData:"toggleRollingUpData"})(Object(v.b)("worklog")(gS)),jS=e=>{const{timeTrackingCalculationSelector:t,area:s,intl:i}=e,r=yS(e,["timeTrackingCalculationSelector","area","intl"]),[o,{markRollingUpData:c,unmarkRollingUpData:l}]=S(),u=Object(n.useCallback)(e=>{e?c():l()},[c,l]);return a.a.createElement(OS,hS({},r,{value:t(o),isRollingUpData:o,onToggleRollingUpData:u}))};jS.displayName="WrappedTimeTrackingView";const ES=Object(i.b)((e,t)=>{const{intl:{formatMessage:s},area:n,fieldId:i}=t,r=Object(ea.m)(t.fieldId)(e);return{fieldId:i,timeTrackingCalculationSelector:Object(D.j)(e),config:Object(D.h)(e),issueKey:Object(P.B)(e),issueId:Object(P.A)(e),isDone:"DONE"===Object(A.b)(e),isEditable:Object(D.b)(e),isMobile:Object(P.u)(e),isVisible:Object(D.d)(e),label:r,editButtonLabel:s(ud.a.editButtonLabel,{fieldName:r}),confirmButtonLabel:s(ud.a.confirmButtonLabel,{fieldName:r}),cancelButtonLabel:s(ud.a.cancelButtonLabel,{fieldName:r}),timeRemainingFieldLabel:s(Qw.timeRemainingFieldLabel),rollupLabel:Object(_.l)(e)?s(Qw.includeSubtasksLabel):s(Qw.includeChildrenLabel),showPinButton:Object(Vu.a)(n),shouldDisplayRollUpDataControl:Object(D.c)(e),placeholderMessage:"2w 4d 6h 45m",invalidTimeFormatMessage:a.a.createElement(j.FormattedMessage,{id:"issue.time-estimate.input-time-string-is-invalid",defaultMessage:"Your estimate must be in the format {format}.",values:{format:a.a.createElement("b",null,"2w 4d 6h 45m")}})}},e=>({onEditRequest:()=>{e(Object(I.H)("ADD_MODAL",null))}}))(jS);var vS=e=>{const t=Object(Ge.c)();return(a.a.createElement(R.a,{id:"issue.issue-view.context.time-tracking-field"},a.a.createElement(N.a,{id:"context.time-tracking-field",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},a.a.createElement(ES,hS({},e,{intl:t})))))},kS=Object(ld.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(mb.noValue),type:"url",showPinButton:Object(Vu.a)(t.area)})}))(wh);const wS=e=>e.users?e.users.map(nm):[],SS=Object(Mu.a)(e=>t=>e?Object(rp.a)(`${e}${t}`).then(wS):Promise.resolve([])),IS=Object(Mu.a)(e=>({avatarUrl:"",name:e.formatMessage(mb.noValue)}));var CS=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:nm,transformToStateValue:am,additionalProps:(e,s)=>({portalElement:id(t.fieldId)(e)?Gu()||document.body:void 0,fetchSuggestions:SS(Object(ea.d)(t.fieldId)(e)),emptyOption:Object(ea.C)(t.fieldId)(e)?void 0:IS(s),showPinButton:Object(Vu.a)(t.area)})}))(Qp);const TS=Object(j.defineMessages)({releasedHeading:{id:"issue.fix-versions.released-message",defaultMessage:"Released"},unreleasedHeading:{id:"issue.fix-versions.unreleased-message",defaultMessage:"Unreleased"}}),PS=e=>({content:e.name,value:e.id}),_S={versions:"affectedVersion",fixVersions:"fixVersion"},xS=(e,{baseUrl:t,projectKey:s,fieldId:n})=>e.map(e=>{const a=`project = ${Object(_b.b)(s)} AND ${(e=>_S[e]||"fixVersion")(n)} = ${Object(_b.b)(e.name)}`;return{href:Object(_b.a)(t,a),content:e.name,value:e.id}}),DS=e=>e?e.map(PS):[],AS=e=>e.map(e=>({name:e.content,id:e.value})),MS=(e,t)=>{const s=e.filter(e=>!e.archived),n=s.filter(e=>!e.released).map(PS),a=s.filter(e=>e.released).map(PS);return[{heading:t.formatMessage(TS.unreleasedHeading),items:n},{heading:t.formatMessage(TS.releasedHeading),items:a}]};var LS=Object(j.defineMessages)({placeholder:{id:"issue.single-version-picker.text-for-dropdown-when-nothing-selected",defaultMessage:"Select version"}});const RS=e=>e&&{name:e.content,id:e.value},NS=e=>e&&{content:e.name,value:e.id},US=Object(Mu.a)((e,t)=>()=>Promise.resolve(e).then(e=>MS(e,t)));var FS=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:NS,transformToStateValue:RS,additionalProps:(e,s)=>({fetchSuggestions:US(Object(ea.c)(t.fieldId)(e),s),placeholder:s.formatMessage(LS.placeholder),noValueText:s.formatMessage(mb.noValue),allowEmptyValue:!Object(ea.C)(t.fieldId)(e),hasAutocomplete:!0,showPinButton:Object(Vu.a)(t.area)})}))(ff);const VS=Object(Mu.a)((e,t)=>()=>Promise.resolve(e).then(e=>MS(e,t)));var KS=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:DS,transformToStateValue:AS,additionalProps:(e,s)=>({fetchSuggestions:VS(Object(ea.c)(t.fieldId)(e),s),placeholder:s.formatMessage(mb.version_no_value_placeholder),noValueText:s.formatMessage(mb.noValue),showPinButton:Object(Vu.a)(t.area)})}))(Qb),BS=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),WS=s("./src/packages/releases/versions/src/create-version-modal/index.js");function HS(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function GS(){return(GS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class $S extends n.Component{constructor(...e){super(...e),this.state={isDialogOpen:!1},this.openDialog=()=>{this.setState({isDialogOpen:!0})},this.closeDialog=()=>{this.setState({isDialogOpen:!1})},this.onSuccess=e=>{const{onChange:t,value:s,onVersionCreated:n,versionFieldIds:a}=this.props;t([...s,{content:e.name,value:e.id}]),this.closeDialog(),n(e,a)}}renderSelect(e){const{canAdministerProject:t,canAdministerJira:s,createNewItemMessage:n}=this.props,i=t||s;return a.a.createElement(Qb,GS({},e,{styles:Wb,shouldShowFooter:i,footer:a.a.createElement(Bb,{className:"issue-view__select-footer"},a.a.createElement(Lb.a,{label:"",size:"small"}),a.a.createElement(Kb,null,n)),onFooterSelect:this.openDialog,allowEmptyValue:!0,optionValuesSafeForAnalytics:!0}))}render(){const e=this.props,{baseUrl:t,projectId:s,createNewItemMessage:n,canAdministerProject:i,canAdministerJira:r,locale:o,onVersionCreated:c,versionFieldIds:l}=e,u=HS(e,["baseUrl","projectId","createNewItemMessage","canAdministerProject","canAdministerJira","locale","onVersionCreated","versionFieldIds"]),{isDialogOpen:d}=this.state;return a.a.createElement(a.a.Fragment,null,d&&a.a.createElement(WS.a,{locale:o,baseUrl:t,projectId:s,onCancel:this.closeDialog,onError:this.closeDialog,onSuccess:this.onSuccess}),this.renderSelect(u))}}$S.displayName="FixVersionsView";const qS=Object(j.defineMessages)({createNewItem:{id:"issue.fix-versions.create-new-component-message",defaultMessage:"Create new version"}}),zS=Object(Mu.a)((e,t,s,n,a)=>((e,t,s,n,a)=>Tb(e,t,s,n,a))(e,t,s,n,a)),YS=Object(Mu.a)((e,t,s,n,a)=>(i,r)=>zS(s,e,n,a,r).then(e=>MS(e,t)));var QS=Object(ld.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:xS,transformToStateValue:AS,additionalProps:(e,s)=>({fetchSuggestions:YS(Object(ea.c)(t.fieldId)(e),s,t.fieldId,Object(P.A)(e),Object(_.C)(e)),canAdministerProject:Object(Yu.c)(e),canAdministerJira:Object(Yu.b)(e),createNewItemMessage:s.formatMessage(qS.createNewItem),baseUrl:Object(P.g)(e),projectId:Object(_.C)(e),isMobile:Object(P.u)(e),placeholder:s.formatMessage(mb.version_no_value_placeholder),noValueText:s.formatMessage(mb.noValue),versionFieldIds:Object(ea.x)(e),onTagClick:e=>Object(qi.h)(e,{name:t.fieldId}),showPinButton:Object(Vu.a)(t.area)}),additionalCallbacks:e=>({onVersionCreated:(t,s)=>{s.forEach(s=>{e(Object(BS.a)(s,[t]))})}})}))($S);const JS=({children:e,id:t,fallback:s=a.a.createElement(a.a.Fragment,null)})=>a.a.createElement(R.a,{id:t,packageName:"issue",render:()=>s},a.a.createElement(Oe.a,{fallback:s},e));JS.displayName="Boundary";const ZS=Object(Oe.f)(()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("async-all-dev-panel")]).then(s.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/all-dev-info-panel/all-dev-panel-view.js")),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/all-dev-info-panel/all-dev-panel-view.js"}),XS=Object(Oe.f)(()=>s.e("async-releases-context-panel").then(s.bind(null,"./src/packages/development/releases-glance/src/view/deployment-release-panel/index.js")),{moduleId:"./src/packages/development/releases-glance/src/view/deployment-release-panel/index.js"}),eI=Object(Oe.f)(()=>s.e("async-assets-glance").then(s.bind(null,"./src/packages/platform/ui/asset-tracking/assets-glance/src/index.js")),{moduleId:"./src/packages/platform/ui/asset-tracking/assets-glance/src/index.js"}),tI=Object(Oe.f)(()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("async-assets-panel")]).then(s.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/assets-panel/assets-panel-view.js")),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/assets-panel/assets-panel-view.js"}),sI=Object(Oe.f)(()=>s.e("async-assets-onboarding").then(s.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/assets-onboarding/assets-onboarding-view.js")),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/assets-onboarding/assets-onboarding-view.js"}),nI=e=>a.a.createElement(JS,{id:"all-dev-panel"},a.a.createElement(ZS,e));nI.displayName="AllDevPanel";const aI=e=>a.a.createElement(JS,{id:"releases-context-panel"},a.a.createElement(XS,e));aI.displayName="ReleasesContextPanel";const iI=e=>a.a.createElement(JS,{id:"assets-glance"},a.a.createElement(eI,e));iI.displayName="AssetsGlance";const rI=e=>a.a.createElement(JS,{id:"assets-panel"},a.a.createElement(tI,e));rI.displayName="AssetsPanel";const oI=e=>a.a.createElement(JS,{id:"assets-onboarding"},a.a.createElement(sI,e));function cI(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function lI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}oI.displayName="AssetsOnboarding";var uI=Object(Mu.a)(()=>{const e=Object(Lu.T)();return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?cI(Object(s),!0).forEach((function(t){lI(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cI(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({[e.ASSIGNEE_TYPE]:{item:Object(Qe.isUseUseAssigneeFieldServiceEnabled)()?jm:Nm},[e.DUE_DATE_TYPE]:{item:Hf},[e.PRIORITY_TYPE]:{item:yE},[e.REPORTER_TYPE]:{item:VE},[e.DESCRIPTION_TYPE]:{item:Pd},[e.LABELS_TYPE]:{item:dh},[e.COMPONENTS_TYPE]:{item:sf},[e.SPRINT_TYPE]:{item:wk},[e.STORY_POINTS_TYPE]:{item:Vk},[e.TEAMS_PLATFORM_CF_TYPE]:{item:Object(Qe.isTeamsCustomFieldTypeEnabled)()?sw:()=>null},[e.EPIC_TYPE]:{item:eO},[e.FIX_VERSIONS_TYPE]:{item:QS},[e.AFFECTS_VERSIONS_TYPE]:{item:QS},[e.TIME_ESTIMATE_TYPE]:{item:Object(Qe.isTimeRemainingFieldEnabled)()?gj:Yw},[e.TIME_TRACKING_TYPE]:{item:vS},[e.ENVIRONMENT_TYPE]:{item:$d},[e.DEV_SUMMARY_TYPE]:{item:nI,panel:aI},[e.APPROVALS_PANEL_TYPE]:{item:Jd,panel:sp},[e.KNOWLEDGE_BASE_TYPE]:{item:uO,panel:gO},[e.SLA_PANEL_TYPE]:{item:zv},[e.ASSETS_CF_TYPE]:{item:rI,panel:iI},[e.COLOR_CF_TYPE]:{item:()=>null},[e.EPIC_COLOR_TYPE]:{item:()=>null},[e.RELEASES_TYPE]:{item:()=>null},[e.PARENT_CF_TYPE]:{item:Xj},[e.BASELINE_START_CF_TYPE]:{item:Wf},[e.BASELINE_END_CF_TYPE]:{item:Wf},[e.LABELS_CF_TYPE]:{item:dh},[e.TEXT_CF_TYPE]:{item:Rv},[e.MULTI_USER_CF_TYPE]:{item:zh},[e.URL_CF_TYPE]:{item:kS},[e.NUMBER_CF_TYPE]:{item:Object(Qe.isUseExtractedNumberFieldEnabled)()?PO:UO},[e.STORY_POINT_ESTIMATE_CF_TYPE]:{item:NO},[e.SELECT_CF_TYPE]:{item:Wv},[e.MULTI_SELECT_CF_TYPE]:{item:kO},[e.ECOSYSTEM_GLANCE_TYPE]:{item:Eg},[e.FORGE_CUSTOM_FIELD_TYPE]:{item:ly},[e.ISSUE_FIELD_USER_CF_TYPE]:{item:CS},[e.ISSUE_FIELD_GROUPS_CF_TYPE]:{item:rO},[e.ISSUE_FIELD_STRINGS_CF_TYPE]:{item:dh},[e.FORGE_GLANCE_TYPE]:{item:by},[e.TEXT_AREA_CF_TYPE]:{item:$d},[e.MULTI_VERSION_CF_TYPE]:{item:KS},[e.VERSION_CF_TYPE]:{item:FS},[e.DATE_CF_TYPE]:{item:Wf},[e.GROUP_CF_TYPE]:{item:cO},[e.MULTI_GROUP_CF_TYPE]:{item:rO},[e.USER_CF_TYPE]:{item:CS},[e.DATETIME_CF_TYPE]:{item:Mf},[e.MULTI_CHECKBOXES_CF_TYPE]:{item:Ob},[e.RADIO_BUTTONS_CF_TYPE]:{item:TE},[e.TEAM_CF_TYPE]:{item:Nw},[e.ISSUE_FIELD_NUMBER_CF_TYPE]:{item:Object(Qe.isUseExtractedNumberFieldEnabled)()?PO:UO},[e.ISSUE_FIELD_DATETIME_CF_TYPE]:{item:Mf},[e.ISSUE_FIELD_STRING_CF_TYPE]:{item:Rv},[e.ISSUE_FIELD_SINGLE_SELECT_CF_TYPE]:{item:Wv},[e.ISSUE_FIELD_MULTI_SELECT_CF_TYPE]:{item:kO},[e.REQUEST_TYPE_CF_TYPE]:{item:_f},[e.SERVICE_ENTITY_CF_TYPE]:{item:Lv},[e.REQUEST_PARTICIPANTS_CF_TYPE]:{item:vv},[e.ORGANIZATIONS_CF_TYPE]:{item:YO},[e.REQUEST_FEEDBACK_CF_TYPE]:{item:iv},[e.PEOPLE_CF_TYPE]:{item:oE},[e.REQUEST_LANGUAGE_CF_TYPE]:{item:fv},[e.ASSET_ONBOARDING_TYPE]:{item:oI},[e.APPROVERS_LIST_CF_TYPE]:{item:oE},[e.CASCADING_SELECT_CF_TYPE]:{item:Qm},[e.CMDB_OBJECT_CF_TYPE]:{item:Object(Qe.isCmdbIntegrationFieldEnabled)()?kb:()=>null}},Object(Qe.isReadOnlyFieldEnabled)()&&null!=e.READ_ONLY_CF_TYPE?{"com.atlassian.jira.plugin.system.customfieldtypes:readonlyfield":{item:LE}}:{})});const dI=({items:e,area:t})=>{const s=Object(Du.d)(),n=uI(),[i]=Object(Au.c)(s);return e.map(({id:e})=>{const{custom:s,system:r}=i&&i[e]&&i[e].schema||{};if(null==s&&null==r)return y.a.safeError("issue.views.issue-base.context",`Could not find a matching component for "${e}"`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null;const o=s||r;if(null!==o&&n[o]){const s=n[o].item;return(a.a.createElement(s,{key:e,fieldId:e,area:t}))}return null})},pI=Q.default.div(["display:flex;flex-direction:column;width:100%;"]),mI=e=>a.a.createElement(Ae.a,{content:e.data.label,position:"top"},a.a.createElement(Pu.a,e));mI.displayName="TooltipItem";var bI=Object(n.memo)(({items:e,area:t})=>{const[{issueTabs:s}]=Object(xu.a)(),n=e.filter(e=>"TAB"!==e.type),i=e.filter(e=>"TAB"===e.type),r=[{label:"Default",content:a.a.createElement(pI,null,a.a.createElement(dI,{items:n,area:t}))},...i.map(({id:e})=>{const n=s[e];return void 0!==n&&n.name&&n.items&&n.items.length>0?{label:n.name,content:a.a.createElement(pI,null,a.a.createElement(dI,{items:n.items,area:t}))}:null}).filter(e=>null!==e)];if(1===r.length){const e=r[0];return e&&e.content}return(a.a.createElement(_u.a,{components:{Item:mI},tabs:r}))}),fI=s("./src/packages/issue/epic-color/src/common/utils.js"),gI=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js");const hI=Object(Xn.createSelector)(Object(ea.q)("issuetype"),e=>e&&e.value.id),yI=Object(Xn.createSelector)(Object(ea.e)("com.pyxis.greenhopper.jira:jsw-issue-color"),Object(ea.e)("com.pyxis.greenhopper.jira:gh-epic-color"),(e,t)=>e&&e.key||t&&t.key),OI=Object(Xn.createSelector)(Object(ea.e)("com.pyxis.greenhopper.jira:gh-epic-color"),Object(ea.e)("com.pyxis.greenhopper.jira:jsw-issue-color"),(e,t)=>e||t);Object(Xn.createSelector)(hI,yI,gI.d,(e,t,s)=>{if(!s)return!1;const n=s.find(t=>t.id===e);return!(!n||!n.fields)&&t in n.fields});var jI=(e,t)=>Object(Bu.d)(`${e.baseUrl}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(c.stringify)({[e.fieldId]:e.value,issueId:Object(_.k)(t),skipScreenCheck:!0,atl_token:Object(QO.a)(),singleFieldEdit:!0})}),EI=s("./node_modules/@atlaskit/color-picker--current/dist/esm/index.js"),vI=Object(j.defineMessages)({readOnlyLabel:{id:"issue.views.issue-base.foundation.read-only-label",defaultMessage:"Read-only Color, {color} selected"},label:{id:"issue.views.issue-base.foundation.label",defaultMessage:"Edit color"},purple:{id:"issue.views.issue-base.foundation.purple",defaultMessage:"purple"},darkPurple:{id:"issue.views.issue-base.foundation.dark-purple",defaultMessage:"dark purple"},blue:{id:"issue.views.issue-base.foundation.blue",defaultMessage:"blue"},darkBlue:{id:"issue.views.issue-base.foundation.dark-blue",defaultMessage:"dark blue"},green:{id:"issue.views.issue-base.foundation.green",defaultMessage:"green"},darkGreen:{id:"issue.views.issue-base.foundation.dark-green",defaultMessage:"dark green"},teal:{id:"issue.views.issue-base.foundation.teal",defaultMessage:"teal"},darkTeal:{id:"issue.views.issue-base.foundation.dark-teal",defaultMessage:"dark teal"},yellow:{id:"issue.views.issue-base.foundation.yellow",defaultMessage:"yellow"},darkYellow:{id:"issue.views.issue-base.foundation.dark-yellow",defaultMessage:"dark yellow"},orange:{id:"issue.views.issue-base.foundation.orange",defaultMessage:"orange"},darkOrange:{id:"issue.views.issue-base.foundation.dark-orange",defaultMessage:"dark orange"},grey:{id:"issue.views.issue-base.foundation.grey",defaultMessage:"grey"},darkGrey:{id:"issue.views.issue-base.foundation.dark-grey",defaultMessage:"dark grey"}});s("./node_modules/focus-visible/dist/focus-visible.js");const kI=Q.default.div(["margin-left:-2px;padding-top:","px;padding-right:","px;height:","px;button:focus{box-shadow:none;}"],J.e,J.e,4*J.e),wI=Q.default.div(["position:absolute;top:1px;left:1px;width:","px;height:","px;border-radius:3px;background:",";"],3*J.e,3*J.e,e=>e.selectedColor),SI=Q.default.button(["display:inline-block;position:relative;width:","px;height:","px;border:2px solid transparent;box-sizing:border-box;border-radius:6px;border-color:transparent;background-color:transparent;padding:0;outline:none;transition:box-shadow 0.2s cubic-bezier(0.47,0.03,0.49,1.38);&:focus.focus-visible{border-color:",";}"],3.75*J.e,3.75*J.e,Je.a.B100);class II extends n.Component{constructor(...e){super(...e),this.onChange=e=>{const{onChange:t,onConfirm:s}=this.props;t(e),s()},this.generatePalette=Object(Mu.a)((e,t)=>e.map(({value:e,label:s})=>({value:e,label:t.formatMessage(vI[s])})))}render(){const{value:e,intl:t,isEditable:s}=this.props,n=Object(fI.g)();return a.a.createElement(kI,{"data-test-id":"issue.views.issue-base.foundation.color.color-picker-wrapper"},s?a.a.createElement(EI.a,{label:t.formatMessage(vI.label),popperProps:{positionFixed:!0,modifiers:{offset:{offset:"-10 5"}}},cols:n.length/2,selectedColor:e,palette:this.generatePalette(n,t),onChange:this.onChange}):a.a.createElement(CI,{intl:t,value:e,palette:this.generatePalette(n,t)}))}}II.displayName="UnsafeColorPicker",II.displayName="ColorPicker";const CI=e=>{const t=e.palette.filter(t=>t.value===e.value)[0].label,s=e.intl.formatMessage(vI.readOnlyLabel,{color:t});return a.a.createElement(SI,{"aria-label":s},a.a.createElement(wI,{selectedColor:e.value}))};function TI(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function PI(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?TI(Object(s),!0).forEach((function(t){_I(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):TI(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}CI.displayName="ReadOnlyColorPicker";const xI=(e,t)=>{const s=Object(ea.q)(t.fieldId)(e),n=!!s&&"com.pyxis.greenhopper.jira:gh-epic-color"===s.schema.custom;let a={shouldDiscardChangeOnFailure:!0,onSaveFailureFlagType:Ys.v};return n&&(a=PI({saveField:jI},a)),PI(PI({},a),{},{fieldId:t.fieldId,transformFromStateValue:e=>((e,t=!1)=>t?Object(fI.h)(Object(fI.e)(e)):Object(fI.h)(Object(fI.j)(e)))(e,n),transformToStateValue:e=>((e,t=!1)=>t?Object(fI.d)(Object(fI.f)(e)):Object(fI.i)(Object(fI.f)(e)))(e,n)})},DI=Object(Ts.a)([j.injectIntl,Object(ld.a)((e,t)=>xI(e,t))])(II);var AI=Object(Ts.a)([Object(i.b)(e=>({field:OI(e)}),{})])(e=>e.field?a.a.createElement(DI,{fieldId:e.field.key}):null),MI=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/view/common/context/index.js"),LI=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),RI=s("./src/packages/issue/fields/summary/src/services/index.js"),NI=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/text-area/index.js");const UI=Object(Q.css)(["@media screen and (-webkit-min-device-pixel-ratio:0){word-break:break-word;}@media screen and (-webkit-transition){word-break:break-word;}@-moz-document url-prefix(){overflow-wrap:anywhere;}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){word-break:break-all;}"]),FI=Q.default.h1(["",";width:100%;margin:0;padding:0;color:",";",";"],Je.c.h700(),Je.a.heading,UI),VI=Object(n.memo)(({defaultValue:e,passedRef:t,onChange:s})=>a.a.createElement(FI,{innerRef:t,"data-test-id":"issue.views.issue-base.foundation.summary.heading.writeable"},a.a.createElement(NI.a,{shouldAutoFocus:!0,value:e,onChange:s})));var KI=Object(j.defineMessages)({errorEmpty:{id:"issue-field-summary.error-empty",defaultMessage:"You must specify a summary of the issue."},errorTitle:{id:"issue-field-summary.error-title",defaultMessage:"We couldn't save the issue summary."},errorMessage:{id:"issue-field-summary.error-message",defaultMessage:"Check your connection, then give it another try."}});const BI=({value:e})=>{const t=null===e?"":e.toString();return a.a.createElement(FI,{"data-test-id":"issue.views.issue-base.foundation.summary.heading"},t)};BI.displayName="SummaryView";var WI=Object(n.memo)(e=>{const{onCancel:t,onEdit:s,onEscape:i,onConfirm:r,onEnter:o,onUpdate:c,readView:l,editView:u,label:d,issueKey:p,source:m,onFailure:b,onRenderSuccess:f,onEditFailure:g}=e,h=m&&m.value===LI.a.MOBILE_ISSUE,[y,O]=Object(n.useState)(!1),[j,E]=Object(n.useState)(!1),{formatMessage:v}=Object(Ge.c)(),k=j?v(KI.errorEmpty):void 0,w=Object(n.useRef)(),S=Object(n.useRef)(),[{value:I,error:C,fieldConfig:T},{saveValue:P,resetError:_}]=Object(RI.a)({issueKey:Object(vr.l)(p),onSuccess:e=>{c&&c(e),O(!1)},onFailure:e=>{b&&b(e,S.current),y&&g&&g("summary",{errorMessage:e.message})}}),[x,D]=Object(n.useState)(I),A=!!T&&T.isEditable;Object(n.useEffect)(()=>{f&&f()},[]),Object(n.useEffect)(()=>{S.current=I,C&&O(!0),y||D(I)},[C,y,I]);const M=Object(n.useCallback)(e=>{x!==I?(P(x,null,e),O(!1)):O(!1),Object(qi.h)(e)},[P,x,I]),L=Object(n.useCallback)(e=>{_(),O(!1),D(I),Object(qi.h)(e)},[_,I]),R=Object(n.useCallback)(e=>{document&&document.activeElement&&document.activeElement.blur(),E(!1),L(e),t&&t(e)},[t,L]),N=Object(n.useCallback)(e=>{null!==x&&""!==x?(document&&document.activeElement&&document.activeElement.blur(),M(e),r&&r(e,x)):j||E(!0)},[j,r,M,x]),U=Object(n.useCallback)(e=>{O(!0),Object(qi.h)(e),s&&s(e)},[s]),F=Object(n.useCallback)(e=>{L(e),i&&i(e)},[i,L]),V=Object(n.useCallback)(e=>{M(e),o&&o(e)},[o,M]),K=Object(n.useCallback)(e=>{_();const t=""===e?null:e.toString();null!==t&&E(!1),D(t)},[_,D]),B=Object(n.useCallback)(()=>{if(A)return void 0!==u&&"function"==typeof u?Object(n.createElement)(u,{passedRef:w,defaultValue:x,onChange:K}):a.a.createElement(VI,{passedRef:w,defaultValue:x,onChange:K})},[A,u,x,K]);if(w.current&&y&&j){const e=w.current,t=e instanceof HTMLElement?e.querySelector("textarea"):void 0,s=document?document.activeElement:null;t&&t!==s&&t.focus()}return(a.a.createElement(a.a.Fragment,null,C&&a.a.createElement(JO.a,{error:C,title:KI.errorTitle,description:KI.errorMessage}),a.a.createElement(dd.a,{label:d,isLabelHidden:!0,defaultValue:x,readView:(()=>void 0!==l&&"function"==typeof l?Object(n.createElement)(l,{value:I}):a.a.createElement(BI,{value:I}))(),editView:B(),onCancel:R,onConfirm:N,onEscape:F,onEnter:V,onEditRequested:U,isFitContainerWidthReadView:!h,isEditable:A,isEditing:y,invalidMessage:k,isInvalid:j,editButtonLabel:v(ud.a.editButtonLabel,{fieldName:d}),confirmButtonLabel:v(ud.a.confirmButtonLabel,{fieldName:d}),cancelButtonLabel:v(ud.a.cancelButtonLabel,{fieldName:d})})))});const HI=Object(Q.css)(["@media screen and (-webkit-min-device-pixel-ratio:0){word-break:break-word;}@media screen and (-webkit-transition){word-break:break-word;}@-moz-document url-prefix(){overflow-wrap:anywhere;}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){word-break:break-all;}"]);var GI=Q.default.h1(["",";width:100%;margin:0;padding:0;color:",";",";"],Je.c.h700(),Je.a.heading,HI);const $I=({value:e,onChange:t})=>a.a.createElement(GI,{"data-test-id":"issue.views.issue-base.foundation.summary.heading.writeable"},a.a.createElement(NI.a,{shouldAutoFocus:!0,value:e,onChange:t}));$I.displayName="SummaryFieldView";var qI=$I;const zI=({value:e})=>a.a.createElement(GI,{"data-test-id":"issue.views.issue-base.foundation.summary.heading"},e);zI.displayName="SummaryReadOnlyView";var YI=zI;class QI extends n.Component{constructor(...e){super(...e),this.onCancel=()=>{document&&document.activeElement&&document.activeElement.blur(),Object(Rr.c)().markStartOfInteraction({key:Gr.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),this.props.onCancel()},this.onConfirm=()=>{document&&document.activeElement&&document.activeElement.blur(),Object(Rr.c)().markStartOfInteraction({key:Gr.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM}),this.props.onConfirm()},this.onEditRequest=()=>{Object(Rr.c)().markStartOfInteraction({key:Gr.TIME_TO_RENDER_EDIT_VIEW}),this.props.onEditRequest()}}componentDidMount(){this.props.onExperienceSuccess()}componentDidUpdate(e){const{isEditing:t,value:s}=this.props;if(!e.isEditing||!t){const n=e.isEditing&&!t;!e.isEditing&&t&&Object(Rr.c)().markTimeToFinishTask({key:Gr.TIME_TO_RENDER_EDIT_VIEW}),n&&(Object(Rr.c)().markTimeToFinishTask({key:Gr.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),e.value===s&&Object(Rr.c)().markTimeToFinishTask({key:Gr.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM}))}}renderReadView(){return a.a.createElement(YI,{value:this.props.value})}renderEditView(){return a.a.createElement(qI,{value:this.props.value,onChange:this.props.onChange})}render(){const{intl:e}=this.props;return(a.a.createElement(G.a,{onEnter:this.onConfirm,onEscape:this.onCancel},a.a.createElement(dd.a,{label:this.props.label,isLabelHidden:!0,readView:this.renderReadView(),editView:this.props.isEditable&&this.renderEditView(),value:this.props.value,isEditing:this.props.isEditing,invalidMessage:this.props.invalidMessage,isInvalid:!!this.props.invalidMessage,onCancel:this.onCancel,onConfirm:this.onConfirm,onEditRequested:this.onEditRequest,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(ud.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(ud.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(ud.a.cancelButtonLabel,{fieldName:this.props.label})})))}}QI.displayName="SummaryInlineEditView",QI.displayName="SummaryInlineEditView",QI.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:"",invalidMessage:null,onExperienceSuccess:o.a};var JI=Nt()(Object(Uu.c)("summary"),Object(Fu.b)("summary"),j.injectIntl)(QI),ZI=Object(ld.a)(()=>({fieldId:"summary"}))(JI);function XI(){return(XI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function eC(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const tC=e=>{let{onUpdate:t,onConfirm:s,onFailure:i}=e,r=eC(e,["onUpdate","onConfirm","onFailure"]);const o=Object(Du.d)(),c=Object(Du.a)(),l=Object(n.useContext)(MI.a),u=l?l.consumerCallbacks.onSuccess:void 0,d=l?l.consumerCallbacks.onFailure:void 0;return a.a.createElement(R.a,{onError:(e,t)=>{d&&d("summary",{errorMessage:t.message})}},a.a.createElement(WI,XI({issueKey:o,source:c,onUpdate:t,onConfirm:s,onFailure:i,onRenderSuccess:u,onEditFailure:d},r)))};tC.displayName="ExtractedSummaryField";const sC=Object(i.b)(null,e=>({onUpdate:t=>e(Object(_O.e)("summary",t))}))(tC);var nC=()=>{const e=Object(Qe.isExtractedSummaryFieldEnabled)()?sC:ZI;return(a.a.createElement(e,null))};const aC=Q.default.div(["display:flex;flex:1 1 auto;min-width:0;width:100%;"]),iC=Q.default.div(["display:flex;flex:1 1 auto;> div{display:flex;flex:1 1 auto;}"]);var rC=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js"),oC=s("./node_modules/@atlaskit/icon/glyph/flag-filled.js"),cC=s.n(oC);const lC=25*J.e,uC=Q.default.div(["margin-top:","px;display:inline-flex;vertical-align:baseline;margin-left:-","px;height:","px;"],J.e/2,J.e/4,3*J.e),dC=Q.default.span(["color:",";display:inline-block;overflow:hidden;line-height:","px;text-overflow:ellipsis;white-space:nowrap;max-width:","px;"],Je.a.N90,3*J.e,lC);class pC extends n.Component{constructor(...e){super(...e),this.state={hasOverflow:!1},this.altStatusLabel=null,this.renderAltStatus=()=>a.a.createElement(dC,{innerRef:e=>{this.altStatusLabel=e}},this.props.name),this.renderAltStatusWithTooltip=()=>a.a.createElement(Ae.a,{content:this.props.name,position:"bottom"},this.renderAltStatus())}componentDidMount(){this.updateOverflow()}UNSAFE_componentWillReceiveProps(){this.setState({hasOverflow:!1})}componentDidUpdate(){this.updateOverflow()}updateOverflow(){if(!this.altStatusLabel)return!1;const e=this.altStatusLabel.clientWidth>=lC;return e!==this.state.hasOverflow&&this.setState({hasOverflow:e}),e}render(){return a.a.createElement(uC,{onClick:this.props.onClick,"data-test-id":"issue.views.issue-base.foundation.status.alt-view"},this.props.icon,this.state.hasOverflow?this.renderAltStatusWithTooltip():this.renderAltStatus())}}pC.displayName="AltStatusField",pC.defaultProps={onClick:o.a};const mC=Object(j.defineMessages)({flagged:{id:"issue.status-field.flagged",defaultMessage:"Flagged"}});class bC extends n.Component{render(){const e=this.props.intl.formatMessage(mC.flagged);return(a.a.createElement(pC,{onClick:this.props.onClick,name:e,icon:a.a.createElement(cC.a,{size:"medium",primaryColor:Je.a.R300,label:e})}))}}bC.displayName="FlaggedField";var fC=Object(Fs.a)(e=>({onClick:()=>{e("click")}}))(Object(j.injectIntl)(bC)),gC=e=>a.a.createElement(pC,{name:e.name,icon:a.a.createElement(fo.a,{size:"medium",label:e.name,primaryColor:Je.a.G400})}),hC=s("./src/packages/issue/fields/status/src/ui/main.js");const yC=Q.default.div([""]),OC=e=>{const[,{register:t}]=Object(Bc.b)(),s=Object(n.useCallback)(e=>{t("status-spotlight",e)},[t]);return a.a.createElement(yC,{innerRef:s},a.a.createElement(hC.a,e))};OC.displayName="StatusWithRef";var jC=OC;const EC=Q.default.div(["padding-top:","px;"],1.5*J.e),vC=Q.default.div(["display:flex;flex-wrap:wrap;padding-bottom:","px;"],J.e),kC=Q.default.div(["padding-right:","px;"],J.e);class wC extends n.Component{constructor(...e){super(...e),this.onStatusSubmitted=(e,t,s,n)=>{Object(qi.f)(n,"issueStatus updated",{oldValId:e.id,oldStatusCategoryId:e.statusCategory.id,oldStatusCategoryName:e.statusCategory.name,newValId:t.id,newStatusCategoryId:t.statusCategory.id,newStatusCategoryName:t.statusCategory.name,hasScreen:s.transition.hasScreen,isConditional:s.transition.isConditional,newStatusField:!0,issueHierarchyLevel:this.props.issueHierarchyLevel})}}componentDidMount(){this.props.onExperienceSuccess()}render(){const{issueKey:e,initialValue:t,isEditable:s,isFlagged:n,projectType:i,resolution:r,onStatusChanged:o,onEditCancel:c}=this.props;return(a.a.createElement(EC,null,a.a.createElement(vC,null,a.a.createElement(kC,{"data-test-id":"issue.views.issue-base.foundation.status.status-field-wrapper"},a.a.createElement(jC,{issueKey:e,projectType:i,initialValue:t,isEditable:s,appearance:"button",onSubmit:this.onStatusSubmitted,onSuccess:o,onEditCancel:c,preFetchTransitions:!0})),n&&a.a.createElement(fC,{externalId:"issue.status.flagged"}),r&&!n&&a.a.createElement(gC,{name:r}))))}}wC.displayName="StatusView",wC.displayName="StatusView";const SC={canContainMediaContent:!1,isOptimistic:!1,isRichTextField:!1,shouldSaveDraft:!1,shouldDiscardChangeOnFailure:!1,onSaveFailureFlagType:null,onSaveSuccessFlagType:null,saveField:()=>Promise.resolve()};var IC=Object(Ts.a)([Object(i.b)(e=>({issueKey:Object(P.B)(e),initialValue:Object(A.c)(e),isFlagged:Object(rC.b)(e),isEditable:Object(_.m)(e),resolution:Object(A.a)(e),issueHierarchyLevel:Object(Ps.d)(e),projectType:Object(_.F)(e)}),e=>({onStatusChanged:(t,s)=>{e(Object(_O.c)("status",SC,t)),e(Object(_O.e)("status",t,{viaDialog:s}))},onEditCancel:()=>{e(Object(BS.c)("status",SC))}})),Object(Uu.c)("status"),Object(Fu.b)("status")])(wC);const CC=Q.default.div(["display:flex;flex-wrap:wrap;padding-top:","px;padding-bottom:","px;"],1.5*J.e,J.e),TC=Q.default.div(["padding-right:","px;"],J.e),PC=({isEditable:e,isFlagged:t,onStatusChanged:s,onEditCancel:i})=>{const r=Object(Du.d)(),o=Object(Du.e)(),c=Object(zi.d)(o),l=Object(n.useContext)(MI.a),[u]=Object(Um.b)({issueKey:r,fieldKey:"status"}),[d]=Object(Um.b)({issueKey:r,fieldKey:"resolution"}),[p]=Object(Um.b)({issueKey:r,fieldKey:"hierarchy-level-same-level"}),m=Object(n.useMemo)(()=>(e=>({name:e.name,id:e.id,statusCategory:{id:e.statusCategory.id,name:e.statusCategory.name}}))(u),[u]),b=null==d?void 0:d.name,f=Object(zi.b)(o,null==p?void 0:p.id);return Object(n.useEffect)(()=>{null==l||l.consumerCallbacks.onSuccess()},[]),a.a.createElement(R.a,{onError:(e,t)=>{null==l||l.consumerCallbacks.onFailure("status",{errorMessage:t.message})}},a.a.createElement(CC,null,a.a.createElement(TC,{"data-test-id":"issue.views.issue-base.foundation.status.status-field-wrapper"},a.a.createElement(jC,{issueKey:r,projectType:c,initialValue:m,isEditable:e,appearance:"button",onSubmit:(e,t,s,n)=>{Object(qi.f)(n,"issueStatus updated",{oldValId:e.id,oldStatusCategoryId:e.statusCategory.id,oldStatusCategoryName:e.statusCategory.name,newValId:t.id,newStatusCategoryId:t.statusCategory.id,newStatusCategoryName:t.statusCategory.name,hasScreen:s.transition.hasScreen,isConditional:s.transition.isConditional,newStatusField:!0,issueHierarchyLevel:f})},onSuccess:s,onEditCancel:i,preFetchTransitions:!0})),t&&a.a.createElement(fC,{externalId:"issue.status.flagged"}),b&&!t&&a.a.createElement(gC,{name:b})))};PC.displayName="StatusView";var _C=Object(i.b)(e=>({isFlagged:Object(rC.b)(e),isEditable:Object(_.m)(e)}),e=>({onStatusChanged:(t,s)=>{e(Object(_O.c)("status",SC,t)),e(Object(_O.e)("status",t,{viaDialog:s}))},onEditCancel:()=>{e(Object(BS.c)("status",SC))}}))(PC);const xC=Q.default.div(["margin-bottom:","px;"],2*J.e);const DC=()=>{const[e]=Object(Tu.c)();return(()=>a.a.createElement(aC,null,a.a.createElement(AI,null),a.a.createElement(iC,{key:"SUMMARY"},a.a.createElement(nC,null))))()},AC=()=>{const[e]=Object(Tu.c)();return(()=>a.a.createElement(xC,null,a.a.createElement(_C,{key:"STATUS"})))()},MC=()=>{const[e]=Object(Tu.c)();switch(e){case"jsd":return(()=>{const[e]=Object(Tu.b)();return(a.a.createElement(a.a.Fragment,null,a.a.createElement(bI,{items:e.contentSection,area:"content"})))})();default:return(()=>{const[e]=Object(Tu.b)();return e.contentSection.find(({type:e})=>"TAB"===e)?a.a.createElement(bI,{items:e.contentSection,area:"content"}):a.a.createElement(dI,{items:e.contentSection,area:"content"})})()}},LC=()=>{const[e]=Object(Tu.c)();return(()=>{const[e]=Object(Tu.b)(),t=[...e.primaryContextSection,...e.secondaryContextSection];return a.a.createElement(dI,{items:t,area:"context"})})()};var RC=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");const NC=Q.default.div(["margin-top:","px;"],e=>e.isCompactMode?2.5*J.e:5*J.e),UC=Q.default.div(["margin-top:",";"],e=>e.isCompactMode?null:`${2.5*J.e}px`);var FC=s("./src/packages/issue/issue-view/src/layout-descriptor/view/context/view.js"),VC=s("./src/packages/servicedesk/common/src/global-spotlight-target/index.js");function KC(){return(KC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const BC=({layoutItems:e,area:t,ItemContainer:s,onOpenPanel:n})=>{const i=uI();return(a.a.createElement(a.a.Fragment,null,e.map(e=>(({key:e,type:t,payload:s,hasGlobalSpotlightTarget:n},i,r,o,c)=>{const l=i[t],u=l&&l.item;if(!u)return y.a.safeError(`issue.views.issue-base.${r}`,`Could not find a matching component for "${t}"`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null;const d=c?(n=>o?a.a.createElement(o,{key:e},a.a.createElement(u,KC({},s,{area:r,onOpenPanel:s=>n(e,t,s)}))):a.a.createElement(u,KC({},s,{key:e,area:r,onOpenPanel:s=>n(e,t,s)})))(c):(()=>o?a.a.createElement(o,{key:e},a.a.createElement(u,KC({},s,{area:r}))):a.a.createElement(u,KC({},s,{key:e,area:r})))();if(!0===n&&void 0!==(null==s?void 0:s.fieldId)){const e=`global-spotlight-target-${s.fieldId}`;return(a.a.createElement(VC.a,{id:e,key:e},d))}return d})(e,i,t,s,n))))};BC.defaultProps={ItemContainer:void 0,onOpenPanel:o.a};var WC=BC,HC=Object(i.b)(()=>({}),e=>({onOpenPanel:(t,s,n)=>{const a={title:n&&n.title||s,type:s,key:t,payload:n};e(zd(a))}}))(WC),GC=s("./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js"),$C=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),qC=s("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js");const zC=Object(qC.b)("issue-ecosystem"),YC="issue.ecosystem.local-storage",QC=()=>{try{return zC.get("collapsed-panels")||[]}catch(e){return y.a.safeError(YC,`getCollapsedPanels failed: ${e}`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),[]}};var JC=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/DropdownMenu.js"),ZC=s("./node_modules/@atlaskit/icon/glyph/more.js"),XC=s.n(ZC);const eT=({children:e,isLoading:t=!1})=>a.a.createElement("span",null,a.a.createElement(JC.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:t?a.a.createElement(z.a,{size:"small"}):a.a.createElement(XC.a,{size:"small",label:"meatball menu"}),className:"squareButtonWithIcon"},position:"bottom right"},e));eT.displayName="MeatBallMenu";const tT=Q.default.div(["display:flex;align-items:center;height:","px;cursor:",";"],4*J.e,e=>e.clickable?"pointer":void 0),sT=Q.default.div(["align-items:center;display:flex;flex-flow:row-reverse wrap;& > * + *{margin-left:","px;}"],J.e);function nT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function aT(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?nT(Object(s),!0).forEach((function(t){iT(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):nT(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function iT(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const rT=Q.default.span(["color:",";margin-left:5px;display:",";",":hover &{display:inline;}"],Je.a.link,e=>e.alwaysShow?void 0:"none",tT),oT=Q.default.div(["max-height:",";overflow-y:",";overflow-x:hidden;",";transition:max-height 1s ease-out;"],e=>e.isCollapsed?"0":"1500px",e=>e.isCollapsed?"hidden":"auto",Object(pr.f)("&")),cT=Q.default.h1(["flex:1;",";",";color:",";"],pr.e,Je.c.h400(),Je.a.heading),lT=Object(j.defineMessages)({actions:{id:"issue.content.ecosystem-panels.meatballs.actions",defaultMessage:"Actions"},hide:{id:"issue.content.ecosystem-panels.meatballs.hide",defaultMessage:"Hide {appName}"},collapse:{id:"issue.content.ecosystem-panels.collapse-content",defaultMessage:"hide"},expand:{id:"issue.content.ecosystem-panels.expand-content",defaultMessage:"show"}});class uT extends n.Component{constructor(e){super(e),this.setupConnectHost=e=>{e&&e.onIframeUnload(({extension:t})=>{e.destroy(t.id)})},this.contentPanelContainer=void 0,this.handleRemoveContentPanel=()=>{const{appKey:e,moduleKey:t,removeContentPanel:s,onContentPanelRemoveAnalytics:n}=this.props;n(Pa(e,t)),s(`${e}_${t}`)},this.toggleCollapsedState=()=>{const{appKey:e,moduleKey:t,onToggleCollapsedStateAnalytics:s}=this.props,{isCollapsed:n}=this.state,a=Object($C.b)(`${e}_${t}`,10);s(((e,t,s)=>Sa(Sa({},Ta(e,t)),{},{event:Object(ja.j)(s)(s)}))(e,t,n?"expand":"collapse")),n?(e=>{const t=QC();try{zC.set("collapsed-panels",t.filter(t=>t!==e))}catch(e){y.a.safeError(YC,`unsetCollapsedPanel failed: ${e}`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))}})(a):(e=>{const t=QC();try{zC.set("collapsed-panels",[...t,e])}catch(e){y.a.safeError(YC,`setCollapsedPanel failed: ${e}`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))}})(a),this.setState({isCollapsed:!n})},this.state={connectHost:window.connectHost,isCollapsed:QC().includes(Object($C.b)(`${e.appKey}_${e.moduleKey}`,10))},this.setupConnectHost(this.state.connectHost)}componentDidMount(){this.state.connectHost||Ka(e=>{this.setupConnectHost(e),this.setState({connectHost:e})})}componentDidUpdate(){this.props.isSelected&&(Object(Br.a)(this.contentPanelContainer),this.props.unSelectContentPanel(`${this.props.appKey}_${this.props.moduleKey}`))}renderHidePanelOption(){const{intl:e}=this.props;return(a.a.createElement(ar.a,{title:e.formatMessage(lT.actions)},a.a.createElement(dr.a,{onClick:this.handleRemoveContentPanel},e.formatMessage(lT.hide,{appName:this.props.name}))))}renderMeatBallMenu(){return a.a.createElement(eT,null,this.renderHidePanelOption())}renderHeader(){const{showByDefault:e}=this.props.contentPanel;if(!e)return a.a.createElement(Ki.c,null,a.a.createElement(tT,null,a.a.createElement(cT,null,this.props.name)),a.a.createElement(sT,null,this.renderMeatBallMenu()));const{intl:t}=this.props,{isCollapsed:s}=this.state;return a.a.createElement(Ki.c,null,a.a.createElement(tT,{clickable:!0,onClick:this.toggleCollapsedState},a.a.createElement(cT,null,this.props.name),a.a.createElement(rT,{alwaysShow:s},s?t.formatMessage(lT.expand):t.formatMessage(lT.collapse))),e?null:a.a.createElement(sT,null,this.renderMeatBallMenu()))}render(){const{appKey:e,moduleKey:t}=this.props,{isCollapsed:s}=this.state,{options:n,options:{url:i,origin:r},showByDefault:o}=this.props.contentPanel,c=new Ha.a;return a.a.createElement("div",{ref:e=>{this.contentPanelContainer=e}},this.renderHeader(),a.a.createElement(oT,{isCollapsed:s&&o},this.state.connectHost&&a.a.createElement(Wa.a,{key:`connect-iFrame-${r}-${this.props.refreshedOn}`,connectHost:this.state.connectHost,appKey:e,moduleKey:t,url:i,options:c.convertConnectOptions(n),connectIframeProvider:c,width:"100%",height:"100%",timeoutIndicator:()=>a.a.createElement(Ja,{appName:this.props.contentPanel.name,appKey:e})})))}}uT.displayName="ConnectContentPanel",uT.displayName="ContentPanel",uT.defaultProps={isSelected:!1,unSelectContentPanel:o.a,removeContentPanel:o.a,refreshedOn:0,onContentPanelRemoveAnalytics:o.a};var dT=Object(Ts.a)([j.injectIntl,Object(Fs.a)(e=>({onContentPanelRemoveAnalytics:t=>e("remove",aT({},t)),onToggleCollapsedStateAnalytics:t=>e("toggleCollapsedState",aT({},t))})),Object(i.b)((e,t)=>({contentPanel:Object(Ra.d)(t.appKey,t.moduleKey)(e),isSelected:Object(Ra.r)(t.appKey,t.moduleKey)(e),refreshedOn:Object(_.d)(e)}),e=>({unSelectContentPanel:t=>e(Object(GC.e)(t)),removeContentPanel:t=>e(Object(GC.h)(t))}))])(uT),pT=s("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),mT=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-panel/index.js"),bT=s("./src/packages/forge/forge-ui-async/src/ui/extension/async.js"),fT=s("./src/packages/forge/forge-ui-async/src/ui/issue-panel/async.js"),gT=s("./src/packages/issue/issue-view/src/actions/forge-actions.js"),hT=Object(j.defineMessages)({title:{id:"issue.content.ecosystem.forge.panel.actions.title",defaultMessage:"Actions"},remove:{id:"issue.content.ecosystem.forge.panel.actions.remove",defaultMessage:"Remove"},collapse:{id:"issue.content.ecosystem.forge.panel.actions.collapse",defaultMessage:"Collapse"},expand:{id:"issue.content.ecosystem.forge.panel.actions.expand",defaultMessage:"Expand"}});function yT(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function OT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function jT(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?OT(Object(s),!0).forEach((function(t){ET(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):OT(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ET(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vT=({actions:e})=>{const[t,s]=Object(n.useState)(!1),{formatMessage:i}=Object(Ge.c)();if(0===e.length)return null;const r=e.map(e=>jT(jT({},e),{},{onClick:()=>(s(!0),e.onClick().finally(()=>{s(!1)}))}));return(a.a.createElement(eT,{isLoading:t},a.a.createElement(ar.a,{title:i(hT.title)},r.map(e=>a.a.createElement(dr.a,{onClick:e.onClick,key:e.key},e.text)))))};vT.displayName="Actions";const kT=({name:e,extension:{environmentType:t},actions:s})=>a.a.createElement(Ki.c,null,a.a.createElement(tT,null,a.a.createElement(Ki.e,null,a.a.createElement(or.a,{extensionName:e,extensionEnvType:t}))),a.a.createElement(sT,null,a.a.createElement(vT,{actions:s})));kT.displayName="ForgeContentPanelHeader";const wT=e=>{let{platformContext:t,extensionContext:s,source:i,onContentPanelRemoveAnalytics:r,onRemove:o,appKey:c,moduleKey:l,name:u,isPanelCollapsed:d}=e,p=yT(e,["platformContext","extensionContext","source","onContentPanelRemoveAnalytics","onRemove","appKey","moduleKey","name","isPanelCollapsed"]);const{extension:m,panelKey:b,isJustAdded:f,isCompactMode:g,removeFromJustAdded:h,removeFromNewPanels:y,updatePanel:O}=p,j=Object(n.useRef)(null),{formatMessage:E}=Object(Ge.c)();Object(n.useEffect)(()=>{f&&j&&j.current&&(Object(Br.a)(j.current),h(b))},[f,b,h]),Object(n.useEffect)(()=>{s.isNewToIssue&&y(b)},[s,b,y]);const v=Object(n.useMemo)(()=>({source:i}),[i]),[k,w]=Object(n.useState)([]),S=Object(n.useMemo)(()=>({onClick:()=>(r(Pa(c,l)),Object(pT.l)(i),o(b),Promise.resolve()),text:E(hT.remove),key:"internal__remove-action"}),[c,E,l,r,o,b,i]),I=Object(n.useCallback)(e=>(Object(pT.k)(i,{collapsed:e}),e&&w([]),O({issueKey:t.issueKey,panelKey:b,collapsed:e}),Promise.resolve()),[b,t.issueKey,i,O]),C=Object(n.useMemo)(()=>({onClick:()=>I(!1),text:E(hT.expand),key:"internal__expand-action"}),[E,I]),T=Object(n.useMemo)(()=>({onClick:()=>I(!0),text:E(hT.collapse),key:"internal__collapse-action"}),[E,I]),P=d?C:T,_=[...k.slice(0,5).map(e=>jT(jT({},e),{},{onClick:()=>(Object(pT.j)(i),e.onClick())})),...Object(Qe.isForgeIssuePanelNextEnabled)()?[P]:[],S],x=!d||!Object(Qe.isForgeIssuePanelNextEnabled)();return a.a.createElement(mT.a,{analyticsData:v,shouldFireScreenEvent:s.isNewToIssue},a.a.createElement("div",{ref:j},a.a.createElement(NC,{isCompactMode:g},a.a.createElement(kT,{actions:_,extension:m,name:u}),x&&(()=>Object(Qe.isForgeIssuePanelNextEnabled)()?a.a.createElement(fT.a,{platformContext:t,extensionContext:s,extension:m,localId:b,setCustomActions:w,analyticsData:v}):a.a.createElement(bT.a,{context:t,extension:m,localId:b,module:"jira:issuePanel",analyticsData:v}))()),a.a.createElement(NC,{isCompactMode:g})))};wT.displayName="ForgeContentPanelView";var ST=Object(Ts.a)([Object(Fs.a)(e=>({onContentPanelRemoveAnalytics:t=>e("remove",jT({},t))})),Object(i.b)((e,t)=>({isJustAdded:Object(cu.i)(t.panelKey)(e),platformContext:Object(cu.b)(e),extensionContext:Object(cu.h)(t.panelKey)(e),source:Object(P.b)(e),isPanelCollapsed:Object(cu.e)(t.panelKey)(e)}),e=>({removeFromJustAdded:t=>{e(Object(GC.e)(t))},removeFromNewPanels:t=>{e(Object(gT.i)(t))},onRemove:t=>{e(Object(GC.h)(t))},updatePanel:t=>{e(Object(gT.g)(t))}}))])(wT),IT=s("./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js"),CT=s("./src/packages/issue/attachments/issue-attachments-table/src/ui/error/assets/search.svg"),TT=s.n(CT),PT=Object(j.defineMessages)({errorStateTitle:{id:"issue-attachments-table.error.error-state-title",defaultMessage:"We couldn't load your attachments"},errorStateDescription:{id:"issue-attachments-table.error.error-state-description",defaultMessage:"Check your network connection, then try reloading your attachments."},primaryButton:{id:"issue-attachments-table.error.primary-button",defaultMessage:"Reload Attachments"}});const _T=Q.default.div(["& > div{margin:auto;}"]),xT=({onClick:e,shouldHideImage:t})=>{const{formatMessage:s}=Object(Ge.c)(),n=t?void 0:TT.a,i=a.a.createElement(q.a,{appearance:"primary",onClick:()=>e()},s(PT.primaryButton));return a.a.createElement(_T,null,a.a.createElement(Ga.a,{imageUrl:n,header:s(PT.errorStateTitle),description:s(PT.errorStateDescription),primaryAction:i}))};xT.displayName="AttachmentsError",xT.defaultProps={shouldHideImage:!1};var DT=xT;const AT=Q.default.div(["width:100%;display:flex;position:relative;&&{min-height:initial;}"]),MT=Object(Q.keyframes)(["0%{background-position:-300px 0;}100%{background-position:2000px 0;}"]),LT=Q.default.div(["animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:",";animation-timing-function:linear;background-color:",";background-image:linear-gradient( to right,"," 10%,"," 30%,"," 50% );background-repeat:no-repeat;position:absolute;left:0;right:0;top:0;bottom:0;"],MT,Je.a.N30,Je.a.N30,Je.a.N20,Je.a.N30),RT=Q.default.div(["min-height:","px;min-width:","px;width:",";border-top:","px solid ",";border-bottom:","px solid ",";border-right:","px solid ",";border-left:","px solid ",";"],e=>e.height,e=>e.minWidth,e=>e.width,e=>(e.lineHeight-e.height)/2,Je.a.N0,e=>(e.lineHeight-e.height)/2,Je.a.N0,e=>e.borderRight,Je.a.N0,e=>e.borderLeft,Je.a.N0),NT=Q.default.div(["position:relative;width:100%;border-top:","px solid ",";border-bottom:","px solid ",";"],e=>e.paddingTop,Je.a.N0,e=>e.paddingBottom,Je.a.N0),UT=Q.default.div(["background:",";width:",";"],Je.a.N0,e=>e.width);function FT(){return(FT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const VT=({nameTextWidthPercentage:e,dateAddedWidth:t})=>a.a.createElement(AT,null,a.a.createElement(RT,{height:24,minWidth:24,lineHeight:40,borderLeft:6}),a.a.createElement(RT,{height:14,width:`${e}%`,lineHeight:40,borderLeft:8,borderRight:20}),a.a.createElement(UT,{width:`${100-e}%`}),a.a.createElement(RT,{height:14,minWidth:50,lineHeight:40}),a.a.createElement(RT,{height:14,minWidth:t,lineHeight:40,borderLeft:16}),a.a.createElement(RT,{height:24,minWidth:24,lineHeight:40,borderLeft:170-t+62,borderRight:12}));VT.displayName="TableItem";const KT=e=>{const{pageNumber:t,totalCount:s}=e,n=s-6*(t-1),i=Math.min(n,6),r=[{nameTextWidthPercentage:80,dateAddedWidth:170},{nameTextWidthPercentage:70,dateAddedWidth:150},{nameTextWidthPercentage:80,dateAddedWidth:160},{nameTextWidthPercentage:60,dateAddedWidth:140},{nameTextWidthPercentage:70,dateAddedWidth:155},{nameTextWidthPercentage:80,dateAddedWidth:170}],o=s>6?55:23;return a.a.createElement(AT,null,a.a.createElement(LT,null),a.a.createElement(NT,{paddingTop:0,paddingBottom:o},a.a.createElement(AT,null,a.a.createElement(RT,{height:14,minWidth:50,lineHeight:26}),a.a.createElement(UT,{width:"100%"}),a.a.createElement(RT,{height:14,minWidth:40,lineHeight:26,borderLeft:16}),a.a.createElement(RT,{height:14,minWidth:100,lineHeight:26,borderLeft:26}),a.a.createElement(RT,{height:0,minWidth:24,lineHeight:26,borderLeft:144})),a.a.createElement(RT,{height:2,lineHeight:2}),a.a.createElement(NT,{paddingTop:0,paddingBottom:0},Array.from({length:i}).map((e,t)=>a.a.createElement(VT,FT({},r[t],{key:`table-item--${t}`})))),a.a.createElement(RT,{height:2,lineHeight:2})))};KT.displayName="AttachmentsTableSkeleton",KT.defaultProps={pageNumber:1,totalCount:6};var BT=KT,WT=s("./src/packages/issue/user-preferences-services/src/main.js"),HT=s("./node_modules/@atlaskit/media-card/dist/esm/utils/lightCards/cardLoading.js"),GT=s("./node_modules/@atlaskit/media-card/dist/esm/root/card/cardLoader.js"),$T=s("./node_modules/@atlaskit/media-filmstrip/dist/esm/filmstripView/index.js"),qT=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/with-props.js"),zT=Object(j.defineMessages)({confirmationHeader:{id:"issue-attachments-base.with-issue-attachments-delete.confirmation-header",defaultMessage:"Delete this attachment?"},confirmationContent:{id:"issue-attachments-base.with-issue-attachments-delete.confirmation-content",defaultMessage:"Once you delete, it's gone for good."}});function YT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function QT(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?YT(Object(s),!0).forEach((function(t){JT(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):YT(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function JT(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ZT(){return(ZT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var XT=(e,t="filmStripView")=>s=>{const i=Object(Du.d)(),[{value:{attachments:r}},{deleteAttachment:o}]=Object(IT.a)(i),[c,l]=Object(n.useState)(),{formatMessage:u}=Object(Ge.c)(),{createAnalyticsEvent:d}=Object(Ey.a)(),p=Object(Kk.c)(),[m]=Object(cp.a)(),b=Object(n.useCallback)(e=>{if(void 0!==c){e.stopPropagation();const s=d({action:"clicked",actionSubject:"button"});Object(qi.h)(s,"deleteAttachmentConfirm",{view:t}),o(i,c),l()}},[d,o,c,i]),f=Object(n.useCallback)(e=>{e.stopPropagation(),l()},[]),g=Object(n.useMemo)(()=>(({attachments:e,canDeleteAllAttachments:t,canDeleteOwnAttachments:s,accountIdLoggedInUser:n})=>e.reduce((e,a)=>QT(QT({},e),{},{[a.id]:"issue"===a.parentName&&(t||null!==n&&null!==a.author&&s&&a.author.accountId===n)}),{}))({attachments:r,canDeleteAllAttachments:m.canDeleteAllAttachments,canDeleteOwnAttachments:m.canDeleteOwnAttachments,accountIdLoggedInUser:p}),[p,r,m.canDeleteAllAttachments,m.canDeleteOwnAttachments]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(e,ZT({},s,{onDeleteAttachment:l,canDeleteAttachmentMap:g})),void 0!==c&&a.a.createElement(Kt.b,{appearance:"danger",headerMessage:u(zT.confirmationHeader),contentMessage:u(zT.confirmationContent),onConfirm:b,onCancel:f,externalId:"issue.attachment.card.delete"}))},eP=s("./src/packages/issue/issue-view/src/actions/card-cover-actions.js");const tP=()=>({type:"SCROLL_TO_ATTACHMENT_COMMENT"}),sP=()=>({type:"SCROLL_TO_ATTACHMENT_WORKLOG"});var nP=s("./src/packages/issue/issue-view/src/common/media/components/create-auth-provider.js"),aP=s("./src/packages/issue/issue-view/src/common/media/components/with-token-provider/with-token-provider.js");function iP(){return(iP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function rP(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var oP=e=>Object(aP.a)((e=>t=>{const{tokenProvider:s}=t,n=rP(t,["tokenProvider"]),{mediaContext:i}=n;if(!i.viewContext)return null;const{clientId:r,serviceHost:o}=i.viewContext,c={authProvider:Object(nP.a)(s,r,o)};return a.a.createElement(e,iP({viewMediaClientConfig:c},n))})(e)),cP=s("./src/packages/issue/issue-view/src/media-feature-flags.js"),lP=s("./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js"),uP=s("./node_modules/@atlaskit/icon/glyph/trash.js"),dP=s.n(uP),pP=s("./src/packages/issue/attachments/issue-attachments-base/src/services/constants.js");var mP=s("./node_modules/@atlaskit/icon/glyph/watch.js"),bP=s.n(mP),fP=s("./node_modules/@atlaskit/theme/dist/esm/colors.js"),gP=s("./src/packages/issue/issue-scroll/src/services/main.js"),hP=s("./src/packages/issue/issue-scroll/src/services/types.js"),yP=Object(j.defineMessages)({goToComment:{id:"issue-attachments-base.goto-button.go-to-comment",defaultMessage:"Go to the comment with this attachment"},goToWorklog:{id:"issue-attachments-base.goto-button.go-to-worklog",defaultMessage:"Go to the work log entry with this attachment"},goToField:{id:"issue-attachments-base.goto-button.go-to-field",defaultMessage:"You can find this attachment in the {field} field"}});function OP(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function jP(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?OP(Object(s),!0).forEach((function(t){EP(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):OP(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function EP(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vP=(e,t)=>e!==pP.a.customfield?e:t&&t.title||"custom field",kP=({attachmentParent:e,attachmentParentId:t,onScrollToComments:s,onScrollToWorklogs:i,attachmentView:r,issueKey:o,component:c})=>{const{formatMessage:l}=Object(Ge.c)(),[,{setScrollTarget:u}]=Object(gP.a)(),[d]=Object(Au.a)(o,`customfield_${t}`),p=e!==pP.a.comment&&e!==pP.a.worklog,m=Object(n.useCallback)((n,a)=>{n.stopPropagation(),n.preventDefault();const o=(e,s)=>{u({type:e,id:t}),s()};switch(e){case pP.a.comment:o(hP.a.COMMENT,s),Object(qi.h)(a,"gotoComment",{view:r});break;case pP.a.worklog:o(hP.a.WORKLOG,i),Object(qi.h)(a,"gotoWorklog",{view:r})}},[e,u,t,s,r,i]),b=Object(n.useCallback)(e=>{"Enter"===e.key&&e.stopPropagation()},[]),f=Object(n.useMemo)(()=>{switch(e){case pP.a.comment:return l(yP.goToComment);case pP.a.worklog:return l(yP.goToWorklog);default:return l(yP.goToField,{field:vP(e,d)})}},[e,d,l]),g=()=>p?{}:"listView"===r?{background:"rgba(9, 30, 66, 0.06)"}:{background:fP.N0};return a.a.createElement(Ae.a,{content:f,position:"top"},a.a.createElement(ci.a,{appearance:"subtle",iconBefore:a.a.createElement(bP.a,{label:f}),onClick:m,onKeyPress:b,theme:(e,t)=>({buttonStyles:jP(jP({},e(t).buttonStyles),{},{display:"flex",justifyContent:"center","&:hover":g(),paddingLeft:"filmStripView"===r?"0px":void 0,paddingRight:"filmStripView"===r?"0px":void 0,margin:"0"})}),isDisabled:p,component:c}))};kP.displayName="GoToButton",kP.defaultProps={component:"button"};var wP=kP,SP=s("./node_modules/@atlaskit/icon/cjs/index.js"),IP=s.n(SP);const CP=()=>a.a.createElement("svg",{viewBox:"0 0 24 24"},a.a.createElement("g",{transform:"translate(3 3)",fill:"currentColor",fillRule:"evenodd"},a.a.createElement("path",{d:"M2 11v5h14v-5H2zM0 1.995C0 .893.893 0 1.995 0h14.01C17.107 0 18 .893 18 1.995v14.01A1.995 1.995 0 0 1 16.005 18H1.995A1.995 1.995 0 0 1 0 16.005V1.995z",fillRule:"nonzero"}),a.a.createElement("rect",{x:"3",y:"12",width:"8",height:"2",rx:"1"}),a.a.createElement("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1"})));CP.displayName="hideIcon";const TP=()=>a.a.createElement("svg",{viewBox:"0 0 24 24"},a.a.createElement("g",{transform:"translate(3 3)",fill:"currentColor",fillRule:"evenodd"},a.a.createElement("path",{d:"M2 11v5h14v-5H2zm0-1V9h14v1-8H2v8zM0 1.995C0 .893.893 0 1.995 0h14.01C17.107 0 18 .893 18 1.995v14.01A1.995 1.995 0 0 1 16.005 18H1.995A1.995 1.995 0 0 1 0 16.005V1.995z",fillRule:"nonzero"}),a.a.createElement("rect",{x:"3",y:"12",width:"8",height:"2",rx:"1"}),a.a.createElement("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1"})));TP.displayName="showIcon";const PP=({icon:e,label:t})=>{const s="show-icon"===e?TP:CP;return(a.a.createElement(Ae.a,{position:"top",content:t},a.a.createElement(IP.a,{glyph:s,label:t,size:"small"})))};PP.displayName="CardCoverIcon";var _P=PP,xP=Object(j.defineMessages)({delete:{id:"attachments.delete-attachment-from-attachment-panel",defaultMessage:"Delete"},goto:{id:"attachments.goto-attachment-from-attachment-panel",defaultMessage:"GoTo"},show:{id:"attachments.show-on-card",defaultMessage:"Show on card"},hide:{id:"attachments.hide-on-card",defaultMessage:"Hide on card"},confirmationHeader:{id:"attachments.confirm-delete-attachment-modal-header",defaultMessage:"Delete this attachment?"},confirmationContent:{id:"attachments.confirm-delete-attachment-modal-text",defaultMessage:"Once you delete, it's gone for good."}});const DP=(e,t,s,n,i,r,c,l,u)=>{const d=i.formatMessage(xP.delete);return t===pP.b?n?[{label:d,handler:()=>c(e),icon:a.a.createElement(dP.a,{label:d})}]:[]:[{label:i.formatMessage(xP.goto),handler:o.a,icon:a.a.createElement(wP,{attachmentParent:t,attachmentParentId:s,attachmentView:"filmStripView",onScrollToComments:l,onScrollToWorklogs:u,issueKey:r,component:"div"})}]},AP=(e,t,s,n,i)=>{const r=Number(e),o=s.formatMessage(xP.hide),c=s.formatMessage(xP.show);return t&&t.isEnabled&&t.availableAttachmentIds.includes(r)?r===t.attachmentId?[{label:o,handler:()=>{i(r)},icon:a.a.createElement(_P,{icon:"hide-icon",label:o})}]:[{label:c,handler:()=>{n(t.attachmentId,r)},icon:a.a.createElement(_P,{icon:"show-icon",label:c})}]:[]};function MP(){return(MP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function LP(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function RP(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const NP={width:156,height:125},UP=e=>a.a.createElement(HT.a,{key:e,dimensions:NP});UP.displayName="fakeCard";const FP=e=>{const[t,s]=Object(n.useState)(0),[i,r]=Object(n.useState)(0),[o,c]=Object(n.useState)([]),[l,u]=Object(n.useState)(!1),{cardCover:d,intl:p,isMobile:m,isPreview:b,mediaContext:f,onCardCoverHide:g,onCardCoverShow:h,onScrollToComments:y,onScrollToWorklogs:O,viewMediaClientConfig:j,onDeleteAttachment:E,canDeleteAttachmentMap:v}=e,k=Object(Du.d)(),[{value:{attachments:w,totalCount:S},meta:{startAt:I},error:C},{refreshAttachments:T}]=Object(IT.a)(k),P=Object(n.useCallback)(({offset:e,offsets:t})=>{c(t),s(e)},[]),_=Object(n.useCallback)(Oj()(T,300),[T]);Object(n.useEffect)(()=>{0===I&&s(0)},[I]);const x=Object(n.useCallback)(({animate:e,offset:t})=>{const n=o.findIndex(e=>e.left>t)-1;u(e),r(n),s(t),_(k,{startAt:n})},[o,_,k]),D=w||[],A=Object(n.useMemo)(()=>D.map(e=>({identifier:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?LP(Object(s),!0).forEach((function(t){RP(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):LP(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({mediaItemType:"file",id:e.mediaApiFileId},f.viewContext&&null!==f.viewContext.collection?{collectionName:f.viewContext.collection}:{}),selectable:!1,actions:((e,t,s,n,a,i,r,o,c,l,u,d)=>[...DP(e,t,s,a,i,r,o,u,d),...AP(e,n,i,c,l)])(e.id,e.parentName,e.parentId,d,v[e.id],p,k,E,h,g,y,O),isLazy:!m})),[D,v,d,p,m,k,f.viewContext,g,h,E,y,O]),M=Object(n.useCallback)(e=>{const t={list:e.map(e=>e.identifier)},s=e.map((e,s)=>b||C?UP(`card-${s}`):a.a.createElement(GT.a,MP({key:e.identifier.id,mediaClientConfig:j,mediaViewerDataSource:t,useInlinePlayer:!1,dimensions:NP,shouldOpenMediaViewer:!0,featureFlags:Object(cP.a)()},e))),n=S-s.length-I,i=Array.from({length:I}).map((e,t)=>UP(`card-${t}`)),r=Array.from({length:n}).map((e,t)=>UP(`card-${S-n+t}`));return[...i,...s,...r]},[I,C,b,S,j]);return C?a.a.createElement(DT,{shouldHideImage:!0,onClick:()=>T(k,{startAt:i})}):a.a.createElement("div",{"data-test-id":"issue.views.issue-base.content.attachment.filmstrip-panel"},a.a.createElement($T.a,{offset:t,animate:l,onSize:P,onScroll:x,mediaClientConfig:j,featureFlags:Object(cP.a)()},M(A)))};FP.displayName="AttachmentFilmstrip";var VP=Nt()([XT,oP,j.injectIntl,Object(Fs.a)(e=>({onCardCoverShow:()=>{e("card-cover-show.click")},onCardCoverHide:()=>{e("card-cover-hide.click")}})),Object(qT.a)({externalId:"issue.attachment.card"}),Object(i.b)(e=>({mediaContext:Object(x.a)(e),isMobile:Object(P.u)(e),cardCover:Object(lP.c)(e)?Object(lP.a)(e):null,isPreview:Object(_.s)(e)}),e=>({onCardCoverShow:(t,s)=>{e(Object(eP.d)(t,s))},onCardCoverHide:t=>{e(Object(eP.d)(t))},onScrollToComments:()=>{e(tP())},onScrollToWorklogs:()=>{e(sP())}})),Object(Hs.a)()])(FP),KP=s("./src/packages/platform/ui/error-boundary/src/index.js"),BP=s("./node_modules/@atlaskit/media-table/dist/esm/component/mediaTable.js"),WP=s("./src/packages/accessibility/src/ui/screenreader-text/styled.js"),HP=s("./src/packages/issue/attachments/issue-attachments-table/src/ui/empty/assets/cloud.svg"),GP=s.n(HP),$P=Object(j.defineMessages)({emptyStateTitle:{id:"issue-attachments-table.empty.empty-state-title",defaultMessage:"All your attachments in one place"},emptyStateDescription:{id:"issue-attachments-table.empty.empty-state-description",defaultMessage:"Attachments can be added to paragraph fields, comments, and worklog entries. When you have attachments on this issue, you can view and download them here."}});const qP=()=>{const{formatMessage:e}=Object(Ge.c)();return(a.a.createElement(Ga.a,{imageUrl:GP.a,header:e($P.emptyStateTitle),description:e($P.emptyStateDescription)}))};qP.displayName="NoAttachments";var zP=qP,YP=Object(j.defineMessages)({fileName:{id:"issue-attachments-table.file-name",defaultMessage:"Name"},size:{id:"issue-attachments-table.size",defaultMessage:"Size"},date:{id:"issue-attachments-table.date",defaultMessage:"Date added"},loadingAriaLabel:{id:"issue-attachments-table.loading-aria-label",defaultMessage:"loading attachments"},loadedAriaLabel:{id:"issue-attachments-table.loaded-aria-label",defaultMessage:"Attachments table loaded. Press tab to enter the table"}}),QP=s("./node_modules/moment/moment.js"),JP=s.n(QP),ZP=s("./node_modules/@atlaskit/media-client/dist/esm/utils/getMediaTypeFromMimeType.js"),XP=s("./node_modules/@atlaskit/media-table/dist/esm/component/nameCell.js"),e_=s("./node_modules/@atlaskit/media-ui/dist/esm/humanReadableSize.js");const t_="date",s_="deleteOrGoto",n_="download",a_="file",i_="size";var r_=Object(j.defineMessages)({delete:{id:"issue-attachments-table.delete-button.delete",defaultMessage:"Delete attachment"}});function o_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o_(Object(s),!0).forEach((function(t){l_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l_(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u_=({attachmentId:e,onDeleteAttachment:t})=>{const s=Object(Ge.c)(),{createAnalyticsEvent:i}=Object(Ey.a)(),r=Object(n.useCallback)(s=>{s.stopPropagation();const n=i({action:"clicked",actionSubject:"button"});Object(qi.h)(n,"deleteAttachment"),t(e)},[e,i,t]),o=Object(n.useCallback)(e=>{"Enter"===e.key&&e.stopPropagation()},[]);return a.a.createElement(ci.a,{appearance:"subtle",iconAfter:a.a.createElement(dP.a,{label:s.formatMessage(r_.delete)}),onClick:r,onKeyPress:o,theme:(e,t)=>({buttonStyles:c_(c_({},e(t).buttonStyles),{},{display:"flex",justifyContent:"center","&:hover":{background:"rgba(9, 30, 66, 0.06)"},margin:"0"})})})};u_.displayName="DeleteButton";var d_=u_;const p_=Q.default.span(["white-space:nowrap;"]),m_=Q.default.div(["margin:0 -","px;min-width:calc(100% + ","px);."," &{opacity:0;}.",":hover &,.",":focus &,.",":focus-within &{opacity:1;}"],J.e,2*J.e,"jira-issue-view-attachments-table","jira-issue-view-attachments-table","jira-issue-view-attachments-table","jira-issue-view-attachments-table");function b_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b_(Object(s),!0).forEach((function(t){g_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g_(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const h_=(e,t)=>a.a.createElement("div",{"aria-label":e},a.a.createElement(p_,{"aria-hidden":!0},a.a.createElement(XP.a,{text:e,mediaType:Object(ZP.a)(t),startFixedChars:3,endFixedChars:4})));h_.displayName="createNameCell";const y_=(e,t,s,n,i,r,o,c,l)=>t===pP.b?n?a.a.createElement(m_,null,a.a.createElement(d_,{attachmentId:e,onDeleteAttachment:i})):null:c?null:a.a.createElement(m_,null,a.a.createElement(wP,{attachmentParent:t,attachmentParentId:s,attachmentView:"listView",onScrollToComments:r,onScrollToWorklogs:o,issueKey:l}));y_.displayName="createDeleteOrGoToCell";const O_=e=>void 0===e||e>=430,j_=Object(Mu.a)((e,t,s,n,a,i,r,o,c)=>{const l=O_(t);return e.map(e=>({data:f_(f_({file:h_(e.filename,e.mimetype),date:JP()(1e3*e.createdDate).locale(s).format("DD MMM YYYY h:mma")},l?{size:Object(e_.a)(e.filesize)}:{}),{},{deleteOrGoto:y_(e.id,e.parentName,e.parentId,a[e.id],n,r,i,o,c)}),identifier:{mediaItemType:"file",id:e.mediaApiFileId}}))}),E_=e=>{const{viewMediaClientConfig:t,onPreviewOpen:s=o.a,onPreviewClose:i=o.a,onDeleteAttachment:r,canDeleteAttachmentMap:c,onScrollToComments:l=o.a,onScrollToWorklogs:u=o.a,isInModal:d=!1}=e,p=Object(Ge.c)(),{createAnalyticsEvent:m}=Object(Ey.a)(),b=Object(n.useRef)(!1),f=Object(Du.d)(),[{error:g,loading:h,meta:y,value:O},j]=Object(IT.a)(f),{orderDirection:E,orderField:v,startAt:k}=y,{attachments:w,totalCount:S}=O,{refreshAttachments:I,setOrderDirection:C,setOrderField:T}=j,P=Object(Mu.a)(Oj()(I,50)),_=Object(n.useMemo)(()=>Math.ceil((k+1)/6),[k]),[x,D]=Object(n.useState)(_),[A,M]=Object(n.useState)(void 0),L=Oj()(M,100),R=Object(n.useCallback)(e=>{b.current=!0,D(e),P(f,{orderDirection:E,orderField:v,startAt:6*(e-1)})},[P,f,E,v]),N=Object(n.useCallback)((e,t)=>{b.current=!0;const s=(e=>{switch(e){case i_:return pP.e.FILESIZE;case a_:return pP.e.FILENAME;default:return pP.e.CREATED}})(e),n=m({action:"sorted",actionSubject:"dynamicTable"});T(s),C(t),Object(qi.h)(n,"sortAttachments",{key:e}),P(f,{orderDirection:t,orderField:s})},[m,P,f,C,T]),U=Object(Kk.k)();if(g)return a.a.createElement(DT,{shouldHideImage:e.shouldHideErrorImage,onClick:()=>I(f,{orderDirection:E,orderField:v,startAt:6*(_-1)})});if(0===S)return a.a.createElement(zP,null);const F=j_(w||[],A,U,r,c,u,l,d,f),V=((e,{formatMessage:t})=>({cells:[{key:a_,content:a.a.createElement(p_,null,t(YP.fileName)),isSortable:!0},...O_(e)?[{key:i_,content:t(YP.size),isSortable:!0,inlineStyles:{width:"66px"}}]:[],{key:t_,content:t(YP.date),isSortable:!0,inlineStyles:{width:"188px"}},{key:s_,content:"",inlineStyles:{width:"36px"},width:10},{key:n_,content:"",inlineStyles:{width:"48px"}}]}))(A,p),K=(e=>{switch(e){case pP.e.FILESIZE:return i_;case pP.e.FILENAME:return a_;case pP.e.CREATED:return t_;default:return}})(v);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Li.a,{offscreen:!0,setWidth:e=>{L(e)}}),h&&a.a.createElement(a.a.Fragment,null,b.current&&a.a.createElement(WP.a,{"aria-live":"assertive"},p.formatMessage(YP.loadingAriaLabel)),a.a.createElement(BT,{pageNumber:x,totalCount:S})),!h&&a.a.createElement(a.a.Fragment,null,b.current&&a.a.createElement(WP.a,{"aria-live":"assertive"},p.formatMessage(YP.loadedAriaLabel)),a.a.createElement(BP.a,{items:F,mediaClientConfig:t,columns:V,itemsPerPage:6,totalItems:S||0,pageNumber:_,onSetPage:R,onSort:N,sortKey:K,sortOrder:E,onPreviewOpen:s,onPreviewClose:i,rowProps:{className:"jira-issue-view-attachments-table"}})))};E_.defaultProps={shouldHideErrorImage:!1};var v_=XT(E_,"listView");const k_=Q.default.div(["padding:","px;min-width:","px;position:relative;table{width:100%;}"],J.e/2,37*J.e),w_=({viewMediaClientConfig:e,onScrollToWorklogs:t,onScrollToComments:s})=>a.a.createElement(KP.b,{id:"issue.details.attachment.list-view"},a.a.createElement(k_,null,a.a.createElement(v_,{shouldHideErrorImage:!0,viewMediaClientConfig:e,onScrollToWorklogs:t,onScrollToComments:s})));w_.displayName="ListView";const S_=oP(w_);var I_=Object(i.b)(e=>({issueKey:Object(P.B)(e),mediaContext:Object(x.a)(e)}),e=>({onScrollToComments:()=>e(tP()),onScrollToWorklogs:()=>e(sP())}))(S_);var C_=({attachmentError:e,refreshAttachments:t,isPreview:s,totalCount:i})=>{const[r]=Object(WT.b)("jira.user.issue.attachment.view"),o=Object(Du.d)(),c=Object(n.useCallback)(()=>{t(o)},[o,t]);if(e)return a.a.createElement(DT,{shouldHideImage:!0,onClick:c});switch(r){case"list-view":return s?a.a.createElement(BT,{totalCount:i}):a.a.createElement(I_,null);case"strip-view":default:return a.a.createElement(VP,null)}},T_=Object(i.b)(e=>({isPreview:Object(_.s)(e)}),{})(C_),P_=s("./src/packages/issue/issue-view/src/selectors/attachment-selector.js"),__=s("./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js"),x_=Object(j.defineMessages)({title:{id:"attachments.heading.title",defaultMessage:"Attachments {totalCount}"},attachmentsMenuAriaLabel:{id:"attachments.heading.attachmentsMenuLabel",defaultMessage:"Attachments Menu"},addAttachmentAriaLabel:{id:"attachments.heading.addAttachmentLabel",defaultMessage:"Add Attachment"}});const D_=Q.default.div(["margin-left:","px;"],.75*J.e),A_=({canCreateAttachment:e,onClick:t})=>{const{createAnalyticsEvent:s}=Object(Ey.a)(),{formatMessage:i}=Object(Ge.c)(),r=Object(n.useCallback)(()=>{t();const e=s({action:"clicked",actionSubject:"button"});Object(qi.h)(e,"addAttachment")},[s,t]);return e?a.a.createElement(D_,null,a.a.createElement(__.a,{label:i(x_.addAttachmentAriaLabel),onClick:r})):null};A_.displayName="AddAttachments";var M_=Object(i.b)(e=>({canCreateAttachment:!Object(P.v)(e)&&Object(P_.b)(e)}),e=>({onClick:()=>e(Object(rn.b)())}))(A_),L_=s("./node_modules/file-saver/FileSaver.js"),R_=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),N_=s("./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js"),U_=s("./src/packages/issue/attachments/issue-attachments-base/src/services/index.js");const F_=Object(k.c)(U_.a,{selector:e=>e.isDownloading});var V_=Object(j.defineMessages)({downloadAll:{id:"attachments.heading.download-all",defaultMessage:"Download all"},downloading:{id:"attachments.heading.downloading",defaultMessage:"Downloading attachments"}});const K_=Object(n.memo)(e=>{const{issueId:t,issueKey:s}=e,{formatMessage:i}=Object(Ge.c)(),{createAnalyticsEvent:r}=Object(Ey.a)();if(!t)return null;const[{value:{totalCount:o}}]=Object(IT.a)(s),[c,l]=((e,t)=>{const s=`${t}_attachments.zip`,[a,{setIsDownloading:i}]=F_({issueKey:t}),r=`${Object(Kk.e)()}/secure/issueAttachments/${e}.zip`,{createAnalyticsEvent:o}=Object(Ey.a)(),{showFlag:c,dismissFlag:l}=Object(Bs.useFlagsService)(),u=Object(n.useRef)();let d=Object(n.useCallback)(()=>{},[]);const p=Object(n.useCallback)(()=>{u.current&&l(u.current)},[l]),m=Object(n.useCallback)((e,s)=>{let n=null,a=e.toString();e instanceof R_.b&&(n=e.statusCode,a=e.message),i(t,!1),Object(Pv.a)({error:e,meta:{id:s,packageName:"jiraIssueAttachmentsBase",teamName:"bento"}}),ja.i.safeError("issue.attachments.download-all",a);const r=500===n?N_.a.downloadFailedExceedFileSizeDescription:N_.a.downloadFailedDescription;u.current=c({type:"error",title:N_.a.downloadFailedTitle,description:[r,{issueKey:t}],actions:[{onClick:d,content:N_.a.tryAgain}]})},[t,d,i,c]),b=Object(n.useCallback)(async()=>{i(t,!0),Object(qi.b)(o({}),"downloadAll requested"),c({type:"success",title:N_.a.downloadStartTitle,description:N_.a.downloadStartDescription,isAutoDismiss:!0}),fetch(r).then(e=>{if(!e.ok)throw new R_.b(e.status,e.statusText);return Object(qi.b)(o({}),"downloadAll started"),e.blob()}).then(e=>{try{Object(L_.saveAs)(e,s),i(t,!1),Object(qi.b)(o({}),"downloadAll completed")}catch(e){m(e,"useDownloadAllService-save-file")}}).catch(e=>m(e,"useDownloadAllService-fetch"))},[o,s,t,m,r,i,c]);return d=Object(n.useCallback)(()=>{b(),p()},[b,p]),[a,b]})(t,s),u=Object(n.useCallback)(()=>{l();const e=r({action:"clicked",actionSubject:"dropdownItem"});Object(qi.h)(e,"downloadAllAttachments")},[r,l]);return a.a.createElement(dr.a,{key:"download-all-attachments",onClick:u,elemAfter:a.a.createElement($e.a,null,o),isDisabled:c},i(c?V_.downloading:V_.downloadAll))});var B_=Object(i.b)(e=>({issueId:Object(P.A)(e),issueKey:Object(P.B)(e)}),{})(K_),W_=s("./src/packages/issue/user-preferences-services/src/feature-flags.js"),H_=Object(j.defineMessages)({switchToListView:{id:"attachments.heading.switch-to-listView",defaultMessage:"Switch to list view"},switchToStripView:{id:"attachments.heading.switch-to-strip-view",defaultMessage:"Switch to strip view"}});var G_=Object(n.memo)(({refreshAttachments:e})=>{const t=Object(Du.d)(),{formatMessage:s}=Object(Ge.c)(),[i,r]=Object(WT.b)("jira.user.issue.attachment.view"),{createAnalyticsEvent:o}=Object(Ey.a)(),c=Object(n.useCallback)(s=>()=>{Object(W_.a)()&&"function"!=typeof r?r.setValue(s):"function"==typeof r&&r(s),e(t);const n=o({action:"clicked",actionSubject:"dropdownItem"});Object(qi.h)(n,"switchAttachmentsView",{view:s})},[o,t,e,r]);switch(i){case"list-view":return a.a.createElement(dr.a,{onClick:c("strip-view")},s(H_.switchToStripView));case"strip-view":default:return a.a.createElement(dr.a,{onClick:c("list-view")},s(H_.switchToListView))}});var $_=({refreshAttachments:e,isPreview:t})=>{const{formatMessage:s}=Object(Ge.c)();return(a.a.createElement(a.a.Fragment,null,a.a.createElement(JC.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:a.a.createElement(XC.a,{size:"small",label:s(x_.attachmentsMenuAriaLabel)}),isDisabled:t},position:"bottom right"},a.a.createElement(ar.a,null,a.a.createElement(G_,{refreshAttachments:e}),a.a.createElement(B_,null))),a.a.createElement(Sn.a,{onMount:e=>Object(qi.b)(e,"AttachmentListViewOnboarding mounted")})))},q_=Object(i.b)(e=>({isPreview:Object(_.s)(e)}),{})($_);var z_=({totalCount:e,refreshAttachments:t})=>{const{formatMessage:s}=Object(Ge.c)();return(a.a.createElement(a.a.Fragment,null,a.a.createElement(Ki.e,null,s(x_.title,{totalCount:e>0?`(${e})`:""})),a.a.createElement(Ki.d,null,a.a.createElement(q_,{refreshAttachments:t}),a.a.createElement(M_,null))))};const Y_=()=>{const e=Object(Du.d)(),[{error:t,value:{totalCount:s}},{refreshAttachments:n}]=Object(IT.a)(e);return 0===s?null:a.a.createElement("div",{"data-test-id":"issue.views.issue-base.content.attachment.panel"},a.a.createElement(Ki.c,null,a.a.createElement(z_,{totalCount:s,refreshAttachments:n})),a.a.createElement(T_,{attachmentError:t,totalCount:s,refreshAttachments:n}))};Y_.displayName="Attachments";var Q_=Y_;const J_=()=>({type:"SUBTASK_QUICK_ADD_CLICKED"}),Z_=()=>({type:"ISSUE_IN_EPIC_QUICK_ADD_CLICKED"}),X_=()=>({type:"CHILD_ISSUE_QUICK_ADD_CLICKED"}),ex=e=>({type:"CHILD_ISSUE_ADD_SUCCESS",payload:{childIssue:e}}),tx=()=>({type:"CHILD_ISSUE_PANEL_ADD_CLICKED"});var sx=s("./src/packages/issue/issue-view/src/actions/prefetch-issues-actions.js");const nx=Object(Xn.createSelector)(_.I,e=>e.childPanel),ax=Object(Xn.createSelector)(nx,e=>e.subtaskQuickAddClickCount),ix=Object(Xn.createSelector)(nx,e=>e.issueInEpicQuickAddClickCount),rx=Object(Xn.createSelector)(nx,e=>e.childIssueQuickAddClickCount);var ox=s("./src/packages/issue/issue-view/src/selectors/children-issues-selector.js");const cx={CHILD_ISSUE_ADDED:"CHILD_ISSUE_ADDED",ISSUE_CHILDREN_ORDER_CHANGED:"ISSUE_CHILDREN_ORDER_CHANGED"};var lx=s("./src/packages/platform/utils/app-base/src/index.js"),ux=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),dx=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-shallow-equal.js"),px=s("./src/packages/platform/services/issue/src/components/context/consumer.js");const mx=()=>Object(ja.c)("jsw.issue.issue-view.child-issues-panel.label-for-linked-issues",!1),bx=()=>Object(ja.b)("issue.details.bento-6541-rollup-subtasks-time-estimates-phase2",!1);var fx=Object(j.defineMessages)({linkParentErrorTitle:{id:"issue.views.common.child-issues-panel.flags.link-parent-error-title",defaultMessage:"We couldn't link the child issue"},linkParentErrorDescription:{id:"issue.views.common.child-issues-panel.flags.link-parent-error-description",defaultMessage:"The issue was created but the linking failed. Head over to your board and try again."},reorderErrorTitle:{id:"issue.views.common.child-issues-panel.flags.reorder-error-title",defaultMessage:"We couldn't reorder those issues"},reorderErrorDescription:{id:"issue.views.common.child-issues-panel.flags.reorder-error-description",defaultMessage:"Wait a few moments, then give it another try."}}),gx=e=>{switch(e.type){case"state.entities.LINK_PARENT_FAILURE":return{type:"error",title:fx.linkParentErrorTitle,description:fx.linkParentErrorDescription};case"state.entities.REORDER_CHILDREN_FAILED":return{type:"error",title:fx.reorderErrorTitle,description:fx.reorderErrorDescription};default:return}};function hx(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function yx(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?hx(Object(s),!0).forEach((function(t){Ox(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):hx(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ox(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function jx(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Ex=["summary","issuetype","parent","project"],vx=e=>!!Object.keys(e).find(t=>!(e=>Ex.find(t=>e===t))(t)&&!e[t].hasDefaultValue&&e[t].required),kx=(e,t)=>{const{fields:s}=e,n=jx(e,["fields"]),a=!!s&&vx(s),i=!!s&&Object.keys(s).includes(t);return yx(yx({},n),{},{hasRequiredField:a,hasEpicLinkField:i})};var wx=s("./node_modules/redux-observable/lib/es/index.js");const Sx=e=>e.context,Ix=e=>e.entities,Cx=e=>e.ui,Tx=Object(Xn.createSelector)(Ix,e=>e.issues||[]),Px=Object(Xn.createSelector)(Tx,e=>e.filter(e=>"DONE"===e.statusCategory)),_x=Object(Xn.createSelector)(Tx,e=>e.filter(e=>"DONE"!==e.statusCategory)),xx=Object(Xn.createSelector)(Tx,e=>e.filter(e=>"IN_PROGRESS"===e.statusCategory)),Dx=Object(Xn.createSelector)(Ix,e=>e.issueHierarchyLevel),Ax=e=>Object(Xn.createSelector)(Tx,t=>Us()(t,t=>t.id===e)),Mx=Object(Xn.createSelector)(Ix,e=>e.issueTypes),Lx=Object(Xn.createSelector)(Mx,e=>`issuetype in (${e.map(e=>e.id).join(",")})`),Rx=Object(Xn.createSelector)(Cx,e=>e.addClickCount),Nx=Object(Xn.createSelector)(Cx,e=>e.childPanelView),Ux=Object(Xn.createSelector)(Cx,e=>e.childCreateSummary),Fx=Object(Xn.createSelector)(Cx,Mx,(e,t)=>e.selectedIssueType||t[0]),Vx=Object(Xn.createSelector)(Cx,e=>e.hideDone),Kx=Object(Xn.createSelector)(Cx,e=>e.fetchIssueTypesStatus),Bx=Object(Xn.createSelector)(Kx,e=>"COMPLETE"===e),Wx=Object(Xn.createSelector)(Sx,e=>e.baseUrl),Hx=(Object(Xn.createSelector)(Sx,e=>e.locale),Object(Xn.createSelector)(Sx,e=>e.childIssuesPanelType)),Gx=Object(Xn.createSelector)(Hx,e=>!!e&&"classicSubtasks"===e),$x=Object(Xn.createSelector)(Hx,e=>!!e&&"classicProjectEpicChildren"===e),qx=Object(Xn.createSelector)(Hx,e=>!!e&&"nextGenChildren"===e),zx=Object(Xn.createSelector)(Sx,e=>e.supportsIssueCreation),Yx=Object(Xn.createSelector)(Sx,Bx,(e,t)=>e.requiresFullCreate||!t),Qx=Object(Xn.createSelector)(Sx,e=>e.parentKey),Jx=Object(Xn.createSelector)(Sx,e=>e.parentId),Zx=Object(Xn.createSelector)(Sx,e=>e.customFieldIdRank),Xx=Object(Xn.createSelector)(Sx,e=>e.epicLinkFieldKey),eD=Object(Xn.createSelector)(Sx,e=>e.projectId),tD=Object(Xn.createSelector)(Sx,e=>e.messages||{}),sD=Object(Xn.createSelector)(tD,e=>e.title),nD=Object(Xn.createSelector)(tD,e=>e.noValueText||null),aD=Object(Xn.createSelector)(Sx,e=>e.onNavigateToNewIssue),iD=Object(Xn.createSelector)(Sx,e=>e.onChange),rD=(Object(Xn.createSelector)(Sx,e=>e.isIssueViewComplete),Object(Xn.createSelector)(Sx,e=>null===e.user||""===e.user)),oD=Object(Xn.createSelector)(Sx,e=>e.projectType),cD=Object(Xn.createSelector)(Sx,e=>e.application),lD=Object(Xn.createSelector)(Sx,e=>e.edition);var uD=(e,t)=>e.ofType("state.entities.CREATE_CHILD_SUCCESS","state.entities.LINK_CHILD_SUCCESS","state.entities.REORDER_CHILDREN_REQUEST","state.entities.REORDER_CHILDREN_FAILED").do(e=>{try{const s=t.getState(),n=iD(s),a=Hx(s);switch(e.type){case"state.entities.CREATE_CHILD_SUCCESS":n({type:cx.CHILD_ISSUE_ADDED,meta:{childIssue:e.payload.createdChild}});break;case"state.entities.LINK_CHILD_SUCCESS":n({type:cx.CHILD_ISSUE_ADDED,meta:{childIssue:e.payload.linkedChild}});break;case"state.entities.REORDER_CHILDREN_REQUEST":{const{currentOrder:t,newOrder:s,currentIndex:i,newIndex:r}=e.payload,{id:o}=t[i],c=o?[Object(vr.j)(o)]:[],l=r>i,u=Number((s[l?r-1:r+1]||{}).id);"nextGenChildren"===a&&n({type:cx.ISSUE_CHILDREN_ORDER_CHANGED,meta:{issueIds:c,rankId:u,isRankAfter:l}});break}case"state.entities.REORDER_CHILDREN_FAILED":{const{originalOrder:t,originalIndex:s,newIndex:i}=e.payload,{id:r}=t[s],o=r?[Object(vr.j)(r)]:[],c=s>i,l=Number((t[c?s-1:s+1]||{}).id);"nextGenChildren"===a&&l&&n({type:cx.ISSUE_CHILDREN_ORDER_CHANGED,meta:{issueIds:o,rankId:l,isRankAfter:c}});break}}}catch(e){ja.i.safeError("issue.views.common.child-issues-panel.change-notification","Failed to call onChange callback",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))}}).ignoreElements(),dD=s("./node_modules/rxjs/Rx.js");const pD=(e,t)=>({type:"state.entities.CREATE_CHILD_REQUEST",payload:{optimisticUiChildIssue:e},meta:{analyticsEvent:t}}),mD=(e,t,s,n=!1)=>({type:"state.entities.CREATE_CHILD_SUCCESS",payload:{optimisticId:e,createdChild:t,usedGlobalCreateDialog:n},meta:{analyticsEvent:s}}),bD=(e,t,s)=>({type:"state.entities.LINK_CHILD_SUCCESS",payload:{issueId:e,linkedChild:t},meta:{analyticsEvent:s}}),fD=e=>({type:"state.entities.LINKING_ISSUE_RETRY_FAILURE",payload:{issueId:e}}),gD=e=>({type:"state.entities.FETCH_SINGLE_CHILD_SUCCESS",payload:{childIssue:e}}),hD=()=>({type:"state.entities.FETCH_DETAILS_FOR_ISSUES_REQUEST"}),yD=(e,t,s,n)=>({type:"state.entities.REORDER_CHILDREN_FAILED",payload:{originalOrder:e,newOrder:t,originalIndex:s,newIndex:n}}),OD=e=>({type:"state.entities.REORDER_CHILDREN_SUCCESS",payload:{newOrder:e}});var jD=(e,t)=>e.ofType("state.entities.CHILD_CREATED_IN_FULL_DIALOG").mergeMap(({payload:e,meta:s})=>{const n=t.getState(),{optimisticId:a,createdChild:i}=e;if(!qx(n))return dD.Observable.of(mD(a,i,s.analyticsEvent,!0));const r=Wx(n),o=eD(n),c=Jx(n);if(!o||!c)throw new Error("Attempted to link a child issue without a project or parent issue ID");return dD.Observable.from(((e,t,s,n)=>Object(Bu.d)(`${e}/rest/internal/simplified/1.0/projects/${t}/issues/${s}/children`,{body:JSON.stringify({issueIds:[n]})}))(r,o,c,i.id)).map(()=>mD(a,i,s.analyticsEvent,!0)).catch(e=>dD.Observable.of(((e,t="")=>({type:"state.entities.LINK_PARENT_FAILURE",payload:{optimisticId:e,errorReason:`LINK_PARENT${t?`: ${t}`:""}`}}))(a,e.message)))}),ED=(e,t)=>e.ofType("state.entities.CREATE_CHILD_FAILURE","state.entities.LINK_PARENT_FAILURE","state.entities.LINKING_ISSUE_FAILURE").do(({type:e,payload:{errorName:s,errorReason:n}})=>{const a=t.getState(),i=Hx(a)||"unknown_child",r=cD(a),o=lD(a);"state.entities.CREATE_CHILD_FAILURE"===e&&"ValidationError"===s?Object(Oa.a)({experience:"createIssue",wasExperienceSuccesful:!0,analyticsSource:i,application:r,edition:o}):"TypeError"!==s&&"AbortError"!==s&&Object(Oa.a)({experience:"createIssue",wasExperienceSuccesful:!1,analyticsSource:i,application:r,edition:o,additionalAttributes:{errorMessage:n}})}).switchMap(()=>dD.Observable.empty());const vD=(e,t,s)=>Object(Bu.e)(`${e}/rest/greenhopper/1.0/epics/${t}/add`,{body:JSON.stringify({ignoreEpics:!0,issueKeys:[s]})});var kD=(e,t,s)=>((e,t)=>Object(Bu.d)(`${e}/rest/api/2/issue`,{body:JSON.stringify(t)}))(e,t).then(t=>({id:t.id,issueKey:t.key,issueLink:`${e}/browse/${t.key}`,issueSummary:s.issueSummary,issueTypeIconUrl:s.issueTypeIconUrl,issueTypeName:s.issueTypeName,assigneeUrl:s.assigneeUrl,assigneeDisplayName:s.assigneeDisplayName,isLoading:!1,errorType:void 0}));function wD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function SD(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wD(Object(s),!0).forEach((function(t){ID(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wD(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ID(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var CD=(e,t)=>e.ofType("state.entities.CREATE_CHILD_REQUEST").mergeMap(({payload:e,meta:s})=>{const n=t.getState(),{optimisticUiChildIssue:a}=e;return((e,t,s)=>{const n=Wx(e),a=eD(e),i=Jx(e),r=Gx(e),o=qx(e),c=$x(e),l=Fx(e);if(!a||!i)throw new Error("Attempted to create a new child issue without a project or parent issue ID");const u=r||o,{hasEpicLinkField:d}=l,p=c&&d,m=Xx(e),b={fields:SD(SD({project:{id:a},issuetype:{id:t.issueTypeId},summary:t.issueSummary},u?{parent:{id:i}}:{}),p&&m?{[m]:Qx(e)}:{})};return dD.Observable.from(kD(n,b,t)).mergeMap(e=>c&&!d?dD.Observable.from(vD(n,i,e.id)).map(()=>mD(t.id,e,s)).catch(s=>dD.Observable.of(((e,t,s="")=>({type:"state.entities.LINKING_ISSUE_FAILURE",payload:{createdChild:e,optimisticId:t,errorReason:`CLASSIC_EPIC_LINK${s?`: ${s}`:""}`}}))(e,t.id,s.message))):dD.Observable.of(mD(t.id,e,s))).catch(e=>dD.Observable.of(((e,t="",s="")=>({type:"state.entities.CREATE_CHILD_FAILURE",payload:{optimisticId:e,errorName:t,errorReason:`CREATE${s?`: ${s}`:""}`}}))(t.id,e.name,e.message)))})(n,a,s.analyticsEvent)});function TD(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var PD=(e,t)=>e.ofType("state.entities.CREATE_CHILD_RETRY").map(({payload:{optimisticId:e},meta:s})=>{const n=t.getState(),a=Ax(e)(n),{isLoading:i,hasError:r}=a,o=TD(a,["isLoading","hasError"]);return pD(o,s.analyticsEvent)}),_D=s("./src/packages/platform/utils/constants/src/status-categories.js"),xD=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const DD=(e,t)=>{const s=e.get(t);return s?s.value:void 0};var AD=(e,t,s)=>((e,t)=>e.getIssue$(t,!0).toPromise().then(({error:e,issue:t})=>e?Promise.reject(e):t?Promise.resolve(t):Promise.reject(new Error("Unexpected response from the dataprovider, expected an issue or an error but got neither"))))(e,s).then(e=>{const{id:s,key:n,fields:a}=e,i=DD(a,"summary"),r=DD(a,"issuetype"),o=DD(a,"priority"),c=DD(a,"status"),l=DD(a,"assignee")||null;return{id:s?s.toString():"",issueKey:n,issueLink:Object(gy.g)(Object(vr.b)(t),Object(vr.l)(n)),issueSummary:i,issueTypeIconUrl:r&&r.iconUrl,issueTypeName:r&&r.name,issuePriorityUrl:o&&o.iconUrl,issuePriorityName:o&&o.name,statusName:c&&c.name,statusId:c&&c.id,statusCategory:c&&Object(_D.statusCategoryForId)(c.statusCategory.id),statusCategoryId:c&&c.statusCategory.id,assigneeUrl:l&&Object(xD.c)(l).avatarUrl,assigneeDisplayName:l&&l.displayName,errorType:void 0,isLoading:!1}}),MD=s("./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js"),LD=(e,t)=>((e,t)=>Object(MD.b)(e,t,["assignee"]).toPromise())(e,t).then(e=>e.map(({id:e,fields:t})=>({id:e,assigneeUrl:t&&t.assignee&&Object(xD.c)(t.assignee).avatarUrl,assigneeDisplayName:t&&t.assignee&&Object(xD.c)(t.assignee).displayName}))),RD=(e,t)=>e.ofType("state.entities.FETCH_DETAILS_FOR_ISSUES_REQUEST").switchMap(()=>{const e=t.getState(),s=Wx(e),n=Tx(e).map(e=>e.issueKey).filter(e=>void 0!==e);return dD.Observable.from(LD(s,n)).map(e=>(e=>({type:"state.entities.FETCH_DETAILS_FOR_ISSUES_SUCCESS",payload:{issues:e}}))(e)).catch(e=>(ja.i.safeError("issue.views.common.child-issues-panel.fetch-details-for-issues","Failed to fetch details for issues",new p.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),dD.Observable.empty()))});const ND=(e,t,s)=>{const n=Wx(t),a=Jx(t),i=Ax(e)(t);if(!a)throw new Error("Attempted to link a next-gen issue to a parent without issue ID ");return dD.Observable.from(((e,t,s)=>Object(Bu.e)(`${e}/rest/api/3/issue/${s}`,{body:JSON.stringify({fields:{parent:{id:t}}})}))(n,a,e)).map(()=>bD(e,i,s)).catch(t=>(ja.i.safeError("issue.views.common.child-issues-panel.add-existing-issue","Failed to link a next-gen issue to a parent",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),dD.Observable.of(fD(e))))};var UD=Object(wx.combineEpics)((e,t)=>e.ofType("state.entities.LINKING_ISSUE_RETRY").mergeMap(({payload:{issueId:e},meta:{analyticsEvent:s}})=>{const n=t.getState();switch(Hx(n)){case"classicProjectEpicChildren":{const t=Wx(n),a=Jx(n),i=Ax(e)(n);if(!a)throw new Error("Attempted to link a classic issue to an epic without a parent issue ID");return dD.Observable.from(vD(t,a,e)).map(()=>bD(e,i,s)).catch(t=>(ja.i.safeError("issue.views.common.child-issues-panel.link-child-issue","Failed to link a classic issue to a parent",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),dD.Observable.of(fD(e))))}case"nextGenChildren":return ND(e,n,s);default:return dD.Observable.empty()}}),(e,t)=>e.ofType("state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST").mergeMap(({payload:{issueId:e},meta:{analyticsEvent:s}})=>{const n=t.getState();switch(Hx(n)){case"nextGenChildren":return ND(e,n,s);default:return dD.Observable.empty()}})),FD=(e,t)=>{const{id:s,key:n,fields:a}=e;return{id:s,issueKey:n,issueLink:Object(gy.g)(Object(vr.b)(t),Object(vr.l)(n)),issueSummary:a.summary,issueTypeIconUrl:a.issuetype.iconUrl,issueTypeName:a.issuetype.name,issuePriorityUrl:a.priority&&a.priority.iconUrl||void 0,issuePriorityName:a.priority&&a.priority.name||void 0,statusCategory:Object(_D.statusCategoryForId)(a.status.statusCategory.id),statusCategoryId:a.status.statusCategory.id,statusName:a.status.name,statusId:a.status.id,assigneeUrl:a.assignee&&Object(xD.c)(a.assignee).avatarUrl,assigneeDisplayName:a.assignee&&Object(xD.c)(a.assignee).displayName,isLoading:!1,errorType:void 0}},VD=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),KD=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js");const BD=e=>VD.a`query {
      issue(issueIdOrKey: "${e}", latestVersion: true, screen:"view", fields:"subtasks") {
        fields {
          key
          value
        }
      }
    }`,WD=e=>{if(!e||!e.data||!e.data.issue)return[];const t=e.data.issue.fields.find(e=>"children-issues"===e.key);return t&&t.value?t.value.map(({id:e,key:t,self:s,fields:{assignee:n,issuetype:a,priority:i,summary:r,status:o}})=>({id:e,key:t,self:s,fields:{issueType:a,priority:i,status:o,summary:r,assignee:n}})):[]};var HD=(e,t)=>((e,t)=>Object(KD.a)((e=>`${e}/rest/graphql/1/`)(e),{method:"POST",body:JSON.stringify({query:BD(t)})}))(e,t).map(WD),GD=s("./src/packages/platform/utils/fetch/src/utils/as-text-stream.js");var $D=(e,t,s,n)=>((e,t,s,n)=>Object(GD.a)((e=>`${e}/rest/greenhopper/1.0/api/rank/after`)(e),{method:"PUT",body:JSON.stringify({customFieldId:t,issueIds:s,rankAfterId:n})}))(e,t,s,n);var qD=(e,t,s,n)=>((e,t,s,n)=>Object(GD.a)((e=>`${e}/rest/greenhopper/1.0/api/rank/before`)(e),{method:"PUT",body:JSON.stringify({customFieldId:t,issueIds:s,rankBeforeId:n})}))(e,t,s,n);function zD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function YD(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?zD(Object(s),!0).forEach((function(t){QD(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zD(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function QD(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var JD=s("./src/packages/platform/utils/fetch/src/utils.js"),ZD=(e,t)=>((e,t)=>Object(Bu.b)(`${e}/rest/api/2/issue/${t}?fields=subtasks`))(e,t).then(e=>{const t=e&&e.fields;return t&&t.subtasks||[]});function XD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function eA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?XD(Object(s),!0).forEach((function(t){tA(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):XD(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function tA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var sA=(e,t)=>{const s=Wx(e),n=Jx(e);if(!n)throw new Error("Attempted to reorder subtasks without parentId");const{currentOrder:a,newOrder:i,currentIndex:r,newIndex:o}=t;return dD.Observable.from(((e,t,s,n)=>{const a=`${e}/secure/MoveSubtask.jspa?id=${t}&currentSubTaskSequence=${s}&subTaskSequence=${n}&atl_token=${Object(QO.a)()||""}`;return fetch(a).then(e=>e.ok?null:e.text().then(t=>{throw new JD.a(e.status,t)}))})(s,n,r,o)).switchMap(()=>ZD(s,n)).flatMap((e=[])=>{const t=e.map(({id:e})=>e),n=i.map(({id:e})=>e);if(Di()(t,n))return dD.Observable.of(OD(i));if(Di()(t.slice().sort(),n.slice().sort())){const e=t.map(e=>i.find(t=>t.id===e));return dD.Observable.of(OD(e))}const a=e.map(e=>{const{id:t}=e;return eA(eA({},i.find(e=>e.id===t)||{}),FD(e,s))});return dD.Observable.of(OD(a),hD())}).catch(e=>(ja.i.safeError("issue.views.common.child-issues-panel.reorder-subtask","Failed to reorder subtasks",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),dD.Observable.of(yD(a,i,r,o))))},nA=(e,t)=>e.ofType("state.entities.REORDER_CHILDREN_REQUEST").mergeMap(e=>{const s=t.getState();switch(Hx(s)){case"classicSubtasks":return sA(s,e.payload);case"nextGenChildren":return((e,t,s)=>{const n=Wx(e),a=Jx(e),i=Zx(e);if(!a)throw new Error("Attempted to reorder children without parentId");if(!i)throw new Error("Attempted to reorder children without customFieldId");const{currentOrder:r,newOrder:o,currentIndex:c,newIndex:l}=t,{analyticsEvent:u}=s,{id:d}=r[c],m=d?[+d]:[],b=l>c,f=Number((o[b?l-1:l+1]||{}).id);if(!f)throw new Error("Attempted to reorder children without rankId");return(b?$D(n,i,m,f):qD(n,i,m,f)).switchMap(()=>HD(n,a)).flatMap((e=[])=>{const t=e.map(({id:e})=>e),s=o.map(({id:e})=>e);if(Object(qi.f)(u,"issueRank updated",{numIssues:1,previousIssueIndex:c,currentIssueIndex:l,isRankAfter:b}),Di()(t,s))return dD.Observable.of(OD(o));if(Di()([...t].sort(),[...s].sort())){const e=t.map(e=>o.find(t=>t.id===e));return dD.Observable.of(OD(e))}const a=e.map(e=>{const{id:t}=e;return YD(YD({},o.find(e=>e.id===t)||{}),FD(e,n))});return dD.Observable.of(OD(a),hD())}).catch(e=>(ja.i.safeError("issue.views.common.child-issues-panel.reorder-children","Failed to reorder children",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),dD.Observable.of(yD(r,o,c,l))))})(s,e.payload,e.meta);default:return dD.Observable.empty()}});const aA=e=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK_SUCCESS",payload:{requiresFullCreate:e}}),iA=()=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK_FAILED"});var rA=(e,t)=>t?dD.Observable.from(((e,t)=>Object(Bu.b)(`${e}/rest/internal/2/project/${t}/hasValidatorsOnSubtasks`))(e,t)).map(e=>aA(e)).catch(e=>(Object(so.a)("issue.views.common.child-issues-panel.has-validators-on-subtasks","Failed to check if project has validators on subtasks",e,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),dD.Observable.of(iA()))):dD.Observable.of(iA()),oA=(e,t)=>e.ofType("state.context.REQUIRES_FULL_CREATE_CHECK").switchMap(()=>{const e=t.getState();switch(Hx(e)){case"classicSubtasks":{const t=Wx(e),s=eD(e);return rD(e)?dD.Observable.of(aA(!0)):rA(t,s)}default:return dD.Observable.empty()}}),cA=e=>Object(wx.combineEpics)(CD,(e=>(t,s)=>t.ofType("state.entities.CREATE_CHILD_SUCCESS").do(({payload:{createdChild:e,usedGlobalCreateDialog:t},meta:n})=>{const a=s.getState(),i=Gx(a),r={action:"created",actionSubjectId:e.id,attributes:{isInlineCreatedOnIssue:!0,isClassicSubtask:i}};Object(f.a)(n.analyticsEvent,r);const o=Hx(a)||"unknown_child",c=cD(a),l=lD(a);Object(Oa.a)({experience:"createIssue",wasExperienceSuccesful:!0,analyticsSource:o,application:c,edition:l,additionalAttributes:{isCreated:!0,wasCreatedInline:!t}})}).switchMap(({payload:{createdChild:t}})=>{const n=s.getState(),a=Wx(n);return dD.Observable.from(AD(e,a,t.issueKey)).map(e=>gD(e)).catch(e=>(ja.i.safeError("issue.views.common.child-issues-panel.create-child-success.fetch-single-issue","Failed to fetch single issue after a successful create",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),dD.Observable.empty()))}))(e),ED,PD,RD,jD,oA,nA,uD,UD,(e=>(t,s)=>t.ofType("state.entities.LINK_CHILD_SUCCESS").do(({payload:{linkedChild:e},meta:t})=>{const n=s.getState(),a=Hx(n),i={action:"linked",actionSubjectId:e.id,attributes:{isInlineChildAdded:!0,panelType:a}};Object(f.a)(t.analyticsEvent,i)}).switchMap(({payload:{linkedChild:t}})=>{const n=s.getState(),a=Wx(n);return dD.Observable.from(AD(e,a,t.issueKey)).map(e=>gD(e)).catch(e=>(ja.i.safeError("issue.views.common.child-issues-panel.link-child-success.fetch-single-issue","Failed to fetch single issue after a successful child issue linking",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),dD.Observable.empty()))}))(e)),lA=s("./src/packages/common-legacy-do-not-add-anything-new/src/tangerine/state/initiate.js");function uA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?uA(Object(s),!0).forEach((function(t){pA(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):uA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const mA={baseUrl:Object(vr.b)(""),locale:"en_US",user:null,childIssuesPanelType:null,supportsIssueCreation:!1,requiresFullCreate:!1,parentKey:null,customFieldIdRank:null,epicLinkFieldKey:null,parentId:null,projectId:null,messages:null,onNavigateToNewIssue:o.a,onChange:o.a,isIssueViewComplete:!1,projectType:null,application:null,edition:null};const bA="create",fA="linkIssue";function gA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gA(Object(s),!0).forEach((function(t){yA(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function yA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const OA={issues:[],issueTypes:[],issueHierarchyLevel:void 0};const jA=()=>({type:"state.ui.SHOW_INLINE_CREATE"}),EA=()=>({type:"state.ui.HIDE_ADD_CHILD_ISSUE"}),vA=Object.freeze({InlineCreate:"InlineCreate",AddExistingIssue:"AddExistingIssue"}),kA=e=>({type:"state.ui.SET_CHILD_PANEL_VIEW",view:e}),wA=e=>({type:"state.ui.SET_CHILD_CREATE_SUMMARY",summary:e}),SA=e=>({type:"state.ui.SET_FETCH_ISSUE_TYPES_STATUS",payload:e});function IA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function CA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?IA(Object(s),!0).forEach((function(t){TA(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):IA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function TA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const PA={addClickCount:0,hideDone:!1,selectedIssueType:null,childPanelView:vA.InlineCreate,childCreateSummary:"",fetchIssueTypesStatus:"NONE"};var _A=Object(vg.combineReducers)({context:(e=mA,t)=>{switch(t.type){case"state.context.SET_CONTEXT":case"state.context.REQUIRES_FULL_CREATE_CHECK_SUCCESS":return dA(dA({},e),t.payload);case"state.context.REQUIRES_FULL_CREATE_CHECK_FAILED":return dA(dA({},e),{},{requiresFullCreate:!0});case"state.context.SET_IS_ISSUE_VIEW_COMPLETE":return dA(dA({},e),{},{isIssueViewComplete:t.payload});default:return e}},ui:(e=PA,t)=>{switch(t.type){case"state.ui.SHOW_INLINE_CREATE":return CA(CA({},e),{},{addClickCount:e.addClickCount+1});case"state.ui.HIDE_ADD_CHILD_ISSUE":return CA(CA({},e),{},{addClickCount:0,childPanelView:vA.InlineCreate,childCreateSummary:""});case"state.ui.SET_CHILD_PANEL_VIEW":return CA(CA({},e),{},{childPanelView:t.view});case"state.ui.SET_CHILD_CREATE_SUMMARY":return CA(CA({},e),{},{childCreateSummary:t.summary});case"state.ui.TOGGLE_HIDE_DONE":return CA(CA({},e),{},{hideDone:!e.hideDone});case"state.ui.SELECTED_ISSUE_TYPE_CHANGED":return CA(CA({},e),{},{selectedIssueType:t.payload});case"state.ui.SET_FETCH_ISSUE_TYPES_STATUS":return CA(CA({},e),{},{fetchIssueTypesStatus:t.payload});default:return e}},entities:(e=OA,t)=>{switch(t.type){case"state.entities.SET_ENTITIES":{const{issueTypes:s,issues:n,issueHierarchyLevel:a}=t.payload;return hA(hA({},e),{},{issues:n,issueTypes:s,issueHierarchyLevel:a})}case"state.entities.UPDATE_ISSUE":{const s=t.payload,n=[...e.issues],a=n.findIndex(e=>e.id===s.id);return n[a]=s,hA(hA({},e),{},{issues:n})}case"state.entities.CREATE_CHILD_REQUEST":{const s=hA(hA({},t.payload.optimisticUiChildIssue),{},{isLoading:!0,errorType:void 0});return hA(hA({},e),{},{issues:e.issues.filter(e=>e.id!==s.id).concat(s)})}case"state.entities.CREATE_CHILD_SUCCESS":{const{optimisticId:s,createdChild:n}=t.payload;return hA(hA({},e),{},{issues:e.issues.filter(e=>e.id!==s).concat(n)})}case"state.entities.FETCH_SINGLE_CHILD_SUCCESS":{const{childIssue:s}=t.payload;return hA(hA({},e),{},{issues:e.issues.map(e=>e.id===s.id?s:e)})}case"state.entities.CREATE_CHILD_FAILURE":{const{optimisticId:s}=t.payload;return hA(hA({},e),{},{issues:e.issues.map(e=>e.id===s?hA(hA({},e),{},{errorType:bA,isLoading:!1}):e)})}case"state.entities.LINKING_ISSUE_FAILURE":{const{optimisticId:s,createdChild:n}=t.payload;return hA(hA({},e),{},{issues:e.issues.filter(e=>e.id!==s).concat(hA(hA({},n),{},{errorType:fA,isLoading:!1}))})}case"state.entities.CREATE_CHILD_RETRY":{const{optimisticId:s}=t.payload;return hA(hA({},e),{},{issues:e.issues.map(e=>e.id===s?hA(hA({},e),{},{errorType:void 0,isLoading:!0}):e)})}case"state.entities.LINKING_ISSUE_RETRY":{const{issueId:s}=t.payload;return hA(hA({},e),{},{issues:e.issues.map(e=>e.id===s?hA(hA({},e),{},{errorType:void 0,isLoading:!0}):e)})}case"state.entities.LINKING_ISSUE_RETRY_FAILURE":{const{issueId:s}=t.payload;return hA(hA({},e),{},{issues:e.issues.map(e=>e.id===s?hA(hA({},e),{},{errorType:fA,isLoading:!1}):e)})}case"state.entities.LINK_PARENT_FAILURE":case"state.entities.CANCEL_OPTIMISTIC_CHILD":{const{optimisticId:s}=t.payload;return hA(hA({},e),{},{issues:e.issues.filter(e=>e.id!==s)})}case"state.entities.FETCH_DETAILS_FOR_ISSUES_SUCCESS":{const{issues:s}=t.payload;return hA(hA({},e),{},{issues:e.issues.map(e=>hA(hA({},e),Us()(s,t=>t.id===e.id)))})}case"state.entities.REORDER_CHILDREN_REQUEST":case"state.entities.REORDER_CHILDREN_SUCCESS":{const{newOrder:s}=t.payload;return hA(hA({},e),{},{issues:s})}case"state.entities.REORDER_CHILDREN_FAILED":{const{originalOrder:s}=t.payload;return hA(hA({},e),{},{issues:s})}case"state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST":{const s={id:t.payload.issueId,issueKey:t.payload.issueKey,issueSummary:t.payload.issueSummary,issueTypeIconUrl:t.payload.issueTypeIconUrl,assigneeUrl:null,assigneeDisplayName:null,isLoading:!0,errorType:void 0};return hA(hA({},e),{},{issues:e.issues.filter(e=>e.id!==s.id).concat(s)})}default:return e}}}),xA=s("./node_modules/keycode/index.js"),DA=s.n(xA),AA=s("./node_modules/@atlaskit/select/dist/esm/CreatableSelect.js"),MA=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/error-state/index.js"),LA=s("./node_modules/debounce-promise/dist/index.js"),RA=s.n(LA),NA=s("./src/packages/common-legacy-do-not-add-anything-new/src/match-jira-url/index.js"),UA=s("./node_modules/lodash/uniqBy.js"),FA=s.n(UA);const VA=({sections:e},t)=>{const s=e[0],n=e[1],a=s.issues,i=n?n.issues:[],r=FA()([...a,...i],"key");return[{label:n?t.matchingIssues:t.recentIssues,options:r.map(e=>({issueId:Object(vr.j)(String(e.id)),value:e.key,issueKey:e.key,summary:e.summaryText,imageUrl:e.img}))}]};class KA extends n.Component{constructor(...e){super(...e),this.state={options:[],isLoading:!1,error:null},this.fetchData=e=>{const{baseUrl:t,issueKey:s,projectId:n,jql:a,labels:i}=this.props,r=Object(NA.a)(e,window.location.host,t)||e;return this.setState({isLoading:!0,error:null}),Object(rp.a)(`${t}/rest/api/3/issue/picker?currentIssueKey=${s}&currentProjectId=${n}&showSubTasks=true&showSubTaskParent=true&currentJQL=${a}&query=${r}`).then(e=>(this.setState({options:VA(e,i),isLoading:!1}),e)).catch(e=>this.setState({isLoading:!1,options:[],error:e}))},this.debouncedFetchData=RA()(this.fetchData,300,{leading:!0})}componentDidMount(){this.fetchData(this.props.initialValue)}render(){const{children:e}=this.props,{options:t,isLoading:s,error:n}=this.state;return e({options:t,isLoading:s,error:n,loadOptions:this.debouncedFetchData})}}KA.displayName="IssueOptionService",KA.defaultProps={initialValue:""};const BA=Q.default.div(["display:flex;align-items:center;"]),WA=Q.default.div(["margin-right:","px;width:","px;height:","px;"],J.e,2*J.e,2*J.e),HA=Q.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1 1 100%;min-width:0;"]);function GA(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const $A=({imageUrl:e,children:t})=>a.a.createElement(BA,null,a.a.createElement(WA,null,a.a.createElement("img",{src:e,alt:""})),t);$A.displayName="IssueCard";const qA=({label:e})=>a.a.createElement(BA,null,a.a.createElement(Lb.a,{label:"",size:"small",primaryColor:Je.a.B400}),a.a.createElement(q.a,{appearance:"link",isSelected:!1},e));qA.displayName="CreateIssueOption";const zA=({imageUrl:e,issueKey:t,summary:s})=>a.a.createElement($A,{imageUrl:e},a.a.createElement(HA,null,t," ",s));zA.displayName="IssueOption";const YA=({imageUrl:e,issueKey:t,summary:s})=>a.a.createElement($A,{imageUrl:e},a.a.createElement(HA,null,`${t} ${s}`));YA.displayName="SelectedValue";const QA=e=>{let{children:t}=e,s=GA(e,["children"]);return(a.a.createElement(Eo.z.SingleValue,s,a.a.createElement(YA,{imageUrl:s.data.imageUrl,issueKey:s.data.issueKey,summary:s.data.summary})))};QA.displayName="SingleValue";var JA=Object(j.defineMessages)({defaultPlaceholder:{id:"issue-picker.default-placeholder",defaultMessage:"Search by issue key or summary"},defaultRecentIssues:{id:"issue-picker.default-recent-issues",defaultMessage:"Recent Issues"},defaultMatchingIssues:{id:"issue-picker.default-matching-issues",defaultMessage:"Matching Issues"},defaultFailedLoadingIssues:{id:"issue-picker.default-failed-loading-issues",defaultMessage:"Failed to load issues"},createIssue:{id:"issue-picker.create-issue",defaultMessage:"Create an issue for '{value}'"}});class ZA extends n.Component{constructor(...e){super(...e),this.onBlur=e=>{e("")},this.onChange=(e,{action:t},s)=>{switch(t){case"select-option":{const{issueId:t,issueKey:n,summary:a,imageUrl:i}=e;this.props.onChange&&this.props.onChange({issueId:t,issueKey:n,issueSummary:a,issueTypeIconUrl:i}),s("");break}case"clear":this.props.onClear&&this.props.onClear()}},this.onCreate=e=>{this.props.onCreate&&this.props.onCreate(e)},this.onInputChange=e=>(t,{action:s})=>{"input-change"===s&&e(t)},this.onSetSelectRef=e=>{this.akSelect=e},this.formatOptionLabel=(e,{context:t})=>{if(e.__isNew__){const t=this.props.intl.formatMessage(JA.createIssue,{value:e.value});return(a.a.createElement(qA,{label:t}))}return"menu"===t?a.a.createElement(zA,{imageUrl:e.imageUrl,issueKey:e.issueKey,summary:e.summary}):e.label},this.akSelect=void 0,this.filterOption=()=>!0,this.renderNoOptionsMessage=e=>{if(!e)return;const{intl:t}=this.props;return(a.a.createElement(MA.a,{description:t.formatMessage(JA.defaultFailedLoadingIssues),imageWidth:56,isSubtle:!0}))}}focus(){this.akSelect.focus()}reset(){this.akSelect.select.select.select.clearValue(),this.akSelect.blur(),this.akSelect.focus()}render(){const{initialValue:e,issueKey:t,projectId:s,jql:n,intl:i}=this.props;return(a.a.createElement(Kk.b,null,({tenantContext:{baseUrl:r}})=>a.a.createElement(KA,{labels:{recentIssues:i.formatMessage(JA.defaultRecentIssues),matchingIssues:i.formatMessage(JA.defaultMatchingIssues)},baseUrl:r,issueKey:t,projectId:s,jql:n,initialValue:e},({loadOptions:t,options:s,isLoading:n,error:r})=>a.a.createElement(AA.a,{ref:this.onSetSelectRef,styles:Uy.f,isLoading:n,formatOptionLabel:this.formatOptionLabel,options:s,defaultInputValue:e,autoFocus:!0,allowCreateWhileLoading:!0,defaultOptions:!0,onCreateOption:this.onCreate,placeholder:i.formatMessage(JA.defaultPlaceholder),components:{SingleValue:QA},onChange:(e,s)=>this.onChange(e,s,t),onInputChange:this.onInputChange(t),onBlur:()=>this.onBlur(t),isClearable:!0,filterOption:this.filterOption,noOptionsMessage:()=>this.renderNoOptionsMessage(r),openMenuOnFocus:!0}))))}}ZA.displayName="IssuePicker",ZA.defaultProps={initialValue:""};var XA=ZA,eM=Object(j.defineMessages)({childLinkButton:{id:"issue.views.common.child-issues-panel.add-existing-issue.child-link-button",defaultMessage:"Add"},childCancelButton:{id:"issue.views.common.child-issues-panel.add-existing-issue.child-cancel-button",defaultMessage:"Cancel"}});const tM=Object(Q.default)(q.a)(["margin-left:","px !important;"],J.e),sM=Q.default.div(["margin-top:","px;display:flex;justify-content:flex-end;"],J.e);class nM extends n.Component{constructor(...e){super(...e),this.state={selectedIssue:void 0,isDisabled:!0},this.onChildContainerRefSet=e=>{this.childContainer=e},this.onAdd=()=>{this.state.selectedIssue&&(this.props.onAdd(this.state.selectedIssue),this.resetPicker())},this.onChange=e=>{this.setState({selectedIssue:e,isDisabled:!1})},this.onClear=()=>this.setState({selectedIssue:void 0,isDisabled:!0}),this.onCancelClicked=()=>{this.onClear(),this.props.onCancel()},this.onSetSelectRef=e=>{this.issuePicker=e},this.onKeyDown=e=>{e.keyCode===DA()("enter")&&(this.onAdd(),e.stopPropagation())},this.issuePicker=void 0,this.childContainer=void 0}async componentDidMount(){Object(Br.a)(this.childContainer)}componentDidUpdate(e){this.props.addClickCount!==e.addClickCount&&(Object(Br.a)(this.childContainer),this.focusPicker())}resetPicker(){this.issuePicker&&this.issuePicker.reset()}focusPicker(){this.issuePicker&&this.issuePicker.focus()}render(){const{initialValue:e,issueKey:t,projectId:s,jql:n,intl:i}=this.props;return t&&s?a.a.createElement(G.a,{onEscape:this.onCancelClicked},a.a.createElement("div",{onKeyDown:this.onKeyDown,ref:this.onChildContainerRefSet},a.a.createElement(XA,{ref:this.onSetSelectRef,initialValue:e,issueKey:t,projectId:s,jql:n,onChange:this.onChange,onClear:this.onClear,intl:i,onCreate:this.props.onCreate}),a.a.createElement(sM,null,a.a.createElement(tM,{appearance:"primary",onClick:this.onAdd,isDisabled:this.state.isDisabled},i.formatMessage(eM.childLinkButton)),a.a.createElement(tM,{appearance:"subtle",onClick:this.onCancelClicked},i.formatMessage(eM.childCancelButton))))):null}}nM.displayName="AddExistingIssue",nM.defaultProps={initialValue:""};var aM=Object(Ts.a)([j.injectIntl,Object(Vs.a)("button",{onAdd:"clicked",onCancel:"clicked",onCreate:"clicked"}),Object(E.a)({onAdd:"addExistingChildIssueRequest",onCancel:"hideAddExistingChildIssue",onCreate:"switchToCreateChildIssue"}),Object(i.b)(e=>({addClickCount:Rx(e),initialValue:Ux(e),issueKey:Qx(e),jql:Lx(e),projectId:eD(e)}),e=>({onAdd:(t,s)=>e(((e,t)=>({type:"state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST",payload:e,meta:{analyticsEvent:t}}))(t,s)),onCancel:()=>e(EA()),onCreate:t=>{e(wA(t)),e(kA(vA.InlineCreate))}}))])(nM),iM=Object(j.defineMessages)({createChildLabel:{id:"issue.views.common.child-issues-panel.heading.add-child.create-child-label",defaultMessage:"Create child"},createSubtaskLabel:{id:"issue.views.common.child-issues-panel.heading.add-child.create-subtask-label",defaultMessage:"Create subtask"}});const rM=Q.default.div(["margin-left:","px;"],.75*J.e);class oM extends n.Component{render(){const{intl:{formatMessage:e},onClick:t,isClassicSubtaskPanel:s}=this.props,n=s?iM.createSubtaskLabel:iM.createChildLabel;return a.a.createElement(rM,null,a.a.createElement(__.a,{onClick:t,label:e(n)}))}}oM.displayName="AddChild",oM.defaultProps={isClassicSubtaskPanel:!1};var cM=Object(Ts.a)([j.injectIntl,Object(Vs.a)("button",{onClick:"clicked"}),Object(E.a)({onClick:"showChildIssuesInlineCreate"}),Object(i.b)(e=>({isClassicSubtaskPanel:Gx(e)}),(e,t)=>({onClick:(...s)=>{e(jA()),t.onClick(...s)}}))])(oM),lM=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/group/DropdownItemGroupCheckbox.js"),uM=s("./node_modules/@atlaskit/dropdown-menu/dist/esm/components/item/DropdownItemCheckbox.js"),dM=Object(j.defineMessages)({actions:{id:"issue.views.common.child-issues-panel.heading.meatballs.actions",defaultMessage:"Actions"},filter:{id:"issue.views.common.child-issues-panel.heading.meatballs.filter",defaultMessage:"Filter"},bulkEdit:{id:"issue.views.common.child-issues-panel.heading.meatballs.bulk-edit",defaultMessage:"Bulk edit"},hideDone:{id:"issue.views.common.child-issues-panel.heading.meatballs.hide-done",defaultMessage:"Hide done"},search:{id:"issue.views.common.child-issues-panel.heading.meatballs.search",defaultMessage:"View in search"},tooltip:{id:"issue.views.common.child-issues-panel.heading.meatballs.tooltip",defaultMessage:"Issue actions"}});const pM=Q.default.div([".childIssuesPanelMeatballButton{padding:0 ","px;}"],.75*J.e);class mM extends n.Component{constructor(...e){super(...e),this.onHideDoneClickedAnalytics=e=>{const{onHideDoneClicked:t,allIssues:s,incompleteIssues:n,hideDone:a}=this.props;t(s.length,n.length,!a,e)}}onBulkEditClickedAnalytics(e){return t=>{this.props.onBulkEditClicked(e,t)}}onViewInSearchClickedAnalytics(e){return t=>{this.props.onViewInSearchClicked(e,t)}}isHideDoneCheckboxVisible(){const{allIssues:e,incompleteIssues:t}=this.props;return!mo()(t)&&t.length!==e.length}generateBulkEditLink(e){return`${this.props.baseUrl}/secure/GHBulkChange.jspa?issueKeys=${encodeURIComponent(e)}`}generateSearchLink(e){const t=encodeURIComponent(`issueKey in (${e})`);return`${this.props.baseUrl}/issues/?jql=${t}`}renderHideDoneCheckbox(){const{intl:{formatMessage:e},hideDone:t}=this.props;return this.isHideDoneCheckboxVisible()?a.a.createElement(lM.a,{title:e(dM.filter),id:"child-issues-panel-checkbox-group"},a.a.createElement(uM.a,{id:"hideDone",key:"hideDone",onClick:this.onHideDoneClickedAnalytics,isSelected:t},e(dM.hideDone))):null}renderActionLinks(){const{intl:{formatMessage:e},hideDone:t,allIssues:s,incompleteIssues:n}=this.props,i=t?n:s,r=i.length,o=i.map(e=>e.issueKey).join(","),c=this.generateBulkEditLink(o),l=this.generateSearchLink(o),u=this.isHideDoneCheckboxVisible()?e(dM.actions):"";return a.a.createElement(ar.a,{title:u},a.a.createElement(dr.a,{onClick:this.onBulkEditClickedAnalytics(r),href:c},e(dM.bulkEdit)),a.a.createElement(dr.a,{onClick:this.onViewInSearchClickedAnalytics(r),href:l},e(dM.search)))}render(){return a.a.createElement(pM,null,a.a.createElement(JC.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:a.a.createElement(XC.a,{size:"small",label:this.props.intl.formatMessage(dM.tooltip)}),className:"childIssuesPanelMeatballButton"},position:"bottom right"},this.renderHideDoneCheckbox(),this.renderActionLinks()))}}mM.displayName="Meatballs",mM.defaultProps={hideDone:!1};var bM=Object(Ts.a)([j.injectIntl,Object(Vs.a)("item",{onBulkEditClicked:"clicked",onViewInSearchClicked:"clicked",onHideDoneClicked:"clicked"}),Object(E.a)({onBulkEditClicked:e=>({name:"bulkEdit",issueCount:e}),onViewInSearchClicked:e=>({name:"viewInSearch",issueCount:e}),onHideDoneClicked:(e,t,s)=>({name:"toggleHideDone",totalIssues:e,incompleteIssues:t,hideDone:s})}),Object(i.b)(e=>({baseUrl:Wx(e),parentKey:Qx(e),hideDone:Vx(e),allIssues:Tx(e),incompleteIssues:_x(e)}),{onHideDoneClicked:()=>({type:"state.ui.TOGGLE_HIDE_DONE"})})])(mM),fM=Object(j.defineMessages)({title:{id:"issue.views.common.child-issues-panel.heading.title.title",defaultMessage:"Child issues"}});class gM extends n.Component{render(){const{intl:{formatMessage:e},title:t}=this.props;return(a.a.createElement(Ki.e,null,e(t)))}}gM.displayName="Title",gM.defaultProps={title:fM.title};var hM=Object(Ts.a)([j.injectIntl,Object(i.b)(e=>({title:sD(e)}),{})])(gM);class yM extends n.Component{render(){const{Title:e,Meatballs:t,AddChild:s,supportsIssueCreation:n,allIssues:i,onAddChildClick:r,sourceName:o}=this.props;return(a.a.createElement(Ki.c,null,mx()?a.a.createElement("label",{htmlFor:o},a.a.createElement(e,null)):a.a.createElement(e,null),a.a.createElement(Ki.d,null,i.length>0?a.a.createElement(t,null):null,n&&0!==i.length?a.a.createElement(s,{onClick:r}):null)))}}yM.displayName="Heading",yM.defaultProps={supportsIssueCreation:!1,allIssues:[]};var OM=Object(Ts.a)([Object(i.b)(e=>({Title:hM,Meatballs:bM,AddChild:cM,allIssues:Tx(e),supportsIssueCreation:zx(e)}),{})])(yM),jM=s("./node_modules/@atlaskit/select/dist/esm/Select.js"),EM=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcut-scope.js"),vM=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js"),kM=Object(j.defineMessages)({typesPlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.child-types-select.types-placeholder",defaultMessage:"Issue type"}});Je.a.N50,J.e,J.e;const wM=Q.default.div(["display:flex;align-items:center;"]),SM=Q.default.span(["padding-left:","px;display:inline-block;"],J.e);function IM(){return(IM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function CM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function TM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?CM(Object(s),!0).forEach((function(t){PM(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):CM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function PM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _M={singleValue:e=>TM(TM({},e),{},{position:"static",transform:"none"})},xM=e=>e.name,DM=e=>e.id,AM=e=>a.a.createElement(wM,null,a.a.createElement(uf.a,{url:e.iconUrl,title:e.name}),a.a.createElement(SM,null,e.name));AM.displayName="formatOptionLabel";class MM extends n.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{"select-option"===t.action&&null!=e&&this.props.onChange(e)}}render(){const{intl:{formatMessage:e},issueTypes:t,selectedIssueType:s}=this.props;return(a.a.createElement(EM.a,null,a.a.createElement(jM.a,IM({},Hb.b,{styles:Object(vM.a)(Uy.f,_M),options:t,value:s,getOptionLabel:xM,getOptionValue:DM,formatOptionLabel:AM,onChange:this.onChange,placeholder:e(kM.typesPlaceholder)}))))}}MM.displayName="ChildTypesSelect",MM.defaultProps={issueTypes:[]};var LM=Object(Ts.a)([j.injectIntl,Object(i.b)(e=>({selectedIssueType:Fx(e),issueTypes:Mx(e)}),e=>({onChange:t=>e((e=>({type:"state.ui.SELECTED_ISSUE_TYPE_CHANGED",payload:e}))(t))}))])(MM),RM=s("./node_modules/lodash/trim.js"),NM=s.n(RM),UM=s("./node_modules/@atlaskit/icon/glyph/search.js"),FM=s.n(UM);const VM=e=>{const{children:t,onClick:s}=e;return(a.a.createElement(q.a,{appearance:"subtle-link",iconBefore:a.a.createElement(FM.a,{label:""}),isSelected:!1,onClick:s},t))};VM.displayName="AddExistingIssueButton",VM.displayName="AddExistingIssueButton";var KM=Object(j.defineMessages)({summaryLabel:{id:"issue.views.common.child-issues-panel.inline-create.summary-label",defaultMessage:"Child summary"},summaryPlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.summary-placeholder",defaultMessage:"What needs to be done?"},summaryTooLong:{id:"issue.views.common.child-issues-panel.inline-create.summary-too-long",defaultMessage:"Summary must be less than 255 characters."},childCreateButton:{id:"issue.views.common.child-issues-panel.inline-create.child-create-button",defaultMessage:"Create"},childCancelButton:{id:"issue.views.common.child-issues-panel.inline-create.child-cancel-button",defaultMessage:"Cancel"},addExistingIssuePlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.add-existing-issue-placeholder",defaultMessage:"Choose an existing issue"}}),BM=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");const WM=Q.default.div(["display:flex;align-items:center;background-color:",";width:100%;"],Je.a.N10),HM=Q.default.div(["flex-grow:1;"]),GM=Object(BM.a)(q.a,{target:"e1o0mbwp0"})("margin-left:",J.e,"px !important;"),$M=Q.default.div(["margin-top:","px;display:flex;justify-content:space-between;"],J.e),qM=Q.default.div(["justify-content:flex-end;display:flex;"]);function zM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function YM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?zM(Object(s),!0).forEach((function(t){QM(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function QM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const JM=e=>NM()(e).length>255,ZM=e=>{const t=NM()(e);return mo()(t)||JM(e)};class XM extends n.Component{constructor(e){super(e),this.onSubmitClicked=()=>{this.createChild(),this.props.onSubmitClickAnalytics()},this.onCancelClicked=()=>{this.closeAndReset(),this.props.onCancelClickAnalytics()},this.onEnterPressed=()=>{this.createChild(),this.props.onEnterKeyPressedAnalytics()},this.onEscPressed=()=>{this.closeAndReset(),this.props.onEscapeKeyPressedAnalytics()},this.onUpdateChildSummary=e=>{const t=e.target.value;this.props.onChangeSummary(t)},this.onChildContainerRefSet=e=>{this.childContainer=e},this.onFieldContainerRefSet=e=>{this.fieldContainer=e},this.onAddExisting=()=>{this.props.onAddExistingIssue(),this.props.onAddExistingClickAnalytics()},this.childContainer=void 0,this.fieldContainer=void 0,this.createIssueFormFactory=void 0,this.createIssueFormFactory=null}async componentDidMount(){Object(Br.a)(this.childContainer),this.fieldContainer&&this.fieldContainer.focus();const e="classicSubtasks"===this.props.childIssuesPanelType?"quick-edit/form/factory/create-subtask":"quick-edit/form/factory/create-issue";this.createIssueFormFactory=await Object(Va.a)({name:e})}componentDidUpdate(e){this.props.addClickCount!==e.addClickCount&&(Object(Br.a)(this.childContainer),this.fieldContainer&&this.fieldContainer.focus())}createChild(){const e=`OPTIMISTIC_CHILD_${Date.now()}`,{baseUrl:t,epicLinkFieldKey:s,selectedIssueType:n,projectId:a,parentIssueId:i,parentIssueKey:r,childIssuesPanelType:o,requiresFullCreate:c,summary:l}=this.props;if(!ZM(l)&&n){const u={id:e,issueSummary:l,issueTypeId:`${n.id}`,issueTypeIconUrl:`${n.iconUrl}`,issueTypeName:`${n.name}`,assigneeUrl:null,assigneeDisplayName:null};if(n.hasRequiredField||c){const c="classicProjectEpicChildren"===o,u=this.createIssueFormFactory(YM({pid:a,issueType:n&&n.id,fields:YM({summary:l||""},c&&s?{[s]:r}:{}),customFieldsToPreserveOnFormRecreation:[...c&&s?[s]:[]]},"classicSubtasks"===o?{parentIssueId:i}:{}));u.bind("issueCreated",(n,a)=>{c&&a.createdIssueDetails.fields[s]!==r||this.props.onFullDialogCreate(e,FD(a.createdIssueDetails,t)),this.resetAndFocus()}),u.asDialog({id:"classicSubtasks"===o?"create-subtask-dialog":"create-issue-dialog"}).show()}else this.props.onSubmit(u),this.resetAndFocus()}}closeAndReset(){this.reset(),this.props.onCancel()}resetAndFocus(){this.reset(),this.fieldContainer&&this.fieldContainer.focus()}reset(){this.props.onChangeSummary("")}renderAddExistingIssueButton(){const{intl:{formatMessage:e}}=this.props;switch(this.props.childIssuesPanelType){case"nextGenChildren":return a.a.createElement(Ae.a,{content:e(KM.addExistingIssuePlaceholder)},a.a.createElement(VM,{onClick:this.onAddExisting},e(KM.addExistingIssuePlaceholder)));case"portfolioChildren":case"classicProjectEpicChildren":case"classicSubtasks":default:return a.a.createElement("div",null)}}render(){const{intl:{formatMessage:e},issueTypes:t,ChildTypesSelect:s,summary:n,inputId:i}=this.props,r=JM(n)?e(KM.summaryTooLong):"";return a.a.createElement("div",{ref:this.onChildContainerRefSet},a.a.createElement(WM,null,t.length>1?a.a.createElement(s,null):null,a.a.createElement(HM,null,a.a.createElement(G.a,{onEnter:this.onEnterPressed,onEscape:this.onEscPressed},mx()?a.a.createElement(_e.a,{ref:this.onFieldContainerRefSet,placeholder:e(KM.summaryPlaceholder),label:e(KM.summaryLabel),onChange:this.onUpdateChildSummary,value:n,isInvalid:JM(n),invalidMessage:r,isLabelHidden:!0,shouldFitContainer:!0,id:i}):a.a.createElement(_e.a,{ref:this.onFieldContainerRefSet,placeholder:e(KM.summaryPlaceholder),label:e(KM.summaryLabel),onChange:this.onUpdateChildSummary,value:n,isInvalid:JM(n),invalidMessage:r,isLabelHidden:!0,shouldFitContainer:!0})))),a.a.createElement($M,null,this.renderAddExistingIssueButton(),a.a.createElement(qM,null,a.a.createElement(GM,{appearance:"primary",onClick:this.onSubmitClicked,isDisabled:ZM(n)},e(KM.childCreateButton)),a.a.createElement(GM,{appearance:"subtle",onClick:this.onCancelClicked},e(KM.childCancelButton)))))}}XM.displayName="InlineCreate",XM.defaultProps={addClickCount:0,requiresFullCreate:!1,parentIssueKey:void 0,epicLinkFieldKey:null};var eL=Object(v.b)("issue")(XM),tL=Object(Ts.a)([j.injectIntl,Object(Vs.a)("button",{onSubmitClickAnalytics:"clicked",onCancelClickAnalytics:"clicked",onAddExistingClickAnalytics:"clicked"}),Object(Vs.a)("keyboardShortcut",{onEnterKeyPressedAnalytics:"pressed",onEscapeKeyPressedAnalytics:"pressed"}),Object(Vs.a)("childIssuePanelInlineCreate",{onSubmit:"onSubmit",onFullDialogCreate:"onFullDialogCreate"}),Object(E.a)({onSubmitClickAnalytics:"createChildIssue",onCancelClickAnalytics:"hideChildIssueInlineCreate",onEnterKeyPressedAnalytics:"confirmChildIssueCreate",onEscapeKeyPressedAnalytics:"cancelChildIssueCreate",onAddExistingClickAnalytics:"addExistingChildClick"}),Object(i.b)(e=>({ChildTypesSelect:LM,baseUrl:Wx(e),issues:Tx(e),addClickCount:Rx(e),issueTypes:Mx(e),selectedIssueType:Fx(e),projectId:eD(e),parentIssueId:Jx(e),parentIssueKey:Qx(e),epicLinkFieldKey:Xx(e),childIssuesPanelType:Hx(e),requiresFullCreate:Yx(e),summary:Ux(e)}),{onCancel:EA,onAddExistingIssue:()=>kA(vA.AddExistingIssue),onChangeSummary:e=>wA(e),onSubmit:(e,t)=>pD(e,t),onFullDialogCreate:(e,t,s)=>((e,t,s)=>({type:"state.entities.CHILD_CREATED_IN_FULL_DIALOG",payload:{optimisticId:e,createdChild:t},meta:{analyticsEvent:s}}))(e,t,s)})])(eL),sL=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/item-line-card/item-line-card-group-view.js"),nL=s("./src/packages/issue/issue-view/src/common/util/events/index.js"),aL=s("./node_modules/@atlaskit/inline-message/dist/esm/components/InlineMessage/index.js");const iL=Object(j.defineMessages)({retry:{id:"issue.issue-line-card-retry",defaultMessage:"Try again"},cancel:{id:"issue.issue-line-card-cancel",defaultMessage:"Cancel"}}),rL=Q.default.h1([""," margin-bottom:","px;"],Je.c.h400(),2*J.e),oL=Q.default.div(["margin-bottom:","px;"],2*J.e),cL=Q.default.div(["display:flex;justify-content:flex-start;"]),lL=Q.default.div(["margin-left:","px;"],J.e),uL=(e,t,s,n,i)=>a.a.createElement(aL.a,{type:"warning",placement:"bottom-end"},a.a.createElement("div",null,a.a.createElement(rL,null,t),a.a.createElement(oL,null,s),a.a.createElement(cL,null,a.a.createElement(q.a,{onClick:n},e.formatMessage(iL.retry)),a.a.createElement(lL,null,a.a.createElement(q.a,{appearance:"subtle",onClick:i},e.formatMessage(iL.cancel))))));uL.displayName="renderInlineMessage";var dL=s("./node_modules/lodash/isUndefined.js"),pL=s.n(dL),mL=s("./node_modules/@atlaskit/icon/glyph/editor/close.js"),bL=s.n(mL),fL=s("./node_modules/@atlaskit/icon/glyph/list.js"),gL=s.n(fL),hL=s("./src/packages/platform/utils/constants/src/index.js"),yL=s("./src/packages/issue/issue-view/src/views/common/issue-line-card/assets/server.svg"),OL=s.n(yL),jL=s("./src/packages/issue/fields/number/src/ui/view/main.js");const EL=Q.default.div(["& > div > div{margin-left:0;}"]),vL=Object(Oe.f)(()=>s.e("async-issue-field-number").then(s.bind(null,"./src/packages/issue/fields/number/src/index.js")),{moduleId:"./src/packages/issue/fields/number/src/index.js"}),kL=Object(n.memo)(({isHovering:e,isActive:t,isFocused:s,issueKey:i,estimateFieldId:r})=>{const[o,c]=Object(n.useState)(!1),[{value:l}]=Object(SO.a)({issueKey:i,fieldKey:r}),u=Object(n.useCallback)(()=>c(!0),[]),d=Object(n.useCallback)(()=>c(!1),[]),p=!(null==l)||o||!0===e||!0===s||!0===t,m=a.a.createElement(jL.a,{isEditable:!0,value:l});return p?a.a.createElement(EL,{role:"button",onClick:e=>e.preventDefault(),onFocus:e=>e.stopPropagation()},a.a.createElement(xO.b,{packageName:"issue",fallback:m},a.a.createElement(vL,{issueKey:i,fieldKey:r,onEdit:u,onConfirm:d,onEnter:d,onCancel:d,onEscape:d}))):null}),wL=Object(j.defineMessages)({issueTypeTitle:{id:"issue.view.common.issue-line-card.issue-type.title",defaultMessage:"Issue type: {issueTypeName}"},issuePriorityTitle:{id:"issue.view.common.issue-line-card.priority.title",defaultMessage:"Priority: {issuePriorityName}"}});var SL=s("./src/packages/issue/jira-settings-service/src/main.js");const IL=Q.default.div(["width:","px;position:relative;"],5*J.e);var CL=({issueTimeTracking:e,statusCategory:t})=>{const[s]=Object(SL.c)(),{remainingEstimateSeconds:n,originalEstimateSeconds:i,timeSpentSeconds:r}=e,o={loggedTime:r,remainingTime:n},c=i,l=t===hL.a.DONE;return a.a.createElement(IL,null,a.a.createElement(rt,{value:o,estimatedTime:c,config:s,isDone:l,isCompact:!0,shouldHighlightOnHover:!0}))};const TL=Q.default.div(["display:flex;align-items:center;"]),PL=Object(Q.default)(TL)(["width:","px;height:100%;margin-left:","px;margin-right:-","px;"],4*J.e,J.e/4,J.e),_L=Object(Q.default)(TL)(["width:100%;height:100%;position:relative;"]),xL=Object(Q.default)(TL)(["cursor:grab;"]),DL=Object(Q.default)(TL)(["padding-left:","px;"],J.e),AL=Object(Q.default)(TL)(["padding-right:","px;"],J.e),ML=Q.default.a(["outline:none;margin-left:","px;color:",";font-weight:600;font-size:12px;text-decoration:",";white-space:nowrap;&:hover,&:active,&:visited,&:link{outline:none;color:",";text-decoration:",";}"],J.e,e=>e.isActive?Je.a.B400:Je.a.N90,e=>e.isDone?"line-through":"none",e=>e.isActive?Je.a.B400:Je.a.N90,e=>e.isDone?"line-through":"none"),LL=Q.default.div(["",";padding-left:","px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],e=>e.isActive&&`color: ${Je.a.B400};`,J.e),RL=Q.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),NL=Q.default.div([""]);function UL(){return(UL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const{DONE:FL,statusCategoryForId:VL}=hL.a;class KL extends n.Component{constructor(...e){super(...e),this.handleEditStatus=e=>{const{onEdit:t}=this.props;t&&t({statusId:e.id,statusName:e.name,statusCategory:VL(e.statusCategory.id),statusCategoryId:e.statusCategory.id})},this.handleErrorDialogClick=e=>{e.stopPropagation()},this.handleErrorDialogMouseDown=e=>{e.preventDefault(),e.stopPropagation()},this.handleLinkKeyClick=e=>{e.preventDefault();const{issueLink:t,push:s}=this.props;null!=t&&Object(nL.d)(e)?s(t):window.open(t,"_blank")}}shouldRenderKey(){return!!this.props.issueKey}isActionVisible(){const{isActive:e=!1,isHovering:t=!1,isFocused:s}=this.props;return!e&&(t||s)}shouldShowRemoveAction(){const{isActive:e=!1,isHovering:t=!1,canRemove:s=!1,isFocused:n}=this.props;return s&&(e||t||n)}deleteButtonAction(e){e.stopPropagation();const{issueKey:t,globalId:s,onDelete:n}=this.props;null!=t&&n&&n(Object(vr.l)(t),s)}renderAssignee(){const{assigneeDisplayName:e,assigneeUrl:t,isDraggable:s}=this.props;return Up()(t)?null:a.a.createElement(DL,null,a.a.createElement(Ae.a,{content:e||"",hideTooltipOnMouseDown:s,position:"bottom"},a.a.createElement(xr.a,{name:e||"",src:t,size:"small"})))}renderStatus(){const{isInteractive:e,issueKey:t,statusCategory:s,statusCategoryId:n,statusId:i,statusName:r,projectType:o}=this.props;return pL()(t)||pL()(s)||pL()(r)||pL()(i)||pL()(n)?null:a.a.createElement(DL,{onClick:e=>e.preventDefault(),onFocus:e=>e.stopPropagation()},a.a.createElement(kn.a,{sourceName:"childIssuesPanel"},a.a.createElement(hC.a,{isEditable:e,appearance:"lozenge",issueKey:Object(vr.l)(t),projectType:o,initialValue:{id:i,name:r,statusCategory:{id:n}},onSuccess:this.handleEditStatus})))}renderPriority(){const{intl:e,isDraggable:t,issuePriorityUrl:s,issuePriorityName:n}=this.props;if(Up()(s))return null;const i=e.formatMessage(wL.issuePriorityTitle,{issuePriorityName:n});return(a.a.createElement(Ae.a,{content:n||"",hideTooltipOnMouseDown:t,position:"bottom"},a.a.createElement(uf.a,{alt:i,url:s,width:20,height:20})))}renderLoadingSpinner(){return this.props.isLoading?a.a.createElement(DL,null,a.a.createElement(z.a,{size:"small"})):null}renderError(){const{hasError:e=!1,errorInlineMessage:t}=this.props;return e||t?a.a.createElement(DL,{onClick:this.handleErrorDialogClick,onMouseDown:this.handleErrorDialogMouseDown},t):null}renderSummary(){const{isActive:e,issueSummary:t,isDraggable:s}=this.props;return(a.a.createElement(LL,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.summary",isActive:e},a.a.createElement(Ae.a,{content:t,hideTooltipOnMouseDown:s,position:"bottom"},a.a.createElement(RL,null,t))))}renderKey(){return a.a.createElement(ML,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.key",href:this.props.issueLink,isActive:this.props.isActive,isDone:this.props.statusCategory===FL,onClick:this.handleLinkKeyClick},this.props.issueKey)}renderRemoveButton(){return a.a.createElement(q.a,{iconBefore:a.a.createElement(bL.a,{label:""}),onClick:e=>this.deleteButtonAction(e),tabIndex:-1,appearance:"subtle",spacing:"none"})}renderRemoveButtonContainer(){const{onDelete:e,isLoading:t,hasError:s=!1}=this.props;return e===o.a||t||s?null:a.a.createElement(PL,null,this.shouldShowRemoveAction()&&this.renderRemoveButton())}renderType(){const{intl:e,isDraggable:t=!1,issueTypeIconUrl:s,issueTypeName:n,handleUserClickAnalytics:i}=this.props;if(Up()(n))return null;const r=e.formatMessage(wL.issueTypeTitle,{issueTypeName:n});return(a.a.createElement(Ae.a,{content:n,hideTooltipOnMouseDown:t,position:"bottom"},a.a.createElement(NL,{onClick:()=>{i&&i("typeIcon")}},t&&this.isActionVisible()?a.a.createElement(xL,null,a.a.createElement(gL.a,{label:r,size:"small"})):a.a.createElement(TL,null,a.a.createElement(uf.a,{alt:r,url:s})))))}renderEstimate(){const{issueKey:e,estimateFieldId:t,isActive:s,isHovering:n,isFocused:i}=this.props;return pL()(e)||pL()(t)?null:a.a.createElement(kL,{isActive:s,isHovering:n,isFocused:i,issueKey:Object(vr.l)(e),estimateFieldId:t})}renderServerIcon(){const{remoteServerHostname:e,isDraggable:t,remoteServerIconUrl:s}=this.props;return pL()(e)||pL()(s)?null:a.a.createElement(Ae.a,{content:e,hideTooltipOnMouseDown:t,position:"bottom"},a.a.createElement(AL,null,a.a.createElement(uf.a,{alt:e,url:s})))}renderMiniTimeLogGraph(){const{issueTimeTracking:e,statusCategory:t}=this.props;return Object(Qe.isRollupSubtaskPhase2Enabled)()&&void 0!==(null==e?void 0:e.timeSpentSeconds)&&0!==e.timeSpentSeconds?a.a.createElement(CL,{issueTimeTracking:e,statusCategory:t}):null}render(){return a.a.createElement(_L,{isFocused:this.props.isFocused,isHovering:this.props.isHovering},this.renderType(),this.shouldRenderKey()&&this.renderKey(),this.renderSummary(),this.renderServerIcon(),this.renderMiniTimeLogGraph(),this.renderPriority(),this.renderEstimate(),this.renderAssignee(),this.renderStatus(),this.renderLoadingSpinner(),this.renderError(),this.renderRemoveButtonContainer())}}KL.displayName="IssueLineCard",KL.defaultProps={isLoading:!1,isDraggable:!1,isHovering:!1,isActive:!1,isFocused:!1,isInteractive:!0,hasError:!1,canRemove:!0,remoteServerIconUrl:OL.a,onDelete:o.a,onEdit:o.a};const BL=e=>{const{push:t}=Object(ms.o)();return(a.a.createElement(KL,UL({push:t},e)))};BL.displayName="IssueLineCardWithRouterActions";var WL=Object(j.injectIntl)(BL),HL=s("./src/packages/issue/fields/status/src/ui/status-view-lozenge/main.js");const GL=Q.default.div(["& > div > div{margin-left:0;}"]),$L=Object(Oe.f)(()=>s.e("async-issue-field-number").then(s.bind(null,"./src/packages/issue/fields/number/src/index.js")),{moduleId:"./src/packages/issue/fields/number/src/index.js"}),qL=Object(n.memo)(({isHovering:e,isActive:t,isFocused:s,issueKey:i,estimateFieldId:r})=>{const[o,c]=Object(n.useState)(!1),[{value:l}]=Object(SO.a)({issueKey:i,fieldKey:r}),u=Object(n.useCallback)(()=>c(!0),[]),d=Object(n.useCallback)(()=>c(!1),[]),p=!(null==l)||o||!0===e||!0===s||!0===t,m=a.a.createElement(jL.a,{isEditable:!0,value:l});return p?a.a.createElement(GL,{role:"button",onClick:e=>e.preventDefault(),onFocus:e=>e.stopPropagation()},a.a.createElement(xO.b,{packageName:"issue",fallback:m},a.a.createElement($L,{issueKey:i,fieldKey:r,onEdit:u,onConfirm:d,onEnter:d,onCancel:d,onEscape:d}))):null});function zL(){return(zL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const YL=Object(j.defineMessages)({issueTypeTitle:{id:"issue.view.common.issue-line-card.issue-type.title",defaultMessage:"Issue type: {issueTypeName}"},issuePriorityTitle:{id:"issue.view.common.issue-line-card.priority.title",defaultMessage:"Priority: {issuePriorityName}"}}),{DONE:QL,statusCategoryForId:JL}=hL.a,ZL=Q.default.div(["display:flex;align-items:center;"]),XL=Object(Q.default)(ZL)(["width:","px;height:100%;margin-left:","px;margin-right:-","px;"],4*J.e,J.e/4,J.e),eR=Object(Q.default)(ZL)(["width:100%;height:100%;position:relative;"]),tR=Object(Q.default)(ZL)(["cursor:grab;"]),sR=Object(Q.default)(ZL)(["padding-left:","px;"],J.e),nR=Q.default.a(["outline:none;margin-left:","px;color:",";font-weight:600;font-size:12px;text-decoration:",";white-space:nowrap;&:hover,&:active,&:visited,&:link{outline:none;color:",";text-decoration:",";}"],J.e,e=>e.isActive?Je.a.B400:Je.a.N90,e=>e.isDone?"line-through":"none",e=>e.isActive?Je.a.B400:Je.a.N90,e=>e.isDone?"line-through":"none"),aR=Q.default.div(["",";padding-left:","px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],e=>e.isActive&&`color: ${Je.a.B400};`,J.e),iR=Q.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]);class rR extends n.Component{constructor(...e){super(...e),this.handleEditStatus=e=>{const{onEdit:t}=this.props;t({statusId:e.id,statusName:e.name,statusCategory:JL(e.statusCategory.id),statusCategoryId:e.statusCategory.id})},this.handleErrorDialogClick=e=>{e.stopPropagation()},this.handleErrorDialogMouseDown=e=>{e.preventDefault(),e.stopPropagation()},this.handleLinkKeyClick=e=>{e.preventDefault(),this.props.issueLink&&Object(nL.d)(e)?this.props.push(this.props.issueLink):window.open(this.props.issueLink,"_blank")}}shouldRenderKey(){return!!this.props.issueKey}isActionVisible(){return!this.props.isActive&&(this.props.isHovering||this.props.isFocused)}shouldShowRemoveAction(){return this.props.canRemove&&(this.props.isActive||this.props.isHovering||this.props.isFocused)}deleteButtonAction(e){e.stopPropagation(),this.props.issueKey&&this.props.onDelete(this.props.issueKey)}renderAssignee(){const{assigneeDisplayName:e,assigneeUrl:t,isDraggable:s}=this.props;return t?a.a.createElement(sR,null,a.a.createElement(Ae.a,{content:e||"",hideTooltipOnMouseDown:s,position:"bottom"},a.a.createElement(xr.a,{name:e||"",src:t,size:"small"}))):null}renderStatus(){const{isInteractive:e,issueKey:t,statusCategory:s,statusCategoryId:n,statusId:i,statusName:r,projectType:o}=this.props;return t&&s&&r&&i&&n?a.a.createElement(sR,{onClick:e=>e.preventDefault(),onFocus:e=>e.stopPropagation()},a.a.createElement(kn.a,{sourceName:"childIssuesPanel"},a.a.createElement(HL.a,{isEditable:e,appearance:"lozenge",issueKey:Object(vr.l)(t),projectType:o,initialValue:{id:i,name:r,statusCategory:{id:n}},onSuccess:this.handleEditStatus}))):null}renderPriority(){const{intl:e,isDraggable:t,issuePriorityUrl:s,issuePriorityName:n}=this.props;if(!s)return null;const i=e.formatMessage(YL.issuePriorityTitle,{issuePriorityName:n});return(a.a.createElement(Ae.a,{content:n||"",hideTooltipOnMouseDown:t,position:"bottom"},a.a.createElement(uf.a,{alt:i,url:s,width:20,height:20})))}renderLoadingSpinner(){return this.props.isLoading?a.a.createElement(sR,null,a.a.createElement(z.a,{size:"small"})):null}renderError(){return this.props.hasError||this.props.errorInlineMessage?a.a.createElement(sR,{onClick:this.handleErrorDialogClick,onMouseDown:this.handleErrorDialogMouseDown},this.props.errorInlineMessage):null}renderSummary(){const{isActive:e,issueSummary:t,isDraggable:s}=this.props;return(a.a.createElement(aR,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.summary",isActive:e},a.a.createElement(Ae.a,{content:t,hideTooltipOnMouseDown:s,position:"bottom"},a.a.createElement(iR,null,t))))}renderKey(){return a.a.createElement(nR,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.key",href:this.props.issueLink,isActive:this.props.isActive,isDone:this.props.statusCategory===QL,onClick:this.handleLinkKeyClick},this.props.issueKey)}renderRemoveButton(){return a.a.createElement(q.a,{iconBefore:a.a.createElement(bL.a,{label:""}),onClick:e=>this.deleteButtonAction(e),tabIndex:-1,appearance:"subtle",spacing:"none"})}renderRemoveButtonContainer(){const{onDelete:e,isLoading:t,hasError:s}=this.props;return e===o.a||t||s?null:a.a.createElement(XL,null,this.shouldShowRemoveAction()&&this.renderRemoveButton())}renderType(){const{intl:e,isDraggable:t,issueTypeIconUrl:s,issueTypeName:n}=this.props;if(!n)return null;const i=e.formatMessage(YL.issueTypeTitle,{issueTypeName:n});return(a.a.createElement(Ae.a,{content:n,hideTooltipOnMouseDown:t,position:"bottom"},a.a.createElement("div",null,t&&this.isActionVisible()?a.a.createElement(tR,null,a.a.createElement(gL.a,{label:i,size:"small"})):a.a.createElement(ZL,null,a.a.createElement(uf.a,{alt:i,url:s})))))}renderEstimate(){const{issueKey:e,estimateFieldId:t,isActive:s,isHovering:n,isFocused:i}=this.props;return e&&t?a.a.createElement(qL,{isActive:s,isHovering:n,isFocused:i,issueKey:Object(vr.l)(e),estimateFieldId:t}):null}render(){return a.a.createElement(eR,{isFocused:this.props.isFocused,isHovering:this.props.isHovering},this.renderType(),this.shouldRenderKey()&&this.renderKey(),this.renderSummary(),this.renderPriority(),this.renderEstimate(),this.renderAssignee(),this.renderStatus(),this.renderLoadingSpinner(),this.renderError(),this.renderRemoveButtonContainer())}}rR.displayName="IssueLineCard",rR.defaultProps={isLoading:!1,isDraggable:!1,isHovering:!1,isActive:!1,isFocused:!1,isInteractive:!0,hasError:!1,canRemove:!0,projectType:null,onDelete:o.a,onEdit:o.a};const oR=e=>{const{push:t}=Object(ms.o)();return(a.a.createElement(rR,zL({push:t},e)))};oR.displayName="IssueLineCardWithRouterActions";var cR=Object(j.injectIntl)(oR);function lR(){return(lR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function uR(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dR(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?uR(Object(s),!0).forEach((function(t){pR(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):uR(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pR(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class mR extends n.Component{constructor(...e){super(...e),this.handleClick=(e,t)=>{this.props.onClick(e,t),e.issueLink&&(Object(nL.e)(t)||Object(nL.a)(t))&&window.open(e.issueLink,"_blank")}}render(){const{issues:e,onOrderChange:t,groupId:s,isReorderEnabled:n,isInteractive:i,projectType:r,onDelete:o,onEditIssue:c,canAddIssueLinks:l}=this.props;return(a.a.createElement(sL.a,{items:e,onOrderChange:t,groupId:s,isReorderEnabled:n,isInteractive:i,onClick:this.handleClick},(e,t,u,d)=>a.a.createElement(cR,lR({isHovering:e,isActive:t,isFocused:u,isDraggable:n,isInteractive:i,issueId:d.id,projectType:r,onDelete:o&&(e=>o&&o(s,e)),onEdit:c&&(e=>c&&c(dR(dR({},d),e))),canRemove:l},d))))}}mR.displayName="IssueLineCardGroup",mR.defaultProps={isReorderEnabled:!1,isInteractive:!0,projectType:null};var bR=Object(j.defineMessages)({createChildErrorTitle:{id:"issue.views.common.child-issues-panel.issues.create-child-error-title",defaultMessage:"We couldn't create the child issue"},createSubtaskErrorTitle:{id:"issue.views.common.child-issues-panel.issues.create-subtask-error-title",defaultMessage:"We couldn't create the subtask"},createErrorBody:{id:"issue.views.common.child-issues-panel.issues.create-error-body",defaultMessage:"Check your connection, then give it another try"},linkIssueErrorTitle:{id:"issue.views.common.child-issues-panel.issues.link-issue-error-title",defaultMessage:"We couldn't link the child issue"},linkIssueErrorBody:{id:"issue.views.common.child-issues-panel.issues.link-issue-error-body",defaultMessage:"Check your connection, then give it another try"}});const fR=Q.default.div(["margin-top:","px;margin-bottom:","px;padding-right:1px;"],J.e,J.e);function gR(){return(gR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function hR(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function yR(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?hR(Object(s),!0).forEach((function(t){OR(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):hR(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function OR(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class jR extends n.Component{constructor(...e){super(...e),this.onChildIssueClick=(e,t)=>{const s=e.issueKey;s&&Object(nL.d)(t)?this.props.onNavigateToNewIssue({fromIssueKey:this.props.parentKey,toIssueKey:s}):Object(Qe.isRemoteIssueLinksEnabled)()&&s&&(Object(nL.e)(t)||Object(nL.a)(t))&&window.open(e.issueLink,"_blank")},this.onOrderChange=(e,t,s,n,a)=>{this.props.onReorderChildren(this.props.allIssues,e,s,n,a)}}inlineErrorMessage(e,t){const{intl:s,onInlineErrorCreateRetry:n,onInlineErrorLinkingRetry:a,onInlineErrorCancel:i,isClassicSubtaskPanel:r}=this.props;switch(t){case fA:return uL(s,s.formatMessage(bR.linkIssueErrorTitle),s.formatMessage(bR.linkIssueErrorBody),(t,s)=>a(e,s),()=>i(e));case bA:default:{const t=r?bR.createSubtaskErrorTitle:bR.createChildErrorTitle;return uL(s,s.formatMessage(t),s.formatMessage(bR.createErrorBody),(t,s)=>n(e,s),()=>i(e))}}}renderIssueLineCardGroup({groupId:e,issues:t,projectType:s,isReorderEnabled:n,isInteractive:i,onEditIssue:r,shouldDisplayWorklogGraph:o}){return a.a.createElement(sL.a,{items:t,onOrderChange:this.onOrderChange,groupId:e,isReorderEnabled:n,isInteractive:i,onClick:this.onChildIssueClick},(e,t,o,c)=>a.a.createElement(WL,gR({isHovering:e,isActive:t,isFocused:o,isDraggable:n,isInteractive:i,projectType:s,onEdit:r&&(e=>r&&r(yR(yR({},c),e)))},c)))}render(){const{allIssues:e,incompleteIssues:t,hideDone:s,isClassicSubtaskPanel:n,isNextGenChildrenPanel:i,projectType:r,onEditIssue:o,shouldDisplayWorklogGraph:c}=this.props,l=e.length>1,u=e.filter(e=>e.isLoading).length>0,d=(i||n)&&!s&&l&&!u,p=(s?t:e).map(e=>e.errorType?yR(yR({},e),{},{errorInlineMessage:this.inlineErrorMessage(e.id,e.errorType)}):e);return a.a.createElement(fR,null,Object(Qe.isRemoteIssueLinksEnabled)()?this.renderIssueLineCardGroup({groupId:"child-issues-panel",issues:p,projectType:r,isReorderEnabled:d,onEditIssue:o,shouldDisplayWorklogGraph:c}):a.a.createElement(mR,{groupId:"child-issues-panel",issues:p,projectType:r,onClick:this.onChildIssueClick,isReorderEnabled:d,onOrderChange:this.onOrderChange,onEditIssue:o}))}}jR.displayName="Issues",jR.defaultProps={isClassicSubtaskPanel:!1,isNextGenChildrenPanel:!1,shouldDisplayWorklogGraph:!1,allIssues:[],incompleteIssues:[],projectType:null,onReorderChildren:o.a,onEditIssue:o.a};var ER=Object(v.b)("issue")(jR),vR=Object(Ts.a)([j.injectIntl,Object(Vs.a)("button",{onInlineErrorCancel:"clicked",onInlineErrorCreateRetry:"clicked"}),Object(Vs.a)("inlineIssue",{onNavigateToNewIssue:"clicked",onReorderChildren:"dragged"}),Object(E.a)({onInlineErrorCancel:"cancelInlineErrorCreate",onInlineErrorCreateRetry:"retryInlineErrorCreate",onNavigateToNewIssue:"navigateToNewIssue",onReorderChildren:"reorderChildren"}),Object(i.b)(e=>({allIssues:Tx(e),incompleteIssues:_x(e),hideDone:Vx(e),parentKey:Qx(e),projectType:oD(e),isClassicSubtaskPanel:Gx(e),isNextGenChildrenPanel:qx(e),onNavigateToNewIssue:aD(e),shouldDisplayWorklogGraph:!!bx()&&(Gx(e)||qx(e)&&0===Dx(e))}),{onInlineErrorCancel:e=>({type:"state.entities.CANCEL_OPTIMISTIC_CHILD",payload:{optimisticId:e}}),onInlineErrorCreateRetry:(e,t)=>({type:"state.entities.CREATE_CHILD_RETRY",payload:{optimisticId:e},meta:{analyticsEvent:t}}),onInlineErrorLinkingRetry:(e,t)=>({type:"state.entities.LINKING_ISSUE_RETRY",payload:{issueId:e},meta:{analyticsEvent:t}}),onReorderChildren:(e,t,s,n,a)=>({type:"state.entities.REORDER_CHILDREN_REQUEST",payload:{currentOrder:e,newOrder:t,currentIndex:s,newIndex:n},meta:{analyticsEvent:a}}),onEditIssue:e=>({type:"state.entities.UPDATE_ISSUE",payload:e})})])(ER),kR=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/progress-bar/index.js"),wR=Object(j.defineMessages)({completionPercentageText:{id:"issue.views.common.child-issues-panel.progress-summary.completion-percentage-text",defaultMessage:"{completionPercentage}% Done"},todoIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.todo-issues-segment-tooltip-text",defaultMessage:"To Do: {todoIssueCount} of {totalIssueCount} issues"},todoSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.todo-subtasks-segment-tooltip-text",defaultMessage:"To Do: {todoIssueCount} of {totalIssueCount} subtasks"},inProgressIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.in-progress-issues-segment-tooltip-text",defaultMessage:"In Progress: {inProgressIssueCount} of {totalIssueCount} issues"},inProgressSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.in-progress-subtasks-segment-tooltip-text",defaultMessage:"In Progress: {inProgressIssueCount} of {totalIssueCount} subtasks"},completedIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.completed-issues-segment-tooltip-text",defaultMessage:"Done: {completedIssueCount} of {totalIssueCount} issues"},completedSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.completed-subtasks-segment-tooltip-text",defaultMessage:"Done: {completedIssueCount} of {totalIssueCount} subtasks"}});const SR=Je.a.N30,IR=Je.a.B400,CR=Je.a.G300,TR=Q.default.div(["display:flex;align-items:center;"]),PR=Q.default.div(["flex-grow:1;"]),_R=Q.default.div(["margin-left:","px;margin-right:","px;flex-shrink:0;color:",";"],2*J.e,.25*J.e,Je.a.N200),xR=Q.default.span(["display:inline-block;width:","px;text-align:right;"],3*J.e);function DR(){return(DR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const AR={remainingTooltip:wR.todoSubtasksSegmentTooltipText,completedTooltip:wR.completedSubtasksSegmentTooltipText,inProgressTooltip:wR.inProgressSubtasksSegmentTooltipText},MR={remainingTooltip:wR.todoIssuesSegmentTooltipText,completedTooltip:wR.completedIssuesSegmentTooltipText,inProgressTooltip:wR.inProgressIssuesSegmentTooltipText};var LR=Object(Ts.a)([j.injectIntl,Object(i.b)(e=>({isClassicSubtaskPanel:Gx(e),totalIssueCount:Tx(e).length,inProgressIssueCount:xx(e).length,completedIssueCount:Px(e).length}),{})])(e=>{const{isClassicSubtaskPanel:t,intl:{formatMessage:s},totalIssueCount:n,inProgressIssueCount:i,completedIssueCount:r}=e,o=n-i-r,c=Math.floor(r/n*100),{remainingTooltip:l,completedTooltip:u,inProgressTooltip:d}=t?AR:MR;return a.a.createElement(TR,null,a.a.createElement(PR,null,a.a.createElement(kR.b,{sum:n,backgroundColor:SR,remainingTooltipContent:s(l,{todoIssueCount:o,totalIssueCount:n})},a.a.createElement(kR.a,{value:r,color:CR,tooltipContent:s(u,{completedIssueCount:r,totalIssueCount:n})}),a.a.createElement(kR.a,{value:i,color:IR,tooltipContent:s(d,{inProgressIssueCount:i,totalIssueCount:n})}))),a.a.createElement(_R,null,a.a.createElement(j.FormattedMessage,DR({},wR.completionPercentageText,{values:{completionPercentage:a.a.createElement(xR,null,c)}}))))});class RR extends n.Component{hasIssues(){const{allIssues:e}=this.props;return e.length>0}hasContent(){const{noValueText:e,addClickCount:t}=this.props;return this.hasIssues()||t>0||!!e}renderEmptyValue(){const{noValueText:e,addClickCount:t,intl:{formatMessage:s}}=this.props;return this.hasIssues()||null===e||0!==t?null:a.a.createElement(pr.b,null,s(e))}renderIssues(){const{ProgressSummary:e,Issues:t,allIssues:s}=this.props,n=s.length>=2?a.a.createElement(e,null):null;return s.length>0?a.a.createElement(a.a.Fragment,null,n,a.a.createElement(t,null)):null}renderCreate(){const{InlineCreate:e,addClickCount:t,AddExistingIssue:s,childPanelView:n,sourceName:i}=this.props;if(t>0)switch(n){case vA.InlineCreate:return mx()?a.a.createElement(e,{inputId:i}):a.a.createElement(e,null);case vA.AddExistingIssue:return a.a.createElement(s,null);default:return null}return null}render(){const{Heading:e,onAddChildClick:t,sourceName:s}=this.props;return mx()?this.hasContent()?a.a.createElement(a.a.Fragment,null,a.a.createElement(e,{onAddChildClick:t,sourceName:s}),this.renderEmptyValue(),this.renderIssues(),this.renderCreate()):null:this.hasContent()?a.a.createElement(a.a.Fragment,null,a.a.createElement(e,{onAddChildClick:t}),this.renderEmptyValue(),this.renderIssues(),this.renderCreate()):null}}RR.displayName="ChildIssuesPanel",RR.defaultProps={addClickCount:0,noValueText:null};var NR=Object(Ts.a)([j.injectIntl,Object(i.b)(e=>({Heading:OM,InlineCreate:tL,Issues:vR,ProgressSummary:LR,AddExistingIssue:aM,childPanelView:Nx(e),allIssues:Tx(e),incompleteIssues:_x(e),addClickCount:Rx(e),noValueText:nD(e)}),{})])(RR);class UR extends n.Component{constructor(e){super(e),this.store=void 0;const{issues:t,parentKey:s,childIssuesPanelType:n}=this.props;this.store=((e,t,s)=>Object(lA.a)({appName:`${t}-child-issues-panel-${s}`,rootReducer:_A,rootEpic:e}))(cA(this.props.dataProvider),s,n),this.dispatchContext(),this.store.dispatch((()=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK"}))()),this.dispatchEntities(),"classicSubtasks"!==n&&t.length>0&&this.store.dispatch(hD());const{fetchIssueTypesStatus:a}=e;a&&this.store.dispatch(SA(a))}componentDidMount(){this.props.issues.length>0&&this.props.prefetchChildIssues(this.props.issues.map(e=>e.id))}componentDidUpdate(e){if(Object(dx.a)(e,this.props))return;const{issues:t,quickAddClickCount:s,fetchIssueTypesStatus:n}=this.props;s>e.quickAddClickCount&&this.store.dispatch(jA()),t.length&&this.dispatchEntities(),n!==e.fetchIssueTypesStatus&&(this.store.dispatch(SA(n||"NONE")),this.dispatchEntities());const a=t.map(e=>e.id),i=e.issues.map(e=>e.id);Di()(a,i)||this.props.prefetchChildIssues(a)}dispatchEntities(){const{issueTypes:e,issues:t,epicLinkFieldKey:s,issueHierarchyLevel:n}=this.props;this.store.dispatch((e=>({type:"state.entities.SET_ENTITIES",payload:e}))(bx()?{issueTypes:e.map(e=>kx(e,s)),issues:t,issueHierarchyLevel:n}:{issueTypes:e.map(e=>kx(e,s)),issues:t}))}dispatchContext(){const{supportsIssueCreation:e,baseUrl:t,locale:s,user:n,parentKey:a,customFieldIdRank:i,epicLinkFieldKey:r,parentId:o,projectId:c,projectType:l,messages:u,onNavigateToNewIssue:d,onChange:p,childIssuesPanelType:m,isIssueViewComplete:b}=this.props;let f=null,g=null;if(null!==l){const{appEditions:e}=Object(ja.f)();f=Object(Ea.e)(l),g=Object(va.f)(f,e)}this.store.dispatch((e=>({type:"state.context.SET_CONTEXT",payload:e}))({baseUrl:t,locale:s,user:n,projectId:c,parentId:o,parentKey:a,customFieldIdRank:i,epicLinkFieldKey:r,supportsIssueCreation:e,messages:u,onNavigateToNewIssue:d,onChange:p,childIssuesPanelType:m,isIssueViewComplete:b,projectType:l,application:f,edition:g,requiresFullCreate:!1}))}render(){const{locale:e,onAddChildClick:t,childIssuesPanelType:s,analyticsSource:n,issueHierarchyLevel:i}=this.props;return(a.a.createElement(lx.a,{store:this.store,locale:e},a.a.createElement(kn.a,{sourceName:"childIssuesPanel",sourceType:wn.f,attributes:{childIssuesPanelType:s,issueHierarchyLevel:i-1,analyticsSource:`issue-view (${n})`}},a.a.createElement(ux.a,null,mx()?a.a.createElement(NR,{onAddChildClick:t,sourceName:"childIssuesPanel"}):a.a.createElement(NR,{onAddChildClick:t}),a.a.createElement(Bs.FlagsDispatcher,{mapper:gx})))))}}UR.displayName="ChildIssuesPanel",UR.defaultProps={issues:[],issueTypes:[],isIssueViewComplete:!1};var FR=Object(px.a)(UR),VR=Object(j.defineMessages)({title:{id:"issue.children-issues.title",defaultMessage:"Child issues"}});function KR(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function BR(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?KR(Object(s),!0).forEach((function(t){WR(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):KR(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function WR(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function HR(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var GR=Object(Ts.a)([Object(i.b)(e=>({childIssuesPanelType:"nextGenChildren",baseUrl:Object(P.g)(e),locale:Object(P.D)(e),user:Object(P.a)(e),projectId:Object(_.C)(e),projectType:Object(_.F)(e),parentKey:Object(P.B)(e),parentId:Object(P.A)(e),customFieldIdRank:Object(ea.b)("com.pyxis.greenhopper.jira:gh-lexo-rank")(e),issueTypes:Object(Ps.h)(e),issues:Object(ox.a)(e),supportsIssueCreation:Object(Ps.i)(e),quickAddClickCount:rx(e),isIssueViewComplete:Object(_.m)(e),messages:VR,onNavigateToNewIssueStateProp:Object(P.G)(e),fetchIssueTypesStatus:Object(gI.a)(e),issueHierarchyLevel:Object(Ps.d)(e),analyticsSource:Object(P.b)(e)}),e=>({onChange:t=>{switch(t.type){case cx.CHILD_ISSUE_ADDED:e(ex(t.meta.childIssue));break;case cx.ISSUE_CHILDREN_ORDER_CHANGED:e((({issueIds:e,rankId:t,isRankAfter:s})=>({type:"ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS",payload:{issueIds:e,rankId:t,isRankAfter:s}}))(t.meta))}},onAddChildClick:()=>e(tx()),prefetchChildIssues:t=>e(Object(sx.a)({issueIds:t})),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(Yv.c)({fromIssueKey:t,toIssueKey:s}))}}),(e,t)=>{const{onNavigateToNewIssueStateProp:s}=e,n=HR(e,["onNavigateToNewIssueStateProp"]),{onNavigateToNewIssueDispatchProp:a}=t,i=HR(t,["onNavigateToNewIssueDispatchProp"]);return BR(BR(BR({},n),i),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t}),a&&a({fromIssueKey:e,toIssueKey:t})}})})])(FR),$R=s("./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js"),qR=s("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js"),zR=s("./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js"),YR=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),QR=s("./node_modules/@atlaskit/icon/glyph/warning.js"),JR=s.n(QR);const ZR=Q.default.div(["height:100%;margin-left:","px;transform:scale(",");margin-right:","px;"],J.e/4,({show:e})=>e?1:0,-J.e),XR=Q.default.div(["display:inline-block;vertical-align:middle;margin-top:","px;width:","px;height:","px;margin-left:","px;"],J.e,4*J.e,3*J.e,J.e),eN=e=>{const{show:t,onClick:s,icon:n}=e;return(a.a.createElement(ZR,{show:t},a.a.createElement(XR,null,a.a.createElement(q.a,{iconBefore:n,appearance:"subtle",onClick:s,spacing:"none"}))))};eN.displayName="LineCardHiddenButton";const tN=e=>{const{show:t,onClick:s}=e;return(a.a.createElement(eN,{show:t,icon:a.a.createElement(bL.a,null),onClick:s}))};tN.displayName="DeleteButton";const sN=Q.default.div(["display:flex;align-items:center;"]),nN=Object(Q.default)(sN)(["width:100%;height:100%;position:relative;"]),aN=Q.default.div(["margin-left:-2px;"]),iN=Q.default.div(["margin-left:-1px;"]),rN=Q.default.div(["padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],J.e/2),oN=Q.default.div(["padding-left:","px;overflow:hidden;"],J.e),cN=Q.default.div(["padding-left:","px;"],J.e);class lN extends n.Component{constructor(...e){super(...e),this.onDeleteClick=e=>{const{onDeleteClick:t,globalId:s}=this.props;e.stopPropagation(),t(s)},this.authenticateApplink=e=>{const{error:t,repairLinkHref:s,onAuthenticateApplink:n}=this.props;"APPLINK_REQ_AUTH"===t&&s&&n&&n(s),e.stopPropagation()},this.openRepairApplink=e=>{const{repairLinkHref:t}=this.props;t&&window.open(t,"_blank"),e.stopPropagation()},this.openConfluenceLink=e=>{window.open(this.props.href,"_blank"),e.stopPropagation()},this.renderErrorIcon=()=>a.a.createElement(aN,null,a.a.createElement(JR.a,{label:"",primaryColor:Je.a.Y300})),this.renderPadlockIcon=()=>a.a.createElement(iN,null,a.a.createElement(ho.a,{label:"",primaryColor:Je.a.B300})),this.renderErrorText=()=>a.a.createElement(rN,null,a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.loading-error",defaultMessage:"We couldn't load this page."})),this.renderAuthRequiredText=()=>a.a.createElement(rN,null,a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.auth-required",defaultMessage:"Authenticate with Confluence to see this page."})),this.renderMissingApplinkText=()=>a.a.createElement(rN,null,a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.missing-applink",defaultMessage:"Confluence site not linked."}))}renderIcon(){const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderPadlockIcon():this.renderErrorIcon()}renderText(){const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderAuthRequiredText():"APPLINK_MISSING"===e?this.renderMissingApplinkText():this.renderErrorText()}renderAuthorizationRepairLink(){return a.a.createElement(cN,null,a.a.createElement(q.a,{appearance:"link",spacing:"none",onClick:this.authenticateApplink},a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.auth-repair-link",defaultMessage:"Authenticate"})))}renderApplinkRepairLink(){return a.a.createElement(cN,null,a.a.createElement(q.a,{appearance:"link",spacing:"none",onClick:this.openRepairApplink},a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.applink-repair-link",defaultMessage:"Repair"})))}renderRepairLink(){const{error:e,href:t,repairLinkHref:s}=this.props;if(s){let s;"APPLINK_MISSING"===e?s=this.renderApplinkRepairLink():"APPLINK_REQ_AUTH"===e&&(s=this.renderAuthorizationRepairLink());const n=t?a.a.createElement(oN,null,"\u2022"):null;return(a.a.createElement(a.a.Fragment,null,s,n))}return null}renderLink(){return a.a.createElement(cN,null,a.a.createElement(q.a,{appearance:"link",spacing:"none",onClick:this.openConfluenceLink},a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.open-link",defaultMessage:"Open in Confluence"})))}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return(a.a.createElement(tN,{show:e||t,onClick:this.onDeleteClick}))}render(){return a.a.createElement(nN,null,this.renderIcon(),this.renderText(),this.renderRepairLink(),this.renderLink(),this.renderDeleteButton())}}lN.displayName="ConfluencePageLineCardError";var uN=s("./node_modules/@atlaskit/icon-object/glyph/blog/16.js"),dN=s.n(uN),pN=s("./node_modules/@atlaskit/icon-object/glyph/page/16.js"),mN=s.n(pN);const bN=Q.default.div(["display:flex;align-items:center;"]),fN=Object(Q.default)(bN)(["padding-left:","px;"],J.e),gN=Object(Q.default)(bN)(["width:100%;height:100%;position:relative;"]),hN=Q.default.div(["height:","px;padding-right:2px;"],3.5*J.e),yN=Q.default.div([""," padding-left:","px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],e=>e.isFocused&&`color: ${Je.a.B400};`,J.e);class ON extends n.Component{constructor(...e){super(...e),this.onDeleteClick=e=>{const{onDeleteClick:t,globalId:s}=this.props;e.stopPropagation(),t(s)}}renderPageIcon(){const e="blogpost"===this.props.pageType,t=e?a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card.blog-icon",defaultMessage:"Confluence blog post"}):a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card.page-icon",defaultMessage:"Confluence page"});return a.a.createElement(Ae.a,{content:t,position:"bottom"},e?a.a.createElement(dN.a,null):a.a.createElement(mN.a,null))}renderPageTitle(){const{pageTitle:e,isFocused:t}=this.props;return(a.a.createElement(yN,{isFocused:t},e))}renderLastUpdateAvatar(){const{userDisplayName:e,userAvatarUrl:t}=this.props;return t?e?a.a.createElement(fN,null,a.a.createElement(Ae.a,{content:e,position:"bottom"},a.a.createElement(hN,null,a.a.createElement(xr.a,{name:e,src:t,size:"small"})))):a.a.createElement(fN,null,a.a.createElement(xr.a,{src:t,size:"small"})):null}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return(a.a.createElement(tN,{show:e||t,onClick:this.onDeleteClick}))}render(){return a.a.createElement(gN,null,this.renderPageIcon(),this.renderPageTitle(),this.renderLastUpdateAvatar(),this.renderDeleteButton())}}ON.displayName="ConfluencePageLineCard";var jN=ON;class EN extends n.Component{constructor(...e){super(...e),this.state={modalOpen:!1,linkToDeleteId:null},this.onCancelDelete=()=>{this.setState({modalOpen:!1,linkToDeleteId:null})},this.onConfirmDelete=()=>{const{onDeleteConfluencePageLink:e}=this.props,{linkToDeleteId:t}=this.state;null!=t&&e(t),this.setState({modalOpen:!1,linkToDeleteId:null})},this.onDeleteClick=e=>{this.setState({modalOpen:!0,linkToDeleteId:e})},this.handleErrorLineCardClick=e=>{e.link&&e.link.href&&window.open(e.link.href,"_blank")},this.handleLineCardClick=e=>{e.href&&window.open(e.href,"_blank")},this.handleClick=(e,t)=>{this.props.onClick&&this.props.onClick(e,t),e.error?this.handleErrorLineCardClick(e):this.handleLineCardClick(e)},this.renderErrorLineCard=(e,t,s)=>a.a.createElement(lN,{globalId:e.link.globalId,error:e.error,href:e.link.href,repairLinkHref:e.repairLink?e.repairLink.href:null,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteClick:this.onDeleteClick,isHovering:t,isFocused:s}),this.renderLineCard=(e,t,s)=>a.a.createElement(jN,{globalId:e.globalId,pageTitle:e.title,pageType:e.type,userDisplayName:e.lastUpdatedContext&&e.lastUpdatedContext.user.displayName,userAvatarUrl:e.lastUpdatedContext&&e.lastUpdatedContext.user.avatarUrl,onDeleteClick:this.onDeleteClick,isHovering:t,isFocused:s})}render(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(sL.a,{items:this.props.pages,groupId:this.props.groupId,onClick:this.handleClick},(e,t,s,n)=>n.error?this.renderErrorLineCard(n,e,s):this.renderLineCard(n,e,s)),this.state.modalOpen&&a.a.createElement(Kt.a,{appearance:"danger",headerMessage:a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.title",defaultMessage:"Delete the Confluence page link?"}),contentMessage:a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.content",defaultMessage:"You can add the page later again if you need to."}),confirmActionText:a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.confirmation-text",defaultMessage:"Delete"}),cancelActionText:a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.cancellation-text",defaultMessage:"Cancel"}),onConfirm:this.onConfirmDelete,onCancel:this.onCancelDelete}))}}EN.displayName="ConfluencePageLineCardGroup";var vN=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),kN=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),wN=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),SN=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js");class IN extends n.Component{getItems(){return BE()(this.props.itemCount).map(e=>a.a.createElement(SN.a,{key:e,fontSize:20,lineHeight:41,intrusion:0}))}render(){const{paddingTopInPixels:e,paddingBottomInPixels:t}=this.props;return(a.a.createElement(wN.a,null,a.a.createElement(kN.b,null),a.a.createElement(vN.a,{paddingTop:e,paddingBottom:t},this.getItems())))}}IN.displayName="ItemLineCardGroup",IN.defaultProps={paddingTopInPixels:0,paddingBottomInPixels:0};const CN=Object(j.defineMessages)({label:{id:"issue.confluence-links-add-label",defaultMessage:"Link a Confluence Page"}}),TN=Q.default.span(["margin-left:auto;"]);class PN extends n.Component{render(){return a.a.createElement(TN,null,a.a.createElement(__.a,{label:this.props.intl.formatMessage(CN.label),onClick:this.props.onClick}))}}PN.displayName="AddButton",PN.defaultProps={onClick:o.a};var _N=Object(j.injectIntl)(PN),xN=s("./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js");const DN=Object(Xn.createSelector)(_.I,YR.h,YR.j,(e,t=[],s=[])=>{const n=e.recentlyVisitedConfluencePages||[],a=t.concat(s).map(e=>e.href);return n.filter(e=>!a.includes(e.href))}),AN="addconfluencelink.error.duplicate",MN="addconfluencelink.error.page.forbidden",LN="addconfluencelink.error.issueId.invalid",RN="addconfluencelink.error.no.matching.app.link",NN="addconfluencelink.error.pageid.notfound",UN="addconfluencelink.error.page.unauthorized",FN="addconfluencelink.error.url.invalid",VN="addconfluencelink.error.url.required";var KN=Object(j.defineMessages)({fieldLabel:{id:"issue.views.confluence-pages.link.label",defaultMessage:"Search pages or paste in a link"},fieldPlaceholder:{id:"issue.views.confluence-pages.link.placeholder",defaultMessage:"Search pages or paste in a link"},genericErrorText:{id:"issue.views.confluence-pages.link.error.generic",defaultMessage:"We're having trouble. Check your connection and try again."},duplicateErrorText:{id:"issue.views.confluence-pages.link.error.duplicate",defaultMessage:"That page is already linked to this issue."},forbiddenErrorText:{id:"issue.views.confluence-pages.link.error.forbidden",defaultMessage:"You don't have permission to link to Confluence pages."},issueIdErrorText:{id:"issue.views.confluence-pages.link.error.issue-id",defaultMessage:"We're having trouble. Check your connection and try again."},noMatchingApplinkErrorText:{id:"issue.views.confluence-pages.link.error.no-matching-app-link",defaultMessage:"You don't have an application link set up for that Confluence site."},pageIdNotFoundErrorText:{id:"issue.views.confluence-pages.link.error.page-id-not-found",defaultMessage:"We can't find that page. It might be deleted or restricted."},unauthorizedErrorText:{id:"issue.views.confluence-pages.link.error.unauthorized",defaultMessage:"You need to authorize this pages' Confluence site."},urlInvalidErrorText:{id:"issue.views.confluence-pages.link.error.url-invalid",defaultMessage:"That URL doesn't look right. Try entering it again."},urlRequiredErrorText:{id:"issue.views.confluence-pages.link.error.url-required",defaultMessage:"That URL doesn't look right. Try entering it again."},linkButton:{id:"issue.views.confluence-pages.link.link-button",defaultMessage:"Link"},cancelButton:{id:"issue.views.confluence-pages.link.cancel-button",defaultMessage:"Cancel"}});const BN={[AN]:KN.duplicateErrorText,[MN]:KN.forbiddenErrorText,[LN]:KN.issueIdErrorText,[RN]:KN.noMatchingApplinkErrorText,[NN]:KN.pageIdNotFoundErrorText,[UN]:KN.unauthorizedErrorText,[FN]:KN.urlInvalidErrorText,[VN]:KN.urlRequiredErrorText};var WN=e=>BN[e]||KN.genericErrorText,HN=s("./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/product-requirements/state/store.js"),GN=Object(jb.asyncComponent)({resolve:()=>s.e("async-product-requirements-controller").then(s.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/product-requirements/controllers/index.js")),name:"AsyncProductRequirementsController"}),$N=s("./node_modules/react-select/dist/react-select.esm.js"),qN=s("./node_modules/@atlaskit/icon/glyph/link-filled.js"),zN=s.n(qN);const YN=Q.default.div(["display:flex;align-items:center;height:34px;"]),QN=Q.default.div(["margin-right:","px;line-height:1;"],2*J.e),JN=Q.default.div(["display:flex;flex-direction:column;"]),ZN=Q.default.div(["line-height:1.25em;font-size:14px;font-weight:500;"]);class XN extends n.PureComponent{render(){const{href:e,onSelect:t}=this.props;return(a.a.createElement(YN,{onClick:()=>t&&t(e)},a.a.createElement(QN,null,a.a.createElement(zN.a,{label:"",size:"medium",primaryColor:Je.a.B200})),a.a.createElement(JN,null,a.a.createElement(ZN,null,a.a.createElement(pr.a,null,e)))))}}XN.displayName="LinkItem";var eU=XN,tU=s("./node_modules/@atlaskit/icon-object/glyph/blog/24.js"),sU=s.n(tU),nU=s("./node_modules/@atlaskit/icon-object/glyph/page/24.js"),aU=s.n(nU);const iU=Q.default.div(["display:flex;align-items:center;height:34px;"]),rU=Q.default.div(["margin-right:","px;line-height:1;"],2*J.e),oU=Q.default.div(["display:flex;flex-direction:column;"]),cU=Q.default.div(["line-height:1.25em;font-size:14px;font-weight:500;"]),lU=Q.default.div(["font-size:12px;color:",";"],Je.a.N200);class uU extends n.PureComponent{render(){if(!this.props.page)return null;const{title:e,space:t,type:s,href:n}=this.props.page;return(a.a.createElement(iU,{onClick:()=>this.props.onSelect&&this.props.onSelect(n)},a.a.createElement(rU,null,"blogpost"===s?a.a.createElement(sU.a,null):a.a.createElement(aU.a,null)),a.a.createElement(oU,null,a.a.createElement(cU,null,a.a.createElement(pr.a,null,e)),a.a.createElement(lU,null,a.a.createElement(pr.a,null,t)))))}}uU.displayName="ConfluencePageItem";var dU=uU,pU=Object(j.defineMessages)({enterOrSelectConfluenceLink:{id:"issue.views.confluence-pages.link.selector.placeholder",defaultMessage:"Search pages or paste in a link"},noOptionsMessage:{id:"issue.views.confluence-pages.link.selector.noOptionsMessage",defaultMessage:"No recently visited pages"}}),mU=s("./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/styled.js");function bU(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function fU(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?bU(Object(s),!0).forEach((function(t){gU(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):bU(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function gU(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function hU(){return(hU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const yU=e=>{const{innerProps:t,innerRef:s,getStyles:n,data:i}=e,r=n("option",e);return a.a.createElement(mU.a,{style:r},a.a.createElement("div",hU({},t,{ref:s}),i.page?a.a.createElement(dU,hU({key:`item_key-${i.page.href}`},i)):a.a.createElement(eU,{href:Object(vr.i)(e.value)})))};yU.displayName="Option";class OU extends n.Component{constructor(...e){super(...e),this.state={isMenuOpen:!1,value:void 0},this.onKeyDown=e=>{switch(e.keyCode){case DA()("enter"):this.props.onEnter&&!this.state.isMenuOpen&&(this.props.onEnter(),e.stopPropagation())}},this.onMenuOpen=()=>{const{onMenuOpen:e}=this.props;e&&e(),this.setState({isMenuOpen:!0})},this.onMenuClose=()=>this.setState({isMenuOpen:!1}),this.handleChange=e=>{e&&e.page&&this.props.onSelect&&this.props.onSelect(),this.setState({value:e}),this.props.onChange(e?e.value:null)}}render(){const{value:e}=this.state,{options:t,intl:{formatMessage:s},link:n,isLoading:i,filterOption:r=Object($N.c)(),customComponents:o={}}=this.props;return a.a.createElement(lb,{validationState:this.props.validationState||"default",validationMessage:this.props.validationMessage},a.a.createElement(AA.a,{isClearable:!0,isDisabled:i,filterOption:r,isLoading:i,onChange:this.handleChange,value:""!==n&&e?e:null,components:fU({Option:yU},o),options:t,placeholder:s(pU.enterOrSelectConfluenceLink),validationState:this.props.validationState||"default",getOptionLabel:e=>e.page?e.page.href:e.value,maxMenuHeight:256,autoFocus:!0,menuPlacement:"auto",minMenuHeight:100,onKeyDown:this.onKeyDown,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,noOptionsMessage:()=>s(pU.noOptionsMessage)}))}}function jU(){return(jU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}OU.displayName="LinkSelect",OU.defaultProps={isLoading:!1,link:void 0};var EU=e=>{const{options:t}=e;return"not-enrolled"===Object(Qe.getProductRequirementsDocDiscoveryFlag)()?a.a.createElement(OU,e):a.a.createElement(HN.a,null,a.a.createElement(GN,{options:t,Option:yU},({options:t,filterOption:s,components:n,onMenuOpen:i})=>a.a.createElement(OU,jU({},e,{options:t,filterOption:s,customComponents:n,onMenuOpen:i}))))};const vU=Object(BM.a)(q.a,{target:"eplslgz0"})("margin-left:",J.e,"px !important;"),kU=Q.default.div(["margin-top:","px;display:flex;justify-content:flex-end;"],J.e);class wU extends n.Component{constructor(e){super(e),this.onChildContainerRefSet=e=>{this.childContainer=e},this.onChange=e=>{const{isInvalid:t,onInvalidLinkModified:s}=this.props,n=NM()(e),a=mo()(n);this.setState({isDisabled:a,link:n}),t&&s()},this.onSubmitClicked=()=>{this.onSubmit(),this.props.onSubmitClickAnalytics()},this.onCancelClicked=()=>{this.closeAndReset(),this.props.onCancelClickAnalytics()},this.onEnterPressed=()=>{this.onSubmit(),this.props.onEnterKeyPressedAnalytics()},this.onEscPressed=()=>{this.closeAndReset(),this.props.onEscapeKeyPressedAnalytics()},this.onSelect=e=>{this.setState({link:e,isDisabled:!1}),this.props.onSelectAnalytics()},this.childContainer=void 0,this.initialState={link:"",isDisabled:!0,showList:!1},this.state=this.initialState}componentDidMount(){Object(Br.a)(this.childContainer),this.props.requestRecentlyViewedPages()}componentDidUpdate(e){this.props.createLinkClickedCount!==e.createLinkClickedCount&&Object(Br.a)(this.childContainer),this.props.linkedPagesCount>e.linkedPagesCount&&!this.props.isLoading&&e.isLoading&&this.resetAndFocus()}onSubmit(){const{isDisabled:e,link:t}=this.state,{isLoading:s,onSubmit:n}=this.props;e||s||n(t)}closeAndReset(){this.props.isLoading||(this.reset(),this.props.onCancel())}resetAndFocus(){this.reset()}reset(){this.setState(this.initialState)}render(){const{intl:e,intl:{formatMessage:t},errorMessage:s,isInvalid:n,isLoading:i,recentlyViewedPages:r}=this.props,{link:o,isDisabled:c}=this.state,l=r.map(e=>({label:e.title,value:e.href,page:e}));return a.a.createElement("div",{ref:this.onChildContainerRefSet},a.a.createElement(G.a,{onEscape:this.onEscPressed},a.a.createElement(EU,{options:l,onChange:this.onChange,intl:e,validationMessage:n?t(WN(s)):void 0,validationState:n?"error":"default",onSelect:this.props.onSelectAnalytics,onEnter:this.onEnterPressed,link:o,isLoading:i})),a.a.createElement(kU,null,a.a.createElement(vU,{appearance:"primary",onClick:this.onSubmitClicked,isDisabled:c,isLoading:i},t(KN.linkButton)),a.a.createElement(vU,{appearance:"subtle",onClick:this.onCancelClicked},t(KN.cancelButton))))}}wU.displayName="ConfluencePageCreateLinkView";var SU=Object(Ts.a)([j.injectIntl,Object(Vs.a)("button",{onSubmitClickAnalytics:"clicked",onCancelClickAnalytics:"clicked"}),Object(Vs.a)("keyboardShortcut",{onEnterKeyPressedAnalytics:"pressed",onEscapeKeyPressedAnalytics:"pressed"}),Object(Vs.a)("confluencePagesCreateLinkView",{onSubmit:"onSubmit"}),Object(E.a)({onSubmitClickAnalytics:"linkConfluencePage",onCancelClickAnalytics:"cancelLinkConfluencePage",onEnterKeyPressedAnalytics:"linkConfluencePage",onEscapeKeyPressedAnalytics:"cancelLinkConfluencePage"}),Object(Vs.a)("recentlyVisitedPages",{onSelectAnalytics:"selected"}),Object(E.a)({onSelectAnalytics:"selectConfluencePage"}),Object(i.b)(e=>({linkedPagesCount:Object(YR.g)(e),errorMessage:Object(YR.b)(e),isInvalid:Object(YR.d)(e),isLoading:Object(YR.e)(e),createLinkClickedCount:Object(YR.a)(e),recentlyViewedPages:DN(e)}),e=>({onInvalidLinkModified:()=>e(Object(qR.b)()),onCancel:()=>e(Object(qR.i)()),onSubmit:(t,s)=>e(Object(qR.c)(Object(vr.i)(t),s)),requestRecentlyViewedPages:()=>e(Object(xN.b)())}))])(wU);const IU=Q.default.h3([""," margin:0;"],Je.c.h200()),CU=Q.default.div(["margin:","px 0;padding-right:1px;"],J.e);class TU extends n.Component{constructor(...e){super(...e),this.renderHeading=()=>{const{canLinkConfluencePage:e,onAddButtonClicked:t}=this.props;return(a.a.createElement(Ki.c,null,a.a.createElement(Ki.e,null,a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.heading",defaultMessage:"Confluence pages"})),a.a.createElement(Ki.d,null,e&&this.hasLinkedPages()&&a.a.createElement(_N,{onClick:t}))))},this.renderLinkedPagesIfAny=()=>this.hasAnyLinkedPageLoaded()&&this.props.linkedPages?a.a.createElement(EN,{groupId:"linked-confluence-pages",pages:this.props.linkedPages,onClick:this.props.onLinkedPageClicked,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteConfluencePageLink:this.props.onDeleteConfluencePageLink}):null,this.renderMentionedPagesIfAny=()=>this.hasAnyMentionedPageLoaded()&&this.props.mentionedPages?a.a.createElement(EN,{groupId:"mentioned-confluence-pages",pages:this.props.mentionedPages,onClick:this.props.onMentionedPageClicked,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteConfluencePageLink:this.props.onDeleteConfluencePageLink}):null}shouldShowConfluencePages(){return this.props.isCreateLinkedPageOpened||this.hasLinkedPages()||this.hasMentionedPages()}hasLinkedPages(){return this.props.linkedPages&&this.props.linkedPages.length>0}hasMentionedPages(){return this.props.mentionedPages&&this.props.mentionedPages.length>0}hasAnyLinkedPageLoaded(){return this.props.linkedPages&&this.props.linkedPages.length>0}hasAnyMentionedPageLoaded(){return this.props.mentionedPages&&this.props.mentionedPages.length>0}renderLinkedPages(){return a.a.createElement(CU,null,this.props.linkedPages?this.renderLinkedPagesIfAny():a.a.createElement(IN,{itemCount:this.props.linkedPagesCachedCount}))}renderMentionedPages(){return a.a.createElement(CU,null,a.a.createElement(IU,null,a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.mentioned-on",defaultMessage:"mentioned on"})),this.props.mentionedPages?this.renderMentionedPagesIfAny():a.a.createElement(IN,{itemCount:this.props.mentionedPagesCachedCount}))}renderCreateLinkedPage(){return this.props.isCreateLinkedPageOpened?a.a.createElement(SU,null):null}renderConfluencePageFragment(){return a.a.createElement(a.a.Fragment,null,this.renderHeading(),this.hasLinkedPages()&&this.renderLinkedPages(),this.hasMentionedPages()&&this.renderMentionedPages(),this.renderCreateLinkedPage())}render(){return this.props.isConfluencePageLinksEnabled&&this.shouldShowConfluencePages()?this.renderConfluencePageFragment():null}}TU.displayName="ConfluencePagesView",TU.defaultProps={isConfluencePageLinksEnabled:!1,linkedPagesCachedCount:0,mentionedPagesCachedCount:0};var PU=Object(Ts.a)([Object(Vs.a)("ItemLineCardGroup",{onMentionedPageClicked:"clicked",onLinkedPageClicked:"clicked"}),Object(E.a)({onMentionedPageClicked:"MentionedConfluencePage",onLinkedPageClicked:"LinkedConfluencePage"}),Object(Vs.a)("DeleteConfluencePage",{onDeleteConfluencePageLink:"clicked"}),Object(E.a)({onDeleteConfluencePageLink:e=>({name:"onDeleteConfluencePageLink",globalId:e})}),Object(i.b)(e=>({isCreateLinkedPageOpened:Object(YR.f)(e),linkedPages:Object(YR.h)(e),linkedPagesCachedCount:Object(YR.g)(e),mentionedPages:Object(YR.j)(e),mentionedPagesCachedCount:Object(YR.i)(e),isConfluencePageLinksEnabled:Object(YR.c)(e),canLinkConfluencePage:Object(zR.a)(e)}),e=>({onAuthenticateApplink:t=>e(Object($R.a)(t)),onDeleteConfluencePageLink:t=>e(Object(qR.f)(t)),onAddButtonClicked:()=>e(Object(qR.h)())}))])(TU);const _U=Object(Xn.createSelector)(gI.c,e=>!!e.find(gI.b)),xU=Object(Xn.createSelector)(Yu.g,_U,P.u,P.q,({canCreateIssuesInClassicProjectEpic:e},t,s,n)=>e&&!(!!t&&(s||n)));var DU=Object(j.defineMessages)({noValueText:{id:"issue.placeholder-for-empty-epic-issues-field",defaultMessage:"There are no issues in this epic"},title:{id:"issue.epic-issues-title",defaultMessage:"Issues in this epic"}});function AU(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function MU(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?AU(Object(s),!0).forEach((function(t){LU(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):AU(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function LU(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function RU(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var NU=Object(Ts.a)([Object(i.b)(e=>({childIssuesPanelType:"classicProjectEpicChildren",baseUrl:Object(P.g)(e),locale:Object(P.D)(e),user:Object(P.a)(e),projectId:Object(_.C)(e),projectType:Object(_.F)(e),parentId:Object(P.A)(e),parentKey:Object(P.B)(e),epicLinkFieldKey:Object(_.f)(e),issueTypes:Object(gI.c)(e),issues:Object(ox.a)(e),messages:DU,quickAddClickCount:ix(e),supportsIssueCreation:xU(e),isIssueViewComplete:Object(_.m)(e),onNavigateToNewIssueStateProp:Object(P.G)(e),fetchIssueTypesStatus:Object(gI.a)(e)}),e=>({onChange:t=>{switch(t.type){case cx.CHILD_ISSUE_ADDED:e(ex(t.meta.childIssue))}},onAddChildClick:()=>e(tx()),prefetchChildIssues:t=>e(Object(sx.a)({issueIds:t})),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(Yv.c)({fromIssueKey:t,toIssueKey:s}))}}),(e,t)=>{const{onNavigateToNewIssueStateProp:s}=e,n=RU(e,["onNavigateToNewIssueStateProp"]),{onNavigateToNewIssueDispatchProp:a}=t,i=RU(t,["onNavigateToNewIssueDispatchProp"]);return MU(MU(MU({},n),i),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t}),a&&a({fromIssueKey:e,toIssueKey:t})}})})])(FR),UU=s("./src/packages/platform/utils/constants/src/project-types.js"),FU=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/with-link-actions/index.js"),VU=s("./src/packages/issue/issue-view/src/actions/issue-links-actions.js"),KU=s("./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js"),BU=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),WU=s("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js"),HU=s("./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js");const GU=Object(Xn.createSelector)(_.e,e=>e.jiraAppLinks||{status:"NOT_LOADED",remoteLinks:[]}),$U=Object(Xn.createSelector)(GU,e=>e.status),qU=Object(Xn.createSelector)(BU.f,Em.f,(e,t)=>e&&t),zU=Object(Xn.createSelector)(GU,e=>e.remoteLinks);var YU=s("./node_modules/@atlaskit/button/dist/esm/components/ButtonGroup.js");const QU=/^(([A-Z][A-Z0-9]+)-([0-9]+))($|\?.*)/,JU=()=>""!==window.location.port?Object(vr.b)(`${window.location.protocol}//${window.location.hostname}:${window.location.port}`):Object(vr.b)(`${window.location.protocol}//${window.location.hostname}`);var ZU=(e,t)=>{let s=e;if(void 0===s||void 0===t)return t||"";if(s.endsWith("/")||(s+="/"),s+="browse/",0!==t.indexOf(s))return t;const n=t.slice(s.length).match(QU);return null===n?t:n[1]||""};const XU=Q.default.div(["min-width:200px;"]),eF=e=>{const{selectItems:t,selectedItem:s,onChange:n}=e;return Object(Qe.isRemoteIssueLinksEnabled)()?a.a.createElement(jM.a,{options:t,defaultValue:s,styles:Uy.f,onChange:n}):a.a.createElement(XU,null,a.a.createElement(jM.a,{options:t,defaultValue:s,styles:Uy.f,onChange:n}))};eF.defaultProps={selectedItem:null};var tF=s("./src/packages/issue/issue-view/src/views/common/issue-line-card/assets/authKey.svg"),sF=s.n(tF);const nF=Object(j.defineMessages)({remoteLinkAuthText:{id:"issues.issue-links.jira-app-link.auth-required",defaultMessage:"Authenticate to select"}}),aF=Object(b.a)({onMenuOpen:{action:"opened",component:"select"},onMenuClose:{action:"closed",component:"select"}})(jM.a);function iF(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function rF(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?iF(Object(s),!0).forEach((function(t){oF(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):iF(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function oF(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const cF=rF(rF({},Uy.f),{},{menu:(e,t)=>rF(rF({},Uy.f.menu?Uy.f.menu(e,t):{}),{},{minWidth:t.selectProps.containerWidth||"auto"}),option:(...e)=>rF(rF({},Uy.f.option?Uy.f.option(...e):{}),{},{overflow:"initial"})});class lF extends n.Component{handleClick(e,t,s){e.preventDefault(),void 0!==this.props.onAuthenticateAppLink&&(this.props.onAuthenticateAppLink(t.fullObject.authUrl,s),s&&Object(qi.h)(s,"JiraApplinkSelectAuthentication",{appLinkId:t.fullObject.id}))}formatOptionLabel(e){const{baseUrl:t}=e.fullObject;return e.fullObject.requireCredentials?a.a.createElement(Ae.a,{content:t,position:"bottom"},a.a.createElement("p",null,e.label,"\xa0",a.a.createElement(q.a,{appearance:"link",onClick:(t,s)=>this.handleClick(t,e,s)},a.a.createElement(uf.a,{url:sF.a}),"\xa0",this.props.intl.formatMessage(nF.remoteLinkAuthText)))):a.a.createElement(Ae.a,{content:t,position:"bottom"},a.a.createElement("p",null,e.label))}getNumAppLinksRequiringAuth(){return this.props.selectItems.filter(e=>e.fullObject.requireCredentials).length}sendMenuAnalytics(e,t){e&&Object(qi.h)(e,`issueView.JiraAppLinksSelect ${t}`,"JiraAppLinksSelect",{numAppLinks:this.props.selectItems.length-1,numAppLinksRequiringAuth:this.getNumAppLinksRequiringAuth()})}onChange(e,t){this.props.onChange(e),t&&Object(qi.h)(t,"issueView.JiraAppLinksSelect changed","JiraAppLinksSelect",{appLinkId:e.fullObject.id})}render(){const{selectItems:e,defaultValue:t,containerWidth:s}=this.props;return(a.a.createElement(R.a,null,a.a.createElement(N.a,{packageName:"jiraIssueView",id:"JiraAppLinksSelect"},a.a.createElement(aF,{options:e,defaultValue:t,onChange:(e,t,s)=>this.onChange(e,s),formatOptionLabel:e=>this.formatOptionLabel(e),isOptionDisabled:e=>e.fullObject.requireCredentials,styles:cF,onMenuOpen:e=>this.sendMenuAnalytics(e,"opened"),onMenuClose:e=>this.sendMenuAnalytics(e,"closed"),containerWidth:s}),a.a.createElement(Sn.a,{onMount:t=>{t&&Object(qi.h)(t,"issueView.JiraAppLinksSelect mounted","JiraAppLinksSelect",{numAppLinks:e.length-1,numAppLinksRequiringAuth:this.getNumAppLinksRequiringAuth()})}}))))}}lF.displayName="JiraAppLinksSelect";const uF=Object(j.injectIntl)(lF);var dF=Nt()([Object(i.b)(()=>({}),e=>({onAuthenticateAppLink:(t,s)=>e(Object($R.a)(t,s))}))])(uF);const pF={label:"Local",value:"local",fullObject:{id:"local",name:"Local",baseUrl:JU(),authUrl:Object(vr.i)(""),requireCredentials:!1}};var mF=s("./node_modules/lodash/keys.js"),bF=s.n(mF),fF=s("./src/packages/platform/utils/constants/src/issue-link-types.js"),gF=s("./src/packages/platform/observability/analytics-web-react/src/utils/fire-ui-event.js"),hF=Object(j.defineMessages)({createLinkedIssueButtonLabel:{id:"issue.linked-issue-create.button-label",defaultMessage:"Create linked issue"},createLinkedIssueDialogTitle:{id:"issue.linked-issue-create.dialog-title",defaultMessage:"Create linked issue"}});function yF(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function OF(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const jF=(e,t)=>{let s={};const n=Us()(wl()(e,["fields","issuelinks"]),e=>wl()(e.outwardIssue||e.inwardIssue,"id")===t);if(void 0!==n){const e=(e=>e.outwardIssue?"INWARD":"OUTWARD")(n);s={issueLink:{id:n.id,direction:e,linkType:{id:wl()(n,["type","id"],""),label:"INWARD"===e?wl()(n,["type","inward"],""):wl()(n,["type","outward"],"")}}}}return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yF(Object(s),!0).forEach((function(t){OF(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yF(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:Object(vr.j)(e.id),key:Object(vr.l)(e.key),summary:wl()(e,["fields","summary"],""),issueTypeIconUrl:wl()(e,["fields","issuetype","iconUrl"],"")},s)};const EF="issue.views.issue-base-content.issue-links.add.create-linked-issue-button.view";class vF extends n.Component{constructor(...e){super(...e),this.showCreateLinkedIssueDialog=async()=>{const{baseUrl:e,sourceIssueId:t,sourceIssueKey:s,onLinkedIssueCreated:n}=this.props;this.showLoadingIndicator();try{const a=await Object(Va.a)({name:"wrm/require"});await new Promise(e=>{a("wr!com.atlassian.jira.jira-quick-edit-plugin:create-linked-issue",e)}),(await Object(Va.a)({name:"quick-edit/create-linked-issue/create-linked-issue-dialog"})).show({sourceIssueId:t,sourceIssueKey:s}).getQuickForm().bind("issueCreated",(s,{createdIssueDetails:a})=>{n(((e,t,s)=>{const n=jF(e,t);if(void 0===n.issueLink)return{issueLinks:{},linkedIssues:{}};const{issueLink:a}=n;return{issueLinks:{[`${a.id}`]:{id:a.id,linkedIssueKey:n.key,direction:a.direction,typeName:a.linkType.label,typeId:a.linkType.id}},linkedIssues:{[`${n.key}`]:{id:n.id,issueKey:n.key,issueLink:Object(gy.g)(s,n.key),issueSummary:n.summary,issueTypeIconUrl:n.issueTypeIconUrl}}}})(a,t,e))})}catch(e){this.hideLoadingIndicator(),y.a.safeError(EF,e)}},this.onCreateLinkedIssueClick=(e,t)=>{Object(gF.a)(t,{name:"createLinkedIssue"}),this.showCreateLinkedIssueDialog()},this.showLoadingIndicator=async()=>{try{(await Object(Va.a)({name:"quick-edit/util/loading-indicator"})).showLoadingIndicator()}catch(e){y.a.safeError(EF,e)}},this.hideLoadingIndicator=async()=>{try{(await Object(Va.a)({name:"quick-edit/util/loading-indicator"})).hideLoadingIndicator()}catch(e){y.a.safeError(EF,e)}}}render(){const{intl:{formatMessage:e}}=this.props;return(a.a.createElement(q.a,{spacing:"compact",onClick:this.onCreateLinkedIssueClick,appearance:"link",iconBefore:a.a.createElement(Lb.a,{size:"small",label:e(hF.createLinkedIssueButtonLabel)})},e(hF.createLinkedIssueButtonLabel)))}}vF.displayName="CreateLinkedIssueButton";var kF=Object(Ts.a)([j.injectIntl,Object(Vs.a)("createLinkedIssueButton",{onLinkedIssueCreated:"created"}),Object(i.b)(e=>({baseUrl:Object(P.g)(e),sourceIssueKey:Object(P.B)(e),sourceIssueId:Object(vr.j)(String(Object(P.A)(e)))}),e=>({onLinkedIssueCreated:(t,s)=>{e(Object(VU.c)(t)),e(Object(VU.b)()),(({issueLinks:e,linkedIssues:t},s)=>{const n=bF()(e)[0];if(void 0!==n){const a=e[n],i={action:"created",actionSubjectId:t[a.linkedIssueKey].id,attributes:{linkTypeName:Object(fF.a)(a.typeName),linkTypeId:a.typeId,issueLinkId:n}};Object(f.a)(s,i)}})(t,s)}}))])(vF);const wF=/^([A-Z][A-Z0-9]+)-([0-9]+)$/i,SF=(e,t)=>({sections:s=[]}={})=>{const{baseUrl:a=Object(vr.b)(""),id:i}=t||{};return s.map(e=>e.issues).filter(e=>!!e).reduce((t,s)=>t.concat(s.map(t=>({content:`${t.key} ${t.summaryText}`,value:t.key,id:t.id?t.id.toString():"",elemBefore:Object(n.createElement)("img",{src:`${a}${t.img}`,width:16,height:16}),fullObject:t,filterValues:[e],iconUrl:`${a}${t.img}`,appLinkId:i}))),[]).reduce((e,t)=>e.findIndex(e=>e.value===t.value)<0?[...e,t]:e,[])},IF=(e,t,s,n)=>(e=>{if(e){const t=wF.exec(e);return!(!t||3!==t.length)}return!1})(s)?((e,t,s,n)=>{const a=void 0===n?Object(gy.a)(e,t,s):Object(gy.l)(e,s,n.id);return Object(KD.a)(a)})(e,t,Object(vr.l)(s),n).map(SF(s,n)).catch(()=>dD.Observable.of([])):dD.Observable.of([]);var CF=s("./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js"),TF=Object(j.defineMessages)({searchPlaceholder:{id:"issue.issue-links-search-placeholder",defaultMessage:"Search for issues"},openIssues:{id:"issue.issue-links-search-open-issues",defaultMessage:"Open Issues"},exactKey:{id:"issue.issue-links-exact-key",defaultMessage:"Exact key"},selfLinkInvalidIssue:{id:"issue.issue-link-invalid-self-link",defaultMessage:"You cannot link an issue to itself"},singleInvalidIssue:{id:"issue.issue-link-invalid-single",defaultMessage:"We can't find an issue with the key"},multipleInvalidIssues:{id:"issue.issue-link-invalid-plural",defaultMessage:"We can't find issues with the keys"},noHistoryResults:{id:"issue.issue-link-no-history-results",defaultMessage:"Type to search for an issue summary or key"}});class PF extends n.Component{constructor(...e){super(...e),this.getErrorMessage=(e,t,s)=>s.includes(e)?`${t.formatMessage(TF.selfLinkInvalidIssue)} (${e})`:1===s.length?`${t.formatMessage(TF.singleInvalidIssue)} ${s[0]}`:s.length>1?`${t.formatMessage(TF.multipleInvalidIssues)} ${s.join(", ")}`:void 0,this.fetchSuggestions=e=>{const{baseUrl:t,remoteAppLink:s,issueKey:n,intl:a}=this.props,i=a.formatMessage(TF.openIssues),r=a.formatMessage(TF.noHistoryResults);return((e,t,s,n)=>{const a=void 0===n?Object(gy.q)(e,t,s):Object(gy.m)(e,s,n.id);return Object(KD.a)(a).map(SF(s,n))})(t,n,e,s).map(e=>e.length?[{heading:i,items:e}]:[{items:[{content:r,isDisabled:!0,value:""}]}]).toPromise()},this.onChange=(e,t)=>{null!=t&&null!=t.action&&("select-option"===t.action?Object(Rr.c)().markStartOfInteraction({key:qr.TIME_TO_REFLECT_SELECTED_ISSUE,cancelExisting:!0}):"remove-value"===t.action&&Object(Rr.c)().markStartOfInteraction({key:qr.TIME_TO_REFLECT_REMOVED_ISSUE,cancelExisting:!0})),this.props.onChange(e)},this.onDataRequest=({isInitial:e})=>{e||Object(Rr.c)().markStartOfInteraction({key:qr.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e})=>{e||Object(Rr.c)().markTimeToFinishTask({key:qr.TIME_TO_REFLECT_INPUT_RESULT})},this.stripQueryValueToIssueKey=e=>{const{remoteAppLink:t}=this.props,s=void 0===t?JU():t.baseUrl;return ZU(s,e)},this.filterIssueOptions=(e,t)=>this.filterIssueSuggestionByAppLink(e)&&Object(CF.a)(e,t),this.filterIssueSuggestionByAppLink=e=>{if(Boolean(e.data&&e.data.fullObject)){var t,s;return(null===(t=e.data)||void 0===t?void 0:t.appLinkId)===(null===(s=this.props.remoteAppLink)||void 0===s?void 0:s.id)}return!0}}componentDidUpdate(e){const t=this.props.value.length,s=e.value.length;s<t?Object(Rr.c)().markTimeToFinishTask({key:qr.TIME_TO_REFLECT_SELECTED_ISSUE}):s>t&&Object(Rr.c)().markTimeToFinishTask({key:qr.TIME_TO_REFLECT_REMOVED_ISSUE})}render(){const{value:e,issueKey:t,intl:s,invalidSelections:n,remoteAppLink:i}=this.props,r={isRemote:void 0!==i};return a.a.createElement(Hb.a,{fieldId:"issue-link-search",classNamePrefix:"issue-links-search",value:e,fetchSuggestions:this.fetchSuggestions,onChangeMulti:this.onChange,canCreateNewItem:!0,formatCreateLabel:e=>`${e} (${s.formatMessage(TF.exactKey)})`,placeholder:s.formatMessage(TF.searchPlaceholder),invalidMessage:this.getErrorMessage(t,s,n),changeQueryValue:this.stripQueryValueToIssueKey,isMulti:!0,autoFocus:!0,errorMessagePosition:"bottom",onDataLoaded:this.onDataLoaded,onDataRequest:this.onDataRequest,inputId:"issue-link-search",additionalAnalyticsProps:r,filterOption:this.filterIssueOptions})}}PF.displayName="IssueSearchSelect";var _F=Object(j.injectIntl)(PF);const xF=Q.default.div(["display:flex;flex-direction:",";justify-content:space-around;align-content:stretch;> *{margin-top:","px;}>:not(:last-child){margin-right:",";}"],({isCompact:e})=>e?"column":"row",J.e,({isCompact:e})=>e?"0":`${J.e}px`),DF=Q.default.div(["flex:1;flex-basis:auto;"]),AF=Q.default.div(["margin-top:","px;display:flex;flex-wrap:wrap;justify-content:flex-end;margin-left:auto;"],J.e),MF=Q.default.div(["flex-grow:1;margin-left:-","px;"],1.5*J.e),LF=Q.default.div(["max-width:",";width:",";min-width:","px;"],({isCompact:e})=>e?"none":`${25*J.e}px`,({isCompact:e})=>e?"100%":"27%",17*J.e),RF=(e,t,s,n)=>({issueLinks:{[e]:{id:e,linkedIssueKey:s.key,direction:t.direction,typeName:t.label,typeId:t.id}},linkedIssues:{[`${s.key}`]:{id:s.key,issueKey:s.key,issueId:null!==s.id&&void 0!==s.id?s.id.toString():null,issueLink:Object(gy.g)(n,s.key),issueSummary:s.summaryText?s.summaryText:"",issueTypeIconUrl:s.img?s.img:""}}}),NF=(e,t)=>Object(vr.s)(`appId=${e}&issueId=${t}`);function UF(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function FF(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?UF(Object(s),!0).forEach((function(t){VF(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):UF(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function VF(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class KF extends n.Component{constructor(e){super(e),this.getInitialState=()=>({newIssueLinks:[],issueLinkType:this.transformIssueLinkTypesForSelect()[0],isDisabled:!0,jiraAppLink:pF}),this.isLocalJira=e=>e.value===pF.value,this.getRemoteAppLink=()=>{const{jiraAppLink:e}=this.state;return this.isLocalJira(e)?void 0:e.fullObject},this.onIssueLinkTypeChange=e=>this.setState({issueLinkType:e}),this.onJiraAppLinkChange=e=>this.setState({jiraAppLink:e,newIssueLinks:[]}),this.onIssueSearchChangeWithUserInput=e=>{let t=!1;const s=[],n=this.state.jiraAppLink.fullObject.baseUrl,a=this.updateInvalidSelections(e),i=e.map(e=>{const i=ZU(n,e.value),r=FF(FF({},e),{},{content:i,value:i});return r.fullObject||a&&a.includes(r.value)||(t=!0,s.push(()=>this.query$.next({queryIssueKey:r.content,remoteAppLink:this.getRemoteAppLink()}))),FF(FF({},r),{},{tag:{elemBefore:r.elemBefore}})}),r=!(!t&&mo()(a)&&!mo()(i));this.setState({newIssueLinks:i,isDisabled:r,invalidSelections:a}),s.map(e=>e())},this.onIssueSearchChange=e=>{this.onIssueSearchChangeWithUserInput(e)},this.onSave=(e,t)=>{const{issueLinkType:s,newIssueLinks:n,jiraAppLink:a}=this.state,{issueLinks:i}=this.props,r=this.isLocalJira(a);Object(qi.h)(t,"addLinkedIssueButton",{isRemote:!r,newLinkedIssueIds:n.map(e=>e.id)}),s&&n&&n.length>0&&(Object(Rr.c)().markStartOfInteraction({key:qr.TIME_TO_RENDER_LINKED_ISSUE}),r?this.saveLocalIssueLink(s,n,i):this.saveRemoteIssueLink(s,n,a,i))},this.saveLocalIssueLink=(e,t,s)=>{const{createAnalyticsEvent:n}=this.props,a=e.fullObject&&e.fullObject.label,i=(s&&s[a]||[]).filter(e=>!e.isRemote).map(e=>e.linkedIssueKey);t.map(e=>e.fullObject?e:FF(FF({},e),{},{fullObject:{key:e.value}})).filter(e=>!i.includes(e.fullObject.key)).forEach((t,s)=>{const a=`OPTIMISTIC_LINKED_ISSUE_${Date.now()}_${s}`;this.props.onAdd({optimisticId:a,linkedIssueKey:t.fullObject.key,issueLinkType:e.fullObject,issueLinks:RF(a,e.fullObject,t.fullObject,this.props.baseUrl)},Object(Qe.isRemoteIssueLinksEnabled)()?n({action:"succeeded"}):null)}),this.props.onClose()},this.saveRemoteIssueLink=(e,t,s,n)=>{const{createAnalyticsEvent:a}=this.props,i=n?Object.keys(n).reduce((e,t)=>[...e,...n[t]],[]).filter(e=>e.isRemote).map(e=>e.globalId):[];t.filter(e=>e.fullObject).map((t,n)=>((e,t,s,n)=>{const a=`OPTIMISTIC_LINKED_ISSUE_${Date.now()}_${e}`,{fullObject:{id:i,key:r,summaryText:o},iconUrl:c}=t,{id:l,name:u,baseUrl:d}=s;if(!i)return{id:a,applicationType:"com.atlassian.jira",applicationName:u,issueLinkUrl:Object(gy.g)(d,r),relationship:n.label,summary:o,iconUrl:Object(gy.r)(c),issueKey:r,appLinkId:l,payloadType:"WITHOUT_ISSUE_ID"};const p=Object(vr.j)(i.toString());return{id:a,globalId:NF(l,p),applicationType:"com.atlassian.jira",applicationName:u,issueLinkUrl:Object(gy.g)(d,r),relationship:n.label,summary:o,iconUrl:Object(gy.r)(c),issueKey:r,remoteIssueId:p,payloadType:"WITH_ISSUE_ID"}})(n,t,s.fullObject,e)).filter(e=>!e.globalId||!i.includes(e.globalId)).forEach(e=>{this.props.onAddRemote(e,a({action:"succeeded",isRemote:!0}))}),this.props.onClose()},this.updateInvalidSelections=e=>{const t=e?e.map(e=>e.value):[];return this.state.invalidSelections?this.state.invalidSelections.filter(e=>t.includes(e)):[]},this.handleUpdate=({issue:e,results:t})=>{const s=t.map(e=>FF(FF({},e),{},{tag:{elemBefore:e.elemBefore}}))[0];s?this.setState(t=>{const n=t.newIssueLinks.map(e=>e.value.toLowerCase()===s.value.toLowerCase()?s:e),a=t.invalidSelections&&t.invalidSelections.filter(t=>t!==e);return{newIssueLinks:n,isDisabled:a&&a.length>0,invalidSelections:a}}):this.setState(t=>({newIssueLinks:t.newIssueLinks.slice(),isDisabled:!0,invalidSelections:t.invalidSelections?t.invalidSelections.concat(e):[e]}))},this.transformIssueLinkTypesForSelect=()=>this.props.issueLinkTypes.map(e=>({label:e.label,value:e.id+e.direction,fullObject:e})),this.transformJiraAppLinksForSelect=()=>{const e=this.props.jiraAppLinks.map(e=>({label:`${e.name}`,value:e.id,fullObject:e}));return[pF,...e]},this.subscription=void 0,this.query$=void 0,this.addLinkContainer=void 0,this.renderLoading=()=>a.a.createElement(z.a,null),this.state=this.getInitialState(),this.query$=new dD.Subject,this.subscription=this.query$.flatMap(({queryIssueKey:t,remoteAppLink:s})=>IF(e.baseUrl,e.issueKey,t,s).map(e=>({issue:t,results:e}))).subscribe(this.handleUpdate)}componentDidMount(){this.addLinkContainer&&Object(Br.a)(this.addLinkContainer),!this.props.canLinkRemoteIssues||"NOT_LOADED"!==this.props.jiraAppLinksFetchStatus&&"ERROR"!==this.props.jiraAppLinksFetchStatus||this.props.fetchJiraAppLinks()}componentDidUpdate(e){e.quickAddClickedCount!==this.props.quickAddClickedCount&&Object(Br.a)(this.addLinkContainer)}componentWillUnmount(){this.subscription.unsubscribe()}renderFullAddForm(){const e=this.transformIssueLinkTypesForSelect(),t=this.transformJiraAppLinksForSelect(),{baseUrl:s,issueKey:n,containerWidth:i,onClose:r,canCreateLinkedIssue:o,canLinkRemoteIssues:c}=this.props,{issueLinkType:l,newIssueLinks:u,isDisabled:d,invalidSelections:p=[]}=this.state,m=i&&i<=480,b=t.length>1;return a.a.createElement("div",{ref:e=>{this.addLinkContainer=e}},a.a.createElement(xF,{isCompact:m},c&&b&&a.a.createElement(EM.a,null,a.a.createElement(LF,{isCompact:m},a.a.createElement(dF,{selectItems:t,defaultValue:pF,onChange:this.onJiraAppLinkChange,containerWidth:i}))),a.a.createElement(EM.a,null,a.a.createElement(LF,{isCompact:m},a.a.createElement(eF,{selectItems:e,selectedItem:l,onChange:this.onIssueLinkTypeChange}))),a.a.createElement(DF,null,a.a.createElement(_F,{value:u,baseUrl:s,issueKey:n,onChange:this.onIssueSearchChange,invalidSelections:p,remoteAppLink:this.getRemoteAppLink()}))),a.a.createElement(AF,null,o&&a.a.createElement(MF,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.create-linked-issue"},a.a.createElement(kF,null)),a.a.createElement(YU.a,null,a.a.createElement("div",{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.link-button"},a.a.createElement(q.a,{appearance:"primary",onClick:this.onSave,isDisabled:d},a.a.createElement(j.FormattedMessage,{id:"issue.issue-links-add-button-label",defaultMessage:"Link"}))),a.a.createElement(q.a,{appearance:"subtle",onClick:r},a.a.createElement(j.FormattedMessage,{id:"issue.issue-links-cancel-button-label",defaultMessage:"Cancel"})))))}render(){return!this.props.canLinkRemoteIssues||"LOADING"!==this.props.jiraAppLinksFetchStatus&&"NOT_LOADED"!==this.props.jiraAppLinksFetchStatus?this.renderFullAddForm():this.renderLoading()}}KF.displayName="AddIssueLinkView",KF.displayName="AddIssueLinkView",KF.defaultProps={issueLinks:null,quickAddClickedCount:0,containerWidth:null,onAdd:o.a,onAddRemote:o.a,onClose:o.a};var BF=Object(Ts.a)([Object(b.a)({onAdd:{action:"added"},onAddRemote:{action:"added",isRemote:!0}}),Object(i.b)(e=>({quickAddClickedCount:Object(BU.m)(e),canCreateLinkedIssue:Object(BU.a)(e),canLinkRemoteIssues:qU(e),jiraAppLinksFetchStatus:$U(e),jiraAppLinks:zU(e)}),e=>({onAdd:(t,s,n)=>e(Object(VU.o)(t,s,n)),onAddRemote:(t,s,n)=>e(Object(KU.f)(t,s,n)),fetchJiraAppLinks:()=>e(Object(HU.a)())})),Ui])(KF),WF=Object(j.defineMessages)({createLinkedIssueButtonLabel:{id:"issue.linked-issue-create.button-label",defaultMessage:"Create linked issue"},createLinkedIssueDialogTitle:{id:"issue.linked-issue-create.dialog-title",defaultMessage:"Create linked issue"}});function HF(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function GF(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $F=(e,t)=>{let s={};const n=Us()(wl()(e,["fields","issuelinks"]),e=>wl()(e.outwardIssue||e.inwardIssue,"id")===t);if(void 0!==n){const e=(e=>e.outwardIssue?"INWARD":"OUTWARD")(n);s={issueLink:{id:n.id,direction:e,linkType:{id:wl()(n,["type","id"],""),label:"INWARD"===e?wl()(n,["type","inward"],""):wl()(n,["type","outward"],"")}}}}return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?HF(Object(s),!0).forEach((function(t){GF(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):HF(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:Object(vr.j)(e.id),key:Object(vr.l)(e.key),summary:wl()(e,["fields","summary"],""),issueTypeIconUrl:wl()(e,["fields","issuetype","iconUrl"],"")},s)};const qF="issue.views.issue-base-content.issue-links.add.create-linked-issue-button.view";class zF extends n.Component{constructor(...e){super(...e),this.showCreateLinkedIssueDialog=async()=>{const{baseUrl:e,sourceIssueId:t,sourceIssueKey:s,onLinkedIssueCreated:n}=this.props;this.showLoadingIndicator();try{const a=await Object(Va.a)({name:"wrm/require"});await new Promise(e=>{a("wr!com.atlassian.jira.jira-quick-edit-plugin:create-linked-issue",e)}),(await Object(Va.a)({name:"quick-edit/create-linked-issue/create-linked-issue-dialog"})).show({sourceIssueId:t,sourceIssueKey:s}).getQuickForm().bind("issueCreated",(s,{createdIssueDetails:a})=>{n(((e,t,s)=>{const n=$F(e,t);if(void 0===n.issueLink)return{issueLinks:{},linkedIssues:{}};const{issueLink:a}=n;return{issueLinks:{[`${a.id}`]:{id:a.id,linkedIssueKey:n.key,direction:a.direction,typeName:a.linkType.label,typeId:a.linkType.id}},linkedIssues:{[`${n.key}`]:{id:n.id,issueKey:n.key,issueLink:Object(gy.g)(s,n.key),issueSummary:n.summary,issueTypeIconUrl:n.issueTypeIconUrl}}}})(a,t,e))})}catch(e){this.hideLoadingIndicator(),y.a.safeError(qF,e)}},this.onCreateLinkedIssueClick=(e,t)=>{Object(gF.a)(t,{name:"createLinkedIssue"}),this.showCreateLinkedIssueDialog()},this.showLoadingIndicator=async()=>{try{(await Object(Va.a)({name:"quick-edit/util/loading-indicator"})).showLoadingIndicator()}catch(e){y.a.safeError(qF,e)}},this.hideLoadingIndicator=async()=>{try{(await Object(Va.a)({name:"quick-edit/util/loading-indicator"})).hideLoadingIndicator()}catch(e){y.a.safeError(qF,e)}}}render(){const{intl:{formatMessage:e}}=this.props;return(a.a.createElement(q.a,{spacing:"compact",onClick:this.onCreateLinkedIssueClick,appearance:"link",iconBefore:a.a.createElement(Lb.a,{size:"small",label:e(WF.createLinkedIssueButtonLabel)})},e(WF.createLinkedIssueButtonLabel)))}}zF.displayName="CreateLinkedIssueButton";var YF=Object(Ts.a)([j.injectIntl,Object(Vs.a)("createLinkedIssueButton",{onLinkedIssueCreated:"created"}),Object(i.b)(e=>({baseUrl:Object(P.g)(e),sourceIssueKey:Object(P.B)(e),sourceIssueId:Object(vr.j)(String(Object(P.A)(e)))}),e=>({onLinkedIssueCreated:(t,s)=>{e(Object(VU.c)(t)),e(Object(VU.b)()),(({issueLinks:e,linkedIssues:t},s)=>{const n=bF()(e)[0];if(void 0!==n){const a=e[n],i={action:"created",actionSubjectId:t[a.linkedIssueKey].id,attributes:{linkTypeName:Object(fF.a)(a.typeName),linkTypeId:a.typeId,issueLinkId:n}};Object(f.a)(s,i)}})(t,s)}}))])(zF);const QF=/^([A-Z][A-Z0-9]+)-([0-9]+)$/i,JF=e=>({sections:t=[]}={})=>t.map(e=>e.issues).filter(e=>!!e).reduce((t,s)=>t.concat(s.map(t=>({content:`${t.key} ${t.summaryText}`,value:t.key,id:t.id?t.id.toString():"",elemBefore:Object(n.createElement)("img",{src:`${t.img}`,width:16,height:16}),fullObject:t,filterValues:[e],iconUrl:t.img}))),[]).reduce((e,t)=>e.findIndex(e=>e.value===t.value)<0?[...e,t]:e,[]),ZF=(e,t,s)=>(e=>{if(e){const t=QF.exec(e);return!(!t||3!==t.length)}return!1})(s)?((e,t,s)=>Object(KD.a)(Object(gy.a)(e,t,s)))(e,t,Object(vr.l)(s)).map(JF(s)).catch(()=>dD.Observable.of([])):dD.Observable.of([]);var XF=Object(j.defineMessages)({searchPlaceholder:{id:"issue.issue-links-search-placeholder",defaultMessage:"Search for issues"},openIssues:{id:"issue.issue-links-search-open-issues",defaultMessage:"Open Issues"},exactKey:{id:"issue.issue-links-exact-key",defaultMessage:"Exact key"},selfLinkInvalidIssue:{id:"issue.issue-link-invalid-self-link",defaultMessage:"You cannot link an issue to itself"},singleInvalidIssue:{id:"issue.issue-link-invalid-single",defaultMessage:"We can't find an issue with the key"},multipleInvalidIssues:{id:"issue.issue-link-invalid-plural",defaultMessage:"We can't find issues with the keys"},noHistoryResults:{id:"issue.issue-link-no-history-results",defaultMessage:"Type to search for an issue summary or key"}});const eV=()=>""!==window.location.port?`${window.location.protocol}//${window.location.hostname}:${window.location.port}`:`${window.location.protocol}//${window.location.hostname}`;class tV extends n.Component{constructor(...e){super(...e),this.getErrorMessage=(e,t,s)=>s.includes(e)?`${t.formatMessage(XF.selfLinkInvalidIssue)} (${e})`:1===s.length?`${t.formatMessage(XF.singleInvalidIssue)} ${s[0]}`:s.length>1?`${t.formatMessage(XF.multipleInvalidIssues)} ${s.join(", ")}`:void 0,this.fetchSuggestions=(e,t,s,n,a)=>{const i=eV();return((e,t,s)=>Object(KD.a)(Object(gy.q)(e,t,s)).map(JF(s)))(t,s,ZU(i,n)).map(t=>t.length?[{heading:e,items:t}]:[{items:[{content:a,isDisabled:!0,value:""}]}])},this.onChange=(e,t)=>{null!=t&&null!=t.action&&("select-option"===t.action?Object(Rr.c)().markStartOfInteraction({key:qr.TIME_TO_REFLECT_SELECTED_ISSUE,cancelExisting:!0}):"remove-value"===t.action&&Object(Rr.c)().markStartOfInteraction({key:qr.TIME_TO_REFLECT_REMOVED_ISSUE,cancelExisting:!0})),this.props.onChange(e)},this.onDataRequest=({isInitial:e})=>{e||Object(Rr.c)().markStartOfInteraction({key:qr.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e})=>{e||Object(Rr.c)().markTimeToFinishTask({key:qr.TIME_TO_REFLECT_INPUT_RESULT})},this.stripQueryValueToIssueKey=e=>{const t=eV();return ZU(t,e)}}componentDidUpdate(e){const t=this.props.value.length,s=e.value.length;s<t?Object(Rr.c)().markTimeToFinishTask({key:qr.TIME_TO_REFLECT_SELECTED_ISSUE}):s>t&&Object(Rr.c)().markTimeToFinishTask({key:qr.TIME_TO_REFLECT_REMOVED_ISSUE})}render(){const{value:e,baseUrl:t,issueKey:s,intl:n,invalidSelections:i}=this.props,r=n.formatMessage(XF.openIssues);return a.a.createElement(Hb.a,{fieldId:"issue-link-search",classNamePrefix:"issue-links-search",value:e,fetchSuggestions:e=>this.fetchSuggestions(r,t,s,e,n.formatMessage(XF.noHistoryResults)).toPromise(),onChangeMulti:this.onChange,canCreateNewItem:!0,formatCreateLabel:e=>`${e} (${n.formatMessage(XF.exactKey)})`,placeholder:n.formatMessage(XF.searchPlaceholder),invalidMessage:this.getErrorMessage(s,n,i),changeQueryValue:this.stripQueryValueToIssueKey,isMulti:!0,autoFocus:!0,errorMessagePosition:"bottom",onDataLoaded:this.onDataLoaded,onDataRequest:this.onDataRequest})}}tV.displayName="IssueSearchSelect";var sV=Object(j.injectIntl)(tV);const nV=Q.default.div(["display:flex;flex-direction:",";justify-content:space-around;align-content:stretch;> *{margin-top:","px;}>:not(:last-child){margin-right:",";}"],({isCompact:e})=>e?"column":"row",J.e,({isCompact:e})=>e?"0":`${J.e}px`),aV=Q.default.div(["flex:1;flex-basis:auto;"]),iV=Q.default.div(["margin-top:","px;display:flex;flex-wrap:wrap;justify-content:flex-end;margin-left:auto;"],J.e),rV=Q.default.div(["flex-grow:1;margin-left:-","px;"],1.5*J.e),oV=(e,t,s,n)=>({issueLinks:{[e]:{id:e,linkedIssueKey:s.key,direction:t.direction,typeName:t.label,typeId:t.id}},linkedIssues:{[`${s.key}`]:{id:s.key,issueKey:s.key,issueId:null!==s.id&&void 0!==s.id?s.id.toString():null,issueLink:Object(gy.g)(n,s.key),issueSummary:s.summaryText?s.summaryText:"",issueTypeIconUrl:s.img?s.img:""}}});function cV(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function lV(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?cV(Object(s),!0).forEach((function(t){uV(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cV(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function uV(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class dV extends n.Component{constructor(e){super(e),this.getInitialState=()=>({newIssueLinks:[],issueLinkType:this.transformIssueLinkTypesForSelect()[0],isDisabled:!0}),this.onIssueLinkTypeChange=e=>this.setState({issueLinkType:e}),this.onIssueSearchChangeWithUserInput=e=>{let t=!1;const s=[],n=JU(),a=this.updateInvalidSelections(e),i=e.map(e=>{const i=ZU(n,e.value),r=lV(lV({},e),{},{content:i,value:i});return r.fullObject||a&&a.includes(r.value)||(t=!0,s.push(()=>this.query$.next(r))),lV(lV({},r),{},{tag:{elemBefore:r.elemBefore}})}),r=!(!t&&mo()(a)&&!mo()(i));this.setState({newIssueLinks:i,isDisabled:r,invalidSelections:a}),s.map(e=>e())},this.onIssueSearchChange=e=>{this.onIssueSearchChangeWithUserInput(e)},this.onSave=()=>{const{issueLinkType:e,newIssueLinks:t}=this.state,{issueLinks:s}=this.props;if(e&&t&&t.length>0){const n=e.fullObject&&e.fullObject.label,a=(s&&s[n]||[]).map(e=>e.linkedIssueKey);Object(Rr.c)().markStartOfInteraction({key:qr.TIME_TO_RENDER_LINKED_ISSUE}),t.map(e=>e.fullObject?e:lV(lV({},e),{},{fullObject:{key:e.value}})).filter(e=>!a.includes(e.fullObject.key)).forEach((t,s)=>{const n=`OPTIMISTIC_LINKED_ISSUE_${Date.now()}_${s}`;this.props.onAdd({optimisticId:n,linkedIssueKey:t.fullObject.key,issueLinkType:e.fullObject,issueLinks:oV(n,e.fullObject,t.fullObject,this.props.baseUrl)})}),this.props.onClose()}},this.updateInvalidSelections=e=>{const t=e?e.map(e=>e.value):[];return this.state.invalidSelections?this.state.invalidSelections.filter(e=>t.includes(e)):[]},this.handleUpdate=({issue:e,results:t})=>{const s=t.map(e=>lV(lV({},e),{},{tag:{elemBefore:e.elemBefore}}));0===s.length?this.setState(t=>({newIssueLinks:t.newIssueLinks.slice(),isDisabled:!0,invalidSelections:t.invalidSelections?t.invalidSelections.concat(e):[e]})):this.setState(t=>{const n=t.newIssueLinks.slice(),a=s[0],i=n.findIndex(e=>e.value===a.value);n[i]=a;const r=t.invalidSelections&&t.invalidSelections.filter(t=>t!==e);return{newIssueLinks:n,isDisabled:r&&r.length>0,invalidSelections:r}})},this.transformIssueLinkTypesForSelect=()=>this.props.issueLinkTypes.map(e=>({label:e.label,value:e.id+e.direction,fullObject:e})),this.subscription=void 0,this.query$=void 0,this.addLinkContainer=void 0,this.state=this.getInitialState(),this.query$=new dD.Subject,this.subscription=this.query$.flatMap(t=>ZF(e.baseUrl,e.issueKey,t.content).map(e=>({issue:t.content,results:e}))).subscribe(this.handleUpdate)}componentDidMount(){this.addLinkContainer&&Object(Br.a)(this.addLinkContainer)}componentDidUpdate(e){e.quickAddClickedCount!==this.props.quickAddClickedCount&&Object(Br.a)(this.addLinkContainer)}componentWillUnmount(){this.subscription.unsubscribe()}render(){const e=this.transformIssueLinkTypesForSelect(),{baseUrl:t,issueKey:s,containerWidth:n,onClose:i,canCreateLinkedIssue:r}=this.props,{issueLinkType:o,newIssueLinks:c,isDisabled:l,invalidSelections:u=[]}=this.state,d=n&&n<=480;return a.a.createElement("div",{ref:e=>{this.addLinkContainer=e}},a.a.createElement(nV,{isCompact:d},a.a.createElement(EM.a,null,a.a.createElement(eF,{selectItems:e,selectedItem:o,onChange:this.onIssueLinkTypeChange})),a.a.createElement(aV,null,a.a.createElement(sV,{value:c,baseUrl:t,issueKey:s,onChange:this.onIssueSearchChange,invalidSelections:u}))),a.a.createElement(iV,null,r&&a.a.createElement(rV,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.create-linked-issue"},a.a.createElement(YF,null)),a.a.createElement(YU.a,null,a.a.createElement("div",{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.link-button"},a.a.createElement(q.a,{appearance:"primary",onClick:this.onSave,isDisabled:l},a.a.createElement(j.FormattedMessage,{id:"issue.issue-links-add-button-label",defaultMessage:"Link"}))),a.a.createElement(q.a,{appearance:"subtle",onClick:i},a.a.createElement(j.FormattedMessage,{id:"issue.issue-links-cancel-button-label",defaultMessage:"Cancel"})))))}}dV.displayName="AddIssueLinkView",dV.displayName="AddIssueLinkView",dV.defaultProps={issueLinks:null,quickAddClickedCount:0,containerWidth:null,onAdd:o.a,onClose:o.a};var pV=Object(Ts.a)([Object(b.a)({onAdd:{action:"added"}}),Object(i.b)(e=>({quickAddClickedCount:Object(BU.m)(e),canCreateLinkedIssue:Object(BU.a)(e)}),e=>({onAdd:(t,s)=>e(Object(VU.o)(t,null,s))})),Ui])(dV),mV=Object(j.defineMessages)({label:{id:"issue.issue-links-add-label",defaultMessage:"Link an issue"}});const bV=Q.default.span(["margin-left:auto;"]);class fV extends n.Component{render(){return a.a.createElement(bV,null,a.a.createElement(__.a,{label:this.props.intl.formatMessage(mV.label),onClick:this.props.onClick}))}}fV.displayName="AddIssueLinkButton",fV.defaultProps={onClick:o.a};var gV=Object(j.injectIntl)(fV),hV=s("./node_modules/@atlaskit/icon/glyph/editor/link.js"),yV=s.n(hV);const OV=Object(j.defineMessages)({remoteLinkAuthText:{id:"issues.issue-links.remote-issue-link-error.auth-required",defaultMessage:"Authenticate to see additional information"},remoteLinkGeneralError:{id:"issues.issue-links.remote-issue-link-error.general-error",defaultMessage:"Something is wrong with link, please refresh to fix"}}),jV=Q.default.div(["display:flex;align-items:center;"]),EV=Object(Q.default)(jV)(["width:100%;height:100%;position:relative;"]),vV=Q.default.span(["outline:none;margin-left:","px;color:",";font-weight:600;font-size:12px;white-space:nowrap;&:hover,&:active,&:visited,&:link{outline:none;color:",";}"],J.e,Je.a.N90,Je.a.N90),kV=Q.default.div(["margin-left:-2px;"]),wV=Q.default.div(["padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1;"],J.e),SV=Q.default.div(["background-color:",";width:","px;height:","px;border-radius:3px;margin-left:","px;margin-right:","px;"],Je.a.N20,5*J.e,2*J.e,2*J.e,J.e/2);class IV extends n.Component{constructor(...e){super(...e),this.renderErrorIcon=()=>a.a.createElement(kV,null,a.a.createElement(JR.a,{label:"",primaryColor:Je.a.Y300})),this.renderAuthKeyIcon=()=>a.a.createElement(uf.a,{url:sF.a}),this.renderIcon=()=>{const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderAuthKeyIcon():this.renderErrorIcon()},this.renderAuthRequiredText=()=>a.a.createElement(wV,null,this.props.intl.formatMessage(OV.remoteLinkAuthText)),this.renderAvatarSkeleton=()=>a.a.createElement(xr.a,{size:"small"}),this.renderStatusSkeleton=()=>a.a.createElement(SV,null),this.openIssueLink=e=>{void 0!==this.props.issueLink&&window.open(this.props.issueLink,"_blank"),this.props.handleUserClickAnalytics("errorCard.linkIcon"),e.stopPropagation()}}renderKey(){return a.a.createElement(vV,{onClick:()=>this.props.handleUserClickAnalytics("errorCard.issueKey")},this.props.issueKey)}renderText(){const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderAuthRequiredText():a.a.createElement(wV,null,this.props.intl.formatMessage(OV.remoteLinkGeneralError))}renderLinkButton(){const{isHovering:e,isFocused:t}=this.props;return(a.a.createElement(eN,{show:e||t,icon:a.a.createElement(yV.a,null),onClick:this.openIssueLink}))}render(){return a.a.createElement(EV,null,this.renderIcon(),this.renderKey(),this.renderText(),this.renderAvatarSkeleton(),this.renderStatusSkeleton(),this.renderLinkButton())}}IV.displayName="RemoteIssueLinkLineCardError";var CV=Object(j.injectIntl)(IV);function TV(){return(TV=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const PV=({isHovering:e,isActive:t,isFocused:s,issue:i,groupId:r,isInteractive:o,onDelete:c,canAddIssueLinks:l,projectType:u})=>{const d=Object(n.useCallback)(()=>({projectType:u,groupId:r,linkedIssueId:i.id,isRemote:i.isRemote||!1,hasError:i.hasError||!1,errorType:i.errorType||"",remoteIssueLinkError:i.remoteIssueLinkError&&i.remoteIssueLinkError.error?i.remoteIssueLinkError.error:"NONE"}),[u,r,i]),{createAnalyticsEvent:p}=Object(Ey.a)(),m=Object(n.useCallback)(e=>{const t=p({action:"clicked",actionSubject:"issueView.IssueLinkLineCard"}),s=d();Object(qi.h)(t,e,s)},[p,d]);return a.a.createElement(N.a,{id:"IssueLinkLineCard",packageName:"jiraIssueView",attributes:d()},(()=>{if(i.remoteIssueLinkError)return a.a.createElement(CV,{issueKey:i.issueKey,isHovering:e,isFocused:s,issueLink:i.issueLink,error:i.remoteIssueLinkError.error,handleUserClickAnalytics:m});const n=o&&!i.remoteServerHostname;return a.a.createElement(WL,TV({isHovering:e,isActive:t,isFocused:s,isInteractive:n,onDelete:c&&((e,t)=>c&&c(r,e,t)),canRemove:l,projectType:u,handleUserClickAnalytics:m},i))})(),(()=>a.a.createElement(Sn.a,{onMount:e=>Object(qi.b)(e,"issueView.IssueLinkLineCard loaded","IssueLinkLineCard",d())}))())};PV.displayName="IssueLinkLineCard";var _V=Object(j.defineMessages)({removeIssueLinkHeader:{id:"issues.confirm-delete-issuelink-modal-header",defaultMessage:"Remove the link to {issueKey}?"},removeIssueLinkContent:{id:"issues.confirm-delete-issuelink-modal-text",defaultMessage:"You can add it again later if you need to."},removeIssueLinkButton:{id:"issues.conirm-delete-issue-link-confirm-btn-text",defaultMessage:"Remove"},issueLinkFailureHeader:{id:"issue.issue-links-failure-header",defaultMessage:"We couldn't link the issue"},issueLinkFailureContent:{id:"issue.issue-links-failure-content",defaultMessage:"Wait a few moments, then give it another try."}});const xV=Q.default.h3(["",";margin:0;"],Je.c.h200()),DV=Q.default.div(["margin:","px 0;padding-right:1px;"],J.e),AV=Q.default.div(["margin:","px 0;padding-right:1px;"],J.e),MV=Q.default.label(["display:flex;align-items:center;justify-content:space-between;"]);function LV(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function RV(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?LV(Object(s),!0).forEach((function(t){NV(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):LV(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function NV(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const UV=(e={})=>e?Object.keys(e).reduce((t,s)=>e[s].length+t,0):0,FV=Object(v.a)("removeLinkedIssue",M.a.MODAL)(Kt.b);class VV extends n.Component{constructor(...e){super(...e),this.state={hasDeleteModal:!1,groupId:null,issueKey:null,globalId:void 0},this.onIssueClickNew=({id:e,issueKey:t,issueLink:s,remoteIssueLinkError:n,projectType:a=null,isRemote:i}={},r)=>{if(t){const{onIssueLinkClicked:t,linkActions:c,onAuthenticateApplink:l}=this.props,u="APPLINK_REQ_AUTH"===(null==n?void 0:n.error);if(t&&t(e,a,UV(this.props.issueLinks)),Object(nL.d)(r))if(u){var o;const e=null==n||null===(o=n.repairLink)||void 0===o?void 0:o.href;e&&l&&l(Object(vr.i)(e))}else s&&Object(Rb.a)(s,r.metaKey,c.push);(Object(nL.e)(r)||Object(nL.a)(r))&&!u&&s&&window.open(s,"_blank");const{createAnalyticsEvent:d}=this.props,p=d({action:"clicked",actionSubject:"card"});Object(qi.h)(p,"issueLinkedCard",{clickedIssueId:e,linkedIssuesCount:UV(this.props.issueLinks),issueNeedsAuthentication:u,isRemote:i})}},this.onIssueClick=({id:e,issueKey:t,issueLink:s,projectType:n=null}={},a)=>{if(t){const{onIssueLinkClicked:t,linkActions:i}=this.props;t&&t(e,n,UV(this.props.issueLinks)),Object(nL.d)(a)&&s&&Object(Rb.a)(s,a.metaKey,i.push)}},this.getLinkByGroupAndIssueKey=(e,t,s)=>(this.props.issueLinks&&e&&this.props.issueLinks[e]||[]).find(e=>e.linkedIssueKey===t&&e.globalId===s),this.renderIssueLinkInlineMessage=(e,t)=>{const{intl:s,retryLinkedIssue:n,cancelLinkedIssue:a,createAnalyticsEvent:i}=this.props;return uL(s,s.formatMessage(_V.issueLinkFailureHeader),s.formatMessage(_V.issueLinkFailureContent),(s,a)=>Object(Qe.isRemoteIssueLinksEnabled)()?n(e,t,i({action:"succeeded"}),a):n(e,t),()=>a(e,t))}}componentDidMount(){const{issueLinks:e,onIssueLinkRendered:t,hasLinks:s,onMountCreatePermissionFetching:n}=this.props;if(s&&t(UV(e)),n(),this.props.issueLinks){const e=this.flattenedIssueLinks().map(e=>e.linkedIssueKey);this.props.prefetchLinkedIssues(e)}}componentDidUpdate(e){const{displayAddIssueLinks:t}=this.props,s=!e.displayAddIssueLinks&&t,n=e.displayAddIssueLinks&&!t;if(s&&Object(Rr.c)().markTimeToFinishTask({key:qr.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT}),n&&Object(Rr.c)().markTimeToFinishTask({key:qr.TIME_TO_RENDER_LINKED_ISSUE}),this.props.issueLinks&&!Di()(e.issueLinks,this.props.issueLinks)){const e=this.flattenedIssueLinks().map(e=>e.linkedIssueKey);this.props.prefetchLinkedIssues(e)}}onDeleteConfirmOld(e,t){const s=this.getLinkByGroupAndIssueKey(e,t);if(s){const e=s.id;this.props.deleteLinkedIssue({linkId:e});const t=this.flattenedIssueLinks().findIndex(t=>t.id===e);this.props.onRemoveIssueLinkInitiated(t)}this.modalClosedStateChanges()}onDeleteConfirmNew(e,t,s){const n=this.getLinkByGroupAndIssueKey(e,t,s);if(n){const e=n.id;this.props.deleteLinkedIssue({linkId:e,globalId:s});const t=this.flattenedIssueLinks().findIndex(t=>t.id===e&&t.globalId===s);this.props.onRemoveIssueLinkInitiated(t)}this.modalClosedStateChanges()}onDeleteCancel(){this.modalClosedStateChanges()}onDeleteAction(e,t,s){this.setState({groupId:e,issueKey:t,globalId:s,hasDeleteModal:!0});const{createAnalyticsEvent:n}=this.props,a=this.getLinkByGroupAndIssueKey(e,t,s),i=n({action:"clicked",actionSubject:"button"});Object(qi.h)(i,"linkedIssueCardDeleteButton",{issueLinkToDeleteId:wl()(a,["linkedIssue","id"]),isRemote:!mo()(s)})}getRemovalConfirmationText(e){const{intl:{formatMessage:t}}=this.props;return{confirmationHeader:t(_V.removeIssueLinkHeader,{issueKey:e}),confirmationContent:t(_V.removeIssueLinkContent)}}modalClosedStateChanges(){this.setState({groupId:null,issueKey:null,hasDeleteModal:!1,globalId:void 0})}flattenedIssueLinks(){const{issueLinks:e}=this.props;return e?Object.keys(e).reduce((t,s)=>[...t,...e[s]],[]):[]}renderDeleteConfirmationModal(){const{intl:{formatMessage:e}}=this.props,{groupId:t,issueKey:s,globalId:n}=this.state,i=this.getRemovalConfirmationText(s),{confirmationHeader:r,confirmationContent:o}=i;return a.a.createElement("div",null,a.a.createElement(FV,{appearance:"warning",headerMessage:r,contentMessage:o,onConfirm:()=>Object(Qe.isRemoteIssueLinksEnabled)()?this.onDeleteConfirmNew(t,s,n):this.onDeleteConfirmOld(t,s),onCancel:()=>this.onDeleteCancel(),externalId:"issue.issueLinks.delete",confirmActionText:e(_V.removeIssueLinkButton)}),a.a.createElement(m.a,null))}renderLineCardGroupOld(e,t){const{projectType:s}=this.props;return(a.a.createElement(mR,{issues:e,projectType:s,groupId:t,isInteractive:this.props.isIssueViewComplete,canAddIssueLinks:this.props.canAddIssueLinks,onClick:this.onIssueClick,onDelete:(e,t)=>this.onDeleteAction(e,Object(vr.l)(t))}))}renderLineCardGroupNew(e,t){const{projectType:s}=this.props;return(a.a.createElement(sL.a,{items:e,groupId:t,isInteractive:this.props.isIssueViewComplete,onClick:this.onIssueClickNew},(e,n,i,r)=>a.a.createElement(PV,{isHovering:e,isActive:n,isFocused:i,issue:r,groupId:t,isInteractive:this.props.isIssueViewComplete,onDelete:(e,t,s)=>this.onDeleteAction(e,Object(vr.l)(t),s),canAddIssueLinks:this.props.canAddIssueLinks,projectType:s})))}renderGroup(e,t){const s=t.map(e=>RV(RV({},e.linkedIssue),{},{projectType:e.linkedIssue.projectType||null,isLoading:e.isLoading||!1,hasError:e.hasError,errorInlineMessage:e.hasError?this.renderIssueLinkInlineMessage(e.id,!!e.isRemote):void 0},Object(Qe.isRemoteIssueLinksEnabled)()?{id:e.globalId||e.linkedIssue.id,isRemote:e.isRemote,globalId:e.isRemote?e.globalId:void 0,remoteServerHostname:e.isRemote?e.remoteServerHostname:void 0,remoteIssueLinkError:e.isRemote?e.remoteIssueLinkError:void 0}:null));return(a.a.createElement(DV,{key:e},a.a.createElement(xV,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.issue-links-view.relationship-heading"},e),Object(Qe.isRemoteIssueLinksEnabled)()?this.renderLineCardGroupNew(s,e):this.renderLineCardGroupOld(s,e)))}renderHeading(){const{hasLinks:e,canAddIssueLinks:t,onIssueLinkAddClick:s}=this.props;return mx()?a.a.createElement(Ki.c,null,a.a.createElement(MV,{htmlFor:"issue-link-search"},a.a.createElement(Ki.e,null,a.a.createElement(j.FormattedMessage,{id:"issue.issue-links-heading",defaultMessage:"Linked issues"}))),a.a.createElement(Ki.d,null,t&&e&&a.a.createElement(gV,{onClick:s}))):a.a.createElement(Ki.c,null,a.a.createElement(Ki.e,null,a.a.createElement(j.FormattedMessage,{id:"issue.issue-links-heading",defaultMessage:"Linked issues"})),a.a.createElement(Ki.d,null,t&&e&&a.a.createElement(gV,{onClick:s})))}renderExistingLinks(){const{issueLinks:e}=this.props;return(a.a.createElement("div",null,e&&Object.keys(e).sort().map(t=>this.renderGroup(t,e[t]))))}renderAddIssueLink(){const{issueLinkTypes:e,baseUrl:t,issueKey:s,onIssueLinkAddClosed:n,issueLinks:i}=this.props;return(a.a.createElement(AV,null,a.a.createElement("div",null,Object(Qe.isRemoteIssueLinksEnabled)()?a.a.createElement(BF,{issueLinkTypes:e,baseUrl:t,issueKey:s,onClose:n,issueLinks:i}):a.a.createElement(pV,{issueLinkTypes:e,baseUrl:t,issueKey:s,onClose:n,issueLinks:i}))))}render(){const{issueLinks:e,hasLinks:t,displayAddIssueLinks:s}=this.props,n=t&&!mo()(e),i=this.state.hasDeleteModal;return a.a.createElement(R.a,null,n||s?this.renderHeading():null,n?this.renderExistingLinks():null,s?this.renderAddIssueLink():null,i?this.renderDeleteConfirmationModal():null)}}VV.displayName="IssueLinksView",VV.displayName="IssueLinksView",VV.defaultProps={issueLinks:null,issueLinkTypes:[],isIssueViewComplete:!1,onIssueLinkClicked:o.a,onIssueLinkRendered:o.a,onIssueLinkAddClick:o.a,onIssueLinkAddClosed:o.a};var KV=Object(Ts.a)([j.injectIntl,Object(b.a)({deleteLinkedIssue:{action:"deleted"},onAuthenticateApplink:{action:"authenticate"}}),Object(v.b)("linkedIssue"),Object(Fs.a)(e=>({onIssueLinkClicked:(t,s,n)=>e("linked-issue-clicked",{targetIssueId:t,targetProjectType:Object(ja.j)(...UU.h)(s),linkedIssuesCount:n}),onIssueLinkRendered:t=>e("linked-issue-render",{linkedIssuesCount:t}),onRemoveIssueLinkInitiated:t=>e("linked-issue-removed",{indexOfDeletedLink:t})})),FU.a,Object(i.b)(e=>({canAddIssueLinks:Object(WU.a)(e),hasLinks:Object(Qe.isRemoteIssueLinksEnabled)()?Object(BU.d)(e):Object(BU.e)(e),issueLinks:Object(Qe.isRemoteIssueLinksEnabled)()?Object(BU.c)(e):Object(BU.k)(e),issueLinkTypes:Object(WU.b)(e),baseUrl:Object(P.g)(e),issueKey:Object(P.B)(e),externalId:"issue.issue-links",displayAddIssueLinks:Object(BU.o)(e),projectType:Object(_.F)(e),isIssueViewComplete:Object(_.m)(e)}),e=>({onAuthenticateApplink:Object(Qe.isRemoteIssueLinksEnabled)()&&((t,s)=>e(Object($R.a)(t,s))),deleteLinkedIssue:({linkId:t,globalId:s},n)=>{Object(Qe.isRemoteIssueLinksEnabled)()&&void 0!==s?e(Object(KU.b)(s,n)):e(Object(VU.e)(t,n))},cancelLinkedIssue:(t,s)=>{Object(Qe.isRemoteIssueLinksEnabled)()&&s?e(Object(KU.d)(t)):e(Object(VU.l)(t))},retryLinkedIssue:(t,s,n,a)=>{Object(Qe.isRemoteIssueLinksEnabled)()&&s?e(Object(KU.g)(t,n,a)):e(Object(VU.p)(t,n,a))},onIssueLinkAddClick:()=>e(Object(VU.a)()),onIssueLinkAddClosed:()=>e(Object(VU.b)()),onMountCreatePermissionFetching:()=>e(Object(VU.g)()),prefetchLinkedIssues:t=>e(Object(sx.a)({issueKeys:t}))}))])(VV);const BV=()=>({type:"LINK_INCIDENT_CLICKED"}),WV=()=>({type:"CREATE_MAJOR_INCIDENT_CLICKED"}),HV=Object(Xn.createSelector)(_.e,e=>e.incidentManagement),GV=Object(Xn.createSelector)(HV,e=>e.createMajorIncident),$V=(Object(Xn.createSelector)(GV,e=>e.clickedCount),Object(Xn.createSelector)(_.I,e=>e.incidentManagement)),qV=Object(Xn.createSelector)($V,e=>e.showCreateMajorIncidentModal),zV=Object(Xn.createSelector)(_.e,e=>e.incidentManagement),YV=Object(Xn.createSelector)(zV,e=>e.createLinkedIncident),QV=(Object(Xn.createSelector)(YV,e=>e.errorMessage),Object(Xn.createSelector)(YV,e=>e.isInvalid),Object(Xn.createSelector)(YV,e=>e.isLoading),Object(Xn.createSelector)(YV,e=>e.clickedCount)),JV=Object(Xn.createSelector)(_.I,e=>e.incidentManagement),ZV=Object(Xn.createSelector)(JV,e=>e.showCreateIncidentPanel),XV=Object(ea.e)("com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"),eK=Object(Xn.createSelector)(XV,e=>e&&e.renderedValue);var tK=s("./src/packages/servicedesk/incident-management/issue-view/link-incident/src/async.js");const sK=Object(Ts.a)([Object(i.b)(e=>({issueSummary:Object(ea.g)("summary")(e),issueDescription:Object(ea.g)("description")(e),impactedServices:eK(e),issueKey:Object(P.B)(e),issueId:Object(P.A)(e),projectKey:Object(P.I)(e),projectId:Object(_.C)(e),isCreateVisible:ZV(e),isCreateMajorIncidentModalVisible:qV(e),createLinkedIncidentCount:QV(e)}),e=>({onCreateLinkedIncidentClick:()=>e(BV()),onCloseLinkedIncidentPanelClick:()=>e((()=>({type:"LINK_INCIDENT_PANEL_CLOSED"}))()),onCloseCreateMajorIncidentModal:()=>e((()=>({type:"CREATE_MAJOR_INCIDENT_MODAL_CLOSED"}))())}))])(({issueSummary:e,issueDescription:t,impactedServices:s,issueKey:n,useFieldValue:i=Um.b,issueId:r,isCreateVisible:o,isCreateMajorIncidentModalVisible:c,createLinkedIncidentCount:l,onCreateLinkedIncidentClick:u,onCloseLinkedIncidentPanelClick:d,onCloseCreateMajorIncidentModal:p,projectId:m,projectKey:b})=>{const[f]=i({issueKey:n,fieldKey:"servicedesk-incident-linking"}),g=Qe.isJsmCreateMajorIncidentFromIssueViewAutofillEnabled?(e=>e?e.map(e=>e.name):null)(s):[];return f&&void 0!==r?a.a.createElement(tK.a,{issueSummary:e,issueDescription:t,impactedServiceNames:g,issueKey:n,issueId:r,projectId:m,projectKey:b,isCreateVisible:o,isCreateMajorIncidentModalVisible:c,createLinkedIncidentCount:l,onCreateLinkedIncidentClick:u,onCloseLinkedIncidentPanelClick:d,onCloseCreateMajorIncidentModal:p}):null});var nK=Object(j.defineMessages)({title:{id:"issue.portfolio-child-issues.title",defaultMessage:"Child issues"},noValueText:{id:"issue.placeholder-for-empty-child-issues-field",defaultMessage:"There are no child issues."}}),aK=Object(Ts.a)([Object(i.b)(e=>({childIssuesPanelType:"portfolioChildren",baseUrl:Object(P.g)(e),locale:Object(P.D)(e),user:Object(P.a)(e),projectId:Object(_.C)(e),projectType:Object(_.F)(e),parentKey:Object(P.B)(e),parentId:Object(P.A)(e),issues:Object(ox.a)(e),isIssueViewComplete:Object(_.m)(e),messages:nK}),e=>({onNavigateToNewIssue:({fromIssueKey:t,toIssueKey:s})=>e(Object(Yv.c)({fromIssueKey:t,toIssueKey:s})),onChange:t=>{switch(t.type){case cx.CHILD_ISSUE_ADDED:e(ex(t.meta.childIssue))}},prefetchChildIssues:t=>e(Object(sx.a)({issueIds:t}))}))])(FR),iK=Object(jb.asyncComponent)({resolve:()=>s.e("async-product-requirements-touchpoint").then(s.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/content/product-requirements-touchpoint/index.js")),name:"AsyncProductRequirementsTouchpoint"}),rK=s("./src/packages/issue/issue-view/src/actions/request-panel-metadata-actions.js"),oK=s("./src/packages/platform/services/spa-apdex-analytics/src/submit-apdex-mark/index.js"),cK=s("./src/packages/platform/services/spa-apdex-analytics/src/marks.js"),lK=s("./src/packages/servicedesk/common/src/itsm-practices/index.js"),uK=s("./src/packages/servicedesk/common/src/itsm-practices/constants.js"),dK=s("./node_modules/@atlassian/servicedesk-frontend-apdex/dist/servicedesk-frontend-apdex.min.js");class pK extends n.Component{constructor(...e){super(...e),this.onExpand=(e,t)=>{this.props.onExpand(),Object(qi.h)(t,"showRequestDetails")},this.onCollapse=(e,t)=>{this.props.onCollapse(),Object(qi.h)(t,"hideRequestDetails")}}renderShowDetailsButton(){return a.a.createElement(ci.a,{externalId:"showdetailslink.expand",appearance:"link",onClick:this.onExpand},a.a.createElement(j.FormattedMessage,{id:"request.text-on-show-details-button",defaultMessage:"Show details"}))}renderHideDetailsButton(){return a.a.createElement(ci.a,{externalId:"showdetailslink.collapse",appearance:"link",onClick:this.onCollapse},a.a.createElement(j.FormattedMessage,{id:"request.text-on-hide-details-button",defaultMessage:"Hide details"}))}render(){return a.a.createElement(a.a.Fragment,null,this.props.isContentExpanded?this.renderHideDetailsButton():this.renderShowDetailsButton())}}pK.displayName="ContentSectionExpander";var mK=Object(j.defineMessages)({viewRequest:{id:"issue.view-request",defaultMessage:"View request in portal"}});const bK=Q.default.div(["display:flex;align-items:center;padding-left:","px;"],4*J.e+J.e/2),fK=Q.default.a(["font-size:12px;"]),gK=Object(ur.a)("link",{onClick:"clicked"})(fK);class hK extends n.Component{constructor(...e){super(...e),this.onClick=(e,t)=>{Object(qi.h)(t,"viewRequestInHelpCenter")}}render(){const{intl:e,link:t}=this.props;return(a.a.createElement(bK,null,a.a.createElement(gK,{href:t,target:"_blank",onClick:this.onClick},e.formatMessage(mK.viewRequest))))}}hK.displayName="HelpCenter";var yK=Object(j.defineMessages)({portal:{id:"issue.portal-channel",defaultMessage:"Portal"},email:{id:"issue.email-channel",defaultMessage:"Email"},api:{id:"issue.api-channel",defaultMessage:"API"},jira:{id:"issue.jira-channel",defaultMessage:"Jira"},deployment:{id:"issue.deployment-channel",defaultMessage:"Deployment"},anonymousportal:{id:"issue.anonymousportal-channel",defaultMessage:"Anonymous Portal"},unknown:{id:"issue.unknown-channel",defaultMessage:"Unknown"},requestRaised:{id:"issue.request-raised",defaultMessage:"raised this request"},via:{id:"issue.via",defaultMessage:"via"},noReporter:{id:"issue.reporter.text-when-no-value-is-provided",defaultMessage:"Anonymous"}});const OK=Q.default.div(["display:flex;padding-right:","px;"],J.e),jK=Q.default.div(["display:flex;align-items:center;min-width:0;"]),EK=Q.default.div(["font-weight:600;padding-right:","px;flex-shrink:0;"],J.e/2),vK=Q.default.div(["font-weight:600;padding-left:","px;"],J.e/2),kK=Q.default.div(["",";min-width:0;"],My.a),wK=Q.default.div(["padding-left:","px;"],J.e/2),SK=Object(Mu.a)(e=>({avatarUrl:"",name:e.formatMessage(yK.noReporter)})),IK=Object(Mu.a)((e,t)=>{const{displayName:s,avatarUrls:n}=t;return{avatarUrl:n["48x48"],name:s}}),CK=e=>{const{intl:t,reporter:s,requestChannel:n}=e;let i=SK(t);s&&(i=IK(t,s));const{name:r,avatarUrl:o}=i,c=((e,t)=>{switch(e){case"portal":return t.formatMessage(yK.portal);case"email":return t.formatMessage(yK.email);case"api":return t.formatMessage(yK.api);case"jira":return t.formatMessage(yK.jira);case"deployment":return t.formatMessage(yK.deployment);case"anonymousportal":return t.formatMessage(yK.anonymousportal);case"unknown":return t.formatMessage(yK.unknown);default:return}})(n,t);return a.a.createElement(jK,null,a.a.createElement(OK,null,a.a.createElement(xr.a,{src:o,size:"small"})),a.a.createElement(EK,null,r),a.a.createElement(kK,null,t.formatMessage(yK.requestRaised)),void 0!==c&&a.a.createElement(a.a.Fragment,null,a.a.createElement(wK,null,t.formatMessage(yK.via)),a.a.createElement(vK,null,c)))};CK.displayName="ReporterAndChannel";var TK=CK;const PK=Q.default.div(["margin-top:","px;margin-bottom:","px;display:flex;flex-direction:column;border-radius:","px;border:1px solid #dfe1e6;background-color:",";padding:16px;",";"],J.e,3*J.e,J.e/2,Je.a.N0,({isExpanded:e,hasContentItems:t})=>e&&t&&"padding-bottom: 0"),_K=Q.default.div(["display:flex;justify-content:space-between;"]),xK=Q.default.div(["",";"],({hasContentItems:e})=>e&&`margin-top: ${2*J.e}px`),DK=Q.default.div(["margin-bottom:","px;"],3*J.e);class AK extends n.Component{constructor(e){super(e),this.onExpand=()=>{this.setState({isExpanded:!0})},this.onCollapse=()=>{this.setState({isExpanded:!1})},this.getMetricKey=e=>{if(this.props.isInServiceDeskReport)return"servicedesk.reports.custom.issue";const t=Object(lK.a)(e);return t!==uK.c?`servicedesk.queues.${t}.issue`:"servicedesk.queues.issue"},this.shouldWrapItsmChangeManagementTourSpotlights=()=>this.props.isServiceDesk,this.props.fetchRequestPanelMetadata(),this.state={isExpanded:!0}}componentDidMount(){if(!this.props.isLoading&&(this.props.isInServiceDeskQueue||this.props.isInServiceDeskReport)&&!__SPA__){const{baseUrl:e}=this.props,t=window.location.pathname.replace(e,"");Object(dK.end)(t)}}render(){const{isExpanded:e}=this.state,{requestPanelItems:t,isInServiceDeskReport:s,isInServiceDeskQueue:n,isLoading:i,LayoutItemsComponent:r}=this.props,o=t.length>0,c=a.a.createElement(a.a.Fragment,null,a.a.createElement(As.c,{location:"panel-header-expand"},a.a.createElement(_K,null,a.a.createElement(TK,{intl:this.props.intl,reporter:this.props.reporter&&this.props.reporter.value,requestChannel:this.props.requestChannel}),o&&a.a.createElement(pK,{isContentExpanded:e,onExpand:this.onExpand,onCollapse:this.onCollapse}))),(o&&e||!o)&&this.props.requestUrl&&a.a.createElement(hK,{intl:this.props.intl,link:this.props.requestUrl}));return a.a.createElement(As.f,{location:"requestDetailsPanel"},a.a.createElement(PK,{isExpanded:e,hasContentItems:o},!i&&(n||s)&&__SPA__&&a.a.createElement(ms.f,null,({match:e})=>a.a.createElement(oK.c,{metricKey:this.getMetricKey(e&&e.params&&e.params.practiceType),withMarks:[cK.a],isExpectedToHaveSsr:!1})),this.shouldWrapItsmChangeManagementTourSpotlights()?a.a.createElement(VC.a,{id:"reporter-spotlight"},c):c,e&&a.a.createElement(xK,{hasContentItems:o},a.a.createElement(r,{layoutItems:t,area:"content-request",ItemContainer:DK}))))}}AK.displayName="RequestDetailsPanelView",AK.defaultProps={LayoutItemsComponent:WC};const MK=e=>{const t=Object(P.b)(e);return t&&t.valueOf()===LI.a.SERVICEDESK_QUEUES_ISSUE},LK=e=>{const t=Object(P.b)(e);return t&&t.valueOf()===LI.a.SERVICEDESK_REPORTS_ISSUE},RK=e=>"jira-servicedesk"===Object(_.H)(e);var NK=Object(Ts.a)([j.injectIntl,Object(i.b)(e=>({baseUrl:Object(P.g)(e),reporter:Object(ea.q)("reporter")(e),requestChannel:qE(e),isLoading:Object(_.r)(e),isServiceDesk:RK(e),isInServiceDeskQueue:MK(e),isInServiceDeskReport:LK(e),requestUrl:zE(e),LayoutItemsComponent:HC}),e=>(e=>({fetchRequestPanelMetadata:()=>e(Object(rK.a)()),onOpenPanel:(t,s,n)=>{const a={title:n&&n.title||s,type:s,key:t,payload:n};e(zd(a))}}))(e))])(AK),UK=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js"),FK=Object(j.defineMessages)({title:{id:"issue.subtasks-heading",defaultMessage:"Subtasks"},createSubtaskErrorHeader:{id:"issue.subtask-error-header",defaultMessage:"We couldn't create the subtask"},createSubtaskErrorContent:{id:"issue.subtask-error-content",defaultMessage:"Wait a few moments, then give it another try."}});function VK(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function KK(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?VK(Object(s),!0).forEach((function(t){BK(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):VK(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function BK(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function WK(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var HK=Object(Ts.a)([Object(i.b)(e=>({childIssuesPanelType:"classicSubtasks",baseUrl:Object(P.g)(e),locale:Object(P.D)(e),user:Object(P.a)(e),projectId:Object(_.C)(e),projectType:Object(_.F)(e),parentKey:Object(P.B)(e),parentId:Object(P.A)(e),issueTypes:Object(UK.c)(e),issues:Object(nw.d)(e),messages:FK,supportsIssueCreation:Object(nw.a)(e),quickAddClickCount:ax(e),isIssueViewComplete:Object(_.m)(e),onNavigateToNewIssueStateProp:Object(P.G)(e),fetchIssueTypesStatus:Object(gI.a)(e)}),e=>({onChange:t=>{switch(t.type){case cx.CHILD_ISSUE_ADDED:e((e=>({type:"SUBTASK_ADD_SUCCESS",payload:{subtask:e}}))(t.meta.childIssue))}},onAddChildClick:()=>e(tx()),prefetchChildIssues:t=>e(Object(sx.a)({issueIds:t})),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(Yv.c)({fromIssueKey:t,toIssueKey:s}))}}),(e,t)=>{const{onNavigateToNewIssueStateProp:s}=e,n=WK(e,["onNavigateToNewIssueStateProp"]),{onNavigateToNewIssueDispatchProp:a}=t,i=WK(t,["onNavigateToNewIssueDispatchProp"]);return KK(KK(KK({},n),i),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t}),a&&a({fromIssueKey:e,toIssueKey:t})}})})])(FR),GK=s("./src/packages/issue/issue-view/src/actions/web-links-actions.js"),$K=s("./src/packages/issue/issue-view/src/selectors/web-links-selector.js");const qK=Object(j.defineMessages)({headerMessage:{id:"issue.details.web-links.delete-confirmation-modal.title",defaultMessage:"Delete the web link?"},contentMessage:{id:"issue.details.web-links.delete-confirmation-modal.content",defaultMessage:"You can add the link later again if you need to."},confirmActionText:{id:"issue.details.web-links.delete-confirmation-modal.confirmation-text",defaultMessage:"Delete"},cancelActionText:{id:"issue.details.web-links.delete-confirmation-modal.cancellation-text",defaultMessage:"Cancel"}});const zK=({intl:e,onDelete:t,onCancel:s})=>a.a.createElement(Kt.b,{appearance:"danger",headerMessage:e.formatMessage(qK.headerMessage),contentMessage:e.formatMessage(qK.contentMessage),confirmActionText:e.formatMessage(qK.confirmActionText),cancelActionText:e.formatMessage(qK.cancelActionText),onConfirm:t,onCancel:s});zK.displayName="DeleteModal";var YK=Object(j.injectIntl)(zK),QK=s("./node_modules/shortid/index.js"),JK=s("./node_modules/@atlaskit/icon/glyph/world.js"),ZK=s.n(JK),XK=s("./src/packages/platform/ui/flags/src/model/index.js"),eB=Object(j.defineMessages)({createErrorHeading:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.create-error-heading",defaultMessage:"We couldn't create the web link"},deleteErrorHeading:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.delete-error-heading",defaultMessage:"We couldn't delete the web link"},errorBody:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.create-error-body",defaultMessage:"Wait a few moments, then give it another try."},retryAction:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.retry-action",defaultMessage:"Try again"},cancelAction:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.cancel-action",defaultMessage:"Cancel"}});const tB=e=>e.stopPropagation(),sB=({errorHeading:e,errorBody:t,onRetry:s,onCancel:n,intl:i})=>a.a.createElement("div",{onClick:tB,onKeyPress:tB},uL(i,i.formatMessage(e),i.formatMessage(t),s,n));sB.displayName="ErrorMessage";var nB=Nt()([Object(Vs.a)("webLinks",{onRetry:"retry"}),Object(i.b)(null,(e,{webLink:t})=>({onCreateWebLinkRetry:()=>{e(Object(GK.d)(t.id))},onCreateWebLinkCancel:()=>{e(Object(GK.f)(t.id))},onDeleteWebLinkRetry:()=>{e(Object(GK.h)(t.id))},onDeleteWebLinkCancel:()=>{e(Object(GK.a)(t.id))}}),(e,t,s)=>({intl:s.intl,errorHeading:!0===s.webLink.createFailed?eB.createErrorHeading:eB.deleteErrorHeading,errorBody:eB.errorBody,onRetry:(e,n,a)=>{!0===s.webLink.createFailed?(t.onCreateWebLinkRetry(),Object(gF.a)(a,{name:"createRetry"})):(t.onDeleteWebLinkRetry(),Object(gF.a)(a,{name:"deleteRetry"}))},onCancel:!0===s.webLink.createFailed?t.onCreateWebLinkCancel:t.onDeleteWebLinkCancel})),j.injectIntl])(sB);const aB=Q.default.div(["display:flex;align-items:center;"]),iB=Object(Q.default)(aB)(["width:100%;height:100%;position:relative;"]),rB=Q.default.div(["flex:1;overflow:hidden;align-items:center;"]),oB=Q.default.div([""," padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],e=>e.isFocused&&`color: ${Je.a.B400};`,J.e),cB=Q.default.div(["margin-left:","px;margin-right:","px;"],J.e/4,J.e/4),lB=e=>!(!e.createFailed&&!e.deleteFailed);class uB extends n.Component{constructor(...e){super(...e),this.state={validIconUrl:!1},this.onDeleteClick=e=>{const{onDelete:t,webLink:{id:s}}=this.props;e.stopPropagation(),t(s)}}componentDidMount(){const{iconUrl:e}=this.props.webLink;if(this.props.webLink.deleteFailed){const{onDeleteWebLinkRetry:e,onDeleteWebLinkCancel:t}=this.props;this.showErrorFlag(eB.deleteErrorHeading,e,t)}if(null!=e){const t=new Image;t.onload=()=>this.setState({validIconUrl:!0}),t.onerror=()=>this.setState({validIconUrl:!1}),t.src=e}}componentDidUpdate(e){if(!e.webLink.createFailed&&this.props.webLink.createFailed){const{onCreateWebLinkRetry:e,onCreateWebLinkCancel:t}=this.props;this.showErrorFlag(eB.createErrorHeading,e,t)}}showErrorFlag(e,t,s){const{showFlag:n,dismissFlag:a}=this.props,i=Object(XK.b)(Object(QK.generate)());n(((e,t,s,n)=>({id:e,title:t,description:eB.errorBody,type:"warning",isAutoDismiss:!0,actions:[{content:eB.retryAction,onClick:s},{content:eB.cancelAction,onClick:n}]}))(i,e,()=>{a({id:i,command:"DISMISS"}),t()},()=>{a({id:i,command:"DISMISS"}),s()}))}shouldRenderDeleteButton(){const{webLink:e,canDelete:t}=this.props;return t&&!(e.isCreating||lB(e))}renderLinkIcon(){const{webLink:{iconUrl:e,linkText:t=""}}=this.props;return this.state.validIconUrl?a.a.createElement(xr.a,{src:e,size:"small",appearance:"square"}):a.a.createElement(cB,null,a.a.createElement(ZK.a,{label:t}))}renderLinkText(){const{webLink:e,isFocused:t}=this.props,{linkText:s,href:n}=e;return a.a.createElement(rB,null,a.a.createElement(Ae.a,{content:n,truncate:!0,position:"bottom"},a.a.createElement(oB,{isFocused:t},s||n)))}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return(a.a.createElement(tN,{show:e||t,onClick:this.onDeleteClick}))}render(){const{webLink:e}=this.props;return(a.a.createElement(iB,null,this.renderLinkIcon(),this.renderLinkText(),this.shouldRenderDeleteButton()&&this.renderDeleteButton(),lB(e)&&a.a.createElement(nB,{webLink:e})))}}uB.displayName="WebLinkLineCard";var dB=uB;function pB(){return(pB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const mB=e=>a.a.createElement(Bs.FlagServiceSubscriber,null,({showFlag:t,dismissFlag:s})=>a.a.createElement(dB,pB({showFlag:t,dismissFlag:s},e)));mB.displayName="WithFlagSubscriber";var bB=Nt()([Object(Vs.a)("webLinks",{onCreateWebLinkRetry:"retry",onDeleteWebLinkRetry:"retry"}),Object(i.b)(null,(e,{webLink:t})=>({onCreateWebLinkRetry:s=>{e(Object(GK.d)(t.id)),Object(gF.a)(s,{name:"createRetry"})},onCreateWebLinkCancel:()=>{e(Object(GK.f)(t.id))},onDeleteWebLinkRetry:s=>{e(Object(GK.h)(t.id)),Object(gF.a)(s,{name:"deleteRetry"})},onDeleteWebLinkCancel:()=>{e(Object(GK.a)(t.id))}}))])(mB);const fB=Q.default.div(["div[class*='item-line-card-view__Card']:focus{border-bottom-color:",";}"],Je.a.N30),gB=e=>{const[t,s]=Object(n.useState)(!1),[i,r]=Object(n.useState)(null),o=e=>{s(!0),r(e)},c=()=>{s(!1),r(null)},l=c,{canDelete:u}=e;return a.a.createElement(fB,null,a.a.createElement(Sn.a,{onMount:t=>Object(qi.b)(t,"webLinkLineCardGroup rendered",{linkCount:e.links.length})}),a.a.createElement(sL.a,{items:e.links,groupId:"web-links",onClick:(t,s)=>{e.onClick&&e.onClick(t,s),s&&s.currentTarget&&s.currentTarget.blur(),(e=>{e.href&&window.open(e.href,"_blank")})(t)}},(e,t,s,n)=>(({link:e,isHovering:t,isFocused:s})=>a.a.createElement(bB,{webLink:e,isHovering:t,isFocused:s,onDelete:o,canDelete:u}))({link:n,isHovering:e,isFocused:s})),t?a.a.createElement(YK,{onDelete:()=>{i&&e.onDelete(i),c()},onCancel:l}):null)};gB.displayName="WebLinkLineCardGroup";var hB=gB,yB=Object(Ts.a)([Object(Vs.a)("webLinkCard",{onClick:"clicked",onDelete:"deleted"}),Object(E.a)({onClick:"visitWebLink",onDelete:"deleteWebLink"}),Object(i.b)(null,e=>({onDelete:t=>e(Object(GK.h)(t))}))])(hB);const OB=Object(j.defineMessages)({label:{id:"issue.web-links-add-label",defaultMessage:"Link to a web page"}}),jB=Q.default.span(["margin-left:auto;"]),EB=({intl:e,onClick:t})=>a.a.createElement(jB,null,a.a.createElement(__.a,{label:e.formatMessage(OB.label),onClick:t}));EB.displayName="AddButton";var vB=Object(j.injectIntl)(EB),kB=s("./node_modules/url-parse/index.js"),wB=s.n(kB);const SB=e=>{const t=e.trim();return/^(((https?):)?\/\/)[^\s/$.?#].[^\s]*$/i.test(t)};var IB=s("./node_modules/@atlaskit/textfield/dist/esm/components/Textfield.js");const CB=Q.default.span(["color:",";font-weight:600;font-size:","px;"],Je.a.N300,1.5*J.e),TB=Q.default.div(["flex:auto;"]);function PB(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const _B=e=>{let{headingText:t}=e,s=PB(e,["headingText"]);return(a.a.createElement(TB,null,a.a.createElement(CB,null,t),a.a.createElement(IB.a,s)))};_B.displayName="InlineField";var xB=Object(j.defineMessages)({url:{id:"issue.views.web-links.addLink.label.url",defaultMessage:"URL"},linkText:{id:"issue.views.web-links.addLink.label.linkText",defaultMessage:"Link text"},linkTextPlaceholder:{id:"issue.views.web-links.addLink.label.linkTextPlaceholder",defaultMessage:"Add a description..."},invalidUrlMessage:{id:"issue.views.web-links.addLink.label.invalidUrlMessage",defaultMessage:"Enter a valid URL starting with http:// or https://"},errorIconLabel:{id:"issue.views.web-links.addLink.label.errorIcon",defaultMessage:"Error icon"}});const DB=Q.default.div(["margin-top:","px;display:flex;"],2*J.e),AB=Q.default.div(["margin-right:","px;flex:1;"],J.e),MB=Q.default.div(["margin-left:","px;flex:1;"],J.e),LB=Q.default.div(["align-items:center;color:",";display:flex;margin-top:","px;"],e=>e.colour,J.e/2),RB=Q.default.div(["margin-left:","px;"],J.e/2);class NB extends n.Component{constructor(...e){super(...e),this.state={isHrefFocused:!0}}render(){const{href:e,linkText:t,onHrefChange:s,intl:n,onLinkTextChange:i,isHrefValid:r}=this.props;return(a.a.createElement(DB,null,a.a.createElement(AB,null,a.a.createElement(_B,{value:e,headingText:n.formatMessage(xB.url),autoFocus:!0,placeholder:"https://www.example.com",onChange:s,onBlur:()=>{this.setState({isHrefFocused:!1})},onFocus:()=>this.setState({isHrefFocused:!0}),isInvalid:!r}),!r&&!this.state.isHrefFocused&&a.a.createElement(LB,{colour:Je.a.R400},a.a.createElement(ib.a,{label:n.formatMessage(xB.errorIconLabel),role:"presentation"}),a.a.createElement(RB,null,n.formatMessage(xB.invalidUrlMessage)))),a.a.createElement(MB,null,a.a.createElement(_B,{value:t,headingText:n.formatMessage(xB.linkText),autoFocus:!1,placeholder:n.formatMessage(xB.linkTextPlaceholder),onChange:i}))))}}NB.displayName="InlineFields";var UB=Object(j.injectIntl)(NB),FB=Object(j.defineMessages)({linkButton:{id:"issue.views.web-links.link.link-button",defaultMessage:"Link"},cancelButton:{id:"issue.views.web-links.link.cancel-button",defaultMessage:"Cancel"}});Je.a.N10;const VB=Object(Q.default)(q.a)(["margin-left:","px !important;"],J.e),KB=Q.default.div(["margin-top:","px;display:flex;justify-content:flex-end;"],J.e),BB={href:"",linkText:"",isDisabled:!0,isHrefValid:!0};class WB extends n.Component{constructor(...e){super(...e),this.state=BB,this.onChildContainerRefSet=e=>{this.childContainer=e},this.onHrefChange=e=>{const t=e.target.value;this.updateDisabledState(t),this.setState({href:t,isHrefValid:SB(t)})},this.onLinkTextChange=e=>{const t=e.target.value.slice(0,255);t!==this.state.linkText&&(this.updateDisabledState(this.state.href),this.setState({linkText:t}))},this.onSubmit=()=>{const{href:e,linkText:t}=this.state,s=e.trim(),n=(e=>{const{origin:t}=new wB.a(e.trim(),"null"),s="null"===t?"":`${t}/favicon.ico`;return Object(vr.i)(s)})(s);this.props.onSubmit(s,mo()(t.trim())?s:t.trim(),n)},this.childContainer=void 0,this.closeAndReset=()=>{this.resetState(),this.props.onCancel()}}componentDidMount(){Object(Br.a)(this.childContainer),this.updateDisabledState(this.state.href)}componentDidUpdate(e){this.props.createLinkClickedCount!==e.createLinkClickedCount&&(Object(Br.a)(this.childContainer),this.focusOnInput()),this.props.linkedPagesCount>e.linkedPagesCount&&(this.resetState(),this.focusOnInput())}focusOnInput(){if(null!==this.childContainer){const e=this.childContainer.querySelector("input");null!==e&&e.focus()}}updateDisabledState(e){const t=mo()(e)||!SB(e);this.setState({isDisabled:t})}resetState(){this.setState(BB)}render(){const{intl:{formatMessage:e}}=this.props,{href:t,linkText:s,isDisabled:n,isHrefValid:i}=this.state,r=n?null:this.onSubmit;return a.a.createElement("div",{ref:this.onChildContainerRefSet},a.a.createElement(G.a,{onEscape:this.closeAndReset,onEnter:r},a.a.createElement(UB,{href:t,linkText:s,isHrefValid:i,onHrefChange:this.onHrefChange,onLinkTextChange:this.onLinkTextChange})),a.a.createElement(KB,null,a.a.createElement(VB,{appearance:"primary",onClick:this.onSubmit,isDisabled:n},e(FB.linkButton)),a.a.createElement(VB,{appearance:"subtle",onClick:this.closeAndReset},e(FB.cancelButton))))}}WB.displayName="WebLinkCreateLinkView";var HB=Object(Ts.a)([j.injectIntl,Object(Vs.a)("button",{onSubmit:"clicked",onCancel:"clicked"}),Object(E.a)({onSubmit:"webLinkSubmit",onCancel:"webLinkCancel"}),Object(i.b)(e=>({linkedPagesCount:Object($K.e)(e),createLinkClickedCount:Object($K.b)(e)}),e=>({onCancel:()=>e(Object(GK.j)()),onSubmit:(t,s,n)=>e(Object(GK.c)(Object(vr.i)(t),s,n))}))])(WB);const GB=Object(j.defineMessages)({heading:{id:"issue.details.web-links.heading",defaultMessage:"Web links"}});const $B=Q.default.div(["margin:","px 0;padding-right:1px;"],J.e);class qB extends n.Component{renderHeading(){const{intl:e,isCreateWebLinkOpened:t,onAddButtonClicked:s,links:n,canAddWebLinks:i}=this.props,r=Boolean(n&&n.length);return t||r?a.a.createElement(Ki.c,null,a.a.createElement(Ki.e,null,e.formatMessage(GB.heading)),a.a.createElement(Ki.d,null,i&&a.a.createElement(vB,{onClick:s}))):null}renderLineCards(){const{links:e,canAddWebLinks:t}=this.props;return e&&e.length?a.a.createElement($B,null,a.a.createElement(yB,{links:e,canDelete:t})):null}renderCreateLinkView(){return this.props.isCreateWebLinkOpened?a.a.createElement(HB,null):null}render(){return a.a.createElement(a.a.Fragment,null,this.renderHeading(),this.renderLineCards(),this.renderCreateLinkView())}}qB.displayName="WebLinksView";var zB=Object(Ts.a)([j.injectIntl,Object(E.a)({onAddButtonClicked:"addWebLink"}),Object(i.b)(e=>({isCreateWebLinkOpened:Object($K.c)(e),links:Object($K.f)(e),canAddWebLinks:Object($K.a)(e)}),e=>({onAddButtonClicked:()=>e(Object(GK.k)())}))])(qB);class YB extends n.Component{maybeWrapInSectionWrapper(e){const{isCompactMode:t}=this.props;return e?a.a.createElement(NC,{isCompactMode:t},e):e}renderEcosystemContentPanels(){const{contentPanels:e,isCompactMode:t}=this.props,s=e.map(e=>{if("FORGE_ENTITY_TYPE"===e.type){const{name:s,appKey:n,moduleKey:i,dateAdded:r,panelInstanceId:o,extension:c}=e,l=Object(Fi.h)(n,i,o,r);return a.a.createElement(ST,{key:l,panelKey:l,name:s,appKey:n,moduleKey:i,extension:c,isCompactMode:t,externalId:"issue.ecosystem.content-panel.forge"})}return(a.a.createElement(dT,{key:e.name,name:e.name,appKey:e.appKey,moduleKey:e.moduleKey,externalId:"issue.ecosystem.content-panel"}))});return a.a.createElement(a.a.Fragment,null,s)}render(){const{isComplete:e,fields:t,isCompactMode:s,issueKey:n}=this.props,i=Object.keys(t),r=i.includes(RC.k)?a.a.createElement(KV,null):null,o=i.includes("subtasks")?a.a.createElement(HK,{key:n}):null,c=Object(_.p)(t)?a.a.createElement(NU,{key:n}):null,l=i.includes("children-issues")?a.a.createElement(GR,{key:n}):null,u=e?a.a.createElement(Q_,null):null,d=i.includes("portfolio-child-issues")?a.a.createElement(aK,{key:n}):null,p="not-enrolled"!==Object(Qe.getProductRequirementsDocDiscoveryFlag)()?a.a.createElement(iK,null):null;return a.a.createElement(FC.a,null,({layoutDescriptor:e})=>a.a.createElement(UC,{isCompactMode:s},(e=>{const{visibleContentItems:t,requestPanelContentItems:s}=e.content;return Object(Qe.isContentTemplateRendererEnabled)()&&!s?a.a.createElement(MC,null):a.a.createElement(a.a.Fragment,null,s&&a.a.createElement(NK,{requestPanelItems:s}),a.a.createElement(HC,{layoutItems:t,area:"content"}))})(e),this.maybeWrapInSectionWrapper(u),this.maybeWrapInSectionWrapper(p),this.maybeWrapInSectionWrapper(c),this.maybeWrapInSectionWrapper(l),this.maybeWrapInSectionWrapper(d),this.maybeWrapInSectionWrapper(o),this.maybeWrapInSectionWrapper(a.a.createElement(sK,null)),this.maybeWrapInSectionWrapper(r),this.maybeWrapInSectionWrapper(a.a.createElement(PU,null)),this.maybeWrapInSectionWrapper(a.a.createElement(zB,null)),this.maybeWrapInSectionWrapper(this.renderEcosystemContentPanels())))}}YB.displayName="ContentItems",YB.displayName="ContentItems",YB.defaultProps={isComplete:!1,isCompactMode:!1,contentPanels:[],fields:{}};var QB=Object(Ts.a)([Object(i.b)(e=>({issueKey:Object(P.B)(e),contentPanels:Object(Ra.f)(e),isComplete:Object(_.m)(e),fields:Object(ea.t)(e)}),{})])(YB),JB=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-tenant-context/index.js");var ZB=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/slide-down-on-mount.js"),XB=s("./src/packages/issue/fields/components/field-pin/src/utils.js");const eW=e=>Object(Xn.createSelector)(ea.t,e=>e,(t,s)=>e.filter(e=>{const t=e.type,{payload:n}=e;return!!n&&("TAB"===e.type?((e,t)=>{if(!t)return!1;return!!cd()(e,t)})(s,n.tabId):Object(Qe.isDevPanelItemDisplayEnabled)()&&void 0!==n.itemId?ed({fieldType:t,fieldId:n.itemId,state:s}):!(!Qu(t)||void 0===n.fieldId)&&ed({fieldType:t,fieldId:n.fieldId,state:s}))}));var tW=s("./node_modules/@atlaskit/icon/glyph/folder.js"),sW=s.n(tW);var nW=s("./src/packages/issue/issue-glance/src/main.js"),aW=Object(Ts.a)()(nW.a);function iW(){return(iW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function rW(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const oW=(e,t)=>e.items.reduce((e,s)=>{switch(s.type){case"FIELD":return[...e,Object(ea.m)(s.id)(t)];default:return ja.i.safeError("issue.views.issue-base.context.tab-glance",`Unknown tab item '${JSON.stringify(s)}'`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e}},[]).join(", "),cW=()=>a.a.createElement(sW.a,{primaryColor:Je.a.N500,label:""});cW.displayName="TabIcon";const lW=Object(Mu.a)(e=>({tabItems:e})),uW=e=>{if(void 0!==e.shouldHideTab)return null;const{tabId:t,area:s}=e,n=rW(e,["tabId","area"]);return(a.a.createElement(aW,iW({itemId:t},n)))};uW.displayName="TabGlance";var dW=Object(i.b)(()=>{const e=cd();return(t,s)=>{const n=e(t,s.tabId);if(n){return{title:n.name,content:oW(n,t),onClickPayload:lW(n.items),Icon:cW,showPinButton:Object(Vu.a)(s.area)}}return{shouldHideTab:!0}}},{})(uW);function pW(){return(pW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class mW extends n.Component{constructor(...e){super(...e),this.onOpenPanel=e=>{const{item:{key:t,type:s}}=this.props,n={title:e&&e.title||s,type:s,key:t,payload:e};this.props.onOpenPanel(n)}}render(){const{item:e,createAnalyticsEvent:t}=this.props,{type:s,payload:n,hasGlobalSpotlightTarget:i}=e;if("TAB"===s)return n&&n.tabId?a.a.createElement(dW,{createAnalyticsEvent:t,tabId:n.tabId,onOpenPanel:this.onOpenPanel,area:"context"}):(y.a.safeError("context.context-item.view","Could not find payload for Tab Item when trying to render TabGlance",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null);const r=uI()[s],o=r&&r.item;if(!o)return y.a.safeError("issue",`Could not find a matching component for "${s}"`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null;const c=a.a.createElement(o,pW({},n,{onOpenPanel:this.onOpenPanel,area:"context",createAnalyticsEvent:t}));if(i&&void 0!==(null==n?void 0:n.fieldId)){const e=`global-spotlight-target-${n.fieldId}`;return(a.a.createElement(VC.a,{id:e,key:e},c))}return c}}mW.displayName="ContextItemView";var bW=Nt()(Object(b.a)(),Object(Vs.a)("contextPanel",{onOpenPanel:"viewed"}),Object(i.b)(()=>({}),{onOpenPanel:(e,t)=>(Object(gF.a)(t,{name:"issue",attributes:{contextPanelKey:e.key,contextPanelType:e.type,tabItemsCount:e.payload&&e.payload.tabItems&&e.payload.tabItems.length}}),zd(e))}),Object(Hs.a)())(mW),fW=s("./src/packages/issue/issue-view/src/views/issue-base/context/context-items/common/utils.js"),gW=s("./node_modules/@atlaskit/icon/glyph/chevron-up.js"),hW=s.n(gW),yW=Object(j.defineMessages)({showLessText:{id:"issue.views.issue-base.context.context-items.expander.show-less-button.show-less-text",defaultMessage:"Show less"}});const OW=Object(Q.default)(ci.a)(["& > span{color:",";& > span:first-child{align-self:auto;margin-left:","px;margin-right:","px;}}&&,&:hover,&:focus{height:inherit;text-align:left;}"],Je.a.B400,-J.e,-J.e/2),jW=({onCollapse:e,intl:t})=>a.a.createElement(OW,{externalId:"showmorelink.collapse",appearance:"subtle",iconBefore:a.a.createElement(hW.a,{label:"",primaryColor:Je.a.B400,size:"large"}),alt:t.formatMessage(yW.showLessText),shouldFitContainer:!0,onClick:(t,s)=>{e(),Object(qi.h)(s,"showLess")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-less-button.container"},a.a.createElement(j.FormattedMessage,yW.showLessText));jW.displayName="ShowLessButton";var EW=Object(j.injectIntl)(jW),vW=s("./src/packages/issue/issue-view/src/views/issue-base/context/context-items/view/expander/show-more-button/view.js");const kW=Q.default.div(["margin-left:","px;margin-bottom:","px;"],-J.e,1.5*J.e);function wW(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const SW=e=>{let{isShowMoreExpanded:t,onCollapse:s}=e,n=wW(e,["isShowMoreExpanded","onCollapse"]);return(a.a.createElement("div",null,a.a.createElement(kW,null,t?a.a.createElement(EW,{onCollapse:s}):a.a.createElement(vW.a,n))))};SW.displayName="ContextItemsExpander";var IW=SW,CW=Object(Ts.a)([Object(i.b)((e,t)=>({visibleSecondaryContextItemNameList:Object(fW.a)(t.visibleSecondaryContextItems,ad(e),Object(ea.t)(e))}),{})])(IW),TW=Object(j.defineMessages)({header:{id:"issue.views.issue-base.context.context-items.pinned-fields-box.header",defaultMessage:"Your pinned fields"}});const PW=Q.default.div(["margin:-8px -","px ","px;padding:","px ","px 0px;border-radius:3px;display:flex;flex-direction:column;background:",";&:empty{display:none;}&::before{",";content:'","';margin-top:","px;margin-bottom:","px;text-transform:uppercase;font-size:11px;}"],1.5*J.e,1.5*J.e,1.25*J.e,1.5*J.e,Je.a.N20,Je.c.h200(),e=>e.header,J.e/2,1.5*J.e),_W=({children:e})=>{const t=Object(Ge.c)(),{formatMessage:s}=t;return a.a.createElement(PW,{header:s(TW.header),"data-test-id":"issue.views.issue-base.context.context-items.pinned-fields-box.pinned-items"},e)};_W.displayName="PinnedFieldsBox";var xW=_W;const DW=e=>"SLA_PANEL"!==e.type&&!!Object(fW.d)(e.payload),AW=Q.default.div([""]),MW=({primaryContextItems:e,contextItemsMap:t})=>{let s=!1;const[,{register:i}]=Object(Bc.b)(),r=Object(n.useCallback)(e=>{i("PIN_FIELD",e)},[i]),o=e=>{const s=t[e];return void 0!==s?a.a.createElement(bW,{item:s,key:e}):null},c=e.map(e=>!s&&DW(e)&&"assignee"!==e.type?(s=!0,a.a.createElement(AW,{innerRef:r,key:e.key},o(e.key))):o(e.key));return a.a.createElement(a.a.Fragment,null,c)};MW.displayName="PrimaryItems";var LW=MW;const RW=Q.default.div(["display:flex;flex-direction:column;padding-bottom:0;"]),NW=Q.default.div(["margin-top:","px;padding-bottom:0;"],()=>Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?"0":`${-J.e}`),UW=Q.default.div(["padding-top:","px;box-shadow:inset 0 2px 0 0 ",";margin-left:","px;"],J.e,Je.a.N30,-J.e);function FW(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function VW(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?FW(Object(s),!0).forEach((function(t){KW(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):FW(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function KW(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class BW extends n.Component{constructor(...e){super(...e),this.state=VW(VW({},Object(fW.c)(this.props)),{},{contextItemsMap:{}}),this.onExpand=()=>{this.props.onSecondaryContextItemsVisibilityToggle(!0),this.onUpdateLayoutDescriptor()},this.onCollapse=()=>{this.props.onSecondaryContextItemsVisibilityToggle(!1),this.onUpdateLayoutDescriptor()}}static getDerivedStateFromProps(e){const{primaryContextItems:t,secondaryContextItems:s}=e.layoutDescriptor.context,n={};return t.concat(s).forEach(e=>{n[e.key]=e}),{contextItemsMap:n}}componentDidMount(){this.onRender(),this.onUpdateLayoutDescriptor()}componentDidUpdate(e,t){this.shouldUpdateItemVisibility(e,t)&&this.onUpdateLayoutDescriptor()}onUpdateLayoutDescriptor(){const e=Object(fW.c)(this.props);this.setState(e),this.onRender()}onRender(){const{primaryContextItems:e,secondaryContextItems:t}=this.props.layoutDescriptor.context,s=e.concat(t);this.props.onRendered(s)}shouldUpdateItemVisibility(e,t){const s="VISIBLE"===this.props.secondaryContextItemVisibility,n=e.layoutDescriptor.context.primaryContextItems,a=this.props.layoutDescriptor.context.primaryContextItems,i=e.pinnedFields,r=this.props.pinnedFields,o=!Di()(t.contextItemsMap,this.state.contextItemsMap),c=!s&&n.length<a.length,l=!Di()(i,r),u=!s&&n.length===a.length&&!Di()(n,a),d=e.layoutDescriptor.context.secondaryContextItems,p=this.props.layoutDescriptor.context.secondaryContextItems,m=!Di()(e.visibleSecondaryContextItems,this.props.visibleSecondaryContextItems)&&Di()(d,p);return o||c||u||m||l}renderContextItem(e){const t=this.state.contextItemsMap[e];return void 0!==t?a.a.createElement(bW,{item:t,key:e}):null}renderPrimaryItems(){const{primaryContextItems:e}=this.state.layoutDescriptor.context;if(Object(Qe.isOptInBackToBentoEnabled)())return a.a.createElement(RW,{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"},this.renderPinnedItems(),a.a.createElement(LW,{primaryContextItems:e,contextItemsMap:this.state.contextItemsMap}));const t=e.map(e=>this.renderContextItem(e.key));return(a.a.createElement(RW,{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"},this.renderPinnedItems(),t))}renderSecondaryItems(){const{secondaryContextItems:e}=this.state.layoutDescriptor.context,t=e.map(e=>this.renderContextItem(e.key));return a.a.createElement(ZB.a,null,a.a.createElement(NW,null,t))}renderPinnedItems(){const{secondaryContextItems:e,primaryContextItems:t}=this.props.layoutDescriptor.context,{pinnedFields:s}=this.props,n=[...e,...t].reduce((e,t)=>e.set(Object(fW.d)(t.payload),t),new Map),i=s.reduce((e,t)=>{const s=n.get(t);return s&&e.push(this.renderContextItem(s.key)),e},[]);return a.a.createElement(xW,null,i)}render(){const e="HIDDEN"!==this.props.secondaryContextItemVisibility,t=this.state.visibleSecondaryContextItems,s=t.length;return a.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items"},this.renderPrimaryItems(),e?this.renderSecondaryItems():null,a.a.createElement(Kc.a,{name:"SHOW_MORE"},a.a.createElement("div",null,s>0&&a.a.createElement(CW,{isShowMoreExpanded:e,onExpand:this.onExpand,onCollapse:this.onCollapse,visibleSecondaryContextItems:t,fieldCount:s}))),a.a.createElement(UW,null),Object(Qe.isSideBySideLabelsAndFieldsEnabled)()&&a.a.createElement(Sn.a,{onMount:e=>Object(qi.b)(e,"PinnedFieldOnboarding mounted")}))}}BW.displayName="ContextItems",BW.displayName="ContextItems",BW.defaultProps={forgeExtensions:[],pinnedFields:[],onRendered:o.a};var WW=Object(Ts.a)([Object(i.b)((e,t)=>({visibleSecondaryContextItems:eW(t.layoutDescriptor.context.secondaryContextItems)(e),forgeContext:Object(cu.b)(e),source:Object(P.b)(e),issueKey:Object(XB.d)(e)}),{})])(Object(XB.f)(BW));const HW=e=>t=>{Object(f.a)(t,{action:"viewed",actionSubjectId:e})};class GW extends n.Component{componentDidMount(){this.props.onMount()}render(){return null}}GW.displayName="ChangeboardingTrigger";var $W=({layoutDescriptor:e,isProjectAdmin:t})=>{const{primaryContextItems:s,secondaryContextItems:n}=e.context;if([...s,...n].filter(e=>"TAB"===e.type).length>0){const e=t?"bentoTabsProjectAdminChangeboarding":"bentoTabsChangeboarding",s=Nt()(Object(Vs.a)(e,{onMount:"onMount"}),Object(v.b)(e))(GW);return a.a.createElement(s,{onMount:HW(e)})}return null};function qW(){return(qW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const zW=e=>{const{isCompletedLoading:t,isProjectAdmin:s,hasJsd:n}=e,i=!n;return a.a.createElement(FC.a,null,({layoutDescriptor:n})=>a.a.createElement(a.a.Fragment,null,a.a.createElement(WW,qW({layoutDescriptor:n},e)),t&&i&&a.a.createElement($W,{layoutDescriptor:n,isProjectAdmin:s})))};zW.displayName="ContextItemsWithLayoutDescriptor";var YW=Object(Ts.a)([Object(Fs.a)(e=>({onRendered:t=>{const s=t.filter(e=>"ecosystemGlance"===e.type).map(e=>e.payload);s.length>0&&e("ecosystem.glances",(e=>{const t=e.reduce((e,t)=>{e[t.appKey]||(e[t.appKey]={total:0,status:{}});const s=e[t.appKey];if(s.total+=1,t.status&&t.status.type){const e=s.status[t.status.type];s.status[t.status.type]=e>0?e+1:1}else{const e=s.status["N/A"];s.status["N/A"]=e>0?e+1:1}return e},{}),s=JSON.stringify(t);return{total:e.length,data:Object(ja.j)(s)(s)}})(s))}})),Object(i.b)(e=>{const t=Object(P.C)(e)||{};return{secondaryContextItemVisibility:Object(Na.c)(e)?"VISIBLE":"HIDDEN",isProjectAdmin:Object(Yu.c)(e),isCompletedLoading:Object(_.m)(e),hasJsd:!!t[JB.a.JIRA_SERVICEDESK]}},e=>({onSecondaryContextItemsVisibilityToggle:t=>e(t?(()=>({type:"EXPAND_SHOW_MORE"}))():(()=>({type:"COLLAPSE_SHOW_MORE"}))())}))])(zW),QW=s("./node_modules/@atlaskit/icon/glyph/arrow-left.js"),JW=s.n(QW),ZW=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/view.js"),XW=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js"),eH=s("./src/packages/platform/observability/analytics-web-react/src/components/analytics-data.js");var tH=(e,t)=>{const s=uI();return e.reduce((e,n)=>{switch(n.type){case"FIELD":{const i=Object(zu.a)(Object(ea.w)(n.id,t));if(!i||!Object.keys(s).includes(i))return ja.i.safeError("issue.views.issue-base.context.tab-panel",`Could not find a matching component for field '${i||"(unknown type)"}' with id '${n.id}'`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e;const r=s[i].item,o=a.a.createElement(r,{key:n.id,fieldId:n.id,area:"tab-panel"});return e.push({fieldType:i,component:o}),e}default:return ja.i.safeError("issue.views.issue-base.context.tab-panel",`Unknown tab item '${JSON.stringify(n)}'`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e}},[])},sH=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js");const nH=Q.default.div(["flex-shrink:0;background:",";outline:0;min-height:40px;"],Je.a.N0),aH=Q.default.div(["display:flex;align-items:center;position:relative;box-sizing:border-box;box-shadow:inset 0 ","px 0 0 ",";margin-left:","px;padding-left:","px;"," &:hover{cursor:pointer;}&:focus{box-shadow:inset 0 0 0 ","px ",";outline:0;}"],-2,Je.a.N30,-sH.b,sH.b,({maxWidth:e})=>`max-width: ${e}px;`,2,Je.a.B100),iH=Q.default.div(["height:100%;display:inline-block;width:100%;",""],({maxWidth:e})=>`max-width: ${e}px;`),rH=Q.default.button(["display:flex;height:28px;width:28px;border:none;border-radius:50%;background:",";color:",";align-items:center;padding-left:2px;margin-left:","px;&:hover{cursor:pointer;}"],Je.a.N30,Je.a.N60,J.e/2);var oH=Object(j.defineMessages)({emptyStateHeader:{id:"issue.context.tab-panel.empty-state.header",defaultMessage:"No fields to show"},emptyStateMessage:{id:"issue.context.tab-panel.empty-state.message",defaultMessage:"If you expect to see fields here, ask your Jira admin to check permissions and field configuration."},emptyStateMessageAdmin:{id:"issue.context.tab-panel.empty-state.message.admin",defaultMessage:"If you expect to see fields here, check your permission and field configuration settings."}});const cH=Q.default.div(["padding:","px ","px ","px ","px;overflow:auto;height:100%;"],2*J.e,J.e,J.e,1.25*J.e);function lH(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function uH(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?lH(Object(s),!0).forEach((function(t){dH(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lH(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function dH(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class pH extends n.Component{componentDidMount(){const{renderedItems:e,tabItems:t}=this.props,s=new Set(e.map(e=>e.fieldType)),n=t.map(e=>e.id).filter(e=>!s.has(e));this.props.onComponentMounted({renderedFieldsCount:s.size,unrenderedFieldsCount:n.length,unrenderedFieldTypes:n.join(",")})}render(){const{renderedItems:e,isProjectAdmin:t,contentWidth:s,intl:{formatMessage:n}}=this.props;return e.every(e=>null==e.component)?a.a.createElement(MA.a,{size:"narrow",isSubtle:!0,header:n(oH.emptyStateHeader),description:n(t?oH.emptyStateMessageAdmin:oH.emptyStateMessage)}):a.a.createElement(cH,null,a.a.createElement(iH,{maxWidth:s},e.map(e=>e.component)))}}pH.displayName="TabPanel";var mH=Object(Ts.a)([j.injectIntl,Object(Vs.a)("fieldTab",{onComponentMounted:"rendered"}),Object(i.b)((e,t)=>({onComponentMounted:(e,s)=>{Object(gF.a)(s,{name:t.panelKey,attributes:uH({contextPanelType:t.type},e)})}}),{})])(pH),bH=Object(Ts.a)([Object(eH.a)({attributes:{contextPanelType:"TAB"}}),Object(i.b)((e,{type:t,panelKey:s,payload:{tabItems:n}})=>({renderedItems:tH(n,Object(ea.t)(e)),tabItems:n,type:t,panelKey:s,isProjectAdmin:Object(Yu.c)(e)}),{})])(mH);function fH(){return(fH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class gH extends n.Component{renderContent(e){const{panel:t,onHidePanel:s,layoutItemEntryMap:n}=this.props;let i=null;if(t){const e=n[t.type];i="TAB"===t.type?bH:e&&e.panel}return(a.a.createElement(a.a.Fragment,null,a.a.createElement(nH,{"data-test-id":"issue.views.issue-base.context.context-panel.back"},a.a.createElement(aH,{maxWidth:e.headerWidth,onClick:s,tabIndex:"0"},a.a.createElement(rH,null,a.a.createElement(JW.a,{size:"medium",label:"Return"})),a.a.createElement(XW.c,null,t&&t.title))),i?a.a.createElement(i,fH({contentWidth:e.contentWidth},t?{type:t.type,panelKey:t.key,payload:t.payload}:null)):null))}render(){const{isOpen:e,isCompact:t,refs:s}=this.props;return(a.a.createElement(ZW.a,{refs:s,isOpen:e,isCompact:t},e=>this.renderContent(e)))}}gH.displayName="ContextPanel",gH.displayName="ContextPanel";var hH=Nt()(Object(i.b)(e=>({isOpen:bO(e),panel:fO(e),layoutItemEntryMap:uI()}),{onHidePanel:Yd}),Object(Hs.a)())(gH);const yH=Q.default.div(["",";width:100%;height:100%;overflow:auto;position:relative;padding:","px;"],({panelWidth:e})=>`min-width: ${e}px;`,J.e);function OH(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function jH(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class EH extends n.Component{constructor(e){super(e),this.handleHideGlancePanel=()=>{const{appKey:e,moduleKey:t,glance:s,onGlanceHideAnalytics:n,onHideGlance:a}=this.props;n(Ca(e,t,s.status)),a()},this.state={connectHost:window.connectHost}}componentDidMount(){this.state.connectHost||(ja.i.safeInfo("issue.ecosystem.glance.panel","Delayed initialization of ecosystem glance panel"),Ka(e=>this.setState({connectHost:e})))}shouldComponentUpdate(e,t){const s=this.props.appKey!==e.appKey,n=this.props.moduleKey!==e.moduleKey,a=this.state.connectHost!==t.connectHost,i=this.props.statusCategory!==e.statusCategory,r=this.props.refreshedOn!==e.refreshedOn,o=this.props.styles!==e.styles;return s||n||a||i||o||r}render(){const{glance:e,glance:{options:{origin:t}},refreshedOn:s,statusCategory:n}=this.props,{appKey:i,moduleKey:r,styles:o}=this.props,c=new Ha.a;return a.a.createElement(a.a.Fragment,null,a.a.createElement(nH,null,a.a.createElement(aH,{maxWidth:o.headerWidth,onClick:this.handleHideGlancePanel,tabIndex:"0"},a.a.createElement(rH,null,a.a.createElement(JW.a,{size:"medium",label:"Return"})),a.a.createElement(XW.c,null,e.name))),this.state.connectHost&&a.a.createElement(yH,{panelWidth:o.contentWidth},a.a.createElement(iH,{maxWidth:o.contentWidth},a.a.createElement(Wa.a,{key:`connect-iFrame-${t}-${n}-${s}`,connectHost:this.state.connectHost,appKey:i,moduleKey:r,url:e.options.url,options:c.convertConnectOptions(e.options),height:"100%",width:"100%",connectIframeProvider:c,timeoutIndicator:()=>a.a.createElement(Ja,{appName:e.name,appKey:i})}))))}}EH.displayName="GlancePanel",EH.displayName="GlancePanel",EH.defaultProps={refreshedOn:0,onGlanceHideAnalytics:o.a};var vH=Object(Ts.a)([Object(Fs.a)(e=>({onGlanceHideAnalytics:t=>e("hide",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?OH(Object(s),!0).forEach((function(t){jH(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):OH(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t))})),Object(i.b)((e,t)=>({glance:Object(Ra.l)(t.appKey,t.moduleKey)(e),statusCategory:Object(A.b)(e),refreshedOn:Object(_.d)(e)}),e=>({onHideGlance:()=>{e(Yf()),e(Object(ps.e)())}}))])(EH),kH=s("./src/packages/forge/forge-ui-async/src/ui/issue-glance/async.js");class wH extends n.Component{constructor(...e){super(...e),this.onHideForgeGlance=()=>{const{onHideForgeGlance:e}=this.props;e()},this.renderForgeExtension=()=>{const{glance:e,context:t,source:s}=this.props;return Object(Qe.isForgeIssueActionAndGlanceNextEnabled)()?a.a.createElement(kH.a,{platformContext:t,extension:e.extension,analyticsData:{source:s}}):a.a.createElement(bT.a,{context:t,extension:e.extension,module:"jira:issueGlance",analyticsData:{source:s}})}}render(){const{glance:e,styles:t,source:s,isOpen:n}=this.props;return(a.a.createElement(dy.a,{analyticsData:{source:s},shouldFireScreenEvent:n},a.a.createElement(nH,{onClick:void 0,tabIndex:void 0},a.a.createElement(aH,{maxWidth:t.headerWidth,onClick:this.onHideForgeGlance,tabIndex:"0"},a.a.createElement(rH,null,a.a.createElement(JW.a,{size:"medium",label:"Return"})),a.a.createElement(XW.c,null,e.title))),a.a.createElement(yH,{panelWidth:t.contentWidth},a.a.createElement(iH,{maxWidth:t.contentWidth},Object(Qe.isIssueGlanceNewLoadStrategyEnabled)()?n&&this.renderForgeExtension():this.renderForgeExtension()))))}}wH.displayName="ForgeGlancePanel",wH.displayName="ForgeGlancePanel";var SH=Object(Ts.a)([Object(i.b)(e=>({context:Object(cu.b)(e),source:Object(P.b)(e)}),{onHideForgeGlance:Yf})])(wH);class IH extends n.Component{renderGlance(e,t){const{glance:s}=this.props;switch(s.glanceType){case"CONNECT_ENTITY_TYPE":return a.a.createElement(vH,{panelWidth:e.panelWidth,styles:e,appKey:s.appKey,moduleKey:s.moduleKey,key:`issue.ecosystem.glance.panel_${s.appKey}_${s.moduleKey}`});case"FORGE_ENTITY_TYPE":return a.a.createElement(SH,{panelWidth:e.panelWidth,styles:e,key:`issue.forge.glance.panel_${s.appKey}_${s.moduleKey}`,glance:s,isOpen:t});default:return null}}render(){const{isCompact:e,openedGlance:t,glance:s,refs:n}=this.props,i=!!t&&t.appKey===s.appKey&&t.moduleKey===s.moduleKey;return a.a.createElement(ZW.a,{refs:n,isOpen:i,isCompact:e},e=>this.renderGlance(e,i))}}IH.displayName="GlanceAnimatedPanel",IH.defaultProps={openedGlance:null};var CH=Object(Fs.a)(e=>({onMount:t=>e("mounted",t)}))(IH);const TH=Q.default.div([""]),PH=Q.default.div(["margin-bottom:","px;"],2*J.e),_H=e=>{const[,{register:t}]=Object(Bc.b)(),s=Object(n.useCallback)(e=>{t("status-and-approval-spotlight",e)},[t]);return a.a.createElement(TH,{innerRef:s},a.a.createElement(PH,{key:"STATUS_AND_APPROVAL","data-test-id":"issue.views.issue-base.context.status-and-approvals-wrapper.status-and-approval"},a.a.createElement(IC,{key:"WRAPPED_STATUS"}),e.shouldShowApprovalPanel&&a.a.createElement(Jd,null)))};_H.displayName="StatusAndApprovalsWithRef";const xH=e=>a.a.createElement(PH,{key:"STATUS","data-test-id":"issue.views.issue-base.context.status-and-approvals-wrapper.status-and-approval"},a.a.createElement(IC,{key:"STATUS"}),e.shouldShowApprovalPanel&&a.a.createElement(Jd,null));xH.displayName="StatusAndApprovalsWithoutRef";var DH=s("./node_modules/@atlaskit/icon/glyph/settings.js"),AH=s.n(DH),MH=s("./src/packages/issue/issue-view/src/configurations.js"),LH=s("./src/packages/issue/issue-view/src/selectors/classic-project-config-selector.js"),RH=s("./src/packages/issue/issue-view/src/selectors/request-type-selector.js");const NH=MH.h.software,UH=Object(Xn.createSelector)(P.g,LH.a,_.D,_.F,RH.a,(e,t,s,n,a)=>s&&t?"service_desk"===n?a?`${e}/servicedesk/admin/${s}/request-types/request-type/${a}`:MH.h.service_desk:`${e}/plugins/servlet/project-config/${s}/issuelayout?screenId=${t}`:n?MH.h[n]:NH);var FH=s("./src/packages/issue/issue-view/src/selectors/issue-actions-selector.js"),VH=Object(j.defineMessages)({move:{id:"issue.move",defaultMessage:"Move"},clone:{id:"issue.clone",defaultMessage:"Clone"},delete:{id:"issue.delete",defaultMessage:"Delete"},print:{id:"issue.print",defaultMessage:"Print"},exportXML:{id:"issue.export-xml",defaultMessage:"Export XML"},exportDOC:{id:"issue.export-doc",defaultMessage:"Export Word"},switchToModal:{id:"issue.switch-to-modal",defaultMessage:"Open issues in dialog"},switchToSidebar:{id:"issue.switch-to-sidebar",defaultMessage:"Open issues in sidebar"},newIssueView:{id:"issue.title-for-new-issue-actions",defaultMessage:"New Jira issue view"},swiftLink:{id:"issue.swift-link",defaultMessage:"Configure"},swiftBacklink:{id:"issue.swift-backlink-title",defaultMessage:"Back to {issueKey}"},startTour:{id:"issue.start-guided-tour",defaultMessage:"Show me the highlights"},findOutMore:{id:"issue.find-out-more",defaultMessage:"Find out more"},seeOldView:{id:"issue.see-old-view",defaultMessage:"See the old view"},turnOffNewIssueView:{id:"issue.turn-off-new-issue-view",defaultMessage:"Turn off new issue view"},turnOffForNow:{id:"issue.turn-off-issue-view-for-now",defaultMessage:"Turn off for now"},triggerButtonLabel:{id:"issue.label-for-issue-actions-button",defaultMessage:"Actions"},configure:{id:"issue.configure",defaultMessage:"Configure"},addToParentLevel:{id:"issue.add-to-parent-level",defaultMessage:"Add parent"},changeParentLevel:{id:"issue.change-parent-level",defaultMessage:"Change parent"},convertToSubtask:{id:"issue.convert-to-subtask",defaultMessage:"Convert to Subtask"},convertToIssue:{id:"issue.convert-to-issue",defaultMessage:"Convert to Issue"}}),KH=Object(j.defineMessages)({configureTooltipAdmin:{id:"issue.details.configuration-button.configure-fields.tooltip-admin",defaultMessage:"Configure fields"},configureTooltipEndUser:{id:"issue.details.configuration-button.configure-fields.tooltip-end-user",defaultMessage:"Contact your admin to change the field order & layout"},configureTooltipAdminNoRequestType:{id:"issue.details.configuration-button.configure-fields.tooltip-admin-no-request-type",defaultMessage:"You can\u2019t configure the layout of an issue while it doesn\u2019t have a request type."}});var BH=Q.default.div(["margin:","px ","px 0 0;display:block;min-width:0;max-width:50%;[type='button']{padding:0;font-size:12px;span{margin:0;text-overflow:unset;}span[class*='Icon__IconWrapper']{width:16px;}}"],J.e/2,1.5*J.e);const WH=Object(n.memo)(e=>{const{classicConfigurationLinkMode:t,configScreenUrl:s,intl:{formatMessage:n}}=e,i=((e,t)=>{switch(e){case"show":return{tooltipText:t(KH.configureTooltipAdmin),isDisabled:!1};case"disabled_permission":return{tooltipText:t(KH.configureTooltipEndUser),isDisabled:!0};case"disabled_no_request_type":return{tooltipText:t(KH.configureTooltipAdminNoRequestType),isDisabled:!0};case"disabled_no_screen_id":return{tooltipText:"",isDisabled:!0};case"hide":default:return{isHidden:!0}}})(t,n);if(i.isHidden)return null;const{tooltipText:r,isDisabled:o}=i,c=n(VH.configure);return a.a.createElement(BH,null,a.a.createElement(Ae.a,{position:"mouse",mousePosition:"left",content:r},a.a.createElement(q.a,{isDisabled:o,appearance:"subtle-link",iconBefore:a.a.createElement(AH.a,{label:""}),href:s,rel:"noopener noreferrer",onClick:(e,t)=>Object(qi.h)(t,"configureButton")},c)))});var HH=Object(Ts.a)([Object(i.b)(e=>({classicConfigurationLinkMode:Object(FH.c)(e),configScreenUrl:UH(e)}),{}),j.injectIntl])(WH),GH=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js"),$H=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js");const qH=Object(Xn.createSelector)(_.e,e=>e.createdDate),zH=Q.default.div(["display:flex;margin-top:","px;"],J.e/2),YH=Q.default.small(["color:",";padding-top:","px;white-space:nowrap;margin-top:0;font-size:","px;line-height:",";"],Je.a.N200,J.e/4,1.5*J.e,J.e/6),QH={whenDisplaySettingSwitchable:Object(Q.css)([":hover{color:",";}"],Je.a.N500)},JH=e=>{const{text:t,date:s,timeZone:n}=e;return(a.a.createElement(zH,null,a.a.createElement(YH,null,t,"\xa0",a.a.createElement(Fr.b,{value:s,timeZone:n,extraStyles:QH,tooltipPosition:"right"}))))};JH.displayName="AuditDate";var ZH=JH,XH=Object(Ts.a)([Object(i.b)(e=>({timeZone:Object(_.z)(e)}),{})])(ZH);const eG=a.a.createElement(j.FormattedMessage,{id:"issue.created-date-text-short",defaultMessage:"Created"}),tG=({date:e})=>null!==e&&""!==e?a.a.createElement(KP.b,null,a.a.createElement(XH,{date:e,text:eG})):null;tG.defaultProps={date:null};var sG=Object(i.b)(e=>({date:qH(e)}),{})(tG);const nG=Object(Xn.createSelector)(_.e,e=>e.updatedDate),aG=a.a.createElement(j.FormattedMessage,{id:"issue.updated-date-text-short",defaultMessage:"Updated"}),iG=({date:e})=>null!==e&&""!==e?a.a.createElement(KP.b,null,a.a.createElement(XH,{date:e,text:aG})):null;iG.defaultProps={date:null};var rG=Object(i.b)(e=>({date:nG(e)}),{})(iG);const oG=Q.default.div(["margin-top:","px;margin-right:","px;flex:1;"],J.e/2,2*J.e);var cG=()=>a.a.createElement(oG,null,a.a.createElement(sG,null),a.a.createElement(rG,null)),lG=s("./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js");function uG(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dG(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?uG(Object(s),!0).forEach((function(t){pG(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):uG(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pG(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var mG=({fieldKey:e,propName:t,isEnabled:s=(()=>!0),FieldValueSubscriber:n=Um.a})=>i=>r=>{if(!s())return a.a.createElement(i,r);const{issueKey:o}=r;return(a.a.createElement(n,{issueKey:o,fieldKey:e},e=>{const s=dG(dG({},r),{},{[t]:e});return(a.a.createElement(i,s))}))};const bG=Object(Xn.createSelector)(nw.a,xU,Ps.i,_.q,P_.b,WU.a,P.v,zR.a,$K.a,(e,t,s,n,a,i,r,o,c)=>{const l=t&&!s&&n;return{canCreateAttachment:a,shouldShowCreateSubtaskButton:e&&!s&&!l,shouldShowIssueInEpicButton:l,supportsChildCreation:s,canCreateIssueLink:i,isServiceDesk:r,canLinkConfluencePage:o,canAddWebLinks:c}});var fG=s("./src/packages/wrm/src/wrm-module-loader/index.js"),gG=s("./src/packages/wrm/src/common-modules/calendar-locale-module.js");const hG=Q.default.div(["display:flex;flex-direction:row;width:100%;"]),yG=Object(Q.default)(kN.a)(["flex-grow:1;"]),OG=Object(Q.default)(kN.a)(["width:8px;"]),jG=Q.default.div(["width:32px;height:32px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjAgMCAzMiAzMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT4zMngzMl9yb3VuZGVkZWRnZTwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9IjMyeDMyX3JvdW5kZWRlZGdlIiBmaWxsPSIjRkZGRkZGIj4gICAgICAgICAgICA8cGF0aCBkPSJNMywwIEMxLjM0MzE0NTc1LDMuMDQzNTkxODhlLTE2IC0yLjAyOTA2MTI1ZS0xNiwxLjM0MzE0NTc1IDAsMyBMMCwwIEwzLDAgWiBNMjksMCBMMzIsMCBMMzIsMyBDMzIsMS4zNDMxNDU3NSAzMC42NTY4NTQyLC0zLjA0MzU5MTg4ZS0xNiAyOSwwIFogTTMyLDI5IEwzMiwzMiBMMjksMzIgQzMwLjY1Njg1NDIsMzIgMzIsMzAuNjU2ODU0MiAzMiwyOSBaIE0zLDMyIEwwLDMyIEwwLDI5IEMyLjAyOTA2MTI1ZS0xNiwzMC42NTY4NTQyIDEuMzQzMTQ1NzUsMzIgMywzMiBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==);"]);var EG=()=>a.a.createElement(wN.a,null,a.a.createElement(kN.b,null),a.a.createElement(vN.a,{paddingTop:4,paddingBottom:9},a.a.createElement(hG,null,a.a.createElement(jG,null),a.a.createElement(OG,null),a.a.createElement(jG,null),a.a.createElement(OG,null),a.a.createElement(jG,null),a.a.createElement(yG,null)))),vG=s("./node_modules/lodash/differenceBy.js"),kG=s.n(vG),wG=s("./node_modules/@atlaskit/icon/glyph/addon.js"),SG=s.n(wG),IG=s("./src/packages/common-legacy-do-not-add-anything-new/src/analytics-v2-wrapped-components/dropdown-item.js");function CG(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function TG(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?CG(Object(s),!0).forEach((function(t){PG(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):CG(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function PG(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _G=3*J.e,xG=Q.default.span(["padding:","px;"],J.e/2),DG=Q.default.div(["display:inline-flex;"]),AG=Q.default.span(["color:",";"],Je.a.B400),MG=Object(j.defineMessages)({quickAddAddonLabel:{id:"issue.quickadd.addon",defaultMessage:"Add app"},addMore:{id:"issue.quickadd.addon.add.more",defaultMessage:"Add apps"}}),LG=e=>!!e.tooltip&&!!e.iconUrl;class RG extends n.Component{constructor(...e){super(...e),this.getExtensionsToShowIconsFor=()=>this.props.availableAddons.filter(LG).slice(0,3),this.getExtensionsToShowInDropdown=()=>kG()(this.props.availableAddons,this.getExtensionsToShowIconsFor(),"moduleKey"),this.transformExtension=e=>{const t=a.a.createElement(IG.b,{key:e.moduleKey,elemBefore:RG.getIcon(e),onClick:this.itemSelected(e)},e.name);return e.tooltip?a.a.createElement(Ae.a,{content:e.tooltip,key:e.moduleKey},t):t},this.createDropdownItems=e=>a.a.createElement(ar.a,null,e.map(this.transformExtension),this.props.canInstallAddons&&a.a.createElement(IG.b,{key:MG.addMore.id,elemBefore:a.a.createElement(AG,null,a.a.createElement(Lb.a,{label:this.props.intl.formatMessage(MG.addMore)})),onClick:this.props.onAddExtensionsClick,href:`${this.props.baseUrl}/plugins/servlet/upm/marketplace/featured`,target:"_new"},a.a.createElement(AG,null,this.props.intl.formatMessage(MG.addMore)))),this.itemSelected=e=>()=>{const t=Object($C.b)(e.moduleKey,10),s="FORGE_ENTITY_TYPE"===e.type;let n=s?Object(Fi.f)(e.appKey,e.moduleKey):Object(Fi.d)(e.appKey,e.moduleKey);if(s){const t=`${n}-`,s=this.props.contentPanelsInIssue.find(e=>Object(Fi.b)(e,t));Object(Qe.isIssuePanelNextEnabled)()?null!=s&&!1===e.allowMultiple&&(n=s):null!=s&&(n=s)}e.showByDefault||this.props.contentPanelsInIssue.includes(`${e.appKey}_${t}`)||this.props.contentPanelsInIssue.includes(n)?(this.props.onContentPanelFocusAnalytics(Pa(e.appKey,e.moduleKey)),this.props.onSelectContentPanel(n),this.sendQuickAddClickedEvent(!1,e.appKey,e.moduleKey,s)):(this.props.onContentPanelAddAnalytics(Pa(e.appKey,e.moduleKey)),this.props.onAddExtension(n),this.sendQuickAddClickedEvent(!0,e.appKey,e.moduleKey,s))},this.sendQuickAddClickedEvent=(e,t,s,n)=>{this.props.onQuickAddClick("ISSUE_QUICK_ADD_CLICKED",{addon_key:t,key:s},{isNewToIssue:e.toString()}),n&&Object(pT.m)(this.props.source,{isNewToIssue:e})},this.transformExtensionToQuickIcon=(e,t)=>this.props.createItemView({id:`${e.appKey}_${e.moduleKey}`,label:e.tooltip||e.name,icon:RG.getIcon(e),onClick:this.itemSelected(e),itemIndex:this.props.startIndex+t}),this.renderVisibleExtensionIcons=()=>this.getExtensionsToShowIconsFor().map((e,t)=>this.transformExtensionToQuickIcon(e,t)),this.renderDropdownExtensions=()=>{const{intl:e,canInstallAddons:t}=this.props,s=this.getExtensionsToShowInDropdown();return s.length>0||t?a.a.createElement(JC.a,{key:"ecosystem-actions-dropdown",boundariesElement:"scrollParent",triggerType:"button",triggerButtonProps:{spacing:"none",theme:(e,t)=>{const s=e(t);return TG(TG({},s),{},{buttonStyles:TG(TG({},s.buttonStyles),{},{margin:0})})},iconBefore:a.a.createElement(xG,null,a.a.createElement(XC.a,{size:"medium",label:""})),"aria-label":e.formatMessage(MG.quickAddAddonLabel)}},this.createDropdownItems(s)):null}}static getIcon(e){return e.iconUrl?a.a.createElement(uf.a,{title:e.name,url:e.iconUrl,width:_G,height:_G,fallback:()=>this.getFallbackIcon({name:e.name})}):this.getFallbackIcon({name:e.name})}componentDidMount(){const{availableAddons:e,contentPanelsInIssue:t,onContentPanelListLoadedAnalytics:s}=this.props;e.length>0&&s(((e,t)=>{let s=0;const n=e.reduce((e,n)=>{e[n.appKey]||(e[n.appKey]={total:0,totalOnPage:0});const a=e[n.appKey];a.total+=1;const i=`${n.appKey}_${n.moduleKey}`;return t.includes(i)&&(a.totalOnPage+=1,s+=1),e},{}),a=JSON.stringify(n);return{totalOnPage:s,total:e.length,data:Object(ja.j)(a)(a)}})(e,t))}render(){const e=this.renderVisibleExtensionIcons(),t=this.renderDropdownExtensions();return a.a.createElement(DG,null,[...e,t])}}RG.displayName="UnsafeAddonsQuickAdd",RG.defaultProps={canInstallAddons:!1,availableAddons:[],contentPanelsInIssue:[],onContentPanelListLoadedAnalytics:o.a,onContentPanelAddAnalytics:o.a,onContentPanelFocusAnalytics:o.a,onAddExtensionsClick:o.a,onQuickAddClick:o.a,onAddWebLinkClick:o.a},RG.getFallbackIcon=e=>a.a.createElement(SG.a,{size:"medium",label:e.name});const NG=(e,t,s)=>{Jf(e,t,s)};var UG=Nt()(Object(Fs.a)(e=>({onContentPanelListLoadedAnalytics:t=>e("load",TG({},t)),onContentPanelAddAnalytics:t=>e("add",TG({},t)),onContentPanelFocusAnalytics:t=>e("focus",TG({},t))})),Object(E.a)({onAddExtensionsClick:"quickAddDropdownMenuItem",onAddWebLinkClick:"quickAddWebLink"}),Object(i.b)(e=>({availableAddons:Object(Ra.k)(e),contentPanelsInIssue:Object(Ra.p)(e),baseUrl:Object(P.g)(e),canInstallAddons:Object(Ra.c)(e),source:Object(P.b)(e),onQuickAddClick:NG}),e=>({onAddWebLinkClick:()=>e(Object(GK.k)())})),Object(Hs.a)())(Object(j.injectIntl)(RG)),FG=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),VG=s.n(FG),KG=s("./node_modules/@atlaskit/icon/glyph/link.js"),BG=s.n(KG),WG=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/styled.js");const HG=Q.default.span(["display:flex;margin-right:","px;"],J.e),GG=Q.default.span(["padding:","px;"],J.e/2);var $G=Object(n.memo)(e=>{const{id:t,icon:s,label:i,onClick:r,testId:o}=e.item,c=Object(n.useCallback)((e,s)=>{Object(qi.h)(s,"createLink",{actionItemId:t,name:"linkDropdownListItem"}),r&&r()},[t,r]);return a.a.createElement(IG.b,{id:t,elemBefore:s,onClick:c,"data-test-id":o},i)});function qG(){return(qG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const zG=e=>{const[t,s]=Object(n.useState)(!1),{position:i,actions:r,tooltip:o,triggerButtonProps:c}=e,l=a.a.createElement(q.a,qG({spacing:"none","aria-label":o,"aria-expanded":t},c,{"data-test-id":"issue.views.issue-base.foundation.quick-add.link-button.ui.link-dropdown-button"})),u=void 0!==o?a.a.createElement(Ae.a,{content:o,position:"bottom",hideTooltipOnClick:!0},l):l;return a.a.createElement(JC.a,{key:"web-link-actions-dropdown",position:i,trigger:u,onOpenChange:({isOpen:e},t)=>{s(e),Object(qi.h)(t,"moreLinksDropdownToggled",{isOpen:e,name:"linkDropdownListButton"})}},a.a.createElement(ar.a,null,r.map(e=>a.a.createElement($G,{key:e.id,item:e}))))};zG.displayName="DropdownListButton";var YG=zG;function QG(){return(QG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function JG(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ZG(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function XG(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ZG(Object(s),!0).forEach((function(t){e$(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ZG(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function e$(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const t$=({compactMode:e,actions:t,tooltipLabel:s})=>{if(e){const e={iconBefore:a.a.createElement(GG,null,a.a.createElement(BG.a,{size:"medium",label:""}))};return(a.a.createElement(YG,{actions:t,triggerButtonProps:e,tooltip:s}))}const[{id:n,onClick:i,label:r,tooltip:o,testId:c},...l]=t,u=a.a.createElement(WG.b,{compactMode:e},a.a.createElement(BG.a,{size:"medium",label:""})),d=(e,t)=>{Object(qi.h)(t,"AddLink",{name:"AddLinkButton"}),i()};return 0===l.length?a.a.createElement(Ae.a,{content:o,position:"bottom",key:n},a.a.createElement(q.a,{"aria-label":o,spacing:"default",iconBefore:u,onClick:d,"data-test-id":c},r)):a.a.createElement(a.a.Fragment,null,a.a.createElement(Ae.a,{content:o,position:"bottom",key:n},a.a.createElement(q.a,{"aria-label":o,spacing:"default",iconBefore:u,onClick:d,"data-test-id":c,theme:(e,t)=>{const s=e(t);return XG(XG({},s),{},{buttonStyles:XG(XG({},s.buttonStyles),{},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:`2px solid ${Je.a.N40}`,margin:0})})}},r)),a.a.createElement(YG,{actions:l,position:"bottom right",tooltip:s,triggerButtonProps:{iconBefore:a.a.createElement(GG,null,a.a.createElement(VG.a,{size:"medium",label:""})),theme:(e,t)=>{const s=e(t);return XG(XG({},s),{},{buttonStyles:XG(XG({},s.buttonStyles),{},{borderTopLeftRadius:0,borderBottomLeftRadius:0,margin:0})})}}}))},s$=e=>{let{actions:t}=e,s=JG(e,["actions"]);return 0===t.length?null:a.a.createElement(HG,null,a.a.createElement(t$,QG({actions:t},s)))};s$.displayName="LinkButtonWithWrapper";var n$=s$,a$=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/view.js"),i$=s("./node_modules/@atlaskit/icon/glyph/attachment.js"),r$=s.n(i$),o$=s("./node_modules/@atlaskit/icon/glyph/child-issues.js"),c$=s.n(o$),l$=s("./node_modules/@atlaskit/icon/glyph/issues.js"),u$=s.n(l$),d$=s("./node_modules/@atlaskit/icon/glyph/page.js"),p$=s.n(d$),m$=s("./node_modules/@atlaskit/icon/glyph/subtask.js"),b$=s.n(m$),f$=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-create-icon.svg"),g$=s.n(f$),h$=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-icon.svg"),y$=s.n(h$),O$=Object(j.defineMessages)({addAttachmentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-label",defaultMessage:"Add attachment"},createSubtaskTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-label",defaultMessage:"Create subtask"},addIssueLinkTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-label",defaultMessage:"Link issue"},createChildTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-label",defaultMessage:"Add a child issue"},linkConfluencePageTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-label",defaultMessage:"Link a Confluence page"},createIssueInEpicTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-label",defaultMessage:"Create issue in epic"},addAttachmentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-button-label",defaultMessage:"Attach"},createSubtaskLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-button-label",defaultMessage:"Create subtask"},addIssueLinkLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-button-label",defaultMessage:"Link issue"},createChildLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-button-label",defaultMessage:"Add a child issue"},linkConfluencePageLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-button-label",defaultMessage:"Link Confluence page"},createIssueInEpicLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-button-label",defaultMessage:"Create issue in epic"},linkIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-label",defaultMessage:"Link major incident"},linkIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-tooltip",defaultMessage:"Link major incident"},createIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-label",defaultMessage:"Create major incident"},createIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-tooltip",defaultMessage:"Create major incident"},addWebLinkLabel:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-label",defaultMessage:"Add web link"},addWebLinkTooltip:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-tooltip",defaultMessage:"Link web pages and more"},linkDropdownButtonLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-label",defaultMessage:"Link web pages and more"},linkDropdownButtonCompactLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-compact-label",defaultMessage:"Link issues, web pages, and more"}});const j$=Q.default.div(["margin-bottom:","px;padding:","px 0;display:inline-flex;"],J.e/2,J.e/2),E$=Q.default.img(["height:","px;width:","px;"],3*J.e,3*J.e);var v$=e=>{const{formatMessage:t,canCreateAttachment:s,shouldShowCreateSubtaskButton:n,shouldShowIssueInEpicButton:i,canCreateIssueLink:r,onAddAttachmentClick:o,onCreateSubtaskClick:c,onCreateIssueInEpicClick:l,onChildCreateClick:u,supportsChildCreation:d,isServiceDesk:p,canLinkConfluencePage:m,onLinkConfluencePageClick:b,onCreateMajorIncidentClick:f,incidentLinking:g,incidentEscalate:h,onLinkIncidentClick:y,canAddWebLinks:O,onAddWebLinkClick:j,onAddIssueLinkClick:E}=e,v=[{id:"attachment",tooltip:t(O$.addAttachmentTooltip),label:t(O$.addAttachmentLabel),icon:a.a.createElement(r$.a,{size:"medium",label:""}),onClick:o,itemIndex:0,shouldRender:!p&&s,testId:""},{id:"create-subtask",tooltip:t(O$.createSubtaskTooltip),label:t(O$.createSubtaskLabel),icon:a.a.createElement(b$.a,{size:"medium",label:""}),onClick:c,itemIndex:1,shouldRender:n,testId:""},{id:"create-issue-in-epic",tooltip:t(O$.createIssueInEpicTooltip),label:t(O$.createIssueInEpicLabel),icon:a.a.createElement(c$.a,{size:"medium",label:""}),onClick:l,itemIndex:1,shouldRender:i,testId:""},{id:"create-child",tooltip:t(O$.createChildTooltip),label:t(O$.createChildLabel),icon:a.a.createElement(c$.a,{size:"medium",label:""}),onClick:u,itemIndex:1,shouldRender:d,testId:""},{id:"create-incident",tooltip:t(O$.createIncidentTooltip),label:t(O$.createIncidentLabel),icon:a.a.createElement(a.a.Fragment,null,a.a.createElement(Ye.d,{eventName:"escalateMajorIncidentButton viewed",componentName:"BentoQuickAddItems"}),a.a.createElement(E$,{src:g$.a})),onClick:f,itemIndex:3,shouldRender:!!h,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.create-incident",hasGlobalSpotlightTarget:!0}],k=[{id:"issue-links",tooltip:t(O$.addIssueLinkTooltip),label:t(O$.addIssueLinkLabel),icon:a.a.createElement(u$.a,{size:"medium",label:""}),onClick:E,itemIndex:2,shouldRender:r,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-issue"},{id:"link-confluence-page",tooltip:t(O$.linkConfluencePageTooltip),label:t(O$.linkConfluencePageLabel),icon:a.a.createElement(p$.a,{size:"medium",label:""}),onClick:b,itemIndex:3,shouldRender:m,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-page"},{id:"link-incident",tooltip:t(O$.linkIncidentTooltip),label:t(O$.linkIncidentLabel),icon:a.a.createElement(E$,{src:y$.a}),onClick:y,itemIndex:3,shouldRender:!!g,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-incident"},{id:"add-web-link",tooltip:t(O$.addWebLinkTooltip),label:t(O$.addWebLinkLabel),icon:a.a.createElement(ZK.a,{size:"medium",label:""}),onClick:j,itemIndex:3,shouldRender:O,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-web"}];return{issueActions:v.filter(e=>e.shouldRender),linkingActions:k.filter(e=>e.shouldRender)}};function k$(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function w$(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?k$(Object(s),!0).forEach((function(t){S$(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k$(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function S$(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class I$ extends n.Component{constructor(...e){super(...e),this.state={shouldUseCompactButtons:!1},this.componentDidMount=()=>{this.props.fetchConfluenceAppLinks(),this.setShouldUseCompactButtons()},this.componentDidUpdate=()=>{this.setShouldUseCompactButtons()},this.setQuickAddRef=e=>{this.quickAddRef=e},this.setShouldUseCompactButtons=()=>{const e=!this.props.containerWidth||this.props.containerWidth<=this.updateAndGetQuickAddExpandedWidth();this.state.shouldUseCompactButtons!==e&&this.setState({shouldUseCompactButtons:e})},this.getQuickAddRefClientWidth=()=>this.quickAddRef?this.quickAddRef.clientWidth:0,this.updateAndGetQuickAddExpandedWidth=()=>(this.quickAddExpandedWidth<this.getQuickAddRefClientWidth()&&(this.quickAddExpandedWidth=this.getQuickAddRefClientWidth()),this.quickAddExpandedWidth),this.quickAddExpandedWidth=0,this.quickAddRef=void 0,this.sendAnalyticsEventFunc=(e,t,s)=>()=>{s(),this.props.triggerButtonClickAnalytics(e,t,4)},this.createItemView=e=>{const{id:t,tooltip:s,label:n,icon:i,onClick:r,itemIndex:o,testId:c,hasGlobalSpotlightTarget:l}=e;return(a.a.createElement(Ae.a,{content:s,position:"bottom",key:t},a.a.createElement(a$.a,{key:t,id:t,icon:i,onClick:this.sendAnalyticsEventFunc(t,o,r),label:n,compactMode:this.state.shouldUseCompactButtons,testId:c,hasGlobalSpotlightTarget:l})))},this.renderSkeleton=()=>a.a.createElement(EG,null),this.getQuickAddActionData=()=>{const{intl:{formatMessage:e}}=this.props,{issueActions:t,linkingActions:s}=v$(w$(w$({},this.props),{},{formatMessage:e})),n=t.map(this.createItemView),{shouldUseCompactButtons:i}=this.state,r=e(i?O$.linkDropdownButtonCompactLabel:O$.linkDropdownButtonLabel),o=a.a.createElement(n$,{key:"quick-add-web-link-button",compactMode:i,actions:s,tooltipLabel:r}),c=a.a.createElement(UG,{key:"quick-add-content-panel",externalId:"issue.ecosystem.quick-add-content-panel",onSelectContentPanel:e=>{this.props.onSelectContentPanel(e),this.props.triggerButtonClickAnalytics("select_contentpanel",3,4)},onAddExtension:e=>{this.props.onAddExtension(e),this.props.triggerButtonClickAnalytics("add_contentpanel",3,4)},createItemView:this.createItemView,startIndex:n.length});return[...n,o,c]}}render(){if(this.props.isPreview)return this.renderSkeleton();const{locale:e}=this.props,t=this.getQuickAddActionData();return a.a.createElement(Kc.a,{name:"QUICK_ADDS"},t.length?a.a.createElement(fG.a,{modules:[Object(gG.a)(e)]},()=>a.a.createElement(j$,{innerRef:this.setQuickAddRef},t)):a.a.createElement("div",null))}}I$.displayName="UnsafeQuickAddItems",I$.displayName="QuickAddItems",I$.defaultProps={canCreateIssueLink:!1,canCreateAttachment:!1,canLinkConfluencePage:!1,canAddWebLinks:!1,triggerButtonClickAnalytics:o.a};const C$=Object(j.injectIntl)(Object(Hs.a)()(I$));function T$(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function P$(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T$(Object(s),!0).forEach((function(t){_$(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T$(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _$(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const x$=e=>({onAddAttachmentClick:()=>{e(Object(rn.b)())},onCreateSubtaskClick:()=>{e(J_())},onCreateIssueInEpicClick:()=>{e(Z_())},onAddIssueLinkClick:()=>{Object(Rr.c)().markStartOfInteraction({key:qr.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT,cancelExisting:!0}),e(Object(VU.a)())},onChildCreateClick:()=>{e(X_())},onLinkConfluencePageClick:()=>{e(Object(qR.h)())},onLinkIncidentClick:()=>{e(BV())},onCreateMajorIncidentClick:()=>{e(WV())},onAddWebLinkClick:()=>{e(Object(GK.k)())}});var D$=Nt()(mG({fieldKey:"servicedesk-incident-linking",propName:"incidentEscalate"}),mG({fieldKey:"servicedesk-incident-linking",propName:"incidentLinking"}),Object(i.b)(e=>P$(P$({},bG(e)),{},{isPreview:Object(_.s)(e),locale:Object(P.D)(e),projectType:Object(_.F)(e),issueKey:Object(P.B)(e)}),e=>P$(P$({},x$(e)),{},{onAddExtension:t=>{e(Object(GC.b)(t))},onSelectContentPanel:t=>{e(Object(GC.d)(t))},fetchConfluenceAppLinks:()=>{e(Object(lG.a)())}})),Object(Fs.a)(e=>({triggerButtonClickAnalytics:(t,s,n)=>e(`${t}.click`,{index:s,actions:n})})),Ui)(C$),A$=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-create-icon.svg"),M$=s.n(A$),L$=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-icon.svg"),R$=s.n(L$),N$=Object(j.defineMessages)({addAttachmentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-label",defaultMessage:"Add attachment"},createSubtaskTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-label",defaultMessage:"Create subtask"},addIssueLinkTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-label",defaultMessage:"Link issue"},createChildTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-label",defaultMessage:"Add a child issue"},linkConfluencePageTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-label",defaultMessage:"Link a Confluence page"},createIssueInEpicTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-label",defaultMessage:"Create issue in epic"},addAttachmentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-button-label",defaultMessage:"Attach"},createSubtaskLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-button-label",defaultMessage:"Create subtask"},addIssueLinkLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-button-label",defaultMessage:"Link issue"},createChildLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-button-label",defaultMessage:"Add a child issue"},linkConfluencePageLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-button-label",defaultMessage:"Link Confluence page"},createIssueInEpicLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-button-label",defaultMessage:"Create issue in epic"},linkIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-label",defaultMessage:"Link major incident"},linkIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-tooltip",defaultMessage:"Link major incident"},createIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-label",defaultMessage:"Create major incident"},createIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-tooltip",defaultMessage:"Create major incident"},addWebLinkLabel:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-label",defaultMessage:"Add web link"},addWebLinkTooltip:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-tooltip",defaultMessage:"Link web pages and more"},linkDropdownButtonLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-label",defaultMessage:"Link web pages and more"},linkDropdownButtonCompactLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-compact-label",defaultMessage:"Link issues, web pages, and more"}});const U$=Q.default.div(["margin-bottom:","px;padding:","px 0;display:inline-flex;"],J.e/2,J.e/2),F$=Q.default.img(["height:","px;width:","px;"],3*J.e,3*J.e);class V$ extends n.Component{constructor(...e){super(...e),this.state={shouldUseCompactButtons:!1},this.componentDidMount=()=>{this.props.fetchConfluenceAppLinks(),this.setShouldUseCompactButtons()},this.componentDidUpdate=()=>{this.setShouldUseCompactButtons()},this.setQuickAddRef=e=>{this.quickAddRef=e},this.setShouldUseCompactButtons=()=>{const e=!this.props.containerWidth||this.props.containerWidth<=this.updateAndGetQuickAddExpandedWidth();this.state.shouldUseCompactButtons!==e&&this.setState({shouldUseCompactButtons:e})},this.getQuickAddRefClientWidth=()=>this.quickAddRef?this.quickAddRef.clientWidth:0,this.updateAndGetQuickAddExpandedWidth=()=>(this.quickAddExpandedWidth<this.getQuickAddRefClientWidth()&&(this.quickAddExpandedWidth=this.getQuickAddRefClientWidth()),this.quickAddExpandedWidth),this.quickAddExpandedWidth=0,this.quickAddRef=void 0,this.sendAnalyticsEventFunc=(e,t,s)=>()=>{s(),this.props.triggerButtonClickAnalytics(e,t,4)},this.createItemView=e=>{const{id:t,tooltip:s,label:n,icon:i,onClick:r,itemIndex:o,testId:c,hasGlobalSpotlightTarget:l}=e;return(a.a.createElement(Ae.a,{content:s,position:"bottom",key:t},a.a.createElement(a$.a,{key:t,id:t,icon:i,onClick:this.sendAnalyticsEventFunc(t,o,r),label:n,compactMode:this.state.shouldUseCompactButtons,testId:c,hasGlobalSpotlightTarget:l})))},this.renderSkeleton=()=>a.a.createElement(EG,null),this.onAddIssueLinkClick=()=>{Object(Rr.c)().markStartOfInteraction({key:qr.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT,cancelExisting:!0}),this.props.onAddIssueLinkClick()},this.getQuickAddActionData=()=>{const{intl:e,canCreateAttachment:t,shouldShowCreateSubtaskButton:s,shouldShowIssueInEpicButton:n,canCreateIssueLink:i,onAddAttachmentClick:r,onCreateSubtaskClick:o,onCreateIssueInEpicClick:c,onChildCreateClick:l,supportsChildCreation:u,isServiceDesk:d,canLinkConfluencePage:p,onLinkConfluencePageClick:m,onCreateMajorIncidentClick:b,incidentLinking:f,incidentEscalate:g,onLinkIncidentClick:h,canAddWebLinks:y,onAddWebLinkClick:O}=this.props,j=[{id:"attachment",tooltip:e.formatMessage(N$.addAttachmentTooltip),label:e.formatMessage(N$.addAttachmentLabel),icon:a.a.createElement(r$.a,{size:"medium",label:""}),onClick:r,itemIndex:0,shouldRender:!d&&t,testId:""},{id:"create-subtask",tooltip:e.formatMessage(N$.createSubtaskTooltip),label:e.formatMessage(N$.createSubtaskLabel),icon:a.a.createElement(b$.a,{size:"medium",label:""}),onClick:o,itemIndex:1,shouldRender:s,testId:""},{id:"create-issue-in-epic",tooltip:e.formatMessage(N$.createIssueInEpicTooltip),label:e.formatMessage(N$.createIssueInEpicLabel),icon:a.a.createElement(c$.a,{size:"medium",label:""}),onClick:c,itemIndex:1,shouldRender:n,testId:""},{id:"create-child",tooltip:e.formatMessage(N$.createChildTooltip),label:e.formatMessage(N$.createChildLabel),icon:a.a.createElement(c$.a,{size:"medium",label:""}),onClick:l,itemIndex:1,shouldRender:u,testId:""},{id:"create-incident",tooltip:e.formatMessage(N$.createIncidentTooltip),label:e.formatMessage(N$.createIncidentLabel),icon:a.a.createElement(a.a.Fragment,null,a.a.createElement(Ye.d,{eventName:"escalateMajorIncidentButton viewed",componentName:"BentoQuickAddItems"}),a.a.createElement(F$,{src:M$.a})),onClick:b,itemIndex:3,shouldRender:!!g,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.create-incident",hasGlobalSpotlightTarget:!0}].filter(e=>e.shouldRender).map(this.createItemView),E=[{id:"issue-links",tooltip:e.formatMessage(N$.addIssueLinkTooltip),label:e.formatMessage(N$.addIssueLinkLabel),icon:a.a.createElement(u$.a,{size:"medium",label:""}),onClick:this.onAddIssueLinkClick,itemIndex:2,shouldRender:i,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-issue"},{id:"link-confluence-page",tooltip:e.formatMessage(N$.linkConfluencePageTooltip),label:e.formatMessage(N$.linkConfluencePageLabel),icon:a.a.createElement(p$.a,{size:"medium",label:""}),onClick:m,itemIndex:3,shouldRender:p,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-page"},{id:"link-incident",tooltip:e.formatMessage(N$.linkIncidentTooltip),label:e.formatMessage(N$.linkIncidentLabel),icon:a.a.createElement(F$,{src:R$.a}),onClick:h,itemIndex:3,shouldRender:!!f,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-incident"},{id:"add-web-link",tooltip:e.formatMessage(N$.addWebLinkTooltip),label:e.formatMessage(N$.addWebLinkLabel),icon:a.a.createElement(ZK.a,{size:"medium",label:""}),onClick:O,itemIndex:3,shouldRender:y,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-web"}].filter(e=>e.shouldRender),{shouldUseCompactButtons:v}=this.state,k=v?N$.linkDropdownButtonCompactLabel:N$.linkDropdownButtonLabel,w=e.formatMessage(k),S=a.a.createElement(n$,{key:"quick-add-web-link-button",compactMode:v,actions:E,tooltipLabel:w}),I=a.a.createElement(UG,{key:"quick-add-content-panel",externalId:"issue.ecosystem.quick-add-content-panel",onSelectContentPanel:e=>{this.props.onSelectContentPanel(e),this.props.triggerButtonClickAnalytics("select_contentpanel",3,4)},onAddExtension:e=>{this.props.onAddExtension(e),this.props.triggerButtonClickAnalytics("add_contentpanel",3,4)},createItemView:this.createItemView,startIndex:j.length});return[...j,S,I]}}render(){if(this.props.isPreview)return this.renderSkeleton();const{locale:e}=this.props,t=this.getQuickAddActionData();return a.a.createElement(Kc.a,{name:"QUICK_ADDS"},t.length?a.a.createElement(fG.a,{modules:[Object(gG.a)(e)]},()=>a.a.createElement(U$,{innerRef:this.setQuickAddRef},t)):a.a.createElement("div",null))}}V$.displayName="UnsafeQuickAddItems",V$.displayName="QuickAddItems",V$.defaultProps={canCreateIssueLink:!1,canCreateSubtask:!1,canCreateAttachment:!1,canLinkConfluencePage:!1,canAddWebLinks:!1,triggerButtonClickAnalytics:o.a};const K$=Object(j.injectIntl)(Object(Hs.a)()(V$));var B$=Nt()(mG({fieldKey:"servicedesk-incident-linking",propName:"incidentEscalate"}),mG({fieldKey:"servicedesk-incident-linking",propName:"incidentLinking"}),Object(i.b)(e=>{const t=Object(nw.a)(e),s=xU(e),n=Object(Ps.i)(e),a=Object(_.q)(e),i=s&&!n&&a,r=t&&!n&&!i;return{locale:Object(P.D)(e),canCreateAttachment:Object(P_.b)(e),shouldShowCreateSubtaskButton:r,shouldShowIssueInEpicButton:i,supportsChildCreation:n,canCreateIssueLink:Object(WU.a)(e),isPreview:Object(_.s)(e),isServiceDesk:Object(P.v)(e),canLinkConfluencePage:Object(zR.a)(e),canAddWebLinks:Object($K.a)(e),projectType:Object(_.F)(e),issueKey:Object(P.B)(e)}},e=>({fetchConfluenceAppLinks:()=>e(Object(lG.a)()),onAddAttachmentClick:()=>e(Object(rn.b)()),onCreateSubtaskClick:()=>e(J_()),onCreateIssueInEpicClick:()=>e(Z_()),onAddIssueLinkClick:()=>e(Object(VU.a)()),onChildCreateClick:()=>e(X_()),onLinkConfluencePageClick:()=>e(Object(qR.h)()),onLinkIncidentClick:()=>e(BV()),onCreateMajorIncidentClick:()=>e(WV()),onAddWebLinkClick:()=>e(Object(GK.k)()),onAddExtension:t=>e(Object(GC.b)(t)),onSelectContentPanel:t=>e(Object(GC.d)(t))})),Object(Fs.a)(e=>({triggerButtonClickAnalytics:(t,s,n)=>e(`${t}.click`,{index:s,actions:n})})),Ui)(K$),W$=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js"),H$=s("./src/packages/issue/issue-view/src/views/issue-details/issue-layout/styled.js");function G$(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function $$(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function q$(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$$(Object(s),!0).forEach((function(t){z$(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$$(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function z$(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Y$ extends n.Component{constructor(e){super(e),this.setSidePanelContainer=e=>{e&&this.setState(t=>({refs:q$(q$({},t.refs),{},{refSidePanelContainerElement:this.props.isMobile&&this.props.isCompact?document.body:e})}))},this.setLayoutContainer=e=>{e&&this.setState(t=>({refs:q$(q$({},t.refs),{},{refLayoutContainer:e})}))},this.setPanelColumn=e=>{e&&this.setState(t=>({refs:q$(q$({},t.refs),{},{refPanelColumnElement:e})}))},this.setVisibilityContainer=e=>{e&&this.setState(t=>({refs:q$(q$({},t.refs),{},{refVisibilityContainer:e}),contextWidth:e.offsetWidth}))},this.getPassedDownRefs=()=>this.state.refs,this.shouldRenderHeaderFF=()=>this.props.shouldRenderHeader,this.renderContextItems=()=>a.a.createElement(H$.a,{key:"CONTEXT_ITEMS"},a.a.createElement(YW,{externalId:"issue.context-items"})),this.renderSummary=()=>a.a.createElement(H$.i,{key:"SUMMARY"},a.a.createElement(AI,null),a.a.createElement(H$.h,null,a.a.createElement(nC,null))),this.renderFullSizeLayoutSideContent=()=>a.a.createElement(H$.j,{innerRef:this.setVisibilityContainer,show:this.props.arePanelsClosed,key:"sideContentWrapper"},Object(Qe.isTemplatedFoundationContextEnabled)()?a.a.createElement(AC,null):this.renderStatusFieldAndApprovals(),Object(Qe.isTemplatedBaseContextEnabled)()?a.a.createElement(LC,{key:"CONTEXT_ITEMS",externalId:"issue.context-items"}):a.a.createElement(YW,{forgeExtensions:this.props.forgeExtensions,key:"CONTEXT_ITEMS",externalId:"issue.context-items"}),a.a.createElement(H$.b,{"data-test-id":"issue.views.issue-details.issue-layout.footnote"},a.a.createElement(cG,{key:"META_CONTAINER"}),a.a.createElement(HH,{key:"CONFIGURE_FIELDS"}))),this.renderCompactHeader=()=>this.shouldRenderHeaderFF()?a.a.createElement(W$.a,{key:"SPLIT_HEADER",elementId:"jira-issue-header"},a.a.createElement(GH.a,{shouldShowCloseButton:this.props.shouldShowCloseButton,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowRootProjectsBreadcrumb,issueDeleteCallbacks:this.props.issueDeleteCallbacks,renderFeedback:this.props.renderFeedback,viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose})):null,this.renderHeaderBreadcrumbs=()=>this.shouldRenderHeaderFF()?a.a.createElement(W$.a,{elementId:"jira-issue-header"},a.a.createElement($H.a,{shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowRootProjectsBreadcrumb,isCompact:this.props.isCompact})):null,this.renderHeaderActions=()=>this.shouldRenderHeaderFF()?a.a.createElement(W$.a,{elementId:"jira-issue-header-actions",customStyles:"margin-right: -7px"},a.a.createElement(oi.a,{renderFeedback:this.props.renderFeedback,issueDeleteCallbacks:this.props.issueDeleteCallbacks,viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose,shouldShowCloseButton:this.props.shouldShowCloseButton})):null,this.renderFullSizeLayout=()=>{const e=H$.d,t=H$.c;return a.a.createElement(Ms.a,{hasMultipleScrollingColumns:!0},a.a.createElement(e,{issueMaxWidth:this.props.issueMaxWidth,medium:Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?6:8,isLeftmost:!0},a.a.createElement(t,{isLeftmost:!0,issueMaxWidth:this.props.issueMaxWidth,"data-test-id":"issue.views.issue-details.issue-layout.left-most-column"},this.renderHeaderBreadcrumbs(),Object(Qe.isTemplatedFoundationContentEnabled)()?a.a.createElement(DC,null):this.renderSummary(),Object(Qe.isShortcutMenuEnabled)()?a.a.createElement(D$,{key:"QUICK_ADD_ITEMS",externalId:"issue.quick-add"}):a.a.createElement(B$,{key:"QUICK_ADD_ITEMS",externalId:"issue.quick-add"}),a.a.createElement(QB,{key:"CONTENT_ITEMS",isCompactMode:!1}),a.a.createElement(Cu,{key:"ACTIVITY_FEED",externalId:"issue.activity-feed"}))),a.a.createElement(e,{medium:4,issueMaxWidth:this.props.issueMaxWidth,isRightmost:!0,scrollHidden:!this.props.arePanelsClosed,innerRef:this.setSidePanelContainer},a.a.createElement(t,{isRightmost:!0,innerRef:this.setPanelColumn,issueMaxWidth:this.props.issueMaxWidth,"data-test-id":"issue.views.issue-details.issue-layout.right-most-column"},this.renderHeaderActions(),this.renderFullSizeLayoutSideContent())))},this.renderCompactLayoutItems=()=>[Object(Qe.isTemplatedFoundationContentEnabled)()?a.a.createElement(DC,null):this.renderSummary(),a.a.createElement(D$,{key:"QUICK_ADD_ITEMS",externalId:"issue.quick-add"}),Object(Qe.isTemplatedFoundationContextEnabled)()?a.a.createElement(AC,null):this.renderStatusFieldAndApprovals(),a.a.createElement(QB,{key:"CONTENT_ITEMS",isCompactMode:!0}),Object(Qe.isTemplatedBaseContextEnabled)()?a.a.createElement(H$.a,{key:"CONTEXT_ITEMS"},a.a.createElement(LC,{externalId:"issue.context-items"})):this.renderContextItems(),a.a.createElement(H$.b,{"data-test-id":"issue.views.issue-details.issue-layout.footnote",key:"FOOTNOTE_WRAPPER_KEY"},a.a.createElement(cG,{key:"META_CONTAINER"}),a.a.createElement(HH,{key:"CONFIGURE_FIELDS"})),a.a.createElement(Cu,{key:"ACTIVITY_FEED",externalId:"issue.activity-feed"})],this.renderCompactLayout=()=>a.a.createElement(H$.f,{scrollHidden:!this.props.arePanelsClosed,innerRef:this.setSidePanelContainer},a.a.createElement(H$.e,{issueMaxWidth:this.props.issueMaxWidth,innerRef:this.setPanelColumn},this.renderCompactHeader(),a.a.createElement(H$.j,{innerRef:this.setVisibilityContainer,show:this.props.arePanelsClosed,key:"sideContentWrapper"},a.a.createElement(Ms.a,{isCompact:!0},a.a.createElement(u.a,null,this.renderCompactLayoutItems()))))),this.state={contextWidth:0,refs:{refVisibilityContainer:null,refSidePanelContainerElement:null,refPanelColumnElement:null,refLayoutContainer:null}}}shouldComponentUpdate(e,t){return this.didPropsChange(e)||this.didStateChange(t)}didStateChange(e){const t=this.state,{refs:s}=t,n=G$(t,["refs"]),{refs:a}=e,i=G$(e,["refs"]);return(!this.props.arePanelsClosed||!Di()(n,i))&&!Di()(this.state,e)}didPropsChange(e){return!Di()(this.props,e)}renderStatusFieldAndApprovals(){const e=this.props.shouldShowApprovalPanel?_H:xH;return(a.a.createElement(e,{shouldShowApprovalPanel:this.props.shouldShowApprovalPanel,key:"STATUS"}))}renderConnectGlancePanels(){return this.props.glances.map(e=>a.a.createElement(CH,{key:`connectGlanceAnimatedPanel-${e.appKey}__${e.moduleKey}`,glance:e,openedGlance:this.props.openedGlance,externalId:"issue.glance-panel",glanceType:"CONNECT_ENTITY_TYPE",refs:this.getPassedDownRefs(),isCompact:this.props.isCompact}))}renderGlancePanels(){return this.props.glances.map(e=>a.a.createElement(CH,{key:`connectGlanceAnimatedPanel-${e.appKey}__${e.moduleKey}`,glance:e,openedGlance:this.props.openedGlance,externalId:"issue.glance-panel",refs:this.getPassedDownRefs(),isCompact:this.props.isCompact}))}renderContextPanel(){return a.a.createElement(hH,{key:"context-panel",refs:this.getPassedDownRefs(),isCompact:this.props.isCompact})}render(){const e=this.props.isCompact?this.renderCompactLayout():this.renderFullSizeLayout();return(a.a.createElement(H$.g,{innerRef:this.setLayoutContainer,"data-test-id":"issue.views.issue-details.issue-layout.issue-layout"},e,this.renderGlancePanels(),this.renderContextPanel()))}}Y$.displayName="IssueLayout",Y$.displayName="IssueLayout",Y$.defaultProps={isCompact:!1,shouldRenderHeader:!1,shouldShowApprovalPanel:!1,openedGlance:null,forgeExtensions:[],glances:[]};var Q$=Object(i.b)(e=>({glances:Object(Ra.i)(e),openedGlance:Object(Zf.a)(e),arePanelsClosed:!Object(Zf.a)(e)&&!bO(e),shouldShowApprovalPanel:Object(P.v)(e),shouldRenderHeader:Object(P.N)(e),isMobile:Object(P.u)(e)}),{})(Y$);const J$=Q.default.div(["flex-grow:1;overflow:hidden;display:flex;flex-direction:column;"]),Z$=Q.default.div(["height:100%;display:flex;flex-direction:column;"]);var X$=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcuts.js"),eq=s("./src/packages/issue/issue-view/src/actions/external-actions.js");const tq=(e,t)=>{const s=e.find(e=>e.length);return s&&(s[t]||s[s.length-1])},sq=(e,t)=>{const s=e.find(e=>e.includes(t))||[],n=s.indexOf(t);return[s,n]},nq=(e,t)=>{const s=e.findIndex(e=>e.includes(t));return[s,e[s].indexOf(t)]};function aq(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function iq(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?aq(Object(s),!0).forEach((function(t){rq(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):aq(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function rq(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const oq=Object(j.defineMessages)({nextIssue:{id:"issue.shortcuts.navigatingIssues.nextIssue",defaultMessage:"Next issue"},previousIssue:{id:"issue.shortcuts.navigatingIssues.previousIssue",defaultMessage:"Previous issue"},nextActivity:{id:"issue.shortcuts.navigatingIssues.nextActivity",defaultMessage:"Next activity"},previousActivity:{id:"issue.shortcuts.navigatingIssues.previousActivity",defaultMessage:"Previous activity"},editAssignee:{id:"issue.shortcuts.editAssignee",defaultMessage:"Edit assignee"},commentOnIssue:{id:"issue.shortcuts.commentOnIssue",defaultMessage:"Comment on issue"},editLabels:{id:"issue.shortcuts.editLabels",defaultMessage:"Edit labels"},assignToMe:{id:"issue.shorctus.assignToMe",defaultMessage:"Assign to me"},openShortcutDialog:{id:"issue.shorctus.openShortcutDialog",defaultMessage:"Open shortcut dialog"}});class cq extends n.Component{constructor(...e){super(...e),this.navigateToIssue=e=>{const t=this.props.currentIssueKey;e!==t&&this.props.onNextIssue(t,e)},this.issueActionShortcuts={a:{callback:()=>{Object(Rr.c)().markStartOfInteraction({key:Hr.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0,collectors:[e=>iq(iq({},e),{},{viaShortcut:1})]});const e=Object(eq.d)(Object(eq.c)("assignee"));this.props.triggerShortcutAction(e,"assignIssue","a")},label:a.a.createElement(j.FormattedMessage,oq.editAssignee),priority:999},i:{callback:()=>{Object(Rr.c)().markStartOfInteraction({key:Hr.TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT,cancelExisting:!0});const e=Object(eq.d)(Object(eq.b)());this.props.triggerShortcutAction(e,"assignToMe","i")},label:a.a.createElement(j.FormattedMessage,oq.assignToMe),priority:999},l:{callback:()=>{Object(Rr.c)().markStartOfInteraction({key:$r.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0});const e=Object(eq.d)(Object(eq.c)("labels"));this.props.triggerShortcutAction(e,"editLabels","l")},label:a.a.createElement(j.FormattedMessage,oq.editLabels),priority:999},m:{callback:()=>{Object(Rr.c)().markStartOfInteraction({key:Qr.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0});const e=Object(eq.d)(Object(eq.a)());this.props.triggerShortcutAction(e,"commentIssue","m")},label:a.a.createElement(j.FormattedMessage,oq.commentOnIssue),priority:999}},this.boardNavigationShortcuts={j:{callback:()=>{this.navigateToIssue(((e,t)=>{if(!e)return t;const[s,n]=sq(e,t);return s[n+1]||t})(this.props.rapidViewMap,this.props.currentIssueKey))},label:a.a.createElement(j.FormattedMessage,oq.nextIssue),priority:999},k:{callback:()=>{this.navigateToIssue(((e,t)=>{if(!e)return t;const[s,n]=sq(e,t);return s[n-1]||t})(this.props.rapidViewMap,this.props.currentIssueKey))},label:a.a.createElement(j.FormattedMessage,oq.previousIssue),priority:999},n:{callback:()=>{this.navigateToIssue(((e,t)=>{if(!e)return t;const[s,n]=nq(e,t),a=e.slice(s+1);return tq(a,n)||t})(this.props.rapidViewMap,this.props.currentIssueKey))},label:a.a.createElement(j.FormattedMessage,oq.nextActivity),priority:999},p:{callback:()=>{this.navigateToIssue(((e,t)=>{if(!e)return t;const[s,n]=nq(e,t),a=e.slice(0,s).reverse();return tq(a,n)||t})(this.props.rapidViewMap,this.props.currentIssueKey))},label:a.a.createElement(j.FormattedMessage,oq.previousActivity),priority:999}}}render(){const e=iq(iq({},this.props.rapidViewMap?this.boardNavigationShortcuts:{}),this.issueActionShortcuts);return Object(Qe.isShortcutMenuEnabled)()&&(e["."]={callback:()=>{if(this.props.triggerShortcutAction((()=>({type:"TRIGGER_SHORTCUT_DIALOG_OPEN"}))(),"triggerShortcutDialogOpen","."),this.props.createAnalyticsEvent){const e=this.props.createAnalyticsEvent({action:"pressed",actionSubject:"keyboardShortcut"});Object(qi.h)(e,"dotDialogKeyboardShortcut")}},label:a.a.createElement(j.FormattedMessage,oq.openShortcutDialog),priority:999}),a.a.createElement(X$.a,{keyMap:e})}}cq.displayName="KeyboardShortcuts",cq.displayName="KeyboardShortcuts";var lq=Object(Ts.a)([Object(Vs.a)("keyboardShortcut",{triggerShortcutAction:"pressed"}),Object(E.a)({triggerShortcutAction:(e,t,s)=>({name:t,key:s})}),Object(i.b)(e=>({rapidViewMap:Object(P.K)(e),currentIssueKey:Object(P.B)(e)}),e=>({onNextIssue:(t,s)=>e(Object(Yv.c)({fromIssueKey:t,toIssueKey:s})),triggerShortcutAction:t=>setTimeout(()=>e(t),0)}))])(cq);const uq=Object(Xn.createSelector)(_.I,e=>e.shortcutDialog.triggerShortcutDialogCount);Object(Xn.createSelector)(FH.b,Yu.g,(e,t)=>({comment:t.canAddComments,logWork:t.canLogWork,attachFiles:t.canCreateAttachments,createSubtask:t.canCreateSubtask,convertSubtask:e,move:t.canMoveIssue,clone:t.canCloneIssue}));var dq=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/transition-screen-legacy-dialog/index.js"),pq=s("./src/packages/shortcuts-dialog/src/controllers/register-shortcuts/index.js"),mq=Object(j.defineMessages)({editFieldsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.edit-fields",defaultMessage:"Edit Fields"},issueActionsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions",defaultMessage:"Issue Actions"},issueWorkflowsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.issue-workflows",defaultMessage:"Workflow"},issueActionComment:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.comment",defaultMessage:"Comment"},issueActionLogwork:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.log-work",defaultMessage:"Log work"},issueActionAttachFiles:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.attach-files",defaultMessage:"Attach files"},issueActionCreateSubtask:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.create-subtask",defaultMessage:"Create sub-task"},issueActionConvertSubtask:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.convert-subtask",defaultMessage:"Convert to sub-task"},issueActionMove:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.move",defaultMessage:"Move"},issueActionClone:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.clone",defaultMessage:"Clone"}});function bq(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function fq(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?bq(Object(s),!0).forEach((function(t){gq(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):bq(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function gq(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const hq=e=>{const[t,s]=Object(n.useState)([]),{formatMessage:i}=Object(Ge.c)(),{createAnalyticsEvent:r}=Object(Ey.a)(),{baseUrl:o,issueId:c,issueKey:l,fieldsShortcuts:u,onIssueFieldsSelected:d,canCreateAttachment:p,shouldShowCreateSubtaskButton:m,shouldShowIssueInEpicButton:b,canCreateIssueLink:f,onAddAttachmentClick:g,onCreateSubtaskClick:h,onCreateIssueInEpicClick:y,onChildCreateClick:O,supportsChildCreation:j,isServiceDesk:E,canLinkConfluencePage:v,onLinkConfluencePageClick:k,onCreateMajorIncidentClick:w,incidentLinking:S,incidentEscalate:I,onLinkIncidentClick:C,canAddWebLinks:T,onAddWebLinkClick:P,onAddIssueLinkClick:_,onChangeWorkflow:x}=e,D=Object(n.useCallback)(async e=>{e.hasScreen?new dq.a({baseUrl:o,transitionId:e.id,issueKey:l}).onDialogSuccess(()=>{x(e,!0)}).show():(await Object(Bu.d)(`/rest/api/2/issue/${l}/transitions`,{body:JSON.stringify({transition:e})}),x(e,!1))},[o,l,x]),A=Object(n.useCallback)(async()=>{if(!l||void 0===c)return;const e={key:"issue.edit-fields",label:i(mq.editFieldsSectionLabel),isLoaded:!0,weight:1,options:u.map(e=>fq(fq({},e),{},{action:()=>d(e,r({}))}))},t=v$({formatMessage:i,canCreateAttachment:p,shouldShowCreateSubtaskButton:m,shouldShowIssueInEpicButton:b,canCreateIssueLink:f,onAddAttachmentClick:g,onCreateSubtaskClick:h,onCreateIssueInEpicClick:y,onChildCreateClick:O,supportsChildCreation:j,isServiceDesk:E,canLinkConfluencePage:v,onLinkConfluencePageClick:k,onCreateMajorIncidentClick:w,incidentLinking:S,incidentEscalate:I,onLinkIncidentClick:C,canAddWebLinks:T,onAddWebLinkClick:P,onAddIssueLinkClick:_}),n=Object.keys(t).map(e=>t[e]).flat().map(({id:e,label:t,onClick:s})=>({value:e,label:t,action:s})),a={key:"issue.actions",label:i(mq.issueActionsSectionLabel),isLoaded:!0,weight:2,options:n},o=await Object(rp.a)(`/rest/api/2/issue/${l}/transitions`),x={key:"issue.workflows",label:i(mq.issueWorkflowsSectionLabel),isLoaded:!0,weight:3,options:o.transitions.map(e=>({value:e.id,label:e.name,action:()=>D(e)}))};s([e,a,x])},[l,c,i,u,p,m,b,f,g,h,y,O,j,E,v,k,w,S,I,C,T,P,_,r,d,D]);if(!l||void 0===c)return null;const{triggerShortcutDialogCount:M}=e;return(a.a.createElement(pq.a,{shortcuts:t,triggerShortcutDialogCount:M,onShortcutDialogOpen:A}))};hq.displayName="RegisterShortcutsDialogHelper";var yq=hq;function Oq(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function jq(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Oq(Object(s),!0).forEach((function(t){Eq(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Oq(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Eq(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var vq=Object(Ts.a)([Object(i.b)(e=>jq(jq({},bG(e)),{},{fieldsShortcuts:Object(ea.u)(e),triggerShortcutDialogCount:uq(e),baseUrl:Object(P.g)(e),issueId:Object(P.A)(e),issueKey:Object(P.B)(e)}),e=>jq(jq({},x$(e)),{},{onChangeWorkflow:(t,s)=>{e(Object(_O.c)("status",SC,t.to)),e(Object(_O.e)("status",t.to,{viaDialog:s}))},onIssueFieldsSelected:(t,s)=>{e(((e,t,s)=>({type:"FIELD_SHORTCUT_SELECTED",payload:{fieldKey:e,isRichTextField:t,analyticsEvent:s}}))(t.value,t.isRichTextField||!1,s))}})),j.injectIntl])(yq);function kq(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wq(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kq(Object(s),!0).forEach((function(t){Sq(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kq(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Sq(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Iq=["epic","sprint","storyPointsField","com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color","com.pyxis.greenhopper.jira:jsw-story-points"],Cq=e=>e?Iq.map(t=>{const s=Object(ea.q)(t)(e);return s?{[t]:s.key}:{}}).reduce((e,t)=>wq(wq({},e),t),{}):{};var Tq=Object(b.a)()(Object(i.b)((e,t)=>({fields:Object(ea.t)(e),issueId:Object(P.A)(e),baseUrl:Object(P.g)(e),cloudId:Object(P.j)(e),projectId:Object(_.C)(e),accountIdloggedInUser:Object(P.a)(e),issueKey:Object(P.B)(e),customFieldMappings:Cq(e),createAnalyticsEvent:t.createAnalyticsEvent}),{})(xp));function Pq(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _q(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Pq(Object(s),!0).forEach((function(t){xq(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Pq(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xq(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Dq extends n.Component{constructor(...e){super(...e),this.state={isIssueContainerReady:!1},this.setIssueBodyContainerRef=e=>{e&&(this.issueBodyContainerRef=e,this.setState({isIssueContainerReady:!0}))},this.hasErrored=!1,this.issueBodyContainerRef=void 0,this.renderError=(e,t)=>{const{isComplete:s}=this.props;let n;switch(n=Object(Qe.isImproveIssueExpressLoggingEnabled)()||t?_q({},t):{errorMessage:e},e){case"AUTHENTICATION_ERROR":return s?a.a.createElement(As.c,{location:"auth-error"},a.a.createElement(ji,null)):a.a.createElement(ji,null);case"NOT_FOUND_OR_NO_PERMISSION_ERROR":return s?a.a.createElement(As.c,{location:"not-found-or-no-permission-error"},a.a.createElement(Si,null)):a.a.createElement(Si,null);case"CONNECTIVITY_ERROR":return a.a.createElement(_i,null);case"UNKNOWN_ERROR":default:{const e=null==t?void 0:t.statusCode,i=!Object(Qe.isSkip4xxReportingEnabled)()||!e||!Object(Ds.b)(e);return s&&i?a.a.createElement(As.a,{location:"unknown-error",failureEventAttributes:n},a.a.createElement(_i,null)):a.a.createElement(_i,null)}}},this.renderAttachmentPickers=()=>{const{isServiceDesk:e,isComplete:t,projectType:s}=this.props;return t?a.a.createElement(ka,{experience:"renderAttachmentPickers",analyticsSource:e?"issue-view-jsd":"issue-view-non-jsd",projectType:s,isReady:this.state.isIssueContainerReady&&!!this.issueBodyContainerRef},e?a.a.createElement(a.a.Fragment,null,a.a.createElement(Zn,null),a.a.createElement(ca,null),this.state.isIssueContainerReady&&this.issueBodyContainerRef&&a.a.createElement(pa,{container:this.issueBodyContainerRef})):a.a.createElement("div",null,a.a.createElement(Rn,null),a.a.createElement(oa,null),this.state.isIssueContainerReady&&a.a.createElement(ya,{container:this.issueBodyContainerRef}))):null}}componentDidMount(){const{onRefresh:e,onMount:t}=this.props;t(),h.a.addRefreshIssueListener(e),this.props.isComplete&&this.props.onLoadedIssueView()}shouldComponentUpdate(e){const{error:t,isLoading:s}=this.props,n=s&&e.isLoading;return e.error!==t||!n}componentDidUpdate(e){const{error:t}=this.props;null!=t&&(this.hasErrored=!0),this.hasErrored||this.isCompleteStateForFirstTime(e)&&this.props.onLoadedIssueView()}componentWillUnmount(){h.a.removeRefreshIssueListener(this.props.onRefresh)}isCompleteStateForFirstTime(e){const{isComplete:t}=this.props;return t&&!e.isComplete}renderWorklogModal(){switch(this.props.worklogModal){case"ADD_MODAL":return a.a.createElement(Lt,null);case"EDIT_MODAL":return a.a.createElement(ds,null);case"DELETE_MODAL":return a.a.createElement(ns,null);case"NO_MODAL":default:return null}}renderMainContent(){const{error:e,errorMessage:t,isLoading:s,isCompact:n,issueMaxWidth:i,shouldShowCloseButton:r,onClose:o}=this.props;return null!=e?a.a.createElement(Ms.a,{isCompact:n},a.a.createElement(u.a,{medium:Object(Qe.isSideBySideLabelsAndFieldsEnabled)()?10:12},r&&a.a.createElement(oi.a,{viewModeOptions:this.props.viewModeOptions,shouldShowCloseButton:!0,onClose:o}),this.renderError(e,t))):s?a.a.createElement(Ls.b,{issueMaxWidth:i}):a.a.createElement(Z$,{innerRef:this.setIssueBodyContainerRef},a.a.createElement(Q$,{renderFeedback:this.props.renderFeedback,issueDeleteCallbacks:this.props.issueDeleteCallbacks,viewModeOptions:this.props.viewModeOptions,isStickyHeaderOffset:this.props.isStickyHeaderOffset,onClose:o,isCompact:n,issueMaxWidth:i,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowCloseButton:r}),this.renderWorklogModal(),this.renderAttachmentPickers(),a.a.createElement(Fa,{externalId:"issue.ecosystem"}),this.props.isComplete&&a.a.createElement(ri,null),a.a.createElement(Tq,null))}render(){const{jql:e,filter:t}=l.a.parse(window.location.search),s=null!=e||null!=t;return a.a.createElement(J$,null,a.a.createElement(Ss,{isLoading:this.props.isLoading,isPreview:this.props.isPreview,isComplete:this.props.isComplete,error:this.props.error,metrics:this.props.metrics,issueKey:this.props.issueKey}),this.props.isComplete?a.a.createElement(m.a,null):null,a.a.createElement(an,{externalId:"issue.flags"}),a.a.createElement(lq,null),a.a.createElement(d.d,null,this.renderMainContent()),Object(Qe.isShortcutMenuEnabled)()&&!s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,null),a.a.createElement(vq,null)))}}Dq.displayName="Issue",Dq.displayName="Issue",Dq.defaultProps={projectType:null,onLoadedIssueView:o.a,onMount:o.a};t.default=Object(Ts.a)([Object(b.a)({onLoadedIssueView:{action:"mounted"}}),Object(i.b)(e=>({isLoading:Object(_.r)(e),isPreview:Object(_.s)(e),isComplete:Object(_.m)(e),error:Object(_.h)(e),errorMessage:Object(_.g)(e),issueKey:Object(P.B)(e),isServiceDesk:Object(P.v)(e),projectType:Object(_.F)(e),worklogModal:Object(D.f)(e)}),e=>({onRefresh:()=>e(Object(ps.g)()),onMount:()=>{e((()=>({type:"ISSUE_VIEW_MOUNTED"}))())},onLoadedIssueView:e=>{const t={action:"viewed"};try{Object(f.a)(e,t)}catch(e){y.a.safeError("issue.viewed",e,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))}}})),Rs.a,(()=>e=>{var t,s;return s=t=class extends n.Component{constructor(...e){super(...e),this.MetricsContext=Object(Is.c)()}render(){const{MetricsContext:t}=this;return(a.a.createElement(t.Consumer,null,t=>a.a.createElement(e,Cs({},this.props,{metrics:t}))))}},t.displayName=`WithMetricsConsumer(${e.displayName||e.name})`,s})(),Object(g.a)(e=>{const t=Object(xs.a)(e),s=Object(_s.b)(e);return _q(_q({},t),{},{attributes:_q(_q(_q(_q({},t.attributes),s),Object(_.j)()),{},{issueHierarchyLevel:Object(Ps.d)(e)})})})])(Dq)},"./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),c=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js"),l=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js");class u extends n.Component{constructor(e){super(e),this.state={shouldShowKeyline:!1},this.getScrollContainer=()=>(this.scrollContainer||(this.scrollContainer=Object(c.a)(this.innerEl.current)),this.scrollContainer),this.calculateShouldShowKeyline=r()(()=>{const e=this.getScrollContainer(),t=this.innerEl.current;if(!e||!t)return;const s=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=Math.max(s.top,0),i=e.scrollTop>0&&n.top<=a;i!==this.state.shouldShowKeyline&&this.setState({shouldShowKeyline:i})},100),this.scrollContainer=null,this.innerEl=void 0,this.innerEl=Object(n.createRef)()}componentDidMount(){if(!Object(o.d)()){const e=this.getScrollContainer();e&&e.addEventListener("scroll",this.calculateShouldShowKeyline),this.calculateShouldShowKeyline()}}componentWillUnmount(){if(!Object(o.d)()){const e=this.getScrollContainer();e&&e.removeEventListener("scroll",this.calculateShouldShowKeyline)}}render(){return a.a.createElement(l.a,{topOffset:0,id:this.props.elementId,showKeyline:this.state.shouldShowKeyline,innerRef:this.innerEl,customStyles:this.props.customStyles},this.props.children)}}u.displayName="WithShouldShowKeyline"},"./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/esm/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=i.e,o=n.default.div(["@supports (position:sticky) or (position:-webkit-sticky){position:sticky;background:white;z-index:",";padding-left:","px;margin-left:-","px;padding-top:","px;top:","px;",";",";}"],i.f.card-1,r,r,1,e=>e.topOffset+-1,e=>e.showKeyline?`box-shadow: 0 2px ${a.a.N30}`:"",e=>e.customStyles||"")},"./src/packages/issue/jira-settings-service/src/main.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return p})),s.d(t,"a",(function(){return m}));var n={};s.r(n),s.d(n,"setJiraSettings",(function(){return r}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/index.js");const r=e=>({setState:t})=>{t(e)},o=Object(i.d)({name:"jiraSettings",initialState:{newIssueViewTransitionSettings:{newIssueViewTransitionLockingStatus:"DEFAULT_TO_NEW_ISSUE_VIEW",shouldDelayChangeboarding:!1},issueLinkTypes:[],subtasksConfiguration:{enabled:!0},timeTrackingConfiguration:{isTimeTrackingEnabled:!1,daysPerWeek:0,hoursPerDay:0,defaultUnit:"minute"}},actions:n}),c=Object(i.c)(o,{selector:e=>e.timeTrackingConfiguration}),l=Object(i.c)(o,{selector:e=>e.newIssueViewTransitionSettings||void 0}),u=(Object(i.c)(o,{selector:e=>e.subtasksConfiguration}),Object(i.c)(o,{selector:e=>e.issueLinkTypes}),Object(i.c)(o,{selector:null})),d=()=>{const[e]=c();return[e]},p=()=>{const[e]=l();return[e]},m=()=>{const[,{setJiraSettings:e}]=u();return[null,Object(a.useMemo)(()=>({setJiraSettings:e}),[e])]}},"./src/packages/issue/opt-in-back/src/async.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return i}));var n=s("./node_modules/react-async-component/commonjs/index.js");const a=Object(n.asyncComponent)({resolve:()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("async-issue-details-opt-in-back-modal")]).then(s.bind(null,"./src/packages/issue/opt-in-back/src/ui/opt-in-modal/index.js")).then(e=>e.default),name:"AsyncOptInBackModal"}),i=Object(n.asyncComponent)({resolve:()=>s.e("async-issue-details-opt-in-back-onboarding").then(s.bind(null,"./src/packages/issue/opt-in-back/src/ui/onboarding/index.js")).then(e=>e.default),name:"AsyncOptInBackOnboarding"})},"./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n={};s.r(n),s.d(n,"setTourIsActive",(function(){return i})),s.d(n,"setTourIsInactive",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/index.js");const i=()=>({setState:e})=>{e({isTourActive:!0})},r=()=>({setState:e})=>{e({isTourActive:!1})},o=Object(a.d)({name:"new-issue-view-onboarding",initialState:{isTourActive:!1},actions:n}),c=Object(a.c)(o,{selector:e=>e}),l=Object(a.b)(o)},"./src/packages/issue/opt-in-back/src/services/onboarding-tour/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js");const i=()=>{const[{isTourActive:e},{setTourIsActive:t,setTourIsInactive:s}]=Object(a.b)();return[{isTourActive:e},Object(n.useMemo)(()=>({setTourIsActive:t,setTourIsInactive:s}),[t,s])]}},"./src/packages/issue/permissions-service/src/context.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return c}));var n={};s.r(n),s.d(n,"setPermissions",(function(){return i}));var a=s("./node_modules/react-sweet-state/lib/esm/index.js");const i=e=>({setState:t})=>{t(e)},r={canAddComments:!1,canAdministerJira:!1,canAdministerProject:!1,canAssignIssues:!1,canBeAssignedToIssues:!1,canCloneIssue:!1,canCreateAttachments:!1,canCreateChildren:!1,canCreateSubtask:!1,canDeleteAllAttachments:!1,canDeleteAllComments:!1,canDeleteAllWorklogs:!1,canDeleteIssue:!1,canDeleteOwnAttachments:!1,canDeleteOwnComments:!1,canDeleteOwnWorklogs:!1,canEditAllComments:!1,canEditAllWorklogs:!1,canEditIssues:!1,canEditOwnComments:!1,canEditOwnWorklogs:!1,canLinkIssues:!1,canLogWork:!1,canManageWatchers:!1,canMoveIssue:!1,canScheduleIssues:!1,canUseServiceDeskAgentFeatures:!1,canBrowseUsers:!1,canViewDevTools:!1,canViewWatchers:!1,canViewVoters:!1,canCreateIssuesInClassicProjectEpic:!1},o=Object(a.d)({name:"permissions",initialState:r,actions:n}),c=Object(a.c)(o,{selector:e=>e})},"./src/packages/issue/permissions-service/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/permissions-service/src/context.js");const i=()=>{const[e,{setPermissions:t}]=Object(a.b)();return[e,Object(n.useMemo)(()=>({setPermissions:t}),[t])]}},"./src/packages/issue/project-context-service/src/main.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return y})),s.d(t,"d",(function(){return O})),s.d(t,"a",(function(){return j})),s.d(t,"b",(function(){return E}));var n={};s.r(n),s.d(n,"setProjectContext",(function(){return l})),s.d(n,"mergeProjectProperty",(function(){return u}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/index.js");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){c(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const l=(e,t)=>({setState:s})=>{s({[e]:t})},u=(e,t)=>({setState:s,getState:n})=>{const a=o(o({},n()[e]),t);s({[e]:a})},d=Object(i.d)({name:"project-context",initialState:{},actions:n}),p=Object(i.c)(d,{selector:null}),m=(e,{projectKey:t})=>e[t],b=Object(i.c)(d,{selector:m}),f=Object(i.c)(d,{selector:(e,{projectKey:t})=>{const s=m(e,{projectKey:t});return null==s?void 0:s.projectType}}),g=Object(i.c)(d,{selector:(e,{projectKey:t})=>{const s=m(e,{projectKey:t});return null==s?void 0:s.issueTypeHierarchy}});var h=s("./src/packages/issue/project-context-service/src/utils.js");const y=()=>{const[,{setProjectContext:e,mergeProjectProperty:t}]=p();return[null,Object(a.useMemo)(()=>({setProjectContext:e,mergeProjectProperty:t}),[e,t])]},O=e=>{const[t]=f({projectKey:e});return t},j=e=>{const[t]=b({projectKey:e});return(null==t?void 0:t.isPolarisProject)||!1},E=(e,t=null)=>{const[s]=g({projectKey:e}),n=null==s?void 0:s.levels,i=null==s?void 0:s.baseLevelId;return Object(a.useMemo)(()=>Object(h.a)(i,t,n),[i,t,n])}},"./src/packages/issue/project-context-service/src/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e=null,t=null,s={})=>{if(null==t||null==e||void 0===s[t]||void 0===s[e])return null;if(t===e)return 0;let n=0,a=s[t].aboveLevelId,i=s[t].belowLevelId;for(;null!==a||null!==i;){if(n+=1,a===e)return-n;if(i===e)return n;if(a=null!==a&&s[a]?s[a].aboveLevelId:null,i=null!==i&&s[i]?s[i].belowLevelId:null,a===t||i===t)return null}return null}},"./src/packages/issue/user-preferences-services/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const a=()=>Object(n.b)("issue.details.delete-user-preference",!1)},"./src/packages/issue/user-preferences-services/src/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return O})),s.d(t,"a",(function(){return j}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/index.js"),r=s("./src/packages/issue/user-preferences-services/src/feature-flags.js");function o(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function c(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p={setUserPreferenceValue:(e,t)=>({setState:s,getState:n})=>{Object(r.a)()?s({preferences:u(u({},n().preferences),{},{[e]:t})}):s({[e]:t})},deleteUserPreferenceValue:e=>({setState:t,getState:s})=>{const n=s().preferences,{[e]:a}=n;t({preferences:o(n,[e].map(c))})},setUserPreferences:e=>({setState:t})=>{Object(r.a)()?t({preferences:e}):t(e)}},m=Object(i.d)({name:"user-preferences",initialState:{preferences:{}},actions:p}),b=Object(i.c)(m,{selector:(e,t)=>Object(r.a)()?e.preferences[t]:e[t]}),f=Object(i.c)(m,{selector:null});var g=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const h=async(e,t,s)=>Object(g.e)(`${e}/rest/api/2/mypreferences?key=${t}`,{body:s}),y=async(e,t)=>Object(g.a)(`${e}/rest/api/2/mypreferences?key=${t}`),O=e=>{const t=Object(a.e)(),[s,{setUserPreferenceValue:i,deleteUserPreferenceValue:o}]=b(e),c=Object(n.useCallback)(s=>{i(e,s),h(t,e,s)},[t,i,e]),l=Object(n.useCallback)(()=>{o(e),y(t,e)},[t,o,e]);return Object(r.a)()?[s,{setValue:c,deleteValue:l}]:[s,c]},j=()=>{const e=Object(a.e)(),[,t]=f();return[null,Object(n.useMemo)(()=>({setUserPreferenceValue:(s,n)=>{t.setUserPreferenceValue(s,n),h(e,s,n)},setUserPreferences:e=>{e&&0!==Object.keys(e).length&&t.setUserPreferences(e)},deleteUserPreferenceValue:s=>{t.deleteUserPreferenceValue(s),y(e,s)}}),[t,e])]}},"./src/packages/issue/worklog/src/services/store/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n={};s.r(n),s.d(n,"markRollingUpData",(function(){return i})),s.d(n,"unmarkRollingUpData",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/index.js");const i=()=>({setState:e})=>{e({isRollingUp:!0})},r=()=>({setState:e})=>{e({isRollingUp:!1})},o=Object(a.d)({name:"worklog-time-tracking",initialState:{isRollingUp:!0},actions:n}),c=Object(a.b)(o)}}]);try{window.__jsEvalStop("async-issue-app~issue.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-issue-app~issue.28e40bd5e52f75d93035.8.js.map